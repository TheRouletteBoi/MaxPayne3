void main()
{
    l_U0 = 1;
    l_U1 = 144;
    l_U2 = 0;
    l_U3 = 1;
    l_U4 = 0;
    l_U5 = 1.00000000;
    l_U6 = -5.00000000;
    l_U7 = 0;
    l_U8 = 0;
    l_U9 = 0;
    l_U13 = 42;
    l_U14 = 0;
    l_U15 = 0;
    l_U16 = 0;
    l_U17 = 0;
    l_U18 = 0;
    l_U19 = 90.00000000;
    l_U20 = {0.00000000, 0.00000000, 0.00000000};
    l_U23 = {0.00000000, 0.00000000, 0.00000000};
    l_U26 = 0;
    l_U27 = 0;
    l_U28 = 0;
    l_U29 = 0;
    l_U30 = 0;
    l_U31 = 0;
    l_U32 = nil;
    l_U33 = {0.00000000, 0.00000000, 0.00000000};
    l_U36 = 0;
    l_U37 = 0;
    l_U38 = 0;
    l_U40 = 0;
    l_U41 = 0;
    l_U42 = 1500;
    StrCopy( ref l_U52, "DEFAULT_SCRIPTED_CAMERA", 32 );
    StrCopy( ref l_U60, "DEFAULT_SPLINE_CAMERA", 32 );
    l_U68 = 0;
    l_U69 = 0;
    l_U70 = 0;
    l_U71 = 0;
    l_U73 = 0;
    l_U75 = 20250.00000000;
    l_U750 = 1300;
    l_U2154 = 0;
    l_U2155 = 4000;
    l_U2156 = 5000;
    l_U2158 = "10_04_BUS_RAIL";
     /* WRITESCRIPTLOG */ sub_442( "CCB", "Script busdepot_railshooter.sc is starting...", 0 );
     /* IMAGEFX_WIDGETS */ sub_560();
    while (NOT IS_EXITFLAG_SET())
    {
         /* P_HANDLE_FAILURE */ sub_761();
         /* P_HANDLE_EVENTS */ sub_14249();
        WAIT( 0 );
    }
     /* P_CLEANUP_ALL */ sub_3547( 0 );
     /* P_UNLOAD_ASSETS */ sub_146855();
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "busdepot_railshooter" );
    SET_EXITFLAG_RESPONSE();
     /* WRITESCRIPTLOG */ sub_442( "CCB", "Script busdepot_railshooter.sc is terminating...", 0 );
    return;
}

/* WRITESCRIPTLOG */ void sub_442(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    DISPLAYF( "[{0}][{1}]{3} {2} {3}", 4, 513, uVar5, 1537, uParam0, 1537, uParam1, 1537, sParam2 );
    return;
}

/* IMAGEFX_WIDGETS */ void sub_560()
{
    START_WIDGET_GROUP( "IMAGE FX" );
    ADD_WIDGET_FLOAT_SLIDER( "fCONST_RailWallScrapeStartFX", ref l_U75, 0, 30000.00000000, 1000.00000000 );
    ADD_WIDGET_INT_SLIDER( "iRAILSMASHFXTIMER", ref l_U750, 0, 20000, 1000 );
    ADD_WIDGET_INT_SLIDER( "Start 3 FX", ref l_U2156, 0, 20000, 1000 );
    STOP_WIDGET_GROUP();
    return;
}

/* P_HANDLE_FAILURE */ void sub_761()
{
    if (g_U764 == 10)
    {
        if ( /* RESTARTING_CHECKPOINT */ sub_802())
        {
            l_U143 = 1;
        }
        if ((l_U143 == 1) || (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
        {
            if (l_U143 == 0)
            {
                while (( /* F_CHECK_QUIT_RETRY */ sub_1391( 1 )) == 0)
                {
                    WAIT( 0 );
                }
                while (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() ))
                {
                    WAIT( 0 );
                }
                if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1136() )))
                {
                    SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1136(), 0, 0 );
                }
            }
            l_U143 = 0;
            if (IS_SCREEN_FADED_IN())
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "FADING OUT!!!", 0 );
                DO_SCREEN_FADE_OUT( 0 );
            }
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Incrementing the checkpoint restart counter:", 0 );
            g_U2875[10]++;
            PRINTINT( g_U2875[10] );
            PRINTNL();
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Suspending music...", 0 );
            AUDIO_MUSIC_SUSPEND( 500 );
             /* P_SETUP_PLAYER_RELATIONSHIPS */ sub_3110();
             /* P_IMAGEFX_STOP_BULLETCAM */ sub_3310( "BUS_BUSPLOSION_SCRIPTED_FAIL_FX" );
            DESTROY_ALL_CAMS();
            RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
             /* P_CLEANUP_ALL */ sub_3547( 1 );
             /* P_UNLOAD_DYNAMIC_ASSETS */ sub_5342();
            g_U764 = 10;
             /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_9514( ref l_U76,  /* PLAYER_PED_ID */ sub_1098() );
            WAIT( 100 );
             /* TELEPORTPED */ sub_14038(  /* PLAYER_PED_ID */ sub_1098(), g_U2339[10], g_U2466[10] );
            SET_CAM_SIDE_LEFT( 0 );
            SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U2509[10], 1065353216, 0 );
            SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U2552[10], 1065353216, 0 );
            RENDER_SCRIPT_CAMS( 0, 0, 0, 0 );
            DESTROY_ALL_CAMS();
            WAIT( 100 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eCheckpoint - STATE_MIDSCENE_INIT", 0 );
            l_U145 = 0;
        }
    }
    return;
}

/* RESTARTING_CHECKPOINT */ int sub_802()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U0 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
        {
            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_1098(), 0 );
            SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_1136(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE(  /* PLAYER_ID */ sub_1136(), 1 );
            if ((IS_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_1098() )) == 0)
            {
                SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_1098(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

/* PLAYER_PED_ID */ int sub_1098()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED(  /* PLAYER_ID */ sub_1136() );
    }
    return 0;
}

/* PLAYER_ID */ void sub_1136()
{
    return GET_PLAYER_ID();
}

/* F_CHECK_QUIT_RETRY */ int sub_1391(int iParam0)
{
    iParam0 = 1;
    switch (l_U41)
    {
        case 0:
        if (NOT ( /* HASTIMERBEENACTIVATED */ sub_1473( ref l_U43 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
            {
                l_U42 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
             /* CREATETIMER */ sub_1607( ref l_U43, l_U42, 1, 1 );
             /* STARTTIMER */ sub_1757( ref l_U43 );
        }
        if ( /* ISTIMERDONE */ sub_1890( ref l_U43 ))
        {
             /* WRITESCRIPTLOG */ sub_442( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1136() )))
            {
                SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1136(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U41 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U41 = 2;
            }
            else
            {
                l_U41 = 3;
            }
        }
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_442( "NS", "Player will QUIT", 0 );
         /* P_POSTQUITRETRYCLEANUP */ sub_2391();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_442( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
         /* P_POSTQUITRETRYCLEANUP */ sub_2391();
        return 1;
        break;
    }
    return 0;
}

/* HASTIMERBEENACTIVATED */ int sub_1473(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

/* CREATETIMER */ void sub_1607(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

/* STARTTIMER */ void sub_1757(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

/* ISTIMERDONE */ int sub_1890(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

/* P_POSTQUITRETRYCLEANUP */ void sub_2391()
{
     /* WRITESCRIPTLOG */ sub_442( "NS", "P_PostFailRetryCleanup", 0 );
     /* RESETTIMER */ sub_2466( ref l_U43 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1136() )))
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1136(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U40 = 0;
    l_U40 = l_U40;
    l_U41 = 0;
    return;
}

/* RESETTIMER */ void sub_2466(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

/* P_SETUP_PLAYER_RELATIONSHIPS */ void sub_3110()
{
     /* WRITESCRIPTLOG */ sub_442( "SP", "P_SETUP_PLAYER_RELATIONSHIPS", 0 );
    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )) == 0)
    {
        SET_PED_RELATIONSHIP(  /* PLAYER_PED_ID */ sub_1098(), 0, 1 );
        SET_PED_RELATIONSHIP(  /* PLAYER_PED_ID */ sub_1098(), 0, 2 );
        SET_PED_RELATIONSHIP(  /* PLAYER_PED_ID */ sub_1098(), 0, 6 );
        SET_PED_RELATIONSHIP(  /* PLAYER_PED_ID */ sub_1098(), 0, 7 );
    }
    return;
}

/* P_IMAGEFX_STOP_BULLETCAM */ void sub_3310(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_442( "CO", "P_IMAGEFX_STOP_BULLETCAM:  Cameras Deleted", 0 );
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
     /* CLEANCAMERA */ sub_3420( ref l_U74 );
    l_U73 = 1;
    return;
}

/* CLEANCAMERA */ void sub_3420(unknown uParam0)
{
    if ((DOES_CAM_EXIST( (uParam0^) )) == 1)
    {
        if ((IS_CAM_ACTIVE( (uParam0^) )) == 1)
        {
            SET_CAM_ACTIVE( (uParam0^), 0 );
        }
        DESTROY_CAM( (uParam0^) );
    }
    (uParam0^) = nil;
    return;
}

/* P_CLEANUP_ALL */ void sub_3547(boolean bParam0)
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_CLEANUP_ALL", 0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
        if (IS_PED_ATTACHED_TO_ANY_VEHICLE(  /* PLAYER_PED_ID */ sub_1098() ))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Detaching the player.", 0 );
            DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
        }
        if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1136() )))
        {
            SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_1136(), 0, 0 );
        }
    }
    if (NOT (IS_PED_DEAD( g_U2595 )))
    {
        if (IS_PED_ATTACHED_TO_ANY_VEHICLE( g_U2595 ))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Detaching Gio.", 0 );
            DETACH_PED( g_U2595, 1 );
        }
    }
    if (bParam0)
    {
         /* CLEANPED */ sub_3806( g_U2595 );
        TOGGLE_DISPLAY_AMMO( 1 );
    }
     /* CLEANPED */ sub_3806( l_U286 );
     /* CLEANPEDARRAY */ sub_3913( ref l_U246 );
     /* CLEANPEDARRAY */ sub_3913( ref l_U251 );
     /* CLEANPEDARRAY */ sub_3913( ref l_U262 );
     /* CLEANPEDARRAY */ sub_3913( ref l_U267 );
     /* CLEANPEDARRAY */ sub_3913( ref l_U271 );
     /* CLEANPEDARRAY */ sub_3913( ref l_U275 );
     /* CLEANVEHICLE */ sub_4037( g_U2918 );
     /* CLEANVEHICLEARRAY */ sub_4110( ref l_U287 );
     /* CLEANVEHICLE */ sub_4037( l_U290 );
     /* CLEANVEHICLE */ sub_4037( l_U296 );
     /* CLEANVEHICLEARRAY */ sub_4110( ref l_U291 );
     /* CLEANVEHICLEARRAY */ sub_4110( ref l_U297 );
    SET_ALL_VEHICLES_HIGH_LOD( 0 );
     /* CLEANOBJECTARRAY */ sub_4238( ref l_U302 );
     /* CLEANOBJECTARRAY */ sub_4238( ref l_U307 );
     /* CLEANOBJECTARRAY */ sub_4238( ref l_U310 );
     /* CAM_DESTROY_CAMERA_INDEX_ARRAY */ sub_4385( ref l_U680 );
     /* CAM_DESTROY_CAMERA_INDEX_ARRAY */ sub_4385( ref l_U684 );
     /* CAM_DESTROY_CAMERA_INDEX_ARRAY */ sub_4385( ref l_U688 );
     /* CAM_DESTROY_CAMERA_INDEX_ARRAY */ sub_4385( ref l_U696 );
     /* CAM_DESTROY_CAMERA_INDEX_ARRAY */ sub_4385( ref l_U713 );
    SET_CAMERA_OVERRIDE( "", "", 0, 1, 1 );
    SET_RAIL_RELATIVE_DIR( 0, 0 );
    SET_PLAYER_COMBAT_TIMER_MODE( 0 );
    SET_HIGH_RAGDOLL_LOD_LIMIT_TO_DEFAULT();
    RESET_PED_MODEL_LOD_DISTANCES( g_U2105 );
    CAMERA_USE_HANDY_CAM( 0, 1065353216, 0 );
    if (IS_ANIMATED_CAMERA_PLAYING())
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
        CAMERA_ANIMATED_STOP( 3000, 0 );
    }
    STOP_SCRIPT_STREAM( 0 );
    STOP_SCRIPT_STREAM( 1 );
    STOP_SCRIPT_STREAM( 2 );
     /* P_STREAMREQ_SCRIPT_STREAM_RESET_STRUCT */ sub_4691( ref g_U1704 );
    ENABLE_AUDIO_MISSION_FLAG( 2, 0 );
    SET_USING_ALT_HEALTH( 0 );
    HUD_SET_PLAYER_HEALTH_TEXTURE( "mp3_hud_health_airport" );
    ENABLE_HIT_DETECTION( 1 );
    ENABLE_LAST_MAN_STANDING( 1 );
    SET_INSTANT_FIRE_FORCED( 0 );
    ALLOW_BULLET_CAMERA_CHEAT( 1 );
    if (CUTSCENE_IS_LOADED( "10_03_bus" ))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Unloading 10_03_bus cutscene...", 0 );
        CLEAR_NAMED_CUTSCENE( "10_03_bus" );
    }
     /* P_CLEAN_IMAGEFX */ sub_5069( ref l_U1583 );
     /* P_CLEAN_IMAGEFX */ sub_5069( ref l_U1773 );
     /* P_CLEAN_IMAGEFX */ sub_5069( ref l_U1882 );
     /* P_STOP_SP_CHALLENGES */ sub_5167();
    return;
}

/* CLEANPED */ void sub_3806(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

/* CLEANPEDARRAY */ void sub_3913(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
         /* CLEANPED */ sub_3806( (uParam0^)[I] );
    }
    return;
}

/* CLEANVEHICLE */ void sub_4037(unknown uParam0)
{
    if (IS_VEHICLE_DEAD( uParam0 ))
    {
        ;
    }
    if (DOES_VEHICLE_EXIST( uParam0 ))
    {
        DELETE_VEHICLE( ref uParam0 );
    }
    return;
}

/* CLEANVEHICLEARRAY */ void sub_4110(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
         /* CLEANVEHICLE */ sub_4037( (uParam0^)[I] );
    }
    return;
}

/* CLEANOBJECTARRAY */ void sub_4238(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* CLEANOBJECT */ sub_4290( (uParam0^)[I] );
    }
    return;
}

/* CLEANOBJECT */ void sub_4290(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

/* CAM_DESTROY_CAMERA_INDEX_ARRAY */ void sub_4385(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (DOES_CAM_EXIST( (uParam0^)[I] ))
        {
            DESTROY_CAM( (uParam0^)[I] );
        }
    }
    return;
}

/* P_STREAMREQ_SCRIPT_STREAM_RESET_STRUCT */ void sub_4691(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        StrCopy( ref (uParam0^)[I]._fU0, "", 32 );
        (uParam0^)[I]._fU32 = 0;
         /* P_STREAMREQ_THREADID_RESET */ sub_4793( ref (uParam0^)[I]._fU36 );
    }
    return;
}

/* P_STREAMREQ_THREADID_RESET */ void sub_4793(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        (uParam0^)[I] = nil;
    }
    return;
}

/* P_CLEAN_IMAGEFX */ void sub_5069(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        STOP_IMAGEFX( (uParam0^)[I]._fU0, 0 );
    }
    return;
}

/* P_STOP_SP_CHALLENGES */ void sub_5167()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_STOP_SP_CHALLENGES", 0 );
     /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping the Bus_Depot_Railshooter context...", 0 );
    END_CONTEXT( "Bus_Depot_Railshooter" );
    return;
}

/* P_UNLOAD_DYNAMIC_ASSETS */ void sub_5342()
{
    if ( /* F_STREAMREQ_MODELNAMES_IS_ASSET_LOADED */ sub_5387( g_U2099, ref g_U910 ))
    {
         /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2099, ref g_U910 );
    }
    if ( /* F_STREAMREQ_MODELNAMES_IS_ASSET_LOADED */ sub_5387( -1221193536, ref g_U910 ))
    {
         /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( -1221193536, ref g_U910 );
    }
    if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 230339392, ref g_U1272 ))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Terminating the S_BUS_VIG_16 ISS.", 0 );
        ISEQ_UNREGISTER_ENTITY( 230339392, "vig16_player" );
        ISEQ_UNREGISTER_ENTITY( 230339392, "vig16_female" );
        ISEQ_TERMINATE( 230339392 );
         /* P_STREAMREQ_ISEQ_REMOVE */ sub_7159( 230339392, ref g_U1272 );
    }
    if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 2022386640, ref g_U1272 ))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Terminating the S_BUS_MID_11 ISS.", 0 );
        ISEQ_UNREGISTER_ENTITY( 2022386640, "mid11_player" );
        ISEQ_UNREGISTER_ENTITY( 2022386640, "mid11_female" );
        ISEQ_TERMINATE( 2022386640 );
         /* P_STREAMREQ_ISEQ_REMOVE */ sub_7159( 2022386640, ref g_U1272 );
    }
    if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( -384669200, ref g_U1272 ))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Terminating the S_BUS_VIG_19 ISS.", 0 );
        ISEQ_UNREGISTER_ENTITY( -384669200, "vig19_player" );
        ISEQ_UNREGISTER_ENTITY( -384669200, "vig19_female" );
        ISEQ_UNREGISTER_ENTITY( -384669200, "vig19_enemy" );
        ISEQ_TERMINATE( -384669200 );
         /* P_STREAMREQ_ISEQ_REMOVE */ sub_7159( -384669200, ref g_U1272 );
    }
    if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 1783795551, ref g_U1272 ))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Terminating the S_BUS_MID_12 ISS.", 0 );
        ISEQ_UNREGISTER_ENTITY( 1783795551, "mid12_player" );
        ISEQ_UNREGISTER_ENTITY( 1783795551, "mid12_female" );
        ISEQ_TERMINATE( 1783795551 );
         /* P_STREAMREQ_ISEQ_REMOVE */ sub_7159( 1783795551, ref g_U1272 );
    }
    if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 123250951, ref g_U1272 ))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Terminating the S_BUS_10_04 ISS.", 0 );
        ISEQ_UNREGISTER_ENTITY( 123250951, "10_04_player" );
        ISEQ_UNREGISTER_ENTITY( 123250951, "10_04_female" );
        ISEQ_TERMINATE( 123250951 );
         /* P_STREAMREQ_ISEQ_REMOVE */ sub_7159( 123250951, ref g_U1272 );
    }
    if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2330, ref g_U1474 ))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Removing the gnRailshooterBusPart1 vehicle recording.", 0 );
         /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2330, ref g_U1474 );
    }
    if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2331, ref g_U1474 ))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Removing the gnRailshooterBusPart2 vehicle recording.", 0 );
         /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2331, ref g_U1474 );
    }
    if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2332, ref g_U1474 ))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Removing the gnRailshooterBusPart2b vehicle recording.", 0 );
         /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2332, ref g_U1474 );
    }
    if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2333, ref g_U1474 ))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Removing the gnRailshooterBusPart3 vehicle recording.", 0 );
         /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2333, ref g_U1474 );
    }
    if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2333, ref g_U1474 ))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Removing the gnRailshooterBusPart3 vehicle recording.", 0 );
         /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2333, ref g_U1474 );
    }
    if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2334, ref g_U1474 ))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Removing the gnRailshooterBusCrash1 vehicle recording.", 0 );
         /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2334, ref g_U1474 );
    }
    if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2335, ref g_U1474 ))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Removing the gnRailshooterBusCrash2 vehicle recording.", 0 );
         /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2335, ref g_U1474 );
    }
    if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2338, ref g_U1474 ))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Removing the iHeliRecordingPath vehicle recording.", 0 );
         /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2338, ref g_U1474 );
    }
    return;
}

/* F_STREAMREQ_MODELNAMES_IS_ASSET_LOADED */ int sub_5387(int iParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I]._fU4 == 3)
        {
            if ((uParam1^)[I]._fU0 == iParam0)
            {
                DISPLAYF( "[CCB] ### The MODEL_NAME is loaded: {!f1}", 2, 1, -874832622, 513, (uParam1^)[I]._fU0 );
                return 1;
            }
        }
    }
    return 0;
}

/* P_STREAMREQ_MODELNAMES_REMOVE */ void sub_5595(int iParam0, unknown uParam1)
{
    int I;
    int iVar5;

    if (IS_MODEL_IN_CDIMAGE( iParam0 ))
    {
        for ( I = 0; I <= ((uParam1^) - 1); I++ )
        {
            if (((uParam1^)[I]._fU4 == 1) || (((uParam1^)[I]._fU4 == 2) || ((uParam1^)[I]._fU4 == 3)))
            {
                if ((uParam1^)[I]._fU0 == iParam0)
                {
                    iVar5 =  /* F_STREAMREQ_THREADID_IS_INDEX_AVAILABLE_FOR_REMOVE */ sub_5739( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU8 );
                    if (iVar5 == -1)
                    {
                        (uParam1^)[I]._fU4 = 4;
                        return;
                    }
                    else
                    {
                        DISPLAYF( "[CCB] ### Requested ThreadID: {} ###", 1, 513, iVar5 );
                        DISPLAYF( "Trying to remove a MODEL_NAME asset that was requested by another thread!!!", 0 );
                        return;
                    }
                }
            }
        }
    }
    else
    {
        DISPLAYF( "[CCB] ### Removing MODEL_NAME: {!f1} ###", 2, 1, -874832622, 513, iParam0 );
        SCRIPT_ASSERT( "The asset is NOT in the image!!!", 0 );
    }
    return;
}

/* F_STREAMREQ_THREADID_IS_INDEX_AVAILABLE_FOR_REMOVE */ int sub_5739(int iParam0, unknown uParam1)
{
    int I;
    int Result;

    Result = -1;
    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I] == nil)
        {
            ;
        }
        else
        {
            DISPLAYF( "[CCB] ### The THREADID index is being used: {} ###", 1, 513, I );
            if ((uParam1^)[I] == iParam0)
            {
                DISPLAYF( "[CCB] ### The THREADID index matches the asset requested for removal: {} ###", 1, 513, (uParam1^)[I] );
                DISPLAYF( "[CCB] ### Resetting the THREADID index value to NULL: {} ###", 1, 513, I );
                (uParam1^)[I] = nil;
            }
            else if (IS_THREAD_ACTIVE( (uParam1^)[I] ))
            {
                DISPLAYF( "[CCB] ### The THREADID index is in use and is active: {} ###", 1, 513, (uParam1^)[I] );
                Result = I;
            }
            else
            {
                DISPLAYF( "[CCB] ### The THREADID is in use, but is no longer active!!! {} ###", 1, 513, (uParam1^)[I] );
                DISPLAYF( "[CCB] ### Resetting the THREADID index value to NULL: {} ###", 1, 513, I );
                (uParam1^)[I] = nil;
            }
        }
    }
    if (NOT (Result == -1))
    {
        return Result;
    }
    return -1;
}

/* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ int sub_6767(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    int I;

    if (ISEQ_DOES_EXIST( iParam0 ))
    {
        for ( I = 0; I <= ((uParam1^) - 1); I++ )
        {
            if ((uParam1^)[I]._fU4 == 3)
            {
                if ((uParam1^)[I]._fU0 == iParam0)
                {
                    ISEQ_GET_NAME( 32, ref uVar4, (uParam1^)[I]._fU0 );
                    DISPLAYF( "[CCB]### The ISEQ is loaded: {} ###", 1, 1281, ref uVar4 );
                    return 1;
                }
            }
        }
    }
    else
    {
        SCRIPT_ASSERT( "The eTempAssetName ISEQ is NOT valid!!!", 0 );
    }
    return 0;
}

/* P_STREAMREQ_ISEQ_REMOVE */ void sub_7159(int iParam0, unknown uParam1)
{
    int I;
    int iVar5;

    if (ISEQ_DOES_EXIST( iParam0 ))
    {
        for ( I = 0; I <= ((uParam1^) - 1); I++ )
        {
            if (((uParam1^)[I]._fU4 == 1) || (((uParam1^)[I]._fU4 == 2) || ((uParam1^)[I]._fU4 == 3)))
            {
                if ((uParam1^)[I]._fU0 == iParam0)
                {
                    iVar5 =  /* F_STREAMREQ_THREADID_IS_INDEX_AVAILABLE_FOR_REMOVE */ sub_5739( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU8 );
                    if (iVar5 == -1)
                    {
                        (uParam1^)[I]._fU4 = 4;
                        return;
                    }
                    else
                    {
                        DISPLAYF( "[CCB] ### Requested ThreadID: {} ###", 1, 513, iVar5 );
                        DISPLAYF( "Trying to remove a ISEQ asset that was requested by another thread!!!", 0 );
                        return;
                    }
                }
            }
        }
    }
    else
    {
        SCRIPT_ASSERT( "The eTempAssetName ISEQ is NOT valid!!!", 0 );
    }
    return;
}

/* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ int sub_8162(int iParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I]._fU4 == 3)
        {
            if ((uParam1^)[I]._fU0 == iParam0)
            {
                DISPLAYF( "[CCB]### The VEHICLE_RECORDING is loaded: {} ###", 1, 513, (uParam1^)[I]._fU0 );
                return 1;
            }
        }
    }
    return 0;
}

/* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ void sub_8446(int iParam0, unknown uParam1)
{
    int I;
    int iVar5;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if (((uParam1^)[I]._fU4 == 1) || (((uParam1^)[I]._fU4 == 2) || ((uParam1^)[I]._fU4 == 3)))
        {
            if ((uParam1^)[I]._fU0 == iParam0)
            {
                iVar5 =  /* F_STREAMREQ_THREADID_IS_INDEX_AVAILABLE_FOR_REMOVE */ sub_5739( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU8 );
                if (iVar5 == -1)
                {
                    (uParam1^)[I]._fU4 = 4;
                    return;
                }
                else
                {
                    DISPLAYF( "[CCB] ### Requested ThreadID: {} ###", 1, 513, iVar5 );
                    DISPLAYF( "Trying to remove a VEHICLE_RECORDING asset that was requested by another thread!!!", 0 );
                    return;
                }
            }
        }
    }
    return;
}

/* P_RESTORE_PLAYER_DATA_CHECKPOINT */ void sub_9514(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

     /* WRITESCRIPTLOG */ sub_442( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U0)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
     /* CLOSE_CURRENT_LEVEL_CONTEXT */ sub_9733( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
         /* LOADCOLLISIONFORPED */ sub_10897( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_11211( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_11690( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_11211( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_11690( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_11211( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_11690( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPON */ sub_12006( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_11690( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPON */ sub_12006( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_11690( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U0 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if (( /* F_CAN_GIVE_AMMO_TO_REGULAR_WEAPON_TYPE */ sub_12578( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
     /* START_NEW_LEVEL_CONTEXT */ sub_12780( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING(  /* PLAYER_PED_ID */ sub_1098(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U0)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U0 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
     /* WRITESCRIPTLOG */ sub_442( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

/* CLOSE_CURRENT_LEVEL_CONTEXT */ void sub_9733(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_9795( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

/* GET_MISSION_INDEX_FROM_NAME */ int sub_9795(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    }
    else
    {
        PRINTSTRING( uParam0 );
        PRINTSTRING( uParam0 );
        PRINTSTRING( uParam0 );
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

/* LOADCOLLISIONFORPED */ void sub_10897(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

/* F_GIVEPEDWEAPONTOHOLSTER */ void sub_11211(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_11615( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* WRITE_STRING */ void sub_11615(unknown uParam0)
{
    PRINTSTRING( uParam0 );
    PRINTNL();
    return;
}

/* P_RESTORE_WEAPON_ATTACHMENTS */ void sub_11690(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

/* F_GIVEPEDWEAPON */ void sub_12006(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_11615( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* F_CAN_GIVE_AMMO_TO_REGULAR_WEAPON_TYPE */ int sub_12578(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

/* START_NEW_LEVEL_CONTEXT */ void sub_12780(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_9795( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
     /* CLEAR_GG_CONTEXTS */ sub_12878( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

/* CLEAR_GG_CONTEXTS */ void sub_12878(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

/* TELEPORTPED */ void sub_14038(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

/* P_HANDLE_EVENTS */ void sub_14249()
{
    if ((l_U145 < 18) AND (l_U145 > 1))
    {
         /* P_HANDLE_PRELOAD_FAILURE */ sub_14297();
         /* P_HANDLE_INTRO_CUTSCENE_10_03_BUS */ sub_14640();
         /* P_HANDLE_MIDSCENE_10_03_BUS_BLENDOUT */ sub_23002();
    }
    if ((l_U145 < 19) AND (l_U145 > 2))
    {
         /* P_HANDLE_SPAWN_FUEL_VEHICLES */ sub_28227();
         /* P_HANDLE_SPAWN_FUEL_PROPS */ sub_29205();
         /* P_HANDLE_SPAWN_RAIL_BUSSTART_VCPF */ sub_30513();
         /* P_HANDLE_SPAWN_RAIL_FUEL_VCPF */ sub_32795();
         /* P_HANDLE_SPAWN_RAIL_TUNNEL_VCPF */ sub_34435();
         /* P_HANDLE_SPAWN_RAIL_TUNNEL_EXIT_VCPF */ sub_35364();
         /* P_HANDLE_SPAWN_TUNNEL_VEHICLES */ sub_36305();
         /* P_HANDLE_SPAWN_RAIL_TERMINAL_VCPF */ sub_36941();
         /* P_HANDLE_SPAWN_TERMINAL_PROPS */ sub_38511();
         /* P_HANDLE_SPAWN_ENDCRASH_PROPS */ sub_39027();
         /* P_HANDLE_SPAWN_PARKED_VEHICLES */ sub_39570();
         /* P_HANDLE_AUDIO_STREAM */ sub_40379();
         /* P_HANDLE_SPEECH */ sub_46255();
         /* P_HANDLE_MUSIC */ sub_50701();
         /* P_HANDLE_SP_CHALLENGES */ sub_51755();
    }
    if ((l_U145 < 19) AND (l_U145 > 9))
    {
         /* P_DEBUG_CHECK_FOR_RAILSHOOTER_INVINCIBILITY */ sub_52932();
        if (l_U112)
        {
             /* P_RAIL_BUS_TAKING_DAMAGE */ sub_54014();
            if (((l_U733 / 6500.00000000) < 0.35000000) AND (NOT l_U114))
            {
                 /* WRITESCRIPTLOG */ sub_442( "GA", "Starting Railshooter Bus engine smoking.", 0 );
                 /* P_RAIL_BUS_APPLY_DAMAGE_EFFECTS */ sub_53797();
                l_U114 = 1;
            }
        }
         /* P_RAIL_KEEP_PLAYER_BUS_ALIVE */ sub_54776();
        if (l_U172 == 11)
        {
             /* P_HANDLE_ROCKET_EVENT_FAIL */ sub_54999();
        }
         /* P_HANDLE_RAILSHOOTER_FAIL */ sub_57728();
    }
    switch (l_U145)
    {
        case 0:
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Activating the Railshooter script...", 0 );
            g_U2871 = 1;
        }
         /* P_INITIALIZE_SCRIPT_DATA */ sub_60593();
         /* P_INITIALIZE_SP_CHALLENGES */ sub_65109();
         /* P_SETUP_STATIC_DATA */ sub_66730();
         /* WRITESCRIPTLOG */ sub_442( "CCB", "eCheckpoint - STATE_CHECKPOINT_PRELOAD", 0 );
        l_U145 = 1;
        break;
        case 1:
        if ( /* F_HANDLE_PRELOAD_ASSETS */ sub_69128())
        {
            if ((g_U2875[10] > 0) || (g_U763 == 10))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eCheckpoint - STATE_CHECKPOINT_SETUP", 0 );
                l_U145 = 3;
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eCheckpoint - STATE_CHECKPOINT_LOAD", 0 );
                l_U145 = 2;
            }
        }
        break;
        case 2:
        if (g_U2871)
        {
            if (l_U163 > 2)
            {
                if ( /* F_HANDLE_LOAD_ASSETS */ sub_82881())
                {
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eCheckpoint - STATE_CHECKPOINT_SETUP", 0 );
                    l_U145 = 3;
                }
            }
        }
        break;
        case 3:
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
             /* P_SETUP_GAMEPLAY */ sub_15621();
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eCheckpoint - STATE_CHECKPOINT_POSTSTREAM", 0 );
            l_U145 = 5;
        }
        else if (l_U163 >= 7)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "The cutscene was skipped...", 0 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eCheckpoint - STATE_CHECKPOINT_POSTSTREAM", 0 );
            l_U145 = 5;
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eCheckpoint - STATE_CHECKPOINT_INTRO_CUTSCENE_10_03_BUS", 0 );
            l_U145 = 8;
        }
        break;
        case 5:
        if (GET_NUMBER_OF_STREAMING_REQUESTS() == 0)
        {
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eCheckpoint - STATE_CHECKPOINT_IN", 0 );
                l_U145 = 6;
            }
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for stream requests...", 0 );
        }
        break;
        case 6:
         /* WRITESCRIPTLOG */ sub_442( "CCB", "eCheckpoint - STATE_CHECKPOINT_10_03_BUS_BLENDOUT", 0 );
        l_U145 = 10;
        break;
        case 8:
        if (l_U163 >= 7)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "The cutscene is finished...", 0 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eCheckpoint - STATE_CHECKPOINT_10_03_BUS_BLENDOUT", 0 );
            l_U145 = 10;
        }
        break;
        case 10:
        if (l_U164 >= 39)
        {
             /* P_START_GAMEPLAY */ sub_83848();
            l_U437._fU12 = 500;
             /* RESETTIMER */ sub_2466( ref l_U437 );
             /* STARTTIMER */ sub_1757( ref l_U437 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eCheckpoint - STATE_CHECKPOINT_RAILSHOOTER_01", 0 );
            l_U145 = 11;
        }
        break;
        case 11:
         /* P_HANDLE_SPAWN_RAIL_TUNNEL_ENTRANCE_VCPF */ sub_89305();
         /* P_HANDLE_VIG_16_NIS */ sub_90379();
         /* P_HANDLE_MID_11_NIS */ sub_96527();
        if (NOT l_U117[0])
        {
            if (l_U166 < 6)
            {
                if (l_U153 >= 3)
                {
                    if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_52366( ref l_U246 )) == 0)
                    {
                        if (l_U154 >= 3)
                        {
                            if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_52366( ref l_U251 )) == 0)
                            {
                                if (l_U155 >= 3)
                                {
                                    if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_52366( ref l_U262 )) == 0)
                                    {
                                        l_U117[0] = 1;
                                         /* WRITESCRIPTLOG */ sub_442( "CCB", "All the RAILSHOOTER1 enemy peds were killed by the player...", 0 );
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        if (NOT l_U142)
        {
            if ( /* ISTIMERDONE */ sub_1890( ref l_U437 ))
            {
                l_U142 = 1;
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Disabling the camera aim override...", 0 );
                CAMERA_AIM_OVERRIDE( 0 );
                RESET_FORCED_AIM_INTENTION_DIRECTION();
                RESET_FORCED_FORWARD_DIRECTION();
                if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
                {
                    CLEAR_PED_TASKS(  /* PLAYER_PED_ID */ sub_1098() );
                    CLEAR_PED_DEFAULT_AIM(  /* PLAYER_PED_ID */ sub_1098() );
                }
            }
        }
        if (( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2330, 5950.00000000 )) AND (NOT l_U123))
        {
            l_U123 = 1;
             /* P_RAIL_SMALL_COLLISION_START */ sub_105879();
        }
        if ((IS_EXPLOSION_IN_SPHERE( -1, l_U1570[2], 2.00000000 )) AND (NOT l_U126))
        {
             /* WRITESCRIPTLOG */ sub_442( "GA", "Left Fuel Pump Exploded.", 0 );
            l_U126 = 1;
             /* P_RAIL_SMALL_COLLISION_START */ sub_105879();
        }
        if ((IS_EXPLOSION_IN_SPHERE( -1, l_U1570[3], 3.00000000 )) AND (NOT l_U125))
        {
             /* WRITESCRIPTLOG */ sub_442( "GA", "Right Fuel Pump Exploded.", 0 );
            l_U125 = 1;
             /* P_RAIL_SMALL_COLLISION_START */ sub_105879();
        }
        if (( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2330, 6300.00000000 )) AND (NOT l_U138))
        {
            l_U138 = 1;
             /* P_START_RAIL_FUEL_VCPF */ sub_106299();
        }
        if (( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2330, 13000.00000000 )) AND (NOT l_U139))
        {
            if (l_U155 == 3)
            {
                l_U139 = 1;
                 /* P_START_RAIL_TUNNEL_ENTRANCE_VCPF */ sub_108321();
            }
        }
        if (( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2330, 6050.00000000 )) AND (NOT l_U124))
        {
            l_U124 = 1;
            SHAKE_GAMEPLAY_CAM( "MEDIUM_EXPLOSION_SHAKE", 0.35000000 );
            SET_PAD_SHAKE( 0, l_U473._fU12, 128 );
             /* RESETTIMER */ sub_2466( ref l_U473 );
             /* STARTTIMER */ sub_1757( ref l_U473 );
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                SET_VEHICLE_EXTRA( g_U2918, 4, 1 );
                SET_VEHICLE_EXTRA( g_U2918, 3, 1 );
                SET_VEHICLE_EXTRA( g_U2918, 8, 0 );
                SET_VEHICLE_EXTRA( g_U2918, 9, 1 );
            }
        }
        if (NOT l_U127)
        {
            if (HAS_SOMETHING_EXPLODED_IN_AREA( l_U1570[2], 3.00000000 ))
            {
                l_U127 = 1;
                 /* P_FUEL_PUMP_LEFT_EXPLODE */ sub_109367();
                if (NOT l_U129)
                {
                     /* P_SWAP_FUEL_PUMP_ISLAND */ sub_109539();
                    l_U129 = 1;
                }
            }
        }
        if (NOT l_U128)
        {
            if (HAS_SOMETHING_EXPLODED_IN_AREA( l_U1570[3], 3.00000000 ))
            {
                 /* P_FUEL_PUMP_RIGHT_EXPLODE */ sub_109761();
                l_U128 = 1;
                if (NOT l_U130)
                {
                     /* P_SWAP_FUEL_PUMP_ISLAND2 */ sub_109941();
                    l_U130 = 1;
                }
            }
        }
        if (NOT l_U131)
        {
            if (DOES_VEHICLE_EXIST( g_U2918 ))
            {
                if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                {
                    if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U2918 ))
                    {
                        if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2330, 9000.00000000 ))
                        {
                            l_U131 = 1;
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Adjusting the playback speed to:", 0 );
                            PRINTFLOAT( 0.41000000 );
                            PRINTNL();
                            SET_PLAYBACK_SPEED( g_U2918, 0.41000000 );
                        }
                    }
                }
            }
        }
        if (NOT l_U132)
        {
            if (DOES_VEHICLE_EXIST( g_U2918 ))
            {
                if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                {
                    if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U2918 ))
                    {
                        if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2330, 13000.00000000 ))
                        {
                            l_U132 = 1;
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Re-setting the playback speed to:", 0 );
                            PRINTFLOAT( 0.65000000 );
                            PRINTNL();
                            SET_PLAYBACK_SPEED( g_U2918, 0.65000000 );
                        }
                    }
                }
            }
        }
        break;
        case 12:
         /* P_HANDLE_VIG_19_NIS */ sub_110488();
         /* P_HANDLE_ROCKET_EVENT */ sub_115920();
         /* P_HANDLE_MID_12_NIS */ sub_118393();
        if (l_U117[0])
        {
            if (NOT l_U117[1])
            {
                if (l_U167 < 6)
                {
                    if (l_U156 >= 3)
                    {
                        if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_52366( ref l_U267 )) == 0)
                        {
                            l_U117[1] = 1;
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "All the RAILSHOOTER2A enemy peds were killed by the player...", 0 );
                        }
                    }
                }
            }
            else if (NOT l_U117[2])
            {
                if (l_U168 < 7)
                {
                    if (l_U157 >= 3)
                    {
                        if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_52366( ref l_U271 )) == 0)
                        {
                            l_U117[2] = 1;
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "All the RAILSHOOTER2B enemy peds were killed by the player...", 0 );
                        }
                    }
                }
            }
        }
        if ((l_U168 >= 39) || (l_U168 < 6))
        {
            if ((l_U167 >= 39) || (l_U167 < 6))
            {
                if (NOT l_U142)
                {
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U437 ))
                    {
                        l_U142 = 1;
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Disabling the camera aim override...", 0 );
                        CAMERA_AIM_OVERRIDE( 0 );
                        RESET_FORCED_AIM_INTENTION_DIRECTION();
                        RESET_FORCED_FORWARD_DIRECTION();
                        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
                        {
                            CLEAR_PED_TASKS(  /* PLAYER_PED_ID */ sub_1098() );
                            CLEAR_PED_DEFAULT_AIM(  /* PLAYER_PED_ID */ sub_1098() );
                        }
                    }
                }
            }
        }
        break;
        case 13:
         /* P_HANDLE_END_CRASH */ sub_128911();
        if ((l_U117[2]) AND ((l_U117[1]) AND (l_U117[0])))
        {
            if (NOT l_U141)
            {
                if ( /* F_HANDLE_RAILSHOOTER_LAST_LIVING_PED */ sub_145989( ref l_U275 ))
                {
                    l_U141 = 1;
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The bullet camera was assigned...", 0 );
                    l_U144 = 1;
                }
            }
        }
        else if (NOT l_U141)
        {
            l_U141 = 1;
             /* WRITESCRIPTLOG */ sub_442( "CCB", "No bullet cam!!! The player didn't kill all the enemies in the previous RAILSHOOTER checkpoints...", 0 );
        }
        if (NOT l_U142)
        {
            if ( /* ISTIMERDONE */ sub_1890( ref l_U437 ))
            {
                l_U142 = 1;
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Disabling the camera aim override...", 0 );
                CAMERA_AIM_OVERRIDE( 0 );
                RESET_FORCED_AIM_INTENTION_DIRECTION();
                RESET_FORCED_FORWARD_DIRECTION();
                if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
                {
                    CLEAR_PED_TASKS(  /* PLAYER_PED_ID */ sub_1098() );
                    CLEAR_PED_DEFAULT_AIM(  /* PLAYER_PED_ID */ sub_1098() );
                }
            }
        }
        if (( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2333, 11500.00000000 )) AND (NOT l_U140))
        {
             /* WRITESCRIPTLOG */ sub_442( "GA", "Setting player bus to gameplay speed.", 0 );
            SET_PLAYBACK_SPEED( g_U2918, 1.25000000 );
            l_U140 = 1;
        }
        if (NOT l_U113)
        {
            if (IS_BULLET_CAMERA_ACTIVE())
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "The Terminal bulletcam is active...", 0 );
                l_U113 = 1;
            }
        }
        break;
        case 18: break;
        case 19: break;
    }
    return;
}

/* P_HANDLE_PRELOAD_FAILURE */ void sub_14297()
{
    if (g_U764 == 9)
    {
        if ((g_U2872) || (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
        {
            if (g_U2872)
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "The player triggered the fail... Unloading MCE_BUSRAILSHOOTER01 script!!!", 0 );
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "The player is dead... Unloading MCE_BUSRAILSHOOTER01 script!!!", 0 );
            }
             /* P_RESET_CHECKPOINT_THREAD */ sub_14556( ref g_U765[10] );
            SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        }
    }
    return;
}

/* P_RESET_CHECKPOINT_THREAD */ void sub_14556(int iParam0)
{
    iParam0->_fU36 = 0;
    iParam0->_fU40 = 0;
    return;
}

/* P_HANDLE_INTRO_CUTSCENE_10_03_BUS */ void sub_14640()
{
    if ((l_U163 < 7) AND (l_U163 > 3))
    {
        ;
    }
    switch (l_U163)
    {
        case 0:
        if (g_U2871)
        {
            if ((g_U2875[10] > 0) || (g_U763 == 10))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "e10_03_BusCutscene - STATE_CUTSCENE_COMPLETE", 0 );
                l_U163 = 7;
            }
            else if ((NOT (CUTSCENE_NAMED_IS_LOADING( "10_03_bus" ))) AND (NOT (CUTSCENE_IS_LOADED( "10_03_bus" ))))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Loading the 10_03_bus cutscene...", 0 );
                PRE_STREAM_SEAMLESS_CUTSCENE( "10_03_bus" );
            }
             /* WRITESCRIPTLOG */ sub_442( "CCB", "e10_03_BusCutscene - STATE_CUTSCENE_PRELOAD", 0 );
            l_U163 = 1;;
        }
        break;
        case 1:
        if (CUTSCENE_IS_LOADED( "10_03_bus" ))
        {
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
            {
                if (NOT (IS_PED_DEAD( g_U2595 )))
                {
                    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                    {
                        if ( /* F_STREAMREQ_ANIM_DICT_IS_ASSET_LOADED */ sub_15150( "LEVEL_S_BUS_RS", ref g_U1369 ))
                        {
                            if ( /* F_STREAMREQ_ANIM_DICT_IS_ASSET_LOADED */ sub_15150( "FACE_GIOBUS", ref g_U1369 ))
                            {
                                if ( /* F_STREAMREQ_ACTION_TREE_IS_ASSET_LOADED */ sub_15383( ref g_U2008, ref g_U1535 ))
                                {
                                    if ( /* F_STREAMREQ_ACTION_TREE_IS_ASSET_LOADED */ sub_15383( ref g_U2024, ref g_U1535 ))
                                    {
                                        if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2330, ref g_U1474 ))
                                        {
                                             /* P_SETUP_GAMEPLAY */ sub_15621();
                                             /* WRITESCRIPTLOG */ sub_442( "CCB", "e10_03_BusCutscene - STATE_CUTSCENE_IN", 0 );
                                            l_U163 = 2;
                                        }
                                    }
                                }
                            }
                        }
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for viRailBus vehicle to be created...", 0 );
                    }
                }
                else
                {
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for piGiovanna ped to be created...", 0 );
                }
            }
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for the 10_03_bus cutscene to load...", 0 );
        }
        break;
        case 2:
        if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
        {
             /* NIS_PRE_SETUP */ sub_20593( 1, 0, 0, 1 );
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Registering the viRailBus vehicle.", 0 );
                REGISTER_VEHICLE_PRE_SEAMLESS_CUTSCENE( g_U2918, "bus_rs", 0 );
                if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
                {
                    FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_1098(), 0 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Registering the player attachment to viRailBus vehicle.", 0 );
                    CUTSCENE_REGISTER_PED_ATTACH_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, 1.30000000, 5.73400000, 1.06000000, 270.00000000, 0.00000000, 1, 0 );
                    if (GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1098(), 0, 0 ) ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Registering the player's weapon.", 0 );
                        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1098(), 0, 0 ), "W_SB_M10_Aa_H", 0 );
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The player's WEAPONHAND_RIGHT weapon is NOT valid!!!", 0 );
                    }
                    if ( /* F_STREAMREQ_ACTION_TREE_IS_ASSET_LOADED */ sub_15383( ref g_U2008, ref g_U1535 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Registering the action tree.", 0 );
                        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1098(), "/Global/BUS_RAILSHOOTER/BUS_RAILSHOOTER_INTRO/PLAYER_INTRO_ANIM" );
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The s_bus_railshooter action tree is NOT loaded!!!", 0 );
                    }
                }
                if (NOT (IS_PED_DEAD( g_U2595 )))
                {
                    FREEZE_PED_POSITION( g_U2595, 0 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Registering the piGiovanna ped.", 0 );
                    REGISTER_PED_PRE_SEAMLESS_CUTSCENE( g_U2595, "Giov_Bus", 0 );
                    CUTSCENE_REGISTER_PED_TELEPORT( g_U2595, l_U751._fU0, l_U751._fU12 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Registering the piGiovanna ped attachment to viRailBus vehicle.", 0 );
                    CUTSCENE_REGISTER_PED_ATTACH_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1276, l_U1223, 0.00000000, 1, 0 );
                    if ( /* F_STREAMREQ_ACTION_TREE_IS_ASSET_LOADED */ sub_15383( ref g_U2024, ref g_U1535 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Registering the piGiovanna ped to the action tree.", 0 );
                        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_17_OFELIABUS/EVENT_01_FUEL_DEPOT_TIMELINE/01_Driving" );
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The txtRailOfeliaBus action tree is NOT loaded!!!", 0 );
                    }
                }
            }
            if (DOES_OBJECT_EXIST( DOOR_FIND_CLOSEST( g_U2316._fU0, g_U2316._fU4 ) ))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Registering the left door.", 0 );
                REGISTER_OBJECT_PRE_SEAMLESS_CUTSCENE( DOOR_FIND_CLOSEST( g_U2316._fU0, g_U2316._fU4 ), "cs_DorMet_L", 0 );
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "The left door is NOT valid!!!", 0 );
            }
            if (DOES_OBJECT_EXIST( DOOR_FIND_CLOSEST( g_U2323._fU0, g_U2323._fU4 ) ))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Registering the right door.", 0 );
                REGISTER_OBJECT_PRE_SEAMLESS_CUTSCENE( DOOR_FIND_CLOSEST( g_U2323._fU0, g_U2323._fU4 ), "cs_DorMet_R", 0 );
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "The right door is NOT valid!!!", 0 );
            }
            REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_CRAC_SOLD_OF", 1901166384 );
            REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_CRAC_SOLD_OF^1", -1946189981 );
            REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_CRAC_SOLD_OF^2", -354890253 );
            REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_CRAC_SOLD_OF^3", -1164059530 );
            REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_CRAC_SOLD_OF^4", 187757786 );
            CUTSCENE_DISABLE_FADE_IN_GAME_AT_END( 1 );
            CUTSCENE_ENABLE_SKIP( 0 );
            START_SEAMLESS_CUTSCENE();
            if (IS_SCREEN_FADED_OUT())
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "FADING IN!!!", 0 );
                DO_SCREEN_FADE_IN( 500 );
            }
             /* WRITESCRIPTLOG */ sub_442( "CCB", "e10_03_BusCutscene - STATE_CUTSCENE_FADEIN", 0 );
            l_U163 = 3;
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for the bullet cam to finish...", 0 );
        }
        break;
        case 3:
        if (IS_SCREEN_FADED_IN())
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Enabling ALLOW_BULLET_CAMERA_TO_GAMEPLAY...", 0 );
            ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
            DEACTIVATE_BULLET_TIME( 1, 0 );
            g_U2627 = 1;
             /* WRITESCRIPTLOG */ sub_442( "CCB", "e10_03_BusCutscene - STATE_CUTSCENE_IDLE", 0 );
            l_U163 = 4;
        }
        break;
        case 4:
        if (HAS_CUTSCENE_FINISHED())
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "The cutscene is finished...", 0 );
            if (NOT (IS_PED_DEAD( g_U2595 )))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Disabling gore on the piGiovanna ped.", 0 );
                SET_PED_GORE( g_U2595, 0 );
            }
             /* WRITESCRIPTLOG */ sub_442( "CCB", "e10_03_BusCutscene - STATE_CUTSCENE_COMPLETE", 0 );
            l_U163 = 7;
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for cutscene:", 0 );
            PRINTINT( GET_CUTSCENE_TIME_MS() );
            PRINTNL();
        }
        break;
        case 7: break;
    }
    return;
}

/* F_STREAMREQ_ANIM_DICT_IS_ASSET_LOADED */ int sub_15150(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I]._fU32 == 3)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[I]._fU0, uParam0 ))
            {
                DISPLAYF( "[CCB]### The ANIM_DICT is loaded: {} ###", 1, 1281, ref (uParam1^)[I]._fU0 );
                return 1;
            }
        }
    }
    return 0;
}

/* F_STREAMREQ_ACTION_TREE_IS_ASSET_LOADED */ int sub_15383(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I]._fU64 == 3)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[I]._fU0, uParam0 ))
            {
                DISPLAYF( "[CCB]### The ACTION_TREE is loaded: {} ###", 1, 1281, ref (uParam1^)[I]._fU0 );
                return 1;
            }
        }
    }
    return 0;
}

/* P_SETUP_GAMEPLAY */ void sub_15621()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_SETUP_GAMEPLAY", 0 );
     /* P_SETUP_WEATHER_AND_TOD */ sub_15681();
     /* P_SETUP_PLAYER */ sub_15864();
     /* P_SETUP_GIOVANNA */ sub_16611();
     /* P_SPAWN_RAIL_BUS */ sub_18286();
     /* P_SETUP_RAIL_BUS */ sub_18772();
    SET_SILHOUETTE_ACTIVE( 0 );
    SET_INSTANT_FIRE_FORCED( 1 );
    ALLOW_BULLET_CAMERA_CHEAT( 0 );
    SET_USING_ALT_HEALTH( 1 );
    HUD_SET_PLAYER_HEALTH_TEXTURE( "mp3_hud_health_bus" );
    SET_PLAYER_ALT_HEALTH( 6500.00000000 );
    SET_PLAYER_ALT_MAX_HEALTH( 6500.00000000 );
    SET_PED_MODEL_LOD_DISTANCES( g_U2105, 10.00000000, 80.00000000 );
    if ((g_U2875[10] > 0) || (g_U763 == 10))
    {
         /* P_SETUP_RAIL_BUS_ATTACH */ sub_19252();
    }
    if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1136() )))
    {
        SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_1136(), 0, 0 );
    }
    if ((g_U2875[10] > 0) || (g_U763 == 10))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting player combat timer mode to CTT_RAIL_SHOOTER.", 0 );
        SET_PLAYER_COMBAT_TIMER_MODE( 1 );
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting rail relative direction to CAM_RAIL_DIRECTION_RIGHT.", 0 );
        SET_CAMERA_OVERRIDE( "RAIL_BUS_CAMERA_AIM", "RAIL_BUS_CAMERA_AIM", 0, 1, 1 );
        SET_RAIL_RELATIVE_DIR( 2, 0 );
        SET_PLAYER_COMBAT_TIMER_MODE( 1 );
    }
     /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2330, 0.65000000, 0.00000000 );
    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
    {
        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U2918 ))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Pausing the vehicle recording.", 0 );
            PAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
        }
    }
    return;
}

/* P_SETUP_WEATHER_AND_TOD */ void sub_15681()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_SETUP_WEATHER_AND_TOD", 0 );
     /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting time of day to 7:00 AM. The weather is CLOUDY.", 0 );
    RELEASE_TIME_OF_DAY();
    SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
    FREEZE_TIME_OF_DAY( 7, 0 );
    return;
}

/* P_SETUP_PLAYER */ void sub_15864()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_SETUP_PLAYER", 0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
        if (( /* HAS_SAVEFILE_LOADED */ sub_15942( ref l_U76 )) == 0)
        {
            ;
        }
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Removing all player weapons...", 0 );
        REMOVE_ALL_PED_WEAPONS(  /* PLAYER_PED_ID */ sub_1098() );
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Giving player specialized MAC10.", 0 );
         /* F_GIVEPEDWEAPON */ sub_12006(  /* PLAYER_PED_ID */ sub_1098(), g_U2860, 25000, 0, 0 );
        if (GET_PAYNEKILLER_AMT() < 5)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Giving the player 5 painkillers.", 0 );
            SET_PAYNEKILLER_AMT( 5 );
        }
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting adrenaline to 0.0", 0 );
        SET_ADRENALINE_AMT( 0.00000000 );
        SET_PED_HEALTH(  /* PLAYER_PED_ID */ sub_1098(), GET_PED_MAX_HEALTH(  /* PLAYER_PED_ID */ sub_1098() ), 0 );
        if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1136() )))
        {
            SET_PLAYER_CAN_USE_SHOOTDODGE(  /* PLAYER_ID */ sub_1136(), 0 );
        }
        ENABLE_LAST_MAN_STANDING( 0 );
        ENABLE_HIT_DETECTION( 0 );
        ENABLE_PLAYERHEALTH( 1 );
        ENABLE_BULLETTIMEMETER( 1 );
        if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1136() )))
        {
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
            {
                SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_1136(), 0, 0 );
                SET_PLAYER_CAN_CANCEL_SHOOTDODGE( 1 );
                SET_PED_CONSUMING_AMMO(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                DEACTIVATE_BULLET_TIME( 0, 0 );
                DEACTIVATE_BULLET_TIME( 1, 0 );
                DEACTIVATE_BULLET_TIME( 0, 1 );
                DEACTIVATE_BULLET_TIME( 1, 1 );
                SET_CAMERA_OVERRIDE( "", "", 0, 1, 1 );
            }
        }
    }
    return;
}

/* HAS_SAVEFILE_LOADED */ int sub_15942(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_442( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U0 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U1 );
             /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_9514( uParam0,  /* PLAYER_PED_ID */ sub_1098() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

/* P_SETUP_GIOVANNA */ void sub_16611()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_SETUP_GIOVANNA", 0 );
    if (NOT (DOES_PED_EXIST( g_U2595 )))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Creating the piGiovanna ped.", 0 );
        g_U2595 =  /* CREATEPED */ sub_16736( ref l_U751 );
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "The piGiovanna ped was already created!!!", 0 );
    }
    if (NOT (IS_PED_DEAD( g_U2595 )))
    {
        SET_PED_NAME_DEBUG( g_U2595, "piGiovanna" );
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting the piGiovanna ped invincible.", 0 );
        SET_PED_INVINCIBLE( g_U2595, 1 );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( g_U2595, 1 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( g_U2595, 0 );
        SET_AI_SHOULD_ALWAYS_MISS_PED( g_U2595, 1 );
        SET_PED_CAN_BE_TARGETTED( g_U2595, 0 );
        SET_PED_HEALTH( g_U2595, GET_PED_MAX_HEALTH( g_U2595 ), 0 );
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Resetting gore on the piGiovanna ped.", 0 );
            SET_PED_GORE( g_U2595, 1 );
            RESET_PED_GORE( g_U2595 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting up the blood and gore on the piGiovanna ped.", 0 );
            SET_PED_GORE( g_U2595, 1 );
             /* P_SETUP_GIO_BLOOD_DECALS */ sub_18126( g_U2595 );
        }
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
    }
    return;
}

/* CREATEPED */ void sub_16736(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_16918( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
     /* SETPEDDEFAULTSTATS */ sub_17467( iParam0->_fU40 );
     /* SETPEDDEFAULTTEMPLATE */ sub_17568( iParam0->_fU40 );
    return iParam0->_fU40;
}

/* LOADMODEL */ void sub_16918(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
         /* WRITE_STRING */ sub_11615( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* SETPEDDEFAULTSTATS */ void sub_17467(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

/* SETPEDDEFAULTTEMPLATE */ void sub_17568(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

/* P_SETUP_GIO_BLOOD_DECALS */ void sub_18126(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_442( "SP", "P_SETUP_GIO_BLOOD_DECALS", 0 );
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        BLOOD_DECAL_ON_PED_BONE( uParam0, 0.00000000, 0.10000000, 0.00000000, 3229, 7 );
    }
    return;
}

/* P_SPAWN_RAIL_BUS */ void sub_18286()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_SPAWN_RAIL_BUS", 0 );
    if (NOT (DOES_VEHICLE_EXIST( g_U2918 )))
    {
        g_U2918 =  /* CREATEVEHICLE */ sub_18389( 1572429640, l_U1263[0], l_U1218[0], 0, 0, 0 );
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "The viRailBus vehicle was already created.", 0 );
    }
    return;
}

/* CREATEVEHICLE */ void sub_18389(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, int iParam5, unknown uParam6, unknown uParam7)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a vehicle with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_16918( uParam0, 1 );
    }
    Result = CREATE_VEHICLE( uParam0, uParam1, uParam4, uParam6, uParam7 );
    if (iParam5 == 1)
    {
        while ((DOES_VEHICLE_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for vehicle to exist: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    if (DOES_VEHICLE_EXIST( Result ))
    {
        SET_PETROLTANK_BURN_RATE( Result, 125.00000000 );
    }
    return Result;
}

/* P_SETUP_RAIL_BUS */ void sub_18772()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_SETUP_RAIL_BUS start", 0 );
    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Configuring the bus setup...", 0 );
        SET_VEHICLE_ON_GROUND_PROPERLY( g_U2918 );
        SET_VEHICLE_ENGINE_ON( g_U2918, 1, 0 );
        ENABLE_AUDIO_MISSION_FLAG( 2, 1 );
        SET_VEHICLE_AS_MISSION_VEHICLE( g_U2918 );
        SET_VEHICLE_EXTRA( g_U2918, 2, 1 );
        SET_VEHICLE_EXTRA( g_U2918, 6, 1 );
        SET_VEHICLE_EXTRA( g_U2918, 7, 0 );
        SET_VEHICLE_EXTRA( g_U2918, 4, 0 );
        SET_VEHICLE_EXTRA( g_U2918, 3, 1 );
        SET_VEHICLE_EXTRA( g_U2918, 8, 1 );
        SET_VEHICLE_EXTRA( g_U2918, 9, 1 );
        SET_VEHICLE_LIGHTS( g_U2918, 1 );
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "The viRailBus vehicle is NOT valid!!!", 0 );
    }
    return;
}

/* P_SETUP_RAIL_BUS_ATTACH */ void sub_19252()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_SETUP_RAIL_BUS_ATTACH", 0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
        if (NOT (IS_PED_DEAD( g_U2595 )))
        {
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Unfreezing the player's position.", 0 );
                FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_1098(), 0 );
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Attaching the player.", 0 );
                DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                ATTACH_PED_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, l_U1273, l_U1222, 0.00000000, 1, 0, 0, 1 );
                SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Attaching Gio.", 0 );
                DETACH_PED( g_U2595, 1 );
                ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1276, l_U1223, 0.00000000, 1, 0, 0, 1 );
            }
        }
    }
    return;
}

/* P_START_VEHICLE_RECORDING */ void sub_19940(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    if (NOT (IS_VEHICLE_DEAD( uParam0 )))
    {
        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( uParam0 ))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping the vehicle recording.", 0 );
            STOP_PLAYBACK_RECORDED_VEHICLE( uParam0 );
        }
        if (HAS_VEHICLE_RECORDING_BEEN_LOADED( uParam1 ))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Starting the vehicle recording.", 0 );
            START_PLAYBACK_RECORDED_VEHICLE( uParam0, uParam1 );
            SET_PLAYBACK_SPEED( uParam0, uParam2 );
            SKIP_TIME_IN_PLAYBACK_RECORDED_VEHICLE( uParam0, uParam3 );
        }
        else
        {
            SCRIPT_ASSERT( "The vehicle recording is NOT loaded!!!", 0 );
        }
    }
    return;
}

/* NIS_PRE_SETUP */ void sub_20593(int iParam0, int iParam1, unknown uParam2, boolean bParam3)
{
    END_POSTFX_BLENDER( 12, 0 );
    if (bParam3)
    {
        STOP_ALL_IMAGEFX( 0 );
    }
    SET_WIDESCREEN_BORDERS( 1, 500 );
    DISPLAY_HUD( 0 );
    if (iParam0 == 1)
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
        {
            SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1136(), 0, uParam2 );
            SET_PED_DUCKING(  /* PLAYER_PED_ID */ sub_1098(), 0 );
            if (iParam1 == 1)
            {
                CLEAR_PED_TASKS_IMMEDIATELY(  /* PLAYER_PED_ID */ sub_1098() );
            }
            SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_1098(), 1 );
        }
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    return;
}

/* P_HANDLE_MIDSCENE_10_03_BUS_BLENDOUT */ void sub_23002()
{
    if ((l_U164 < 38) AND (l_U164 > 3))
    {
        ;
    }
    switch (l_U164)
    {
        case 0:
         /* CREATETIMER */ sub_1607( ref l_U437, 0, 1, 0 );
         /* STARTTIMER */ sub_1757( ref l_U437 );
         /* WRITESCRIPTLOG */ sub_442( "CCB", "e10_03_BusBlendOut - STATE_MIDSCENE_PRELOAD", 0 );
        l_U164 = 1;
        break;
        case 1:
        if (l_U163 >= 3)
        {
            if (IS_ANIMATED_CAMERA_PLAYING())
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
                CAMERA_ANIMATED_STOP( 3000, 0 );
            }
             /* WRITESCRIPTLOG */ sub_442( "CCB", "e10_03_BusBlendOut - STATE_MIDSCENE_START", 0 );
            l_U164 = 2;
        }
        break;
        case 2:
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
            if (l_U145 >= 6)
            {
                if (l_U153 >= 3)
                {
                     /* NIS_PRE_SETUP */ sub_20593( 1, 0, 0, 1 );
                    if (NOT (IS_PED_DEAD( g_U2595 )))
                    {
                         /* P_SETUP_GIO_BLOOD_DECALS */ sub_18126( g_U2595 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Disabling gore on the piGiovanna ped.", 0 );
                        SET_PED_GORE( g_U2595, 0 );
                        if ( /* F_STREAMREQ_ACTION_TREE_IS_ASSET_LOADED */ sub_15383( ref g_U2024, ref g_U1535 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting the animation node for Gio to EVENT_01_FUEL_DEPOT_TIMELINE/01_Driving.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_17_OFELIABUS/EVENT_01_FUEL_DEPOT_TIMELINE/01_Driving" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The txtRailOfeliaBus action tree is NOT loaded!!!", 0 );
                        }
                    }
                    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
                    {
                        if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Attaching the player.", 0 );
                            DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                            ATTACH_PED_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, l_U1273, l_U1222, 0.00000000, 1, 0, 0, 1 );
                            SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                        }
                        if ( /* F_STREAMREQ_ACTION_TREE_IS_ASSET_LOADED */ sub_15383( ref g_U2008, ref g_U1535 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting the animation node for the player to PLAYER_INTRO_ANIM.", 0 );
                            PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1098(), "/Global/BUS_RAILSHOOTER/BUS_RAILSHOOTER_INTRO/PLAYER_INTRO_ANIM" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The s_bus_railshooter action tree is NOT loaded!!!", 0 );
                        }
                    }
                    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                    {
                        CAMERA_PLAY_ANIMATED_ATTACHED_VEHICLE_RELATIVE( "LEVEL_S_BUS_RS", "10_03_BUS_BLEND_OUT_CAM", g_U2918, 0, 0 );
                    }
                     /* P_START_RAIL_BUSSTART_VCPF */ sub_24264();
                     /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2330, 0.65000000, 0.00000000 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Playing SBUS_RS_A script stream...", 0 );
                     /* P_STREAMREQ_SCRIPT_STREAM_PLAY_FRONTEND */ sub_25240( "SBUS_RS_A", ref g_U1704 );
                    if ((IS_SCREEN_FADED_OUT()) || (IS_DEATH_PANEL_WIPE_ALLOWED()))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "FADING IN!!!", 0 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "FADING IN - DEATH PANEL WIPE ALLOWED!!!", 0 );
                        START_PANEL_WIPE( 300, 6 );
                        DO_SCREEN_FADE_IN( 250 );
                    }
                    l_U446._fU12 = 2580;
                     /* RESETTIMER */ sub_2466( ref l_U446 );
                     /* STARTTIMER */ sub_1757( ref l_U446 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "e10_03_BusBlendOut - STATE_MIDSCENE_FADEIN", 0 );
                    l_U164 = 4;
                }
                else
                {
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for peds to finish spawning...", 0 );
                }
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for setup to finish...", 0 );
            }
        }
        else if (HAS_CUTSCENE_FINISHED())
        {
            if (l_U145 >= 6)
            {
                if (l_U153 >= 3)
                {
                     /* NIS_PRE_SETUP */ sub_20593( 1, 0, 0, 1 );
                    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
                    {
                        PED_FINISH_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_1098(), 47 );
                    }
                    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Attaching the player.", 0 );
                        SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                    }
                     /* P_START_RAIL_BUSSTART_VCPF */ sub_24264();
                     /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2330, 0.65000000, 0.00000000 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Playing SBUS_RS_A script stream...", 0 );
                     /* P_STREAMREQ_SCRIPT_STREAM_PLAY_FRONTEND */ sub_25240( "SBUS_RS_A", ref g_U1704 );
                    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                    {
                        CAMERA_PLAY_ANIMATED_ATTACHED_VEHICLE_RELATIVE( "LEVEL_S_BUS_RS", "10_03_BUS_BLEND_OUT_CAM", g_U2918, 0, 0 );
                    }
                    if (IS_SCREEN_FADED_OUT())
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "FADING IN!!!", 0 );
                        DO_SCREEN_FADE_IN( 500 );
                    }
                    l_U446._fU12 = 2579;
                     /* RESETTIMER */ sub_2466( ref l_U446 );
                     /* STARTTIMER */ sub_1757( ref l_U446 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "e10_03_BusBlendOut - STATE_MIDSCENE_FADEIN", 0 );
                    l_U164 = 4;
                }
                else
                {
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for peds to finish spawning...", 0 );
                }
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for setup to finish...", 0 );
            }
        }
        break;
        case 4:
        if (IS_SCREEN_FADED_IN())
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera length is:", 0 );
            PRINTINT( CAMERA_ANIMATED_LENGTH( "LEVEL_S_BUS_RS", "10_03_BUS_BLEND_OUT_CAM" ) );
            PRINTNL();
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting rail relative direction to CAM_RAIL_DIRECTION_RIGHT.", 0 );
            SET_CAMERA_OVERRIDE( "RAIL_BUS_CAMERA_AIM", "RAIL_BUS_CAMERA_AIM", 0, 1, 1 );
            SET_RAIL_RELATIVE_DIR( 2, 0 );
            SET_PLAYER_COMBAT_TIMER_MODE( 1 );
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
            {
                SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_1136(), 1, 1 );
                SET_PED_DEFAULT_AIM_AT_COORD(  /* PLAYER_PED_ID */ sub_1098(), -51.30000000, 132.29000000, 1.14000000 );
                TASK_AIM_GUN_AT_COORD(  /* PLAYER_PED_ID */ sub_1098(), -51.30000000, 132.29000000, 1.14000000, -1, 1 );
            }
             /* WRITESCRIPTLOG */ sub_442( "CCB", "e10_03_BusBlendOut - STATE_MIDSCENE_01", 0 );
            l_U164 = 6;
        }
        break;
        case 6:
        if ( /* ISTIMERDONE */ sub_1890( ref l_U446 ))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Enabling the camera aim override...", 0 );
            CAMERA_AIM_OVERRIDE( 1 );
            SET_FORCED_AIM_INTENTION_DIRECTION( 0.65707700, 0.75369800, -0.01373400 );
            SET_FORCED_FORWARD_DIRECTION( 0.82878000, -0.55957500, 0.00000000 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "e10_03_BusBlendOut - STATE_MIDSCENE_02", 0 );
            l_U164 = 7;
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
            PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
            PRINTNL();
        }
        break;
        case 7:
         /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
        PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
        PRINTNL();
         /* P_START_CAMERA */ sub_27672();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
            CAMERA_ANIMATED_STOP( 400, 1 );
        }
        l_U446._fU12 = 400;
         /* RESETTIMER */ sub_2466( ref l_U446 );
         /* STARTTIMER */ sub_1757( ref l_U446 );
         /* WRITESCRIPTLOG */ sub_442( "CCB", "e10_03_BusBlendOut - STATE_MIDSCENE_03", 0 );
        l_U164 = 8;
        break;
        case 8:
        if ( /* ISTIMERDONE */ sub_1890( ref l_U446 ))
        {
            l_U142 = 0;
             /* CREATETIMER */ sub_1607( ref l_U437, 150, 1, 0 );
             /* STARTTIMER */ sub_1757( ref l_U437 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "e10_03_BusBlendOut - STATE_MIDSCENE_COMPLETE", 0 );
            l_U164 = 39;
        }
        break;
        case 39: break;
    }
    return;
}

/* P_START_RAIL_BUSSTART_VCPF */ void sub_24264()
{
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "P_START_RAIL_BUSSTART_VCPF", 0 );
        if (NOT (IS_PED_DEAD( l_U246[0] )))
        {
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 3000 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -52.00000000, 135.13000000, 0.30000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U246[0], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U246[1] )))
        {
            REGISTER_TARGET( l_U246[1],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U246[1],  /* PLAYER_PED_ID */ sub_1098() );
            SET_PED_FORCE_KNEEL_AND_FIRE( l_U246[1], 1 );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 3900 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -52.42000000, 149.08000000, 0.30000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U246[1], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U246[2] )))
        {
            REGISTER_TARGET( l_U246[2],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U246[2],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 4100 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -52.04000000, 152.11000000, 0.30000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U246[2], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U246[3] )))
        {
            REGISTER_TARGET( l_U246[3],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U246[3],  /* PLAYER_PED_ID */ sub_1098() );
            SET_PED_FORCE_KNEEL_AND_FIRE( l_U246[3], 1 );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 4200 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -51.50000000, 156.06000000, 0.30000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U246[3], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
    }
    return;
}

/* P_STREAMREQ_SCRIPT_STREAM_PLAY_FRONTEND */ void sub_25240(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 = -1;
    if ( /* F_STREAMREQ_SCRIPT_STREAM_IS_ASSET_LOADED */ sub_25299( uParam0, uParam1 ))
    {
        iVar4 =  /* F_STREAMREQ_SCRIPT_STREAM_GET_SLOT */ sub_25508( uParam0, uParam1 );
        if (NOT (iVar4 == -1))
        {
            DISPLAYF( "[CCB]### Playing the SCRIPT_STREAM: {} ###", 1, 1281, ref (uParam1^)[iVar4]._fU0 );
            PLAY_SCRIPT_STREAM_FRONTEND( iVar4 );
        }
        else
        {
            DISPLAYF( "[CCB]### The SCRIPT_STREAM slot is NOT valid!!! {} ###", 1, 1537, uParam0 );
            SCRIPT_ASSERT( "Attempting to play a SCRIPT_STREAM asset slot that is NOT valid!!!", 0 );
        }
    }
    else
    {
        DISPLAYF( "[CCB]### The SCRIPT_STREAM asset is NOT loaded!!! {} ###", 1, 1537, uParam0 );
        SCRIPT_ASSERT( "Attempting to play a SCRIPT_STREAM asset that is NOT loaded!!!", 0 );
    }
    return;
}

/* F_STREAMREQ_SCRIPT_STREAM_IS_ASSET_LOADED */ int sub_25299(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I]._fU32 == 3)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[I]._fU0, uParam0 ))
            {
                DISPLAYF( "[CCB]### The SCRIPT_STREAM is loaded: {} ###", 1, 1281, ref (uParam1^)[I]._fU0 );
                return 1;
            }
        }
    }
    return 0;
}

/* F_STREAMREQ_SCRIPT_STREAM_GET_SLOT */ int sub_25508(unknown uParam0, unknown uParam1)
{
    int Result;

    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
        {
            return Result;
        }
    }
    return -1;
}

/* P_START_CAMERA */ void sub_27672()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_START_CAMERA", 0 );
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_START_CAMERA fuel section...", 0 );
     /* NIS_RETURN_TO_GAMEPLAY_CAM */ sub_27788( 0, 0, 0, 87.00000000, -3.00000000, 0 );
    return;
}

/* NIS_RETURN_TO_GAMEPLAY_CAM */ void sub_27788(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, float fParam4, unknown uParam5)
{
    SET_CAM_SIDE_LEFT( uParam2 );
    if (fParam4 != -1E8)
    {
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( uParam3, 1065353216, 0 );
    }
    if (fParam4 != -1E8)
    {
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( fParam4, 1065353216, 0 );
    }
    RENDER_SCRIPT_CAMS( 0, uParam1, uParam0, uParam5 );
    return;
}

/* P_HANDLE_SPAWN_FUEL_VEHICLES */ void sub_28227()
{
    switch (l_U151)
    {
        case 0:
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
             /* P_SPAWN_RAIL_FUEL_VEHICLES */ sub_28327();
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eFuelVehicleSpawn - STATE_SPAWN_COMPLETE", 0 );
            l_U151 = 3;
        }
        else
        {
            l_U719 = 0;
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eFuelVehicleSpawn - STATE_SPAWN_IDLE", 0 );
            l_U151 = 1;
        }
        break;
        case 1:
        if (l_U719 < 2)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Spawning viRailFuelVehicles:", 0 );
            PRINTINT( l_U719 );
            PRINTNL();
            l_U287[l_U719] =  /* CREATEVEHICLE */ sub_18389( 1572429640, l_U1563[l_U719], l_U1260[l_U719], 0, 0, 0 );
             /* P_SETUP_RAIL_FUEL_VEHICLES */ sub_28472( ref l_U287, l_U719 );
            l_U719++;
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eFuelVehicleSpawn - STATE_SPAWN_COMPLETE", 0 );
            l_U151 = 3;
        }
        break;
        case 3: break;
    }
    return;
}

/* P_SPAWN_RAIL_FUEL_VEHICLES */ void sub_28327()
{
    int I;

     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_SPAWN_RAIL_FUEL_VEHICLES", 0 );
    for ( I = 0; I <= (l_U287 - 1); I++ )
    {
        l_U287[I] =  /* CREATEVEHICLE */ sub_18389( 1572429640, l_U1563[I], l_U1260[I], 0, 0, 0 );
         /* P_SETUP_RAIL_FUEL_VEHICLES */ sub_28472( ref l_U287, I );
    }
    return;
}

/* P_SETUP_RAIL_FUEL_VEHICLES */ void sub_28472(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_VEHICLE_DEAD( (uParam0^)[uParam1] )))
    {
        SET_VEHICLE_ON_GROUND_PROPERLY( (uParam0^)[uParam1] );
        SET_VEHICLE_FREEZE_AFTER_BLOWING_UP( (uParam0^)[uParam1], 1 );
        SET_VEHICLE_CAN_BE_DAMAGED( (uParam0^)[uParam1], 1 );
        SET_VEHICLE_CAN_BE_VISIBLY_DAMAGED( (uParam0^)[uParam1], 1 );
        SET_VEHICLE_PROOFS( (uParam0^)[uParam1], 0, 1, 1, 0, 0 );
        SET_VEHICLE_ENGINE_HEALTH( (uParam0^)[uParam1], 600.00000000 );
        SET_VEHICLE_PETROL_TANK_HEALTH( (uParam0^)[uParam1], 600.00000000 );
        SET_VEHICLE_EXTRA( (uParam0^)[uParam1], 1, 0 );
        SET_VEHICLE_EXTRA( (uParam0^)[uParam1], 2, 0 );
        SET_VEHICLE_EXTRA( (uParam0^)[uParam1], 3, 0 );
        SET_VEHICLE_EXTRA( (uParam0^)[uParam1], 5, 0 );
        SET_VEHICLE_EXTRA( (uParam0^)[uParam1], 6, 1 );
        SET_VEHICLE_EXTRA( (uParam0^)[uParam1], 7, 0 );
        SET_VEHICLE_EXTRA( (uParam0^)[uParam1], 8, 1 );
        SET_VEHICLE_EXTRA( (uParam0^)[uParam1], 9, 1 );
        SET_VEHICLE_DIRT_LEVEL( (uParam0^)[uParam1], 4.00000000 );
        SET_VEHICLE_LIGHTS( (uParam0^)[uParam1], 1 );
    }
    return;
}

/* P_HANDLE_SPAWN_FUEL_PROPS */ void sub_29205()
{
    switch (l_U152)
    {
        case 0:
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
             /* P_SPAWN_RAIL_FUEL_PROPS */ sub_29302();
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eFuelPropSpawn - STATE_SPAWN_COMPLETE", 0 );
            l_U152 = 3;
        }
        else if (l_U151 == 3)
        {
            l_U720 = 0;
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eFuelPropSpawn - STATE_SPAWN_IDLE", 0 );
            l_U152 = 1;
        }
        break;
        case 1:
        if (l_U720 < 4)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Spawning oiFuelProp:", 0 );
            PRINTINT( l_U720 );
            PRINTNL();
            l_U302[l_U720] =  /* CREATEOBJECTNOOFFSET */ sub_29431( l_U182[l_U720], l_U1570[l_U720], 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
            if (DOES_OBJECT_EXIST( l_U302[l_U720] ))
            {
                DISPLAYF( "[CCB] ### The object was created for MODEL_NAME: {!f1}", 2, 1, -874832622, 513, l_U182[l_U720] );
                FREEZE_OBJECT_POSITION( l_U302[l_U720], 1 );
                if (l_U720 >= 2)
                {
                    SET_OBJECT_ONLY_DAMAGED_BY_PLAYER( l_U302[l_U720], 1 );
                    SET_OBJECT_TARGETTABLE( l_U302[l_U720], 1 );
                }
            }
            l_U720++;
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eFuelPropSpawn - STATE_SPAWN_COMPLETE", 0 );
            l_U152 = 3;
        }
        break;
        case 3: break;
    }
    return;
}

/* P_SPAWN_RAIL_FUEL_PROPS */ void sub_29302()
{
    int I;

     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_SPAWN_RAIL_FUEL_PROPS", 0 );
    for ( I = 0; I <= (l_U302 - 1); I++ )
    {
        l_U302[I] =  /* CREATEOBJECTNOOFFSET */ sub_29431( l_U182[I], l_U1570[I], 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
        if (DOES_OBJECT_EXIST( l_U302[I] ))
        {
            DISPLAYF( "[CCB] ### The object was created for MODEL_NAME: {!f1}", 2, 1, -874832622, 513, l_U182[I] );
            FREEZE_OBJECT_POSITION( l_U302[I], 1 );
            if (I >= 2)
            {
                SET_OBJECT_ONLY_DAMAGED_BY_PLAYER( l_U302[I], 1 );
                SET_OBJECT_TARGETTABLE( l_U302[I], 1 );
                SET_OBJECT_PROOFS( l_U302[I], 1, 1, 1, 1, 1 );
                SET_OBJECT_INVINCIBLE( l_U302[I], 1 );
            }
        }
    }
    return;
}

/* CREATEOBJECTNOOFFSET */ void sub_29431(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_16918( uParam0, 1 );
    }
    Result = CREATE_OBJECT_NO_OFFSET( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an object to exist: {!f1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

/* P_HANDLE_SPAWN_RAIL_BUSSTART_VCPF */ void sub_30513()
{
    switch (l_U153)
    {
        case 0:
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
             /* P_SPAWN_RAIL_BUSSTART_VCPF */ sub_30626();
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eBusStartSpawn - STATE_SPAWN_COMPLETE", 0 );
            l_U153 = 3;
        }
        else if (l_U152 == 3)
        {
            l_U721 = 0;
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eBusStartSpawn - STATE_SPAWN_IDLE", 0 );
            l_U153 = 1;
        }
        break;
        case 1:
        if (l_U721 < 4)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Spawning piRailVCPFBusStart_:", 0 );
            PRINTINT( l_U721 );
            PRINTNL();
            l_U246[l_U721] =  /* CREATEPED */ sub_16736( ref l_U764[l_U721] );
             /* P_SETUP_RAIL_BUSSTART_VCPF */ sub_30746( ref l_U246, l_U721 );
            l_U721++;
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eBusStartSpawn - STATE_SPAWN_SETUP", 0 );
            l_U153 = 2;
        }
        break;
        case 2:
         /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_32217( ref l_U246, "piRailVCPFBusStart" );
         /* WRITESCRIPTLOG */ sub_442( "CCB", "eBusStartSpawn - STATE_SPAWN_COMPLETE", 0 );
        l_U153 = 3;
        break;
        case 3: break;
    }
    return;
}

/* P_SPAWN_RAIL_BUSSTART_VCPF */ void sub_30626()
{
    int I;

     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_SPAWN_RAIL_BUSSTART_VCPF", 0 );
    for ( I = 0; I <= 3; I++ )
    {
        l_U246[I] =  /* CREATEPED */ sub_16736( ref l_U764[I] );
         /* P_SETUP_RAIL_BUSSTART_VCPF */ sub_30746( ref l_U246, I );
    }
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_32217( ref l_U246, "piRailVCPFBusStart" );
    return;
}

/* P_SETUP_RAIL_BUSSTART_VCPF */ void sub_30746(unknown uParam0, int iParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^)[iParam1] )))
    {
        if (iParam1 == 0)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting up aigRailVCPFBusStart AI group.", 0 );
             /* P_SETUP_AI_GROUP */ sub_30879( ref l_U204, 1056964608, 0 );
        }
         /* P_QUICK_ADD_PED_TO_GROUP */ sub_31275( (uParam0^)[iParam1], ref l_U204 );
         /* P_SET_PED_TEMPLATE_AND_RANGES */ sub_31670( ref (uParam0^)[iParam1], ref g_U2080, 10, 30 );
        if (iParam1 == 0)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2856, 25000, 0, 0 );
            SET_PED_COMPONENT_VARIATION( (uParam0^)[iParam1], 2, 0, 0, 0 );
        }
        else if (iParam1 == 1)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2856, 25000, 0, 0 );
        }
        else if (iParam1 == 2)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        }
        else if (iParam1 == 3)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
            SET_PED_COMPONENT_VARIATION( (uParam0^)[iParam1], 2, 0, 0, 0 );
        };;;;
        if (iParam1 == 0)
        {
            SET_PED_ALERTNESS( (uParam0^)[iParam1], 1 );
            SET_PED_EMOTION_STATE( (uParam0^)[iParam1], 1 );
        }
        else
        {
            SET_PED_ALERTNESS( (uParam0^)[iParam1], 3 );
            SET_PED_EMOTION_STATE( (uParam0^)[iParam1], 1 );
        }
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^)[iParam1], 1 );
        SET_PED_ACCURACY( (uParam0^)[iParam1], 31186664 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 256, 0 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 1, 0 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^)[iParam1], 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^)[iParam1], 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^)[iParam1], 1 );
        TASK_STAND_STILL( (uParam0^)[iParam1], -1 );
    }
    return;
}

/* P_SETUP_AI_GROUP */ void sub_30879(int iParam0, unknown uParam1, boolean bParam2)
{
    iParam0->_fU4 = uParam1;
    iParam0->_fU0 = CREATE_GROUP( 3, 1 );
    if (bParam2)
    {
        PRINTSTRING( "[MSWW]### P_SETUP_AI_GROUP TOLD TO WAIT FOR GROUP TO EXIST ###" );
        PRINTNL();
        while (NOT (DOES_GROUP_EXIST( iParam0->_fU0 )))
        {
            WAIT( 0 );
            PRINTSTRING( "[MSWW]### GROUP ###" );
            PRINTNL();
        }
        PRINTSTRING( "[MSWW]### P_SETUP_AI_GROUP created group with ID: " );
        PRINTINT( iParam0->_fU0 );
        PRINTNL();
    }
    SET_GROUP_RATIO_FIRING_AT_VISIBLE( iParam0->_fU0, iParam0->_fU4 );
    SET_GROUP_RATIO_FIRING_AT_INVISIBLE( iParam0->_fU0, iParam0->_fU4 );
    if (iParam0->_fU8)
    {
        SET_GROUP_FORMATION( iParam0->_fU0, iParam0->_fU12 );
        SET_GROUP_FORMATION_SPACING( iParam0->_fU0, iParam0->_fU16 );
        SET_GROUP_FORMATION_MAX_MOVE_SPEED( iParam0->_fU0, iParam0->_fU20 );
    }
    return;
}

/* P_QUICK_ADD_PED_TO_GROUP */ void sub_31275(unknown uParam0, int iParam1)
{
    int iVar4;
    unknown uVar5;

    if ((DOES_GROUP_EXIST( iParam1->_fU0 )) == 0)
    {
         /* WRITE_STRING */ sub_11615( "[SP]### Warning!!! Group does not exist. Creating new group specified attributes. ###" );
        if (iParam1->_fU4 > 0)
        {
             /* P_SETUP_AI_GROUP */ sub_30879( iParam1, iParam1->_fU4, 0 );
        }
        else
        {
             /* P_SETUP_AI_GROUP */ sub_30879( iParam1, 1056964608, 0 );
        }
    }
    else
    {
        PRINTSTRING( "[MSWW]### P_QUICK_ADD_PED_TO_GROUP adding ped to group with ID: " );
        PRINTINT( iParam1->_fU0 );
        PRINTNL();
    }
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        GET_GROUP_SIZE( iParam1->_fU0, ref iVar4, ref uVar5 );
        if (iVar4 == 0)
        {
            SET_PED_AS_GROUP_LEADER( uParam0, iParam1->_fU0 );
        }
        else
        {
            SET_PED_AS_GROUP_MEMBER( uParam0, iParam1->_fU0 );
        }
        SET_PED_NEVER_LEAVES_GROUP( uParam0, 1 );
    }
    return;
}

/* P_SET_PED_TEMPLATE_AND_RANGES */ void sub_31670(unknown uParam0, unknown uParam1, float fParam2, float fParam3)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        SET_PED_AI_TEMPLATE( (uParam0^), uParam1 );
        if (fParam2 > -1)
        {
            SET_PED_COMBAT_RANGE_MIN( (uParam0^), fParam2 );
        }
        if (fParam3 > -1)
        {
            SET_PED_COMBAT_RANGE_MAX( (uParam0^), fParam3 );
        }
    }
    return;
}

/* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ void sub_32217(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

/* P_HANDLE_SPAWN_RAIL_FUEL_VCPF */ void sub_32795()
{
    switch (l_U154)
    {
        case 0:
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
             /* P_SPAWN_RAIL_FUEL_VCPF */ sub_32904();
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eFuelSpawn - STATE_SPAWN_COMPLETE", 0 );
            l_U154 = 3;
        }
        else if (l_U153 == 3)
        {
            l_U722 = 0;
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eFuelSpawn - STATE_SPAWN_IDLE", 0 );
            l_U154 = 1;
        }
        break;
        case 1:
        if (l_U722 < 10)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Spawning piRailVCPFFuel_:", 0 );
            PRINTINT( l_U722 );
            PRINTNL();
            l_U251[l_U722] =  /* CREATEPED */ sub_16736( ref l_U817[l_U722] );
             /* P_SETUP_RAIL_FUEL_VCPF */ sub_33016( ref l_U251, l_U722 );
            l_U722++;
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eFuelSpawn - STATE_SPAWN_SETUP", 0 );
            l_U154 = 2;
        }
        break;
        case 2:
         /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_32217( ref l_U251, "piRailVCPFFuel" );
         /* WRITESCRIPTLOG */ sub_442( "CCB", "eFuelSpawn - STATE_SPAWN_COMPLETE", 0 );
        l_U154 = 3;
        break;
        case 3: break;
    }
    return;
}

/* P_SPAWN_RAIL_FUEL_VCPF */ void sub_32904()
{
    int I;

     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_SPAWN_RAIL_FUEL_VCPF", 0 );
    for ( I = 0; I <= 9; I++ )
    {
        l_U251[I] =  /* CREATEPED */ sub_16736( ref l_U817[I] );
         /* P_SETUP_RAIL_FUEL_VCPF */ sub_33016( ref l_U251, I );
    }
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_32217( ref l_U251, "piRailVCPFFuel" );
    return;
}

/* P_SETUP_RAIL_FUEL_VCPF */ void sub_33016(unknown uParam0, int iParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^)[iParam1] )))
    {
        if (iParam1 == 0)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting up aigRailVCPFFuel AI group.", 0 );
             /* P_SETUP_AI_GROUP */ sub_30879( ref l_U210, 0.25000000, 0 );
        }
         /* P_QUICK_ADD_PED_TO_GROUP */ sub_31275( (uParam0^)[iParam1], ref l_U210 );
         /* P_SET_PED_TEMPLATE_AND_RANGES */ sub_31670( ref (uParam0^)[iParam1], ref g_U2072, 6.00000000, 65.00000000 );
         /* P_TETHERPED */ sub_33199( ref l_U1212, (uParam0^)[iParam1], 3 );
         /* P_FLEEZONEADDPED */ sub_33296( ref l_U1216, (uParam0^)[iParam1], 5 );
         /* P_FLEEZONEADDPED */ sub_33296( ref l_U1217, (uParam0^)[iParam1], 5 );
        if (iParam1 == 0)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2855, 25000, 0, 0 );
        }
        else if (iParam1 == 1)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        }
        else if (iParam1 == 2)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2855, 25000, 0, 0 );
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 0, 1, 0, 255 );
        }
        else if (iParam1 == 3)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2855, 25000, 0, 0 );
        }
        else if (iParam1 == 4)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        }
        else if (iParam1 == 5)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 0, 0, 0, 255 );
        }
        else if (iParam1 == 6)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
        }
        else if (iParam1 == 7)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        }
        else if (iParam1 == 8)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        }
        else if (iParam1 == 9)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        };;;;;;;;;;
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^)[iParam1], 1 );
        SET_PED_EMOTION_STATE( (uParam0^)[iParam1], 1 );
        SET_PED_ALERTNESS( (uParam0^)[iParam1], 2 );
        SET_PED_ACCURACY( (uParam0^)[iParam1], 31186664 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 256, 0 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 1, 0 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^)[iParam1], 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^)[iParam1], 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^)[iParam1], 1 );
        TASK_STAND_STILL( (uParam0^)[iParam1], -1 );
    }
    return;
}

/* P_TETHERPED */ void sub_33199(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_TETHERING_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_TETHERING_OPTION( uParam1, uParam2 );
    }
    return;
}

/* P_FLEEZONEADDPED */ void sub_33296(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_FLEEZONE_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_FLEEZONE_OPTION( uParam1, uParam2 );
    }
    return;
}

/* P_HANDLE_SPAWN_RAIL_TUNNEL_VCPF */ void sub_34435()
{
    switch (l_U156)
    {
        case 0:
        if (l_U166 >= 6)
        {
            l_U724 = 0;
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eTunnelSpawn - STATE_SPAWN_IDLE", 0 );
            l_U156 = 1;
        }
        break;
        case 1:
        if (l_U724 < 3)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Spawning piRailVCPFTunnel_:", 0 );
            PRINTINT( l_U724 );
            PRINTNL();
            l_U267[l_U724] =  /* CREATEPED */ sub_16736( ref l_U1001[l_U724] );
             /* P_SETUP_RAIL_TUNNEL_VCPF */ sub_34708( ref l_U267, l_U724 );
            l_U724++;
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eTunnelSpawn - STATE_SPAWN_SETUP", 0 );
            l_U156 = 2;
        }
        break;
        case 2:
         /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_32217( ref l_U267, "piRailVCPFTunnel" );
         /* WRITESCRIPTLOG */ sub_442( "CCB", "eTunnelSpawn - STATE_SPAWN_COMPLETE", 0 );
        l_U156 = 3;
        break;
        case 3: break;
    }
    return;
}

/* P_SETUP_RAIL_TUNNEL_VCPF */ void sub_34708(unknown uParam0, int iParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^)[iParam1] )))
    {
        if (iParam1 == 0)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting up aigRailVCPFTunnel AI group.", 0 );
             /* P_SETUP_AI_GROUP */ sub_30879( ref l_U222, 1056964608, 0 );
        }
         /* P_QUICK_ADD_PED_TO_GROUP */ sub_31275( (uParam0^)[iParam1], ref l_U222 );
         /* P_SET_PED_TEMPLATE_AND_RANGES */ sub_31670( ref (uParam0^)[iParam1], ref g_U2088, -1.00000000, -1.00000000 );
        SET_ROOM_FOR_PED_BY_NAME( (uParam0^)[iParam1], "Room_tunnel01" );
        if (iParam1 == 0)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2856, 25000, 0, 0 );
        }
        else if (iParam1 == 1)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        }
        else if (iParam1 == 2)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        };;;
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^)[iParam1], 1 );
        SET_PED_EMOTION_STATE( (uParam0^)[iParam1], 1 );
        SET_PED_ALERTNESS( (uParam0^)[iParam1], 2 );
        SET_PED_ACCURACY( (uParam0^)[iParam1], 31186664 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 256, 0 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 1, 0 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^)[iParam1], 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^)[iParam1], 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^)[iParam1], 1 );
        TASK_STAND_STILL( (uParam0^)[iParam1], -1 );
    }
    return;
}

/* P_HANDLE_SPAWN_RAIL_TUNNEL_EXIT_VCPF */ void sub_35364()
{
    switch (l_U157)
    {
        case 0:
        if (l_U166 >= 6)
        {
            if (l_U156 >= 3)
            {
                l_U725 = 0;
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eTunnelExitSpawn - STATE_SPAWN_IDLE", 0 );
                l_U157 = 1;
            }
        }
        break;
        case 1:
        if (l_U725 < 3)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Spawning psRailVCPFTunnelExit:", 0 );
            PRINTINT( l_U725 );
            PRINTNL();
            l_U271[l_U725] =  /* CREATEPED */ sub_16736( ref l_U1041[l_U725] );
             /* P_SETUP_RAIL_TUNNEL_EXIT_VCPF */ sub_35661( ref l_U271, l_U725 );
            l_U725++;
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eTunnelExitSpawn - STATE_SPAWN_SETUP", 0 );
            l_U157 = 2;
        }
        break;
        case 2:
         /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_32217( ref l_U271, "piRailVCPFTunnelExit" );
         /* WRITESCRIPTLOG */ sub_442( "CCB", "eTunnelExitSpawn - STATE_SPAWN_COMPLETE", 0 );
        l_U157 = 3;
        break;
        case 3: break;
    }
    return;
}

/* P_SETUP_RAIL_TUNNEL_EXIT_VCPF */ void sub_35661(unknown uParam0, int iParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^)[iParam1] )))
    {
         /* P_SET_PED_TEMPLATE_AND_RANGES */ sub_31670( ref (uParam0^)[iParam1], ref g_U2088, -1.00000000, -1.00000000 );
        if (iParam1 == 0)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2861, 25000, 0, 0 );
            SET_PED_INVINCIBLE( (uParam0^)[iParam1], 1 );
            SET_PED_PROOFS( (uParam0^)[iParam1], 1, 1, 1, 1, 1 );
            SET_PED_CAN_RAGDOLL( (uParam0^)[iParam1], 0 );
            SET_PED_PERFECT_ACCURACY_OVERRIDE( (uParam0^)[iParam1], 1 );
        }
        else if (iParam1 == 1)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
            SET_PED_COMBAT_MOVEMENT( (uParam0^)[iParam1], 0 );
        }
        else if (iParam1 == 2)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
            SET_PED_COMBAT_MOVEMENT( (uParam0^)[iParam1], 0 );
        };;;
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^)[iParam1], 1 );
        SET_PED_EMOTION_STATE( (uParam0^)[iParam1], 1 );
        SET_PED_ALERTNESS( (uParam0^)[iParam1], 2 );
        SET_PED_ACCURACY( (uParam0^)[iParam1], 31186664 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 256, 0 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 1, 0 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^)[iParam1], 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^)[iParam1], 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^)[iParam1], 1 );
        TASK_STAND_STILL( (uParam0^)[iParam1], -1 );
    }
    return;
}

/* P_HANDLE_SPAWN_TUNNEL_VEHICLES */ void sub_36305()
{
    switch (l_U159)
    {
        case 0:
        if (l_U166 >= 9)
        {
            l_U727 = 0;
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eVehicleTunnelSpawn - STATE_SPAWN_IDLE", 0 );
            l_U159 = 1;
        }
        break;
        case 1:
        if (l_U727 < 4)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Spawning viRailTunnelVehicles:", 0 );
            PRINTINT( l_U727 );
            PRINTNL();
            l_U291[l_U727] =  /* CREATEVEHICLE */ sub_18389( l_U194[l_U727], l_U1279[l_U727], l_U1224[l_U727], 0, 0, 0 );
             /* P_SETUP_RAIL_TUNNEL_VEHICLES */ sub_36608( ref l_U291, l_U727 );
            l_U727++;
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eVehicleTunnelSpawn - STATE_SPAWN_COMPLETE", 0 );
            l_U159 = 3;
        }
        break;
        case 3: break;
    }
    return;
}

/* P_SETUP_RAIL_TUNNEL_VEHICLES */ void sub_36608(unknown uParam0, int iParam1)
{
    if (NOT (IS_VEHICLE_DEAD( (uParam0^)[iParam1] )))
    {
        SET_VEHICLE_ON_GROUND_PROPERLY( (uParam0^)[iParam1] );
        SET_VEHICLE_FREEZE_AFTER_BLOWING_UP( (uParam0^)[iParam1], 1 );
        SET_VEHICLE_CAN_BE_DAMAGED( (uParam0^)[iParam1], 1 );
        SET_VEHICLE_CAN_BE_VISIBLY_DAMAGED( (uParam0^)[iParam1], 1 );
        SET_VEHICLE_PROOFS( (uParam0^)[iParam1], 0, 1, 1, 0, 0 );
        if (iParam1 == 0)
        {
            SET_VEHICLE_DOOR_OPEN( (uParam0^)[iParam1], 5 );
        }
        else if (iParam1 == 1)
        {
            SET_VEHICLE_DOOR_OPEN( (uParam0^)[iParam1], 0 );
            SET_VEHICLE_DOOR_OPEN( (uParam0^)[iParam1], 1 );
        }
        SET_VEHICLE_DIRT_LEVEL( (uParam0^)[iParam1], 4.00000000 );
    }
    return;
}

/* P_HANDLE_SPAWN_RAIL_TERMINAL_VCPF */ void sub_36941()
{
    switch (l_U158)
    {
        case 0:
        if (l_U168 >= 6)
        {
            l_U726 = 0;
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eTerminalSpawn - STATE_SPAWN_IDLE", 0 );
            l_U158 = 1;
        }
        break;
        case 1:
        if (l_U726 < 10)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Spawning psRailVCPFTerminal:", 0 );
            PRINTINT( l_U726 );
            PRINTNL();
            l_U275[l_U726] =  /* CREATEPED */ sub_16736( ref l_U1081[l_U726] );
             /* P_SETUP_RAIL_TERMINAL_VCPF */ sub_37219( ref l_U275, l_U726 );
            l_U726++;
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eTerminalSpawn - STATE_SPAWN_SETUP", 0 );
            l_U158 = 2;
        }
        break;
        case 2:
         /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_32217( ref l_U275, "piRailVCPFTerminal" );
         /* WRITESCRIPTLOG */ sub_442( "CCB", "eTerminalSpawn - STATE_SPAWN_COMPLETE", 0 );
        l_U158 = 3;
        break;
        case 3: break;
    }
    return;
}

/* P_SETUP_RAIL_TERMINAL_VCPF */ void sub_37219(unknown uParam0, int iParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^)[iParam1] )))
    {
        if (iParam1 == 0)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting up aigRailVCPFTerminalFirst AI groups.", 0 );
             /* P_SETUP_AI_GROUP */ sub_30879( ref l_U228, 0.10000000, 0 );
        }
        else if (iParam1 == 4)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting up aigRailVCPFTerminalMid AI groups.", 0 );
             /* P_SETUP_AI_GROUP */ sub_30879( ref l_U234, 0.10000000, 0 );
        }
        else if (iParam1 == 8)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting up aigRailVCPFTerminalLast AI groups.", 0 );
             /* P_SETUP_AI_GROUP */ sub_30879( ref l_U240, 0.10000000, 0 );
        };;;
        if (iParam1 >= 8)
        {
             /* P_QUICK_ADD_PED_TO_GROUP */ sub_31275( (uParam0^)[iParam1], ref l_U240 );
             /* P_TETHERPED */ sub_33199( ref l_U1215, (uParam0^)[iParam1], 1 );
        }
        else if ((iParam1 <= 7) AND (iParam1 >= 4))
        {
             /* P_QUICK_ADD_PED_TO_GROUP */ sub_31275( (uParam0^)[iParam1], ref l_U234 );
             /* P_TETHERPED */ sub_33199( ref l_U1214, (uParam0^)[iParam1], 1 );
        }
        else
        {
             /* P_QUICK_ADD_PED_TO_GROUP */ sub_31275( (uParam0^)[iParam1], ref l_U228 );
             /* P_TETHERPED */ sub_33199( ref l_U1213, (uParam0^)[iParam1], 1 );
        }
        if (iParam1 == 0)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 0, 0, 0, 255 );
        }
        else if (iParam1 == 1)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
        }
        else if (iParam1 == 2)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
        }
        else if (iParam1 == 3)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        }
        else if (iParam1 == 4)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2855, 25000, 0, 0 );
        }
        else if (iParam1 == 5)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2856, 25000, 0, 0 );
        }
        else if (iParam1 == 6)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2856, 25000, 0, 0 );
        }
        else if (iParam1 == 7)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2855, 25000, 0, 0 );
        }
        else if (iParam1 == 8)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 0, 0, 0, 255 );
        }
        else if (iParam1 == 9)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        };;;;;;;;;;
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^)[iParam1], 1 );
        if (iParam1 == 0)
        {
            SET_PED_EMOTION_STATE( (uParam0^)[iParam1], 1 );
            SET_PED_ALERTNESS( (uParam0^)[iParam1], 3 );
        }
        else
        {
            SET_PED_EMOTION_STATE( (uParam0^)[iParam1], 1 );
            SET_PED_ALERTNESS( (uParam0^)[iParam1], 2 );
        }
        SET_PED_ACCURACY( (uParam0^)[iParam1], 31186664 );
        SET_PED_SEEING_RANGE( (uParam0^)[iParam1], 150.00000000, 75 );
        SET_PED_HEARING_RANGE( (uParam0^)[iParam1], 150.00000000 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 256, 0 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 1, 0 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^)[iParam1], 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^)[iParam1], 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^)[iParam1], 1 );
        TASK_STAND_STILL( (uParam0^)[iParam1], -1 );
    }
    return;
}

/* P_HANDLE_SPAWN_TERMINAL_PROPS */ void sub_38511()
{
    switch (l_U160)
    {
        case 0:
        if (l_U145 >= 12)
        {
            l_U728 = 0;
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eTerminalPropSpawn - STATE_SPAWN_IDLE", 0 );
            l_U160 = 1;
        }
        break;
        case 1:
        if (l_U728 < 2)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Spawning oiTerminalProp:", 0 );
            PRINTINT( l_U728 );
            PRINTNL();
            l_U307[l_U728] =  /* CREATEOBJECTNOOFFSET */ sub_29431( l_U173[l_U728], l_U1501[l_U728], 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
            if (DOES_OBJECT_EXIST( l_U307[l_U728] ))
            {
                DISPLAYF( "[CCB] ### The object was created for MODEL_NAME: {!f1}", 2, 1, -874832622, 513, l_U173[l_U728] );
                FREEZE_OBJECT_POSITION( l_U307[l_U728], 1 );
            }
            l_U728++;
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eTerminalPropSpawn - STATE_SPAWN_COMPLETE", 0 );
            l_U160 = 3;
        }
        break;
        case 3: break;
    }
    return;
}

/* P_HANDLE_SPAWN_ENDCRASH_PROPS */ void sub_39027()
{
    switch (l_U161)
    {
        case 0:
        if (l_U145 >= 12)
        {
            if (l_U160 >= 3)
            {
                if (l_U168 >= 13)
                {
                    l_U729 = 0;
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashPropSpawn - STATE_SPAWN_IDLE", 0 );
                    l_U161 = 1;
                }
            }
        }
        break;
        case 1:
        if (l_U729 < 6)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Spawning oiEndCrashProp:", 0 );
            PRINTINT( l_U729 );
            PRINTNL();
            l_U310[l_U729] =  /* CREATEOBJECTNOOFFSET */ sub_29431( l_U187[l_U729], l_U1508[l_U729], 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
            if (DOES_OBJECT_EXIST( l_U310[l_U729] ))
            {
                DISPLAYF( "[CCB] ### The object was created for MODEL_NAME: {!f1}", 2, 1, -874832622, 513, l_U187[l_U729] );
                FREEZE_OBJECT_POSITION( l_U310[l_U729], 1 );
            }
            l_U729++;
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashPropSpawn - STATE_MIDSCENE_COMPLETE", 0 );
            l_U161 = 3;
        }
        break;
        case 3: break;
    }
    return;
}

/* P_HANDLE_SPAWN_PARKED_VEHICLES */ void sub_39570()
{
    switch (l_U162)
    {
        case 0:
        if (l_U145 >= 12)
        {
            if (l_U161 >= 3)
            {
                if (l_U168 >= 13)
                {
                    if ( /* F_STREAMREQ_MODELNAMES_IS_ASSET_LOADED */ sub_5387( -1221193536, ref g_U910 ))
                    {
                        l_U730 = 0;
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eParkedVehicleSpawn - STATE_SPAWN_IDLE", 0 );
                        l_U162 = 1;
                    }
                }
            }
        }
        break;
        case 1:
        if (l_U730 < 4)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Spawning viRailParkedCars:", 0 );
            PRINTINT( l_U730 );
            PRINTNL();
            l_U297[l_U730] =  /* CREATEVEHICLE */ sub_18389( l_U199[l_U730], l_U1292[l_U730], l_U1229[l_U730], 0, 0, 0 );
             /* P_SETUP_RAIL_PARKED_CARS */ sub_39912( ref l_U297, l_U730 );
            l_U730++;
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eParkedVehicleSpawn - STATE_SPAWN_COMPLETE", 0 );
            l_U162 = 3;
        }
        break;
        case 3: break;
    }
    return;
}

/* P_SETUP_RAIL_PARKED_CARS */ void sub_39912(unknown uParam0, int iParam1)
{
    if (NOT (IS_VEHICLE_DEAD( (uParam0^)[iParam1] )))
    {
        SET_VEHICLE_ON_GROUND_PROPERLY( (uParam0^)[iParam1] );
        SET_VEHICLE_FREEZE_AFTER_BLOWING_UP( (uParam0^)[iParam1], 1 );
        SET_VEHICLE_CAN_BE_DAMAGED( (uParam0^)[iParam1], 0 );
        SET_VEHICLE_CAN_BE_VISIBLY_DAMAGED( (uParam0^)[iParam1], 0 );
        SET_VEHICLE_PROOFS( (uParam0^)[iParam1], 0, 1, 1, 0, 0 );
        SET_VEHICLE_ENGINE_HEALTH( (uParam0^)[iParam1], 600.00000000 );
        SET_VEHICLE_PETROL_TANK_HEALTH( (uParam0^)[iParam1], 300.00000000 );
        SET_VEHICLE_DIRT_LEVEL( (uParam0^)[iParam1], 4.00000000 );
        if (iParam1 == 0)
        {
            SET_VEHICLE_COLOUR_COMBINATION( (uParam0^)[iParam1], 0 );
        }
        else if (iParam1 == 1)
        {
            SET_VEHICLE_COLOUR_COMBINATION( (uParam0^)[iParam1], 0 );
        }
        else if (iParam1 == 2)
        {
            SET_VEHICLE_COLOUR_COMBINATION( (uParam0^)[iParam1], 0 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting vehicle extra 1...", 0 );
            SET_VEHICLE_EXTRA( (uParam0^)[iParam1], 1, 0 );
        }
        else if (iParam1 == 3)
        {
            SET_VEHICLE_COLOUR_COMBINATION( (uParam0^)[iParam1], 0 );
        };;;;
    }
    return;
}

/* P_HANDLE_AUDIO_STREAM */ void sub_40379()
{
    switch (l_U146)
    {
        case 0:
        if (l_U145 >= 11)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eAudioStreamState - STATE_AUDIO_01", 0 );
            l_U146 = 1;
        }
        break;
        case 1:
        if (l_U172 >= 12)
        {
            if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
            {
                if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                {
                    if (NOT ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2331, 6700.00000000 )))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping SBUS_RS_A script stream...", 0 );
                         /* P_STREAMREQ_SCRIPT_STREAM_STOP */ sub_40799( "SBUS_RS_A", ref g_U1704 );
                         /* P_STREAMREQ_SCRIPT_STREAM_REMOVE */ sub_41280( "SBUS_RS_A", ref g_U1704 );
                         /* P_STREAMREQ_SCRIPT_STREAM_INSERT */ sub_41641( "SBUS_RS_D", ref g_U1704 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Playing SBUS_RS_B script stream...", 0 );
                         /* P_STREAMREQ_SCRIPT_STREAM_PLAY_FRONTEND */ sub_25240( "SBUS_RS_B", ref g_U1704 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eAudioStreamState - STATE_AUDIO_02", 0 );
                        l_U146 = 2;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping SBUS_RS_A script stream...", 0 );
                         /* P_STREAMREQ_SCRIPT_STREAM_STOP */ sub_40799( "SBUS_RS_A", ref g_U1704 );
                         /* P_STREAMREQ_SCRIPT_STREAM_REMOVE */ sub_41280( "SBUS_RS_A", ref g_U1704 );
                         /* P_STREAMREQ_SCRIPT_STREAM_INSERT */ sub_41641( "SBUS_RS_D", ref g_U1704 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eAudioStreamStatei - STATE_AUDIO_02", 0 );
                        l_U146 = 2;
                    }
                }
            }
        }
        break;
        case 2:
        if (l_U168 >= 6)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping SBUS_RS_B script stream...", 0 );
             /* P_STREAMREQ_SCRIPT_STREAM_STOP */ sub_40799( "SBUS_RS_B", ref g_U1704 );
             /* P_STREAMREQ_SCRIPT_STREAM_REMOVE */ sub_41280( "SBUS_RS_B", ref g_U1704 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Playing SBUS_RS_C script stream...", 0 );
             /* P_STREAMREQ_SCRIPT_STREAM_PLAY_FRONTEND */ sub_25240( "SBUS_RS_C", ref g_U1704 );
            if (( /* F_STREAMREQ_SCRIPT_STREAM_IS_LOADED */ sub_45023( ref g_U1704 )) == 1)
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "The SBUS_RS_D script stream is loaded.", 0 );
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "The SBUS_RS_D script stream is NOT loaded!!!", 0 );
            }
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eAudioStreamState - STATE_AUDIO_03", 0 );
            l_U146 = 3;
        }
        break;
        case 3:
        if (l_U169 >= 5)
        {
            if (l_U113)
            {
                if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
                {
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping SBUS_RS_C script stream...", 0 );
                     /* P_STREAMREQ_SCRIPT_STREAM_STOP */ sub_40799( "SBUS_RS_C", ref g_U1704 );
                     /* P_STREAMREQ_SCRIPT_STREAM_REMOVE */ sub_41280( "SBUS_RS_C", ref g_U1704 );
                     /* P_STREAMREQ_SCRIPT_STREAM_PLAY_FRONTEND */ sub_25240( "SBUS_RS_D", ref g_U1704 );
                     /* P_STREAMREQ_SCRIPT_STREAM_INSERT */ sub_41641( "SBUS_RS_E", ref g_U1704 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eAudioStreamState - STATE_AUDIO_04", 0 );
                    l_U146 = 4;
                }
            }
            else if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
            {
                if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2333, 28541.75000000 ))
                {
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping SBUS_RS_C script stream...", 0 );
                     /* P_STREAMREQ_SCRIPT_STREAM_STOP */ sub_40799( "SBUS_RS_C", ref g_U1704 );
                     /* P_STREAMREQ_SCRIPT_STREAM_REMOVE */ sub_41280( "SBUS_RS_C", ref g_U1704 );
                     /* P_STREAMREQ_SCRIPT_STREAM_PLAY_FRONTEND */ sub_25240( "SBUS_RS_D", ref g_U1704 );
                     /* P_STREAMREQ_SCRIPT_STREAM_INSERT */ sub_41641( "SBUS_RS_E", ref g_U1704 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eAudioStreamState - STATE_AUDIO_04", 0 );
                    l_U146 = 4;
                }
            }
        }
        break;
        case 4:
        if (l_U169 >= 29)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping SBUS_RS_D script stream...", 0 );
             /* P_STREAMREQ_SCRIPT_STREAM_STOP */ sub_40799( "SBUS_RS_D", ref g_U1704 );
             /* P_STREAMREQ_SCRIPT_STREAM_REMOVE */ sub_41280( "SBUS_RS_D", ref g_U1704 );
             /* P_STREAMREQ_SCRIPT_STREAM_PLAY_FRONTEND */ sub_25240( "SBUS_RS_E", ref g_U1704 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eAudioStreamState - STATE_AUDIO_COMPLETE", 0 );
            l_U146 = 26;
        }
        break;
        case 26: break;
    }
    return;
}

/* F_HAS_VEHICLE_REACHED_PATH_MARK */ void sub_40604(unknown uParam0, int iParam1, float fParam2)
{
    int Result;

    Result = 0;
    if (NOT (IS_VEHICLE_DEAD( uParam0 )))
    {
        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( uParam0 ))
        {
            if ((GET_CURRENT_PLAYBACK_NUMBER_FOR_VEHICLE( uParam0 )) == iParam1)
            {
                if ((GET_TIME_POSITION_IN_RECORDING( uParam0 )) >= fParam2)
                {
                    Result = 1;
                }
            }
        }
    }
    return Result;
}

/* P_STREAMREQ_SCRIPT_STREAM_STOP */ void sub_40799(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 = -1;
    if ( /* F_STREAMREQ_SCRIPT_STREAM_IS_ASSET_LOADED */ sub_25299( uParam0, uParam1 ))
    {
        iVar4 =  /* F_STREAMREQ_SCRIPT_STREAM_GET_SLOT */ sub_25508( uParam0, uParam1 );
        if (NOT (iVar4 == -1))
        {
            DISPLAYF( "[CCB]### Stopping the SCRIPT_STREAM: {} ###", 1, 1281, ref (uParam1^)[iVar4]._fU0 );
            STOP_SCRIPT_STREAM( iVar4 );
        }
        else
        {
            DISPLAYF( "[CCB]### The SCRIPT_STREAM slot is NOT valid!!! {} ###", 1, 1537, uParam0 );
            SCRIPT_ASSERT( "Attempting to stop a SCRIPT_STREAM asset slot that is NOT valid!!!", 0 );
        }
    }
    else
    {
        DISPLAYF( "[CCB]### The SCRIPT_STREAM asset is NOT loaded!!! {} ###", 1, 1537, uParam0 );
        DISPLAYF( "Attempting to stop a SCRIPT_STREAM asset that is NOT loaded!!!", 0 );
    }
    return;
}

/* P_STREAMREQ_SCRIPT_STREAM_REMOVE */ void sub_41280(unknown uParam0, unknown uParam1)
{
    int I;
    int iVar5;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if (((uParam1^)[I]._fU32 == 1) || (((uParam1^)[I]._fU32 == 2) || ((uParam1^)[I]._fU32 == 3)))
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[I]._fU0, uParam0 ))
            {
                iVar5 =  /* F_STREAMREQ_THREADID_IS_INDEX_AVAILABLE_FOR_REMOVE */ sub_5739( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU36 );
                if (iVar5 == -1)
                {
                    (uParam1^)[I]._fU32 = 4;
                    return;
                }
                else
                {
                    DISPLAYF( "[CCB] ### Requested ThreadID: {} ###", 1, 513, iVar5 );
                    DISPLAYF( "Trying to remove a SCRIPT_STREAM asset that was requested by another thread!!!", 0 );
                    return;
                }
            }
        }
    }
    return;
}

/* P_STREAMREQ_SCRIPT_STREAM_INSERT */ void sub_41641(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 =  /* F_STREAMREQ_SCRIPT_STREAM_IS_INDEX_AVAILABLE */ sub_41697( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
    if (iVar4 >= 0)
    {
        DISPLAYF( "[CCB] ### Found NULL array index: ###", 0 );
        PRINTINT( iVar4 );
        PRINTNL();
        DISPLAYF( "[CCB] ### Storing SCRIPT_STREAM asset name: {} ###", 1, 1537, uParam0 );
        StrCopy( ref (uParam1^)[iVar4]._fU0, uParam0, 32 );
        (uParam1^)[iVar4]._fU32 = 1;
         /* P_STREAMREQ_SCRIPT_STREAM_THREADID_SET_ID */ sub_41961( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
    }
    return;
}

/* F_STREAMREQ_SCRIPT_STREAM_IS_INDEX_AVAILABLE */ int sub_41697(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU32 == 1)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                DISPLAYF( "[CCB] ### The SCRIPT_STREAM is being requested: {} ###", 1, 1281, ref (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The SCRIPT_STREAM asset is currently being requested!!!", 0 );
                 /* P_STREAMREQ_SCRIPT_STREAM_THREADID_SET_ID */ sub_41961( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU32 == 2)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                DISPLAYF( "[CCB] ### The SCRIPT_STREAM is loading: {} ###", 1, 1281, ref (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The SCRIPT_STREAM asset is already loading!!!", 0 );
                 /* P_STREAMREQ_SCRIPT_STREAM_THREADID_SET_ID */ sub_41961( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU32 == 3)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                if (Result <= 2)
                {
                    if ((GET_SCRIPT_STREAM_STATE( uParam0, Result )) == 2)
                    {
                        DISPLAYF( "[CCB] ### The SCRIPT_STREAM is already loaded: {} ###", 1, 1281, ref (uParam1^)[Result]._fU0 );
                        DISPLAYF( "The SCRIPT_STREAM asset is already loaded!!!", 0 );
                         /* P_STREAMREQ_SCRIPT_STREAM_THREADID_SET_ID */ sub_41961( Result, uParam1, uParam2 );
                        return -1;
                    }
                    else
                    {
                        DISPLAYF( "[CCB] ### The SCRIPT_STREAM is being requested: {} ###", 1, 1281, ref (uParam1^)[Result]._fU0 );
                        SCRIPT_ASSERT( "The SCRIPT_STREAM asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                        StrCopy( ref (uParam1^)[Result]._fU0, "", 32 );
                        (uParam1^)[Result]._fU32 = 0;
                         /* P_STREAMREQ_THREADID_RESET */ sub_4793( ref (uParam1^)[Result]._fU36 );
                        return Result;
                    }
                }
                else
                {
                    DISPLAYF( "[CCB] ### The SCRIPT_STREAM is already loaded: {} ###", 1, 1281, ref (uParam1^)[Result]._fU0 );
                    DISPLAYF( "The SCRIPT_STREAM asset is already loaded!!!", 0 );
                     /* P_STREAMREQ_SCRIPT_STREAM_THREADID_SET_ID */ sub_41961( Result, uParam1, uParam2 );
                    return -1;
                }
            }
        }
        else if ((uParam1^)[Result]._fU32 == 4)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                DISPLAYF( "[CCB] ### The SCRIPT_STREAM is being removed: {} ###", 1, 1281, ref (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The SCRIPT_STREAM asset is currently being removed!!!", 0 );
                 /* P_STREAMREQ_SCRIPT_STREAM_THREADID_SET_ID */ sub_41961( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU32 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (Result <= 2)
        {
            if ((GET_SCRIPT_STREAM_STATE( uParam0, iVar6 )) == 2)
            {
                DISPLAYF( "[CCB] ### The SCRIPT_STREAM is already loaded: {} ###", 1, 1537, uParam0 );
                DISPLAYF( "The SCRIPT_STREAM asset is already loaded, but the asset status flag was not set!!!", 0 );
                DISPLAYF( "[CCB] ### Storing SCRIPT_STREAM: {} ###", 1, 1537, uParam0 );
                StrCopy( ref (uParam1^)[iVar6]._fU0, uParam0, 32 );
                (uParam1^)[iVar6]._fU32 = 3;
                 /* P_STREAMREQ_SCRIPT_STREAM_THREADID_SET_ID */ sub_41961( iVar6, uParam1, uParam2 );
                return -1;
            }
            else
            {
                return iVar6;
            }
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The SCRIPT_STREAM - STREAMREQ array is full!!!", 0 );
    return -1;
}

/* P_STREAMREQ_SCRIPT_STREAM_THREADID_SET_ID */ void sub_41961(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 =  /* F_STREAMREQ_THREADID_IS_INDEX_AVAILABLE_FOR_INSERT */ sub_42027( uParam2, ref (uParam1^)[uParam0]._fU36 );
    if (iVar5 >= 0)
    {
        DISPLAYF( "[CCB] ### Storing the THREADID: {} ###", 1, 513, uParam2 );
        (uParam1^)[uParam0]._fU36[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The SCRIPT_STREAM asset thread indices are NOT available!!!", 0 );
    }
    return;
}

/* F_STREAMREQ_THREADID_IS_INDEX_AVAILABLE_FOR_INSERT */ int sub_42027(int iParam0, unknown uParam1)
{
    int I;
    int Result;

    Result = -1;
    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I] == nil)
        {
            Result = I;
        }
        else
        {
            DISPLAYF( "[CCB] ### The THREADID index is being used: {} ###", 1, 513, I );
            if (IS_THREAD_ACTIVE( (uParam1^)[I] ))
            {
                DISPLAYF( "[CCB] ### The THREADID is active: {} ###", 1, 513, (uParam1^)[I] );
                if ((uParam1^)[I] == iParam0)
                {
                    DISPLAYF( "The THREADID was already requested by this thread!!!", 0 );
                    DISPLAYF( "[CCB] ### Resetting the THREADID index value to NULL. {} ###", 1, 513, I );
                    (uParam1^)[I] = nil;
                    Result = I;
                }
                else
                {
                    DISPLAYF( "[CCB] ### The THREADID index was requested by another thread!!! {} ###", 1, 513, I );
                }
            }
            else
            {
                DISPLAYF( "[CCB] ### The THREADID is NOT active!!! {} ###", 1, 513, (uParam1^)[I] );
                DISPLAYF( "[CCB] ### Resetting the THREADID index value to NULL. {} ###", 1, 513, I );
                (uParam1^)[I] = nil;
                Result = I;
            }
        }
    }
    if (NOT (Result == -1))
    {
        return Result;
    }
    SCRIPT_ASSERT( "There are no THREADID indices available for insert!!!", 0 );
    return -1;
}

/* F_STREAMREQ_SCRIPT_STREAM_IS_LOADED */ int sub_45023(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU32 == 1)
        {
            DISPLAYF( "[CCB] ### Waiting for SCRIPT_STREAM to be requested: {}", 1, 1281, ref (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU32 == 2)
        {
            DISPLAYF( "[CCB] ### Waiting for SCRIPT_STREAM to load: {}", 1, 1281, ref (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU32 == 4)
        {
            DISPLAYF( "[CCB] ### Waiting for SCRIPT_STREAM to be removed: {}", 1, 1281, ref (uParam0^)[I]._fU0 );
            return 0;
        };;;
    }
    return 1;
}

/* P_HANDLE_SPEECH */ void sub_46255()
{
    switch (l_U147)
    {
        case 0:
        l_U455._fU12 = 0;
         /* RESETTIMER */ sub_2466( ref l_U455 );
         /* STARTTIMER */ sub_1757( ref l_U455 );
         /* WRITESCRIPTLOG */ sub_442( "CCB", "eSpeech - STATE_AUDIO_01", 0 );
        l_U147 = 1;
        break;
        case 1:
        if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2330, 5600.00000000 ))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Playing sss_RSBA speech.", 0 );
             /* P_SETUP_SCRIPT_SPEECH_STRUCT */ sub_46591( ref l_U317 );
             /* PLAY_SINGLE_SPEECH */ sub_47170( "SBUS_RSBA", ref l_U317, 7, 1 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eSpeech - STATE_AUDIO_02", 0 );
            l_U147 = 2;
        }
        break;
        case 2:
        if (NOT ( /* IS_SPEECH_CURRENTLY_PLAYING */ sub_48124( l_U317 )))
        {
            if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2330, 14250.00000000 ))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Playing SBUS_RSBB speech.", 0 );
                 /* P_SETUP_SCRIPT_SPEECH_STRUCT */ sub_46591( ref l_U327 );
                 /* PLAY_SINGLE_SPEECH */ sub_47170( "SBUS_RSBB", ref l_U327, 7, 1 );
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eSpeech - STATE_AUDIO_03", 0 );
                l_U147 = 3;
            }
        }
        break;
        case 3:
        if (NOT ( /* IS_SPEECH_CURRENTLY_PLAYING */ sub_48124( l_U327 )))
        {
            if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2330, 19500.00000000 ))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Playing SBUS_RSBC speech.", 0 );
                 /* P_SETUP_SCRIPT_SPEECH_STRUCT */ sub_46591( ref l_U337 );
                 /* PLAY_SINGLE_SPEECH */ sub_47170( "SBUS_RSBC", ref l_U337, 7, 1 );
                 /* RESETTIMER */ sub_2466( ref l_U741 );
                 /* CREATETIMER */ sub_1607( ref l_U741, l_U750, 1, 0 );
                 /* STARTTIMER */ sub_1757( ref l_U741 );
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eSpeech - STATE_AUDIO_04", 0 );
                l_U147 = 4;
            }
        }
        break;
        case 4:
        if ( /* ISTIMERDONE */ sub_1890( ref l_U741 ))
        {
            PLAY_IMAGEFX( "FLASH_WHITE", 4, 1 );
        }
        if (l_U166 >= 10)
        {
            l_U455._fU12 = 220;
             /* RESETTIMER */ sub_2466( ref l_U455 );
             /* STARTTIMER */ sub_1757( ref l_U455 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eSpeech - STATE_AUDIO_05", 0 );
            l_U147 = 5;
        }
        break;
        case 5:
        if ( /* ISTIMERDONE */ sub_1890( ref l_U455 ))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eSpeech - STATE_AUDIO_06", 0 );
            l_U147 = 6;
        }
        break;
        case 6:
        if (NOT ( /* IS_SPEECH_CURRENTLY_PLAYING */ sub_48124( l_U337 )))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Playing SBUS_RSBD speech.", 0 );
             /* P_SETUP_SCRIPT_SPEECH_STRUCT */ sub_46591( ref l_U347 );
             /* PLAY_SINGLE_SPEECH */ sub_47170( "SBUS_RSBD", ref l_U347, 7, 1 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eSpeech - STATE_AUDIO_07", 0 );
            l_U147 = 7;
        }
        break;
        case 7:
        if (l_U167 >= 8)
        {
            l_U455._fU12 = 50;
             /* RESETTIMER */ sub_2466( ref l_U455 );
             /* STARTTIMER */ sub_1757( ref l_U455 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eSpeech - STATE_AUDIO_08", 0 );
            l_U147 = 8;
        }
        break;
        case 8:
        if ( /* ISTIMERDONE */ sub_1890( ref l_U455 ))
        {
             /* KILL_SPEECH */ sub_49136( ref l_U347, 0 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Playing SBUS_RSBE speech.", 0 );
             /* P_SETUP_SCRIPT_SPEECH_STRUCT */ sub_46591( ref l_U357 );
             /* PLAY_SINGLE_SPEECH */ sub_47170( "SBUS_RSBE", ref l_U357, 7, 1 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eSpeech - STATE_AUDIO_09", 0 );
            l_U147 = 9;
        }
        break;
        case 9:
        if (l_U168 >= 7)
        {
            if (NOT ( /* IS_SPEECH_CURRENTLY_PLAYING */ sub_48124( l_U357 )))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Playing SBUS_RSGA speech.", 0 );
                 /* P_SETUP_SCRIPT_SPEECH_STRUCT */ sub_46591( ref l_U397 );
                 /* PLAY_SINGLE_SPEECH */ sub_47170( "SBUS_RSGA", ref l_U397, 7, 1 );
                l_U455._fU12 = 2830;
                 /* RESETTIMER */ sub_2466( ref l_U455 );
                 /* STARTTIMER */ sub_1757( ref l_U455 );
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eSpeech - STATE_AUDIO_10", 0 );
                l_U147 = 10;
            }
        }
        break;
        case 10:
        if (NOT ( /* IS_SPEECH_CURRENTLY_PLAYING */ sub_48124( l_U397 )))
        {
            if ( /* ISTIMERDONE */ sub_1890( ref l_U455 ))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Playing SBUS_RSGD speech.", 0 );
                 /* P_SETUP_SCRIPT_SPEECH_STRUCT */ sub_46591( ref l_U407 );
                 /* PLAY_SINGLE_SPEECH */ sub_47170( "SBUS_RSGD", ref l_U407, 7, 1 );
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eSpeech - STATE_AUDIO_11", 0 );
                l_U147 = 11;
            }
        }
        break;
        case 11:
        if (l_U168 >= 10)
        {
            l_U455._fU12 = 2500;
             /* RESETTIMER */ sub_2466( ref l_U455 );
             /* STARTTIMER */ sub_1757( ref l_U455 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eTerminalDialogue - STATE_AUDIO_12", 0 );
            l_U147 = 12;
        }
        break;
        case 12:
        if (NOT ( /* IS_SPEECH_CURRENTLY_PLAYING */ sub_48124( l_U407 )))
        {
            if ( /* ISTIMERDONE */ sub_1890( ref l_U455 ))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Playing SBUS_RSME speech.", 0 );
                 /* P_SETUP_SCRIPT_SPEECH_STRUCT */ sub_46591( ref l_U417 );
                 /* PLAY_SINGLE_SPEECH */ sub_47170( "SBUS_RSME", ref l_U417, 7, 1 );
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eTerminalDialogue - STATE_AUDIO_13", 0 );
                l_U147 = 13;
            }
        }
        break;
        case 13:
        if (l_U168 >= 12)
        {
            l_U455._fU12 = 1650;
             /* RESETTIMER */ sub_2466( ref l_U455 );
             /* STARTTIMER */ sub_1757( ref l_U455 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eTerminalDialogue - STATE_AUDIO_14", 0 );
            l_U147 = 14;
        }
        break;
        case 14:
        if (NOT ( /* IS_SPEECH_CURRENTLY_PLAYING */ sub_48124( l_U417 )))
        {
            if ( /* ISTIMERDONE */ sub_1890( ref l_U455 ))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Playing SBUS_RSGE speech.", 0 );
                 /* P_SETUP_SCRIPT_SPEECH_STRUCT */ sub_46591( ref l_U427 );
                 /* PLAY_SINGLE_SPEECH */ sub_47170( "SBUS_RSGE", ref l_U427, 7, 1 );
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eSpeech - STATE_AUDIO_15", 0 );
                l_U147 = 15;
            }
        }
        break;
        case 15:
        if (l_U169 >= 9)
        {
            if (NOT ( /* IS_SPEECH_CURRENTLY_PLAYING */ sub_48124( l_U427 )))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Playing SBUS_RSBF speech.", 0 );
                 /* P_SETUP_SCRIPT_SPEECH_STRUCT */ sub_46591( ref l_U367 );
                 /* PLAY_SINGLE_SPEECH */ sub_47170( "SBUS_RSBF", ref l_U367, 7, 1 );
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eSpeech - STATE_AUDIO_16", 0 );
                l_U147 = 16;
            }
        }
        break;
        case 16:
        if (l_U169 >= 22)
        {
            l_U455._fU12 = 850;
             /* RESETTIMER */ sub_2466( ref l_U455 );
             /* STARTTIMER */ sub_1757( ref l_U455 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eSpeech - STATE_AUDIO_17", 0 );
            l_U147 = 17;
        }
        break;
        case 17:
        if (NOT ( /* IS_SPEECH_CURRENTLY_PLAYING */ sub_48124( l_U367 )))
        {
            if ( /* ISTIMERDONE */ sub_1890( ref l_U455 ))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Playing SBUS_RSBG speech.", 0 );
                 /* P_SETUP_SCRIPT_SPEECH_STRUCT */ sub_46591( ref l_U377 );
                 /* PLAY_SINGLE_SPEECH */ sub_47170( "SBUS_RSBG", ref l_U377, 7, 1 );
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eSpeech - STATE_AUDIO_COMPLETE", 0 );
                l_U147 = 26;
            }
        }
        break;
        case 26: break;
    }
    return;
}

/* P_SETUP_SCRIPT_SPEECH_STRUCT */ void sub_46591(unknown uParam0)
{
     /* RESET_SCRIPT_SPEECH_STRUCT */ sub_46634( uParam0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Adding PLAYER_PED_ID ped for script speech.", 0 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_46819( 0,  /* PLAYER_PED_ID */ sub_1098(), "MAX", uParam0, 2, 0 );
    }
    if (NOT (IS_PED_DEAD( g_U2595 )))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Adding piGiovanna ped for script speech.", 0 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_46819( 1, g_U2595, "GIOVANNA", uParam0, 2, 0 );
    }
    return;
}

/* RESET_SCRIPT_SPEECH_STRUCT */ void sub_46634(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

/* ADD_PED_FOR_SCRIPT_SPEECH */ void sub_46819(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

/* PLAY_SINGLE_SPEECH */ void sub_47170(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return  /* PLAY_SINGLE_SPEECH_FROM_BLOCK */ sub_47215( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

/* PLAY_SINGLE_SPEECH_FROM_BLOCK */ void sub_47215(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return  /* PLAYSPEECHMAIN */ sub_47302( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

/* PLAYSPEECHMAIN */ int sub_47302(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT ( /* CANTHISSPEECHBEPLAYED */ sub_47354( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
     /* COPYHIDDENSPEECHSTUCT */ sub_47872( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

/* CANTHISSPEECHBEPLAYED */ int sub_47354(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

/* COPYHIDDENSPEECHSTUCT */ void sub_47872(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

/* IS_SPEECH_CURRENTLY_PLAYING */ int sub_48124(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    if (NOT ( /* IS_SCRIPT_SPEECH_STRUCT_VALID */ sub_48167( uParam0 )))
    {
        return 0;
    }
    if ((g_U11[uParam0._fU4] == 2) || ((g_U11[uParam0._fU4] == 1) || (IS_SCRIPTED_CONVERSATION_ONGOING( uParam0._fU4 ))))
    {
        if (uParam0._fU8 == g_U6[uParam0._fU4])
        {
            return 1;
        }
    }
    return 0;
}

/* IS_SCRIPT_SPEECH_STRUCT_VALID */ boolean sub_48167(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    int iVar12;

    if (uParam0._fU4 < 0)
    {
        return 0;
    }
    iVar12 = GET_CHECK_HASH_FROM_CONVERSATION_ID( uParam0._fU4 );
    return (uParam0._fU16 == iVar12) AND (iVar12 != 0);
}

/* KILL_SPEECH */ void sub_49136(int iParam0, unknown uParam1)
{
    if (NOT ( /* IS_SCRIPT_SPEECH_STRUCT_VALID */ sub_48167( (iParam0^) )))
    {
        ;
    }
    else
    {
        PRINTSTRING( "\n KILL SPEECH CALLED***************************************" );
        if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
        {
            if (iParam0->_fU8 == g_U6[iParam0->_fU4])
            {
                STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, uParam1, 0 );
            }
        }
    }
    return;
}

/* P_HANDLE_MUSIC */ void sub_50701()
{
    switch (l_U148)
    {
        case 0:
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Suspending music...", 0 );
            AUDIO_MUSIC_SUSPEND( 0 );
        }
        l_U653._fU12 = 0;
         /* RESETTIMER */ sub_2466( ref l_U653 );
         /* STARTTIMER */ sub_1757( ref l_U653 );
         /* WRITESCRIPTLOG */ sub_442( "CCB", "eMusic - STATE_AUDIO_01", 0 );
        l_U148 = 1;
        break;
        case 1:
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
            if (l_U145 >= 9)
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Starting BUSDEPOT_ACTION_SONG_03 music track with BUSDEPOT_03_6 mood.", 0 );
                AUDIO_MUSIC_FORCE_TRACK( "BUSDEPOT_ACTION_SONG_03", "BUSDEPOT_03_6", 0, 0, -1, -1, -1082130432, 0 );
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eMusic - STATE_AUDIO_02", 0 );
                l_U148 = 2;
            }
        }
        else if (l_U145 >= 8)
        {
            if (GET_CUTSCENE_TIME_MS() >= 45800)
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Starting BUSDEPOT_ACTION_SONG_03 music track with BUSDEPOT_03_6 mood.", 0 );
                AUDIO_MUSIC_FORCE_TRACK( "BUSDEPOT_ACTION_SONG_03", "BUSDEPOT_03_6", "", 0.00000000, 4000, 1000, -1082130432, 0 );
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eMusic - STATE_AUDIO_02", 0 );
                l_U148 = 2;
            }
            else if (HAS_CUTSCENE_FINISHED())
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "The cutscene was skipped...", 0 );
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Starting BUSDEPOT_ACTION_SONG_03 music track with BUSDEPOT_03_6  mood.", 0 );
                AUDIO_MUSIC_FORCE_TRACK( "BUSDEPOT_ACTION_SONG_03", "BUSDEPOT_03_6 ", 0, 0, -1, -1, -1082130432, 0 );
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eMusic - STATE_AUDIO_02", 0 );
                l_U148 = 2;
            }
        }
        break;
        case 2:
        if (l_U145 >= 13)
        {
            if (l_U169 >= 30)
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Suspending music...", 0 );
                AUDIO_MUSIC_SUSPEND( 500 );
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eMusic - STATE_AUDIO_COMPLETE", 0 );
                l_U148 = 26;
            }
        }
        break;
        case 26: break;
    }
    return;
}

/* P_HANDLE_SP_CHALLENGES */ void sub_51755()
{
    switch (l_U739)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_442( "CCB", "eNiceShooting - STATE_CHALLENGE_IDLE", 0 );
        l_U739 = 1;
        break;
        case 1:
        if ((l_U128) || (l_U127))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "A fuel pump has been shot...", 0 );
            SCRIPT_VAR_HASH_SET_INT( 1945554388, 1 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eNiceShooting - STATE_CHALLENGE_COMPLETE", 0 );
            l_U739 = 2;
        }
        break;
        case 2: break;
    }
    if ((l_U172 <= 13) AND (l_U172 >= 10))
    {
        switch (l_U738)
        {
            case 0:
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eBestForLast - STATE_CHALLENGE_IDLE", 0 );
            l_U738 = 1;
            break;
            case 1:
            if (IS_PED_DEAD( l_U271[0] ))
            {
                if ((NOT (IS_PED_DEAD( l_U271[2] ))) || (NOT (IS_PED_DEAD( l_U271[1] ))))
                {
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The player shot the piRailVCPFTunnelExit RPG ped before killing all other peds...", 0 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eBestForLast - STATE_CHALLENGE_COMPLETE", 0 );
                    l_U738 = 2;
                }
            }
            if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_52366( ref l_U271 )) == 0)
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "All the piRailVCPFTunnelExit peds are dead...", 0 );
                SCRIPT_VAR_HASH_SET_INT( 1153287169, 1 );
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eBestForLast - STATE_CHALLENGE_COMPLETE", 0 );
                l_U738 = 2;
            }
            break;
            case 2: break;
        }
    }
    switch (l_U740)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_442( "CCB", "eTroubleHadCome - STATE_CHALLENGE_IDLE", 0 );
        l_U740 = 1;
        break;
        case 1:
        if (l_U158 >= 3)
        {
            if (l_U144)
            {
                if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_52366( ref l_U275 )) == 0)
                {
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The player killed all the enemies...", 0 );
                    SCRIPT_VAR_HASH_SET_INT( 1889626308, 1 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eTroubleHadCome - STATE_CHALLENGE_COMPLETE", 0 );
                    l_U740 = 2;
                }
            }
        }
        break;
        case 2: break;
    }
    return;
}

/* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ void sub_52366(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result++;
        }
    }
    return Result;
}

/* P_DEBUG_CHECK_FOR_RAILSHOOTER_INVINCIBILITY */ void sub_52932()
{
    if (NOT l_U116)
    {
        if ( /* F_DEBUG_CHECK_FOR_SCRIPT_INVINCIBILITY_KEY */ sub_52999())
        {
            l_U116 = 1;
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Enabling Bus Depot Railshooter Invincibility...", 0 );
             /* P_RAIL_BUS_DAMAGE_METER_OFF */ sub_53166();
             /* TEXT_ONSCREEN_GENERAL */ sub_53353( "Bus Invincibility ON", 3000 );
        }
    }
    else if ( /* F_DEBUG_CHECK_FOR_SCRIPT_INVINCIBILITY_KEY */ sub_52999())
    {
        l_U116 = 0;
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Disabling Bus Depot Railshooter Invincibility...", 0 );
        if ((l_U165 >= 39) || (l_U165 < 6))
        {
            if ((l_U166 >= 39) || (l_U166 < 6))
            {
                if ((l_U167 >= 39) || (l_U167 < 6))
                {
                    if ((l_U172 >= 13) || (l_U172 < 11))
                    {
                        if ((l_U170 >= 39) || (l_U170 < 6))
                        {
                            if ((l_U168 >= 39) || (l_U168 < 6))
                            {
                                if ((l_U169 >= 39) || (l_U169 < 6))
                                {
                                     /* P_RAIL_BUS_DAMAGE_METER_ON */ sub_53652();
                                }
                            }
                        }
                    }
                }
            }
        }
         /* TEXT_ONSCREEN_GENERAL */ sub_53353( "Bus Invincibility OFF", 3000 );
    }
    return;
}

/* F_DEBUG_CHECK_FOR_SCRIPT_INVINCIBILITY_KEY */ int sub_52999()
{
    if ((IS_MARKETING_KEYBOARD_KEY_JUST_PRESSED( 49 )) || (IS_KEYBOARD_KEY_JUST_PRESSED( 49 )))
    {
        return 1;
    }
    return 0;
}

/* P_RAIL_BUS_DAMAGE_METER_OFF */ void sub_53166()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_RAIL_BUS_DAMAGE_METER_OFF start", 0 );
    l_U112 = 0;
    if (NOT l_U116)
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
        {
            SET_PED_PROOFS(  /* PLAYER_PED_ID */ sub_1098(), 0, 0, 0, 0, 0 );
            SET_PED_GORE(  /* PLAYER_PED_ID */ sub_1098(), 1 );
        }
    }
    return;
}

/* TEXT_ONSCREEN_GENERAL */ void sub_53353(unknown uParam0, unknown uParam1)
{
    PRINT_STRING_WITH_LITERAL_STRING( "STRING", uParam0, uParam1, 1 );
    return;
}

/* P_RAIL_BUS_DAMAGE_METER_ON */ void sub_53652()
{
    if (NOT l_U116)
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "P_RAIL_BUS_DAMAGE_METER_ON", 0 );
        l_U112 = 1;
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
        {
            SET_PED_PROOFS(  /* PLAYER_PED_ID */ sub_1098(), 1, 1, 1, 1, 1 );
            SET_PED_GORE(  /* PLAYER_PED_ID */ sub_1098(), 0 );
        }
         /* P_RAIL_BUS_APPLY_DAMAGE_EFFECTS */ sub_53797();
    }
    return;
}

/* P_RAIL_BUS_APPLY_DAMAGE_EFFECTS */ void sub_53797()
{
    float fVar2;

     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_RAIL_BUS_APPLY_DAMAGE_EFFECTS", 0 );
    fVar2 = l_U733 / 6500.00000000;
    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
    {
        if (fVar2 < 0.35000000)
        {
            SET_VEHICLE_ENGINE_HEALTH( g_U2918, 100.00000000 );
        }
    }
    return;
}

/* P_RAIL_BUS_TAKING_DAMAGE */ void sub_54014()
{
    if ((TIMERA() - l_U717) > l_U716)
    {
        l_U733 -= ( /* F_GET_NUM_PEDS_SHOOTING_IN_ARRAY */ sub_54090( ref l_U246, 0, -1082130432 )) * 54.00000000;
        l_U733 -= ( /* F_GET_NUM_PEDS_SHOOTING_IN_ARRAY */ sub_54090( ref l_U251, 0, -1082130432 )) * 54.00000000;
        l_U733 -= ( /* F_GET_NUM_PEDS_SHOOTING_IN_ARRAY */ sub_54090( ref l_U262, 0, -1082130432 )) * 54.00000000;
        l_U733 -= ( /* F_GET_NUM_PEDS_SHOOTING_IN_ARRAY */ sub_54090( ref l_U267, 0, -1082130432 )) * 54.00000000;
        l_U733 -= ( /* F_GET_NUM_PEDS_SHOOTING_IN_ARRAY */ sub_54090( ref l_U271, 0, -1082130432 )) * 54.00000000;
        l_U733 -= ( /* F_GET_NUM_PEDS_SHOOTING_IN_ARRAY */ sub_54090( ref l_U275, 0, -1082130432 )) * 54.00000000;
        SET_PLAYER_ALT_HEALTH( l_U733 );
        l_U717 = TIMERA();
    }
    return;
}

/* F_GET_NUM_PEDS_SHOOTING_IN_ARRAY */ void sub_54090(unknown uParam0, boolean bParam1, float fParam2)
{
    int iVar5;
    int Result;
    int I;
    int iVar8;

    Result = 0;
    iVar8 = (uParam0^) - 1;
    for ( I = 0; I <= iVar8; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            iVar5 = 1;
            if (bParam1)
            {
                if ((IS_SPHERE_VISIBLE( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( (uParam0^)[I] ), 1.00000000, 0 )) == 0)
                {
                    iVar5 = 0;
                }
            }
            if (fParam2 > 0.00000000)
            {
                if (( /* GET_DISTANCE_BETWEEN_PEDS */ sub_54253(  /* PLAYER_PED_ID */ sub_1098(), (uParam0^)[I], 1 )) > fParam2)
                {
                    iVar5 = 0;
                }
            }
            if ((iVar5) AND (IS_PED_SHOOTING( (uParam0^)[I] )))
            {
                Result++;
            }
        }
    }
    return Result;
}

/* GET_DISTANCE_BETWEEN_PEDS */ void sub_54253(unknown uParam0, unknown uParam1, boolean bParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;

    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        uVar5 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
    }
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        uVar8 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    }
    if (bParam2)
    {
        return VDIST( uVar5, uVar8 );
        break;
    }
    return VDIST( uVar5._fU0, uVar5._fU4, 0, uVar8._fU0, uVar8._fU4, 0 );
}

/* P_RAIL_KEEP_PLAYER_BUS_ALIVE */ void sub_54776()
{
    if (DOES_VEHICLE_EXIST( g_U2918 ))
    {
        if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
        {
            if (NOT l_U115)
            {
                if ((GET_VEHICLE_HEALTH( g_U2918 )) <= 1000)
                {
                    SET_VEHICLE_HEALTH( g_U2918, 3000 );
                }
                if ((GET_VEHICLE_ENGINE_HEALTH( g_U2918 )) <= 1000.00000000)
                {
                    SET_VEHICLE_ENGINE_HEALTH( g_U2918, 3000.00000000 );
                }
                if ((GET_VEHICLE_PETROL_TANK_HEALTH( g_U2918 )) <= 1000.00000000)
                {
                    SET_VEHICLE_PETROL_TANK_HEALTH( g_U2918, 3000.00000000 );
                }
            }
        }
    }
    return;
}

/* P_HANDLE_ROCKET_EVENT_FAIL */ void sub_54999()
{
    if (l_U170 == 5)
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
        {
            if (NOT (IS_PED_DEAD( l_U271[0] )))
            {
                if (( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2331, 8000.00000000 )) || (HAS_SOMETHING_EXPLODED_IN_AREA( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS(  /* PLAYER_PED_ID */ sub_1098() ), 3.00000000 )))
                {
                    SET_BULLET_CAM_PREF(  /* PLAYER_PED_ID */ sub_1098(), "MISS_DEATH_FALL_01A", "", "", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
                     /* WRITESCRIPTLOG */ sub_442( "GA", "The rocket killed the player.", 0 );
                    l_U135 = 1;
                    SHAKE_CAM( l_U713[0], "LARGE_EXPLOSION_SHAKE", 0.50000000 );
                    SHAKE_CAM( l_U713[1], "LARGE_EXPLOSION_SHAKE", 0.75000000 );
                    SET_PAD_SHAKE( 0, 2500, 64 );
                     /* P_RAIL_STOP_ROCKET_EVENT */ sub_55339();
                    STOP_SCRIPT_STREAM( 0 );
                    STOP_SCRIPT_STREAM( 1 );
                    STOP_SCRIPT_STREAM( 2 );
                     /* P_STREAMREQ_SCRIPT_STREAM_RESET_STRUCT */ sub_4691( ref g_U1704 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Suspending music...", 0 );
                    AUDIO_MUSIC_SUSPEND( 500 );
                    START_POSTFX_BLENDER( 3 );
                    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
                    {
                        DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                    }
                    if (NOT (IS_PED_DEAD( g_U2595 )))
                    {
                        DETACH_PED( g_U2595, 1 );
                    }
                    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                    {
                        SET_VEHICLE_FREEZE_AFTER_BLOWING_UP( g_U2918, 1 );
                        STOP_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
                        EXPLODE_VEHICLE( g_U2918, 1, 0 );
                    }
                    if (NOT (IS_PED_DEAD( l_U271[0] )))
                    {
                        CLEAR_PED_TASKS( l_U271[0] );
                        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U271[0], 0 );
                    }
                    l_U635._fU12 = 750;
                     /* RESETTIMER */ sub_2466( ref l_U635 );
                     /* STARTTIMER */ sub_1757( ref l_U635 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eRocketEventFail - STATE_MIDSCENE_POST_MIDSCENE", 0 );
                    l_U170 = 36;
                }
            }
        }
    }
    switch (l_U170)
    {
        case 0:
        if ((NOT l_U135) AND (l_U134))
        {
            if (NOT l_U121)
            {
                if (NOT IS_BULLET_CAMERA_ACTIVE())
                {
                    if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2331, 6700.00000000 ))
                    {
                        l_U121 = 1;
                         /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U713[0], 168.39000000, 88.81000000, 0.30000000, 4.85000000, 0.00000000, 62.70000000, 45.00000000 );
                         /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U713[1], 148.85000000, 92.58000000, 0.57000000, 10.65000000, 0.00000000, 60.44000000, 45.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eCheckpoint - STATE_CHECKPOINT_FAIL", 0 );
                        l_U145 = 18;
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRocketEventFail - STATE_MIDSCENE_IN", 0 );
                        l_U170 = 3;
                    }
                }
            }
        }
        break;
        case 3:
        ENABLE_CROSSHAIR( 0 );
        SET_ALL_VEHICLES_HIGH_LOD( 1 );
         /* NIS_PRE_SETUP */ sub_20593( 1, 0, 0, 0 );
         /* CAM_PLAY_STATIC_CAM */ sub_56320( ref l_U713[0] );
        ACTIVATE_BULLET_TIME( 0, 1065353216, 1 );
        l_U635._fU12 = 250;
         /* RESETTIMER */ sub_2466( ref l_U635 );
         /* STARTTIMER */ sub_1757( ref l_U635 );
         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRocketEventFail - STATE_MIDSCENE_01", 0 );
        l_U170 = 6;
        break;
        case 6:
        if ( /* ISTIMERDONE */ sub_1890( ref l_U635 ))
        {
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
            {
                if (NOT (IS_PED_DEAD( l_U271[0] )))
                {
                    REGISTER_TARGET( l_U271[0],  /* PLAYER_PED_ID */ sub_1098() );
                    SET_LOCKED_TARGET( l_U271[0],  /* PLAYER_PED_ID */ sub_1098() );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Tasking the rocket enemy to shoot at the player.", 0 );
                    CLEAR_PED_TASKS( l_U271[0] );
                    CLEAR_PED_TASKS_IMMEDIATELY( l_U271[0] );
                    OPEN_SEQUENCE_TASK( ref l_U736 );
                    TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
                    TASK_AIM_GUN_AT_COORD( 0, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS(  /* PLAYER_PED_ID */ sub_1098() ), 150, 1 );
                    TASK_SHOOT_AT_COORD( 0, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS(  /* PLAYER_PED_ID */ sub_1098() ), -1, 1566631136, 1, 1 );
                    CLOSE_SEQUENCE_TASK( l_U736 );
                    TASK_PERFORM_SEQUENCE( l_U271[0], l_U736 );
                    CLEAR_SEQUENCE_TASK( l_U736 );
                }
            }
            l_U635._fU12 = 250;
             /* RESETTIMER */ sub_2466( ref l_U635 );
             /* STARTTIMER */ sub_1757( ref l_U635 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eRocketEventFail - STATE_MIDSCENE_02", 0 );
            l_U170 = 7;
        }
        break;
        case 7:
        if ( /* ISTIMERDONE */ sub_1890( ref l_U635 ))
        {
             /* CAM_PLAY_INTERP_WITH_STATIC_CAMS */ sub_56926( ref l_U713[0], ref l_U713[1], 2200, 1, 1 );
            l_U635._fU12 = 2000;
             /* RESETTIMER */ sub_2466( ref l_U635 );
             /* STARTTIMER */ sub_1757( ref l_U635 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eRocketEventFail - STATE_MIDSCENE_IDLE", 0 );
            l_U170 = 5;
        }
        break;
        case 5: break;
        case 36:
        if ( /* ISTIMERDONE */ sub_1890( ref l_U635 ))
        {
             /* P_START_RAIL_ALL_ENEMIES_MOVE_TOWARDS_BUS */ sub_57135();
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
            {
                SET_PED_HEALTH(  /* PLAYER_PED_ID */ sub_1098(), 0, 0 );
            }
            if (NOT (IS_PED_DEAD( g_U2595 )))
            {
                SET_PED_HEALTH( g_U2595, 0, 0 );
            }
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eRocketEventFail - STATE_MIDSCENE_COMPLETE", 0 );
            l_U170 = 39;
        }
        break;
        case 39: break;
    }
    return;
}

/* P_RAIL_STOP_ROCKET_EVENT */ void sub_55339()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_RAIL_STOP_ROCKET_EVENT", 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    DISPLAY_HUD( 1 );
    SET_INSTANT_FIRE_FORCED( 1 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
        SET_PED_CONSUMING_AMMO(  /* PLAYER_PED_ID */ sub_1098(), 1 );
    }
    return;
}

/* CAM_CREATE_STATIC_CAM */ void sub_56015(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    (uParam0^) = CREATE_CAM_WITH_PARAMS( "DEFAULT_SCRIPTED_CAMERA", uParam1, uParam4, uParam7, 1 );
    SET_CAM_PARAMS( (uParam0^), uParam1, uParam4, uParam7, 0, 1, 1 );
    return;
}

/* CAM_PLAY_STATIC_CAM */ void sub_56320(unknown uParam0)
{
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    SET_CAM_ACTIVE( (uParam0^), 1 );
    RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    return;
}

/* CAM_PLAY_INTERP_WITH_STATIC_CAMS */ void sub_56926(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    SET_CAM_ACTIVE_WITH_INTERP( (uParam1^), (uParam0^), uParam2, uParam3, uParam4 );
    RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    return;
}

/* P_START_RAIL_ALL_ENEMIES_MOVE_TOWARDS_BUS */ void sub_57135()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;

     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_START_RAIL_ALL_ENEMIES_RUN_AT_BUS", 0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
        uVar2 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS(  /* PLAYER_PED_ID */ sub_1098() )};
    }
    else
    {
        uVar2 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_DEAD_PED_COORDS(  /* PLAYER_PED_ID */ sub_1098() )};
    }
     /* P_START_RAIL_ENEMY_MOVE_TOWARDS_BUS */ sub_57299( ref l_U246, uVar2 );
     /* P_START_RAIL_ENEMY_MOVE_TOWARDS_BUS */ sub_57299( ref l_U251, uVar2 );
     /* P_START_RAIL_ENEMY_MOVE_TOWARDS_BUS */ sub_57299( ref l_U262, uVar2 );
     /* P_START_RAIL_ENEMY_MOVE_TOWARDS_BUS */ sub_57299( ref l_U267, uVar2 );
     /* P_START_RAIL_ENEMY_MOVE_TOWARDS_BUS */ sub_57299( ref l_U271, uVar2 );
     /* P_START_RAIL_ENEMY_MOVE_TOWARDS_BUS */ sub_57299( ref l_U275, uVar2 );
    return;
}

/* P_START_RAIL_ENEMY_MOVE_TOWARDS_BUS */ void sub_57299(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
            {
                TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, uParam1,  /* PLAYER_PED_ID */ sub_1098(), 3, 0, 1.50000000, 2.00000000, 1, 0 );
            }
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( (uParam0^)[I], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
    }
    return;
}

/* P_HANDLE_RAILSHOOTER_FAIL */ void sub_57728()
{
    if ((l_U171 < 38) AND (l_U171 > 3))
    {
        ;
    }
    switch (l_U171)
    {
        case 0:
        if ((l_U165 >= 39) || (l_U165 < 6))
        {
            if ((l_U166 >= 39) || (l_U166 < 6))
            {
                if ((l_U167 >= 39) || (l_U167 < 6))
                {
                    if ((l_U172 >= 13) || (l_U172 < 11))
                    {
                        if ((l_U170 >= 39) || (l_U170 < 6))
                        {
                            if ((l_U168 >= 39) || (l_U168 < 6))
                            {
                                if ((l_U169 >= 39) || (l_U169 < 6))
                                {
                                    if (l_U733 <= 0.00000000)
                                    {
                                        if (l_U145 == 11)
                                        {
                                            l_U718 = 1;
                                        }
                                        else if (l_U145 == 12)
                                        {
                                            l_U718 = 2;
                                        }
                                        else if (l_U145 == 13)
                                        {
                                            l_U718 = 3;
                                        };;;
                                        if (l_U145 == 13)
                                        {
                                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Destroying the ciEndCrashShot cameras.", 0 );
                                             /* CAM_DESTROY_CAMERA_INDEX_ARRAY */ sub_4385( ref l_U696 );
                                        }
                                        if (NOT (IS_PED_DEAD( l_U271[0] )))
                                        {
                                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Set piRailVCPFTunnelExit_0 ped to invincible.", 0 );
                                            SET_PED_INVINCIBLE( l_U271[0], 1 );
                                            SET_PED_CAN_RAGDOLL( l_U271[0], 0 );
                                            SET_PED_AS_ONE_SHOT_KILL( l_U271[0], 0 );
                                        }
                                         /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U713[0], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                                        if (DOES_CAM_EXIST( l_U713[0] ))
                                        {
                                            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                                            {
                                                ATTACH_CAM_TO_VEHICLE( l_U713[0], g_U2918, 1.19000000, 4.07000000, 2.14000000, 1 );
                                                POINT_CAM_AT_VEHICLE( l_U713[0], g_U2918, 0.00000000, 7.81000000, 1.37000000, 1 );
                                            }
                                        }
                                         /* NIS_PRE_SETUP */ sub_20593( 1, 0, 0, 1 );
                                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Disabling the HUD.", 0 );
                                         /* P_RAIL_BUS_DAMAGE_METER_OFF */ sub_53166();
                                        DISPLAY_HUD( 0 );
                                         /* CAM_PLAY_STATIC_CAM */ sub_56320( ref l_U713[0] );
                                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Playing SBUS_RSGD speech.", 0 );
                                         /* P_SETUP_SCRIPT_SPEECH_STRUCT */ sub_46591( ref l_U387 );
                                         /* PLAY_SINGLE_SPEECH */ sub_47170( "SBUS_RSGD", ref l_U387, 7, 1 );
                                        l_U635._fU12 = 1499;
                                         /* RESETTIMER */ sub_2466( ref l_U635 );
                                         /* STARTTIMER */ sub_1757( ref l_U635 );
                                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eCheckpoint - STATE_CHECKPOINT_FAIL", 0 );
                                        l_U145 = 18;
                                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailshooterFail - STATE_MIDSCENE_01", 0 );
                                        l_U171 = 6;
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        break;
        case 6:
        if ( /* ISTIMERDONE */ sub_1890( ref l_U635 ))
        {
            if (l_U718 == 1)
            {
                if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2330, 15600 ))
                {
                    if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2330, 20500.00000000 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The bus is inside the tunnel.", 0 );
                         /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U713[1], 15.92000000, 150.23000000, 1.85000000, -1.19000000, 0.00000000, -123.73000000, 45.00000000 );
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The bus is in fuel depot 2nd half.", 0 );
                         /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U713[1], 23.56000000, 132.39000000, 2.11000000, -3.49000000, 0.00000000, -5.88000000, 45.00000000 );
                    }
                }
                else
                {
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The bus is in fuel depot 1st half.", 0 );
                     /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U713[1], -26.04000000, 177.46000000, 2.04000000, -2.67000000, 0.00000000, -73.29000000, 45.00000000 );
                }
            }
            else if (l_U718 == 2)
            {
                if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2331, 5000 ))
                {
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The bus is in tunnel second half.", 0 );
                     /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U713[1], 172.39000000, 82.28000000, 1.48000000, -2.40000000, 0.00000000, 62.81000000, 45.00000000 );
                }
                else if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2332, 0 ))
                {
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The bus is in tunnel second half.", 0 );
                     /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U713[1], 172.39000000, 82.28000000, 1.48000000, -2.40000000, 0.00000000, 62.81000000, 45.00000000 );
                }
                else
                {
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The bus is in tunnel first half.", 0 );
                     /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U713[1], 121.07000000, 86.62000000, 0.02000000, -2.08000000, 0.00000000, 36.33000000, 45.00000000 );
                }
            }
            else if (l_U718 == 3)
            {
                if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2333, 17000 ))
                {
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The bus is in terminal 2nd half.", 0 );
                     /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U713[1], 201.43000000, -25.68000000, 1.67000000, 1.37000000, 0.00000000, -14.55000000, 45.00000000 );
                }
                else
                {
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The bus is in terminal 1st half.", 0 );
                     /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U713[1], 200.13000000, 24.77000000, 1.74000000, -1.99000000, 0.00000000, -11.30000000, 45.00000000 );
                }
            };;;
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailshooterFail - STATE_MIDSCENE_02", 0 );
            l_U171 = 7;
        }
        break;
        case 7:
         /* CAM_PLAY_STATIC_CAM */ sub_56320( ref l_U713[1] );
        l_U635._fU12 = 750;
         /* RESETTIMER */ sub_2466( ref l_U635 );
         /* STARTTIMER */ sub_1757( ref l_U635 );
         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailshooterFail - STATE_MIDSCENE_03", 0 );
        l_U171 = 8;
        break;
        case 8:
        if ( /* ISTIMERDONE */ sub_1890( ref l_U635 ))
        {
            STOP_SCRIPT_STREAM( 0 );
            STOP_SCRIPT_STREAM( 1 );
            STOP_SCRIPT_STREAM( 2 );
             /* P_STREAMREQ_SCRIPT_STREAM_RESET_STRUCT */ sub_4691( ref g_U1704 );
            AUDIO_MUSIC_SUSPEND( 500 );
            START_POSTFX_BLENDER( 3 );
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                SET_VEHICLE_FREEZE_AFTER_BLOWING_UP( g_U2918, 1 );
                STOP_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
                EXPLODE_VEHICLE( g_U2918, 1, 0 );
            }
            SHAKE_CAM( l_U713[1], "LARGE_EXPLOSION_SHAKE", 0.75000000 );
            SET_PAD_SHAKE( 0, 2500, 64 );
             /* P_START_RAIL_ALL_ENEMIES_MOVE_TOWARDS_BUS */ sub_57135();
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
            {
                SET_PED_HEALTH(  /* PLAYER_PED_ID */ sub_1098(), 0, 0 );
            }
            if (NOT (IS_PED_DEAD( g_U2595 )))
            {
                SET_PED_HEALTH( g_U2595, 0, 0 );
            }
            l_U635._fU12 = 2000;
             /* RESETTIMER */ sub_2466( ref l_U635 );
             /* STARTTIMER */ sub_1757( ref l_U635 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailshooterFail - STATE_MIDSCENE_04", 0 );
            l_U171 = 9;
        }
        break;
        case 9:
        if (((IS_BULLET_CAMERA_SCENE_ACTIVE( l_U39 )) == 0) AND ( /* ISTIMERDONE */ sub_1890( ref l_U635 )))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailshooterFail - STATE_MIDSCENE_POST_MIDSCENE", 0 );
            l_U171 = 36;
        }
        break;
        case 36:
         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailshooterFail - STATE_MIDSCENE_COMPLETE", 0 );
        l_U171 = 39;
        break;
        case 39: break;
    }
    return;
}

/* P_INITIALIZE_SCRIPT_DATA */ void sub_60593()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_INITIALIZE_SCRIPT_DATA", 0 );
     /* P_SETUP_PROP_ARRAY */ sub_60669();
     /* P_SETUP_RAIL_TUNNEL_CAR_VARS */ sub_60999();
     /* P_SETUP_RAIL_PARKED_CAR_VARS */ sub_61331();
    l_U145 = 0;
    l_U149 = 0;
    l_U150 = 0;
    l_U146 = 0;
    l_U147 = 0;
    l_U148 = 0;
    l_U151 = 0;
    l_U152 = 0;
    l_U153 = 0;
    l_U154 = 0;
    l_U155 = 0;
    l_U156 = 0;
    l_U157 = 0;
    l_U158 = 0;
    l_U159 = 0;
    l_U160 = 0;
    l_U161 = 0;
    l_U162 = 0;
    l_U733 = 6500.00000000;
    g_U2874 = 0;
    l_U112 = 0;
    l_U114 = 0;
    l_U113 = 0;
    l_U115 = 0;
    l_U116 = 0;
    l_U121 = 0;
    l_U123 = 0;
    l_U125 = 0;
    l_U126 = 0;
    l_U127 = 0;
    l_U128 = 0;
    l_U129 = 0;
    l_U130 = 0;
    l_U138 = 0;
    l_U143 = 0;
    l_U139 = 0;
    l_U124 = 0;
    l_U127 = 0;
    l_U131 = 0;
    l_U132 = 0;
    l_U133 = 0;
    l_U134 = 0;
    l_U135 = 0;
    l_U140 = 0;
    l_U141 = 0;
    l_U122 = 0;
    l_U142 = 0;
    l_U136 = 0;
    l_U137 = 0;
     /* P_RESET_BOOL_ARRAY */ sub_61928( ref l_U117 );
    l_U716 = 60;
    l_U717 = 0;
    l_U723 = 0;
    l_U724 = 0;
    l_U725 = 0;
    l_U726 = 0;
    l_U719 = 0;
    l_U721 = 0;
    l_U722 = 0;
    l_U720 = 0;
    l_U727 = 0;
    l_U728 = 0;
    l_U729 = 0;
    l_U730 = 0;
     /* CREATETIMER */ sub_1607( ref l_U455, 0, 1, 0 );
     /* STARTTIMER */ sub_1757( ref l_U455 );
     /* CREATETIMER */ sub_1607( ref l_U464, 1000, 1, 0 );
     /* CREATETIMER */ sub_1607( ref l_U473, 1000, 1, 0 );
     /* CREATETIMER */ sub_1607( ref l_U482, 750, 1, 0 );
     /* CREATETIMER */ sub_1607( ref l_U644, 0, 1, 0 );
     /* STARTTIMER */ sub_1757( ref l_U644 );
    l_U1263[0] = {-72.68000000, 108.64000000, 0.40000000};
    l_U1263[1] = {72.20000000, 142.99000000, -1.10000000};
    l_U1263[2] = {205.58000000, 97.00000000, 0.40000000};
    l_U1218[0] = 312.00000000;
    l_U1218[1] = 230.00000000;
    l_U1218[2] = 181.00000000;
    l_U1563[0] = {-66.60000000, 160.97000000, 0.07000000};
    l_U1260[0] = 310.00000000;
    l_U1563[1] = {-27.00000000, 171.00000000, 0.40000000};
    l_U1260[1] = 42.50000000;
    l_U1326 = {248.36000000, -2.82000000, 0.40000000};
    l_U1247 = 135.00000000;
    l_U1570[0] = {-11.87500000, 174.89200000, 0.01400000};
    l_U1570[1] = {-11.87500000, 174.89200000, 0.01400000};
    l_U1570[2] = {-7.20000000, 174.86000000, 0.30000000};
    l_U1570[3] = {-16.55000000, 174.86000000, 0.30000000};
    l_U1273 = {1.30000000, 5.73400000, 1.06000000};
    l_U1222 = 270.00000000;
    l_U1276 = {-0.80000000, 5.45000000, 1.60000000};
    l_U1223 = 0.00000000;
    l_U1323 = {118.22000000, 102.18000000, 0.72000000};
    l_U1501[0] = {178.00000000, 91.00000000, 1.00000000};
    l_U1501[1] = {196.89000000, -21.84000000, 0.00000000};
    l_U1508[0] = {192.68000000, -68.46000000, 0.00000000};
    l_U1508[1] = {192.68000000, -68.46000000, 0.00000000};
    l_U1508[2] = {197.00000000, -78.00000000, 6.00000000};
    l_U1508[3] = {187.00000000, -78.00000000, -1.00000000};
    l_U1508[4] = {197.00000000, -78.00000000, 4.00000000};
    l_U1508[5] = {194.00000000, -78.00000000, 8.00000000};
    l_U164 = 0;
     /* CREATETIMER */ sub_1607( ref l_U437, 0, 1, 0 );
     /* STARTTIMER */ sub_1757( ref l_U437 );
    l_U165 = 0;
     /* CREATETIMER */ sub_1607( ref l_U518, 0, 1, 0 );
     /* STARTTIMER */ sub_1757( ref l_U518 );
    l_U1305 = {3.00000000, 3.75000000, 1.60000000};
    l_U1308 = {-0.10000000, 7.00000000, 0.65000000};
    l_U1311 = {1.23000000, 5.57000000, 1.06000000};
    l_U1314 = {-0.84000000, 5.51000000, 1.60000000};
    l_U166 = 0;
     /* CREATETIMER */ sub_1607( ref l_U527, 0, 1, 0 );
     /* STARTTIMER */ sub_1757( ref l_U527 );
     /* CREATETIMER */ sub_1607( ref l_U536, 2200, 1, 0 );
     /* STARTTIMER */ sub_1757( ref l_U536 );
    l_U1359 = {0.39000000, 5.58000000, 1.40000000};
    l_U1234 = 0.00000000;
    l_U1335 = {1.40000000, 5.57000000, 1.08000000};
    l_U1338 = {-0.87000000, 5.54000000, 1.60000000};
    l_U1235 = -1.25000000;
    l_U1341 = {-0.87000000, 5.54000000, 1.60000000};
    l_U1236 = -1.25000000;
    l_U1344 = {-0.50000000, 3.00000000, 1.50000000};
    l_U1347 = {0.00000000, 8.00000000, 2.00000000};
    l_U1350 = {-1.70000000, 5.90000000, 1.70000000};
    l_U1353 = {5.00000000, 7.00000000, 1.00000000};
    l_U1356 = {1.70000000, 6.40000000, 1.48000000};
    l_U1320 = {0.00000000, 6.83000000, 1.96000000};
    l_U167 = 0;
     /* CREATETIMER */ sub_1607( ref l_U554, 0, 1, 0 );
     /* STARTTIMER */ sub_1757( ref l_U554 );
     /* RESETTIMER */ sub_2466( ref l_U545 );
    l_U1362 = {0.30000000, 5.62000000, 1.43000000};
    l_U1237 = 0.00000000;
    l_U1365 = {-0.77000000, 5.49000000, 1.61000000};
    l_U1238 = 0.00000000;
    l_U1386 = {166.27000000, 90.50000000, 0.01000000};
    l_U1242 = 85.00000000;
    l_U1368 = {0.00000000, 12.00000000, 1.25000000};
    l_U1371 = {0.00000000, 5.00000000, 1.50000000};
    l_U1239 = 31.00000000;
    l_U1374 = {163.18000000, 90.89000000, 0.63000000};
    l_U1377 = {4.56000000, 0.00000000, -99.76000000};
    l_U1380 = {160.60000000, 88.35000000, 0.76000000};
    l_U1383 = {0.14000000, 0.00000000, -36.72000000};
    l_U1240 = 45.00000000;
    l_U1241 = 30.00000000;
    l_U731 = 3;
    l_U732 = 3;
    l_U172 = 0;
     /* CREATETIMER */ sub_1607( ref l_U563, 700, 1, 0 );
    l_U168 = 0;
     /* CREATETIMER */ sub_1607( ref l_U572, 0, 1, 0 );
     /* STARTTIMER */ sub_1757( ref l_U572 );
     /* RESETTIMER */ sub_2466( ref l_U491 );
     /* RESETTIMER */ sub_2466( ref l_U500 );
     /* RESETTIMER */ sub_2466( ref l_U509 );
    l_U1424 = {0.05000000, 5.63000000, 1.42000000};
    l_U1243 = 0.00000000;
    l_U1427 = {0.63000000, 5.53000000, 1.43000000};
    l_U1244 = 0.00000000;
    l_U1430 = {-0.83000000, 5.47000000, 1.60000000};
    l_U1245 = 0.00000000;
    l_U1433 = {-0.82000000, 5.49000000, 1.60000000};
    l_U1246 = 0.00000000;
    l_U1392[0] = {-0.24000000, 5.42000000, 1.69000000};
    l_U1408[0] = {-1.56000000, 6.58000000, 1.57000000};
    l_U1392[1] = {-0.24000000, 5.22000000, 1.69000000};
    l_U1408[1] = {-0.41000000, 7.26000000, 1.97000000};
    l_U1392[2] = {1.70000000, 8.70000000, 1.30000000};
    l_U1408[2] = {-5.00000000, 0.00000000, 2.00000000};
    l_U1392[3] = {0.50000000, 10.50000000, 0.75000000};
    l_U1408[3] = {0.00000000, 5.00000000, 1.75000000};
    l_U1392[4] = {1.00000000, 3.80000000, 1.50000000};
    l_U1408[4] = {-0.70000000, 6.58000000, 1.50000000};
    l_U1317 = {175.55000000, 91.14000000, 0.81000000};
    l_U734 = 0.80000000;
    l_U735 = 11000.00000000;
    l_U169 = 0;
     /* CREATETIMER */ sub_1607( ref l_U626, 0, 1, 0 );
     /* STARTTIMER */ sub_1757( ref l_U626 );
     /* RESETTIMER */ sub_2466( ref l_U581 );
     /* RESETTIMER */ sub_2466( ref l_U590 );
     /* RESETTIMER */ sub_2466( ref l_U599 );
     /* RESETTIMER */ sub_2466( ref l_U608 );
     /* RESETTIMER */ sub_2466( ref l_U617 );
    l_U1527 = {1.00000000, 5.64000000, 1.44000000};
    l_U1248 = 0.00000000;
    l_U1530 = {-0.78000000, 5.45000000, 1.60000000};
    l_U1249 = 1.00000000;
    l_U1533 = {0.70000000, 5.70000000, 1.41000000};
    l_U1250 = 0.00000000;
    l_U1536 = {-0.77000000, 5.45000000, 1.60000000};
    l_U1251 = 1.00000000;
    l_U1539 = {0.40000000, 5.40000000, 1.42000000};
    l_U1252 = 90.00000000;
    l_U1542 = {-0.77000000, 5.45000000, 1.60000000};
    l_U1253 = 1.00000000;
    l_U1545 = {0.00000000, 5.76000000, 1.44000000};
    l_U1254 = 90.00000000;
    l_U1548 = {-0.74000000, 5.45000000, 1.60000000};
    l_U1255 = 1.00000000;
    l_U1551 = {-0.10000000, 5.76000000, 1.44000000};
    l_U1256 = 89.00000000;
    l_U1554 = {-0.74000000, 5.45000000, 1.60000000};
    l_U1257 = 1.00000000;
    l_U1557 = {0.40000000, 5.40000000, 1.44000000};
    l_U1258 = 90.00000000;
    l_U1560 = {-0.77000000, 5.45000000, 1.60000000};
    l_U1259 = 1.00000000;
    l_U1498 = {217.75000000, -63.57000000, 32.62000000};
    l_U1389 = {-1.65000000, 6.50000000, 1.30000000};
    l_U1329 = {192.32000000, -77.45000000, 1.07000000};
    l_U1332 = {192.68000000, -68.46000000, 0.00000000};
    l_U1436[0] = {-2.00000000, 9.00000000, 1.10000000};
    l_U1467[0] = {0.75000000, 5.18000000, 1.75000000};
    l_U1436[1] = {-0.24000000, 5.42000000, 1.69000000};
    l_U1467[1] = {-1.56000000, 6.58000000, 1.57000000};
    l_U1436[2] = {-0.32000000, 6.77000000, 1.71000000};
    l_U1467[2] = {-0.85000000, 5.18000000, 1.92000000};
    l_U1436[3] = {-0.32000000, 6.77000000, 1.71000000};
    l_U1467[3] = {1.68000000, 5.51000000, 1.16000000};
    l_U1436[4] = {0.57000000, 4.21000000, 1.49000000};
    l_U1467[4] = {0.10000000, 6.28000000, 0.72000000};
    l_U1436[5] = {0.57000000, 4.21000000, 1.49000000};
    l_U1467[5] = {0.10000000, 6.28000000, 1.59000000};
    l_U1436[6] = {-0.50000000, 6.50000000, 1.70000000};
    l_U1467[6] = {-0.75000000, 0.00000000, 1.70000000};
    l_U1436[7] = {0.04000000, 4.40000000, 1.45000000};
    l_U1467[7] = {-0.93000000, 6.79000000, 2.10000000};
    l_U1436[8] = {0.39000000, 4.40000000, 1.45000000};
    l_U1467[8] = {-0.03000000, 6.79000000, 2.10000000};
    l_U1436[9] = {0.39000000, 4.15000000, 0.89000000};
    l_U1467[9] = {0.86000000, 6.28000000, 0.87000000};
    l_U170 = 0;
     /* CREATETIMER */ sub_1607( ref l_U635, 0, 1, 0 );
     /* STARTTIMER */ sub_1757( ref l_U635 );
    l_U171 = 0;
    l_U718 = 0;
    return;
}

/* P_SETUP_PROP_ARRAY */ void sub_60669()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_SETUP_PROP_ARRAY - Setting up the prop request array.", 0 );
    l_U176[0] = g_U2128;
    l_U176[1] = g_U2143;
    l_U176[2] = g_U2144;
    l_U176[3] = g_U2145;
    l_U176[4] = g_U2146;
    l_U182[0] = g_U2143;
    l_U182[1] = g_U2145;
    l_U182[2] = g_U2128;
    l_U182[3] = g_U2128;
    l_U173[0] = g_U2151;
    l_U173[1] = g_U2134;
    l_U187[0] = g_U2136;
    l_U187[1] = g_U2137;
    l_U187[2] = g_U2138;
    l_U187[3] = g_U2139;
    l_U187[4] = g_U2140;
    l_U187[5] = g_U2141;
    return;
}

/* P_SETUP_RAIL_TUNNEL_CAR_VARS */ void sub_60999()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_SETUP_RAIL_TUNNEL_CAR_VARS - Setting up the vehicle request array.", 0 );
    l_U1279[0] = {179.35000000, 96.56000000, 0.80000000};
    l_U1224[0] = 327.00000000;
    l_U194[0] = -764000169;
    l_U1279[1] = {167.50000000, 83.00000000, 0.50000000};
    l_U1224[1] = 35.00000000;
    l_U194[1] = -1522400210;
    l_U1279[2] = {166.34000000, 98.78000000, 0.50000000};
    l_U1224[2] = 236.00000000;
    l_U194[2] = -1522400210;
    l_U1279[3] = {161.23400000, 81.30000000, 0.50000000};
    l_U1224[3] = 151.00000000;
    l_U194[3] = -1522400210;
    return;
}

/* P_SETUP_RAIL_PARKED_CAR_VARS */ void sub_61331()
{
     /* WRITESCRIPTLOG */ sub_442( "SP", "P_SETUP_RAIL_PARKED_CAR_VARS", 0 );
    l_U1292[0] = {186.20000000, -57.39000000, 0.50000000};
    l_U1229[0] = 275.00000000;
    l_U199[0] = -1425703854;
    l_U1292[1] = {187.00000000, -50.57000000, 0.50000000};
    l_U1229[1] = 85.00000000;
    l_U199[1] = -1522400210;
    l_U1292[2] = {199.59000000, -57.28000000, 0.50000000};
    l_U1229[2] = 70.00000000;
    l_U199[2] = -1221193536;
    l_U1292[3] = {199.69000000, -52.18000000, 0.50000000};
    l_U1229[3] = 260.00000000;
    l_U199[3] = -764000169;
    return;
}

/* P_RESET_BOOL_ARRAY */ void sub_61928(unknown uParam0)
{
    int I;

     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_RESET_BOOL_ARRAY", 0 );
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        (uParam0^)[I] = 0;
    }
    return;
}

/* P_INITIALIZE_SP_CHALLENGES */ void sub_65109()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_INITIALIZE_SP_CHALLENGES", 0 );
    l_U738 = 0;
    if (NOT (SCRIPT_VAR_HASH_EXISTS( 1153287169 )))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Creating the BestForLast script variable...", 0 );
        SCRIPT_VAR_HASH_ADD_INT( 1153287169 );
        DISPLAYF( "[CCB] ### The current BestForLast value is: {} ###", 1, 513, SCRIPT_VAR_HASH_GET_INT( 1153287169 ) );
        if (SCRIPT_VAR_HASH_EXISTS( 1153287169 ))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "The BestForLast script variable was successfully created...", 0 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "The BestForLast script variable is NOT valid!!!", 0 );
        }
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "The BestForLast script variable was already created...", 0 );
        SCRIPT_VAR_HASH_SET_INT( 1153287169, 0 );
        DISPLAYF( "[CCB] ### The current BestForLast value is: {} ###", 1, 513, SCRIPT_VAR_HASH_GET_INT( 1153287169 ) );
    }
    l_U739 = 0;
    if (NOT (SCRIPT_VAR_HASH_EXISTS( 1945554388 )))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Creating the FuelTanksExploded script variable...", 0 );
        SCRIPT_VAR_HASH_ADD_INT( 1945554388 );
        DISPLAYF( "[CCB] ### The current FuelTanksExploded value is: {} ###", 1, 513, SCRIPT_VAR_HASH_GET_INT( 1945554388 ) );
        if (SCRIPT_VAR_HASH_EXISTS( 1945554388 ))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "The FuelTanksExploded script variable was successfully created...", 0 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "The FuelTanksExploded script variable is NOT valid!!!", 0 );
        }
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "The FuelTanksExploded script variable was already created...", 0 );
        SCRIPT_VAR_HASH_SET_INT( 1945554388, 0 );
        DISPLAYF( "[CCB] ### The current FuelTanksExploded value is: {} ###", 1, 513, SCRIPT_VAR_HASH_GET_INT( 1945554388 ) );
    }
    l_U740 = 0;
    l_U144 = 0;
    if (NOT (SCRIPT_VAR_HASH_EXISTS( 1889626308 )))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Creating the TroubleHadCome script variable...", 0 );
        SCRIPT_VAR_HASH_ADD_INT( 1889626308 );
        DISPLAYF( "[CCB] ### The current TroubleHadCome value is: {} ###", 1, 513, SCRIPT_VAR_HASH_GET_INT( 1889626308 ) );
        if (SCRIPT_VAR_HASH_EXISTS( 1889626308 ))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "The TroubleHadCome script variable was successfully created...", 0 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "The TroubleHadCome script variable is NOT valid!!!", 0 );
        }
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "The TroubleHadCome script variable was already created...", 0 );
        SCRIPT_VAR_HASH_SET_INT( 1889626308, 0 );
        DISPLAYF( "[CCB] ### The current TroubleHadCome value is: {} ###", 1, 513, SCRIPT_VAR_HASH_GET_INT( 1889626308 ) );
    }
    return;
}

/* P_SETUP_STATIC_DATA */ void sub_66730()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_SETUP_STATIC_DATA", 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U751, -72.72000000, 105.86000000, 0.00100000, -48.00000000, -1257669444, 5, 2, 0, 0, 1 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U764[0], -49.42000000, 135.33000000, 0.55000000, 99.00000000, -1856339173, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U764[1], -50.29000000, 156.55000000, 0.55000000, 148.43000000, 1177889556, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U764[2], -47.49000000, 154.86000000, 0.35000000, 82.01000000, -684971413, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U764[3], -45.49000000, 153.98000000, 0.35000000, 88.83000000, 1429109657, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U817[0], -18.39000000, 170.91000000, 0.10000000, 40.00000000, -1489714533, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U817[1], -17.80000000, 168.85000000, 0.30000000, 40.00000000, -1943434354, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U817[2], -14.47000000, 168.96000000, 0.10000000, 76.00000000, -366823623, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U817[3], -11.90000000, 169.55000000, 0.30000000, 37.00000000, 1901166384, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U817[4], -6.90000000, 171.02000000, 0.10000000, 56.00000000, -1946189981, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U817[5], -1.49000000, 167.60000000, 0.30000000, 90.00000000, -1856339173, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U817[6], 12.41000000, 162.79000000, 0.30000000, -25.00000000, 130503050, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U817[7], 16.35000000, 161.31000000, 0.30000000, 0.00000000, -354890253, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U817[8], 11.67000000, 160.35000000, 0.10000000, 0.00000000, -684971413, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U817[9], 16.93000000, 151.20000000, 0.10000000, 0.00000000, 1901166384, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U948[0], 24.33000000, 137.41000000, 0.27000000, 0.00000000, 335735410, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U948[1], 23.10000000, 137.33000000, 0.10000000, 0.00000000, 1900580661, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U948[2], 17.92000000, 130.81000000, 0.10000000, 0.00000000, -1489714533, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U948[3], 19.89000000, 133.08000000, 0.22000000, 0.00000000, 1177889556, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U1001[0], 98.91000000, 104.87000000, -1.62000000, -9.00000000, 1177889556, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U1001[1], 104.53000000, 94.96000000, -1.34000000, 23.00000000, 1901166384, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U1001[2], 104.14000000, 91.98000000, 0.27000000, 28.00000000, 346475646, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U1041[0], 166.27000000, 90.50000000, 0.01000000, 85.00000000, 1900580661, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U1041[1], 171.23000000, 93.33000000, 0.10000000, 76.00000000, -684971413, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U1041[2], 168.08000000, 86.85000000, 0.10000000, 64.00000000, -351725869, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U1081[0], 191.37000000, 50.03000000, 0.39000000, -64.00000000, -1943434354, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U1081[1], 198.33000000, 25.90000000, 1.52000000, -13.00000000, -1946189981, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U1081[2], 198.37000000, 19.78000000, 5.72000000, -32.00000000, 335735410, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U1081[3], 197.95000000, 16.19000000, 7.03000000, -22.00000000, -1856339173, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U1081[4], 212.58000000, 21.67000000, 0.54000000, -7.00000000, -366823623, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U1081[5], 192.57000000, 18.56000000, 0.30000000, -124.00000000, 130503050, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U1081[6], 189.29000000, 13.26000000, 0.10000000, -89.00000000, 1177889556, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U1081[7], 188.16000000, 11.56000000, 0.20000000, -78.00000000, -354890253, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U1081[8], 195.63000000, -21.60000000, 0.54000000, -44.00000000, -684971413, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_66832( ref l_U1081[9], 193.08000000, -23.50000000, 0.50000000, -74.00000000, -351725869, 7, 3, 2, 0, 0 );
     /* P_CREATETETHERBOX */ sub_68492( ref l_U1212, "TETHER_RAIL_FUEL", -11.64000000, 181.31000000, -0.25000000, 23.00000000, 8.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_68492( ref l_U1213, "TETHER_RAIL_TERMINAL_FIRST", 199.76000000, 41.11000000, -0.57000000, 3.25000000, 25.27000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_68492( ref l_U1214, "TETHER_RAIL_TERMINAL_MID", 199.76000000, 15.98000000, -0.57000000, 3.25000000, 19.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_68492( ref l_U1215, "TETHER_RAIL_TERMINAL_LAST", 199.76000000, -1.68000000, -0.57000000, 3.25000000, 12.80000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATEFLEEZONE */ sub_68898( ref l_U1216, "RAIL_FUEL_FLEE_ZONE_LEFT", 11.67000000, 157.02000000, -0.25000000, 23.00000000, 8.00000000, 4.00000000, 0.00000000, 0.00000000, -45.00000000, 1 );
     /* P_CREATEFLEEZONE */ sub_68898( ref l_U1217, "RAIL_FUEL_FLEE_ZONE_RIGHT", -32.34000000, 159.98000000, -0.25000000, 23.00000000, 8.00000000, 4.00000000, 0.00000000, 0.00000000, 45.00000000, 1 );
    return;
}

/* P_CREATEPEDSTRUCTWITHNAME */ void sub_66832(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

/* P_CREATETETHERBOX */ void sub_68492(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 2, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* P_CREATEFLEEZONE */ void sub_68898(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 3, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* F_HANDLE_PRELOAD_ASSETS */ int sub_69128()
{
    switch (l_U150)
    {
        case 0:
         /* P_PRELOAD_CHECKPOINT_ASSETS */ sub_69200();
         /* WRITESCRIPTLOG */ sub_442( "CCB", "ePreLoadAsset - STATE_LOAD_LOADING", 0 );
        l_U150 = 1;
        break;
        case 1:
        if ( /* F_STREAMREQ_ALL_ASSETS_LOADED */ sub_79761( ref g_U910, ref g_U1211, ref g_U1272, ref g_U1369, ref g_U1474, ref g_U1535, ref g_U1704, ref g_U1757 ))
        {
             /* P_SPAWN_RAIL_BUS */ sub_18286();
             /* WRITESCRIPTLOG */ sub_442( "CCB", "ePreLoadAsset - STATE_LOAD_COMPLETE", 0 );
            l_U150 = 11;
        }
        break;
        case 11:
        return 1;
        break;
    }
    return 0;
}

/* P_PRELOAD_CHECKPOINT_ASSETS */ void sub_69200()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_PRELOAD_CHECKPOINT_ASSETS", 0 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( -1204387800, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( 1572429640, ref g_U910 );
     /* P_STREAMREQ_WEAPON_TYPE_INSERT */ sub_71293( g_U2860, ref g_U1211 );
     /* P_STREAMREQ_ANIM_DICT_INSERT */ sub_73244( "LEVEL_S_BUS_RS", ref g_U1369 );
     /* P_STREAMREQ_ANIM_DICT_INSERT */ sub_73244( "FACE_GIOBUS", ref g_U1369 );
     /* P_STREAMREQ_ACTION_TREE_INSERT */ sub_75150( ref g_U2008, ref g_U1535 );
     /* P_STREAMREQ_ACTION_TREE_INSERT */ sub_75150( ref g_U2024, ref g_U1535 );
     /* P_STREAMREQ_VEHICLE_RECORDING_INSERT */ sub_77077( g_U2330, ref g_U1474 );
    if ((g_U2875[10] > 0) || (g_U763 == 10))
    {
         /* P_LOAD_CHECKPOINT_ASSETS */ sub_79077();
    }
    return;
}

/* P_STREAMREQ_MODELNAMES_INSERT */ void sub_69291(unknown uParam0, unknown uParam1)
{
    int iVar4;

    if (IS_MODEL_IN_CDIMAGE( uParam0 ))
    {
        iVar4 =  /* F_STREAMREQ_MODELNAMES_IS_INDEX_AVAILABLE */ sub_69358( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
        if (iVar4 >= 0)
        {
            DISPLAYF( "[CCB] ### Found NULL array index: ###", 0 );
            PRINTINT( iVar4 );
            PRINTNL();
            DISPLAYF( "[CCB] ### Storing MODEL_NAME: {!f1} ###", 2, 1, -874832622, 513, uParam0 );
            (uParam1^)[iVar4]._fU0 = uParam0;
            (uParam1^)[iVar4]._fU4 = 1;
             /* P_STREAMREQ_MODELNAMES_THREADID_SET_ID */ sub_69616( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
        }
    }
    else
    {
        DISPLAYF( "[CCB] ### Inserting MODEL_NAME: {!f1} ###", 2, 1, -874832622, 513, uParam0 );
        SCRIPT_ASSERT( "The asset is NOT in the image!!!", 0 );
    }
    return;
}

/* F_STREAMREQ_MODELNAMES_IS_INDEX_AVAILABLE */ int sub_69358(int iParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU4 == 1)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                DISPLAYF( "[CCB] ### The MODEL_NAME is being requested: {!f1} ###", 2, 1, -874832622, 513, (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The MODEL_NAME asset is currently being requested!!!", 0 );
                 /* P_STREAMREQ_MODELNAMES_THREADID_SET_ID */ sub_69616( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 2)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                DISPLAYF( "[CCB] ### The MODEL_NAME is loading: {!f1} ###", 2, 1, -874832622, 513, (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The MODEL_NAME asset is already loading!!!", 0 );
                 /* P_STREAMREQ_MODELNAMES_THREADID_SET_ID */ sub_69616( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 3)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                if (HAS_MODEL_LOADED( iParam0 ))
                {
                    DISPLAYF( "[CCB] ### The MODEL_NAME is already loaded: {!f1} ###", 2, 1, -874832622, 513, (uParam1^)[Result]._fU0 );
                     /* P_STREAMREQ_MODELNAMES_THREADID_SET_ID */ sub_69616( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    DISPLAYF( "[CCB] ### The MODEL_NAME is being requested: {!f1} ###", 2, 1, -874832622, 513, (uParam1^)[Result]._fU0 );
                    SCRIPT_ASSERT( "The MODEL_NAME asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    (uParam1^)[Result]._fU0 = 0;
                    (uParam1^)[Result]._fU4 = 0;
                     /* P_STREAMREQ_THREADID_RESET */ sub_4793( ref (uParam1^)[Result]._fU8 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU4 == 4)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                DISPLAYF( "[CCB] ### The MODEL_NAME is being removed: {!f1} ###", 2, 1, -874832622, 513, (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The MODEL_NAME asset is currently being removed!!!", 0 );
                 /* P_STREAMREQ_MODELNAMES_THREADID_SET_ID */ sub_69616( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (HAS_MODEL_LOADED( iParam0 ))
        {
            DISPLAYF( "[CCB] ### The MODEL_NAME is already loaded: {!f1} ###", 2, 1, -874832622, 513, iParam0 );
            SCRIPT_ASSERT( "The MODEL_NAME is already loaded, but the asset status flag was not set!!!", 0 );
            DISPLAYF( "[CCB] ### Storing MODEL_NAME: {!f1} ###", 2, 1, -874832622, 513, iParam0 );
            (uParam1^)[iVar6]._fU0 = iParam0;
            (uParam1^)[iVar6]._fU4 = 3;
             /* P_STREAMREQ_MODELNAMES_THREADID_SET_ID */ sub_69616( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The MODEL_NAMES - STREAMREQ array is full!!!", 0 );
    return -1;
}

/* P_STREAMREQ_MODELNAMES_THREADID_SET_ID */ void sub_69616(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 =  /* F_STREAMREQ_THREADID_IS_INDEX_AVAILABLE_FOR_INSERT */ sub_42027( uParam2, ref (uParam1^)[uParam0]._fU8 );
    if (iVar5 >= 0)
    {
        DISPLAYF( "[CCB] ### Storing the THREADID: {} ###", 1, 513, uParam2 );
        (uParam1^)[uParam0]._fU8[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The MODEL_NAME asset thread indices are NOT available!!!", 0 );
    }
    return;
}

/* P_STREAMREQ_WEAPON_TYPE_INSERT */ void sub_71293(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 =  /* F_STREAMREQ_WEAPON_TYPE_IS_INDEX_AVAILABLE */ sub_71347( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
    if (iVar4 >= 0)
    {
        DISPLAYF( "[CCB] ### Found NULL array index: ###", 0 );
        PRINTINT( iVar4 );
        PRINTNL();
        DISPLAYF( "[CCB] ### Storing WEAPON_TYPE: {!f1} ###", 2, 1, 199730165, 513, uParam0 );
        (uParam1^)[iVar4]._fU0 = uParam0;
        (uParam1^)[iVar4]._fU4 = 1;
         /* P_STREAMREQ_WEAPON_TYPE_THREADID_SET_ID */ sub_71608( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
    }
    return;
}

/* F_STREAMREQ_WEAPON_TYPE_IS_INDEX_AVAILABLE */ int sub_71347(int iParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU4 == 1)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                DISPLAYF( "[CCB] ### The WEAPON_TYPE is being requested: {!f1} ###", 2, 1, 199730165, 513, (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The WEAPON_TYPE asset is currently being requested!!!", 0 );
                 /* P_STREAMREQ_WEAPON_TYPE_THREADID_SET_ID */ sub_71608( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 2)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                DISPLAYF( "[CCB] ### The WEAPON_TYPE is loading: {!f1} ###", 2, 1, 199730165, 513, (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The WEAPON_TYPE asset is already loading!!!", 0 );
                 /* P_STREAMREQ_WEAPON_TYPE_THREADID_SET_ID */ sub_71608( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 3)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                if (HAS_WEAPON_LOADED( iParam0 ))
                {
                    DISPLAYF( "[CCB] ### The WEAPON_TYPE is already loaded: {!f1} ###", 2, 1, 199730165, 513, (uParam1^)[Result]._fU0 );
                    DISPLAYF( "The WEAPON_TYPE asset is already loaded!!!", 0 );
                     /* P_STREAMREQ_WEAPON_TYPE_THREADID_SET_ID */ sub_71608( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    DISPLAYF( "[CCB] ### The WEAPON_TYPE is being requested: {!f1} ###", 2, 1, 199730165, 513, (uParam1^)[Result]._fU0 );
                    SCRIPT_ASSERT( "The WEAPON_TYPE asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    (uParam1^)[Result]._fU0 = 0;
                    (uParam1^)[Result]._fU4 = 0;
                     /* P_STREAMREQ_THREADID_RESET */ sub_4793( ref (uParam1^)[Result]._fU8 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU4 == 4)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                DISPLAYF( "[CCB] ### The WEAPON_TYPE is being removed: {!f1} ###", 2, 1, 199730165, 513, (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The WEAPON_TYPE asset is currently being removed!!!", 0 );
                 /* P_STREAMREQ_WEAPON_TYPE_THREADID_SET_ID */ sub_71608( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (HAS_WEAPON_LOADED( iParam0 ))
        {
            DISPLAYF( "[CCB] ### The WEAPON_TYPE is already loaded: {!f1} ###", 2, 1, 199730165, 513, iParam0 );
            DISPLAYF( "The WEAPON_TYPE asset is already loaded, but the asset status flag was not set!!!", 0 );
            DISPLAYF( "[CCB] ### Storing WEAPON_TYPE: {!f1} ###", 2, 1, 199730165, 513, iParam0 );
            (uParam1^)[iVar6]._fU0 = iParam0;
            (uParam1^)[iVar6]._fU4 = 3;
             /* P_STREAMREQ_WEAPON_TYPE_THREADID_SET_ID */ sub_71608( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The WEAPON_TYPE - STREAMREQ array is full!!!", 0 );
    return -1;
}

/* P_STREAMREQ_WEAPON_TYPE_THREADID_SET_ID */ void sub_71608(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 =  /* F_STREAMREQ_THREADID_IS_INDEX_AVAILABLE_FOR_INSERT */ sub_42027( uParam2, ref (uParam1^)[uParam0]._fU8 );
    if (iVar5 >= 0)
    {
        DISPLAYF( "[CCB] ### Storing the THREADID: {} ###", 1, 513, uParam2 );
        (uParam1^)[uParam0]._fU8[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The WEAPON_TYPE asset thread indices are NOT available!!!", 0 );
    }
    return;
}

/* P_STREAMREQ_ANIM_DICT_INSERT */ void sub_73244(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 =  /* F_STREAMREQ_ANIM_DICT_IS_INDEX_AVAILABLE */ sub_73296( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
    if (iVar4 >= 0)
    {
        DISPLAYF( "[CCB] ### Found NULL array index: ###", 0 );
        PRINTINT( iVar4 );
        PRINTNL();
        DISPLAYF( "[CCB] ### Storing ANIM_DICT asset name: {} ###", 1, 1537, uParam0 );
        StrCopy( ref (uParam1^)[iVar4]._fU0, uParam0, 32 );
        (uParam1^)[iVar4]._fU32 = 1;
         /* P_STREAMREQ_ANIM_DICT_THREADID_SET_ID */ sub_73548( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
    }
    return;
}

/* F_STREAMREQ_ANIM_DICT_IS_INDEX_AVAILABLE */ int sub_73296(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU32 == 1)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                DISPLAYF( "[CCB] ### The ANIM_DICT is being requested: {} ###", 1, 1281, ref (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The ANIM_DICT asset is currently being requested!!!", 0 );
                 /* P_STREAMREQ_ANIM_DICT_THREADID_SET_ID */ sub_73548( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU32 == 2)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                DISPLAYF( "[CCB] ### The ANIM_DICT is loading: {} ###", 1, 1281, ref (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The ANIM_DICT asset is already loading!!!", 0 );
                 /* P_STREAMREQ_ANIM_DICT_THREADID_SET_ID */ sub_73548( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU32 == 3)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                if (HAS_ANIM_DICT_LOADED( uParam0, 0 ))
                {
                    DISPLAYF( "[CCB] ### The ANIM_DICT is already loaded: {} ###", 1, 1281, ref (uParam1^)[Result]._fU0 );
                    DISPLAYF( "The ANIM_DICT asset is already loaded!!!", 0 );
                     /* P_STREAMREQ_ANIM_DICT_THREADID_SET_ID */ sub_73548( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    DISPLAYF( "[CCB] ### The ANIM_DICT is being requested: {} ###", 1, 1281, ref (uParam1^)[Result]._fU0 );
                    SCRIPT_ASSERT( "The ANIM_DICT asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    StrCopy( ref (uParam1^)[Result]._fU0, "", 32 );
                    (uParam1^)[Result]._fU32 = 0;
                     /* P_STREAMREQ_THREADID_RESET */ sub_4793( ref (uParam1^)[Result]._fU36 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU32 == 4)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                DISPLAYF( "[CCB] ### The ANIM_DICT is being removed: {} ###", 1, 1281, ref (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The ANIM_DICT asset is currently being removed!!!", 0 );
                 /* P_STREAMREQ_ANIM_DICT_THREADID_SET_ID */ sub_73548( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU32 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (HAS_ANIM_DICT_LOADED( uParam0, 0 ))
        {
            DISPLAYF( "[CCB] ### The ANIM_DICT is already loaded: {} ###", 1, 1537, uParam0 );
            DISPLAYF( "The ANIM_DICT asset is already loaded, but the asset status flag was not set!!!", 0 );
            DISPLAYF( "[CCB] ### Storing ANIM_DICT: {} ###", 1, 1537, uParam0 );
            StrCopy( ref (uParam1^)[iVar6]._fU0, uParam0, 32 );
            (uParam1^)[iVar6]._fU32 = 1;
             /* P_STREAMREQ_ANIM_DICT_THREADID_SET_ID */ sub_73548( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The ANIM_DICT - STREAMREQ array is full!!!", 0 );
    return -1;
}

/* P_STREAMREQ_ANIM_DICT_THREADID_SET_ID */ void sub_73548(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 =  /* F_STREAMREQ_THREADID_IS_INDEX_AVAILABLE_FOR_INSERT */ sub_42027( uParam2, ref (uParam1^)[uParam0]._fU36 );
    if (iVar5 >= 0)
    {
        DISPLAYF( "[CCB] ### Storing the THREADID: {} ###", 1, 513, uParam2 );
        (uParam1^)[uParam0]._fU36[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The ANIM_DICT asset thread indices are NOT available!!!", 0 );
    }
    return;
}

/* P_STREAMREQ_ACTION_TREE_INSERT */ void sub_75150(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 =  /* F_STREAMREQ_ACTION_TREE_IS_INDEX_AVAILABLE */ sub_75204( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
    if (iVar4 >= 0)
    {
        DISPLAYF( "[CCB] ### Found NULL array index: ###", 0 );
        PRINTINT( iVar4 );
        PRINTNL();
        DISPLAYF( "[CCB] ### Storing ACTION_TREE asset name: {} ###", 1, 1537, uParam0 );
        StrCopy( ref (uParam1^)[iVar4]._fU0, uParam0, 64 );
        (uParam1^)[iVar4]._fU64 = 1;
         /* P_STREAMREQ_ACTION_TREE_THREADID_SET_ID */ sub_75462( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
    }
    return;
}

/* F_STREAMREQ_ACTION_TREE_IS_INDEX_AVAILABLE */ int sub_75204(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU64 == 1)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                DISPLAYF( "[CCB] ### The ACTION_TREE is being requested: {} ###", 1, 1281, ref (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The ACTION_TREE asset is currently being requested!!!", 0 );
                 /* P_STREAMREQ_ACTION_TREE_THREADID_SET_ID */ sub_75462( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU64 == 2)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                DISPLAYF( "[CCB] ### The ACTION_TREE is loading: {} ###", 1, 1281, ref (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The ACTION_TREE asset is already loading!!!", 0 );
                 /* P_STREAMREQ_ACTION_TREE_THREADID_SET_ID */ sub_75462( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU64 == 3)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                if (IS_ACTION_TREE_LOADED( uParam0 ))
                {
                    DISPLAYF( "[CCB] ### The ACTION_TREE is already loaded: {} ###", 1, 1281, ref (uParam1^)[Result]._fU0 );
                    DISPLAYF( "The ACTION_TREE asset is already loaded!!!", 0 );
                     /* P_STREAMREQ_ACTION_TREE_THREADID_SET_ID */ sub_75462( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    DISPLAYF( "[CCB] ### The ACTION_TREE is being requested: {} ###", 1, 1281, ref (uParam1^)[Result]._fU0 );
                    SCRIPT_ASSERT( "The ACTION_TREE asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    StrCopy( ref (uParam1^)[Result]._fU0, "", 64 );
                    (uParam1^)[Result]._fU64 = 0;
                     /* P_STREAMREQ_THREADID_RESET */ sub_4793( ref (uParam1^)[Result]._fU68 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU64 == 4)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                DISPLAYF( "[CCB] ### The ACTION_TREE is being removed: {} ###", 1, 1281, ref (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The ACTION_TREE asset is currently being removed!!!", 0 );
                 /* P_STREAMREQ_ACTION_TREE_THREADID_SET_ID */ sub_75462( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU64 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (IS_ACTION_TREE_LOADED( uParam0 ))
        {
            DISPLAYF( "[CCB] ### The ACTION_TREE is already loaded: {} ###", 1, 1537, uParam0 );
            DISPLAYF( "The ACTION_TREE is already loaded, but the asset status flag was not set!!!", 0 );
            DISPLAYF( "[CCB] ### Storing ACTION_TREE: {} ###", 1, 1537, uParam0 );
            StrCopy( ref (uParam1^)[iVar6]._fU0, uParam0, 64 );
            (uParam1^)[iVar6]._fU64 = 3;
             /* P_STREAMREQ_ACTION_TREE_THREADID_SET_ID */ sub_75462( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The ACTION_TREE - STREAMREQ array is full!!!", 0 );
    return -1;
}

/* P_STREAMREQ_ACTION_TREE_THREADID_SET_ID */ void sub_75462(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 =  /* F_STREAMREQ_THREADID_IS_INDEX_AVAILABLE_FOR_INSERT */ sub_42027( uParam2, ref (uParam1^)[uParam0]._fU68 );
    if (iVar5 >= 0)
    {
        DISPLAYF( "[CCB] ### Storing the THREADID: {} ###", 1, 513, uParam2 );
        (uParam1^)[uParam0]._fU68[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The ACTION_TREE asset thread indices are NOT available!!!", 0 );
    }
    return;
}

/* P_STREAMREQ_VEHICLE_RECORDING_INSERT */ void sub_77077(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 =  /* F_STREAMREQ_VEHICLE_RECORDING_IS_INDEX_AVAILABLE */ sub_77137( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
    if (iVar4 >= 0)
    {
        DISPLAYF( "[CCB] ### Found NULL array index: ###", 0 );
        PRINTINT( iVar4 );
        PRINTNL();
        DISPLAYF( "[CCB] ### Storing VEHICLE_RECORDING asset name: {} ###", 1, 513, uParam0 );
        (uParam1^)[iVar4]._fU0 = uParam0;
        (uParam1^)[iVar4]._fU4 = 1;
         /* P_STREAMREQ_VEHICLE_RECORDING_THREADID_SET_ID */ sub_77407( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
    }
    return;
}

/* F_STREAMREQ_VEHICLE_RECORDING_IS_INDEX_AVAILABLE */ int sub_77137(int iParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU4 == 1)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                DISPLAYF( "[CCB] ### The VEHICLE_RECORDING is being requested: {} ###", 1, 513, (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The VEHICLE_RECORDING asset is currently being requested!!!", 0 );
                 /* P_STREAMREQ_VEHICLE_RECORDING_THREADID_SET_ID */ sub_77407( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 2)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                DISPLAYF( "[CCB] ### The VEHICLE_RECORDING is loading: {} ###", 1, 513, (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The VEHICLE_RECORDING asset is already loading!!!", 0 );
                 /* P_STREAMREQ_VEHICLE_RECORDING_THREADID_SET_ID */ sub_77407( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 3)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                if (HAS_VEHICLE_RECORDING_BEEN_LOADED( iParam0 ))
                {
                    DISPLAYF( "[CCB] ### The VEHICLE_RECORDING is already loaded: {} ###", 1, 513, (uParam1^)[Result]._fU0 );
                    DISPLAYF( "The VEHICLE_RECORDING asset is already loaded!!!", 0 );
                     /* P_STREAMREQ_VEHICLE_RECORDING_THREADID_SET_ID */ sub_77407( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    DISPLAYF( "[CCB] ### The VEHICLE_RECORDING is being requested: {} ###", 1, 513, (uParam1^)[Result]._fU0 );
                    SCRIPT_ASSERT( "The VEHICLE_RECORDING asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    (uParam1^)[Result]._fU0 = -1;
                    (uParam1^)[Result]._fU4 = 0;
                     /* P_STREAMREQ_THREADID_RESET */ sub_4793( ref (uParam1^)[Result]._fU8 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU4 == 4)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                DISPLAYF( "[CCB] ### The VEHICLE_RECORDING is being removed: {} ###", 1, 513, (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The VEHICLE_RECORDING asset is currently being removed!!!", 0 );
                 /* P_STREAMREQ_VEHICLE_RECORDING_THREADID_SET_ID */ sub_77407( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (HAS_VEHICLE_RECORDING_BEEN_LOADED( iParam0 ))
        {
            DISPLAYF( "[CCB] ### The VEHICLE_RECORDING is already loaded: {} ###", 1, 513, iParam0 );
            DISPLAYF( "The VEHICLE_RECORDING is already loaded, but the asset status flag was not set!!!", 0 );
            DISPLAYF( "[CCB] ### Storing VEHICLE_RECORDING: {} ###", 1, 513, iParam0 );
            (uParam1^)[iVar6]._fU0 = iParam0;
            (uParam1^)[iVar6]._fU4 = 3;
             /* P_STREAMREQ_VEHICLE_RECORDING_THREADID_SET_ID */ sub_77407( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The VEHICLE_RECORDING - STREAMREQ array is full!!!", 0 );
    return -1;
}

/* P_STREAMREQ_VEHICLE_RECORDING_THREADID_SET_ID */ void sub_77407(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 =  /* F_STREAMREQ_THREADID_IS_INDEX_AVAILABLE_FOR_INSERT */ sub_42027( uParam2, ref (uParam1^)[uParam0]._fU8 );
    if (iVar5 >= 0)
    {
        DISPLAYF( "[CCB] ### Storing the THREADID: {} ###", 1, 513, uParam2 );
        (uParam1^)[uParam0]._fU8[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The VEHICLE_RECORDING asset thread indices are NOT available!!!", 0 );
    }
    return;
}

/* P_LOAD_CHECKPOINT_ASSETS */ void sub_79077()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_LOAD_CHECKPOINT_ASSETS", 0 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( g_U2105, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( -1522400210, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( -764000169, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( -1425703854, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( g_U2128, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( g_U2143, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( g_U2144, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( g_U2145, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( g_U2146, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( g_U2151, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( g_U2134, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( g_U2136, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( g_U2137, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( g_U2138, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( g_U2139, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( g_U2140, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( g_U2141, ref g_U910 );
     /* P_STREAMREQ_WEAPON_TYPE_INSERT */ sub_71293( g_U2854, ref g_U1211 );
     /* P_STREAMREQ_WEAPON_TYPE_INSERT */ sub_71293( g_U2856, ref g_U1211 );
     /* P_STREAMREQ_WEAPON_TYPE_INSERT */ sub_71293( g_U2855, ref g_U1211 );
     /* P_STREAMREQ_WEAPON_TYPE_INSERT */ sub_71293( g_U2857, ref g_U1211 );
     /* P_STREAMREQ_WEAPON_TYPE_INSERT */ sub_71293( g_U2861, ref g_U1211 );
     /* P_STREAMREQ_ANIM_DICT_INSERT */ sub_73244( ref g_U1896, ref g_U1369 );
     /* P_LOAD_AUDIO_ASSETS */ sub_79474();
    return;
}

/* P_LOAD_AUDIO_ASSETS */ void sub_79474()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_LOAD_AUDIO_ASSETS", 0 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
    STOP_SCRIPT_STREAM( 0 );
    STOP_SCRIPT_STREAM( 1 );
    STOP_SCRIPT_STREAM( 2 );
     /* P_STREAMREQ_SCRIPT_STREAM_RESET_STRUCT */ sub_4691( ref g_U1704 );
     /* P_STREAMREQ_SCRIPT_STREAM_INSERT */ sub_41641( "SBUS_RS_A", ref g_U1704 );
     /* P_STREAMREQ_SCRIPT_STREAM_INSERT */ sub_41641( "SBUS_RS_B", ref g_U1704 );
     /* P_STREAMREQ_SCRIPT_STREAM_INSERT */ sub_41641( "SBUS_RS_C", ref g_U1704 );
    return;
}

/* F_STREAMREQ_ALL_ASSETS_LOADED */ int sub_79761(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    if ( /* F_STREAMREQ_MODELNAMES_IS_LOADED */ sub_79805( uParam0 ))
    {
        if ( /* F_STREAMREQ_WEAPON_TYPE_IS_LOADED */ sub_80205( uParam1 ))
        {
            if ( /* F_STREAMREQ_ISEQ_IS_LOADED */ sub_80609( uParam2 ))
            {
                if ( /* F_STREAMREQ_ANIM_DICT_IS_LOADED */ sub_81025( uParam3 ))
                {
                    if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_LOADED */ sub_81418( uParam4 ))
                    {
                        if ( /* F_STREAMREQ_ACTION_TREE_IS_LOADED */ sub_81840( uParam5 ))
                        {
                            if ( /* F_STREAMREQ_SCRIPT_STREAM_IS_LOADED */ sub_45023( uParam6 ))
                            {
                                if ( /* F_STREAMREQ_AUDIO_BANK_IS_LOADED */ sub_82232( uParam7 ))
                                {
                                    return 1;
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    return 0;
}

/* F_STREAMREQ_MODELNAMES_IS_LOADED */ int sub_79805(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU4 == 1)
        {
            DISPLAYF( "[CCB] ### Waiting for MODEL_NAME to be requested: {!f1}", 2, 1, -874832622, 513, (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 2)
        {
            DISPLAYF( "[CCB] ### Waiting for MODEL_NAME to load: {!f1}", 2, 1, -874832622, 513, (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 4)
        {
            DISPLAYF( "[CCB] ### Waiting for MODEL_NAME to be removed: {!f1}", 2, 1, -874832622, 513, (uParam0^)[I]._fU0 );
            return 0;
        };;;
    }
    return 1;
}

/* F_STREAMREQ_WEAPON_TYPE_IS_LOADED */ int sub_80205(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU4 == 1)
        {
            DISPLAYF( "[CCB] ### Waiting for WEAPON_TYPE to be requested: {!f1}", 2, 1, 199730165, 513, (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 2)
        {
            DISPLAYF( "[CCB] ### Waiting for WEAPON_TYPE to load: {!f1}", 2, 1, 199730165, 513, (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 4)
        {
            DISPLAYF( "[CCB] ### Waiting for WEAPON_TYPE to be removed: {!f1}", 2, 1, 199730165, 513, (uParam0^)[I]._fU0 );
            return 0;
        };;;
    }
    return 1;
}

/* F_STREAMREQ_ISEQ_IS_LOADED */ int sub_80609(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU4 == 1)
        {
            ISEQ_GET_NAME( 32, ref uVar3, (uParam0^)[I]._fU0 );
            DISPLAYF( "[CCB]### Waiting for the ISEQ to be requested: {} ###", 1, 1281, ref uVar3 );
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 2)
        {
            ISEQ_GET_NAME( 32, ref uVar3, (uParam0^)[I]._fU0 );
            DISPLAYF( "[CCB]### Waiting for the ISEQ to load: {} ###", 1, 1281, ref uVar3 );
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 4)
        {
            ISEQ_GET_NAME( 32, ref uVar3, (uParam0^)[I]._fU0 );
            DISPLAYF( "[CCB]### Waiting for the ISEQ to be removed: {} ###", 1, 1281, ref uVar3 );
            return 0;
        };;;
    }
    return 1;
}

/* F_STREAMREQ_ANIM_DICT_IS_LOADED */ int sub_81025(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU32 == 1)
        {
            DISPLAYF( "[CCB]### Waiting for the ANIM_DICT to be requested: {} ###", 1, 1281, ref (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU32 == 2)
        {
            DISPLAYF( "[CCB]### Waiting for the ANIM_DICT to load: {} ###", 1, 1281, ref (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU32 == 4)
        {
            DISPLAYF( "[CCB]### Waiting for the ANIM_DICT to be removed: {} ###", 1, 1281, ref (uParam0^)[I]._fU0 );
            return 0;
        };;;
    }
    return 1;
}

/* F_STREAMREQ_VEHICLE_RECORDING_IS_LOADED */ int sub_81418(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU4 == 1)
        {
            DISPLAYF( "[CCB]### Waiting for the VEHICLE_RECORDING to be requested: {} ###", 1, 513, (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 2)
        {
            DISPLAYF( "[CCB]### Waiting for the VEHICLE_RECORDING to load: {} ###", 1, 513, (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 4)
        {
            DISPLAYF( "[CCB]### Waiting for the VEHICLE_RECORDING to be removed: {} ###", 1, 513, (uParam0^)[I]._fU0 );
            return 0;
        };;;
    }
    return 1;
}

/* F_STREAMREQ_ACTION_TREE_IS_LOADED */ int sub_81840(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU64 == 1)
        {
            DISPLAYF( "[CCB] ### Waiting for ACTION_TREE to be requested: {}", 1, 1281, ref (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU64 == 2)
        {
            DISPLAYF( "[CCB] ### Waiting for ACTION_TREE to load: {}", 1, 1281, ref (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU64 == 4)
        {
            DISPLAYF( "[CCB] ### Waiting for ACTION_TREE to be removed: {}", 1, 1281, ref (uParam0^)[I]._fU0 );
            return 0;
        };;;
    }
    return 1;
}

/* F_STREAMREQ_AUDIO_BANK_IS_LOADED */ int sub_82232(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU64 == 1)
        {
            DISPLAYF( "[CCB] ### Waiting for AUDIO_BANK to be requested: {}", 1, 1281, ref (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU64 == 2)
        {
            DISPLAYF( "[CCB] ### Waiting for AUDIO_BANK to load: {}", 1, 1281, ref (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU64 == 4)
        {
            DISPLAYF( "[CCB] ### Waiting for AUDIO_BANK to be removed: {}", 1, 1281, ref (uParam0^)[I]._fU0 );
            return 0;
        };;;
    }
    return 1;
}

/* F_HANDLE_LOAD_ASSETS */ int sub_82881()
{
    switch (l_U149)
    {
        case 0:
         /* P_LOAD_CHECKPOINT_ASSETS */ sub_79077();
         /* WRITESCRIPTLOG */ sub_442( "CCB", "eLoadAsset - STATE_LOAD_01", 0 );
        l_U149 = 2;
        break;
        case 2:
        if ( /* F_STREAMREQ_ALL_ASSETS_LOADED */ sub_79761( ref g_U910, ref g_U1211, ref g_U1272, ref g_U1369, ref g_U1474, ref g_U1535, ref g_U1704, ref g_U1757 ))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eLoadAsset - STATE_LOAD_COMPLETE", 0 );
            l_U149 = 11;
        }
        break;
        case 11:
        return 1;
        break;
    }
    return 0;
}

/* P_START_GAMEPLAY */ void sub_83848()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_START_GAMEPLAY", 0 );
     /* NIS_POST_SETUP */ sub_83910( 1, 1 );
     /* P_RAIL_BUS_DAMAGE_METER_ON */ sub_53652();
    TOGGLE_DISPLAY_AMMO( 0 );
    CAMERA_USE_HANDY_CAM( 1, 8.00000000, 0 );
    g_U764 = 10;
     /* WRITESCRIPTLOG */ sub_442( "CCB", "The mceCurrentCheckpoint is:", 0 );
    PRINTINT( g_U764 );
    PRINTNL();
    if (g_U2875[10] == 0)
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Saving MCE_BUSRAILSHOOTER01 checkpoint data.", 0 );
         /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_84431( ref l_U76, g_U764,  /* PLAYER_PED_ID */ sub_1098(), g_U2339[10], g_U2466[10], g_U2509[10], g_U2552[10], 0 );
    }
     /* P_START_SP_CHALLENGES */ sub_89029();
    return;
}

/* NIS_POST_SETUP */ void sub_83910(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1136(), 1, 0 );
        SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_1098(), 0 );
        if (bParam0)
        {
             /* P_MAX_RELOAD_WEAPONS */ sub_84008();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

/* P_MAX_RELOAD_WEAPONS */ void sub_84008()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1098(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1098(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP(  /* PLAYER_PED_ID */ sub_1098(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP(  /* PLAYER_PED_ID */ sub_1098(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

/* P_SAVE_PLAYER_DATA_CHECKPOINT */ void sub_84431(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

     /* WRITESCRIPTLOG */ sub_442( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
         /* WRITESCRIPTLOG */ sub_442( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
         /* START_NEW_LEVEL_CONTEXT */ sub_12780( iParam1 );
         /* CLOSE_OLD_LEVEL_CONTEXT */ sub_84722( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_85199( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_85199( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_85459( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_85199( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_85459( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_85459( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_85199( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_85459( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_85459( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_85459( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_85199( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_85459( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_85459( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_85459( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_85459( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
             /* P_PRINT_CHECKPOINT_DATA */ sub_87039( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U1, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
     /* WRITESCRIPTLOG */ sub_442( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

/* CLOSE_OLD_LEVEL_CONTEXT */ void sub_84722(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_9795( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
         /* WRITESCRIPTLOG */ sub_442( "TEH", "Ending context", 0 );
         /* WRITESCRIPTLOG */ sub_442( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

/* P_SAVE_WEAPON_ATTACHMENTS */ void sub_85199(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

/* F_WEAPONS_SAME_AMMO */ void sub_85459(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

/* P_PRINT_CHECKPOINT_DATA */ void sub_87039(int iParam0)
{
     /* WRITE_STRING */ sub_11615( "CHECKPOINT DATA" );
    PRINTSTRING( "---Position: " );
     /* WRITE_VECTOR */ sub_87127( iParam0->_fU4 );
    PRINTSTRING( "---Heading: " );
     /* WRITE_FLOAT */ sub_87204( iParam0->_fU16 );
    PRINTSTRING( "---fRelativeGameCamHeading: " );
     /* WRITE_FLOAT */ sub_87204( iParam0->_fU20 );
    PRINTSTRING( "---fRelativeGameCamPitch: " );
     /* WRITE_FLOAT */ sub_87204( iParam0->_fU24 );
    PRINTSTRING( "---nHealth: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU28 );
    PRINTSTRING( "---wtRightHolster: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU56 );
    PRINTSTRING( "---wtLeftHolster: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU60 );
    PRINTSTRING( "---wtRifleHolster: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU64 );
    PRINTSTRING( "---wtRightHand: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU68 );
    PRINTSTRING( "---wtLeftHand: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU72 );
    PRINTSTRING( "---nWeaponRightHolsterAmmo: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU76 );
    PRINTSTRING( "---nWeaponLeftHolsterAmmo: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU80 );
    PRINTSTRING( "---nWeaponRifleHolsterAmmo: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU84 );
    PRINTSTRING( "---nWeaponRightHandAmmo: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU88 );
    PRINTSTRING( "---nWeaponLeftHandAmmo: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU92 );
    PRINTSTRING( "---fAdrenaline: " );
     /* WRITE_FLOAT */ sub_87204( iParam0->_fU32 );
    PRINTSTRING( "---nPayneKillers: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU36 );
    PRINTSTRING( "---nHour: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU40 );
    PRINTSTRING( "---nMinute: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU44 );
    PRINTSTRING( "---fSweatAmount: " );
     /* WRITE_FLOAT */ sub_87204( iParam0->_fU136 );
    PRINTSTRING( "---bTimeFrozen: " );
     /* WRITE_BOOL */ sub_88074( iParam0->_fU140 );
    PRINTSTRING( "---checkpointIndex: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU52 );
     /* WRITE_STRING */ sub_11615( "---nRightHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU96 );
     /* WRITE_STRING */ sub_11615( "---nRightHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU100 );
     /* WRITE_STRING */ sub_11615( "---nLeftHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU104 );
     /* WRITE_STRING */ sub_11615( "---nLeftHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU108 );
     /* WRITE_STRING */ sub_11615( "---nRifleHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU112 );
     /* WRITE_STRING */ sub_11615( "---nRifleHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU116 );
     /* WRITE_STRING */ sub_11615( "---nRightHandAttachmentEnabled: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU120 );
     /* WRITE_STRING */ sub_11615( "---nRightHandAttachmentToggled: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU124 );
     /* WRITE_STRING */ sub_11615( "---nLeftHandAttachmentEnabled: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU128 );
     /* WRITE_STRING */ sub_11615( "---nLeftHandAttachmentToggled: " );
     /* WRITE_INT */ sub_87373( iParam0->_fU132 );
    PRINTSTRING( "[CHECKPOINT DATA SIZE]: " );
     /* WRITE_INT */ sub_87373( l_U1 );
    PRINTSTRING( "[CHECKPOINT DATA REF SIZE]: " );
     /* WRITE_INT */ sub_87373( 144 );
    return;
}

/* WRITE_VECTOR */ void sub_87127(unknown uParam0, unknown uParam1, unknown uParam2)
{
    PRINTVECTOR( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_FLOAT */ void sub_87204(unknown uParam0)
{
    PRINTFLOAT( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_INT */ void sub_87373(unknown uParam0)
{
    PRINTINT( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_BOOL */ void sub_88074(boolean bParam0)
{
    if (bParam0)
    {
        PRINTSTRING( "TRUE" );
    }
    else
    {
        PRINTSTRING( "FALSE" );
    }
    PRINTNL();
    return;
}

/* P_START_SP_CHALLENGES */ void sub_89029()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_START_SP_CHALLENGES", 0 );
     /* WRITESCRIPTLOG */ sub_442( "CCB", "Starting the Bus_Depot_Railshooter context...", 0 );
    START_CONTEXT( "Bus_Depot_Railshooter" );
    return;
}

/* P_HANDLE_SPAWN_RAIL_TUNNEL_ENTRANCE_VCPF */ void sub_89305()
{
    switch (l_U155)
    {
        case 0:
        if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2330, 13000.00000000 ))
        {
            l_U723 = 0;
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eTunnelEntranceSpawn - STATE_SPAWN_IDLE", 0 );
            l_U155 = 1;
        }
        break;
        case 1:
        if (l_U723 < 4)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Spawning piRailVCPFTunnelEntrance_:", 0 );
            PRINTINT( l_U723 );
            PRINTNL();
            l_U262[l_U723] =  /* CREATEPED */ sub_16736( ref l_U948[l_U723] );
             /* P_SETUP_RAIL_TUNNEL_ENTRANCE_VCPF */ sub_89616( ref l_U262, l_U723 );
            l_U723++;
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eTunnelEntranceSpawn - STATE_SPAWN_SETUP", 0 );
            l_U155 = 2;
        }
        break;
        case 2:
         /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_32217( ref l_U262, "piRailVCPFTunnelEntrance" );
         /* WRITESCRIPTLOG */ sub_442( "CCB", "eTunnelEntranceSpawn - STATE_SPAWN_COMPLETE", 0 );
        l_U155 = 3;
        break;
        case 3: break;
    }
    return;
}

/* P_SETUP_RAIL_TUNNEL_ENTRANCE_VCPF */ void sub_89616(unknown uParam0, int iParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^)[iParam1] )))
    {
        if (iParam1 == 0)
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting up aigRailVCPFTunnelEntrance AI group.", 0 );
             /* P_SETUP_AI_GROUP */ sub_30879( ref l_U216, 1056964608, 0 );
        }
         /* P_QUICK_ADD_PED_TO_GROUP */ sub_31275( (uParam0^)[iParam1], ref l_U216 );
         /* P_SET_PED_TEMPLATE_AND_RANGES */ sub_31670( ref (uParam0^)[iParam1], ref g_U2080, 5.00000000, 10.00000000 );
        if (iParam1 == 0)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        }
        else if (iParam1 == 1)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 0, 1, 0, 255 );
        }
        else if (iParam1 == 2)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
        }
        else if (iParam1 == 3)
        {
             /* F_GIVEPEDWEAPON */ sub_12006( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
        };;;;
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^)[iParam1], 1 );
        SET_PED_EMOTION_STATE( (uParam0^)[iParam1], 1 );
        SET_PED_ALERTNESS( (uParam0^)[iParam1], 2 );
        SET_PED_ACCURACY( (uParam0^)[iParam1], 31186664 );
        SET_PED_SEEING_RANGE( (uParam0^)[iParam1], 120.00000000, 75 );
        SET_PED_HEARING_RANGE( (uParam0^)[iParam1], 120.00000000 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 256, 0 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 1, 0 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^)[iParam1], 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^)[iParam1], 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^)[iParam1], 1 );
        TASK_STAND_STILL( (uParam0^)[iParam1], -1 );
    }
    return;
}

/* P_HANDLE_VIG_16_NIS */ void sub_90379()
{
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
        if (NOT (IS_PED_DEAD( g_U2595 )))
        {
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                switch (l_U165)
                {
                    case 0:
                    if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2330, 4000 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusVig16 - STATE_MIDSCENE_INIT", 0 );
                        if (NOT ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 230339392, ref g_U1272 )))
                        {
                             /* P_STREAMREQ_ISEQ_INSERT */ sub_90636( 230339392, ref g_U1272 );
                        }
                        if (NOT ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2330, ref g_U1474 )))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Loading the gnRailshooterBusPart1 vehicle recording.", 0 );
                             /* P_STREAMREQ_VEHICLE_RECORDING_INSERT */ sub_77077( g_U2330, ref g_U1474 );
                        }
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusVig16 - STATE_MIDSCENE_PRELOAD", 0 );
                        l_U165 = 1;
                    }
                    break;
                    case 1:
                    if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 230339392, ref g_U1272 ))
                    {
                        if (IS_ANIMATED_CAMERA_PLAYING())
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
                            CAMERA_ANIMATED_STOP( 3000, 0 );
                        }
                        if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 230339392, ref g_U1272 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Registering the S_BUS_VIG_16 ISS", 0 );
                            ISEQ_REGISTER_ENTITY( 230339392, "vig16_player",  /* PLAYER_PED_ID */ sub_1098(), 0 );
                            ISEQ_REGISTER_ENTITY( 230339392, "vig16_female", g_U2595, 0 );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The S_BUS_VIG_16 ISS entities could NOT be registered!!!", 0 );
                        }
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusVig16 - STATE_MIDSCENE_IDLE", 0 );
                        l_U165 = 5;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for S_BUS_VIG_16 ISS Animation to load...", 0 );
                    }
                    break;
                    case 5:
                    if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2330, 6775.00000000 ))
                    {
                        if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 230339392, ref g_U1272 ))
                        {
                            if (NOT (ISEQ_QUERY_STATE( 230339392, 3 )))
                            {
                                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Starting the S_BUS_VIG_16 ISS", 0 );
                                ISEQ_START( 230339392 );
                            }
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The S_BUS_VIG_16 ISS is NOT loaded!!!", 0 );
                        }
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusVig16 - STATE_MIDSCENE_01", 0 );
                        l_U165 = 6;
                    }
                    break;
                    case 6:
                     /* P_RAIL_BUS_DAMAGE_METER_OFF */ sub_53166();
                     /* NIS_PRE_SETUP */ sub_20593( 1, 0, 0, 1 );
                    TASK_CLEAR_LOOK_AT(  /* PLAYER_PED_ID */ sub_1098() );
                    DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                    ATTACH_PED_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, l_U1311, l_U1222, 0.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1314, l_U1223, 0.00000000, 0, 0, 0, 1 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera length is:", 0 );
                    PRINTINT( CAMERA_ANIMATED_LENGTH( "LEVEL_S_BUS_CP_06", "VIG_16_BUS_GIO_DRIVE2_CAM" ) );
                    PRINTNL();
                    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                    {
                        CAMERA_PLAY_ANIMATED_ATTACHED_VEHICLE_RELATIVE( "LEVEL_S_BUS_CP_06", "VIG_16_BUS_GIO_DRIVE2_CAM", g_U2918, 0, 0 );
                    }
                    SET_CAMERA_OVERRIDE( "RAIL_BUS_CAMERA_AIM", "RAIL_BUS_CAMERA_AIM", 0, 1, 1 );
                    SET_RAIL_RELATIVE_DIR( 2, 0 );
                    l_U518._fU12 = 1409;
                     /* RESETTIMER */ sub_2466( ref l_U518 );
                     /* STARTTIMER */ sub_1757( ref l_U518 );
                     /* P_HANDLE_IMAGEFX_VIG_17_BUS */ sub_94708();
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusVig16 - STATE_MIDSCENE_02", 0 );
                    l_U165 = 7;
                    break;
                    case 7:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U518 ))
                    {
                        if (ISEQ_QUERY_STATE( 230339392, 3 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Terminating the S_BUS_VIG_16 ISS.", 0 );
                            ISEQ_UNREGISTER_ENTITY( 230339392, "vig16_player" );
                            ISEQ_UNREGISTER_ENTITY( 230339392, "vig16_female" );
                            ISEQ_TERMINATE( 230339392 );
                             /* P_STREAMREQ_ISEQ_REMOVE */ sub_7159( 230339392, ref g_U1272 );
                        }
                        if ( /* F_STREAMREQ_ACTION_TREE_IS_ASSET_LOADED */ sub_15383( ref g_U2008, ref g_U1535 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting the animation node for the player to BUS_RAILSHOOTER_STANCE_RIGHT.", 0 );
                            PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1098(), "/Global/BUS_RAILSHOOTER/BUS_RAILSHOOTER_STANCE_RIGHT" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The s_bus_railshooter action tree is NOT loaded!!!", 0 );
                        }
                        if ( /* F_STREAMREQ_ACTION_TREE_IS_ASSET_LOADED */ sub_15383( ref g_U2024, ref g_U1535 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting the animation node for Gio to EVENT_01_FUEL_DEPOT_TIMELINE/04_Turn_right.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_17_OFELIABUS/EVENT_01_FUEL_DEPOT_TIMELINE/04_Turn_right" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The txtRailOfeliaBus action tree is NOT loaded!!!", 0 );
                        }
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusVig16 - STATE_MIDSCENE_POST_MIDSCENE", 0 );
                        l_U165 = 36;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
                        PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
                        PRINTNL();
                    }
                    break;
                    case 36:
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Attaching the player.", 0 );
                    DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                    ATTACH_PED_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, l_U1273, l_U1222, 0.00000000, 1, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Attaching Gio.", 0 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1276, l_U1223, 0.00000000, 1, 0, 0, 1 );
                     /* NIS_RETURN_TO_GAMEPLAY_CAM */ sub_27788( 0, 0, 0, 0.00000000, -5.00000000, 0 );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                     /* NIS_POST_SETUP */ sub_83910( 1, 1 );
                    if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1136() )))
                    {
                        SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_1136(), 1, 1 );
                    }
                     /* P_RAIL_BUS_DAMAGE_METER_ON */ sub_53652();
                    TOGGLE_DISPLAY_AMMO( 0 );
                    l_U142 = 0;
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Enabling the camera aim override...", 0 );
                    CAMERA_AIM_OVERRIDE( 1 );
                     /* CREATETIMER */ sub_1607( ref l_U437, 250, 1, 0 );
                     /* STARTTIMER */ sub_1757( ref l_U437 );
                     /* WRITESCRIPTLOG */ sub_442( "SP", "Setting fuel pumps as damagable...", 0 );
                    if ((DOES_OBJECT_EXIST( l_U302[2] )) == 1)
                    {
                        SET_OBJECT_PROOFS( l_U302[2], 0, 0, 0, 0, 0 );
                        SET_OBJECT_INVINCIBLE( l_U302[2], 0 );
                    }
                    if ((DOES_OBJECT_EXIST( l_U302[3] )) == 1)
                    {
                        SET_OBJECT_PROOFS( l_U302[3], 0, 0, 0, 0, 0 );
                        SET_OBJECT_INVINCIBLE( l_U302[3], 0 );
                    }
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusVig16 - STATE_MIDSCENE_COMPLETE", 0 );
                    l_U165 = 39;
                    break;
                    case 39: break;
                }
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "The viRailBus vehicle is NOT valid!!!", 0 );
            }
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "The piGiovanna ped is NOT valid!!!", 0 );
        }
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "The PLAYER_PED_ID ped is NOT valid!!!", 0 );
    }
    return;
}

/* P_STREAMREQ_ISEQ_INSERT */ void sub_90636(unknown uParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    int iVar12;

    if (ISEQ_DOES_EXIST( uParam0 ))
    {
        iVar12 =  /* F_STREAMREQ_ISEQ_IS_INDEX_AVAILABLE */ sub_90697( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
        if (iVar12 >= 0)
        {
            DISPLAYF( "[CCB] ### Found NULL array index: ###", 0 );
            PRINTINT( iVar12 );
            PRINTNL();
            ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
            DISPLAYF( "[CCB] ### Storing ISEQ: {} ###", 1, 1281, ref uVar4 );
            (uParam1^)[iVar12]._fU0 = uParam0;
            (uParam1^)[iVar12]._fU4 = 1;
             /* P_STREAMREQ_ISEQ_THREADID_SET_ID */ sub_90947( iVar12, uParam1, GET_ID_OF_THIS_THREAD() );
        }
    }
    else
    {
        SCRIPT_ASSERT( "[CCB] ### The eTempAssetName ISEQ is NOT valid!!! ###", 0 );
    }
    return;
}

/* F_STREAMREQ_ISEQ_IS_INDEX_AVAILABLE */ int sub_90697(int iParam0, unknown uParam1, unknown uParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    int Result;
    int iVar14;

    iVar14 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU4 == 1)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                DISPLAYF( "[CCB] ### The ISEQ is being requested: {} ###", 1, 1281, ref uVar5 );
                SCRIPT_ASSERT( "The ISEQ asset is currently being requested!!!", 0 );
                 /* P_STREAMREQ_ISEQ_THREADID_SET_ID */ sub_90947( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 2)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                DISPLAYF( "[CCB] ### The ISEQ is loading: {} ###", 1, 1281, ref uVar5 );
                SCRIPT_ASSERT( "The ISEQ asset is already loading!!!", 0 );
                 /* P_STREAMREQ_ISEQ_THREADID_SET_ID */ sub_90947( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 3)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                if ((uParam1^)[Result]._fU0 != 0)
                {
                    if ((ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 3 )) || (ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 2 )))
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        DISPLAYF( "[CCB] ### The ISEQ is already loaded: {} ###", 1, 1281, ref uVar5 );
                        DISPLAYF( "The ISEQ asset is already loaded!!!", 0 );
                         /* P_STREAMREQ_ISEQ_THREADID_SET_ID */ sub_90947( Result, uParam1, uParam2 );
                        return -1;
                    }
                    else if (ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 1 ))
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        DISPLAYF( "[CCB] ### The ISEQ is already loading: {} ###", 1, 1281, ref uVar5 );
                        SCRIPT_ASSERT( "The ISEQ asset is currently loading!!!", 0 );
                         /* P_STREAMREQ_ISEQ_THREADID_SET_ID */ sub_90947( Result, uParam1, uParam2 );
                        return -1;
                    }
                    else if (ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 6 ))
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        DISPLAYF( "[CCB] ### Re-requesting ISEQ: {} ###", 1, 1281, ref uVar5 );
                        SCRIPT_ASSERT( "The ISEQ status is LOADED but the asset is already TERMINATED!!!", 0 );
                        (uParam1^)[Result]._fU0 = 0;
                        (uParam1^)[Result]._fU4 = 0;
                        return Result;
                    }
                    else if ((ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 5 )) || (ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 4 )))
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        DISPLAYF( "[CCB] ### The ISEQ is being requested: {} ###", 1, 1281, ref uVar5 );
                        SCRIPT_ASSERT( "The ISEQ status is LOADED but the asset is already interrupted or shutting down!!!", 0 );
                        (uParam1^)[Result]._fU0 = 0;
                        (uParam1^)[Result]._fU4 = 0;
                         /* P_STREAMREQ_THREADID_RESET */ sub_4793( ref (uParam1^)[Result]._fU8 );
                        return Result;
                    }
                    else
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        DISPLAYF( "[CCB] ### The ISEQ is being requested: {} ###", 1, 1281, ref uVar5 );
                        SCRIPT_ASSERT( "The ISEQ asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                        (uParam1^)[Result]._fU0 = 0;
                        (uParam1^)[Result]._fU4 = 0;
                         /* P_STREAMREQ_THREADID_RESET */ sub_4793( ref (uParam1^)[Result]._fU8 );
                        return Result;
                    };;;;
                }
                else
                {
                    SCRIPT_ASSERT( "Trying to update the state of a DUMMY_SEQUENCE!!!", 0 );
                }
            }
        }
        else if ((uParam1^)[Result]._fU4 == 4)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                DISPLAYF( "[CCB] ### The ISEQ is being removed: {} ###", 1, 1281, ref uVar5 );
                SCRIPT_ASSERT( "The ISEQ asset is currently being removed!!!", 0 );
                 /* P_STREAMREQ_ISEQ_THREADID_SET_ID */ sub_90947( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 0)
        {
            iVar14 = Result;
        };;;;;
    }
    if (NOT (iVar14 == -1))
    {
        if (iParam0 != 0)
        {
            if ((ISEQ_QUERY_STATE( (uParam1^)[iVar14]._fU0, 3 )) || (ISEQ_QUERY_STATE( (uParam1^)[iVar14]._fU0, 2 )))
            {
                ISEQ_GET_NAME( 32, ref uVar5, iParam0 );
                DISPLAYF( "[CCB] ### The ISEQ is already loaded: {} ###", 1, 1281, ref uVar5 );
                SCRIPT_ASSERT( "The ISEQ asset is already loaded, but the asset status flag was not set!!!", 0 );
                DISPLAYF( "[CCB] ### Storing ISEQ: {} ###", 1, 1281, ref uVar5 );
                (uParam1^)[iVar14]._fU0 = iParam0;
                (uParam1^)[iVar14]._fU4 = 3;
                 /* P_STREAMREQ_ISEQ_THREADID_SET_ID */ sub_90947( iVar14, uParam1, uParam2 );
                return -1;
            }
            else
            {
                return iVar14;
            }
        }
        else
        {
            SCRIPT_ASSERT( "Trying to check if index is available for a DUMMY_SEQUENCE!!!", 0 );
        }
    }
    SCRIPT_ASSERT( "The ISEQ - STREAMREQ array is full!!!", 0 );
    return -1;
}

/* P_STREAMREQ_ISEQ_THREADID_SET_ID */ void sub_90947(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 =  /* F_STREAMREQ_THREADID_IS_INDEX_AVAILABLE_FOR_INSERT */ sub_42027( uParam2, ref (uParam1^)[uParam0]._fU8 );
    if (iVar5 >= 0)
    {
        DISPLAYF( "[CCB] ### Storing the THREADID: {} ###", 1, 513, uParam2 );
        (uParam1^)[uParam0]._fU8[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The ISEQ asset thread indices are NOT available!!!", 0 );
    }
    return;
}

/* P_HANDLE_IMAGEFX_VIG_17_BUS */ void sub_94708()
{
    PLAY_IMAGEFX( "FLICKER_VIBRATE_INTERLACE_01", 4, 0 );
    PLAY_IMAGEFX( "FLASH_WHITE", 4, 0 );
    return;
}

/* P_HANDLE_MID_11_NIS */ void sub_96527()
{
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
        if (NOT (IS_PED_DEAD( g_U2595 )))
        {
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                if ((l_U166 < 37) AND (l_U166 > 4))
                {
                     /* P_HANDLE_IMAGEFX */ sub_96639( ref l_U1583 );
                    if (l_U166 >= 8)
                    {
                        if ( /* ISTIMERDONE */ sub_1890( ref l_U536 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping Wall Scrape PFX.", 0 );
                            REMOVE_PARTICLE_FX_FROM_VEHICLE( g_U2918 );
                        }
                    }
                    if (l_U166 >= 5)
                    {
                        if (NOT l_U137)
                        {
                            if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2330, 20000 ))
                            {
                                l_U137 = 1;
                                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Locking player control...", 0 );
                                 /* NIS_PRE_SETUP */ sub_20593( 1, 0, 0, 0 );
                            }
                        }
                    }
                }
                switch (l_U166)
                {
                    case 0:
                    if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2330, 18000 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid11 - STATE_MIDSCENE_INIT", 0 );
                        if (NOT ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 2022386640, ref g_U1272 )))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Loading the S_BUS_MID_11 ISS.", 0 );
                             /* P_STREAMREQ_ISEQ_INSERT */ sub_90636( 2022386640, ref g_U1272 );
                        }
                        if (NOT ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2331, ref g_U1474 )))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Loading the gnRailshooterBusPart2 vehicle recording.", 0 );
                             /* P_STREAMREQ_VEHICLE_RECORDING_INSERT */ sub_77077( g_U2331, ref g_U1474 );
                        }
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid11 - STATE_MIDSCENE_PRELOAD", 0 );
                        l_U166 = 1;
                    }
                    break;
                    case 1:
                    if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 2022386640, ref g_U1272 ))
                    {
                         /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U680[0], 67.16638000, 140.63390000, -1.01562300, 13.46547000, -0.00002500, 88.77900000, 45.00000000 );
                         /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U680[1], 67.31000000, 140.64000000, -0.97000000, 11.46000000, 0.90000000, 85.69000000, 27.24000000 );
                         /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U680[2], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 40.00000000 );
                        ATTACH_CAM_TO_VEHICLE( l_U680[2], g_U2918, l_U1350, 1 );
                        POINT_CAM_AT_VEHICLE( l_U680[2], g_U2918, l_U1353, 1 );
                        if (IS_ANIMATED_CAMERA_PLAYING())
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
                            CAMERA_ANIMATED_STOP( 3000, 0 );
                        }
                        if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 2022386640, ref g_U1272 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Registering the S_BUS_MID_11 ISS", 0 );
                            ISEQ_REGISTER_ENTITY( 2022386640, "mid11_player",  /* PLAYER_PED_ID */ sub_1098(), 0 );
                            ISEQ_REGISTER_ENTITY( 2022386640, "mid11_female", g_U2595, 0 );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The S_BUS_MID_11 ISS is NOT loaded!!!", 0 );
                        }
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid11 - STATE_MIDSCENE_IDLE", 0 );
                        l_U166 = 5;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for S_BUS_VIG_16 ISS Animation to load...", 0 );
                    }
                    break;
                    case 5:
                    if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2330, l_U75 ))
                    {
                         /* P_INITIALIZE_IMAGEFX_VIG_18_BUS */ sub_98714();
                    }
                    if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2330, 20500.00000000 ))
                    {
                        if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 2022386640, ref g_U1272 ))
                        {
                            if (NOT (ISEQ_QUERY_STATE( 2022386640, 3 )))
                            {
                                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Starting the S_BUS_MID_11 ISS", 0 );
                                ISEQ_START( 2022386640 );
                            }
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The S_BUS_MID_11 ISS is NOT loaded!!!", 0 );
                        }
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid11 - STATE_MIDSCENE_01", 0 );
                        l_U166 = 6;
                    }
                    break;
                    case 6:
                     /* P_RAIL_BUS_DAMAGE_METER_OFF */ sub_53166();
                    TASK_CLEAR_LOOK_AT(  /* PLAYER_PED_ID */ sub_1098() );
                    DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                    ATTACH_PED_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, l_U1335, l_U1222, 90.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1338, l_U1235, 0.00000000, 0, 0, 0, 1 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera length is:", 0 );
                    PRINTINT( CAMERA_ANIMATED_LENGTH( "LEVEL_S_BUS_CP_06", "BUSRIDE_1_CAM" ) );
                    PRINTNL();
                    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                    {
                        CAMERA_PLAY_ANIMATED_ATTACHED_VEHICLE_RELATIVE( "LEVEL_S_BUS_CP_06", "BUSRIDE_1_CAM", g_U2918, 0, 0 );
                    }
                    l_U527._fU12 = 1139;
                     /* RESETTIMER */ sub_2466( ref l_U527 );
                     /* STARTTIMER */ sub_1757( ref l_U527 );
                     /* CLEANPEDARRAY */ sub_3913( ref l_U246 );
                     /* CLEANPEDARRAY */ sub_3913( ref l_U251 );
                     /* CLEANPEDARRAY */ sub_3913( ref l_U262 );
                     /* CLEANOBJECTARRAY */ sub_4238( ref l_U302 );
                     /* CLEANVEHICLEARRAY */ sub_4110( ref l_U287 );
                     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2128, ref g_U910 );
                     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2143, ref g_U910 );
                     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2144, ref g_U910 );
                     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2145, ref g_U910 );
                     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2146, ref g_U910 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid11 - STATE_MIDSCENE_02", 0 );
                    l_U166 = 7;
                    break;
                    case 7:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U527 ))
                    {
                         /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2330, 0.65000000, 21400.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
                        PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
                        PRINTNL();
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid11 - STATE_MIDSCENE_03", 0 );
                        l_U166 = 8;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
                        PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
                        PRINTNL();
                    }
                    break;
                    case 8:
                     /* WRITESCRIPTLOG */ sub_442( "GA", "Playing PFX BusDepot_Bus_WallScrape_S", 0 );
                    START_PARTICLE_FX_LOOPED_ON_VEHICLE( "BusDepot_Bus_WallScrape_S", g_U2918, l_U1356, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
                    SET_VEHICLE_EXTRA( g_U2918, 3, 1 );
                    SET_VEHICLE_EXTRA( g_U2918, 4, 1 );
                    SET_VEHICLE_EXTRA( g_U2918, 8, 1 );
                    SET_VEHICLE_EXTRA( g_U2918, 9, 0 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Particle FX - BusDepot_Windshield_S", 0 );
                    START_PARTICLE_FX_NON_LOOPED_ON_VEHICLE( "BusDepot_Windshield_S", g_U2918, l_U1320, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
                    PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
                    PRINTNL();
                     /* CAM_PLAY_STATIC_CAM */ sub_56320( ref l_U680[0] );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Starting camera shake 0.", 0 );
                    SHAKE_CAM( l_U680[0], "LARGE_EXPLOSION_SHAKE", 1.50000000 );
                    SET_PAD_SHAKE( 0, 2500, 64 );
                    l_U536._fU12 = 2200;
                     /* RESETTIMER */ sub_2466( ref l_U536 );
                     /* STARTTIMER */ sub_1757( ref l_U536 );
                    l_U527._fU12 = 150;
                     /* RESETTIMER */ sub_2466( ref l_U527 );
                     /* STARTTIMER */ sub_1757( ref l_U527 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid11 - STATE_MIDSCENE_04", 0 );
                    l_U166 = 9;
                    break;
                    case 9:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U527 ))
                    {
                         /* CAM_PLAY_INTERP_WITH_STATIC_CAMS */ sub_56926( ref l_U680[0], ref l_U680[1], 750, 1, 1 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Starting camera shake 1.", 0 );
                        SHAKE_CAM( l_U680[1], "HAND_SHAKE", 3.00000000 );
                        l_U527._fU12 = 850;
                         /* RESETTIMER */ sub_2466( ref l_U527 );
                         /* STARTTIMER */ sub_1757( ref l_U527 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid11 - STATE_MIDSCENE_05", 0 );
                        l_U166 = 10;
                    }
                    break;
                    case 10:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U527 ))
                    {
                         /* CAM_PLAY_STATIC_CAM */ sub_56320( ref l_U680[1] );
                        l_U527._fU12 = 700;
                         /* RESETTIMER */ sub_2466( ref l_U527 );
                         /* STARTTIMER */ sub_1757( ref l_U527 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid11 - STATE_MIDSCENE_06", 0 );
                        l_U166 = 11;
                    }
                    break;
                    case 11:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U527 ))
                    {
                        DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                        ATTACH_PED_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, l_U1359 - (vector( 0.10000000, 0.00000000, 0.00000000)), l_U1234, 0.00000000, 0, 0, 0, 1 );
                        SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                        DETACH_PED( g_U2595, 1 );
                        ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1341, l_U1236, 0.00000000, 0, 0, 0, 1 );
                        if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 2022386640, ref g_U1272 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting the animation node for the player to S_BUS_MID_11/SEQ_START/MAX/PART_02_MAX/PART2_ANIM_MAX.", 0 );
                            PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1098(), "/Global/S_BUS_MID_11/SEQ_START/MAX/PART_02_MAX/PART2_ANIM_MAX" );
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting the animation node for Giovanna to S_BUS_MID_11/SEQ_START/GIO/PART_02_GIO/PART2_ANIM_GIO.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_MID_11/SEQ_START/GIO/PART_02_GIO/PART2_ANIM_GIO" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The S_BUS_MID_11 ISS is NOT loaded!!!", 0 );
                        }
                        l_U527._fU12 = 200;
                         /* RESETTIMER */ sub_2466( ref l_U527 );
                         /* STARTTIMER */ sub_1757( ref l_U527 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid11 - STATE_MIDSCENE_07", 0 );
                        l_U166 = 12;
                    }
                    break;
                    case 12:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U527 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping shake cam 0...", 0 );
                        STOP_CAM_SHAKING( l_U680[0], 0 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping shake cam 1...", 0 );
                        STOP_CAM_SHAKING( l_U680[1], 0 );
                         /* CAM_PLAY_STATIC_CAM */ sub_56320( ref l_U680[2] );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Starting camera shake 2.", 0 );
                        SHAKE_CAM( l_U680[2], "HAND_SHAKE", 3.00000000 );
                        if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1136() )))
                        {
                            SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_1136(), 1, 0 );
                            SET_PED_DEFAULT_AIM_AT_COORD(  /* PLAYER_PED_ID */ sub_1098(), 109.54000000, 98.61000000, -1.61000000 );
                            TASK_AIM_GUN_AT_COORD(  /* PLAYER_PED_ID */ sub_1098(), 109.54000000, 98.61000000, -1.61000000, -1, 1 );
                        }
                        SET_CAMERA_OVERRIDE( "RIFLE_AIM_CAMERA_BUS_FRONT", "RIFLE_AIM_CAMERA_BUS_FRONT_AIM", 0, 1, 1 );
                        SET_RAIL_RELATIVE_DIR( 3, 0 );
                        l_U527._fU12 = 1399;
                         /* RESETTIMER */ sub_2466( ref l_U527 );
                         /* STARTTIMER */ sub_1757( ref l_U527 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid11 - STATE_MIDSCENE_08", 0 );
                        l_U166 = 13;
                    }
                    break;
                    case 13:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U527 ))
                    {
                        if (ISEQ_QUERY_STATE( 2022386640, 3 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Terminating the S_BUS_MID_11 ISS.", 0 );
                            ISEQ_UNREGISTER_ENTITY( 2022386640, "mid11_player" );
                            ISEQ_UNREGISTER_ENTITY( 2022386640, "mid11_female" );
                            ISEQ_TERMINATE( 2022386640 );
                             /* P_STREAMREQ_ISEQ_REMOVE */ sub_7159( 2022386640, ref g_U1272 );
                        }
                        if ( /* F_STREAMREQ_ACTION_TREE_IS_ASSET_LOADED */ sub_15383( ref g_U2008, ref g_U1535 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting the node to BUS_RAILSHOOTER_STANCE_FRONT.", 0 );
                            PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1098(), "/Global/BUS_RAILSHOOTER/BUS_RAILSHOOTER_STANCE_FRONT" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The s_bus_railshooter action tree is NOT loaded!!!", 0 );
                        }
                        if ( /* F_STREAMREQ_ACTION_TREE_IS_ASSET_LOADED */ sub_15383( ref g_U2024, ref g_U1535 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Gio's ISS node to S_BUS_17_OFELIABUS/EVENT_02_TUNNEL_TIMELINE/04_Driving", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_17_OFELIABUS/EVENT_02_TUNNEL_TIMELINE/04_Driving" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The txtRailOfeliaBus action tree is NOT loaded!!!", 0 );
                        }
                         /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2331, 0.63000000, 1500.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Enabling the camera aim override...", 0 );
                        CAMERA_AIM_OVERRIDE( 1 );
                        SET_FORCED_AIM_INTENTION_DIRECTION( 0.62271500, -0.78112200, -0.04553500 );
                        SET_FORCED_FORWARD_DIRECTION( 0.72233100, -0.69154700, 0.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid11 - STATE_MIDSCENE_POST_MIDSCENE", 0 );
                        l_U166 = 36;
                    }
                    break;
                    case 36:
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Attaching the player.", 0 );
                    DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                    ATTACH_PED_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, l_U1359, l_U1234, 0.00000000, 1, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Attaching Gio.", 0 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1276, l_U1223, 0, 1, 0, 0, 1 );
                     /* WRITESCRIPTLOG */ sub_442( "CO", "GAMMA_ZOOM_1", 0 );
                    PLAY_IMAGEFX( "GAMMA_ZOOM_1", 4, 1 );
                     /* P_START_RAIL_TUNNEL_VCPF */ sub_103698();
                     /* P_START_RAIL_TUNNEL_EXIT_VCPF */ sub_104358();
                    l_U142 = 0;
                     /* CREATETIMER */ sub_1607( ref l_U437, 250, 1, 0 );
                     /* STARTTIMER */ sub_1757( ref l_U437 );
                     /* NIS_RETURN_TO_GAMEPLAY_CAM */ sub_27788( 0, 0, 0, -8.25000000, -3.00000000, 0 );
                     /* NIS_POST_SETUP */ sub_83910( 1, 1 );
                     /* P_RAIL_BUS_DAMAGE_METER_ON */ sub_53652();
                    TOGGLE_DISPLAY_AMMO( 0 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping shake cam 2...", 0 );
                    STOP_CAM_SHAKING( l_U680[2], 0 );
                     /* CAM_DESTROY_CAMERA_INDEX_ARRAY */ sub_4385( ref l_U680 );
                    if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2330, ref g_U1474 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Unloading the gnRailshooterBusPart1 vehicle recording.", 0 );
                         /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2330, ref g_U1474 );
                    }
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eCheckpoint - STATE_CHECKPOINT_RAILSHOOTER_02", 0 );
                    l_U145 = 12;
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid11 - STATE_MIDSCENE_COMPLETE", 0 );
                    l_U166 = 39;
                    break;
                    case 39: break;
                }
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "The viRailBus vehicle is NOT valid!!!", 0 );
            }
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "The piGiovanna ped is NOT valid!!!", 0 );
        }
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "The PLAYER_PED_ID ped is NOT valid!!!", 0 );
    }
    return;
}

/* P_HANDLE_IMAGEFX */ void sub_96639(unknown uParam0)
{
    int I;
    int J;

    switch (l_U72)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_442( "CO", "P_HANDLE_IMAGEFX", 0 );
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (uParam0^)[I]._fU32)
            {
                 /* CREATETIMER */ sub_1607( ref (uParam0^)[I]._fU36, (uParam0^)[I]._fU12, 1, 0 );
                 /* STARTTIMER */ sub_1757( ref (uParam0^)[I]._fU36 );
                if ((uParam0^)[I]._fU20 > 0)
                {
                    I += (uParam0^)[I]._fU20;
                }
            }
        }
        l_U72 = 1;
        break;
        case 1:
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if ( /* ISTIMERDONE */ sub_1890( ref (uParam0^)[I]._fU36 ))
            {
                (uParam0^)[I]._fU0 = PLAY_IMAGEFX( (uParam0^)[I]._fU4, (uParam0^)[I]._fU8, (uParam0^)[I]._fU28 );
                if ((uParam0^)[I]._fU16 > 0)
                {
                     /* CREATETIMER */ sub_1607( ref (uParam0^)[I]._fU72, (uParam0^)[I]._fU16, 1, 0 );
                     /* STARTTIMER */ sub_1757( ref (uParam0^)[I]._fU72 );
                }
                if ((uParam0^)[I]._fU20 > 0)
                {
                    for ( J = I + 1; J <= (I + (uParam0^)[I]._fU20); J++ )
                    {
                        PRINTSTRING( "******* [CO] ***** STARTING CHILD FOR index : " );
                        PRINTINT( J );
                        PRINTNL();
                        (uParam0^)[J]._fU0 = PLAY_IMAGEFX( (uParam0^)[J]._fU4, (uParam0^)[J]._fU8, (uParam0^)[I]._fU28 );
                        if ((uParam0^)[J]._fU16 > 0)
                        {
                             /* CREATETIMER */ sub_1607( ref (uParam0^)[J]._fU72, (uParam0^)[J]._fU16, 1, 0 );
                             /* STARTTIMER */ sub_1757( ref (uParam0^)[J]._fU72 );
                        }
                    }
                    I += (uParam0^)[I]._fU20;
                }
            }
            if ( /* ISTIMERDONE */ sub_1890( ref (uParam0^)[I]._fU72 ))
            {
                STOP_IMAGEFX( (uParam0^)[I]._fU0, (uParam0^)[I]._fU24 );
                (uParam0^)[I]._fU32 = 1;
                if ((uParam0^)[I]._fU20 > 0)
                {
                    if ((uParam0^)[I]._fU20 == 1)
                    {
                        STOP_IMAGEFX( (uParam0^)[I + 1]._fU0, (uParam0^)[I + 1]._fU24 );
                        (uParam0^)[I + 1]._fU32 = 1;
                    }
                    else
                    {
                        for ( J = I + 1; J <= (uParam0^)[I]._fU20; J++ )
                        {
                            STOP_IMAGEFX( (uParam0^)[J]._fU0, (uParam0^)[J]._fU24 );
                            (uParam0^)[J]._fU32 = 1;
                        }
                    }
                    I += (uParam0^)[I]._fU20;
                }
            }
        }
        break;
    }
    return;
}

/* P_INITIALIZE_IMAGEFX_VIG_18_BUS */ void sub_98714()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_INITIALIZE_IMAGEFX_VIG_18_BUS", 0 );
     /* P_INIT_IMAGEFX */ sub_98808( ref l_U1583 );
    l_U1583[0]._fU4 = "GAMMA_ZOOM_1";
    l_U1583[0]._fU12 = 0;
    l_U1583[0]._fU20 = 1;
    l_U1583[0]._fU8 = 4;
    l_U1583[0]._fU32 = 0;
    l_U1583[1]._fU4 = "FLASH_WHITE";
    l_U1583[1]._fU12 = 0;
    l_U1583[1]._fU8 = 4;
    l_U1583[1]._fU32 = 0;
    l_U1583[2]._fU4 = "FLASH_WHITE";
    l_U1583[2]._fU12 = 700;
    l_U1583[2]._fU8 = 4;
    l_U1583[2]._fU32 = 0;
    l_U1583[3]._fU4 = "GAMMA_ZOOM_1";
    l_U1583[3]._fU12 = 1000;
    l_U1583[3]._fU8 = 4;
    l_U1583[3]._fU32 = 0;
    l_U1583[4]._fU4 = "TRIPLE_MOVE_RIGHT_COLOR_SPLIT6";
    l_U1583[4]._fU12 = 1800;
    l_U1583[4]._fU16 = 700;
    l_U1583[4]._fU24 = 1;
    l_U1583[4]._fU8 = 4;
    l_U1583[4]._fU32 = 0;
    l_U1583[5]._fU4 = "INTERLACE_LIGHT";
    l_U1583[5]._fU12 = 2500;
    l_U1583[5]._fU8 = 4;
    l_U1583[5]._fU32 = 0;
    l_U1583[6]._fU4 = "TRIPLE_MOVE_RIGHT_COLOR_SPLIT5";
    l_U1583[6]._fU12 = 2750;
    l_U1583[6]._fU8 = 4;
    l_U1583[6]._fU32 = 0;
    l_U72 = 0;
    return;
}

/* P_INIT_IMAGEFX */ void sub_98808(unknown uParam0)
{
    int I;

     /* WRITESCRIPTLOG */ sub_442( "CO", "P_INIT_IMAGEFX", 0 );
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        (uParam0^)[I]._fU4 = "";
        (uParam0^)[I]._fU12 = 0;
        (uParam0^)[I]._fU16 = 0;
        (uParam0^)[I]._fU20 = 0;
        (uParam0^)[I]._fU24 = 0;
        (uParam0^)[I]._fU28 = 0;
        (uParam0^)[I]._fU32 = 1;
    }
    return;
}

/* P_START_RAIL_TUNNEL_VCPF */ void sub_103698()
{
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "P_START_RAIL_TUNNEL_VCPF", 0 );
        if (NOT (IS_PED_DEAD( l_U267[0] )))
        {
            REGISTER_TARGET( l_U267[0],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U267[0],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 101.13000000, 107.23000000, -1.70000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U267[0], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U267[1] )))
        {
            REGISTER_TARGET( l_U267[1],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U267[1],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 110.49000000, 104.55000000, -1.70000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U267[1], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U267[2] )))
        {
            REGISTER_TARGET( l_U267[2],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U267[2],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 108.12000000, 101.21000000, -1.70000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U267[2], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
    }
    return;
}

/* P_START_RAIL_TUNNEL_EXIT_VCPF */ void sub_104358()
{
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "P_START_RAIL_TUNNEL_EXIT_VCPF start", 0 );
        if (NOT (IS_PED_DEAD( l_U271[0] )))
        {
            REGISTER_TARGET( l_U271[0],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U271[0],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U736 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_TURN_PED_TO_FACE_COORD( 0, l_U1323, 1, 1085905306 );
            TASK_AIM_GUN_AT_COORD( 0, l_U1323, 1000, 1 );
            TASK_SHOOT_AT_COORD( 0, l_U1323, -1, 1566631136, 1, 1 );
            TASK_AIM_GUN_AT_PED( 0,  /* PLAYER_PED_ID */ sub_1098(), -1, 0 );
            CLOSE_SEQUENCE_TASK( l_U736 );
            TASK_PERFORM_SEQUENCE( l_U271[0], l_U736 );
            CLEAR_SEQUENCE_TASK( l_U736 );
        }
        if (NOT (IS_PED_DEAD( l_U271[1] )))
        {
            REGISTER_TARGET( l_U271[1],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U271[1],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U271[1], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U271[2] )))
        {
            REGISTER_TARGET( l_U271[2],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U271[2],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U271[2], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
    }
    return;
}

/* P_RAIL_SMALL_COLLISION_START */ void sub_105879()
{
     /* WRITESCRIPTLOG */ sub_442( "GA", "P_RAIL_SMALL_COLLISION_START start", 0 );
    SHAKE_GAMEPLAY_CAM( "SMALL_EXPLOSION_SHAKE", 0.30000000 );
    SET_PAD_SHAKE( 0, l_U464._fU12, 64 );
     /* RESETTIMER */ sub_2466( ref l_U464 );
     /* STARTTIMER */ sub_1757( ref l_U464 );
     /* WRITESCRIPTLOG */ sub_442( "GA", "P_RAIL_SMALL_COLLISION_START end", 0 );
    return;
}

/* P_START_RAIL_FUEL_VCPF */ void sub_106299()
{
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "P_START_RAIL_FUEL_VCPF", 0 );
        if (NOT (IS_PED_DEAD( l_U251[0] )))
        {
            REGISTER_TARGET( l_U251[0],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U251[0],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_FOLLOW_NAV_MESH_TO_COORD( 0, -32.87000000, 184.39000000, 0.10000000, 3, -1, 1048576000, 0, 0 );
            TASK_SHOOT_AT_PED( 0,  /* PLAYER_PED_ID */ sub_1098(), 2000, 0, 0, 0, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[0], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U251[1] )))
        {
            REGISTER_TARGET( l_U251[1],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U251[1],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -28.03000000, 179.11000000, 0.10000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[1], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U251[2] )))
        {
            REGISTER_TARGET( l_U251[2],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U251[2],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -23.07000000, 184.74000000, 0.10000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[2], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U251[3] )))
        {
            REGISTER_TARGET( l_U251[3],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U251[3],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -14.84000000, 181.82000000, 0.10000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[3], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U251[4] )))
        {
            REGISTER_TARGET( l_U251[4],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U251[4],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -10.81000000, 181.07000000, 0.10000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[4], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U251[5] )))
        {
            REGISTER_TARGET( l_U251[5],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U251[5],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -9.87000000, 176.19000000, 0.30000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[5], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U251[6] )))
        {
            REGISTER_TARGET( l_U251[6],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U251[6],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -19.51000000, 177.41000000, 0.10000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[6], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U251[7] )))
        {
            REGISTER_TARGET( l_U251[7],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U251[7],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -18.63000000, 181.38000000, 0.10000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[7], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U251[8] )))
        {
            REGISTER_TARGET( l_U251[8],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U251[8],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -21.86000000, 180.23000000, 0.10000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[8], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U251[9] )))
        {
            REGISTER_TARGET( l_U251[9],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U251[9],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -5.96000000, 180.70000000, 0.10000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[9], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
    }
    return;
}

/* P_START_RAIL_TUNNEL_ENTRANCE_VCPF */ void sub_108321()
{
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "P_START_RAIL_TUNNEL_ENTRANCE_VCPF", 0 );
        if (NOT (IS_PED_DEAD( l_U262[0] )))
        {
            REGISTER_TARGET( l_U262[0],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U262[0],  /* PLAYER_PED_ID */ sub_1098() );
            SET_PED_PATH_CAN_AVOID_DYNAMIC_OBJECTS( l_U262[0], 0 );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U262[0], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U262[1] )))
        {
            REGISTER_TARGET( l_U262[1],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U262[1],  /* PLAYER_PED_ID */ sub_1098() );
            SET_PED_PATH_CAN_AVOID_DYNAMIC_OBJECTS( l_U262[1], 0 );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U262[1], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U262[2] )))
        {
            REGISTER_TARGET( l_U262[2],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U262[2],  /* PLAYER_PED_ID */ sub_1098() );
            SET_PED_PATH_CAN_AVOID_DYNAMIC_OBJECTS( l_U262[2], 0 );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_FOLLOW_NAV_MESH_TO_COORD( 0, 26.73000000, 140.57000000, 0.10000000, 3, -1, 1048576000, 0, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U262[2], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U262[3] )))
        {
            REGISTER_TARGET( l_U262[3],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U262[3],  /* PLAYER_PED_ID */ sub_1098() );
            SET_PED_PATH_CAN_AVOID_DYNAMIC_OBJECTS( l_U262[3], 0 );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_FOLLOW_NAV_MESH_TO_COORD( 0, 23.80000000, 142.12000000, 0.10000000, 3, -1, 1048576000, 0, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U262[3], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
    }
    return;
}

/* P_FUEL_PUMP_LEFT_EXPLODE */ void sub_109367()
{
     /* WRITESCRIPTLOG */ sub_442( "ML", "P_FUEL_PUMP_LEFT_EXPLODE", 0 );
    SET_PAD_SHAKE( 0, 500, 256 );
    SHAKE_GAMEPLAY_CAM( "SMALL_EXPLOSION_SHAKE", 0.20000000 );
    SHAKE_GAMEPLAY_CAM( "VIBRATE_SHAKE", 0.40000000 );
    return;
}

/* P_SWAP_FUEL_PUMP_ISLAND */ void sub_109539()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_SWAP_FUEL_PUMP_ISLAND", 0 );
     /* CLEANOBJECT */ sub_4290( l_U302[0] );
    l_U302[0] =  /* CREATEOBJECTNOOFFSET */ sub_29431( l_U176[2], l_U1570[0], 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U302[0] ))
    {
        FREEZE_OBJECT_POSITION( l_U302[0], 1 );
    }
    return;
}

/* P_FUEL_PUMP_RIGHT_EXPLODE */ void sub_109761()
{
     /* WRITESCRIPTLOG */ sub_442( "ML", "P_FUEL_PUMP_RIGHT_EXPLODE", 0 );
    SET_PAD_SHAKE( 0, 500, 256 );
    SHAKE_GAMEPLAY_CAM( "SMALL_EXPLOSION_SHAKE", 0.20000000 );
    SHAKE_GAMEPLAY_CAM( "VIBRATE_SHAKE", 0.40000000 );
    return;
}

/* P_SWAP_FUEL_PUMP_ISLAND2 */ void sub_109941()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_SWAP_FUEL_PUMP_ISLAND2", 0 );
     /* CLEANOBJECT */ sub_4290( l_U302[1] );
    l_U302[1] =  /* CREATEOBJECTNOOFFSET */ sub_29431( l_U176[4], l_U1570[1], 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U302[1] ))
    {
        FREEZE_OBJECT_POSITION( l_U302[1], 1 );
    }
    return;
}

/* P_HANDLE_VIG_19_NIS */ void sub_110488()
{
    unknown uVar2;

    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
        if (NOT (IS_PED_DEAD( g_U2595 )))
        {
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                if ((l_U167 < 37) AND (l_U167 > 4))
                {
                     /* P_HANDLE_IMAGEFX */ sub_96639( ref l_U1773 );
                }
                switch (l_U167)
                {
                    case 0:
                    if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2331, 2190.00000000 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusVig19 - STATE_MIDSCENE_INIT", 0 );
                        if (NOT ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( -384669200, ref g_U1272 )))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Loading the S_BUS_VIG_19 ISS.", 0 );
                             /* P_STREAMREQ_ISEQ_INSERT */ sub_90636( -384669200, ref g_U1272 );
                        }
                        if (NOT ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2331, ref g_U1474 )))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Loading the gnRailshooterBusPart2 vehicle recording.", 0 );
                             /* P_STREAMREQ_VEHICLE_RECORDING_INSERT */ sub_77077( g_U2331, ref g_U1474 );
                        }
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusVig19 - STATE_MIDSCENE_PRELOAD", 0 );
                        l_U167 = 1;
                    }
                    break;
                    case 1:
                    if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( -384669200, ref g_U1272 ))
                    {
                        if (NOT (IS_PED_DEAD( l_U271[0] )))
                        {
                            if (IS_ANIMATED_CAMERA_PLAYING())
                            {
                                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
                                CAMERA_ANIMATED_STOP( 3000, 0 );
                            }
                             /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U684[0], l_U1374, l_U1377, l_U1240 );
                             /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U684[1], l_U1380, l_U1383, l_U1241 );
                             /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U684[2], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, l_U1239 );
                            ATTACH_CAM_TO_VEHICLE( l_U684[2], g_U2918, l_U1368, 1 );
                            POINT_CAM_AT_VEHICLE( l_U684[2], g_U2918, l_U1371, 1 );
                            if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( -384669200, ref g_U1272 ))
                            {
                                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Registering the PLAYER ped to the S_BUS_VIG_19 ISEQ...", 0 );
                                ISEQ_REGISTER_ENTITY( -384669200, "vig19_player",  /* PLAYER_PED_ID */ sub_1098(), 0 );
                                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Registering the piGiovanna ped to the S_BUS_VIG_19 ISEQ...", 0 );
                                ISEQ_REGISTER_ENTITY( -384669200, "vig19_female", g_U2595, 0 );
                                if (NOT (IS_PED_DEAD( l_U271[0] )))
                                {
                                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Registering the piRailVCPFTunnelExit_0 ped to the S_BUS_VIG_19 ISEQ...", 0 );
                                    ISEQ_REGISTER_ENTITY( -384669200, "vig19_enemy", l_U271[0], 0 );
                                }
                                else
                                {
                                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The piRailVCPFTunnelExit_0 ped is NOT valid!!!", 0 );
                                }
                            }
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusVig19 - STATE_MIDSCENE_IDLE", 0 );
                            l_U167 = 5;
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The piRailVCPFTunnelExit_0 ped is NOT valid!!!", 0 );
                        }
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for S_BUS_VIG_19 ISS Animation to load...", 0 );
                    }
                    break;
                    case 5:
                    if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2331, 4765.00000000 ))
                    {
                        if (NOT (ISEQ_QUERY_STATE( -384669200, 3 )))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Starting the S_BUS_VIG_19 ISS", 0 );
                            ISEQ_START( -384669200 );
                        }
                         /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2331, 0.63000000, 3900.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusVig19 - STATE_MIDSCENE_01", 0 );
                        l_U167 = 6;
                    }
                    break;
                    case 6:
                     /* P_RAIL_BUS_DAMAGE_METER_OFF */ sub_53166();
                     /* NIS_PRE_SETUP */ sub_20593( 1, 0, 0, 1 );
                     /* P_INITIALIZE_IMAGEFX_VIG_19_BUS */ sub_112102();
                    TASK_CLEAR_LOOK_AT(  /* PLAYER_PED_ID */ sub_1098() );
                    DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                    ATTACH_PED_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, l_U1362, l_U1237, 0.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1365, l_U1238, 0.00000000, 0, 0, 0, 1 );
                    if (DOES_PED_EXIST( l_U271[0] ))
                    {
                        if (NOT (IS_PED_DEAD( l_U271[0] )))
                        {
                             /* TELEPORTPED */ sub_14038( l_U271[0], l_U1386, l_U1242 );
                        }
                    }
                    if (DOES_PED_EXIST( l_U271[1] ))
                    {
                        if (NOT (IS_PED_DEAD( l_U271[1] )))
                        {
                            TASK_SHOOT_AT_COORD( l_U271[1], 126.21000000, 104.04000000, 0.00000000, 4000, 0, 0, 0 );
                        }
                    }
                    if (DOES_PED_EXIST( l_U271[2] ))
                    {
                        if (NOT (IS_PED_DEAD( l_U271[2] )))
                        {
                            TASK_SHOOT_AT_COORD( l_U271[2], 125.15000000, 97.44000000, 0.00000000, 4000, 0, 0, 0 );
                        }
                    }
                    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                    {
                        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U2918 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Pausing the viRailBus vehicle recording.", 0 );
                            PAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
                        }
                    }
                     /* CLEANPEDARRAY */ sub_3913( ref l_U267 );
                     /* CAM_PLAY_INTERP_WITH_STATIC_CAMS */ sub_56926( ref l_U684[0], ref l_U684[1], 2250, l_U731, l_U732 );
                    l_U554._fU12 = 1749;
                     /* RESETTIMER */ sub_2466( ref l_U554 );
                     /* STARTTIMER */ sub_1757( ref l_U554 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusVig19 - STATE_MIDSCENE_02", 0 );
                    l_U167 = 7;
                    break;
                    case 7:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U554 ))
                    {
                        if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( -384669200, ref g_U1272 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting the Max's node to S_BUS_VIG_19/SEQ_START/MAX/MAX_ANIM.", 0 );
                            PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1098(), "/Global/S_BUS_VIG_19/SEQ_START/MAX/MAX_ANIM" );
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Gio's ISS node to S_BUS_VIG_19/SEQ_START/GIOVANNA/GIOVANNA_ANIM", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_VIG_19/SEQ_START/GIOVANNA/GIOVANNA_ANIM" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The S_BUS_VIG_19 ISS is NOT loaded!!!", 0 );
                        }
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusVig19 - STATE_MIDSCENE_03", 0 );
                        l_U167 = 8;
                    }
                    break;
                    case 8:
                    if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U2918 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The vehicle recording is stopped.", 0 );
                    }
                    if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2331, ref g_U1474 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Resuming the vehicle recording.", 0 );
                        UNPAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
                    }
                    if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1136() )))
                    {
                        SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_1136(), 1, 0 );
                        SET_PED_DEFAULT_AIM_AT_COORD(  /* PLAYER_PED_ID */ sub_1098(), 166.27000000, 90.50000000, 0.01000000 );
                        TASK_AIM_GUN_AT_COORD(  /* PLAYER_PED_ID */ sub_1098(), 166.27000000, 90.50000000, 0.01000000, -1, 1 );
                    }
                    SET_CAMERA_OVERRIDE( "RIFLE_AIM_CAMERA_BUS_FRONT", "RIFLE_AIM_CAMERA_BUS_FRONT_AIM", 0, 1, 1 );
                    SET_RAIL_RELATIVE_DIR( 3, 0 );
                    if (NOT (IS_PED_DEAD( l_U271[0] )))
                    {
                        OPEN_SEQUENCE_TASK( ref uVar2 );
                        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
                        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
                        {
                            TASK_AIM_GUN_AT_PED( 0,  /* PLAYER_PED_ID */ sub_1098(), -1, 1 );
                        }
                        CLOSE_SEQUENCE_TASK( uVar2 );
                        TASK_PERFORM_SEQUENCE( l_U271[0], uVar2 );
                        CLEAR_SEQUENCE_TASK( uVar2 );
                    }
                    if (NOT (IS_PED_DEAD( l_U271[1] )))
                    {
                        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U271[1], 0 );
                        TASK_COMBAT_PED( l_U271[1],  /* PLAYER_PED_ID */ sub_1098() );
                    }
                    if (NOT (IS_PED_DEAD( l_U271[2] )))
                    {
                        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U271[2], 0 );
                        TASK_COMBAT_PED( l_U271[2],  /* PLAYER_PED_ID */ sub_1098() );
                    }
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera length is:", 0 );
                    PRINTINT( CAMERA_ANIMATED_LENGTH( "LEVEL_S_BUS_CP_06", "VIG_19_BUS_MAX_GIO_SEE_CP_CAM" ) );
                    PRINTNL();
                    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
                    {
                        CAMERA_PLAY_ANIMATED_ATTACHED_PED_RELATIVE( "LEVEL_S_BUS_CP_06", "VIG_19_BUS_MAX_GIO_SEE_CP_CAM",  /* PLAYER_PED_ID */ sub_1098(), 0, 0 );
                    }
                    l_U554._fU12 = 2129;
                     /* RESETTIMER */ sub_2466( ref l_U554 );
                     /* STARTTIMER */ sub_1757( ref l_U554 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusVig19 - STATE_MIDSCENE_04", 0 );
                    l_U167 = 9;
                    break;
                    case 9:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U554 ))
                    {
                        if (ISEQ_QUERY_STATE( -384669200, 3 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Terminating the S_BUS_VIG_19 ISS.", 0 );
                            ISEQ_UNREGISTER_ENTITY( -384669200, "vig19_player" );
                            ISEQ_UNREGISTER_ENTITY( -384669200, "vig19_female" );
                            ISEQ_UNREGISTER_ENTITY( -384669200, "vig19_enemy" );
                            ISEQ_TERMINATE( -384669200 );
                             /* P_STREAMREQ_ISEQ_REMOVE */ sub_7159( -384669200, ref g_U1272 );
                        }
                        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
                        {
                            if ( /* F_STREAMREQ_ACTION_TREE_IS_ASSET_LOADED */ sub_15383( ref g_U2008, ref g_U1535 ))
                            {
                                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting the node to BUS_RAILSHOOTER_STANCE_FRONT.", 0 );
                                PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1098(), "/Global/BUS_RAILSHOOTER/BUS_RAILSHOOTER_STANCE_FRONT" );
                            }
                            else
                            {
                                 /* WRITESCRIPTLOG */ sub_442( "CCB", "The s_bus_railshooter action tree is NOT loaded!!!", 0 );
                            }
                        }
                        if ( /* F_STREAMREQ_ACTION_TREE_IS_ASSET_LOADED */ sub_15383( ref g_U2024, ref g_U1535 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Gio's ISS node to S_BUS_17_OFELIABUS/EVENT_02_TUNNEL_TIMELINE/04_Driving", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_17_OFELIABUS/EVENT_02_TUNNEL_TIMELINE/04_Driving" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The txtRailOfeliaBus action tree is NOT loaded!!!", 0 );
                        }
                         /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2331, 0.63000000, 5430.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Enabling the camera aim override...", 0 );
                        CAMERA_AIM_OVERRIDE( 1 );
                        SET_FORCED_AIM_INTENTION_DIRECTION( 0.97115200, -0.23367800, -0.04752300 );
                        SET_FORCED_FORWARD_DIRECTION( 0.85915100, -0.51172200, 0.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusVig19 - STATE_MIDSCENE_POST_MIDSCENE", 0 );
                        l_U167 = 36;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
                        PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
                        PRINTNL();
                    }
                    break;
                    case 36:
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Attaching the player.", 0 );
                    DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                    ATTACH_PED_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, l_U1359, l_U1234, 0.00000000, 1, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Attaching Gio.", 0 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1276, l_U1223, 0, 1, 0, 0, 1 );
                    if (((IS_PED_DEAD( l_U271[0] )) == 0) AND ((DOES_PED_EXIST( l_U271[0] )) == 1))
                    {
                         /* TELEPORTPED */ sub_14038( l_U271[0], l_U1386, l_U1242 );
                    }
                    STOP_CAM_SHAKING( l_U684[2], 0 );
                     /* NIS_RETURN_TO_GAMEPLAY_CAM */ sub_27788( 0, 0, 0, 18.00000000, -5.00000000, 0 );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                    SET_WIDESCREEN_BORDERS( 0, 500 );
                    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
                    {
                        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1136(), 1, 0 );
                         /* P_MAX_RELOAD_WEAPONS */ sub_84008();
                    }
                    PULSE_CROSSHAIR( 1 );
                    DESTROY_ALL_CAMS();
                    TOGGLE_DISPLAY_AMMO( 0 );
                    l_U142 = 0;
                     /* CREATETIMER */ sub_1607( ref l_U437, 250, 1, 0 );
                     /* STARTTIMER */ sub_1757( ref l_U437 );
                     /* CAM_DESTROY_CAMERA_INDEX_ARRAY */ sub_4385( ref l_U684 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusVig19 - STATE_MIDSCENE_COMPLETE", 0 );
                    l_U167 = 39;
                    break;
                    case 39: break;
                }
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "The viRailBus vehicle is NOT valid!!!", 0 );
            }
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "The piGiovanna ped is NOT valid!!!", 0 );
        }
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "The PLAYER_PED_ID ped is NOT valid!!!", 0 );
    }
    return;
}

/* P_INITIALIZE_IMAGEFX_VIG_19_BUS */ void sub_112102()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_INITIALIZE_IMAGEFX_VIG_19_BUS", 0 );
     /* P_INIT_IMAGEFX */ sub_98808( ref l_U1773 );
    l_U1773[0]._fU4 = "DOUBLE_TINT_BLUE_FLASH";
    l_U1773[0]._fU12 = 0;
    l_U1773[0]._fU8 = 4;
    l_U1773[0]._fU32 = 0;
    l_U1773[1]._fU4 = "TRIPLE_IMAGE_BLUR_DOWN_LEFT";
    l_U1773[1]._fU12 = 450;
    l_U1773[1]._fU16 = 1150;
    l_U1773[1]._fU24 = 1;
    l_U1773[1]._fU8 = 4;
    l_U1773[1]._fU32 = 0;
    l_U72 = 0;
    return;
}

/* P_HANDLE_ROCKET_EVENT */ void sub_115920()
{
    if (NOT l_U133)
    {
        if (IS_EXPLOSION_IN_SPHERE( 2, l_U1323, 20.00000000 ))
        {
            l_U133 = 1;
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Rocket has exploded...", 0 );
             /* P_RAIL_SMALL_COLLISION_START */ sub_105879();
             /* STARTTIMER */ sub_1757( ref l_U563 );
        }
    }
    if (l_U172 >= 11)
    {
        if (NOT l_U136)
        {
            if ((IS_BULLET_CAMERA_ACTIVE()) || (IS_BULLET_CAMERA_RUNNING( 0 )))
            {
                if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                {
                    l_U136 = 1;
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Pausing the player's bus during bullet cam on rocket ped.", 0 );
                    PAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
                }
            }
        }
        if ( /* ISTIMERDONE */ sub_1890( ref l_U671 ))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Shooting stray rocket...", 0 );
            SHOOT_SINGLE_BULLET_BETWEEN_COORDS( 165.41000000, 91.13000000, 0.91000000, 165.21000000, 98.84000000, 0.85000000, 100, 0, g_U2861, 0 );
             /* CREATETIMER */ sub_1607( ref l_U662, 400, 1, 0 );
             /* STARTTIMER */ sub_1757( ref l_U662 );
        }
        if ( /* ISTIMERDONE */ sub_1890( ref l_U662 ))
        {
            if (NOT (IS_VEHICLE_DEAD( l_U291[2] )))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Exploding the viRailTunnelVehicles_2 vehicle...", 0 );
                EXPLODE_VEHICLE( l_U291[2], 1, 0 );
                SHAKE_GAMEPLAY_CAM( "SMALL_EXPLOSION_SHAKE", 0.30000000 );
                SET_PAD_SHAKE( 0, l_U464._fU12, 64 );
            }
        }
    }
    switch (l_U172)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRocketEvent - STATE_EVENT_IN", 0 );
        l_U172 = 7;
        break;
        case 7:
        if (l_U167 == 39)
        {
             /* CREATETIMER */ sub_1607( ref l_U545, 600, 1, 0 );
             /* STARTTIMER */ sub_1757( ref l_U545 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "eRocketEvent - STATE_EVENT_01", 0 );
            l_U172 = 10;
        }
        break;
        case 10:
        if ( /* ISTIMERDONE */ sub_1890( ref l_U545 ))
        {
            if (NOT (IS_PED_DEAD( l_U271[0] )))
            {
                l_U134 = 1;
                 /* P_RAIL_BUS_DAMAGE_METER_OFF */ sub_53166();
                 /* P_RAIL_START_ROCKET_EVENT */ sub_116750();
                 /* P_STREAMREQ_SCRIPT_STREAM_INSERT */ sub_41641( "SBUS_RS_C", ref g_U1704 );
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eRocketEvent - STATE_EVENT_02", 0 );
                l_U172 = 11;
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "The piRailVCPFTunnelExit_0 ped is dead.", 0 );
                l_U135 = 1;
                l_U121 = 0;
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eRocketEvent - STATE_EVENT_COMPLETE", 0 );
                l_U172 = 44;
            }
        }
        break;
        case 11:
        if ((NOT l_U135) AND (l_U134))
        {
            if (IS_PED_DEAD( l_U271[0] ))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "The piRailVCPFTunnelExit_0 ped is dead.", 0 );
                l_U135 = 1;
                l_U121 = 0;
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eRocketEvent - STATE_EVENT_COMPLETE", 0 );
                l_U172 = 44;
            }
            else if (IS_BULLET_CAMERA_RUNNING( 0 ))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "The bulletcam was started...", 0 );
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eRocketEvent - STATE_EVENT_03", 0 );
                l_U172 = 12;
            }
        }
        break;
        case 12:
        if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
        {
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2331, 6700.00000000 ))
                {
                     /* P_RAIL_STOP_ROCKET_EVENT */ sub_55339();
                    if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1136() )))
                    {
                        SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_1136(), 0, 0 );
                    }
                     /* CREATETIMER */ sub_1607( ref l_U671, 125, 1, 0 );
                     /* STARTTIMER */ sub_1757( ref l_U671 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eRocketEvent - STATE_EVENT_COMPLETE", 0 );
                    l_U172 = 44;
                }
                else
                {
                     /* P_RAIL_STOP_ROCKET_EVENT */ sub_55339();
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "UN-Pausing the player's bus after bullet cam on rocket ped.", 0 );
                    UNPAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
                     /* NIS_RETURN_TO_GAMEPLAY_CAM */ sub_27788( 0, 0, 0, -859915232, -859915232, 0 );
                    if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1136() )))
                    {
                        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1136(), 1, 0 );
                    }
                    DISPLAY_HUD( 1 );
                     /* P_MAX_RELOAD_WEAPONS */ sub_84008();
                     /* P_RAIL_BUS_DAMAGE_METER_ON */ sub_53652();
                     /* CREATETIMER */ sub_1607( ref l_U671, 125, 1, 0 );
                     /* STARTTIMER */ sub_1757( ref l_U671 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eRocketEvent - STATE_EVENT_04", 0 );
                    l_U172 = 13;
                }
            }
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for the bulletcam to finish...", 0 );
        }
        break;
        case 13:
        if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
        {
            if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2331, 7400.00000000 ))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eRocketEvent - STATE_EVENT_COMPLETE", 0 );
                l_U172 = 44;
            }
        }
        break;
        case 44: break;
    }
    return;
}

/* P_RAIL_START_ROCKET_EVENT */ void sub_116750()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_RAIL_START_ROCKET_EVENT", 0 );
    ACTIVATE_BULLET_TIME( 0, 0.40000000, 1 );
    DISPLAY_HUD( 0 );
    ENABLE_CROSSHAIR( 1 );
    SET_INSTANT_FIRE_FORCED( 0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
        CLEAR_PED_DEFAULT_AIM(  /* PLAYER_PED_ID */ sub_1098() );
        SET_PED_CONSUMING_AMMO(  /* PLAYER_PED_ID */ sub_1098(), 0 );
    }
    if (((IS_PED_DEAD( l_U271[0] )) == 0) AND ((DOES_PED_EXIST( l_U271[0] )) == 1))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting the ped to one shot kill...", 0 );
        SET_PED_INVINCIBLE( l_U271[0], 0 );
        SET_PED_PROOFS( l_U271[0], 0, 0, 0, 0, 0 );
        SET_PED_CAN_RAGDOLL( l_U271[0], 1 );
        SET_PED_AS_ONE_SHOT_KILL( l_U271[0], 1 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( l_U271[0], 1 );
        SET_BULLET_CAM_PREF( l_U271[0], "RIF_CUSTOM_01_BUS_RS", "RIF_CUSTOM_01_BUS_RS", "RIF_CUSTOM_01_BUS_RS", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
    }
    if (DOES_VEHICLE_EXIST( g_U2918 ))
    {
        if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
        {
            if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U2918 ))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Re-setting the playback speed to:", 0 );
                PRINTFLOAT( 0.63000000 );
                PRINTNL();
                SET_PLAYBACK_SPEED( g_U2918, 0.63000000 );
            }
        }
    }
    return;
}

/* P_HANDLE_MID_12_NIS */ void sub_118393()
{
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
        if (NOT (IS_PED_DEAD( g_U2595 )))
        {
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                if ((l_U168 < 37) AND (l_U168 > 4))
                {
                     /* P_HANDLE_IMAGEFX */ sub_96639( ref l_U1882 );
                    if (l_U168 >= 6)
                    {
                        if ( /* ISTIMERDONE */ sub_1890( ref l_U491 ))
                        {
                            SHAKE_CAM( l_U688[2], "SMALL_EXPLOSION_SHAKE", 0.35000000 );
                            SET_PAD_SHAKE( 0, 500, 64 );
                        }
                        if ( /* ISTIMERDONE */ sub_1890( ref l_U500 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "GA", "Crash Island shake start.", 0 );
                            SHAKE_CAM( l_U688[3], "MEDIUM_EXPLOSION_SHAKE", 0.40000000 );
                            SET_PAD_SHAKE( 0, l_U500._fU12, 128 );
                             /* CREATETIMER */ sub_1607( ref l_U509, 1200, 1, 0 );
                             /* STARTTIMER */ sub_1757( ref l_U509 );
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Particle FX - BusDepot_RailShtr_BusShack_S", 0 );
                            START_PARTICLE_FX_NON_LOOPED_AT_COORD( "BusDepot_RailShtr_BusShack_S", l_U1317, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
                        }
                        if ( /* ISTIMERDONE */ sub_1890( ref l_U509 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "GA", "Crash Island shake end.", 0 );
                            STOP_CAM_SHAKING( l_U688[4], 0 );
                        }
                    }
                }
                switch (l_U168)
                {
                    case 0:
                    if (l_U134)
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid12 - STATE_MIDSCENE_INIT", 0 );
                        if (NOT ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 1783795551, ref g_U1272 )))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Loading the S_BUS_MID_12 ISS.", 0 );
                             /* P_STREAMREQ_ISEQ_INSERT */ sub_90636( 1783795551, ref g_U1272 );
                        }
                        if (NOT ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2332, ref g_U1474 )))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Loading the gnRailshooterBusPart2b vehicle recording.", 0 );
                             /* P_STREAMREQ_VEHICLE_RECORDING_INSERT */ sub_77077( g_U2332, ref g_U1474 );
                        }
                        if (NOT ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2333, ref g_U1474 )))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Loading the gnRailshooterBusPart3 vehicle recording.", 0 );
                             /* P_STREAMREQ_VEHICLE_RECORDING_INSERT */ sub_77077( g_U2333, ref g_U1474 );
                        }
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid12 - STATE_MIDSCENE_PRELOAD", 0 );
                        l_U168 = 1;
                    }
                    break;
                    case 1:
                    if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 1783795551, ref g_U1272 ))
                    {
                         /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U688[0], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                        ATTACH_CAM_TO_VEHICLE( l_U688[0], g_U2918, l_U1392[0], 1 );
                        POINT_CAM_AT_VEHICLE( l_U688[0], g_U2918, l_U1408[0], 1 );
                         /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U688[1], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                        ATTACH_CAM_TO_VEHICLE( l_U688[1], g_U2918, l_U1392[1], 1 );
                        POINT_CAM_AT_VEHICLE( l_U688[1], g_U2918, l_U1408[1], 1 );
                         /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U688[2], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 40.55000000 );
                        ATTACH_CAM_TO_VEHICLE( l_U688[2], g_U2918, l_U1392[2], 1 );
                        POINT_CAM_AT_VEHICLE( l_U688[2], g_U2918, l_U1408[2], 1 );
                         /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U688[3], 187.33140000, 89.85388000, 1.64205600, -1.21612400, -0.00074300, 82.12757000, 45.00000000 );
                         /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U688[4], 193.79270000, 89.26176000, 1.77945800, -1.19987900, -0.00074300, 81.66016000, 45.00000000 );
                         /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U688[5], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                        ATTACH_CAM_TO_VEHICLE( l_U688[5], g_U2918, l_U1392[3], 1 );
                        POINT_CAM_AT_VEHICLE( l_U688[5], g_U2918, l_U1408[3], 1 );
                         /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U688[6], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                        ATTACH_CAM_TO_VEHICLE( l_U688[6], g_U2918, l_U1392[4], 1 );
                        POINT_CAM_AT_VEHICLE( l_U688[6], g_U2918, l_U1408[4], 1 );
                        if (IS_ANIMATED_CAMERA_PLAYING())
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
                            CAMERA_ANIMATED_STOP( 3000, 0 );
                        }
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid12 - STATE_MIDSCENE_IDLE", 0 );
                        l_U168 = 5;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for S_BUS_MID_12 ISS Animation to load...", 0 );
                    }
                    break;
                    case 5:
                    if (l_U172 == 12)
                    {
                        if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
                        {
                            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                            {
                                if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2331, 6700.00000000 ))
                                {
                                    if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 1783795551, ref g_U1272 ))
                                    {
                                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Max's node to S_BUS_MID_12/SEQ_START/MAX/PART1_ANIM.", 0 );
                                        PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1098(), "/Global/S_BUS_MID_12/SEQ_START/MAX/PART1_ANIM" );
                                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Gio's ISS node to S_BUS_MID_12/SEQ_START/GIO/PART1_ANIM", 0 );
                                        PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_MID_12/SEQ_START/GIO/PART1_ANIM" );
                                    }
                                    else
                                    {
                                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The S_BUS_MID_12 ISS is NOT loaded!!!", 0 );
                                    }
                                     /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2332, 1.00000000, 1350.00000000 );
                                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid12 - STATE_MIDSCENE_01", 0 );
                                    l_U168 = 6;
                                }
                            }
                        }
                    }
                    else if (l_U172 == 44)
                    {
                        if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 1783795551, ref g_U1272 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Max's node to S_BUS_MID_12/SEQ_START/MAX/PART1_ANIM.", 0 );
                            PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1098(), "/Global/S_BUS_MID_12/SEQ_START/MAX/PART1_ANIM" );
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Gio's ISS node to S_BUS_MID_12/SEQ_START/GIO/PART1_ANIM", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_MID_12/SEQ_START/GIO/PART1_ANIM" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The S_BUS_MID_12 ISS is NOT loaded!!!", 0 );
                        }
                         /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2332, 1.00000000, 1350.00000000 );
                         /* P_INITIALIZE_IMAGEFX_MID_12_BUS */ sub_121184();
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid12 - STATE_MIDSCENE_01", 0 );
                        l_U168 = 6;
                    }
                    break;
                    case 6:
                    l_U135 = 1;
                    if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1136() )))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Disabling forced aim mode...", 0 );
                        SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_1136(), 0, 0 );
                    }
                    SET_VEHICLE_EXTRA( g_U2918, 3, 1 );
                    SET_VEHICLE_EXTRA( g_U2918, 8, 1 );
                    SET_VEHICLE_EXTRA( g_U2918, 9, 0 );
                     /* P_RAIL_BUS_DAMAGE_METER_OFF */ sub_53166();
                     /* NIS_PRE_SETUP */ sub_20593( 1, 0, 0, 1 );
                    DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                    ATTACH_PED_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, l_U1424, l_U1243, 0.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1430, l_U1245, 0.00000000, 0, 0, 0, 1 );
                    if (DOES_PED_EXIST( l_U271[1] ))
                    {
                        if (NOT (IS_PED_DEAD( l_U271[1] )))
                        {
                            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U271[1], 1 );
                            TASK_FOLLOW_NAV_MESH_TO_COORD( l_U271[1], 173.11000000, 99.28000000, 0.10000000, 3, -1, 1048576000, 0, 0 );
                        }
                    }
                    if (DOES_PED_EXIST( l_U271[2] ))
                    {
                        if (NOT (IS_PED_DEAD( l_U271[2] )))
                        {
                            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U271[2], 1 );
                            TASK_FOLLOW_NAV_MESH_TO_COORD( l_U271[2], 159.45000000, 77.21000000, 0.10000000, 3, -1, 1048576000, 0, 0 );
                        }
                    }
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera length is:", 0 );
                    PRINTINT( CAMERA_ANIMATED_LENGTH( "LEVEL_S_BUS_CP_06", "BUSRIDE_3_CAM" ) );
                    PRINTNL();
                    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
                    {
                        CAMERA_PLAY_ANIMATED_ATTACHED_PED_RELATIVE( "LEVEL_S_BUS_CP_06", "BUSRIDE_3_CAM",  /* PLAYER_PED_ID */ sub_1098(), 0, 0 );
                    }
                     /* CREATETIMER */ sub_1607( ref l_U491, 1, 1, 0 );
                     /* STARTTIMER */ sub_1757( ref l_U491 );
                    if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2331, ref g_U1474 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Unloading the gnRailshooterBusPart2 vehicle recording.", 0 );
                         /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2331, ref g_U1474 );
                    }
                    l_U572._fU12 = 2330;
                     /* RESETTIMER */ sub_2466( ref l_U572 );
                     /* STARTTIMER */ sub_1757( ref l_U572 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid12 - STATE_MIDSCENE_02", 0 );
                    l_U168 = 7;
                    break;
                    case 7:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U572 ))
                    {
                         /* CLEANPEDARRAY */ sub_3913( ref l_U271 );
                         /* CREATETIMER */ sub_1607( ref l_U491, 700, 1, 0 );
                         /* STARTTIMER */ sub_1757( ref l_U491 );
                        l_U572._fU12 = 999;
                         /* RESETTIMER */ sub_2466( ref l_U572 );
                         /* STARTTIMER */ sub_1757( ref l_U572 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid12 - STATE_MIDSCENE_03", 0 );
                        l_U168 = 8;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
                        PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
                        PRINTNL();
                    }
                    break;
                    case 8:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U572 ))
                    {
                        if (DOES_OBJECT_EXIST( l_U307[0] ))
                        {
                            PLAY_OBJECT_ANIM( l_U307[0], "P_AN_BUSISL_AA_H", ref g_U1896, 1000.00000000, 0, 1 );
                        }
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid12 - STATE_MIDSCENE_04", 0 );
                        l_U168 = 9;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
                        PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
                        PRINTNL();
                    }
                    break;
                    case 9:
                    STOP_CAM_SHAKING( l_U688[2], 0 );
                     /* CAM_PLAY_INTERP_WITH_STATIC_CAMS */ sub_56926( ref l_U688[3], ref l_U688[4], 3000, 1, 1 );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                     /* CREATETIMER */ sub_1607( ref l_U500, 500, 1, 0 );
                     /* STARTTIMER */ sub_1757( ref l_U500 );
                    l_U572._fU12 = 2999;
                     /* RESETTIMER */ sub_2466( ref l_U572 );
                     /* STARTTIMER */ sub_1757( ref l_U572 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid12 - STATE_MIDSCENE_05", 0 );
                    l_U168 = 10;
                    break;
                    case 10:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U572 ))
                    {
                        if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 1783795551, ref g_U1272 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Max's node to S_BUS_MID_12/SEQ_START/MAX/PART2_ANIM.", 0 );
                            PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1098(), "/Global/S_BUS_MID_12/SEQ_START/MAX/PART2_ANIM" );
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Gio's ISS node to S_BUS_MID_12/SEQ_START/GIO/PART2_ANIM", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_MID_12/SEQ_START/GIO/PART2_ANIM" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The S_BUS_MID_12 ISS is NOT loaded!!!", 0 );
                        }
                         /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2332, 1.00000000, 6300.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid12 - STATE_MIDSCENE_06", 0 );
                        l_U168 = 11;
                    }
                    break;
                    case 11:
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Attaching the player.", 0 );
                    DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                    ATTACH_PED_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, l_U1427, l_U1244, 0.00000000, 1, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Attaching Gio.", 0 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1433, l_U1246, 0, 1, 0, 0, 1 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera length is:", 0 );
                    PRINTINT( CAMERA_ANIMATED_LENGTH( "LEVEL_S_BUS_CP_06", "BUSRIDE_4_CAM" ) );
                    PRINTNL();
                    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
                    {
                        CAMERA_PLAY_ANIMATED_ATTACHED_PED_RELATIVE( "LEVEL_S_BUS_CP_06", "BUSRIDE_4_CAM",  /* PLAYER_PED_ID */ sub_1098(), 0, 0 );
                    }
                    l_U572._fU12 = 1650;
                     /* RESETTIMER */ sub_2466( ref l_U572 );
                     /* STARTTIMER */ sub_1757( ref l_U572 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid12 - STATE_MIDSCENE_07", 0 );
                    l_U168 = 12;
                    break;
                    case 12:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U572 ))
                    {
                         /* P_SPAWN_RAIL_BUS_HIT */ sub_124059();
                        l_U572._fU12 = 1649;
                         /* RESETTIMER */ sub_2466( ref l_U572 );
                         /* STARTTIMER */ sub_1757( ref l_U572 );
                        if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1136() )))
                        {
                            SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_1136(), 1, 1 );
                        }
                        SET_CAMERA_OVERRIDE( "RAIL_BUS_CAMERA_AIM", "RAIL_BUS_CAMERA_AIM", 0, 1, 1 );
                        SET_RAIL_RELATIVE_DIR( 2, 0 );
                        SET_PLAYER_COMBAT_TIMER_MODE( 1 );
                         /* CREATETIMER */ sub_1607( ref l_U437, 500, 1, 0 );
                         /* STARTTIMER */ sub_1757( ref l_U437 );
                         /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( -1221193536, ref g_U910 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid12 - STATE_MIDSCENE_08", 0 );
                        l_U168 = 13;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
                        PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
                        PRINTNL();
                    }
                    break;
                    case 13:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U572 ))
                    {
                        if (ISEQ_QUERY_STATE( 1783795551, 3 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Terminating the S_BUS_MID_12 ISS.", 0 );
                            ISEQ_UNREGISTER_ENTITY( 1783795551, "mid12_player" );
                            ISEQ_UNREGISTER_ENTITY( 1783795551, "mid12_female" );
                            ISEQ_TERMINATE( 1783795551 );
                             /* P_STREAMREQ_ISEQ_REMOVE */ sub_7159( 1783795551, ref g_U1272 );
                        }
                        if ( /* F_STREAMREQ_ACTION_TREE_IS_ASSET_LOADED */ sub_15383( ref g_U2008, ref g_U1535 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting the animation node for the player to BUS_RAILSHOOTER_STANCE_RIGHT.", 0 );
                            PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1098(), "/Global/BUS_RAILSHOOTER/BUS_RAILSHOOTER_STANCE_RIGHT" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The s_bus_railshooter action tree is NOT loaded!!!", 0 );
                        }
                        if ( /* F_STREAMREQ_ACTION_TREE_IS_ASSET_LOADED */ sub_15383( ref g_U2024, ref g_U1535 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting the animation node for Gio to EVENT_04_TERMINAL_TIMELINE/01_Driving.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_17_OFELIABUS/EVENT_04_TERMINAL_TIMELINE/01_Driving" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The txtRailOfeliaBus action tree is NOT loaded!!!", 0 );
                        }
                         /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2333, 3.00000000, 3000.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Enabling the camera aim override...", 0 );
                        CAMERA_AIM_OVERRIDE( 1 );
                        SET_FORCED_AIM_INTENTION_DIRECTION( -0.01959000, -0.99971400, 0.01373500 );
                        SET_FORCED_FORWARD_DIRECTION( -0.99971700, -0.02380300, 0.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid12 - STATE_MIDSCENE_POST_MIDSCENE", 0 );
                        l_U168 = 36;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
                        PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
                        PRINTNL();
                    }
                    break;
                    case 36:
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "STATE_MIDSCENE_POST_MIDSCENE start.", 0 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Attaching the player.", 0 );
                    DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                    ATTACH_PED_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, l_U1273, l_U1222, 0.00000000, 1, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Attaching Gio.", 0 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1276, l_U1223, 0, 1, 0, 0, 1 );
                     /* P_START_RAIL_TERMINAL_VCPF */ sub_125706();
                    SET_GENERATE_BULLET_SHELLS( 0 );
                    SET_HIGH_RAGDOLL_LOD_LIMIT( 1 );
                     /* NIS_RETURN_TO_GAMEPLAY_CAM */ sub_27788( 0, 0, 0, 88.00000000, 0.00000000, 0 );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                     /* NIS_POST_SETUP */ sub_83910( 1, 1 );
                     /* P_RAIL_BUS_DAMAGE_METER_ON */ sub_53652();
                    TOGGLE_DISPLAY_AMMO( 0 );
                     /* CLEANVEHICLEARRAY */ sub_4110( ref l_U291 );
                     /* CLEANOBJECT */ sub_4290( l_U307[0] );
                     /* CAM_DESTROY_CAMERA_INDEX_ARRAY */ sub_4385( ref l_U688 );
                    if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2332, ref g_U1474 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Unloading the gnRailshooterBusPart2b vehicle recording.", 0 );
                         /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2332, ref g_U1474 );
                    }
                    l_U142 = 0;
                     /* CREATETIMER */ sub_1607( ref l_U437, 250, 1, 0 );
                     /* STARTTIMER */ sub_1757( ref l_U437 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eCheckpoint - STATE_CHECKPOINT_RAILSHOOTER_03", 0 );
                    l_U145 = 13;
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid12 - STATE_MIDSCENE_COMPLETE", 0 );
                    l_U168 = 39;
                    break;
                    case 39:
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eRailBusMid12 - STATE_MIDSCENE_COMPLETE - START", 0 );
                    break;
                }
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "The viRailBus vehicle is NOT valid!!!", 0 );
            }
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "The piGiovanna ped is NOT valid!!!", 0 );
        }
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "The PLAYER_PED_ID ped is NOT valid!!!", 0 );
    }
    return;
}

/* P_INITIALIZE_IMAGEFX_MID_12_BUS */ void sub_121184()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_INITIALIZE_IMAGEFX_MID_12_BUS", 0 );
     /* P_INIT_IMAGEFX */ sub_98808( ref l_U1882 );
    l_U1882[0]._fU4 = "TRIPLE_MOVE_RIGHT_COLOR_SPLIT5";
    l_U1882[0]._fU12 = 0;
    l_U1882[0]._fU8 = 4;
    l_U1882[0]._fU32 = 0;
    l_U1882[1]._fU4 = "TRIPLE_MOVE_RIGHT_COLOR_SPLIT6";
    l_U1882[1]._fU12 = 2200;
    l_U1882[1]._fU8 = 4;
    l_U1882[1]._fU32 = 0;
    l_U1882[2]._fU4 = "TRIPLE_INTERLACE_HOLD";
    l_U1882[2]._fU12 = 3100;
    l_U1882[2]._fU8 = 4;
    l_U1882[2]._fU32 = 0;
    l_U1882[3]._fU4 = "GAMMA_SATURATION_COLOR_ZOOM_3";
    l_U1882[3]._fU12 = 6500;
    l_U1882[3]._fU8 = 4;
    l_U1882[3]._fU32 = 0;
    l_U72 = 0;
    return;
}

/* P_SPAWN_RAIL_BUS_HIT */ void sub_124059()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_SPAWN_RAIL_BUS_HIT", 0 );
    l_U290 =  /* CREATEVEHICLE */ sub_18389( 1572429640, l_U1326, l_U1247, 0, 0, 0 );
    if (NOT (IS_VEHICLE_DEAD( l_U290 )))
    {
        SET_VEHICLE_EXTRA( l_U290, 3, 0 );
        SET_VEHICLE_EXTRA( l_U290, 8, 1 );
        SET_VEHICLE_EXTRA( l_U290, 9, 1 );
    }
    return;
}

/* P_START_RAIL_TERMINAL_VCPF */ void sub_125706()
{
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "P_START_RAIL_TERMINAL_VCPF", 0 );
        if (NOT (IS_PED_DEAD( l_U275[0] )))
        {
            REGISTER_TARGET( l_U275[0],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U275[0],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 500 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 199.66000000, 52.83000000, 0.35000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[0], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U275[1] )))
        {
            REGISTER_TARGET( l_U275[1],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U275[1],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 200.53000000, 44.21000000, 0.35000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[1], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U275[2] )))
        {
            REGISTER_TARGET( l_U275[2],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U275[2],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 1000 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 200.01000000, 38.35000000, 0.35000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[2], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U275[3] )))
        {
            REGISTER_TARGET( l_U275[3],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U275[3],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 1000 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 200.15000000, 33.20000000, 0.35000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[3], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U275[4] )))
        {
            REGISTER_TARGET( l_U275[4],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U275[4],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 1000 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 200.76000000, 21.72000000, 0.35000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[4], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U275[5] )))
        {
            REGISTER_TARGET( l_U275[5],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U275[5],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 5500 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 199.46000000, 20.66000000, 0.35000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[5], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U275[6] )))
        {
            REGISTER_TARGET( l_U275[6],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U275[6],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 5500 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 200.44000000, 14.06000000, 0.35000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[6], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U275[7] )))
        {
            REGISTER_TARGET( l_U275[7],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U275[7],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 5500 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 199.08000000, 11.70000000, 0.35000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[7], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U275[8] )))
        {
            REGISTER_TARGET( l_U275[8],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U275[8],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 6000 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 200.11000000, -1.28000000, 0.35000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[8], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U275[9] )))
        {
            REGISTER_TARGET( l_U275[9],  /* PLAYER_PED_ID */ sub_1098() );
            SET_LOCKED_TARGET( l_U275[9],  /* PLAYER_PED_ID */ sub_1098() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 6500 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 199.60000000, -5.08000000, 0.35000000,  /* PLAYER_PED_ID */ sub_1098(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_1098() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[9], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
    }
    return;
}

/* P_HANDLE_END_CRASH */ void sub_128911()
{
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
    {
        if (NOT (IS_PED_DEAD( g_U2595 )))
        {
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                if ((l_U169 < 37) AND (l_U169 > 4))
                {
                     /* P_HANDLE_IMAGEFX */ sub_96639( ref l_U1991 );
                    if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( l_U290, g_U2335, 6900.00000000 ))
                    {
                        if (DOES_VEHICLE_EXIST( l_U290 ))
                        {
                            if (NOT (IS_VEHICLE_DEAD( l_U290 )))
                            {
                                if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( l_U290 ))
                                {
                                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Stop the path of the bus hit.", 0 );
                                    STOP_PLAYBACK_RECORDED_VEHICLE( l_U290 );
                                }
                            }
                        }
                    }
                    if (DOES_VEHICLE_EXIST( l_U290 ))
                    {
                        if (NOT (IS_VEHICLE_DEAD( l_U290 )))
                        {
                            if (( /* ISTIMERDONE */ sub_1890( ref l_U581 )) == 1)
                            {
                                 /* WRITESCRIPTLOG */ sub_442( "GA", "Starting PFX BusDepot_BusesCollide_S", 0 );
                                START_PARTICLE_FX_LOOPED_ON_VEHICLE( "BusDepot_BusesCollide_S", l_U290, l_U1389, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
                                SHAKE_CAM( l_U696[3], "SMALL_EXPLOSION_SHAKE", 0.35000000 );
                                SHAKE_CAM( l_U696[6], "SMALL_EXPLOSION_SHAKE", 0.35000000 );
                                SET_PAD_SHAKE( 0, l_U590._fU12, 64 );
                                 /* STARTTIMER */ sub_1757( ref l_U590 );
                            }
                            if (( /* ISTIMERDONE */ sub_1890( ref l_U590 )) == 1)
                            {
                                 /* WRITESCRIPTLOG */ sub_442( "GA", "Stoping PFX on the hitting bus.", 0 );
                                REMOVE_PARTICLE_FX_FROM_VEHICLE( l_U290 );
                                STOP_CAM_SHAKING( l_U696[3], 0 );
                                STOP_CAM_SHAKING( l_U696[6], 0 );
                            }
                        }
                    }
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U599 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "GA", "Playing Crash Building PFX.", 0 );
                        START_PARTICLE_FX_NON_LOOPED_AT_COORD( "BusDepot_RailShtr_Crash_S", l_U1329, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
                        if (DOES_OBJECT_EXIST( l_U310[2] ))
                        {
                            PLAY_OBJECT_ANIM( l_U310[2], "p_bd_wallsmh_ba", ref g_U1896, 1000.00000000, 0, 1 );
                        }
                        if (DOES_OBJECT_EXIST( l_U310[3] ))
                        {
                            PLAY_OBJECT_ANIM( l_U310[3], "p_bd_walsmh_bb_h", ref g_U1896, 1000.00000000, 0, 1 );
                        }
                        if (DOES_OBJECT_EXIST( l_U310[4] ))
                        {
                            PLAY_OBJECT_ANIM( l_U310[4], "p_bd_walsmh_bc_h", ref g_U1896, 1000.00000000, 0, 1 );
                        }
                        if (DOES_OBJECT_EXIST( l_U310[5] ))
                        {
                            PLAY_OBJECT_ANIM( l_U310[5], "p_bd_winsmh_aa_h", ref g_U1896, 1000.00000000, 0, 1 );
                        }
                        SHAKE_CAM( l_U696[14], "MEDIUM_EXPLOSION_SHAKE", 0.30000000 );
                        SET_PAD_SHAKE( 0, l_U608._fU12, 128 );
                         /* CREATETIMER */ sub_1607( ref l_U608, 300, 1, 0 );
                         /* STARTTIMER */ sub_1757( ref l_U608 );
                        if (DOES_VEHICLE_EXIST( g_U2918 ))
                        {
                            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                            {
                                SET_VEHICLE_ENGINE_ON( g_U2918, 0, 0 );
                            }
                        }
                    }
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U617 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "GA", "Play Wall Crash Animation.", 0 );
                        START_PARTICLE_FX_NON_LOOPED_AT_COORD( "BusDepot_WallSmash_S", l_U1332, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
                        if (DOES_OBJECT_EXIST( l_U310[0] ))
                        {
                            PLAY_OBJECT_ANIM( l_U310[0], "p_bd_walsmh_aa_h", ref g_U1896, 1000.00000000, 0, 1 );
                        }
                        if (DOES_OBJECT_EXIST( l_U310[1] ))
                        {
                            PLAY_OBJECT_ANIM( l_U310[1], "p_bd_walsmh_ab_h", ref g_U1896, 1000.00000000, 0, 1 );
                        }
                         /* CREATETIMER */ sub_1607( ref l_U599, 500, 1, 0 );
                         /* STARTTIMER */ sub_1757( ref l_U599 );
                        SET_VEHICLE_ENGINE_ON( g_U2918, 0, 1 );
                        SHAKE_CAM( l_U696[14], "SMALL_EXPLOSION_SHAKE", 0.20000000 );
                         /* CREATETIMER */ sub_1607( ref l_U608, 150, 1, 0 );
                         /* STARTTIMER */ sub_1757( ref l_U608 );
                        SET_PAD_SHAKE( 0, l_U608._fU12, 64 );
                    }
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U608 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "GA", "Stopping camera shake.", 0 );
                        STOP_CAM_SHAKING( l_U696[14], 0 );
                    }
                }
                switch (l_U169)
                {
                    case 0:
                    if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2333, 4500 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_INIT", 0 );
                        if (NOT ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 123250951, ref g_U1272 )))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Loading the S_BUS_10_04 ISS.", 0 );
                             /* P_STREAMREQ_ISEQ_INSERT */ sub_90636( 123250951, ref g_U1272 );
                        }
                        if (NOT ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2333, ref g_U1474 )))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Loading the gnRailshooterBusPart3 vehicle recording.", 0 );
                             /* P_STREAMREQ_VEHICLE_RECORDING_INSERT */ sub_77077( g_U2333, ref g_U1474 );
                        }
                        if (NOT ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2334, ref g_U1474 )))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Loading the gnRailshooterBusCrash1 vehicle recording.", 0 );
                             /* P_STREAMREQ_VEHICLE_RECORDING_INSERT */ sub_77077( g_U2334, ref g_U1474 );
                        }
                        if (NOT ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2335, ref g_U1474 )))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Loading the gnRailshooterBusCrash2 vehicle recording.", 0 );
                             /* P_STREAMREQ_VEHICLE_RECORDING_INSERT */ sub_77077( g_U2335, ref g_U1474 );
                        }
                        if (NOT ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2338, ref g_U1474 )))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Loading the iHeliRecordingPath vehicle recording.", 0 );
                             /* P_STREAMREQ_VEHICLE_RECORDING_INSERT */ sub_77077( g_U2338, ref g_U1474 );
                        }
                         /* P_STREAMREQ_MODELNAMES_INSERT */ sub_69291( g_U2099, ref g_U910 );
                        if (IS_ANIMATED_CAMERA_PLAYING())
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
                            CAMERA_ANIMATED_STOP( 3000, 0 );
                        }
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_PRELOAD", 0 );
                        l_U169 = 1;
                    }
                    break;
                    case 1:
                    if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 123250951, ref g_U1272 ))
                    {
                        if ( /* F_STREAMREQ_MODELNAMES_IS_ASSET_LOADED */ sub_5387( g_U2099, ref g_U910 ))
                        {
                            if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2338, ref g_U1474 ))
                            {
                                 /* WRITESCRIPTLOG */ sub_442( "CCB", "The mnHelicopter model has loaded.", 0 );
                                 /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U696[0], 196.94000000, -9.00000000, 8.96000000, 14.23000000, 0.25000000, -146.20000000, 45.00000000 );
                                 /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U696[1], 196.83000000, -8.82000000, 8.91000000, 27.15000000, 0.02000000, -144.73000000, 28.45000000 );
                                 /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U696[2], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                                ATTACH_CAM_TO_VEHICLE( l_U696[2], g_U2918, l_U1436[1], 1 );
                                POINT_CAM_AT_VEHICLE( l_U696[2], g_U2918, l_U1467[1], 1 );
                                 /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U696[3], 211.47140000, -23.78708000, 0.79759100, 11.52332000, -0.00422000, 29.87679000, 45.00000000 );
                                 /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U696[4], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                                ATTACH_CAM_TO_VEHICLE( l_U696[4], g_U2918, l_U1436[2], 1 );
                                POINT_CAM_AT_VEHICLE( l_U696[4], g_U2918, l_U1467[2], 1 );
                                 /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U696[5], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                                ATTACH_CAM_TO_VEHICLE( l_U696[5], g_U2918, l_U1436[3], 1 );
                                POINT_CAM_AT_VEHICLE( l_U696[5], g_U2918, l_U1467[3], 1 );
                                 /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U696[6], 211.46140000, -23.79282000, 0.79759000, 8.12430700, -0.00422000, 123.98170000, 45.00000000 );
                                 /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U696[7], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                                ATTACH_CAM_TO_VEHICLE( l_U696[7], g_U2918, l_U1436[4], 1 );
                                POINT_CAM_AT_VEHICLE( l_U696[7], g_U2918, l_U1467[4], 1 );
                                 /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U696[8], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                                ATTACH_CAM_TO_VEHICLE( l_U696[8], g_U2918, l_U1436[5], 1 );
                                POINT_CAM_AT_VEHICLE( l_U696[8], g_U2918, l_U1467[5], 1 );
                                 /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U696[9], 211.46140000, -23.79282000, 0.79759000, 8.12430700, -0.00422000, 123.98170000, 45.00000000 );
                                 /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U696[10], 186.35350000, -57.84871000, 8.53294200, -22.39921000, -0.00424300, -45.64660000, 45.00000000 );
                                 /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U696[11], 186.35350000, -57.84871000, 8.53294200, -28.16312000, -0.00424300, -157.12840000, 45.00000000 );
                                 /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U696[12], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                                ATTACH_CAM_TO_VEHICLE( l_U696[12], g_U2918, l_U1436[6], 1 );
                                POINT_CAM_AT_VEHICLE( l_U696[12], g_U2918, l_U1467[6], 1 );
                                 /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U696[13], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                                ATTACH_CAM_TO_VEHICLE( l_U696[13], g_U2918, l_U1436[7], 1 );
                                POINT_CAM_AT_VEHICLE( l_U696[13], g_U2918, l_U1467[7], 1 );
                                 /* CAM_CREATE_STATIC_CAM */ sub_56015( ref l_U696[14], 186.35350000, -57.84871000, 8.53294200, -28.16312000, -0.00424300, -157.12840000, 45.00000000 );
                                if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 123250951, ref g_U1272 ))
                                {
                                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Registering the S_BUS_10_04 ISS", 0 );
                                    ISEQ_REGISTER_ENTITY( 123250951, "10_04_player",  /* PLAYER_PED_ID */ sub_1098(), 0 );
                                    ISEQ_REGISTER_ENTITY( 123250951, "10_04_female", g_U2595, 0 );
                                }
                                 /* P_RAIL_PASSOS_HELICOPTER_SPAWN */ sub_132853();
                                if (IS_ANIMATED_CAMERA_PLAYING())
                                {
                                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
                                    CAMERA_ANIMATED_STOP( 3000, 0 );
                                }
                                 /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_IDLE", 0 );
                                l_U169 = 5;
                            }
                            else
                            {
                                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for the iHeliRecordingPath vehicle recording to load...", 0 );
                            }
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for the mnHelicopter model to load...", 0 );
                        }
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for S_BUS_10_04 ISS Animation to load...", 0 );
                    }
                    break;
                    case 5:
                    if (l_U113)
                    {
                        if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The bulletcam is finished.", 0 );
                             /* P_RAIL_PASSOS_HELICOPTER_MOVE */ sub_133981();
                             /* P_RAIL_START_CRASH_BUSES */ sub_134231();
                            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                            {
                                if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U2918 ))
                                {
                                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The viRailBus vehicle playback is pausing...", 0 );
                                    PAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
                                }
                            }
                             /* P_RAIL_BUS_DAMAGE_METER_OFF */ sub_53166();
                             /* NIS_PRE_SETUP */ sub_20593( 1, 0, 0, 1 );
                             /* CAM_PLAY_STATIC_CAM */ sub_56320( ref l_U696[0] );
                            SHAKE_CAM( l_U696[0], "HAND_SHAKE", 3.00000000 );
                             /* CLEANPEDARRAY */ sub_3913( ref l_U275 );
                             /* CLEANOBJECTARRAY */ sub_4238( ref l_U307 );
                            l_U626._fU12 = 250;
                             /* RESETTIMER */ sub_2466( ref l_U626 );
                             /* STARTTIMER */ sub_1757( ref l_U626 );
                             /* P_INITIALIZE_IMAGEFX_10_04_BUS */ sub_134695();
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_02", 0 );
                            l_U169 = 7;
                        }
                    }
                    else if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
                    {
                        if ( /* F_HAS_VEHICLE_REACHED_PATH_MARK */ sub_40604( g_U2918, g_U2333, 28541.75000000 ))
                        {
                             /* P_RAIL_PASSOS_HELICOPTER_MOVE */ sub_133981();
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_01", 0 );
                            l_U169 = 6;
                        }
                    }
                    break;
                    case 6:
                     /* P_RAIL_START_CRASH_BUSES */ sub_134231();
                     /* P_INITIALIZE_IMAGEFX_10_04_BUS */ sub_134695();
                    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                    {
                        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U2918 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The viRailBus vehicle playback is pausing...", 0 );
                            PAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
                        }
                    }
                     /* P_RAIL_BUS_DAMAGE_METER_OFF */ sub_53166();
                     /* NIS_PRE_SETUP */ sub_20593( 1, 0, 0, 1 );
                     /* CAM_PLAY_STATIC_CAM */ sub_56320( ref l_U696[0] );
                    SHAKE_CAM( l_U696[0], "HAND_SHAKE", 3.00000000 );
                     /* CLEANPEDARRAY */ sub_3913( ref l_U275 );
                    l_U626._fU12 = 250;
                     /* RESETTIMER */ sub_2466( ref l_U626 );
                     /* STARTTIMER */ sub_1757( ref l_U626 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_02", 0 );
                    l_U169 = 7;
                    break;
                    case 7:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U626 ))
                    {
                         /* CAM_PLAY_INTERP_WITH_STATIC_CAMS */ sub_56926( ref l_U696[0], ref l_U696[1], 750, 1, 1 );
                        SHAKE_CAM( l_U696[1], "WOBBLY_SHAKE", 0.10000000 );
                        l_U626._fU12 = 1649;
                         /* RESETTIMER */ sub_2466( ref l_U626 );
                         /* STARTTIMER */ sub_1757( ref l_U626 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_03", 0 );
                        l_U169 = 8;
                    }
                    break;
                    case 8:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U626 ))
                    {
                        if (NOT (ISEQ_QUERY_STATE( 123250951, 3 )))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Starting the S_BUS_10_04 ISS", 0 );
                            ISEQ_START( 123250951 );
                        }
                         /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2335, 1.00000000, 4000.00000000 - 1000 );
                         /* P_START_VEHICLE_RECORDING */ sub_19940( l_U290, g_U2334, 1.00000000, 4000.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_04", 0 );
                        l_U169 = 9;
                    }
                    break;
                    case 9:
                    DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                    ATTACH_PED_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, l_U1527, l_U1248, 0.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1530, l_U1249, 0.00000000, 0, 0, 0, 1 );
                    if (NOT (IS_VEHICLE_DEAD( l_U290 )))
                    {
                        PAUSE_PLAYBACK_RECORDED_VEHICLE( l_U290 );
                    }
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera length is:", 0 );
                    PRINTINT( CAMERA_ANIMATED_LENGTH( "LEVEL_S_BUS_CP_06", "10_04_bs_p1_concat_1_CAM" ) );
                    PRINTNL();
                    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
                    {
                        CAMERA_PLAY_ANIMATED_ATTACHED_PED_RELATIVE( "LEVEL_S_BUS_CP_06", "10_04_bs_p1_concat_1_CAM",  /* PLAYER_PED_ID */ sub_1098(), 0, 0 );
                    }
                    STOP_CAM_SHAKING( l_U696[0], 1 );
                    STOP_CAM_SHAKING( l_U696[1], 1 );
                    if (DOES_VEHICLE_EXIST( l_U296 ))
                    {
                        if (NOT (IS_VEHICLE_DEAD( l_U296 )))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Destroying the viHeli vehicle model.", 0 );
                             /* CLEANPED */ sub_3806( l_U286 );
                             /* CLEANVEHICLE */ sub_4037( l_U296 );
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Unloading the viHeli vehicle model.", 0 );
                             /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2099, ref g_U910 );
                        }
                    }
                    if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2333, ref g_U1474 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Unloading the gnRailshooterBusPart3 vehicle recording.", 0 );
                         /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2333, ref g_U1474 );
                    }
                    if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2338, ref g_U1474 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Unloading the iHeliRecordingPath vehicle recording.", 0 );
                         /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2338, ref g_U1474 );
                    }
                    l_U626._fU12 = 1859;
                     /* RESETTIMER */ sub_2466( ref l_U626 );
                     /* STARTTIMER */ sub_1757( ref l_U626 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_05", 0 );
                    l_U169 = 10;
                    break;
                    case 10:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U626 ))
                    {
                        if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 123250951, ref g_U1272 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Max's node to S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART2.", 0 );
                            PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1098(), "/Global/S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART2" );
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Gio's ISS node to S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART2", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART2" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The S_BUS_10_04 ISS is NOT loaded!!!", 0 );
                        }
                         /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2335, 1.00000000, 5200.00000000 - 1000 );
                         /* P_START_VEHICLE_RECORDING */ sub_19940( l_U290, g_U2334, 1.00000000, 4000.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_06", 0 );
                        l_U169 = 11;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
                        PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
                        PRINTNL();
                    }
                    break;
                    case 11:
                     /* CAM_PLAY_STATIC_CAM */ sub_56320( ref l_U696[2] );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                    l_U626._fU12 = 959;
                     /* RESETTIMER */ sub_2466( ref l_U626 );
                     /* STARTTIMER */ sub_1757( ref l_U626 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_07", 0 );
                    l_U169 = 12;
                    break;
                    case 12:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U626 ))
                    {
                         /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2335, 1.00000000, 5200.00000000 );
                         /* P_START_VEHICLE_RECORDING */ sub_19940( l_U290, g_U2334, 1.00000000, 5300.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_08", 0 );
                        l_U169 = 13;
                    }
                    break;
                    case 13:
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera length is:", 0 );
                    PRINTINT( CAMERA_ANIMATED_LENGTH( "LEVEL_S_BUS_CP_06", "10_04_BUS_CAMS_SH04_cam" ) );
                    PRINTNL();
                    CAMERA_PLAY_ANIMATED( "LEVEL_S_BUS_CP_06", "10_04_BUS_CAMS_SH04_cam", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
                     /* CREATETIMER */ sub_1607( ref l_U581, 400, 1, 0 );
                     /* CREATETIMER */ sub_1607( ref l_U590, 600, 1, 0 );
                     /* STARTTIMER */ sub_1757( ref l_U581 );
                    l_U626._fU12 = 1249;
                     /* RESETTIMER */ sub_2466( ref l_U626 );
                     /* STARTTIMER */ sub_1757( ref l_U626 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_09", 0 );
                    l_U169 = 14;
                    break;
                    case 14:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U626 ))
                    {
                        if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 123250951, ref g_U1272 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Max's node to S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART3.", 0 );
                            PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1098(), "/Global/S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART3" );
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Gio's ISS node to S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART3", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART3" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The S_BUS_10_04 ISS is NOT loaded!!!", 0 );
                        }
                         /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2335, 1.00000000, 5500.00000000 );
                         /* P_START_VEHICLE_RECORDING */ sub_19940( l_U290, g_U2334, 1.00000000, 5650.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_10", 0 );
                        l_U169 = 15;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
                        PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
                        PRINTNL();
                    }
                    break;
                    case 15:
                    DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                    ATTACH_PED_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, l_U1533, l_U1250, 0.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1536, l_U1251, 0.00000000, 0, 0, 0, 1 );
                     /* CAM_PLAY_INTERP_WITH_STATIC_CAMS */ sub_56926( ref l_U696[4], ref l_U696[5], 690, 1, 1 );
                    SHAKE_CAM( l_U696[4], "SMALL_EXPLOSION_SHAKE", 0.35000000 );
                    SHAKE_CAM( l_U696[5], "MEDIUM_EXPLOSION_SHAKE", 0.35000000 );
                    SET_PAD_SHAKE( 0, 1000, 64 );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                    l_U626._fU12 = 689;
                     /* RESETTIMER */ sub_2466( ref l_U626 );
                     /* STARTTIMER */ sub_1757( ref l_U626 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_11", 0 );
                    l_U169 = 16;
                    break;
                    case 16:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U626 ))
                    {
                         /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2335, 1.00000000, 6200.00000000 );
                         /* P_START_VEHICLE_RECORDING */ sub_19940( l_U290, g_U2334, 1.00000000, 6300.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_12", 0 );
                        l_U169 = 17;
                    }
                    break;
                    case 17:
                    STOP_CAM_SHAKING( l_U696[4], 0 );
                    STOP_CAM_SHAKING( l_U696[5], 0 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera length is:", 0 );
                    PRINTINT( CAMERA_ANIMATED_LENGTH( "LEVEL_S_BUS_CP_06", "10_04_BUS_CAMS_SH06_cam" ) );
                    PRINTNL();
                    CAMERA_PLAY_ANIMATED( "LEVEL_S_BUS_CP_06", "10_04_BUS_CAMS_SH06_cam", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
                    l_U626._fU12 = 1499;
                     /* RESETTIMER */ sub_2466( ref l_U626 );
                     /* STARTTIMER */ sub_1757( ref l_U626 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_13", 0 );
                    l_U169 = 18;
                    break;
                    case 18:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U626 ))
                    {
                        if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 123250951, ref g_U1272 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Max's node to S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART4.", 0 );
                            PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1098(), "/Global/S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART4" );
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Gio's ISS node to S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART4", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART4" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The S_BUS_10_04 ISS is NOT loaded!!!", 0 );
                        }
                         /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2335, 1.00000000, 6750.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_14", 0 );
                        l_U169 = 19;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
                        PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
                        PRINTNL();
                    }
                    break;
                    case 19:
                    DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                    ATTACH_PED_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, l_U1539, l_U1252, 0.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1542, l_U1253, 0.00000000, 0, 0, 0, 1 );
                    if (NOT (IS_VEHICLE_DEAD( l_U290 )))
                    {
                        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( l_U290 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The viRailBusHit vehicle playback is pausing...", 0 );
                            PAUSE_PLAYBACK_RECORDED_VEHICLE( l_U290 );
                        }
                    }
                     /* CAM_PLAY_INTERP_WITH_STATIC_CAMS */ sub_56926( ref l_U696[7], ref l_U696[8], 720, 1, 1 );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                    l_U626._fU12 = 719;
                     /* RESETTIMER */ sub_2466( ref l_U626 );
                     /* STARTTIMER */ sub_1757( ref l_U626 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_14", 0 );
                     /* P_START_IMAGEFX_10_04_BULLETCAM */ sub_140408();
                    PLAY_IMAGEFX( "FLICKER_VIBRATE_ZOOM_01", 4, 1 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_15", 0 );
                    l_U169 = 20;
                    break;
                    case 20:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U626 ))
                    {
                         /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2335, 1.00000000, 7500.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_16", 0 );
                        l_U169 = 21;
                    }
                    break;
                    case 21:
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera length is:", 0 );
                    PRINTINT( CAMERA_ANIMATED_LENGTH( "LEVEL_S_BUS_CP_06", "10_04_BUS_SH08+SH09_cams" ) );
                    PRINTNL();
                    CAMERA_PLAY_ANIMATED( "LEVEL_S_BUS_CP_06", "10_04_BUS_SH08+SH09_cams", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
                    PLAY_IMAGEFX( "FLICKER_VIBRATE_INTERLACE_01", 4, 1 );
                    l_U626._fU12 = 500;
                     /* RESETTIMER */ sub_2466( ref l_U626 );
                     /* STARTTIMER */ sub_1757( ref l_U626 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_17", 0 );
                    l_U169 = 22;
                    break;
                    case 22:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U626 ))
                    {
                        l_U626._fU12 = 500;
                         /* RESETTIMER */ sub_2466( ref l_U626 );
                         /* STARTTIMER */ sub_1757( ref l_U626 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_18", 0 );
                        l_U169 = 23;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
                        PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
                        PRINTNL();
                    }
                    break;
                    case 23:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U626 ))
                    {
                        PLAY_IMAGEFX( "FLICKER_VIBRATE_INTERLACE_01", 4, 1 );
                        l_U626._fU12 = 499;
                         /* RESETTIMER */ sub_2466( ref l_U626 );
                         /* STARTTIMER */ sub_1757( ref l_U626 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_19", 0 );
                        l_U169 = 24;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
                        PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
                        PRINTNL();
                    }
                    break;
                    case 24:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U626 ))
                    {
                        if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 123250951, ref g_U1272 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Max's node to S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART5.", 0 );
                            PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1098(), "/Global/S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART5" );
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Gio's ISS node to S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART5", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART5" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The S_BUS_10_04 ISS is NOT loaded!!!", 0 );
                        }
                         /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2335, 1.00000000, 8000.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_20", 0 );
                        l_U169 = 25;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
                        PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
                        PRINTNL();
                    }
                    break;
                    case 25:
                    DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                    ATTACH_PED_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, l_U1545, l_U1254, 0.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1548, l_U1255, 0.00000000, 0, 0, 0, 1 );
                     /* CAM_PLAY_STATIC_CAM */ sub_56320( ref l_U696[12] );
                    SHAKE_CAM( l_U696[12], "SMALL_EXPLOSION_SHAKE", 0.35000000 );
                    SET_PAD_SHAKE( 0, 1000, 64 );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                    l_U626._fU12 = 569;
                     /* RESETTIMER */ sub_2466( ref l_U626 );
                     /* STARTTIMER */ sub_1757( ref l_U626 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_21", 0 );
                    l_U169 = 26;
                    break;
                    case 26:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U626 ))
                    {
                        if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 123250951, ref g_U1272 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Max's node to S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART6.", 0 );
                            PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1098(), "/Global/S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART6" );
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Gio's ISS node to S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART6", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART6" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The S_BUS_10_04 ISS is NOT loaded!!!", 0 );
                        }
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_22", 0 );
                        l_U169 = 27;
                    }
                    break;
                    case 27:
                    DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                    ATTACH_PED_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, l_U1551, l_U1256, 0.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1554, l_U1257, 0.00000000, 0, 0, 0, 1 );
                     /* CAM_PLAY_STATIC_CAM */ sub_56320( ref l_U696[13] );
                    SHAKE_CAM( l_U696[13], "SMALL_EXPLOSION_SHAKE", 0.35000000 );
                    SET_PAD_SHAKE( 0, 1000, 64 );
                    l_U626._fU12 = 599;
                     /* RESETTIMER */ sub_2466( ref l_U626 );
                     /* STARTTIMER */ sub_1757( ref l_U626 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_23", 0 );
                    l_U169 = 28;
                    break;
                    case 28:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U626 ))
                    {
                         /* P_START_VEHICLE_RECORDING */ sub_19940( g_U2918, g_U2335, 1.00000000, 9350.00000000 );
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_24", 0 );
                        l_U169 = 29;
                    }
                    break;
                    case 29:
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera length is:", 0 );
                    PRINTINT( CAMERA_ANIMATED_LENGTH( "LEVEL_S_BUS_CP_06", "10_04_BUS_CAMS_SH12_SH13_cam" ) );
                    PRINTNL();
                    CAMERA_PLAY_ANIMATED( "LEVEL_S_BUS_CP_06", "10_04_BUS_CAMS_SH12_SH13_cam", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
                     /* CREATETIMER */ sub_1607( ref l_U617, 150, 1, 0 );
                     /* STARTTIMER */ sub_1757( ref l_U617 );
                    l_U626._fU12 = 1249;
                     /* RESETTIMER */ sub_2466( ref l_U626 );
                     /* STARTTIMER */ sub_1757( ref l_U626 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_25", 0 );
                    l_U169 = 30;
                    break;
                    case 30:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U626 ))
                    {
                        if ( /* F_STREAMREQ_ISEQ_IS_ASSET_LOADED */ sub_6767( 123250951, ref g_U1272 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Max's node to S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART7.", 0 );
                            PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1098(), "/Global/S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART7" );
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Setting Gio's ISS node to S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART7", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART7" );
                        }
                        else
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The S_BUS_10_04 ISS is NOT loaded!!!", 0 );
                        }
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_26", 0 );
                        l_U169 = 31;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
                        PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
                        PRINTNL();
                    }
                    break;
                    case 31:
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Enable standoff loading...", 0 );
                     /* P_START_CHECKPOINT_THREAD */ sub_144212( ref g_U765[11] );
                    DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                    ATTACH_PED_TO_VEHICLE(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, 0, l_U1557, l_U1258, 0.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH(  /* PLAYER_PED_ID */ sub_1098(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1560, l_U1259, 0.00000000, 0, 0, 0, 1 );
                    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                    {
                        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U2918 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "The viRailBus vehicle playback is pausing...", 0 );
                            PAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
                        }
                    }
                     /* CLEANVEHICLE */ sub_4037( l_U290 );
                    l_U626._fU12 = 1050;
                     /* RESETTIMER */ sub_2466( ref l_U626 );
                     /* STARTTIMER */ sub_1757( ref l_U626 );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_OUT", 0 );
                    l_U169 = 38;
                    break;
                    case 38:
                    if ( /* ISTIMERDONE */ sub_1890( ref l_U626 ))
                    {
                        if (NOT IS_SCREEN_FADED_OUT())
                        {
                            SET_FADE_MUTE_OVERRIDE( 1 );
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Fading out for start of cutscene.", 0 );
                            DO_SCREEN_FADE_OUT( 900 );
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_FADEOUT", 0 );
                            l_U169 = 37;
                        }
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "The animated camera current time:", 0 );
                        PRINTINT( CAMERA_ANIMATED_CURRENT_TIME() );
                        PRINTNL();
                    }
                    break;
                    case 37:
                    if ((NOT IS_SCREEN_FADING_OUT()) AND (IS_SCREEN_FADED_OUT()))
                    {
                        if (ISEQ_QUERY_STATE( 123250951, 3 ))
                        {
                             /* WRITESCRIPTLOG */ sub_442( "CCB", "Terminating the S_BUS_10_04 ISS.", 0 );
                            ISEQ_UNREGISTER_ENTITY( 123250951, "10_04_player" );
                            ISEQ_UNREGISTER_ENTITY( 123250951, "10_04_female" );
                            ISEQ_TERMINATE( 123250951 );
                             /* P_STREAMREQ_ISEQ_REMOVE */ sub_7159( 123250951, ref g_U1272 );
                        }
                        if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1136() )))
                        {
                            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1098() )))
                            {
                                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Detaching the player ped...", 0 );
                                DETACH_PED(  /* PLAYER_PED_ID */ sub_1098(), 1 );
                                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Teleporting the player ped...", 0 );
                                 /* TELEPORTPED */ sub_14038(  /* PLAYER_PED_ID */ sub_1098(), g_U2339[11], g_U2466[11] );
                            }
                        }
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_POST_MIDSCENE", 0 );
                        l_U169 = 36;
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Waiting for screen to fade out...", 0 );
                    }
                    break;
                    case 36:
                    SET_CAM_SIDE_LEFT( 0 );
                    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0, 1065353216, 0 );
                    SET_GAMEPLAY_CAM_RELATIVE_PITCH( 0, 1065353216, 0 );
                    RENDER_SCRIPT_CAMS( 0, 0, 0, 0 );
                     /* CAM_DESTROY_CAMERA_INDEX_ARRAY */ sub_4385( ref l_U696 );
                    DESTROY_CAM( l_U2157 );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                    BULLET_CAMERA_PRELOAD_TEXT_BINK( l_U2158, 0 );
                    if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2334, ref g_U1474 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Unloading the gnRailshooterBusCrash1 vehicle recording.", 0 );
                         /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2334, ref g_U1474 );
                    }
                    if ( /* F_STREAMREQ_VEHICLE_RECORDING_IS_ASSET_LOADED */ sub_8162( g_U2335, ref g_U1474 ))
                    {
                         /* WRITESCRIPTLOG */ sub_442( "CCB", "Unloading the gnRailshooterBusCrash2 vehicle recording.", 0 );
                         /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2335, ref g_U1474 );
                    }
                     /* CLEANPED */ sub_3806( g_U2595 );
                    if (NOT l_U122)
                    {
                        g_U2873 = 1;
                    }
                    SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "eEndCrashEvent - STATE_MIDSCENE_COMPLETE", 0 );
                    l_U169 = 39;
                    break;
                    case 39: break;
                }
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "The viRailBus vehicle is NOT valid!!!", 0 );
            }
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "The piGiovanna ped is NOT valid!!!", 0 );
        }
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "The PLAYER_PED_ID ped is NOT valid!!!", 0 );
    }
    return;
}

/* P_RAIL_PASSOS_HELICOPTER_SPAWN */ void sub_132853()
{
     /* WRITESCRIPTLOG */ sub_442( "MF", "P_RAIL_PASSOS_HELICOPTER_SPAWN - START", 0 );
     /* WRITESCRIPTLOG */ sub_442( "MF", "Creating Passos' Helicopter...", 0 );
    l_U296 =  /* CREATEVEHICLE */ sub_18389( g_U2099, l_U1498, 0.00000000, 0, 0, 0 );
    if (DOES_VEHICLE_EXIST( l_U296 ))
    {
        if (NOT (IS_VEHICLE_DEAD( l_U296 )))
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "The viHeli vehicle was successfully created.", 0 );
             /* WRITESCRIPTLOG */ sub_442( "CCB", "Silencing the viHeli vehicle...", 0 );
            SILENCE_VEHICLE( l_U296, 1 );
            SET_VEHICLE_VISIBLE( l_U296, 0 );
            l_U286 = CREATE_PED_INSIDE_VEHICLE( l_U296, 26, g_U2105, -1, 0, 0 );
            if (NOT (IS_PED_DEAD( l_U286 )))
            {
                SET_PED_VISIBLE( l_U286, 0 );
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U286, 1 );
            }
            else
            {
                SCRIPT_ASSERT( "Could not create pilot for Passos Helicopter!", 0 );
            }
            FREEZE_VEHICLE_POSITION( l_U296, 1 );
            SET_VEHICLE_CAN_BE_DAMAGED( l_U296, 0 );
            SET_VEHICLE_PROOFS( l_U296, 1, 1, 1, 1, 1 );
            SET_VEHICLE_HEALTH( l_U296, 100 );
            SET_VEHICLE_PETROL_TANK_HEALTH( l_U296, 100.00000000 );
            SET_VEHICLE_ENGINE_ON( l_U296, 1, 1 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_442( "CCB", "The viHeli vehicle is NOT valid!!!", 0 );
        }
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_442( "CCB", "The viHeli vehicle is NOT valid!!!", 0 );
    }
     /* WRITESCRIPTLOG */ sub_442( "MF", "P_RAIL_PASSOS_HELICOPTER_SPAWN - END", 0 );
    return;
}

/* P_RAIL_PASSOS_HELICOPTER_MOVE */ void sub_133981()
{
     /* WRITESCRIPTLOG */ sub_442( "MF", "P_RAIL_PASSOS_HELICOPTER_MOVE - START", 0 );
    if (NOT (IS_VEHICLE_DEAD( l_U296 )))
    {
        SET_VEHICLE_VISIBLE( l_U296, 1 );
        if (NOT (IS_PED_DEAD( l_U286 )))
        {
            SET_PED_VISIBLE( l_U286, 1 );
        }
        FREEZE_VEHICLE_POSITION( l_U296, 0 );
         /* P_START_VEHICLE_RECORDING */ sub_19940( l_U296, g_U2338, l_U734, l_U735 );
    }
     /* WRITESCRIPTLOG */ sub_442( "MF", "P_RAIL_PASSOS_HELICOPTER_MOVE - END", 0 );
    return;
}

/* P_RAIL_START_CRASH_BUSES */ void sub_134231()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_RAIL_START_CRASH_BUSES", 0 );
    if (NOT (DOES_VEHICLE_EXIST( l_U290 )))
    {
         /* P_SPAWN_RAIL_BUS_HIT */ sub_124059();
    }
    if (NOT (IS_VEHICLE_DEAD( l_U290 )))
    {
        SET_VEHICLE_LIGHTS( l_U290, 1 );
    }
    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
    {
        SET_VEHICLE_ENGINE_ON( g_U2918, 1, 0 );
        SET_VEHICLE_LIGHTS( g_U2918, 1 );
        SET_VEHICLE_EXTRA( g_U2918, 3, 1 );
        SET_VEHICLE_EXTRA( g_U2918, 8, 1 );
        SET_VEHICLE_EXTRA( g_U2918, 9, 0 );
        SET_VEHICLE_EXTRA( g_U2918, 6, 0 );
        SET_VEHICLE_EXTRA( g_U2918, 7, 1 );
    }
    return;
}

/* P_INITIALIZE_IMAGEFX_10_04_BUS */ void sub_134695()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_INITIALIZE_IMAGEFX_MID_12_BUS", 0 );
     /* P_INIT_IMAGEFX */ sub_98808( ref l_U1991 );
    l_U1991[0]._fU4 = "TRIPLE_INTERLACE_HOLD";
    l_U1991[0]._fU12 = l_U2154;
    l_U1991[0]._fU8 = 4;
    l_U1991[0]._fU32 = 0;
    l_U1991[1]._fU4 = "TRIPLE_MOVE_RIGHT_COLOR_SPLIT5";
    l_U1991[1]._fU12 = l_U2155;
    l_U1991[1]._fU8 = 4;
    l_U1991[1]._fU32 = 0;
    l_U1991[2]._fU4 = "GAMMA_SATURATION_COLOR_ZOOM_X";
    l_U1991[2]._fU12 = l_U2156;
    l_U1991[2]._fU8 = 4;
    l_U1991[2]._fU32 = 0;
    l_U1991[3]._fU4 = "BLUR_ZOOM_LIGHT_FAST";
    l_U1991[3]._fU12 = l_U2156 + 1000;
    l_U1991[3]._fU20 = 1;
    l_U1991[3]._fU8 = 4;
    l_U1991[3]._fU32 = 0;
    l_U1991[5]._fU4 = "FLICKER_VIBRATE_INTERLACE_01";
    l_U1991[5]._fU12 = l_U2156 + 2000;
    l_U1991[5]._fU8 = 4;
    l_U1991[5]._fU32 = 0;
    l_U72 = 0;
    return;
}

/* P_START_IMAGEFX_10_04_BULLETCAM */ void sub_140408()
{
     /* WRITESCRIPTLOG */ sub_442( "CO", "P_START_IMAGEFX_10_04_BULLETCAM", 0 );
    BULLET_CAMERA_PRELOAD_TEXT_BINK( l_U2158, 1 );
     /* CLEANCAMERA */ sub_3420( ref l_U2157 );
    l_U2157 = CREATE_CAM( "DEFAULT_BULLET_CAMERA", 1 );
    SETUP_BULLET_CAMERA_SCENE( l_U2157, l_U2158, 200.36000000, -30.00000000, 0.00000000, 185.82000000, -65.94000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, "", "" );
    SET_CAM_ACTIVE( l_U2157, 1 );
    return;
}

/* P_START_CHECKPOINT_THREAD */ void sub_144212(int iParam0)
{
    iParam0->_fU36 = 1;
    return;
}

/* F_HANDLE_RAILSHOOTER_LAST_LIVING_PED */ int sub_145989(unknown uParam0)
{
    int I;

    if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_52366( uParam0 )) == 1)
    {
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
            {
                 /* WRITESCRIPTLOG */ sub_442( "CCB", "Disabling one shot kill on ped:", 0 );
                PRINTINT( I );
                PRINTNL();
                SET_PED_AS_ONE_SHOT_KILL( (uParam0^)[I], 0 );
                if (NOT (GET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I] )))
                {
                     /* WRITESCRIPTLOG */ sub_442( "CCB", "Enabling bullet cam on ped:", 0 );
                    PRINTINT( I );
                    PRINTNL();
                    SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I], 1 );
                }
                return 1;
            }
        }
    }
    return 0;
}

/* P_UNLOAD_ASSETS */ void sub_146855()
{
     /* WRITESCRIPTLOG */ sub_442( "CCB", "P_UNLOAD_ASSETS", 0 );
     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2105, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2099, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2128, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2143, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2144, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2145, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2146, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2151, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2134, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2136, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2137, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2138, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2139, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2140, ref g_U910 );
     /* P_STREAMREQ_MODELNAMES_REMOVE */ sub_5595( g_U2141, ref g_U910 );
     /* P_STREAMREQ_WEAPON_TYPE_REMOVE */ sub_147132( g_U2860, ref g_U1211 );
     /* P_STREAMREQ_WEAPON_TYPE_REMOVE */ sub_147132( g_U2861, ref g_U1211 );
     /* P_STREAMREQ_ANIM_DICT_REMOVE */ sub_147480( ref g_U1896, ref g_U1369 );
     /* P_STREAMREQ_ANIM_DICT_REMOVE */ sub_147480( "LEVEL_S_BUS_RS", ref g_U1369 );
     /* P_STREAMREQ_ANIM_DICT_REMOVE */ sub_147480( "FACE_GIOBUS", ref g_U1369 );
     /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2330, ref g_U1474 );
     /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2331, ref g_U1474 );
     /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2332, ref g_U1474 );
     /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2333, ref g_U1474 );
     /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2333, ref g_U1474 );
     /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2334, ref g_U1474 );
     /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2335, ref g_U1474 );
     /* P_STREAMREQ_VEHICLE_RECORDING_REMOVE */ sub_8446( g_U2338, ref g_U1474 );
     /* P_STREAMREQ_ACTION_TREE_REMOVE */ sub_147986( ref g_U2008, ref g_U1535 );
     /* P_STREAMREQ_ACTION_TREE_REMOVE */ sub_147986( ref g_U2024, ref g_U1535 );
    return;
}

/* P_STREAMREQ_WEAPON_TYPE_REMOVE */ void sub_147132(int iParam0, unknown uParam1)
{
    int I;
    int iVar5;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if (((uParam1^)[I]._fU4 == 1) || (((uParam1^)[I]._fU4 == 2) || ((uParam1^)[I]._fU4 == 3)))
        {
            if ((uParam1^)[I]._fU0 == iParam0)
            {
                iVar5 =  /* F_STREAMREQ_THREADID_IS_INDEX_AVAILABLE_FOR_REMOVE */ sub_5739( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU8 );
                if (iVar5 == -1)
                {
                    (uParam1^)[I]._fU4 = 4;
                    return;
                }
                else
                {
                    DISPLAYF( "[CCB] ### Requested ThreadID: {} ###", 1, 513, iVar5 );
                    DISPLAYF( "Trying to remove a WEAPON_TYPE asset that was requested by another thread!!!", 0 );
                    return;
                }
            }
        }
    }
    return;
}

/* P_STREAMREQ_ANIM_DICT_REMOVE */ void sub_147480(unknown uParam0, unknown uParam1)
{
    int I;
    int iVar5;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if (((uParam1^)[I]._fU32 == 1) || (((uParam1^)[I]._fU32 == 2) || ((uParam1^)[I]._fU32 == 3)))
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[I]._fU0, uParam0 ))
            {
                iVar5 =  /* F_STREAMREQ_THREADID_IS_INDEX_AVAILABLE_FOR_REMOVE */ sub_5739( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU36 );
                if (iVar5 == -1)
                {
                    (uParam1^)[I]._fU32 = 4;
                    return;
                }
                else
                {
                    DISPLAYF( "[CCB] ### Requested ThreadID: {} ###", 1, 513, iVar5 );
                    DISPLAYF( "Trying to remove a ANIM_DICT asset that was requested by another thread!!!", 0 );
                    return;
                }
            }
        }
    }
    return;
}

/* P_STREAMREQ_ACTION_TREE_REMOVE */ void sub_147986(unknown uParam0, unknown uParam1)
{
    int I;
    int iVar5;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if (((uParam1^)[I]._fU64 == 1) || (((uParam1^)[I]._fU64 == 2) || ((uParam1^)[I]._fU64 == 3)))
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[I]._fU0, uParam0 ))
            {
                iVar5 =  /* F_STREAMREQ_THREADID_IS_INDEX_AVAILABLE_FOR_REMOVE */ sub_5739( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU68 );
                if (iVar5 == -1)
                {
                    (uParam1^)[I]._fU64 = 4;
                    return;
                }
                else
                {
                    DISPLAYF( "[CCB] ### Requested ThreadID: {} ###", 1, 513, iVar5 );
                    DISPLAYF( "Trying to remove a ACTION_TREE asset that was requested by another thread!!!", 0 );
                    return;
                }
            }
        }
    }
    return;
}

