void main()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;

    l_U0 = 1;
    l_U1 = 144;
    l_U2 = "PED_DEF";
    l_U44 = 1.00000000;
    l_U56 = 0;
    l_U97 = 0;
    l_U117 = -1;
    l_U118 = {64536, 64536, 64536};
    l_U121 = 1;
    l_U122 = 1;
    l_U162 = 0;
    l_U174 = 0;
    l_U175 = 1;
    l_U176 = 0;
    l_U177 = 1.00000000;
    l_U178 = -5.00000000;
    l_U179 = 0;
    l_U180 = 0;
    l_U181 = 0;
    l_U185 = 42;
    l_U186 = 0;
    l_U187 = 0;
    l_U188 = 0;
    l_U189 = 0;
    l_U190 = 0;
    l_U191 = 90.00000000;
    l_U192 = {0.00000000, 0.00000000, 0.00000000};
    l_U195 = {0.00000000, 0.00000000, 0.00000000};
    l_U198 = 0;
    l_U199 = 0;
    l_U200 = 0;
    l_U201 = 0;
    l_U202 = 0;
    l_U203 = 0;
    l_U204 = nil;
    l_U205 = {0.00000000, 0.00000000, 0.00000000};
    l_U208 = 0;
    l_U209 = 0;
    l_U210 = 0;
    l_U262 = 0;
    l_U263 = 0;
    l_U264 = 1;
    l_U266 = 0;
    l_U267 = 0;
    l_U268 = 1500;
    l_U279 = 0;
    l_U283 = 1;
    l_U284 = 0;
    l_U285 = -452828882;
    l_U286 = 941367160;
    l_U287 = 1398588339;
    l_U288 = 1706800821;
    l_U298 = 520;
    l_U299 = 0.06000000;
    l_U300 = 1;
    l_U317 = {-217.95000000, -19.23000000, -11.77000000};
    l_U320 = {0, 0, 180};
    l_U323 = {-219.00000000, -20.00000000, -6.65000000};
    l_U326 = {-45.00000000, 0.00000000, 0.00000000};
    l_U329 = {-219.00000000, -20.00000000, -7.65000000};
    l_U332 = {0, 0, 0};
    l_U335 = {-212.22800000, -19.34800000, -7.34800000};
    l_U338 = {0.00000000, 0.00000000, 270.00000000};
    l_U341 = {-217.95000000, -19.25000000, -9.55000000};
    l_U344 = {0, 0, 180};
    l_U347 = {-214.25500000, -19.40000000, -9.50000000};
    l_U350 = {0, 0, 0};
    l_U353 = "mid_06_nybar_concat";
    l_U457 = 25398;
    l_U458 = 26500;
    l_U459 = "mid_02ab_nybar";
    l_U521 = "MID_02aa_NYBAR_concat";
    l_U522 = 0;
    l_U595 = 0;
    l_U596 = 0;
    l_U597 = "mid_03_nybar_concat";
    l_U630 = 0;
    StrCopy( ref l_U701, "mid_03c_nybar_concat", 32 );
    l_U741 = 0;
    l_U742 = 0;
    l_U743 = 0;
    StrCopy( ref l_U745, "00_00_bp_sh28", 32 );
    StrCopy( ref l_U753, "mid_02aa_nybar_concat", 32 );
    StrCopy( ref l_U761, "mid_02aa_nybar_sh1", 32 );
    StrCopy( ref l_U769, "mid_02aa_nybar_sh2", 32 );
    StrCopy( ref l_U777, "mid_02aa_nybar_sh3", 32 );
    StrCopy( ref l_U785, "mid_02ab_nybar", 32 );
    StrCopy( ref l_U793, l_U597, 32 );
    StrCopy( ref l_U801, "mid_03_nybar_sh02", 32 );
    StrCopy( ref l_U809, "mid_03_nybar_sh04", 32 );
    StrCopy( ref l_U817, "mid_03_nybar_sh06", 32 );
    StrCopy( ref l_U825, "mid_03_nybar_sh08", 32 );
    StrCopy( ref l_U833, "mid_03_nybar_sh09", 32 );
    StrCopy( ref l_U841, "mid_03_nybar_sh12", 32 );
    l_U849 = {l_U701};
    StrCopy( ref l_U857, l_U353, 32 );
    StrCopy( ref l_U865, "mid_06_nybar_pt7", 32 );
    StrCopy( ref l_U873, "mid_06_nybar_sh10", 32 );
    StrCopy( ref l_U881, "mid_06_nybar_sh11", 32 );
    StrCopy( ref l_U889, "mid_06_nybar_sh12", 32 );
    StrCopy( ref l_U897, "mid_06_nybar_sh13", 32 );
    StrCopy( ref l_U905, "mid_06_nybar_sh14", 32 );
    StrCopy( ref l_U913, "mid_06_nybar_sh15", 32 );
    StrCopy( ref l_U921, "mid_06_nybar_sh16", 32 );
    StrCopy( ref l_U929, "mid_08_nybar_concat", 32 );
    StrCopy( ref l_U937, "mid_08_nybar_sh1", 32 );
    StrCopy( ref l_U945, "mid_08_nybar_sh2", 32 );
    StrCopy( ref l_U953, "mid_08_nybar_sh3", 32 );
    StrCopy( ref l_U961, "mid_08_nybar_sh4", 32 );
    StrCopy( ref l_U969, "mid_08_nybar_sh5", 32 );
    StrCopy( ref l_U977, "mid_08_nybar_sh6", 32 );
    l_U985 = 0;
    l_U993 = 0;
     /* P_FADE_IN_AND_WAIT */ sub_1631( 0 );
     /* NIS_PRE_SETUP */ sub_1789( 1, 0, 0, 1 );
    if (GET_CUTSCENE_CAPTURE_REQUEST( 32, ref uVar2 ))
    {
        l_U985 = 1;
         /* P_PLAY_CUTSCENE */ sub_2078( uVar2 );
        l_U985 = 0;
    }
    else
    {
        while (true)
        {
             /* P_HANDLE_CUTSCENES */ sub_31824();
            WAIT( 0 );
        }
    }
    return;
}

/* P_FADE_IN_AND_WAIT */ void sub_1631(unknown uParam0)
{
    if ((IS_SCREEN_FADING_IN() == 0) AND (IS_SCREEN_FADED_IN() == 0))
    {
        DO_SCREEN_FADE_IN( uParam0 );
        while (IS_SCREEN_FADED_IN() == 0)
        {
            DISPLAYF( "[SP]### Waiting for screen to fade in... ###", 0 );
            WAIT( 0 );
        }
    }
    return;
}

/* NIS_PRE_SETUP */ void sub_1789(int iParam0, int iParam1, unknown uParam2, boolean bParam3)
{
    END_POSTFX_BLENDER( 12, 0 );
    if (bParam3)
    {
        STOP_ALL_IMAGEFX( 0 );
    }
    SET_WIDESCREEN_BORDERS( 1, 500 );
    DISPLAY_HUD( 0 );
    if (iParam0 == 1)
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1867() )))
        {
            SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1905(), 0, uParam2 );
            SET_PED_DUCKING(  /* PLAYER_PED_ID */ sub_1867(), 0 );
            if (iParam1 == 1)
            {
                CLEAR_PED_TASKS_IMMEDIATELY(  /* PLAYER_PED_ID */ sub_1867() );
            }
            SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_1867(), 1 );
        }
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    return;
}

/* PLAYER_PED_ID */ int sub_1867()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED(  /* PLAYER_ID */ sub_1905() );
    }
    return 0;
}

/* PLAYER_ID */ void sub_1905()
{
    return GET_PLAYER_ID();
}

/* P_PLAY_CUTSCENE */ void sub_2078(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    if ((ARE_STRINGS_EQUAL( ref uParam0, ref l_U777 )) || ((ARE_STRINGS_EQUAL( ref uParam0, ref l_U769 )) || ((ARE_STRINGS_EQUAL( ref uParam0, ref l_U761 )) || (ARE_STRINGS_EQUAL( ref uParam0, ref l_U753 )))))
    {
         /* P_PLAY_MIDSCENE_02AA */ sub_2163( ref uParam0 );
    }
    else if (ARE_STRINGS_EQUAL( ref uParam0, ref l_U785 ))
    {
         /* P_PLAY_MIDSCENE_02AB */ sub_8178();
    }
    else if (ARE_STRINGS_EQUAL( ref uParam0, ref l_U745 ))
    {
         /* P_PLAY_00_00_BP_SH28 */ sub_10821();
    }
    else if ((ARE_STRINGS_EQUAL( ref uParam0, ref l_U841 )) || ((ARE_STRINGS_EQUAL( ref uParam0, ref l_U833 )) || ((ARE_STRINGS_EQUAL( ref uParam0, ref l_U825 )) || ((ARE_STRINGS_EQUAL( ref uParam0, ref l_U817 )) || ((ARE_STRINGS_EQUAL( ref uParam0, ref l_U809 )) || ((ARE_STRINGS_EQUAL( ref uParam0, ref l_U801 )) || (ARE_STRINGS_EQUAL( ref uParam0, ref l_U793 ))))))))
    {
         /* P_PLAY_MIDSCENE_03 */ sub_11778( ref uParam0 );
    }
    else if (ARE_STRINGS_EQUAL( ref uParam0, ref l_U849 ))
    {
         /* PLAY_MIDSCENE_03C */ sub_17298( 0, l_U985 );
    }
    else if ((ARE_STRINGS_EQUAL( ref uParam0, ref l_U921 )) || ((ARE_STRINGS_EQUAL( ref uParam0, ref l_U913 )) || ((ARE_STRINGS_EQUAL( ref uParam0, ref l_U905 )) || ((ARE_STRINGS_EQUAL( ref uParam0, ref l_U897 )) || ((ARE_STRINGS_EQUAL( ref uParam0, ref l_U889 )) || ((ARE_STRINGS_EQUAL( ref uParam0, ref l_U881 )) || ((ARE_STRINGS_EQUAL( ref uParam0, ref l_U873 )) || ((ARE_STRINGS_EQUAL( ref uParam0, ref l_U865 )) || (ARE_STRINGS_EQUAL( ref uParam0, ref l_U857 ))))))))))
    {
         /* PLAY_NYC_MID_06 */ sub_19067( 0, ref l_U986, l_U985, ref uParam0 );
    }
    else if (ARE_STRINGS_EQUAL( ref uParam0, ref l_U929 ))
    {
         /* P_PLAY_MIDSCENE_08 */ sub_28686();
    }
    else if (ARE_STRINGS_EQUAL( ref uParam0, ref l_U937 ))
    {
         /* P_PLAY_MIDSCENE_08_SH1 */ sub_29882();
    }
    else if (ARE_STRINGS_EQUAL( ref uParam0, ref l_U945 ))
    {
         /* P_PLAY_MIDSCENE_08_SH2 */ sub_30169();
    }
    else if (ARE_STRINGS_EQUAL( ref uParam0, ref l_U953 ))
    {
         /* P_PLAY_MIDSCENE_08_SH3 */ sub_30456();
    }
    else if (ARE_STRINGS_EQUAL( ref uParam0, ref l_U961 ))
    {
         /* P_PLAY_MIDSCENE_08_SH4 */ sub_30743();
    }
    else if (ARE_STRINGS_EQUAL( ref uParam0, ref l_U969 ))
    {
         /* P_PLAY_MIDSCENE_08_SH5 */ sub_31030();
    }
    else if (ARE_STRINGS_EQUAL( ref uParam0, ref l_U977 ))
    {
         /* P_PLAY_MIDSCENE_08_SH6 */ sub_31421();
    };;;;;;;;;;;;;
     /* NIS_PRE_SETUP */ sub_1789( 1, 0, 0, 1 );
    return;
}

/* P_PLAY_MIDSCENE_02AA */ void sub_2163(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_02AA start", 0 );
     /* SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR */ sub_2351( 1, 0 );
    if ( /* PLAY_MIDSCENE_02AA */ sub_2826( 0, l_U985, uParam0 ))
    {
         /* NIS_PRE_SETUP */ sub_1789( 1, 0, 0, 1 );
    }
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_02AA end", 0 );
    return;
}

/* WRITESCRIPTLOG */ void sub_2231(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    DISPLAYF( "[{0}][{1}]{3} {2} {3}", 4, 513, uVar5, 1537, uParam0, 1537, uParam1, 1537, sParam2 );
    return;
}

/* SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR */ void sub_2351(unknown uParam0, unknown uParam1)
{
     /* WRITESCRIPTLOG */ sub_2231( "BSW", "SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR start...", 0 );
    PRINTSTRING( "Setting weather for checkpoint: " );
    PRINTINT( uParam0 );
    PRINTNL();
    SET_WEATHER_TRANSITION_IMMEDIATE( uParam1 );
    switch (uParam0)
    {
        case 0:
        case 1:
        case 20:
        case 30:
        SET_TIME_OF_DAY( 12, 0 );
        FREEZE_TIME_OF_DAY( 12, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
        break;
        case 7:
        SET_TIME_OF_DAY( 18, 0 );
        FREEZE_TIME_OF_DAY( 18, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
        break;
        case 2:
        case 3:
        case 4:
        case 5:
        case 6:
        case 8:
        case 21:
        case 22:
        case 24:
        SET_TIME_OF_DAY( 18, 0 );
        FREEZE_TIME_OF_DAY( 18, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "SNOW_LIGHT" );
        break;
        default:
        SET_TIME_OF_DAY( 12, 0 );
        FREEZE_TIME_OF_DAY( 12, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
        break;
    }
    return;
}

/* PLAY_MIDSCENE_02AA */ void sub_2826(boolean bParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;
    int Result;

    Result = 0;
    if (IS_STRING_NULL( uParam2 ))
    {
        uParam2 = l_U521;
    }
    switch (l_U522)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_2231( "BSW", "PLAY_MIDSCENE_02aa start", 0 );
         /* NIS_PRE_SETUP */ sub_1789( 1, 0, 0, 1 );
        if (NOT bParam0)
        {
             /* LOAD_MID_02AA_ASSETS */ sub_2973();
             /* LOADSEAMLESSCUTSCENE */ sub_3718( uParam2, 1 );
             /* CREATE_MID_02AA_PEDS_AND_OBJECTS */ sub_4060( bParam0 );
             /* REGISTER_PEDS_MID_02AA */ sub_5859( ref l_U523 );
        }
        else
        {
            CUTSCENE_REGISTER_ISEQ( -382428326 );
        }
        l_U595 = 0;
        g_U3042 = 0;
        l_U596 = 0;
        START_SEAMLESS_CUTSCENE();
        l_U522 = 1;
        break;
        case 1:
        l_U522 = 2;
        break;
        case 2:
        iVar5 = GET_CUTSCENE_TIME_MS();
        if (HAS_CUTSCENE_FINISHED())
        {
             /* CLEANUP_MID_02AA_ASSETS */ sub_6890();
             /* UNLOAD_MID_02AA_ASSETS */ sub_7070();
             /* WRITESCRIPTLOG */ sub_2231( "BSW", "PLAY_MIDSCENE_02aa end", 0 );
            if (l_U283 == 9)
            {
                l_U284 = 9;
            }
            CAMERA_PLAY_ANIMATED( "LEVEL_S_NYBAR_CP_03", "B_OUT_MID_02AA_NYBAR_FWD_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
            Result = 1;
            l_U522 = 0;
        }
        else if (NOT g_U3042)
        {
            if ((iVar5 < 6400) AND (iVar5 > 5400))
            {
                 /* WRITESCRIPTLOG */ sub_2231( "SBA", "PLAY_MIDSCENE_02aa: Brewer shoots thug", 0 );
                SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -336.30000000, -13.40000000, 4.02000000, -338.76000000, -13.29000000, 4.17000000, 100, 1, 434544317, 0 );
                g_U3042 = 1;
            }
        }
        if (NOT l_U596)
        {
            if ((iVar5 < 37000) AND (iVar5 > 36000))
            {
                 /* WRITESCRIPTLOG */ sub_2231( "SBA", "PLAY_MIDSCENE_02aa: Swapping Brewer sceneped", 0 );
                SET_PERSISTENT_PED_VARIATION_ENUM( l_U594, -1786077646 );
                l_U596 = 1;
            }
        }
        if ((NOT l_U595) AND (iVar5 > 6500))
        {
             /* CREATE_HALL_BLOOD_DECAL */ sub_7870();
        }
        if ((l_U283 == 9) AND (iVar5 > 49000))
        {
            l_U284 = 9;
        }
        if ((NOT g_U3043) AND (iVar5 > 49000))
        {
            g_U3043 = 1;
        }
        break;
    }
    return Result;
}

/* LOAD_MID_02AA_ASSETS */ void sub_2973()
{
     /* WRITESCRIPTLOG */ sub_2231( "BSW", "LOAD_NYC_MID_02AA_ASSETS", "***" );
     /* LOADMODEL */ sub_3056( 186202593, 1 );
     /* LOADMODEL */ sub_3056( 755708664, 1 );
     /* LOADWEAPON */ sub_3362( -862236369, 1 );
     /* LOADWEAPON */ sub_3362( 434544317, 1 );
     /* LOADANIMDICT */ sub_3530( "ny_anim", 0, 1 );
     /* LOADMODEL */ sub_3056( 1654676128, 1 );
    return;
}

/* LOADMODEL */ void sub_3056(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
         /* WRITE_STRING */ sub_3173( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* WRITE_STRING */ void sub_3173(unknown uParam0)
{
    PRINTSTRING( uParam0 );
    PRINTNL();
    return;
}

/* LOADWEAPON */ void sub_3362(unknown uParam0, boolean bParam1)
{
    REQUEST_WEAPON( uParam0 );
    if (bParam1)
    {
        while ((HAS_WEAPON_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load weapon: {!f1} : {1} ###", 2, 1, 199730165, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADANIMDICT */ void sub_3530(unknown uParam0, unknown uParam1, int iParam2)
{
    REQUEST_ANIM_DICT( uParam0, uParam1 );
    "[doubled result, dropped if not asigned]";
    if (iParam2 == 1)
    {
        while ((HAS_ANIM_DICT_LOADED( uParam0, uParam1 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an animation dictionary to be loaded: {} ###", 1, 1537, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADSEAMLESSCUTSCENE */ void sub_3718(unknown uParam0, int iParam1)
{
    if (HAS_CUTSCENE_LOADED())
    {
        if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
        {
            SCRIPT_ASSERT( "Another cutscene is already loaded.  You can only load one cutscene into memory.  Your current cutscene will not load into memory.", 0 );
        }
    }
    if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
    {
        PRE_STREAM_SEAMLESS_CUTSCENE( uParam0 );
        if (iParam1 == 1)
        {
            while ((CUTSCENE_IS_LOADED( uParam0 )) == 0)
            {
                DISPLAYF( "[SP]### Waiting for seamless cutscene to load: {} ###", 1, 1537, uParam0 );
                WAIT( 0 );
            }
        }
    }
    return;
}

/* CREATE_MID_02AA_PEDS_AND_OBJECTS */ void sub_4060(boolean bParam0)
{
     /* WRITESCRIPTLOG */ sub_2231( "RJM", "CREATE_MID_03_PEDS_AND_OBJECTS - start", 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U581, -332.31260000, -13.02238000, 2.65000000, 92.00000000, -1538180161, 7, 3, 2, 0, 0 );
    if (NOT bParam0)
    {
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U528[0], 0, 0, 0, 0.00000000, -1237558166, 26, 6, 0, 0, 0 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U528[1], 0, 0, 0, 0.00000000, -1244383370, 26, 6, 0, 0, 0 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U528[2], 0, 0, 0, 0.00000000, -941579388, 26, 6, 0, 0, 0 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U528[3], 0, 0, 0, 0.00000000, 525041670, 26, 6, 0, 0, 0 );
        l_U523[0] =  /* CREATEPED */ sub_4476( ref l_U528[0] );
         /* F_GIVEPEDWEAPON */ sub_5210( l_U523[0], -862236369, 25000, 0, 0 );
        l_U523[1] =  /* CREATEPED */ sub_4476( ref l_U528[1] );
        l_U523[2] =  /* CREATEPED */ sub_4476( ref l_U528[2] );
        l_U523[3] =  /* CREATEPED */ sub_4476( ref l_U528[3] );
    }
     /* CLEANPED */ sub_5676( l_U594 );
    l_U594 =  /* CREATEPED */ sub_4476( ref l_U581 );
     /* F_GIVEPEDWEAPON */ sub_5210( l_U594, 434544317, 25000, 0, 0 );
     /* WRITESCRIPTLOG */ sub_2231( "RJM", "CREATE_MID_03_PEDS_AND_OBJECTS - end", 0 );
    return;
}

/* P_CREATEPEDSTRUCTWITHNAME */ void sub_4194(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

/* CREATEPED */ void sub_4476(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_3056( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
     /* SETPEDDEFAULTSTATS */ sub_4967( iParam0->_fU40 );
     /* SETPEDDEFAULTTEMPLATE */ sub_5068( iParam0->_fU40 );
    return iParam0->_fU40;
}

/* SETPEDDEFAULTSTATS */ void sub_4967(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

/* SETPEDDEFAULTTEMPLATE */ void sub_5068(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

/* F_GIVEPEDWEAPON */ void sub_5210(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_3173( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* CLEANPED */ void sub_5676(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

/* REGISTER_PEDS_MID_02AA */ void sub_5859(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_2231( "BSW", "REGISTER_PEDS_MID_02aa - start", 0 );
    if ( /* IS_MAX_VALID */ sub_5939())
    {
         /* WRITESCRIPTLOG */ sub_2231( "BSW", "Registering player with NYC_MID_02aa", "***" );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0 ), "W_PI_Clt1911_Aa_H^1", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT(  /* PLAYER_PED_ID */ sub_1867(), g_U3429, g_U3432 );
        ISEQ_REGISTER_ENTITY( -382428326, "max",  /* PLAYER_PED_ID */ sub_1867(), 0 );
    }
    if ( /* IS_PED_VALID */ sub_5969( l_U594 ))
    {
         /* WRITESCRIPTLOG */ sub_2231( "SBA", "Registering piCrazy with NYC_MID_02aa", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U594, "Crazy_Man", 0 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( l_U594, ref g_U3045 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U594, 0, 0 ), "W_SG_BenM3_Aa_H", 0 );
    }
    if ( /* IS_PED_VALID */ sub_5969( (uParam0^)[0] ))
    {
         /* WRITESCRIPTLOG */ sub_2231( "SBA", "Registering piThug with NYC_MID_02aa", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam0^)[0], "G_NY_T_Sold_C", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( (uParam0^)[0], 0, 0 ), "W_PI_Clt1911_Aa_H", 0 );
    }
    if ( /* IS_PED_VALID */ sub_5969( (uParam0^)[1] ))
    {
         /* WRITESCRIPTLOG */ sub_2231( "SBA", "Registering piThug with NYC_MID_02aa", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam0^)[1], "G_NY_T_Sold_C^8", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( (uParam0^)[1], 0, 0 ), "W_PI_Clt1911_Aa_H", 0 );
    }
    if ( /* IS_PED_VALID */ sub_5969( (uParam0^)[2] ))
    {
         /* WRITESCRIPTLOG */ sub_2231( "SBA", "Registering piThug with NYC_MID_02aa", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam0^)[2], "G_NY_T_Sold_C^9", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( (uParam0^)[2], 0, 0 ), "W_PI_Clt1911_Aa_H", 0 );
    }
    REGISTER_HIDE_ENTITY_AT_POSITION( g_U2811._fU0, g_U2811._fU4 );
    return;
}

/* IS_MAX_VALID */ int sub_5939()
{
    if ( /* IS_PED_VALID */ sub_5969(  /* PLAYER_PED_ID */ sub_1867() ))
    {
        return 1;
    }
    return 0;
}

/* IS_PED_VALID */ int sub_5969(unknown uParam0)
{
    if ((NOT (IS_PED_DEAD( uParam0 ))) AND (DOES_PED_EXIST( uParam0 )))
    {
        return 1;
    }
    return 0;
}

/* CLEANUP_MID_02AA_ASSETS */ void sub_6890()
{
     /* WRITESCRIPTLOG */ sub_2231( "BSW", "CLEAN_UP_NYC_MID_02AA_ASSETS", "***" );
     /* CLEANPEDARRAY */ sub_6978( ref l_U523 );
     /* CLEANPED */ sub_5676( l_U594 );
    return;
}

/* CLEANPEDARRAY */ void sub_6978(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
         /* CLEANPED */ sub_5676( (uParam0^)[I] );
    }
    return;
}

/* UNLOAD_MID_02AA_ASSETS */ void sub_7070()
{
     /* WRITESCRIPTLOG */ sub_2231( "SBA", "UNLOAD_NYC_MID_02AA_ASSETS", "***" );
     /* UNLOADMODEL */ sub_7156( 186202593 );
     /* UNLOADMODEL */ sub_7156( 755708664 );
     /* UNLOADWEAPON */ sub_7321( -862236369 );
     /* UNLOADWEAPON */ sub_7321( 434544317 );
     /* UNLOADMODEL */ sub_7156( 1654676128 );
     /* UNLOADANIMDICT */ sub_7393( "ny_anim" );
    return;
}

/* UNLOADMODEL */ void sub_7156(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 1)
    {
        SET_MODEL_AS_NO_LONGER_NEEDED( uParam0 );
    }
    else
    {
         /* WRITE_STRING */ sub_3173( "[SP]### ERROR! (UnloadModel) Trying to unload a model that isn't in the img! ###" );
    }
    return;
}

/* UNLOADWEAPON */ void sub_7321(unknown uParam0)
{
    SET_WEAPON_AS_NO_LONGER_NEEDED( uParam0 );
    return;
}

/* UNLOADANIMDICT */ void sub_7393(unknown uParam0)
{
    REMOVE_ANIM_DICT( uParam0, 0 );
    return;
}

/* CREATE_HALL_BLOOD_DECAL */ void sub_7870()
{
    if (NOT (DOES_OBJECT_EXIST( g_U3044 )))
    {
         /* WRITESCRIPTLOG */ sub_2231( "SBA", "CREATE_HALL_BLOOD_DECAL", 0 );
        g_U3044 = CREATE_OBJECT( 1654676128, -339.77700000, -12.29400000, 2.07000000, 1, 0 );
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( g_U3044, ref g_U3529 );
        l_U595 = 1;
    }
    return;
}

/* P_PLAY_MIDSCENE_02AB */ void sub_8178()
{
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_02AB start", 0 );
     /* SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR */ sub_2351( 2, 0 );
    if ( /* PLAY_MIDSCENE_02AB */ sub_8260( 0, 0 ))
    {
         /* NIS_PRE_SETUP */ sub_1789( 1, 0, 0, 1 );
    }
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_02AB end", 0 );
    return;
}

/* PLAY_MIDSCENE_02AB */ int sub_8260(boolean bParam0, boolean bParam1)
{
     /* WRITESCRIPTLOG */ sub_2231( "RJM", "PLAY_MIDSCENE_02AB start", 0 );
     /* NIS_PRE_SETUP */ sub_1789( 1, 0, 0, 1 );
    if (NOT bParam0)
    {
         /* BLOCKLOAD_MID_02AB_ASSETS */ sub_8347();
         /* LOADSEAMLESSCUTSCENE */ sub_3718( l_U459, 1 );
    }
     /* CREATE_MID_02AB_PEDS_AND_OBJECTS */ sub_8831();
     /* REGISTER_PEDS_CUT_02AB */ sub_9074();
    if (bParam1)
    {
        START_CUTSCENE_CAPTURE( l_U459 );
    }
    START_SEAMLESS_CUTSCENE();
     /* WRITESCRIPTLOG */ sub_2231( "bsw", "activating forced aim in cutscenet", 0 );
    SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_1905(), 1, 0 );
    if (bParam0)
    {
         /* NIS_CREATE_STATIC_CAM */ sub_9551( ref l_U490, -362.49150000, -3.70692400, 7.83284600, -0.11026100, -0.00000000, -90.04360000, 45, 0 );
        WAIT( 0 );
         /* NIS_PLAY_STATIC_CAMERA */ sub_9935( ref l_U490 );
    }
    if (bParam1)
    {
        STOP_CUTSCENE_CAPTURE();
    }
    while (NOT HAS_CUTSCENE_FINISHED())
    {
        WAIT( 0 );
    }
    if (bParam0)
    {
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U3141[2]._fU16, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U3141[2]._fU20, 1065353216, 0 );
    }
     /* CLEANUP_MID_02AB_ASSETS */ sub_10261();
     /* UNLOAD_MID_02AB_ASSETS */ sub_10314();
     /* NIS_POST_SETUP */ sub_10389( 1, 1 );
     /* WRITESCRIPTLOG */ sub_2231( "RJM", "PLAY_MIDSCENE_02AB end", 0 );
    return 1;
}

/* BLOCKLOAD_MID_02AB_ASSETS */ void sub_8347()
{
     /* BLOCKLOADMODEL */ sub_8390( 233534649 );
     /* BLOCKLOADMODEL */ sub_8390( 466468872 );
     /* BLOCKLOADMODEL */ sub_8390( -1241751852 );
    return;
}

/* BLOCKLOADMODEL */ void sub_8390(unknown uParam0)
{
    DISPLAYF( "[MSWW]### Trying to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
         /* WRITE_STRING */ sub_3173( "[SP]### ERROR! (BlockLoadModel) Trying to block load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    LOAD_ALL_OBJECTS_NOW();
    while ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        LOAD_ALL_OBJECTS_NOW();
        DISPLAYF( "[SP]### Waiting to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
        WAIT( 0 );
    }
    DISPLAYF( "[MSWW]### Has loaded model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
    return;
}

/* CREATE_MID_02AB_PEDS_AND_OBJECTS */ void sub_8831()
{
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U463[0], 0, 0, 0, 0.00000000, -2081290352, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U463[1], 0, 0, 0, 0.00000000, 494399252, 7, 3, 2, 0, 0 );
    l_U460[0] =  /* CREATEPED */ sub_4476( ref l_U463[0] );
    if ( /* IS_PED_VALID */ sub_5969( l_U460[0] ))
    {
         /* F_GIVEPEDWEAPON */ sub_5210( l_U460[0], -691403429, 200, 0, 1 );
    }
    l_U460[1] =  /* CREATEPED */ sub_4476( ref l_U463[1] );
    if ( /* IS_PED_VALID */ sub_5969( l_U460[1] ))
    {
         /* F_GIVEPEDWEAPON */ sub_5210( l_U460[1], -862236369, 200, 0, 1 );
    }
    return;
}

/* REGISTER_PEDS_CUT_02AB */ void sub_9074()
{
    if ( /* IS_MAX_VALID */ sub_5939())
    {
        CUTSCENE_REGISTER_PED_TELEPORT(  /* PLAYER_PED_ID */ sub_1867(), g_U3141[2]._fU0, g_U3141[2]._fU12 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1867(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
    }
    if ( /* IS_PED_VALID */ sub_5969( l_U460[0] ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U460[0], "G_NY_T_Sold_D", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U460[0], 0, 0 ), "W_SB_M10_Aa_H", 0 );
    }
    if ( /* IS_PED_VALID */ sub_5969( l_U460[1] ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U460[1], "G_NY_T_Sold_D^1", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U460[1], 0, 0 ), "W_PI_Clt1911_Aa_H", 0 );
    }
    return;
}

/* NIS_CREATE_STATIC_CAM */ void sub_9551(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    iParam0->_fU4 = {uParam4};
    iParam0->_fU16 = {uParam1};
    iParam0->_fU28 = uParam7;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    iParam0->_fU84 = uParam8;
    iParam0->_fU88 = 0;
    iParam0->_fU92 = 0;
    iParam0->_fU40 = 0;
    iParam0->_fU44 = 0;
    iParam0->_fU100 = 1;
    iParam0->_fU104 = 1;
    iParam0->_fU96 = 0;
     /* CREATETIMER */ sub_9703( iParam0 + 48, uParam8, 1, 0 );
    iParam0->_fU0 = CREATE_CAM_WITH_PARAMS( ref g_U649, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 1 );
    SET_CAM_PARAMS( iParam0->_fU0, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 0, 1, 1 );
    return;
}

/* CREATETIMER */ void sub_9703(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

/* NIS_PLAY_STATIC_CAMERA */ void sub_9935(int iParam0)
{
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    SET_CAM_ACTIVE( iParam0->_fU0, 1 );
    RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
     /* STARTTIMER */ sub_10015( iParam0 + 48 );
    iParam0->_fU32 = 1;
    iParam0->_fU40 = 1;
    return;
}

/* STARTTIMER */ void sub_10015(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

/* CLEANUP_MID_02AB_ASSETS */ void sub_10261()
{
     /* CLEANPEDARRAY */ sub_6978( ref l_U460 );
    return;
}

/* UNLOAD_MID_02AB_ASSETS */ void sub_10314()
{
     /* UNLOADMODEL */ sub_7156( 233534649 );
     /* UNLOADMODEL */ sub_7156( 466468872 );
     /* UNLOADMODEL */ sub_7156( -1241751852 );
    return;
}

/* NIS_POST_SETUP */ void sub_10389(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1867() )))
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1905(), 1, 0 );
        SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_1867(), 0 );
        if (bParam0)
        {
             /* P_MAX_RELOAD_WEAPONS */ sub_10487();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

/* P_MAX_RELOAD_WEAPONS */ void sub_10487()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1867() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP(  /* PLAYER_PED_ID */ sub_1867(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP(  /* PLAYER_PED_ID */ sub_1867(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

/* P_PLAY_00_00_BP_SH28 */ void sub_10821()
{
    vector vVar2;
    float fVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;

     /* WRITESCRIPTLOG */ sub_2231( "SP", "P_PLAY_00_00_bp_sh28", 0 );
    RELEASE_TIME_OF_DAY();
    SET_WEATHER_TYPE_NOW_PERSIST( "SNOW_LIGHT" );
    FREEZE_TIME_OF_DAY( 18, 0 );
    vVar2 = {-299.01000000, -18.17000000, 9.10000000};
    fVar5 = -90.00000000;
     /* TELEPORTPED */ sub_10962(  /* PLAYER_PED_ID */ sub_1867(), vVar2, fVar5 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( 0, 1065353216, 0 );
    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1867() )) == 0)
    {
        FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_1867(), 1 );
    }
     /* P_MAKECEMETARYMAX */ sub_11100(  /* PLAYER_PED_ID */ sub_1867() );
    LOAD_SCENE( vVar2 );
    WAIT( 30 );
    while (NOT (GET_NUMBER_OF_STREAMING_REQUESTS() == 0))
    {
        WAIT( 0 );
    }
    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1867() )) == 0)
    {
        FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_1867(), 0 );
    }
    WAIT( 2000 );
     /* LOADSEAMLESSCUTSCENE */ sub_3718( ref l_U745, 1 );
    if (l_U985 == 1)
    {
        START_CUTSCENE_CAPTURE( ref l_U745 );
    }
    START_SEAMLESS_CUTSCENE();
    WAIT( 0 );
    DO_SCREEN_FADE_IN( 0 );
    while (HAS_CUTSCENE_FINISHED() == 0)
    {
        uVar6 = GET_CUTSCENE_SECTION_PLAYING();
        uVar7 = GET_CUTSCENE_TIME();
        uVar8 = GET_CUTSCENE_TIME_MS();
        PRINTSTRING( "[SP] SECTION: " );
        PRINTINT( uVar6 );
        PRINTSTRING( " Time: " );
        PRINTINT( uVar7 );
        PRINTSTRING( " Time MS: " );
        PRINTINT( uVar8 );
        PRINTNL();
        WAIT( 0 );
    }
    if (l_U985 == 1)
    {
        STOP_CUTSCENE_CAPTURE();
    }
    return;
}

/* TELEPORTPED */ void sub_10962(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

/* P_MAKECEMETARYMAX */ void sub_11100(unknown uParam0)
{
    DISPLAYF( "[SP] P_MakeCemetaryMax", 0 );
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_COMPONENT_VARIATION( uParam0, 0, 0, 0, 0 );
        SET_PED_COMPONENT_VARIATION( uParam0, 1, 3, 0, 0 );
        SET_PED_COMPONENT_VARIATION( uParam0, 2, 3, 0, 0 );
        SET_PED_COMPONENT_VARIATION( uParam0, 3, 3, 0, 0 );
        SET_PED_COMPONENT_VARIATION( uParam0, 4, 7, 0, 0 );
        SET_PED_COMPONENT_VARIATION( uParam0, 6, 1, 0, 0 );
        SET_PED_COMPONENT_VARIATION( uParam0, 5, 1, 0, 0 );
        SET_PED_COMPONENT_VARIATION( uParam0, 7, 0, 0, 0 );
        SET_PED_COMPONENT_VARIATION( uParam0, 8, 4, 0, 0 );
        SET_PED_COMPONENT_VARIATION( uParam0, 9, 0, 0, 0 );
        SET_PED_COMPONENT_VARIATION( uParam0, 11, 0, 0, 0 );
        SET_PED_COMPONENT_VARIATION( uParam0, 12, 1, 0, 0 );
    }
    return;
}

/* P_PLAY_MIDSCENE_03 */ void sub_11778(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_03 start", 0 );
     /* SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR */ sub_2351( 2, 0 );
    if ( /* PLAY_MIDSCENE_03 */ sub_11862( 0, l_U985, uParam0 ))
    {
         /* NIS_PRE_SETUP */ sub_1789( 1, 0, 0, 1 );
    }
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_03 end", 0 );
    return;
}

/* PLAY_MIDSCENE_03 */ void sub_11862(boolean bParam0, unknown uParam1, unknown uParam2)
{
    int Result;

    Result = 0;
    if (IS_STRING_NULL( uParam2 ))
    {
        uParam2 = l_U597;
    }
    switch (l_U630)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_2231( "RJM", "PLAY_MIDSCENE_03 start", 0 );
         /* NIS_PRE_SETUP */ sub_1789( 1, 0, 0, 1 );
        if (NOT bParam0)
        {
             /* LOAD_MID_03_ASSETS */ sub_12013();
             /* LOADSEAMLESSCUTSCENE */ sub_3718( uParam2, 1 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_2231( "bsw", "PLAY_MIDSCENE_03 forcing fade in", 0 );
            DO_SCREEN_FADE_IN( 0 );
        }
        if (bParam0)
        {
            CUTSCENE_REGISTER_ISEQ( 1419096468 );
            CUTSCENE_REGISTER_ISEQ( 123489604 );
            CUTSCENE_REGISTER_ISEQ( -900483547 );
            CUTSCENE_REGISTER_ISEQ( -652127296 );
            CUTSCENE_REGISTER_ISEQ( 8102532 );
            CUTSCENE_REGISTER_ISEQ( -1131749617 );
            CUTSCENE_REGISTER_ISEQ( 2119011196 );
            CUTSCENE_REGISTER_ISEQ( -1930417983 );
            SET_PED_DEFAULT_AIM_AT_COORD(  /* PLAYER_PED_ID */ sub_1867(), -287.63280000, 3.79891700, 1.71265600 );
            SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_1905(), 1, 0 );
        }
         /* CREATE_MID_03_PEDS_AND_OBJECTS */ sub_12651();
         /* REGISTER_PEDS_MID_03 */ sub_13208( bParam0 );
        START_SEAMLESS_CUTSCENE();
        l_U630 = 1;
        break;
        case 1:
         /* SET_TOWER_VISIBLE */ sub_16673( 0 );
        l_U630 = 2;
        break;
        case 2:
        if ((l_U283 == 7) AND (GET_CUTSCENE_TIME_MS() > 12945))
        {
            l_U284 = 7;
        }
        if (HAS_CUTSCENE_FINISHED())
        {
            CAMERA_PLAY_ANIMATED( "LEVEL_S_NYBAR_CP_04", "VIG_15B_NYBAR_MPM_FWD_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
        }
        case 3:
        if ((HAS_CUTSCENE_UNLOADED()) AND (HAS_CUTSCENE_FINISHED()))
        {
            if (l_U283 == 7)
            {
                l_U284 = 7;
            }
             /* P_SET_TWO_HANDED_WEAPON_VISIBLE */ sub_14706( l_U598, 1 );
             /* P_SET_TWO_HANDED_WEAPON_VISIBLE */ sub_14706( l_U598, 1 );
             /* SET_TOWER_VISIBLE */ sub_16673( 1 );
             /* CLEANUP_MID_03_ASSETS */ sub_17010();
             /* UNLOAD_MID_03_ASSETS */ sub_17102();
             /* WRITESCRIPTLOG */ sub_2231( "RJM", "PLAY_MIDSCENE_03 end", 0 );
            Result = 1;
            l_U630 = 3;
        }
        break;
    }
    return Result;
}

/* LOAD_MID_03_ASSETS */ void sub_12013()
{
     /* LOADMODEL */ sub_3056( 233534649, 1 );
     /* LOADISEQ */ sub_12061( 1419096468, 1 );
     /* LOADISEQ */ sub_12061( 123489604, 1 );
     /* LOADISEQ */ sub_12061( -900483547, 1 );
     /* LOADISEQ */ sub_12061( -652127296, 1 );
     /* LOADISEQ */ sub_12061( 8102532, 1 );
     /* LOADISEQ */ sub_12061( -1131749617, 1 );
     /* LOADISEQ */ sub_12061( 2119011196, 1 );
     /* LOADISEQ */ sub_12061( -1930417983, 1 );
    return;
}

/* LOADISEQ */ void sub_12061(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to load does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 0)
    {
        ISEQ_REQUEST( uParam0 );
        ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
        if (iParam1 == 1)
        {
            while ((ISEQ_QUERY_STATE( uParam0, 1 )) == 1)
            {
                DISPLAYF( "[SP]### Waiting for interactive sequence to be loaded: {0} {1} ###", 2, 1281, ref uVar4, 513, uParam0 );
                WAIT( 0 );
            }
        }
    }
    return;
}

/* CREATE_MID_03_PEDS_AND_OBJECTS */ void sub_12651()
{
     /* WRITESCRIPTLOG */ sub_2231( "RJM", "CREATE_MID_03_PEDS_AND_OBJECTS - start", 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U632, 0, 0, 0, 0.00000000, -1491110017, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U646, 0, 0, 0, 0.00000000, 951389475, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U660, 0, 0, 0, 0.00000000, 11941526, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U674, 0, 0, 0, 0.00000000, 2031544278, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U688, 0, 0, 0, 0.00000000, -1969074258, 26, 6, 0, 0, 0 );
    l_U631 =  /* CREATEPED */ sub_4476( ref l_U632 );
    l_U645 =  /* CREATEPED */ sub_4476( ref l_U646 );
    l_U659 =  /* CREATEPED */ sub_4476( ref l_U660 );
    l_U673 =  /* CREATEPED */ sub_4476( ref l_U674 );
    l_U687 =  /* CREATEPED */ sub_4476( ref l_U688 );
    if ( /* IS_PED_VALID */ sub_5969( l_U631 ))
    {
         /* F_GIVEPEDWEAPON */ sub_5210( l_U631, 434544317, 25000, 0, 0 );
    }
    if ( /* IS_PED_VALID */ sub_5969( l_U631 ))
    {
         /* F_GIVEPEDWEAPON */ sub_5210( l_U645, -1074756423, 25000, 0, 0 );
    }
    if ( /* IS_PED_VALID */ sub_5969( l_U631 ))
    {
         /* F_GIVEPEDWEAPON */ sub_5210( l_U659, -1074756423, 25000, 0, 0 );
    }
    if ( /* IS_PED_VALID */ sub_5969( l_U631 ))
    {
         /* F_GIVEPEDWEAPON */ sub_5210( l_U673, -1074756423, 25000, 0, 0 );
    }
    if ( /* IS_PED_VALID */ sub_5969( l_U631 ))
    {
         /* F_GIVEPEDWEAPON */ sub_5210( l_U687, -1074756423, 25000, 0, 0 );
    }
     /* WRITESCRIPTLOG */ sub_2231( "RJM", "CREATE_MID_03_PEDS_AND_OBJECTS - end", 0 );
    return;
}

/* REGISTER_PEDS_MID_03 */ void sub_13208(boolean bParam0)
{
     /* WRITESCRIPTLOG */ sub_2231( "RJM", "REGISTER_PEDS_MID_03 - start", 0 );
    if ( /* IS_MAX_VALID */ sub_5939())
    {
         /* WRITESCRIPTLOG */ sub_2231( "RJM", "Registering Max with mid_03", 0 );
         /* P_PLAYER_HOLSTER_WEAPONS */ sub_13342( ref l_U598, 1, 1 );
         /* P_SET_TWO_HANDED_WEAPON_VISIBLE */ sub_14706( l_U598, 0 );
         /* P_SET_LEFT_HAND_WEAPON_VISIBLE */ sub_14845( l_U598, 0 );
         /* P_EQUIP_PLAYER_WITH_SINGLE_HANDED_WEAPON */ sub_14936( 1 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0 ), "W_PI_Clt1911_Aa_H", 0 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1867(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
        CUTSCENE_REGISTER_PED_TELEPORT(  /* PLAYER_PED_ID */ sub_1867(), g_U3141[3]._fU0, g_U3141[3]._fU12 );
        if (bParam0)
        {
            ISEQ_REGISTER_ENTITY( 1419096468, "ny_mpm_max",  /* PLAYER_PED_ID */ sub_1867(), 0 );
        }
    }
    if ( /* IS_PED_VALID */ sub_5969( l_U631 ))
    {
         /* WRITESCRIPTLOG */ sub_2231( "RJM", "Registering piMid_03Guy1 with mid_03", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U631, "G_NY_T_Sold_D", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U631, 0, 0 ), "W_SG_BenM3_Aa_H", 1 );
    }
    if ( /* IS_PED_VALID */ sub_5969( l_U645 ))
    {
         /* WRITESCRIPTLOG */ sub_2231( "RJM", "Registering piMid_03Guy2 with mid_03", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U645, "G_NY_T_Sold_D^1", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U645, 0, 0 ), "W_AR_AK47_Aa_H^2", 1 );
    }
    if ( /* IS_PED_VALID */ sub_5969( l_U659 ))
    {
         /* WRITESCRIPTLOG */ sub_2231( "RJM", "Registering piMid_03Guy3 with mid_03", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U659, "G_NY_T_Sold_D^2", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U659, 0, 0 ), "W_AR_AK47_Aa_H", 1 );
    }
    if ( /* IS_PED_VALID */ sub_5969( l_U673 ))
    {
         /* WRITESCRIPTLOG */ sub_2231( "RJM", "Registering piMid_03Guy4 with mid_03", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U673, "G_NY_T_Sold_D^3", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U673, 0, 0 ), "W_AR_AK47_Aa_H^3", 1 );
    }
    if ( /* IS_PED_VALID */ sub_5969( l_U687 ))
    {
         /* WRITESCRIPTLOG */ sub_2231( "RJM", "Registering piMid_03Guy5 with mid_03", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U687, "G_NY_T_Sold_D^4", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U687, 0, 0 ), "W_AR_AK47_Aa_H^1", 1 );
    }
    if (bParam0)
    {
        if (DOES_OBJECT_EXIST( g_U3116 ))
        {
            ISEQ_REGISTER_ENTITY( 123489604, "TOWER_AA", g_U3116, 1 );
        }
        if (DOES_OBJECT_EXIST( g_U3112 ))
        {
            ISEQ_REGISTER_ENTITY( -900483547, "TOWER_ANM01", g_U3112, 1 );
        }
        if (DOES_OBJECT_EXIST( g_U3113 ))
        {
            ISEQ_REGISTER_ENTITY( -652127296, "TOWER_ANM02", g_U3113, 1 );
        }
        if (DOES_OBJECT_EXIST( g_U3115 ))
        {
            ISEQ_REGISTER_ENTITY( 8102532, "TOWER_ANM03", g_U3115, 1 );
        }
        if (DOES_OBJECT_EXIST( g_U3114 ))
        {
            ISEQ_REGISTER_ENTITY( -1131749617, "TOWER_BASE", g_U3114, 1 );
        }
        if (DOES_OBJECT_EXIST( g_U3117 ))
        {
            ISEQ_REGISTER_ENTITY( 2119011196, "RF_WT_lid_01", g_U3117, 1 );
        }
        if (DOES_OBJECT_EXIST( g_U3118 ))
        {
            ISEQ_REGISTER_ENTITY( -1930417983, "RF_WT_lid_02", g_U3118, 1 );
        }
    }
    REGISTER_HIDE_ENTITY_AT_POSITION( g_U2895._fU0, g_U2895._fU4 );
     /* WRITESCRIPTLOG */ sub_2231( "RJM", "REGISTER_PEDS_MID_03 - end", 0 );
    return;
}

/* P_PLAYER_HOLSTER_WEAPONS */ void sub_13342(int iParam0, int iParam1, unknown uParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;

     /* RESET_WEAPON_CONFIG */ sub_13381( iParam0 );
    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1867() )) == 0)
    {
        uVar5 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
        {
            if (( /* IS_WEAPON_SINGLE_HANDED */ sub_13582( uVar5 )) == 1)
            {
                ref iParam0->_fU0->_fU0 = uVar5;
                ref iParam0->_fU0->_fU4 = GET_WEAPON_TYPE( uVar5 );
            }
            else if (( /* IS_WEAPON_TWO_HANDED */ sub_13836( uVar5 )) == 1)
            {
                ref iParam0->_fU24->_fU0 = uVar5;
                ref iParam0->_fU24->_fU4 = GET_WEAPON_TYPE( uVar5 );
            }
        }
        uVar6 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar6 )) == 1)
        {
            ref iParam0->_fU12->_fU0 = uVar6;
            ref iParam0->_fU12->_fU4 = GET_WEAPON_TYPE( uVar6 );
        }
        uVar7 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_1867(), 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
        {
            ref iParam0->_fU36->_fU0 = uVar7;
            ref iParam0->_fU36->_fU4 = GET_WEAPON_TYPE( uVar7 );
        }
        uVar8 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_1867(), 1 );
        if ((GET_DOES_WEAPON_EXIST( uVar8 )) == 1)
        {
            ref iParam0->_fU48->_fU0 = uVar8;
            ref iParam0->_fU48->_fU4 = GET_WEAPON_TYPE( uVar8 );
        }
        uVar9 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_1867(), 2 );
        if ((GET_DOES_WEAPON_EXIST( uVar9 )) == 1)
        {
            ref iParam0->_fU60->_fU0 = uVar9;
            ref iParam0->_fU60->_fU4 = GET_WEAPON_TYPE( uVar9 );
        }
    }
    if (iParam1 == 0)
    {
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1867() )) == 0)
        {
            uVar10 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar10 )) == 1)
            {
                SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0, uParam2 );
            }
            uVar11 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 1, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar11 )) == 1)
            {
                SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 1, uParam2 );
            }
        }
    }
    else if (iParam1 == 1)
    {
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1867() )) == 0)
        {
            uVar12 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar12 )) == 1)
            {
                if (( /* IS_WEAPON_TWO_HANDED */ sub_13836( uVar12 )) == 1)
                {
                    SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0, uParam2 );
                }
            }
            uVar13 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 1, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar13 )) == 1)
            {
                SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 1, uParam2 );
            }
        }
    }
    return;
}

/* RESET_WEAPON_CONFIG */ void sub_13381(int iParam0)
{
    ref iParam0->_fU0->_fU0 = 0;
    ref iParam0->_fU0->_fU4 = 0;
    ref iParam0->_fU12->_fU0 = 0;
    ref iParam0->_fU12->_fU4 = 0;
    ref iParam0->_fU24->_fU0 = 0;
    ref iParam0->_fU24->_fU4 = 0;
    ref iParam0->_fU36->_fU0 = 0;
    ref iParam0->_fU36->_fU4 = 0;
    ref iParam0->_fU48->_fU0 = 0;
    ref iParam0->_fU48->_fU4 = 0;
    ref iParam0->_fU60->_fU0 = 0;
    ref iParam0->_fU60->_fU4 = 0;
    return;
}

/* IS_WEAPON_SINGLE_HANDED */ int sub_13582(unknown uParam0)
{
    int iVar3;

    if ((GET_DOES_WEAPON_EXIST( uParam0 )) == 1)
    {
        iVar3 = GET_WEAPON_TYPE( uParam0 );
        if ((iVar3 == 1194438308) || ((iVar3 == -76667461) || ((iVar3 == -1404433099) || ((iVar3 == 1131969637) || ((iVar3 == -691403429) || ((iVar3 == 1845102363) || ((iVar3 == 150541352) || ((iVar3 == -820634585) || ((iVar3 == -612753081) || ((iVar3 == 811797242) || ((iVar3 == 68019059) || ((iVar3 == -1464892298) || ((iVar3 == 456708483) || ((iVar3 == -862236369) || (iVar3 == 406496141)))))))))))))))
        {
            return 1;
        }
    }
    return 0;
}

/* IS_WEAPON_TWO_HANDED */ int sub_13836(unknown uParam0)
{
    int iVar3;

    if ((GET_DOES_WEAPON_EXIST( uParam0 )) == 1)
    {
        iVar3 = GET_WEAPON_TYPE( uParam0 );
        if ((iVar3 == -2075384407) || ((iVar3 == 10648147) || ((iVar3 == 1224272620) || ((iVar3 == 1478009203) || ((iVar3 == 1964270085) || ((iVar3 == -110877124) || ((iVar3 == 427207702) || ((iVar3 == 319712764) || ((iVar3 == 514118749) || ((iVar3 == -184942895) || ((iVar3 == -168327769) || ((iVar3 == 434544317) || ((iVar3 == -1659006841) || ((iVar3 == 930042831) || ((iVar3 == 1001413062) || ((iVar3 == 377623895) || ((iVar3 == -1312131151) || ((iVar3 == -1787162676) || ((iVar3 == 724901397) || ((iVar3 == 57534114) || ((iVar3 == 840671040) || ((iVar3 == 1308526797) || ((iVar3 == -1074756423) || ((iVar3 == 1992962408) || (iVar3 == -1013714740)))))))))))))))))))))))))
        {
            return 1;
        }
    }
    return 0;
}

/* P_SET_TWO_HANDED_WEAPON_VISIBLE */ void sub_14706(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18)
{
    unknown uVar21;
    unknown uVar22;

    uVar21 = uParam0._fU24._fU0;
    if ((GET_DOES_WEAPON_EXIST( uVar21 )) == 1)
    {
        SET_WEAPON_VISIBLE( uVar21, uParam18 );
    }
    uVar22 = uParam0._fU60._fU0;
    if ((GET_DOES_WEAPON_EXIST( uVar22 )) == 1)
    {
        SET_WEAPON_VISIBLE( uVar22, uParam18 );
    }
    return;
}

/* P_SET_LEFT_HAND_WEAPON_VISIBLE */ void sub_14845(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18)
{
    unknown uVar21;

    uVar21 = uParam0._fU12._fU0;
    if ((GET_DOES_WEAPON_EXIST( uVar21 )) == 1)
    {
        SET_WEAPON_VISIBLE( uVar21, uParam18 );
    }
    return;
}

/* P_EQUIP_PLAYER_WITH_SINGLE_HANDED_WEAPON */ void sub_14936(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1867() )) == 0)
    {
        iVar3 = 0;
        uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar4 )) == 0)
        {
            iVar3 = 1;
        }
        if ((( /* IS_WEAPON_SINGLE_HANDED */ sub_13582( uVar4 )) == 0) AND ((GET_DOES_WEAPON_EXIST( uVar4 )) == 1))
        {
            iVar3 = 1;
        }
        if (iVar3 == 1)
        {
            uVar5 =  /* F_GET_SINGLE_HANDED_WEAPON_FROM_PLAYER */ sub_15084();
            if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
            {
                SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_1867(), uVar5, 0, uParam0 );
            }
        }
    }
    return;
}

/* F_GET_SINGLE_HANDED_WEAPON_FROM_PLAYER */ int sub_15084()
{
    unknown Result;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1867() )) == 0)
    {
        Result = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( Result )) == 1)
        {
            if (( /* IS_WEAPON_SINGLE_HANDED */ sub_13582( Result )) == 1)
            {
                return Result;
            }
        }
        uVar3 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            return uVar3;
        }
        uVar4 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_1867(), 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar4 )) == 1)
        {
            return uVar4;
        }
        uVar5 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_1867(), 1 );
        if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
        {
            return uVar5;
        }
    }
    return 0;
}

/* SET_TOWER_VISIBLE */ void sub_16673(unknown uParam0)
{
    SET_OBJECT_VISIBLE( g_U3112, uParam0 );
    SET_OBJECT_VISIBLE( g_U3113, uParam0 );
    SET_OBJECT_VISIBLE( g_U3114, uParam0 );
    SET_OBJECT_VISIBLE( g_U3115, uParam0 );
    SET_OBJECT_VISIBLE( g_U3116, uParam0 );
    SET_OBJECT_VISIBLE( g_U3117, uParam0 );
    SET_OBJECT_VISIBLE( g_U3118, uParam0 );
    return;
}

/* CLEANUP_MID_03_ASSETS */ void sub_17010()
{
     /* CLEANPED */ sub_5676( l_U631 );
     /* CLEANPED */ sub_5676( l_U645 );
     /* CLEANPED */ sub_5676( l_U659 );
     /* CLEANPED */ sub_5676( l_U673 );
     /* CLEANPED */ sub_5676( l_U687 );
    return;
}

/* UNLOAD_MID_03_ASSETS */ void sub_17102()
{
     /* UNLOADMODEL */ sub_7156( 233534649 );
    return;
}

/* PLAY_MIDSCENE_03C */ void sub_17298(boolean bParam0, boolean bParam1)
{
    int Result;

    Result = 0;
    switch (l_U741)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_2231( "RJM", "PLAY_MIDSCENE_03c start", 0 );
         /* NIS_PRE_SETUP */ sub_1789( 1, 0, 0, 1 );
        if (NOT bParam0)
        {
             /* BLOCKLOAD_MID_03C_ASSETS */ sub_17430();
             /* LOADSEAMLESSCUTSCENE */ sub_3718( ref l_U701, 1 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_2231( "bsw", "PLAY_MIDSCENE_03c forcing fade in", 0 );
            DO_SCREEN_FADE_IN( 500 );
        }
        if (NOT bParam0)
        {
             /* CREATE_MID_03C_PEDS_AND_OBJECTS */ sub_17566();
        }
         /* REGISTER_PEDS_NYC2_MID_03C */ sub_17819( bParam0 );
        if (bParam0)
        {
            CUTSCENE_REGISTER_ISEQ( -1236175571 );
        }
        if (bParam1)
        {
            START_CUTSCENE_CAPTURE( ref l_U701 );
        }
        START_SEAMLESS_CUTSCENE();
        l_U741 = 1;
        break;
        case 1:
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U3141[4]._fU16, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U3141[4]._fU20, 1065353216, 0 );
        l_U741 = 2;
        break;
        case 2:
        if (HAS_CUTSCENE_FINISHED())
        {
            CAMERA_PLAY_ANIMATED( "LEVEL_S_NYBAR_CP_05", "BLEND_OUT_MID_03C_NYBAR_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
            if (bParam1)
            {
                STOP_CUTSCENE_CAPTURE();
            }
             /* CLEANUP_MID_03C_ASSETS */ sub_18720();
            if (NOT bParam0)
            {
                 /* UNLOAD_MID_03C_ASSETS */ sub_18781();
            }
             /* P_SET_TWO_HANDED_WEAPON_VISIBLE */ sub_14706( l_U709, 1 );
             /* P_SET_TWO_HANDED_WEAPON_VISIBLE */ sub_14706( l_U709, 1 );
             /* WRITESCRIPTLOG */ sub_2231( "RJM", "PLAY_MIDSCENE_03c end", 0 );
             /* NIS_POST_SETUP */ sub_10389( 1, 1 );
            Result = 1;
            l_U741 = 3;
        }
        break;
        case 3: break;
    }
    return Result;
}

/* BLOCKLOAD_MID_03C_ASSETS */ void sub_17430()
{
     /* BLOCKLOADMODEL */ sub_8390( 2024698471 );
    return;
}

/* CREATE_MID_03C_PEDS_AND_OBJECTS */ void sub_17566()
{
     /* WRITESCRIPTLOG */ sub_2231( "RJM", "CREATE_mid_03c_PEDS_AND_OBJECTS - start", 0 );
     /* WRITESCRIPTLOG */ sub_2231( "SBA", "P_SETUP_NYC_mid_03c", "***" );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U728, 0, 0, 0, 0.00000000, -1756913695, 26, 6, 0, 0, 0 );
     /* CLEANPED */ sub_5676( l_U727 );
    l_U727 =  /* CREATEPED */ sub_4476( ref l_U728 );
     /* WRITESCRIPTLOG */ sub_2231( "RJM", "CREATE_mid_03c_PEDS_AND_OBJECTS - end", 0 );
    return;
}

/* REGISTER_PEDS_NYC2_MID_03C */ void sub_17819(boolean bParam0)
{
    unknown uVar3;

     /* WRITESCRIPTLOG */ sub_2231( "SBA", "REGISTER_PEDs_nyc2_mid_03c", "***" );
    if (bParam0)
    {
         /* LOADISEQ */ sub_12061( -1236175571, 1 );
         /* WRITESCRIPTLOG */ sub_2231( "SBA", "FROM FLOW: Registering passos with NYC_mid_03c", "***" );
        uVar3 = g_U818;
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_2231( "SBA", "FROM CUTSCENE SCRIPT: Registering passos with NYC_mid_03c", "***" );
        uVar3 = l_U727;
    }
    if ( /* IS_PED_VALID */ sub_5969( uVar3 ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( uVar3, "FB_Pass_NY", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( uVar3, 0, 0 ), "W_PI_Clt1911_Aa_H^1", 0 );
        ISEQ_REGISTER_ENTITY( -1236175571, "passos", uVar3, 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( uVar3, g_U781[3]._fU0, g_U781[3]._fU12 );
    }
    if ( /* IS_MAX_VALID */ sub_5939())
    {
         /* WRITESCRIPTLOG */ sub_2231( "bsw", "registering Max for mid03c", 0 );
         /* P_PLAYER_HOLSTER_WEAPONS */ sub_13342( ref l_U709, 1, 1 );
         /* P_SET_LEFT_HAND_WEAPON_VISIBLE */ sub_14845( l_U709, 0 );
         /* P_SET_TWO_HANDED_WEAPON_VISIBLE */ sub_14706( l_U709, 0 );
         /* P_EQUIP_PLAYER_WITH_SINGLE_HANDED_WEAPON */ sub_14936( 1 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1867(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0 ), "W_PI_Clt1911_Aa_H", 0 );
        ISEQ_REGISTER_ENTITY( -1236175571, "max",  /* PLAYER_PED_ID */ sub_1867(), 0 );
        CUTSCENE_REGISTER_PED_TELEPORT(  /* PLAYER_PED_ID */ sub_1867(), g_U3141[4]._fU0, g_U3141[4]._fU12 );
    }
    REGISTER_HIDE_ENTITY_AT_POSITION( g_U2895._fU0, g_U2895._fU4 );
    return;
}

/* CLEANUP_MID_03C_ASSETS */ void sub_18720()
{
     /* CLEANPED */ sub_5676( l_U727 );
    return;
}

/* UNLOAD_MID_03C_ASSETS */ void sub_18781()
{
     /* UNLOADMODEL */ sub_7156( 2024698471 );
    return;
}

/* PLAY_NYC_MID_06 */ int sub_19067(boolean bParam0, unknown uParam1, boolean bParam2, unknown uParam3)
{
    boolean bVar6;
    boolean bVar7;
    unknown uVar8;

     /* WRITESCRIPTLOG */ sub_2231( "BSW", "PLAY_NYC_MID_06 start", "*****" );
    if (IS_STRING_NULL( uParam3 ))
    {
        uParam3 = l_U353;
    }
     /* NIS_PRE_SETUP */ sub_1789( 1, 0, 0, 1 );
     /* LOADSEAMLESSCUTSCENE */ sub_3718( uParam3, 1 );
     /* LOAD_MID_06_SKYLIGHT_RAYFIRE_ASSETS */ sub_19177( 1 );
     /* CREATE_BREAKABLE_ROOF */ sub_19437();
    if (NOT bParam0)
    {
         /* BLOCKLOAD_NYC_MID_06_ASSETS */ sub_22170();
         /* CREATE_CUTSCENE_ONLY_CHOP_SHOP_THUGS */ sub_22285();
         /* CREATE_CHOP_SHOP_WORKERS */ sub_22611();
         /* REGISTER_PEDS_NYC2_MID_06 */ sub_23094( bParam0, ref l_U355 );
    }
    else
    {
        CUTSCENE_ENABLE_SKIP( 0 );
    }
    if (bParam2)
    {
        START_CUTSCENE_CAPTURE( uParam3 );
    }
    START_SEAMLESS_CUTSCENE();
    CUTSCENE_DISABLE_FADE_IN_GAME_AT_END( 1 );
    WAIT( 1 );
    bVar6 = false;
    bVar7 = false;
    while (NOT HAS_CUTSCENE_FINISHED())
    {
        if ((NOT bVar6) AND (GET_CUTSCENE_TIME_MS() > l_U457))
        {
             /* WRITESCRIPTLOG */ sub_2231( "BSW", "init'ing breaking glass", 0 );
            ENABLE_STATIC_EMITTER( "S_NYC2_SE_CHOP_SHOP_TOOLS", 0 );
            bVar6 = true;
            l_U284 = 8;
        }
        else if ((NOT bVar7) AND (GET_CUTSCENE_TIME_MS() > l_U458))
        {
             /* WRITESCRIPTLOG */ sub_2231( "BSW", "placing final breaking glass", 0 );
             /* CREATE_BROKEN_SKYLIGHT_CUTSCENE */ sub_25940();
            if (bParam0)
            {
                 /* LOAD_GAMEPLAY_SKYLIGHT_RAYFIRE_ASSETS */ sub_19335( 0 );
            }
            bVar7 = true;
        }
         /* P_HANDLE_MUSIC */ sub_26394();
        if (bVar6)
        {
             /* HANDLE_CHOPSHOP_BREAK_GLASS */ sub_26436();
        }
        WAIT( 0 );
    }
    if (NOT bVar6)
    {
        l_U284 = 8;
    }
    if (IS_SCREEN_FADED_OUT())
    {
        uVar8 = GET_INTERIOR_AT_COORDS( g_U3141[7]._fU0 );
        SET_INTERIOR_ACTIVE( uVar8, 1, 0 );
        LOAD_SCENE_FOR_ROOM_BY_KEY( uVar8, GET_HASH_KEY( ref g_U3569 ) );
        LOAD_SCENE( -205.05800000, -24.86424000, -11.49453000 );
        SET_ROOM_FOR_PED_BY_NAME(  /* PLAYER_PED_ID */ sub_1867(), ref g_U3569 );
    }
    if (bParam2)
    {
        STOP_CUTSCENE_CAPTURE();
    }
     /* CLEAN_AND_UNLOAD_ALL_NON_GAMEPLAY_SKYLIGHT_OBJECTS */ sub_27679();
    if (NOT bParam0)
    {
         /* CLEAN_UP_MID06_ASSETS */ sub_27980();
         /* UNLOAD_NYC_MID_06_ASSETS */ sub_28138();
         /* UNLOAD_GAMEPLAY_SKYLIGHT_RAYFIRE_ASSETS */ sub_28247();
    }
    else
    {
         /* CREATE_BROKEN_SKYLIGHT_GAMEPLAY */ sub_28342();
         /* TOGGLE_EXCESS_THUG_ACTIVATION */ sub_25005( 1, uParam1 );
    }
     /* WRITESCRIPTLOG */ sub_2231( "BSW", "PLAY_NYC_MID_06 end", "*****" );
    return 1;
}

/* LOAD_MID_06_SKYLIGHT_RAYFIRE_ASSETS */ void sub_19177(unknown uParam0)
{
     /* LOADMODEL */ sub_3056( -1513711447, uParam0 );
     /* LOADMODEL */ sub_3056( -737544913, uParam0 );
     /* LOADMODEL */ sub_3056( -1035251278, uParam0 );
     /* LOADMODEL */ sub_3056( 1679037765, uParam0 );
     /* LOADMODEL */ sub_3056( -1838550544, uParam0 );
     /* LOADMODEL */ sub_3056( -1332728256, uParam0 );
     /* LOADMODEL */ sub_3056( -1629582627, uParam0 );
     /* LOADMODEL */ sub_3056( 493783035, uParam0 );
     /* LOADMODEL */ sub_3056( l_U288, uParam0 );
     /* LOAD_GAMEPLAY_SKYLIGHT_RAYFIRE_ASSETS */ sub_19335( uParam0 );
    return;
}

/* LOAD_GAMEPLAY_SKYLIGHT_RAYFIRE_ASSETS */ void sub_19335(unknown uParam0)
{
     /* LOADMODEL */ sub_3056( l_U287, uParam0 );
     /* LOADMODEL */ sub_3056( l_U285, uParam0 );
     /* LOADMODEL */ sub_3056( l_U286, uParam0 );
    return;
}

/* CREATE_BREAKABLE_ROOF */ void sub_19437()
{
     /* WRITESCRIPTLOG */ sub_2231( "RJM", "CREATE_CHOPSHOP_ROOF", " " );
     /* CREATE_BROKEN_SKYLIGHT_FRAME */ sub_19509();
     /* CREATE_CLEAN_SKYLIGHT_PLUG */ sub_19995( 0 );
     /* CREATE_CLEAN_SKYLIGHT_PLUG */ sub_19995( 1 );
     /* DESTROY_RAYFIRE_PIECES */ sub_20189();
    l_U309 =  /* CREATEOBJECT */ sub_20332( -1513711447, l_U317, l_U320, 0, 1, 0 );
    l_U310 =  /* CREATEOBJECT */ sub_20332( -737544913, l_U317, l_U320, 0, 1, 0 );
    l_U311 =  /* CREATEOBJECT */ sub_20332( -1035251278, l_U317, l_U320, 0, 1, 0 );
    l_U312 =  /* CREATEOBJECT */ sub_20332( 1679037765, l_U317, l_U320, 0, 1, 0 );
    l_U313 =  /* CREATEOBJECT */ sub_20332( -1838550544, l_U317, l_U320, 0, 1, 0 );
    l_U314 =  /* CREATEOBJECT */ sub_20332( -1332728256, l_U317, l_U320, 0, 1, 0 );
    l_U315 =  /* CREATEOBJECT */ sub_20332( -1629582627, l_U317, l_U320, 0, 1, 0 );
    l_U316 =  /* CREATEOBJECT */ sub_20332( 493783035, l_U317, l_U320, 0, 1, 0 );
    SET_OBJECT_VISIBLE( l_U309, 0 );
    SET_OBJECT_VISIBLE( l_U310, 0 );
    SET_OBJECT_VISIBLE( l_U311, 0 );
    SET_OBJECT_VISIBLE( l_U312, 0 );
    SET_OBJECT_VISIBLE( l_U313, 0 );
    SET_OBJECT_VISIBLE( l_U314, 0 );
    SET_OBJECT_VISIBLE( l_U315, 0 );
    SET_OBJECT_VISIBLE( l_U316, 0 );
    PLAY_OBJECT_ANIM( l_U309, "CS_WIN_SMASH_01", "ny_chopanim", 0.10000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U310, "CS_WIN_SMASH_02", "ny_chopanim", 0.10000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U311, "CS_WIN_SMASH_03", "ny_chopanim", 0.10000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U312, "CS_WIN_SMASH_04", "ny_chopanim", 0.10000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U313, "CS_WIN_SMASH_05", "ny_chopanim", 0.10000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U314, "CS_WIN_SMASH_06", "ny_chopanim", 0.10000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U315, "CS_WIN_SMASH_07", "ny_chopanim", 0.10000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U316, "CS_WIN_SMASH_08", "ny_chopanim", 0.10000000, 0, 1 );
    SET_OBJECT_ANIM_SPEED( l_U309, "CS_WIN_SMASH_01", "ny_chopanim", 0.00000000 );
    SET_OBJECT_ANIM_SPEED( l_U310, "CS_WIN_SMASH_02", "ny_chopanim", 0.00000000 );
    SET_OBJECT_ANIM_SPEED( l_U311, "CS_WIN_SMASH_03", "ny_chopanim", 0.00000000 );
    SET_OBJECT_ANIM_SPEED( l_U312, "CS_WIN_SMASH_04", "ny_chopanim", 0.00000000 );
    SET_OBJECT_ANIM_SPEED( l_U313, "CS_WIN_SMASH_05", "ny_chopanim", 0.00000000 );
    SET_OBJECT_ANIM_SPEED( l_U314, "CS_WIN_SMASH_06", "ny_chopanim", 0.00000000 );
    SET_OBJECT_ANIM_SPEED( l_U315, "CS_WIN_SMASH_07", "ny_chopanim", 0.00000000 );
    SET_OBJECT_ANIM_SPEED( l_U316, "CS_WIN_SMASH_08", "ny_chopanim", 0.00000000 );
    SET_OBJECT_ANIM_CURRENT_TIME( l_U309, "CS_WIN_SMASH_01", "ny_chopanim", l_U299 );
    SET_OBJECT_ANIM_CURRENT_TIME( l_U310, "CS_WIN_SMASH_02", "ny_chopanim", l_U299 );
    SET_OBJECT_ANIM_CURRENT_TIME( l_U311, "CS_WIN_SMASH_03", "ny_chopanim", l_U299 );
    SET_OBJECT_ANIM_CURRENT_TIME( l_U312, "CS_WIN_SMASH_04", "ny_chopanim", l_U299 );
    SET_OBJECT_ANIM_CURRENT_TIME( l_U313, "CS_WIN_SMASH_05", "ny_chopanim", l_U299 );
    SET_OBJECT_ANIM_CURRENT_TIME( l_U314, "CS_WIN_SMASH_06", "ny_chopanim", l_U299 );
    SET_OBJECT_ANIM_CURRENT_TIME( l_U315, "CS_WIN_SMASH_07", "ny_chopanim", l_U299 );
    SET_OBJECT_ANIM_CURRENT_TIME( l_U316, "CS_WIN_SMASH_08", "ny_chopanim", l_U299 );
    return;
}

/* CREATE_BROKEN_SKYLIGHT_FRAME */ void sub_19509()
{
     /* LOADMODEL */ sub_3056( l_U287, 1 );
     /* CLEANOBJECT */ sub_19566( l_U301 );
    l_U301 =  /* CREATEOBJECTNOOFFSET */ sub_19640( l_U287, l_U335, l_U338, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U301 ))
    {
        FREEZE_OBJECT_POSITION( l_U301, 1 );
    }
    return;
}

/* CLEANOBJECT */ void sub_19566(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

/* CREATEOBJECTNOOFFSET */ void sub_19640(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_3056( uParam0, 1 );
    }
    Result = CREATE_OBJECT_NO_OFFSET( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an object to exist: {!f1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

/* CREATE_CLEAN_SKYLIGHT_PLUG */ void sub_19995(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;

    if (iParam0 == 0)
    {
        uVar3 = {l_U341};
        uVar6 = {l_U344};
    }
    else
    {
        uVar3 = {l_U347};
        uVar6 = {l_U350};
    }
     /* LOADMODEL */ sub_3056( l_U285, 1 );
     /* CLEANOBJECT */ sub_19566( l_U305[iParam0] );
    l_U305[iParam0] =  /* CREATEOBJECTNOOFFSET */ sub_19640( l_U285, uVar3, uVar6, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U305[iParam0] ))
    {
        FREEZE_OBJECT_POSITION( l_U305[iParam0], 1 );
    }
    return;
}

/* DESTROY_RAYFIRE_PIECES */ void sub_20189()
{
     /* CLEANOBJECT */ sub_19566( l_U309 );
     /* CLEANOBJECT */ sub_19566( l_U310 );
     /* CLEANOBJECT */ sub_19566( l_U311 );
     /* CLEANOBJECT */ sub_19566( l_U312 );
     /* CLEANOBJECT */ sub_19566( l_U313 );
     /* CLEANOBJECT */ sub_19566( l_U314 );
     /* CLEANOBJECT */ sub_19566( l_U315 );
     /* CLEANOBJECT */ sub_19566( l_U316 );
    return;
}

/* CREATEOBJECT */ void sub_20332(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_3056( uParam0, 1 );
    }
    Result = CREATE_OBJECT( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an object to exist: {!f1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

/* BLOCKLOAD_NYC_MID_06_ASSETS */ void sub_22170()
{
     /* WRITESCRIPTLOG */ sub_2231( "BSW", "BLOCKLOAD_NYC_MID_06_ASSETS", "***" );
     /* BLOCKLOADMODEL */ sub_8390( 2024698471 );
     /* BLOCKLOADMODEL */ sub_8390( g_U3098 );
    return;
}

/* CREATE_CUTSCENE_ONLY_CHOP_SHOP_THUGS */ void sub_22285()
{
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U360[0], -207.81260000, -19.55955000, -11.42784000, 124.76100000, 735889722, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U360[1], -206.74500000, -18.42852000, -11.42813000, 124.76100000, -1782036333, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U360[2], -206.89750000, -16.76666000, -11.42650000, 98.19326000, 1465702486, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U360[3], -207.15520000, -21.31980000, -11.42757000, 98.19326000, 1064552273, 7, 3, 2, 0, 0 );
     /* CLEANPEDARRAY */ sub_6978( ref l_U413 );
    l_U355[0] =  /* CREATEPED */ sub_4476( ref l_U360[0] );
    l_U355[1] =  /* CREATEPED */ sub_4476( ref l_U360[1] );
    l_U355[2] =  /* CREATEPED */ sub_4476( ref l_U360[2] );
    l_U355[3] =  /* CREATEPED */ sub_4476( ref l_U360[3] );
    return;
}

/* CREATE_CHOP_SHOP_WORKERS */ void sub_22611()
{
     /* WRITESCRIPTLOG */ sub_2231( "BSW", "CREATE_CHOP_SHOP_WORKERS", "***" );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U417[0], 0.00000000, 0.00000000, 0.00000000, 0.00000000, -12435558, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U417[1], 0.00000000, 0.00000000, 0.00000000, 0.00000000, -1625386151, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4194( ref l_U417[2], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 606214312, 7, 3, 2, 0, 0 );
     /* CLEANPEDARRAY */ sub_6978( ref l_U413 );
    l_U413[0] =  /* CREATEPED */ sub_4476( ref l_U417[0] );
    l_U413[1] =  /* CREATEPED */ sub_4476( ref l_U417[1] );
    l_U413[2] =  /* CREATEPED */ sub_4476( ref l_U417[2] );
     /* PED_ARRAY_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_22892( ref l_U413, 1 );
    return;
}

/* PED_ARRAY_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ void sub_22892(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_22975( ref (uParam0^)[I], uParam1 );
    }
    return;
}

/* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ void sub_22975(unknown uParam0, unknown uParam1)
{
    if ( /* IS_PED_VALID */ sub_5969( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), uParam1 );
    }
    return;
}

/* REGISTER_PEDS_NYC2_MID_06 */ void sub_23094(boolean bParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;

     /* WRITESCRIPTLOG */ sub_2231( "BSW", "REGISTER_PEDs_nyc2_MID_06", "***" );
    if ( /* IS_MAX_VALID */ sub_5939())
    {
        if ((bParam0) AND ( /* IS_PED_VALID */ sub_5969(  /* PLAYER_PED_ID */ sub_1867() )))
        {
             /* MAR_NY_HOLSTERRIFLEORDUALANDDRAWPISTOL */ sub_23207( ref uVar4, ref uVar5 );
        }
         /* WRITESCRIPTLOG */ sub_2231( "BSW", "Registering player with NYC_MID_06", "***" );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0 ), "W_PI_Clt1911_Aa_H", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT(  /* PLAYER_PED_ID */ sub_1867(), g_U3141[7]._fU0, g_U3141[7]._fU12 );
        CUTSCENE_REGISTER_SET_PLAYER_IN_COVER( "GenCover", "BF328AF7_6BF903F7_Corner2", 1, 0 );
        CUTSCENE_SET_COVER_CAMERA_DIRECTION( g_U3141[7]._fU16, g_U3141[7]._fU20 );
    }
    if (bParam0)
    {
        if ( /* IS_PED_VALID */ sub_5969( g_U818 ))
        {
             /* WRITESCRIPTLOG */ sub_2231( "BSW", "FROM FLOW: Registering passos with NYC_MID_06", "***" );
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( g_U818, "FB_Pass_NY", 0 );
            CUTSCENE_REGISTER_PED_TELEPORT( g_U818, g_U781[7]._fU0, g_U781[7]._fU12 );
            REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( g_U818, 0, 0 ), "W_PI_Des_Aa_H", 0 );
        }
    }
    else if ( /* IS_PED_VALID */ sub_5969( l_U354 ))
    {
         /* WRITESCRIPTLOG */ sub_2231( "BSW", "FROM CUTSCENE SCRIPT: Registering passos with NYC_MID_06", "***" );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U354, "FB_Pass_NY", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U354, 0, 0 ), "W_PI_Des_Aa_H", 0 );
    }
    if ( /* IS_PED_VALID */ sub_5969( (uParam1^)[0] ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam1^)[0], "G_NY_T_SOLD_E", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( (uParam1^)[0], g_U3125, g_U3128 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( (uParam1^)[0], ref g_U3045 );
    }
    if ( /* IS_PED_VALID */ sub_5969( (uParam1^)[1] ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam1^)[1], "G_NY_T_SOLD_E^1", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( (uParam1^)[1], g_U3129, g_U3132 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( (uParam1^)[1], ref g_U3045 );
    }
    if ( /* IS_PED_VALID */ sub_5969( (uParam1^)[2] ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam1^)[2], "G_NY_T_SOLD_E^2", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( (uParam1^)[2], g_U3133, g_U3136 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( (uParam1^)[2], ref g_U3045 );
    }
    if ( /* IS_PED_VALID */ sub_5969( (uParam1^)[3] ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam1^)[3], "G_NY_T_SOLD_E^3", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( (uParam1^)[3], g_U3137, g_U3140 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( (uParam1^)[3], ref g_U3045 );
    }
    if (bParam0)
    {
         /* TOGGLE_EXCESS_THUG_ACTIVATION */ sub_25005( 0, uParam1 );
    }
    if ( /* IS_PED_VALID */ sub_5969( l_U413[0] ))
    {
         /* WRITESCRIPTLOG */ sub_2231( "BSW", "Registering piWorkers[0] with NYC_MID_06", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U413[0], "G_NY_T_SOLD_E^4", 0 );
    }
    if ( /* IS_PED_VALID */ sub_5969( l_U413[1] ))
    {
         /* WRITESCRIPTLOG */ sub_2231( "BSW", "Registering piWorkers[1] with NYC_MID_06", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U413[1], "G_NY_T_SOLD_E^5", 0 );
    }
    if ( /* IS_PED_VALID */ sub_5969( l_U413[2] ))
    {
         /* WRITESCRIPTLOG */ sub_2231( "BSW", "Registering piWorkers[2] with NYC_MID_06", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U413[2], "G_NY_T_SOLD_E^6", 0 );
    }
    return;
}

/* MAR_NY_HOLSTERRIFLEORDUALANDDRAWPISTOL */ void sub_23207(unknown uParam0, unknown uParam1)
{
    unknown uVar4;

     /* WRITESCRIPTLOG */ sub_2231( "TEH", "MAR_NY_HolsterRifleOrDualAndDrawPistol begun", 0 );
    uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0 );
    if (GET_DOES_WEAPON_EXIST( uVar4 ))
    {
        if (((uParam0^) == 1) || (((GET_WEAPON_TYPE( uVar4 )) == 1992962408) || (((GET_WEAPON_TYPE( uVar4 )) == 724901397) || (((GET_WEAPON_TYPE( uVar4 )) == 57534114) || (((GET_WEAPON_TYPE( uVar4 )) == 1308526797) || (((GET_WEAPON_TYPE( uVar4 )) == -1074756423) || (((GET_WEAPON_TYPE( uVar4 )) == -1013714740) || (((GET_WEAPON_TYPE( uVar4 )) == -184942895) || (((GET_WEAPON_TYPE( uVar4 )) == -168327769) || (((GET_WEAPON_TYPE( uVar4 )) == 1845102363) || ((GET_WEAPON_TYPE( uVar4 )) == 434544317)))))))))))
        {
             /* WRITESCRIPTLOG */ sub_2231( "TEH", "Holster weapon and draw gun", 0 );
            SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0, 1 );
            uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0 );
            while (GET_DOES_WEAPON_EXIST( uVar4 ))
            {
                WAIT( 0 );
                uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0 );
                 /* WRITESCRIPTLOG */ sub_2231( "TEH", "Waiting for right hand to be empty", 0 );
            }
        }
    }
    uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 1, 0 );
    if (GET_DOES_WEAPON_EXIST( uVar4 ))
    {
        (uParam1^) = 1;
         /* WRITESCRIPTLOG */ sub_2231( "TEH", "Dual wielding is true", 0 );
        SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 1, 1 );
        uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 1, 0 );
        while (GET_DOES_WEAPON_EXIST( uVar4 ))
        {
            WAIT( 0 );
            uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 1, 0 );
        }
    }
    uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0 );
    if (NOT (GET_DOES_WEAPON_EXIST( uVar4 )))
    {
        uVar4 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_1867(), 0 );
        if (NOT (GET_DOES_WEAPON_EXIST( uVar4 )))
        {
            uVar4 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_1867(), 1 );
        }
        SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_1867(), uVar4, 0, 1 );
        uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0 );
        while (NOT (GET_DOES_WEAPON_EXIST( uVar4 )))
        {
            WAIT( 0 );
            uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1867(), 0, 0 );
             /* WRITESCRIPTLOG */ sub_2231( "TEH", "Waiting for right hand to be full", 0 );
        }
    }
     /* WRITESCRIPTLOG */ sub_2231( "TEH", "MAR_NY_HolsterRifleOrDualAndDrawPistol ended", 0 );
    return;
}

/* TOGGLE_EXCESS_THUG_ACTIVATION */ void sub_25005(boolean bParam0, unknown uParam1)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam1^); I++ )
    {
        if (DOES_PED_EXIST( (uParam1^)[I] ))
        {
            if (I >= 4)
            {
                if (bParam0)
                {
                     /* P_ACTIVATEPED */ sub_25106( (uParam1^)[I] );
                }
                else
                {
                     /* P_DEACTIVATEPED */ sub_25231( (uParam1^)[I] );
                }
            }
        }
    }
    return;
}

/* P_ACTIVATEPED */ void sub_25106(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 0 );
        SET_PED_VISIBLE( uParam0, 1 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 1 );
        FREEZE_PED_POSITION( uParam0, 0 );
        SET_PED_COLLISION( uParam0, 1 );
        SET_PED_PROOFS( uParam0, 0, 0, 0, 0, 0 );
    }
    return;
}

/* P_DEACTIVATEPED */ void sub_25231(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 1 );
        SET_PED_VISIBLE( uParam0, 0 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 0 );
        FREEZE_PED_POSITION( uParam0, 1 );
        SET_PED_COLLISION( uParam0, 0 );
        SET_PED_PROOFS( uParam0, 1, 1, 1, 1, 1 );
    }
    return;
}

/* CREATE_BROKEN_SKYLIGHT_CUTSCENE */ void sub_25940()
{
     /* CLEAN_SKYLIGHT_PIECES */ sub_25984();
     /* DESTROY_RAYFIRE_PIECES */ sub_20189();
     /* CREATE_BROKEN_SKYLIGHT_FRAME */ sub_19509();
     /* CREATE_STATIC_FINAL_RF */ sub_26144();
     /* CREATE_CLEAN_SKYLIGHT_PLUG */ sub_19995( 0 );
    return;
}

/* CLEAN_SKYLIGHT_PIECES */ void sub_25984()
{
    int I;

     /* CLEANOBJECT */ sub_19566( l_U308 );
     /* CLEANOBJECT */ sub_19566( l_U301 );
    I = 0;
    for ( I = 0; I < l_U305; I++ )
    {
         /* CLEANOBJECT */ sub_19566( l_U305[I] );
    }
    I = 0;
    for ( I = 0; I < l_U302; I++ )
    {
         /* CLEANOBJECT */ sub_19566( l_U302[I] );
    }
    return;
}

/* CREATE_STATIC_FINAL_RF */ void sub_26144()
{
     /* WRITESCRIPTLOG */ sub_2231( "bsw", "CREATE_STATIC_FINAL_RF start", 0 );
     /* LOADMODEL */ sub_3056( l_U288, 1 );
     /* CLEANOBJECT */ sub_19566( l_U308 );
    l_U308 =  /* CREATEOBJECTNOOFFSET */ sub_19640( l_U288, l_U347, l_U350, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U308 ))
    {
         /* WRITESCRIPTLOG */ sub_2231( "bsw", "CREATE_STATIC_FINAL_RF freezing object", 0 );
        FREEZE_OBJECT_POSITION( l_U308, 1 );
    }
    return;
}

/* P_HANDLE_MUSIC */ void sub_26394()
{
    return;
}

/* HANDLE_CHOPSHOP_BREAK_GLASS */ void sub_26436()
{
    switch (l_U300)
    {
        case 1:
         /* WRITESCRIPTLOG */ sub_2231( "BSW", "HANDLE_CHOPSHOP_BREAK_GLASS starting chop shop glass breaking", 0 );
         /* CREATE_BREAKABLE_ROOF */ sub_19437();
         /* PLAY_CHOPSHOP_ANIM */ sub_26593();
        START_PARTICLE_FX_NON_LOOPED_AT_COORD( "NYC_RF_ChopShop_Glass_S", l_U323, l_U326, 1065353216 );
         /* CREATETIMER */ sub_9703( ref l_U289, l_U298, 1, 0 );
         /* STARTTIMER */ sub_10015( ref l_U289 );
        l_U300 = 2;
        break;
        case 2:
        if ( /* ISTIMERDONE */ sub_27283( ref l_U289 ))
        {
            START_PARTICLE_FX_NON_LOOPED_AT_COORD( "NYC_RF_Dust_Up_S", l_U329, l_U332, 1065353216 );
            l_U300 = 3;
        }
        break;
        case 3: break;
    }
    return;
}

/* PLAY_CHOPSHOP_ANIM */ void sub_26593()
{
    SET_OBJECT_VISIBLE( l_U309, 1 );
    SET_OBJECT_VISIBLE( l_U310, 1 );
    SET_OBJECT_VISIBLE( l_U311, 1 );
    SET_OBJECT_VISIBLE( l_U312, 1 );
    SET_OBJECT_VISIBLE( l_U313, 1 );
    SET_OBJECT_VISIBLE( l_U314, 1 );
    SET_OBJECT_VISIBLE( l_U315, 1 );
    SET_OBJECT_VISIBLE( l_U316, 1 );
     /* CLEANOBJECT */ sub_19566( l_U305[0] );
    SET_OBJECT_ANIM_SPEED( l_U309, "CS_WIN_SMASH_01", "ny_chopanim", 0.70000000 );
    SET_OBJECT_ANIM_SPEED( l_U310, "CS_WIN_SMASH_02", "ny_chopanim", 0.70000000 );
    SET_OBJECT_ANIM_SPEED( l_U311, "CS_WIN_SMASH_03", "ny_chopanim", 0.70000000 );
    SET_OBJECT_ANIM_SPEED( l_U312, "CS_WIN_SMASH_04", "ny_chopanim", 0.70000000 );
    SET_OBJECT_ANIM_SPEED( l_U313, "CS_WIN_SMASH_05", "ny_chopanim", 0.70000000 );
    SET_OBJECT_ANIM_SPEED( l_U314, "CS_WIN_SMASH_06", "ny_chopanim", 0.70000000 );
    SET_OBJECT_ANIM_SPEED( l_U315, "CS_WIN_SMASH_07", "ny_chopanim", 0.70000000 );
    SET_OBJECT_ANIM_SPEED( l_U316, "CS_WIN_SMASH_08", "ny_chopanim", 0.70000000 );
    START_PARTICLE_FX_NON_LOOPED_AT_COORD( "NYC_RF_ChopShop_Glass_S", l_U323, l_U323, 1065353216 );
    return;
}

/* ISTIMERDONE */ int sub_27283(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

/* CLEAN_AND_UNLOAD_ALL_NON_GAMEPLAY_SKYLIGHT_OBJECTS */ void sub_27679()
{
     /* CLEAN_SKYLIGHT_PIECES */ sub_25984();
     /* DESTROY_RAYFIRE_PIECES */ sub_20189();
    ENABLE_STATIC_EMITTER( "S_NYC2_SE_CHOP_SHOP_TOOLS", 0 );
     /* UNLOAD_MID_06_SKYLIGHT_RAYFIRE_ASSETS */ sub_27789( 0 );
    return;
}

/* UNLOAD_MID_06_SKYLIGHT_RAYFIRE_ASSETS */ void sub_27789(boolean bParam0)
{
     /* UNLOADMODEL */ sub_7156( -1513711447 );
     /* UNLOADMODEL */ sub_7156( -737544913 );
     /* UNLOADMODEL */ sub_7156( -1035251278 );
     /* UNLOADMODEL */ sub_7156( 1679037765 );
     /* UNLOADMODEL */ sub_7156( -1838550544 );
     /* UNLOADMODEL */ sub_7156( -1332728256 );
     /* UNLOADMODEL */ sub_7156( -1629582627 );
     /* UNLOADMODEL */ sub_7156( 493783035 );
     /* UNLOADMODEL */ sub_7156( l_U288 );
    if (bParam0)
    {
         /* UNLOADMODEL */ sub_7156( l_U287 );
         /* UNLOADMODEL */ sub_7156( l_U285 );
    }
    return;
}

/* CLEAN_UP_MID06_ASSETS */ void sub_27980()
{
     /* WRITESCRIPTLOG */ sub_2231( "BSW", "CLEAN_UP_MID06_ASSETS", "***" );
     /* CLEAN_UP_CHOP_SHOP_WORKERS */ sub_28055();
     /* CLEANPEDARRAY */ sub_6978( ref l_U355 );
     /* CLEANPED */ sub_5676( l_U354 );
    return;
}

/* CLEAN_UP_CHOP_SHOP_WORKERS */ void sub_28055()
{
     /* CLEANPEDARRAY */ sub_6978( ref l_U413 );
    return;
}

/* UNLOAD_NYC_MID_06_ASSETS */ void sub_28138()
{
     /* WRITESCRIPTLOG */ sub_2231( "BSW", "UNLOAD_NYC_MID_06_ASSETS", "***" );
     /* UNLOADMODEL */ sub_7156( 2024698471 );
     /* UNLOADMODEL */ sub_7156( g_U3098 );
    return;
}

/* UNLOAD_GAMEPLAY_SKYLIGHT_RAYFIRE_ASSETS */ void sub_28247()
{
     /* UNLOADMODEL */ sub_7156( l_U287 );
     /* UNLOADMODEL */ sub_7156( l_U285 );
     /* UNLOADMODEL */ sub_7156( l_U286 );
    return;
}

/* CREATE_BROKEN_SKYLIGHT_GAMEPLAY */ void sub_28342()
{
     /* CLEAN_SKYLIGHT_PIECES */ sub_25984();
     /* DESTROY_RAYFIRE_PIECES */ sub_20189();
     /* CREATE_BROKEN_SKYLIGHT_FRAME */ sub_19509();
     /* CREATE_CLEAN_SKYLIGHT_PLUG */ sub_19995( 1 );
     /* CREATE_BROKEN_SKYLIGHT_PLUG */ sub_28408( 0 );
    return;
}

/* CREATE_BROKEN_SKYLIGHT_PLUG */ void sub_28408(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;

    if (iParam0 == 0)
    {
        uVar3 = {l_U341};
        uVar6 = {l_U344};
    }
    else
    {
        uVar3 = {l_U347};
        uVar6 = {l_U350};
    }
     /* LOADMODEL */ sub_3056( l_U286, 1 );
     /* CLEANOBJECT */ sub_19566( l_U302[iParam0] );
    l_U302[iParam0] =  /* CREATEOBJECTNOOFFSET */ sub_19640( l_U286, uVar3, uVar6, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U302[iParam0] ))
    {
        FREEZE_OBJECT_POSITION( l_U302[iParam0], 1 );
    }
    return;
}

/* P_PLAY_MIDSCENE_08 */ void sub_28686()
{
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_08 start", 0 );
     /* CREATE_SNOW_FX_FOR_MID_08 */ sub_28756( 1 );
     /* NIS_PRE_SETUP */ sub_1789( 1, 0, 0, 1 );
     /* LOADSEAMLESSCUTSCENE */ sub_3718( ref l_U929, 1 );
    if ( /* IS_MAX_VALID */ sub_5939())
    {
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1867(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
    }
    if (l_U985 == 1)
    {
        START_CUTSCENE_CAPTURE( ref l_U929 );
    }
    START_SEAMLESS_CUTSCENE();
    WAIT( 1 );
    while (NOT HAS_CUTSCENE_FINISHED())
    {
        WAIT( 0 );
    }
    if (l_U985)
    {
        STOP_CUTSCENE_CAPTURE();
    }
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_08 end", 0 );
    return;
}

/* CREATE_SNOW_FX_FOR_MID_08 */ void sub_28756(unknown uParam0)
{
    vector vVar3;
    vector vVar6;
    vector vVar9;
    vector vVar12;
    vector vVar15;
    vector vVar18;
    vector vVar21;
    vector vVar24;
    vector vVar27;
    float fVar30;
    float fVar31;

    vVar3 = {-145.86450000, -16.21313000, -8.50000000};
    vVar6 = {-143.74710000, -16.86111000, -8.50000000};
    vVar9 = {-140.62700000, -16.68133000, -8.50000000};
    vVar12 = {-138.35160000, -16.74670000, -8.50000000};
    vVar15 = {-126.97470000, -17.15432000, -8.50000000};
    vVar18 = {-122.79310000, -13.07062000, -8.50000000};
    vVar21 = {-124.22460000, -22.69810000, -8.50000000};
    vVar24 = {-123.82480000, -28.63766000, -8.50000000};
    vVar27 = {-125.21000000, -12.25000000, -8.50000000};
    fVar30 = 2.00000000;
    fVar31 = 4.00000000;
    switch (uParam0)
    {
        case 1:
        l_U163[0] = START_PARTICLE_FX_LOOPED_AT_COORD( "Cs_nyc_Snow_S", vVar3, 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        l_U163[1] = START_PARTICLE_FX_LOOPED_AT_COORD( "Cs_nyc_Snow_S", vVar6, 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        break;
        case 2:
        l_U163[2] = START_PARTICLE_FX_LOOPED_AT_COORD( "Cs_nyc_Snow_S", vVar9, 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        l_U163[3] = START_PARTICLE_FX_LOOPED_AT_COORD( "Cs_nyc_Snow_S", vVar12, 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        l_U163[4] = START_PARTICLE_FX_LOOPED_AT_COORD( "Cs_nyc_Snow_S", vVar15, 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        break;
        case 3:
        STOP_PARTICLE_FX_LOOPED( l_U163[0] );
        STOP_PARTICLE_FX_LOOPED( l_U163[1] );
        l_U163[5] = START_PARTICLE_FX_LOOPED_AT_COORD( "Cs_nyc_Snow_S", vVar18, 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        l_U163[6] = START_PARTICLE_FX_LOOPED_AT_COORD( "Cs_nyc_Snow_S", vVar21, 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        break;
        case 4:
        STOP_PARTICLE_FX_LOOPED( l_U163[2] );
        STOP_PARTICLE_FX_LOOPED( l_U163[3] );
        STOP_PARTICLE_FX_LOOPED( l_U163[4] );
        l_U163[7] = START_PARTICLE_FX_LOOPED_AT_COORD( "Cs_nyc_Snow_S", vVar24, 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        l_U163[8] = START_PARTICLE_FX_LOOPED_AT_COORD( "Cs_nyc_Snow_S", vVar27, 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        break;
    }
    return;
}

/* P_PLAY_MIDSCENE_08_SH1 */ void sub_29882()
{
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_08_sh1 start", 0 );
     /* SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR */ sub_2351( 8, 1 );
     /* NIS_PRE_SETUP */ sub_1789( 1, 0, 0, 1 );
     /* LOADSEAMLESSCUTSCENE */ sub_3718( ref l_U937, 1 );
    if ( /* IS_MAX_VALID */ sub_5939())
    {
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1867(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
    }
    START_SEAMLESS_CUTSCENE();
    WAIT( 1 );
    while (NOT HAS_CUTSCENE_FINISHED())
    {
        WAIT( 0 );
    }
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_08_sh1 end", 0 );
    return;
}

/* P_PLAY_MIDSCENE_08_SH2 */ void sub_30169()
{
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_08_sh2 start", 0 );
     /* SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR */ sub_2351( 8, 1 );
     /* NIS_PRE_SETUP */ sub_1789( 1, 0, 0, 1 );
     /* LOADSEAMLESSCUTSCENE */ sub_3718( ref l_U945, 1 );
    if ( /* IS_MAX_VALID */ sub_5939())
    {
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1867(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
    }
    START_SEAMLESS_CUTSCENE();
    WAIT( 1 );
    while (NOT HAS_CUTSCENE_FINISHED())
    {
        WAIT( 0 );
    }
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_08_sh2 end", 0 );
    return;
}

/* P_PLAY_MIDSCENE_08_SH3 */ void sub_30456()
{
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_08_sh3 start", 0 );
     /* SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR */ sub_2351( 8, 1 );
     /* NIS_PRE_SETUP */ sub_1789( 1, 0, 0, 1 );
     /* LOADSEAMLESSCUTSCENE */ sub_3718( ref l_U953, 1 );
    if ( /* IS_MAX_VALID */ sub_5939())
    {
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1867(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
    }
    START_SEAMLESS_CUTSCENE();
    WAIT( 1 );
    while (NOT HAS_CUTSCENE_FINISHED())
    {
        WAIT( 0 );
    }
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_08_sh3 end", 0 );
    return;
}

/* P_PLAY_MIDSCENE_08_SH4 */ void sub_30743()
{
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_08_sh4 start", 0 );
     /* SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR */ sub_2351( 8, 1 );
     /* NIS_PRE_SETUP */ sub_1789( 1, 0, 0, 1 );
     /* LOADSEAMLESSCUTSCENE */ sub_3718( ref l_U961, 1 );
    if ( /* IS_MAX_VALID */ sub_5939())
    {
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1867(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
    }
    START_SEAMLESS_CUTSCENE();
    WAIT( 1 );
    while (NOT HAS_CUTSCENE_FINISHED())
    {
        WAIT( 0 );
    }
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_08_sh4 end", 0 );
    return;
}

/* P_PLAY_MIDSCENE_08_SH5 */ void sub_31030()
{
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_08_sh5 start", 0 );
     /* SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR */ sub_2351( 8, 1 );
     /* NIS_PRE_SETUP */ sub_1789( 1, 0, 0, 1 );
     /* TELEPORTPED */ sub_10962(  /* PLAYER_PED_ID */ sub_1867(), -129.15710000, -17.70816000, -10.11889000, 0 );
    LOAD_SCENE( -129.15710000, -17.70816000, -10.11889000 );
     /* LOADSEAMLESSCUTSCENE */ sub_3718( ref l_U969, 1 );
    while (GET_NUMBER_OF_STREAMING_REQUESTS() > 0)
    {
        WAIT( 0 );
    }
    if ( /* IS_MAX_VALID */ sub_5939())
    {
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1867(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
    }
    if (l_U985 == 1)
    {
        START_CUTSCENE_CAPTURE( ref l_U969 );
    }
    START_SEAMLESS_CUTSCENE();
    WAIT( 1 );
    while (NOT HAS_CUTSCENE_FINISHED())
    {
        WAIT( 0 );
    }
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_08_sh5 end", 0 );
    return;
}

/* P_PLAY_MIDSCENE_08_SH6 */ void sub_31421()
{
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_08_sh6 start", 0 );
     /* SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR */ sub_2351( 8, 1 );
     /* NIS_PRE_SETUP */ sub_1789( 1, 0, 0, 1 );
     /* TELEPORTPED */ sub_10962(  /* PLAYER_PED_ID */ sub_1867(), -129.15710000, -17.70816000, -10.11889000, 0 );
    LOAD_SCENE( -129.15710000, -17.70816000, -10.11889000 );
     /* LOADSEAMLESSCUTSCENE */ sub_3718( ref l_U977, 1 );
    while (GET_NUMBER_OF_STREAMING_REQUESTS() > 0)
    {
        WAIT( 0 );
    }
    if ( /* IS_MAX_VALID */ sub_5939())
    {
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1867(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
    }
    if (l_U985 == 1)
    {
        START_CUTSCENE_CAPTURE( ref l_U977 );
    }
    START_SEAMLESS_CUTSCENE();
    WAIT( 1 );
    while (NOT HAS_CUTSCENE_FINISHED())
    {
        WAIT( 0 );
    }
     /* WRITESCRIPTLOG */ sub_2231( "GA", "P_PLAY_MIDSCENE_08_sh6 end", 0 );
    return;
}

/* P_HANDLE_CUTSCENES */ void sub_31824()
{
    int iVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;

    if (l_U993 == 0)
    {
        START_WIDGET_GROUP( "Image Metrics Cutscene Player" );
        ADD_WIDGET_BOOL( "Start Selected Cutscene", ref l_U742 );
        START_NEW_WIDGET_COMBO();
        ADD_TO_WIDGET_COMBO( ref l_U745 );
        ADD_TO_WIDGET_COMBO( ref l_U753 );
        ADD_TO_WIDGET_COMBO( ref l_U761 );
        ADD_TO_WIDGET_COMBO( ref l_U769 );
        ADD_TO_WIDGET_COMBO( ref l_U777 );
        ADD_TO_WIDGET_COMBO( ref l_U785 );
        ADD_TO_WIDGET_COMBO( ref l_U793 );
        ADD_TO_WIDGET_COMBO( ref l_U801 );
        ADD_TO_WIDGET_COMBO( ref l_U809 );
        ADD_TO_WIDGET_COMBO( ref l_U817 );
        ADD_TO_WIDGET_COMBO( ref l_U825 );
        ADD_TO_WIDGET_COMBO( ref l_U833 );
        ADD_TO_WIDGET_COMBO( ref l_U841 );
        ADD_TO_WIDGET_COMBO( ref l_U849 );
        ADD_TO_WIDGET_COMBO( ref l_U857 );
        ADD_TO_WIDGET_COMBO( ref l_U865 );
        ADD_TO_WIDGET_COMBO( ref l_U873 );
        ADD_TO_WIDGET_COMBO( ref l_U881 );
        ADD_TO_WIDGET_COMBO( ref l_U889 );
        ADD_TO_WIDGET_COMBO( ref l_U897 );
        ADD_TO_WIDGET_COMBO( ref l_U905 );
        ADD_TO_WIDGET_COMBO( ref l_U913 );
        ADD_TO_WIDGET_COMBO( ref l_U921 );
        ADD_TO_WIDGET_COMBO( ref l_U929 );
        ADD_TO_WIDGET_COMBO( ref l_U937 );
        ADD_TO_WIDGET_COMBO( ref l_U945 );
        ADD_TO_WIDGET_COMBO( ref l_U953 );
        ADD_TO_WIDGET_COMBO( ref l_U961 );
        ADD_TO_WIDGET_COMBO( ref l_U969 );
        ADD_TO_WIDGET_COMBO( ref l_U977 );
        l_U744 = STOP_WIDGET_COMBO( "Cutscene Name", ref l_U743 );
        STOP_WIDGET_GROUP();
         /* P_PRINT_SELECTED_CUTSCENE */ sub_32321();
        l_U993 = 1;
    }
    iVar2 = l_U743;
    if ((IS_BUTTON_JUST_PRESSED( 0, 10 )) == 1)
    {
        iVar2--;
        if (iVar2 < 0)
        {
            iVar2 = 29;
        }
        l_U743 = iVar2;
         /* P_PRINT_SELECTED_CUTSCENE */ sub_32321();
    }
    else if ((IS_BUTTON_JUST_PRESSED( 0, 11 )) == 1)
    {
        iVar2++;
        if (iVar2 >= 30)
        {
            iVar2 = 0;
        }
        l_U743 = iVar2;
         /* P_PRINT_SELECTED_CUTSCENE */ sub_32321();
    }
    if (( /* F_START_SELECTED_CUTSCENE */ sub_32613()) == 1)
    {
         /* NIS_PRE_SETUP */ sub_1789( 1, 0, 0, 1 );
        CLEAR_PRINTS();
        GET_CONTENTS_OF_COMBO_WIDGET_SELECTION( 32, ref uVar3, l_U744 );
         /* P_PLAY_CUTSCENE */ sub_2078( uVar3 );
         /* P_FADE_IN_AND_WAIT */ sub_1631( 500 );
         /* P_PRINT_SELECTED_CUTSCENE */ sub_32321();
        l_U742 = 0;
    }
    return;
}

/* P_PRINT_SELECTED_CUTSCENE */ void sub_32321()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;

     /* WRITESCRIPTLOG */ sub_2231( "SP", "P_PRINT_SELECTED_CUTSCENE", "###" );
    CLEAR_PRINTS();
    GET_CONTENTS_OF_COMBO_WIDGET_SELECTION( 32, ref uVar2, l_U744 );
     /* TEXT_ONSCREEN_GENERAL */ sub_32432( ref uVar2, 999999 );
    return;
}

/* TEXT_ONSCREEN_GENERAL */ void sub_32432(unknown uParam0, unknown uParam1)
{
    PRINT_STRING_WITH_LITERAL_STRING( "STRING", uParam0, uParam1, 1 );
    return;
}

/* F_START_SELECTED_CUTSCENE */ int sub_32613()
{
    if ((l_U742 == 1) || ((((IS_BUTTON_PRESSED( 0, 6 )) AND (IS_BUTTON_JUST_PRESSED( 0, 4 ))) == 1) || (((IS_BUTTON_JUST_PRESSED( 0, 6 )) AND (IS_BUTTON_PRESSED( 0, 4 ))) == 1)))
    {
        return 1;
    }
    return 0;
}

