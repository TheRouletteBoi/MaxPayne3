void main()
{
    unknown uVar2;
    unknown uVar3;

    l_U0 = 0;
    l_U1 = 1;
    l_U2 = 0;
    l_U3 = 1.00000000;
    l_U4 = -5.00000000;
    l_U5 = 0;
    l_U6 = 0;
    l_U7 = 0;
    l_U11 = 42;
    l_U12 = 0;
    l_U13 = 0;
    l_U14 = 0;
    l_U15 = 0;
    l_U16 = 0;
    l_U17 = 90.00000000;
    l_U18 = {0.00000000, 0.00000000, 0.00000000};
    l_U21 = {0.00000000, 0.00000000, 0.00000000};
    l_U24 = 0;
    l_U25 = 0;
    l_U26 = 0;
    l_U27 = 0;
    l_U28 = 0;
    l_U29 = 0;
    l_U30 = nil;
    l_U31 = {0.00000000, 0.00000000, 0.00000000};
    l_U34 = 0;
    l_U35 = 0;
    l_U36 = 0;
    StrCopy( ref l_U37, "DEFAULT_SCRIPTED_CAMERA", 32 );
    StrCopy( ref l_U45, "DEFAULT_SPLINE_CAMERA", 32 );
    l_U62 = 0;
    l_U63 = 0;
    l_U64 = 0;
    l_U65 = 0;
    l_U66 = 0;
    l_U67 = 0;
    l_U68 = 0;
    l_U69 = 0;
    l_U70 = 0;
    l_U71 = 0;
    l_U72 = 0;
    l_U73 = 0;
    l_U74 = 0;
    l_U75 = 0;
    l_U76 = 5.00000000;
    l_U77 = 2.00000000;
    l_U78 = 1.00000000;
    l_U79 = 5.00000000;
    l_U80 = 1;
    l_U81 = 0;
    l_U82 = 0;
    l_U273 = 0;
    l_U274 = 0;
    l_U275 = 0;
    l_U276 = 0;
     /* WRITESCRIPTLOG */ sub_477( "SP", "Script s_office_AI_test.sc is starting...", 0 );
     /* F_GIVEPEDWEAPON */ sub_699(  /* PLAYER_PED_ID */ sub_595(), g_U1269, 25000, 0, 0 );
     /* TELEPORTPED */ sub_1169(  /* PLAYER_PED_ID */ sub_595(), 2.54306300, 7.42707900, 4.92433600, 88.62450000 );
    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0)
    {
        FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_595(), 1 );
    }
    uVar2 = GET_HASH_KEY( ref g_U1149 );
    uVar3 = GET_INTERIOR_FROM_NAME( ref g_U1085, 0 );
    SET_INTERIOR_ACTIVE( uVar3, 1, 0 );
    LOAD_SCENE_FOR_ROOM_BY_KEY( uVar3, uVar2 );
    if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0) AND ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_633() )) == 0))
    {
        FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_595(), 0 );
    }
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.76494700, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( -5.01795300, 1065353216, 0 );
     /* P_FADE_IN_AND_WAIT */ sub_1406( 0 );
    while (true)
    {
         /* P_HANDLE_TEST_AI_WIDGETS */ sub_1566();
         /* P_HANDLE_DUAL_COVER_TEST */ sub_2419();
         /* P_HANDLE_ARCH_FIGHT_TEST */ sub_5565();
         /* P_HANDLE_ARCH_FIGHT_TEST2 */ sub_16839();
         /* P_HANDLE_BOARDROOM_FIGHT_TEST */ sub_21865();
        WAIT( 0 );
    }
     /* WRITESCRIPTLOG */ sub_477( "SP", "Script s_office_AI_test.sc is terminating...", 0 );
    return;
}

/* WRITESCRIPTLOG */ void sub_477(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    DISPLAYF( "[{0}][{1}]{3} {2} {3}", 4, 513, uVar5, 1537, uParam0, 1537, uParam1, 1537, sParam2 );
    return;
}

/* PLAYER_PED_ID */ int sub_595()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED(  /* PLAYER_ID */ sub_633() );
    }
    return 0;
}

/* PLAYER_ID */ void sub_633()
{
    return GET_PLAYER_ID();
}

/* F_GIVEPEDWEAPON */ void sub_699(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_1084( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* WRITE_STRING */ void sub_1084(unknown uParam0)
{
    PRINTSTRING( uParam0 );
    PRINTNL();
    return;
}

/* TELEPORTPED */ void sub_1169(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

/* P_FADE_IN_AND_WAIT */ void sub_1406(unknown uParam0)
{
    if ((IS_SCREEN_FADING_IN() == 0) AND (IS_SCREEN_FADED_IN() == 0))
    {
        DO_SCREEN_FADE_IN( uParam0 );
        while (IS_SCREEN_FADED_IN() == 0)
        {
            DISPLAYF( "[SP]### Waiting for screen to fade in... ###", 0 );
            WAIT( 0 );
        }
    }
    return;
}

/* P_HANDLE_TEST_AI_WIDGETS */ void sub_1566()
{
    if (l_U75 == 0)
    {
        START_WIDGET_GROUP( "AI Test Helper" );
        START_WIDGET_GROUP( "Advance Task Tuning" );
        ADD_WIDGET_FLOAT_SLIDER( "fAdvanceTimeToHide", ref l_U76, 0, 10, 0.10000000 );
        ADD_WIDGET_FLOAT_SLIDER( "fAdvanceTimeToIdle", ref l_U77, 0, 10, 0.10000000 );
        ADD_WIDGET_FLOAT_SLIDER( "fAdvanceTimeRangeForAllPedsToStartFiring", ref l_U78, 0, 10, 0.10000000 );
        ADD_WIDGET_FLOAT_SLIDER( "fAdvanceDistance", ref l_U79, 0, 10, 0.10000000 );
        ADD_WIDGET_INT_SLIDER( "iAdvancePedCount", ref l_U80, 0, 10, 1 );
        STOP_WIDGET_GROUP();
        START_WIDGET_GROUP( "Dual Cover Test" );
        ADD_WIDGET_BOOL( "Teleport To Test", ref l_U62 );
        ADD_WIDGET_BOOL( "Start Test", ref l_U63 );
        ADD_WIDGET_BOOL( "Kill Test", ref l_U64 );
        STOP_WIDGET_GROUP();
        START_WIDGET_GROUP( "Architect Fight Test" );
        ADD_WIDGET_BOOL( "Teleport To Test", ref l_U65 );
        ADD_WIDGET_BOOL( "Start Test", ref l_U66 );
        ADD_WIDGET_BOOL( "Kill Test", ref l_U67 );
        STOP_WIDGET_GROUP();
        START_WIDGET_GROUP( "Architect Fight Test 2" );
        ADD_WIDGET_BOOL( "Teleport To Test", ref l_U68 );
        ADD_WIDGET_BOOL( "Start Test", ref l_U69 );
        ADD_WIDGET_BOOL( "Kill Test", ref l_U70 );
        STOP_WIDGET_GROUP();
        START_WIDGET_GROUP( "Cubicles Fight Test" );
        ADD_WIDGET_BOOL( "Teleport To Test", ref l_U71 );
        ADD_WIDGET_BOOL( "Start Test", ref l_U72 );
        ADD_WIDGET_BOOL( "Start Cover Test", ref l_U73 );
        ADD_WIDGET_BOOL( "Kill Test", ref l_U74 );
        STOP_WIDGET_GROUP();
        STOP_WIDGET_GROUP();
        l_U75 = 1;
    }
    return;
}

/* P_HANDLE_DUAL_COVER_TEST */ void sub_2419()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;

    if (l_U62 == 1)
    {
         /* P_FADE_OUT_AND_WAIT */ sub_2471( 250 );
         /* TELEPORTPED */ sub_1169(  /* PLAYER_PED_ID */ sub_595(), 2.54306300, 7.42707900, 4.92433600, 88.62450000 );
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0)
        {
            FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_595(), 1 );
        }
        uVar2 = GET_HASH_KEY( ref g_U1149 );
        uVar3 = GET_INTERIOR_FROM_NAME( ref g_U1085, 0 );
        SET_INTERIOR_ACTIVE( uVar3, 1, 0 );
        LOAD_SCENE_FOR_ROOM_BY_KEY( uVar3, uVar2 );
        if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0) AND ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_633() )) == 0))
        {
            FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_595(), 0 );
        }
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.76494700, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( -5.01795300, 1065353216, 0 );
         /* P_FADE_IN_AND_WAIT */ sub_1406( 250 );
        l_U62 = 0;
    }
    if (l_U63 == 1)
    {
         /* CLEANPED */ sub_2853( l_U59 );
         /* CLEANPED */ sub_2853( l_U60 );
         /* LOADMODEL */ sub_2954( 1554808592, 1 );
         /* P_SETUP_AI_GROUP */ sub_3209( ref l_U53, 1056964608, 0 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref uVar4, -29.43901000, 2.17335100, 4.92433700, 271.05110000, -659598647, 7, 3, 2, 0, 0 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref uVar17, -30.32787000, -0.16784700, 4.92433700, 270.27630000, -355029857, 7, 3, 2, 0, 0 );
         /* CLEANPED */ sub_2853( l_U59 );
        l_U59 =  /* CREATEPED */ sub_3811( ref uVar4 );
        if (((IS_PED_DEAD( l_U59 )) == 0) AND ((DOES_PED_EXIST( l_U59 )) == 1))
        {
            SET_ROOM_FOR_PED_BY_NAME( l_U59, ref g_U1117 );
             /* P_QUICK_ADD_PED_TO_GROUP */ sub_4583( l_U59, ref l_U53 );
             /* F_GIVEPEDWEAPON */ sub_699( l_U59, g_U1269, 25000, 0, 0 );
            if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0)
            {
                TASK_COMBAT_PED( l_U59,  /* PLAYER_PED_ID */ sub_595() );
            }
        }
         /* CLEANPED */ sub_2853( l_U60 );
        l_U60 =  /* CREATEPED */ sub_3811( ref uVar17 );
        if (((IS_PED_DEAD( l_U60 )) == 0) AND ((DOES_PED_EXIST( l_U60 )) == 1))
        {
            SET_ROOM_FOR_PED_BY_NAME( l_U60, ref g_U1117 );
             /* P_QUICK_ADD_PED_TO_GROUP */ sub_4583( l_U60, ref l_U53 );
             /* F_GIVEPEDWEAPON */ sub_699( l_U60, g_U1269, 25000, 0, 0 );
            if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0)
            {
                TASK_COMBAT_PED( l_U60,  /* PLAYER_PED_ID */ sub_595() );
            }
        }
        if (((IS_PED_DEAD( l_U60 )) == 0) AND (((DOES_PED_EXIST( l_U60 )) == 1) AND (((IS_PED_DEAD( l_U59 )) == 0) AND ((DOES_PED_EXIST( l_U59 )) == 1))))
        {
            l_U61 = PEDGROUPTASK_TACTICALCORNER_CREATE( l_U53._fU0, "GenCover", "DB623E8C_F7EA001B_Corner2" );
            PEDGROUPTASK_TACTICALCORNER_ASSIGNPED( l_U53._fU0, l_U61, l_U59 );
            PEDGROUPTASK_TACTICALCORNER_ASSIGNPED( l_U53._fU0, l_U61, l_U60 );
            PEDGROUPTASK_TACTICALCORNER_SETTARGET_PED( l_U53._fU0, l_U61,  /* PLAYER_PED_ID */ sub_595() );
        }
        l_U63 = 0;
    }
    if (l_U64 == 1)
    {
         /* CLEANPED */ sub_2853( l_U59 );
         /* CLEANPED */ sub_2853( l_U60 );
         /* UNLOADMODEL */ sub_5401( 1554808592 );
        l_U64 = 0;
    }
    return;
}

/* P_FADE_OUT_AND_WAIT */ void sub_2471(unknown uParam0)
{
    if ((IS_SCREEN_FADING_OUT() == 0) AND (IS_SCREEN_FADED_OUT() == 0))
    {
        DO_SCREEN_FADE_OUT( uParam0 );
        while (IS_SCREEN_FADED_OUT() == 0)
        {
            DISPLAYF( "[SP]### Waiting for screen to fade out... ###", 0 );
            WAIT( 0 );
        }
    }
    return;
}

/* CLEANPED */ void sub_2853(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

/* LOADMODEL */ void sub_2954(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
         /* WRITE_STRING */ sub_1084( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* P_SETUP_AI_GROUP */ void sub_3209(int iParam0, unknown uParam1, boolean bParam2)
{
    iParam0->_fU4 = uParam1;
    iParam0->_fU0 = CREATE_GROUP( 3, 1 );
    if (bParam2)
    {
        PRINTSTRING( "[MSWW]### P_SETUP_AI_GROUP TOLD TO WAIT FOR GROUP TO EXIST ###" );
        PRINTNL();
        while (NOT (DOES_GROUP_EXIST( iParam0->_fU0 )))
        {
            WAIT( 0 );
            PRINTSTRING( "[MSWW]### GROUP ###" );
            PRINTNL();
        }
        PRINTSTRING( "[MSWW]### P_SETUP_AI_GROUP created group with ID: " );
        PRINTINT( iParam0->_fU0 );
        PRINTNL();
    }
    SET_GROUP_RATIO_FIRING_AT_VISIBLE( iParam0->_fU0, iParam0->_fU4 );
    SET_GROUP_RATIO_FIRING_AT_INVISIBLE( iParam0->_fU0, iParam0->_fU4 );
    if (iParam0->_fU8)
    {
        SET_GROUP_FORMATION( iParam0->_fU0, iParam0->_fU12 );
        SET_GROUP_FORMATION_SPACING( iParam0->_fU0, iParam0->_fU16 );
        SET_GROUP_FORMATION_MAX_MOVE_SPEED( iParam0->_fU0, iParam0->_fU20 );
    }
    return;
}

/* P_CREATEPEDSTRUCTWITHNAME */ void sub_3626(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

/* CREATEPED */ void sub_3811(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_2954( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
     /* SETPEDDEFAULTSTATS */ sub_4302( iParam0->_fU40 );
     /* SETPEDDEFAULTTEMPLATE */ sub_4403( iParam0->_fU40 );
    return iParam0->_fU40;
}

/* SETPEDDEFAULTSTATS */ void sub_4302(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

/* SETPEDDEFAULTTEMPLATE */ void sub_4403(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

/* P_QUICK_ADD_PED_TO_GROUP */ void sub_4583(unknown uParam0, int iParam1)
{
    int iVar4;
    unknown uVar5;

    if ((DOES_GROUP_EXIST( iParam1->_fU0 )) == 0)
    {
         /* WRITE_STRING */ sub_1084( "[SP]### Warning!!! Group does not exist. Creating new group specified attributes. ###" );
        if (iParam1->_fU4 > 0)
        {
             /* P_SETUP_AI_GROUP */ sub_3209( iParam1, iParam1->_fU4, 0 );
        }
        else
        {
             /* P_SETUP_AI_GROUP */ sub_3209( iParam1, 1056964608, 0 );
        }
    }
    else
    {
        PRINTSTRING( "[MSWW]### P_QUICK_ADD_PED_TO_GROUP adding ped to group with ID: " );
        PRINTINT( iParam1->_fU0 );
        PRINTNL();
    }
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        GET_GROUP_SIZE( iParam1->_fU0, ref iVar4, ref uVar5 );
        if (iVar4 == 0)
        {
            SET_PED_AS_GROUP_LEADER( uParam0, iParam1->_fU0 );
        }
        else
        {
            SET_PED_AS_GROUP_MEMBER( uParam0, iParam1->_fU0 );
        }
        SET_PED_NEVER_LEAVES_GROUP( uParam0, 1 );
    }
    return;
}

/* UNLOADMODEL */ void sub_5401(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 1)
    {
        SET_MODEL_AS_NO_LONGER_NEEDED( uParam0 );
    }
    else
    {
         /* WRITE_STRING */ sub_1084( "[SP]### ERROR! (UnloadModel) Trying to unload a model that isn't in the img! ###" );
    }
    return;
}

/* P_HANDLE_ARCH_FIGHT_TEST */ void sub_5565()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    int I;
    unknown uVar7;
    unknown uVar8;
    vector vVar9;
    float fVar12;
    vector vVar13;
    float fVar16;
    vector vVar17;
    float fVar20;

    if (l_U65 == 1)
    {
         /* P_FADE_OUT_AND_WAIT */ sub_2471( 250 );
         /* TELEPORTPED */ sub_1169(  /* PLAYER_PED_ID */ sub_595(), 2.54306300, 7.42707900, 4.92433600, 88.62450000 );
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0)
        {
            FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_595(), 1 );
        }
        uVar2 = GET_HASH_KEY( ref g_U1149 );
        uVar3 = GET_INTERIOR_FROM_NAME( ref g_U1085, 0 );
        SET_INTERIOR_ACTIVE( uVar3, 1, 0 );
        LOAD_SCENE_FOR_ROOM_BY_KEY( uVar3, uVar2 );
        if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0) AND ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_633() )) == 0))
        {
            FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_595(), 0 );
        }
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.76494700, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( -5.01795300, 1065353216, 0 );
         /* P_FADE_IN_AND_WAIT */ sub_1406( 250 );
        l_U65 = 0;
    }
    if (l_U66 == 1)
    {
        uVar4 = GET_INTERIOR_FROM_NAME( ref g_U1061, 0 );
        SET_INTERIOR_FORCE_INSTANTIATION( uVar4, 1 );
        ISEQ_UNREGISTER_ENTITY( 1030383128, "vig01a_1" );
        ISEQ_UNREGISTER_ENTITY( 1030383128, "vig01a_2" );
        ISEQ_UNREGISTER_ENTITY( 1030383128, "vig01a_3" );
         /* TERMINATEISEQ */ sub_5942( 1030383128, 1 );
        ISEQ_UNREGISTER_ENTITY( 2034456429, "enemy1" );
        ISEQ_UNREGISTER_ENTITY( 2034456429, "enemy2" );
         /* TERMINATEISEQ */ sub_5942( 2034456429, 1 );
         /* CLEANPEDARRAY */ sub_6300( ref l_U196 );
         /* CLEANPEDARRAY */ sub_6300( ref l_U267 );
        l_U81 = 1;
        l_U66 = 0;
    }
    if (l_U67 == 1)
    {
        uVar5 = GET_INTERIOR_FROM_NAME( ref g_U1061, 0 );
        SET_INTERIOR_FORCE_INSTANTIATION( uVar5, 0 );
        ISEQ_UNREGISTER_ENTITY( 1030383128, "vig01a_1" );
        ISEQ_UNREGISTER_ENTITY( 1030383128, "vig01a_2" );
        ISEQ_UNREGISTER_ENTITY( 1030383128, "vig01a_3" );
         /* TERMINATEISEQ */ sub_5942( 1030383128, 1 );
        ISEQ_UNREGISTER_ENTITY( 2034456429, "enemy1" );
        ISEQ_UNREGISTER_ENTITY( 2034456429, "enemy2" );
         /* TERMINATEISEQ */ sub_5942( 2034456429, 1 );
         /* CLEANPEDARRAY */ sub_6300( ref l_U196 );
         /* CLEANPEDARRAY */ sub_6300( ref l_U267 );
         /* UNLOADMODEL */ sub_5401( 1554808592 );
        l_U67 = 0;
    }
    vVar9 = {-5.50000000, 7.80000000, 4.93000000};
    fVar12 = 70.00000000;
    vVar13 = {-11.93800000, 10.40000000, 4.93000000};
    fVar16 = -180.00000000;
    vVar17 = {-10.98000000, 3.55000000, 4.93000000};
    fVar20 = -90.00000000;
    switch (l_U81)
    {
        case 0: break;
        case 1:
        DO_SCREEN_FADE_OUT( 0 );
        CLEAR_AREA( 0.00000000, 0.00000000, 0.00000000, 1000.00000000, 1 );
        uVar7 = GET_HASH_KEY( ref g_U1149 );
        uVar8 = GET_INTERIOR_FROM_NAME( ref g_U1085, 0 );
        SET_INTERIOR_ACTIVE( uVar8, 1, 0 );
        LOAD_SCENE_FOR_ROOM_BY_KEY( uVar8, uVar7 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U156[0], -8.00000000, 6.00000000, 4.90000000, 180.00000000, -659598647, 7, 3, 2, 0, 0 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U156[1], -13.56000000, 9.77000000, 4.92000000, 180.00000000, -355029857, 7, 3, 2, 0, 0 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U156[2], -10.00000000, 3.51500000, 4.92000000, -90.00000000, 31691319, 7, 3, 2, 0, 0 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U214[0], -29.26800000, 4.65800000, 4.91294100, -180.00000000, -1846038620, 7, 3, 2, 0, 0 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U214[1], -27.59200000, 7.82000000, 4.91294100, -180.00000000, 674563692, 7, 3, 2, 0, 0 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U214[2], -30.62138000, 8.12236400, 4.91295900, 180.00000000, 634446515, 7, 3, 2, 0, 0 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U214[3], -30.58115000, 10.75911000, 4.91295900, 180.00000000, -659598647, 7, 3, 2, 0, 0 );
         /* P_CREATETRIGGERBOX */ sub_7201( ref l_U83, "TRIG_ARCH_BACKUP_START", -6.71000000, 5.49000000, 4.47000000, 4.00000000, 21.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
         /* P_CREATETRIGGERBOX */ sub_7201( ref l_U104, "TRIG_ARCH_BACKUP_BREAKOUT_01", -12.64000000, 9.71000000, 4.36000000, 3.00000000, 14.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
         /* P_CREATETRIGGERBOX */ sub_7201( ref l_U125, "TRIG_ARCH_NEAR_BOARDROOM_DOORS", -28.71000000, 0.11000000, 4.28000000, 10.00000000, 8.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
         /* P_CREATETETHERBOX */ sub_7550( ref l_U146, "TETH_ARCH_AREA_01", -9.05000000, 5.86000000, 4.58000000, 29.00000000, 19.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
         /* P_CREATETETHERBOX */ sub_7550( ref l_U147, "TETH_ARCH_AREA_02", -27.87000000, 0.45000000, 4.58000000, 10.00000000, 7.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
         /* P_CREATETETHERBOX */ sub_7550( ref l_U148, "TETH_ARCH_ENEMY_MID", -19.31000000, 9.43000000, 4.39000000, 9.00000000, 13.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
         /* P_CREATETETHERBOX */ sub_7550( ref l_U149, "TETH_ARCH_ENEMY_IN_ROOM", -8.75000000, -1.00000000, 4.50000000, 7.50000000, 7.50000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
        l_U273 = 0;
        l_U274 = 0;
        l_U275 = 0;
        l_U276 = 0;
         /* RESETTIMER */ sub_7889( ref l_U307 );
         /* RESETTIMER */ sub_7889( ref l_U316 );
         /* LOADMODEL */ sub_2954( 1554808592, 1 );
         /* LOADWEAPON */ sub_8039( g_U1269, 1 );
         /* LOADWEAPON */ sub_8039( g_U1270, 1 );
         /* LOADWEAPON */ sub_8039( g_U1271, 1 );
         /* LOADWEAPON */ sub_8039( g_U1272, 1 );
         /* LOADISEQ */ sub_8223( 1030383128, 1 );
         /* LOADISEQ */ sub_8223( 2034456429, 1 );
         /* P_SETUP_ARCHITECT_ENEMIES */ sub_8526();
         /* P_SETDOORMINMAXLIMIT */ sub_9488( ref g_U1341, 178.00000000, 179.00000000 );
         /* P_OPENDOOR */ sub_9831( ref g_U1341, 1, 1, 1065353216 );
         /* P_SETDOORMINMAXLIMIT */ sub_9488( ref g_U1348, -179.00000000, -178.00000000 );
         /* P_OPENDOOR */ sub_9831( ref g_U1348, 0, 1, 1065353216 );
        l_U81 = 2;
         /* WRITESCRIPTLOG */ sub_477( "SP", "eArchScenarioState = SCENARIO_START", 0 );
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_477( "SP", "eArchScenarioState = SCENARIO_START", 0 );
        REMOVE_ALL_PED_WEAPONS(  /* PLAYER_PED_ID */ sub_595() );
         /* F_GIVEPEDWEAPON */ sub_699(  /* PLAYER_PED_ID */ sub_595(), g_U1269, 25000, 0, 0 );
         /* TELEPORTPED */ sub_1169(  /* PLAYER_PED_ID */ sub_595(), g_U817[1], g_U926[1] );
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U963[1], 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U1000[1], 1065353216, 0 );
        FREEZE_PED_POSITION( l_U196[0], 0 );
        FREEZE_PED_POSITION( l_U196[1], 0 );
        FREEZE_PED_POSITION( l_U196[2], 0 );
         /* TELEPORTPED */ sub_1169( l_U196[0], vVar9, fVar12 );
         /* TELEPORTPED */ sub_1169( l_U196[1], vVar13, fVar16 );
         /* TELEPORTPED */ sub_1169( l_U196[2], vVar17, fVar20 );
        ISEQ_REGISTER_ENTITY( 1030383128, "vig01a_1", l_U196[0], 0 );
        ISEQ_REGISTER_ENTITY( 1030383128, "vig01a_2", l_U196[1], 0 );
        ISEQ_REGISTER_ENTITY( 1030383128, "vig01a_3", l_U196[2], 0 );
        ISEQ_START( 1030383128 );
         /* NIS_POST_SETUP */ sub_10459( 1, 1 );
        WAIT( 0 );
        DO_SCREEN_FADE_IN( 0 );
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0)
        {
            FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_595(), 0 );
            SIMULATE_PLAYER_INPUT_GAIT(  /* PLAYER_ID */ sub_633(), 3, 1000, 0 );
        }
         /* CREATETIMER */ sub_10837( ref l_U307, 1000, 1, 0 );
         /* STARTTIMER */ sub_10987( ref l_U307 );
        l_U81 = 3;
         /* WRITESCRIPTLOG */ sub_477( "SP", "eArchScenarioState = SCENARIO_PLAYING", 0 );
        break;
        case 3:
        if (( /* ISTIMERDONE */ sub_11182( ref l_U307 )) == 1)
        {
             /* P_ACTIVATE_ARCH_ENEMIES */ sub_11364();
        }
        if (l_U273 == 0)
        {
            if ((( /* F_ARCH_ENEMY_DAMAGED */ sub_13539()) == 1) || ((( /* F_GET_NUM_DEAD_PEDS_IN_ARRAY */ sub_13407( ref l_U196 )) == 3) || (( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_13204( ref l_U83, 0 )) == 1)))
            {
                 /* P_SETUP_ARCH_BACKUP_ENEMIES */ sub_13760();
                 /* P_ACTIVATE_ARCH_BACKUP */ sub_14619();
                 /* CREATETIMER */ sub_10837( ref l_U316, 4000, 1, 0 );
                 /* STARTTIMER */ sub_10987( ref l_U316 );
                l_U273 = 1;
            }
        }
        if (l_U274 == 0)
        {
            if (( /* F_ISPLAYERINTRIGGERBOX */ sub_15836( l_U104 )) == 1)
            {
                for ( I = 0; I < l_U196; I++ )
                {
                    if (((IS_PED_DEAD( l_U267[I] )) == 0) AND ((DOES_PED_EXIST( l_U267[I] )) == 1))
                    {
                        PED_SET_ACTION_INTENTION( l_U267[I], 47, 6000, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS(  /* PLAYER_PED_ID */ sub_595() ) );
                    }
                }
                l_U274 = 1;
            }
        }
        if (( /* ISTIMERDONE */ sub_11182( ref l_U316 )) == 1)
        {
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_11889( ref l_U287 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_12012( 1, l_U267[1], "M6_CP_06_Avg", ref l_U287, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_12012( 0,  /* PLAYER_PED_ID */ sub_595(), "MAX", ref l_U287, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_12281( "SOFF_VIG02", ref l_U287, 8, 1 );
        }
        if (l_U273 == 1)
        {
            if ((( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_16132( ref l_U196 )) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_16132( ref l_U267 ))) == 1)
            {
                if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_16132( ref l_U196 )) > 0)
                {
                    l_U272 =  /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_16282( ref l_U196 );
                }
                else if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_16132( ref l_U267 )) > 0)
                {
                    l_U272 =  /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_16282( ref l_U267 );
                }
                if (((IS_PED_DEAD( l_U272 )) == 0) AND ((DOES_PED_EXIST( l_U272 )) == 1))
                {
                    SET_PED_COMBAT_MOVEMENT( l_U272, 2 );
                     /* P_REMOVEALLTETHERSFROMPED */ sub_16541( l_U272 );
                     /* P_REMOVEALLCOMBATAREASFROMPED */ sub_16629( l_U272 );
                     /* P_TETHERPED */ sub_8981( ref l_U146, l_U272, 1 );
                     /* P_TETHERPED */ sub_8981( ref l_U147, l_U272, 1 );
                }
            }
        }
        if ((( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_16132( ref l_U196 )) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_16132( ref l_U267 ))) == 0)
        {
            l_U81 = 0;
             /* WRITESCRIPTLOG */ sub_477( "SP", "eArchScenarioState = SCENARIO_IDLE", 0 );
        }
        break;
    }
    return;
}

/* TERMINATEISEQ */ void sub_5942(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to terminate does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 1)
    {
        ISEQ_TERMINATE( uParam0 );
    }
    ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
    if (iParam1 == 1)
    {
        while ((ISEQ_IS_LOADED( uParam0 )) == 1)
        {
            DISPLAYF( "[SP]### Waiting for interactive sequence to terminate: {0} {1} ###", 2, 1281, ref uVar4, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* CLEANPEDARRAY */ void sub_6300(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
         /* CLEANPED */ sub_2853( (uParam0^)[I] );
    }
    return;
}

/* P_CREATETRIGGERBOX */ void sub_7201(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    StrCopy( ref iParam0->_fU0, uParam1, 64 );
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = {uParam2};
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 1, iParam0 + 0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* P_CREATETETHERBOX */ void sub_7550(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 2, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* RESETTIMER */ void sub_7889(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

/* LOADWEAPON */ void sub_8039(unknown uParam0, boolean bParam1)
{
    REQUEST_WEAPON( uParam0 );
    if (bParam1)
    {
        while ((HAS_WEAPON_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load weapon: {!f1} : {1} ###", 2, 1, 199730165, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADISEQ */ void sub_8223(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to load does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 0)
    {
        ISEQ_REQUEST( uParam0 );
        ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
        if (iParam1 == 1)
        {
            while ((ISEQ_QUERY_STATE( uParam0, 1 )) == 1)
            {
                DISPLAYF( "[SP]### Waiting for interactive sequence to be loaded: {0} {1} ###", 2, 1281, ref uVar4, 513, uParam0 );
                WAIT( 0 );
            }
        }
    }
    return;
}

/* P_SETUP_ARCHITECT_ENEMIES */ void sub_8526()
{
    int I;
    char[32] cVar3;

     /* WRITESCRIPTLOG */ sub_477( "SP", "P_SETUP_ARCHITECT_ENEMIES", 0 );
     /* P_SETUP_AI_GROUP */ sub_3209( ref l_U150, 1056964608, 0 );
    for ( I = 0; I < 3; I++ )
    {
         /* CLEANPED */ sub_2853( l_U196[I] );
        l_U196[I] =  /* CREATEPED */ sub_3811( ref l_U156[I] );
         /* P_QUICK_ADD_PED_TO_GROUP */ sub_4583( l_U196[I], ref l_U150 );
        if (((IS_PED_DEAD( l_U196[I] )) == 0) AND ((DOES_PED_EXIST( l_U196[I] )) == 1))
        {
            StrCopy( ref cVar3, "piArchEnemies", 32 );
            ConcatString(ref cVar3, " ", 32);
            ConcatString(ref cVar3, I, 32);
            SET_PED_NAME_DEBUG( l_U196[I], ref cVar3 );
            FREEZE_PED_POSITION( l_U196[I], 1 );
            SET_PED_CAN_SMASH_GLASS( l_U196[I], 1 );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U196[I], 1 );
            SET_PED_AI_TEMPLATE( l_U196[I], "AIT_EXPERT" );
            SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( l_U196[I], 0 );
            if (I == 0)
            {
                SET_ROOM_FOR_PED_BY_NAME( l_U196[I], ref g_U1117 );
                SET_PED_COMBAT_RANGE_MIN( l_U196[I], 3.00000000 );
                SET_PED_COMBAT_RANGE_MAX( l_U196[I], 10.00000000 );
                 /* F_GIVEPEDWEAPON */ sub_699( l_U196[I], g_U1269, 25000, 0, 0 );
                 /* P_TETHERPED */ sub_8981( ref l_U146, l_U196[I], 1 );
                 /* P_TETHERPED */ sub_8981( ref l_U147, l_U196[I], 1 );
            }
            else if (I == 1)
            {
                SET_ROOM_FOR_PED_BY_NAME( l_U196[I], ref g_U1117 );
                SET_PED_COMBAT_RANGE_MIN( l_U196[I], 3.00000000 );
                SET_PED_COMBAT_RANGE_MAX( l_U196[I], 30.00000000 );
                 /* F_GIVEPEDWEAPON */ sub_699( l_U196[I], g_U1269, 25000, 0, 0 );
                 /* P_TETHERPED */ sub_8981( ref l_U146, l_U196[I], 1 );
                 /* P_TETHERPED */ sub_8981( ref l_U147, l_U196[I], 1 );
                 /* P_ADDPEDCOMBATAREA */ sub_9237( ref l_U148, l_U196[I] );
            }
            else if (I == 2)
            {
                SET_ROOM_FOR_PED_BY_NAME( l_U196[I], ref g_U1117 );
                SET_PED_COMBAT_RANGE_MIN( l_U196[I], 3.00000000 );
                SET_PED_COMBAT_RANGE_MAX( l_U196[I], 20.00000000 );
                SET_PED_COMBAT_MOVEMENT( l_U196[I], 1 );
                 /* F_GIVEPEDWEAPON */ sub_699( l_U196[I], g_U1271, 25000, 0, 0 );
                 /* P_TETHERPED */ sub_8981( ref l_U149, l_U196[I], 1 );
            };;;
        }
    }
    return;
}

/* P_TETHERPED */ void sub_8981(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_TETHERING_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_TETHERING_OPTION( uParam1, uParam2 );
    }
    return;
}

/* P_ADDPEDCOMBATAREA */ void sub_9237(int iParam0, unknown uParam1)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_SUGGESTED_COMBAT_AREA_ADD_BOX( uParam1, iParam0->_fU0 );
    }
    return;
}

/* P_SETDOORMINMAXLIMIT */ void sub_9488(int iParam0, float fParam1, float fParam2)
{
    if (( /* F_DOESDOOREXIST */ sub_9523( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_9607( iParam0 );
    }
    if (fParam1 > fParam2)
    {
        PRINTSTRING( "[SP]### Error: Door fMinLimit greater than fMaxLimit (default min:-81.0 max:81.0) ###" );
        PRINTNL();
    }
    else
    {
        DOOR_FIND_CLOSEST_SET_LIMIT_MIN( iParam0->_fU0, iParam0->_fU4, fParam1 );
        DOOR_FIND_CLOSEST_SET_LIMIT_MAX( iParam0->_fU0, iParam0->_fU4, fParam2 );
    }
    return;
}

/* F_DOESDOOREXIST */ int sub_9523(int iParam0)
{
    int iVar3;

    iVar3 = DOES_OBJECT_OF_TYPE_EXIST_AT_COORDS( iParam0->_fU4, 1.00000000, iParam0->_fU0 );
    if (iVar3 == 1)
    {
        return 1;
    }
    return 0;
}

/* P_PRINTDOORNOTEXIST */ void sub_9607(unknown uParam0)
{
    (uParam0^) = {(uParam0^)};
    return;
}

/* P_OPENDOOR */ void sub_9831(int iParam0, int iParam1, int iParam2, unknown uParam3)
{
    float fVar6;

    if (( /* F_DOESDOOREXIST */ sub_9523( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_9607( iParam0 );
    }
    fVar6 = 0.00000000;
    if (iParam1 == 1)
    {
        fVar6 = uParam3;
    }
    else
    {
        fVar6 = -uParam3;
    }
    if (iParam2 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, fVar6 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    return;
}

/* NIS_POST_SETUP */ void sub_10459(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )))
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_633(), 1, 0 );
        SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_595(), 0 );
        if (bParam0)
        {
             /* P_MAX_RELOAD_WEAPONS */ sub_10557();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

/* P_MAX_RELOAD_WEAPONS */ void sub_10557()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_595(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_595(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP(  /* PLAYER_PED_ID */ sub_595(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP(  /* PLAYER_PED_ID */ sub_595(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

/* CREATETIMER */ void sub_10837(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

/* STARTTIMER */ void sub_10987(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

/* ISTIMERDONE */ int sub_11182(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

/* P_ACTIVATE_ARCH_ENEMIES */ void sub_11364()
{
    unknown uVar2;

     /* WRITESCRIPTLOG */ sub_477( "SP", "P_ACTIVATE_ARCH_ENEMIES", 0 );
    ISEQ_UNREGISTER_ENTITY( 1030383128, "vig01a_1" );
    ISEQ_UNREGISTER_ENTITY( 1030383128, "vig01a_2" );
    ISEQ_UNREGISTER_ENTITY( 1030383128, "vig01a_3" );
     /* TERMINATEISEQ */ sub_5942( 1030383128, 1 );
    if (((IS_PED_DEAD( l_U196[0] )) == 0) AND ((DOES_PED_EXIST( l_U196[0] )) == 1))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U196[0], 0 );
        SET_PED_ALLOWED_TO_KNEEL_AND_FIRE( l_U196[0], 0 );
    }
    if (((IS_PED_DEAD( l_U196[1] )) == 0) AND ((DOES_PED_EXIST( l_U196[1] )) == 1))
    {
        CLEAR_PED_TASKS( l_U196[1] );
        TASK_ATTACK_MOVE_WHILE_AIMING_AT_PED( l_U196[1], -12.49055000, 8.52289200, 4.92433600,  /* PLAYER_PED_ID */ sub_595(), 0, 1092616192, 1101004800, -1082130432, 3 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U196[1], 0 );
    }
    if (((IS_PED_DEAD( l_U196[2] )) == 0) AND ((DOES_PED_EXIST( l_U196[2] )) == 1))
    {
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_COMBAT_MOVE_TO_COVER( 0, "GenCover", "DB623E8C_E6565CF4_Popover1", 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U196[2], 0 );
        CLOSE_SEQUENCE_TASK( uVar2 );
        CLEAR_PED_TASKS( l_U196[2] );
        TASK_PERFORM_SEQUENCE( l_U196[2], uVar2 );
        CLEAR_SEQUENCE_TASK( uVar2 );
    }
     /* RESET_SCRIPT_SPEECH_STRUCT */ sub_11889( ref l_U277 );
     /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_12012( 1, l_U196[0], "M6_CP_03_Avg", ref l_U277, 2, 0 );
     /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_12012( 0,  /* PLAYER_PED_ID */ sub_595(), "MAX", ref l_U277, 2, 0 );
     /* PLAY_SINGLE_SPEECH */ sub_12281( "SOFF_VIG01A", ref l_U277, 8, 1 );
    return;
}

/* RESET_SCRIPT_SPEECH_STRUCT */ void sub_11889(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

/* ADD_PED_FOR_SCRIPT_SPEECH */ void sub_12012(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

/* PLAY_SINGLE_SPEECH */ void sub_12281(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return  /* PLAY_SINGLE_SPEECH_FROM_BLOCK */ sub_12326( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

/* PLAY_SINGLE_SPEECH_FROM_BLOCK */ void sub_12326(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return  /* PLAYSPEECHMAIN */ sub_12413( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

/* PLAYSPEECHMAIN */ int sub_12413(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT ( /* CANTHISSPEECHBEPLAYED */ sub_12465( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
     /* COPYHIDDENSPEECHSTUCT */ sub_12983( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

/* CANTHISSPEECHBEPLAYED */ int sub_12465(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

/* COPYHIDDENSPEECHSTUCT */ void sub_12983(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

/* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ void sub_13204(int iParam0, unknown uParam1)
{
    if (iParam0->_fU64 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU64 =  /* F_ISPEDINTRIGGERBOX */ sub_13280(  /* PLAYER_PED_ID */ sub_595(), (iParam0^) );
        if ((iParam0->_fU64) AND (uParam1))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU64;
}

/* F_ISPEDINTRIGGERBOX */ int sub_13280(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, ref uParam1._fU0 );
    }
    return 0;
}

/* F_GET_NUM_DEAD_PEDS_IN_ARRAY */ void sub_13407(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            if (IS_PED_DEAD( (uParam0^)[I] ))
            {
                Result++;
            }
        }
    }
    return Result;
}

/* F_ARCH_ENEMY_DAMAGED */ int sub_13539()
{
    int I;

    I = 0;
    for ( I = 0; I < l_U196; I++ )
    {
        if (((IS_PED_DEAD( l_U196[I] )) == 1) AND ((DOES_PED_EXIST( l_U196[I] )) == 1))
        {
            return 1;
        }
        else if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0) AND (((IS_PED_DEAD( l_U196[I] )) == 0) AND ((DOES_PED_EXIST( l_U196[I] )) == 1)))
        {
            if ((HAS_PED_BEEN_DAMAGED_BY_PED( l_U196[I],  /* PLAYER_PED_ID */ sub_595(), 0 )) == 1)
            {
                return 1;
            }
        }
    }
    return 0;
}

/* P_SETUP_ARCH_BACKUP_ENEMIES */ void sub_13760()
{
    int I;
    char[32] cVar3;

     /* WRITESCRIPTLOG */ sub_477( "SP", "P_SETUP_ARCH_BACKUP_ENEMIES", 0 );
     /* P_SETUP_AI_GROUP */ sub_3209( ref l_U200, 1056964608, 0 );
    for ( I = 0; I < l_U267; I++ )
    {
         /* CLEANPED */ sub_2853( l_U267[I] );
        l_U267[I] =  /* CREATEPED */ sub_3811( ref l_U214[I] );
        if (((IS_PED_DEAD( l_U267[I] )) == 0) AND ((DOES_PED_EXIST( l_U267[I] )) == 1))
        {
            StrCopy( ref cVar3, "piArchBackupEnemies", 32 );
            ConcatString(ref cVar3, " ", 32);
            ConcatString(ref cVar3, I, 32);
            SET_PED_NAME_DEBUG( l_U267[I], ref cVar3 );
            FREEZE_PED_POSITION( l_U267[I], 1 );
            SET_PED_CAN_SMASH_GLASS( l_U267[I], 1 );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U267[I], 1 );
            SET_PED_AI_TEMPLATE( l_U267[I], "AIT_EXPERT" );
            SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( l_U267[I], 0 );
            if (I == 0)
            {
                 /* P_QUICK_ADD_PED_TO_GROUP */ sub_4583( l_U267[I], ref l_U150 );
                SET_ROOM_FOR_PED_BY_NAME( l_U267[I], ref g_U1125 );
                SET_PED_COMBAT_RANGE_MIN( l_U267[I], 3.00000000 );
                SET_PED_COMBAT_RANGE_MAX( l_U267[I], 20.00000000 );
                 /* F_GIVEPEDWEAPON */ sub_699( l_U267[I], g_U1271, 25000, 0, 0 );
                 /* P_TETHERPED */ sub_8981( ref l_U146, l_U267[I], 1 );
                 /* P_TETHERPED */ sub_8981( ref l_U147, l_U267[I], 1 );
                 /* P_ADDPEDCOMBATAREA */ sub_9237( ref l_U148, l_U196[I] );
            }
            else if (I == 1)
            {
                 /* P_QUICK_ADD_PED_TO_GROUP */ sub_4583( l_U267[I], ref l_U150 );
                SET_ROOM_FOR_PED_BY_NAME( l_U267[I], ref g_U1125 );
                SET_PED_COMBAT_RANGE_MIN( l_U267[I], 3.00000000 );
                SET_PED_COMBAT_RANGE_MAX( l_U267[I], 20.00000000 );
                 /* F_GIVEPEDWEAPON */ sub_699( l_U267[I], g_U1269, 25000, 0, 0 );
                 /* P_TETHERPED */ sub_8981( ref l_U146, l_U267[I], 1 );
                 /* P_TETHERPED */ sub_8981( ref l_U147, l_U267[I], 1 );
                 /* P_ADDPEDCOMBATAREA */ sub_9237( ref l_U148, l_U196[I] );
            }
            else if (I == 2)
            {
                 /* P_QUICK_ADD_PED_TO_GROUP */ sub_4583( l_U267[I], ref l_U200 );
                SET_ROOM_FOR_PED_BY_NAME( l_U267[I], ref g_U1125 );
                 /* F_GIVEPEDWEAPON */ sub_699( l_U267[I], g_U1269, 25000, 0, 0 );
            }
            else if (I == 3)
            {
                 /* P_QUICK_ADD_PED_TO_GROUP */ sub_4583( l_U267[I], ref l_U200 );
                SET_ROOM_FOR_PED_BY_NAME( l_U267[I], ref g_U1125 );
                 /* F_GIVEPEDWEAPON */ sub_699( l_U267[I], g_U1272, 25000, 0, 0 );
            };;;;
        }
    }
    return;
}

/* P_ACTIVATE_ARCH_BACKUP */ void sub_14619()
{
    vector vVar2;
    float fVar5;
    vector vVar6;
    float fVar9;
    unknown uVar10;
    unknown uVar11;

     /* WRITESCRIPTLOG */ sub_477( "SP", "P_ACTIVATE_ARCH_BACKUP", 0 );
    vVar2 = {-27.93000000, 7.21000000, 4.91300000};
    fVar5 = 180.00000000;
    vVar6 = {-30.11000000, 4.61000000, 4.91300000};
    fVar9 = 180.00000000;
    if (((IS_PED_DEAD( l_U267[0] )) == 0) AND ((DOES_PED_EXIST( l_U267[0] )) == 1))
    {
        FREEZE_PED_POSITION( l_U267[0], 0 );
    }
    if (((IS_PED_DEAD( l_U267[1] )) == 0) AND ((DOES_PED_EXIST( l_U267[1] )) == 1))
    {
        FREEZE_PED_POSITION( l_U267[1], 0 );
    }
    if (((IS_PED_DEAD( l_U267[2] )) == 0) AND ((DOES_PED_EXIST( l_U267[2] )) == 1))
    {
        FREEZE_PED_POSITION( l_U267[2], 0 );
    }
    if (((IS_PED_DEAD( l_U267[3] )) == 0) AND ((DOES_PED_EXIST( l_U267[3] )) == 1))
    {
        FREEZE_PED_POSITION( l_U267[3], 0 );
    }
     /* TELEPORTPED */ sub_1169( l_U267[0], vVar2, fVar5 );
     /* TELEPORTPED */ sub_1169( l_U267[1], vVar6, fVar9 );
    ISEQ_REGISTER_ENTITY( 2034456429, "enemy1", l_U267[0], 0 );
    ISEQ_REGISTER_ENTITY( 2034456429, "enemy2", l_U267[1], 0 );
    ISEQ_START( 2034456429 );
    if (((IS_PED_DEAD( l_U267[0] )) == 0) AND ((DOES_PED_EXIST( l_U267[0] )) == 1))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U267[0], 0 );
    }
    if (((IS_PED_DEAD( l_U267[1] )) == 0) AND ((DOES_PED_EXIST( l_U267[1] )) == 1))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U267[1], 0 );
    }
    if (((IS_PED_DEAD( l_U267[2] )) == 0) AND ((DOES_PED_EXIST( l_U267[2] )) == 1))
    {
         /* TELEPORTPED */ sub_1169( l_U267[2], l_U214[2]._fU0, l_U214[2]._fU12 );
        OPEN_SEQUENCE_TASK( ref uVar10 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
        TASK_GO_TO_COORD_WHILE_AIMING_AT_COORD( 0, -29.08190000, 1.23921900, 4.92433700, -8.00000000, 6.00000000, 4.90000000, 3, 0, 0.50000000, 1.00000000, 0, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        TASK_COMBAT_PED( l_U267[2],  /* PLAYER_PED_ID */ sub_595() );
        CLOSE_SEQUENCE_TASK( uVar10 );
        CLEAR_PED_TASKS( l_U267[2] );
        TASK_PERFORM_SEQUENCE( l_U267[2], uVar10 );
        CLEAR_SEQUENCE_TASK( uVar10 );
    }
    if (((IS_PED_DEAD( l_U267[3] )) == 0) AND ((DOES_PED_EXIST( l_U267[3] )) == 1))
    {
         /* TELEPORTPED */ sub_1169( l_U267[3], l_U214[3]._fU0, l_U214[3]._fU12 );
        OPEN_SEQUENCE_TASK( ref uVar11 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
        TASK_GO_TO_COORD_WHILE_AIMING_AT_COORD( 0, -30.29906000, 3.33331700, 4.92433700, -8.00000000, 6.00000000, 4.90000000, 3, 0, 0.50000000, 1.00000000, 0, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        TASK_COMBAT_PED( l_U267[3],  /* PLAYER_PED_ID */ sub_595() );
        CLOSE_SEQUENCE_TASK( uVar11 );
        CLEAR_PED_TASKS( l_U267[3] );
        TASK_PERFORM_SEQUENCE( l_U267[3], uVar11 );
        CLEAR_SEQUENCE_TASK( uVar11 );
    }
    l_U212 = PEDGROUPTASK_TACTICALCORNER_CREATE( l_U200._fU0, "GenCover", "DB623E8C_47334F5_Corner2" );
    PEDGROUPTASK_TACTICALCORNER_ASSIGNPED( l_U200._fU0, l_U212, l_U267[2] );
    PEDGROUPTASK_TACTICALCORNER_ASSIGNPED( l_U200._fU0, l_U212, l_U267[3] );
    PEDGROUPTASK_TACTICALCORNER_SETTARGET_PED( l_U200._fU0, l_U212,  /* PLAYER_PED_ID */ sub_595() );
    return;
}

/* F_ISPLAYERINTRIGGERBOX */ void sub_15836(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20)
{
    return  /* F_ISPEDINTRIGGERBOX */ sub_13280(  /* PLAYER_PED_ID */ sub_595(), uParam0 );
}

/* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ void sub_16132(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result++;
        }
    }
    return Result;
}

/* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ void sub_16282(unknown uParam0)
{
    int I;

    if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_16132( uParam0 )) == 1)
    {
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
            {
                if (NOT (GET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I] )))
                {
                    SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I], 1 );
                    return (uParam0^)[I];
                }
            }
        }
    }
    return nil;
}

/* P_REMOVEALLTETHERSFROMPED */ void sub_16541(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        RESET_PED_TETHERING( uParam0 );
    }
    return;
}

/* P_REMOVEALLCOMBATAREASFROMPED */ void sub_16629(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        RESET_PED_SUGGESTED_COMBAT_AREA( uParam0 );
    }
    return;
}

/* P_HANDLE_ARCH_FIGHT_TEST2 */ void sub_16839()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    int I;
    unknown uVar7;
    unknown uVar8;
    vector vVar9;
    float fVar12;
    vector vVar13;
    float fVar16;
    vector vVar17;
    float fVar20;

    if (l_U68 == 1)
    {
         /* P_FADE_OUT_AND_WAIT */ sub_2471( 250 );
         /* TELEPORTPED */ sub_1169(  /* PLAYER_PED_ID */ sub_595(), 2.54306300, 7.42707900, 4.92433600, 88.62450000 );
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0)
        {
            FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_595(), 1 );
        }
        uVar2 = GET_HASH_KEY( ref g_U1149 );
        uVar3 = GET_INTERIOR_FROM_NAME( ref g_U1085, 0 );
        SET_INTERIOR_ACTIVE( uVar3, 1, 0 );
        LOAD_SCENE_FOR_ROOM_BY_KEY( uVar3, uVar2 );
        if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0) AND ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_633() )) == 0))
        {
            FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_595(), 0 );
        }
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.76494700, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( -5.01795300, 1065353216, 0 );
         /* P_FADE_IN_AND_WAIT */ sub_1406( 250 );
        l_U68 = 0;
    }
    if (l_U69 == 1)
    {
        uVar4 = GET_INTERIOR_FROM_NAME( ref g_U1061, 0 );
        SET_INTERIOR_FORCE_INSTANTIATION( uVar4, 1 );
        ISEQ_UNREGISTER_ENTITY( 1030383128, "vig01a_1" );
        ISEQ_UNREGISTER_ENTITY( 1030383128, "vig01a_2" );
        ISEQ_UNREGISTER_ENTITY( 1030383128, "vig01a_3" );
         /* TERMINATEISEQ */ sub_5942( 1030383128, 1 );
        ISEQ_UNREGISTER_ENTITY( 2034456429, "enemy1" );
        ISEQ_UNREGISTER_ENTITY( 2034456429, "enemy2" );
         /* TERMINATEISEQ */ sub_5942( 2034456429, 1 );
         /* CLEANPEDARRAY */ sub_6300( ref l_U196 );
         /* CLEANPEDARRAY */ sub_6300( ref l_U267 );
        l_U82 = 1;
        l_U69 = 0;
    }
    if (l_U70 == 1)
    {
        uVar5 = GET_INTERIOR_FROM_NAME( ref g_U1061, 0 );
        SET_INTERIOR_FORCE_INSTANTIATION( uVar5, 0 );
        ISEQ_UNREGISTER_ENTITY( 1030383128, "vig01a_1" );
        ISEQ_UNREGISTER_ENTITY( 1030383128, "vig01a_2" );
        ISEQ_UNREGISTER_ENTITY( 1030383128, "vig01a_3" );
         /* TERMINATEISEQ */ sub_5942( 1030383128, 1 );
        ISEQ_UNREGISTER_ENTITY( 2034456429, "enemy1" );
        ISEQ_UNREGISTER_ENTITY( 2034456429, "enemy2" );
         /* TERMINATEISEQ */ sub_5942( 2034456429, 1 );
         /* CLEANPEDARRAY */ sub_6300( ref l_U196 );
         /* CLEANPEDARRAY */ sub_6300( ref l_U267 );
         /* UNLOADMODEL */ sub_5401( 1554808592 );
        l_U70 = 0;
    }
    vVar9 = {-5.50000000, 7.80000000, 4.93000000};
    fVar12 = 70.00000000;
    vVar13 = {-11.93800000, 10.40000000, 4.93000000};
    fVar16 = -180.00000000;
    vVar17 = {-10.98000000, 3.55000000, 4.93000000};
    fVar20 = -90.00000000;
    switch (l_U82)
    {
        case 0: break;
        case 1:
        DO_SCREEN_FADE_OUT( 0 );
        CLEAR_AREA( 0.00000000, 0.00000000, 0.00000000, 1000.00000000, 1 );
        uVar7 = GET_HASH_KEY( ref g_U1149 );
        uVar8 = GET_INTERIOR_FROM_NAME( ref g_U1085, 0 );
        SET_INTERIOR_ACTIVE( uVar8, 1, 0 );
        LOAD_SCENE_FOR_ROOM_BY_KEY( uVar8, uVar7 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U156[0], -8.00000000, 6.00000000, 4.90000000, 180.00000000, -659598647, 7, 3, 2, 0, 0 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U156[1], -13.56000000, 9.77000000, 4.92000000, 180.00000000, -355029857, 7, 3, 2, 0, 0 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U156[2], -10.00000000, 3.51500000, 4.92000000, -90.00000000, 31691319, 7, 3, 2, 0, 0 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U214[0], -29.26800000, 4.65800000, 4.91294100, -180.00000000, -1846038620, 7, 3, 2, 0, 0 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U214[1], -27.59200000, 7.82000000, 4.91294100, -180.00000000, 674563692, 7, 3, 2, 0, 0 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U214[2], -30.62138000, 8.12236400, 4.91295900, 180.00000000, 634446515, 7, 3, 2, 0, 0 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U214[3], -30.58115000, 10.75911000, 4.91295900, 180.00000000, -659598647, 7, 3, 2, 0, 0 );
         /* P_CREATETRIGGERBOX */ sub_7201( ref l_U83, "TRIG_ARCH_BACKUP_START", -6.71000000, 5.49000000, 4.47000000, 4.00000000, 21.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
         /* P_CREATETRIGGERBOX */ sub_7201( ref l_U104, "TRIG_ARCH_BACKUP_BREAKOUT_01", -12.64000000, 9.71000000, 4.36000000, 3.00000000, 14.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
         /* P_CREATETRIGGERBOX */ sub_7201( ref l_U125, "TRIG_ARCH_NEAR_BOARDROOM_DOORS", -28.71000000, 0.11000000, 4.28000000, 10.00000000, 8.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
         /* P_CREATETETHERBOX */ sub_7550( ref l_U146, "TETH_ARCH_AREA_01", -9.05000000, 5.86000000, 4.58000000, 29.00000000, 19.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
         /* P_CREATETETHERBOX */ sub_7550( ref l_U147, "TETH_ARCH_AREA_02", -27.87000000, 0.45000000, 4.58000000, 10.00000000, 7.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
         /* P_CREATETETHERBOX */ sub_7550( ref l_U148, "TETH_ARCH_ENEMY_MID", -19.31000000, 9.43000000, 4.39000000, 9.00000000, 13.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
         /* P_CREATETETHERBOX */ sub_7550( ref l_U149, "TETH_ARCH_ENEMY_IN_ROOM", -8.75000000, -1.00000000, 4.50000000, 7.50000000, 7.50000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
        l_U273 = 0;
        l_U274 = 0;
        l_U275 = 0;
        l_U276 = 0;
         /* RESETTIMER */ sub_7889( ref l_U307 );
         /* RESETTIMER */ sub_7889( ref l_U316 );
         /* LOADMODEL */ sub_2954( 1554808592, 1 );
         /* LOADWEAPON */ sub_8039( g_U1269, 1 );
         /* LOADWEAPON */ sub_8039( g_U1270, 1 );
         /* LOADWEAPON */ sub_8039( g_U1271, 1 );
         /* LOADWEAPON */ sub_8039( g_U1272, 1 );
         /* LOADISEQ */ sub_8223( 1030383128, 1 );
         /* LOADISEQ */ sub_8223( 2034456429, 1 );
         /* P_SETUP_ARCHITECT_ENEMIES */ sub_8526();
         /* P_SETDOORMINMAXLIMIT */ sub_9488( ref g_U1341, 178.00000000, 179.00000000 );
         /* P_OPENDOOR */ sub_9831( ref g_U1341, 1, 1, 1065353216 );
         /* P_SETDOORMINMAXLIMIT */ sub_9488( ref g_U1348, -179.00000000, -178.00000000 );
         /* P_OPENDOOR */ sub_9831( ref g_U1348, 0, 1, 1065353216 );
        l_U82 = 2;
         /* WRITESCRIPTLOG */ sub_477( "SP", "eArchScenarioState2 = SCENARIO_START", 0 );
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_477( "SP", "eArchScenarioState2 = SCENARIO_START", 0 );
        REMOVE_ALL_PED_WEAPONS(  /* PLAYER_PED_ID */ sub_595() );
         /* F_GIVEPEDWEAPON */ sub_699(  /* PLAYER_PED_ID */ sub_595(), g_U1269, 25000, 0, 0 );
         /* TELEPORTPED */ sub_1169(  /* PLAYER_PED_ID */ sub_595(), g_U817[1], g_U926[1] );
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U963[1], 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U1000[1], 1065353216, 0 );
        FREEZE_PED_POSITION( l_U196[0], 0 );
        FREEZE_PED_POSITION( l_U196[1], 0 );
        FREEZE_PED_POSITION( l_U196[2], 0 );
         /* TELEPORTPED */ sub_1169( l_U196[0], vVar9, fVar12 );
         /* TELEPORTPED */ sub_1169( l_U196[1], vVar13, fVar16 );
         /* TELEPORTPED */ sub_1169( l_U196[2], vVar17, fVar20 );
        ISEQ_REGISTER_ENTITY( 1030383128, "vig01a_1", l_U196[0], 0 );
        ISEQ_REGISTER_ENTITY( 1030383128, "vig01a_2", l_U196[1], 0 );
        ISEQ_REGISTER_ENTITY( 1030383128, "vig01a_3", l_U196[2], 0 );
        ISEQ_START( 1030383128 );
         /* NIS_POST_SETUP */ sub_10459( 1, 1 );
        WAIT( 0 );
        DO_SCREEN_FADE_IN( 0 );
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0)
        {
            FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_595(), 0 );
            SIMULATE_PLAYER_INPUT_GAIT(  /* PLAYER_ID */ sub_633(), 3, 1000, 0 );
        }
         /* CREATETIMER */ sub_10837( ref l_U307, 1000, 1, 0 );
         /* STARTTIMER */ sub_10987( ref l_U307 );
        l_U82 = 3;
         /* WRITESCRIPTLOG */ sub_477( "SP", "eArchScenarioState2 = SCENARIO_PLAYING", 0 );
        break;
        case 3:
        if (( /* ISTIMERDONE */ sub_11182( ref l_U307 )) == 1)
        {
             /* P_ACTIVATE_ARCH_ENEMIES */ sub_11364();
        }
        if (l_U273 == 0)
        {
            if ((( /* F_ARCH_ENEMY_DAMAGED */ sub_13539()) == 1) || ((( /* F_GET_NUM_DEAD_PEDS_IN_ARRAY */ sub_13407( ref l_U196 )) == 3) || (( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_13204( ref l_U83, 0 )) == 1)))
            {
                 /* P_SETUP_ARCH_BACKUP_ENEMIES2 */ sub_19461();
                 /* P_ACTIVATE_ARCH_BACKUP2 */ sub_20077();
                 /* CREATETIMER */ sub_10837( ref l_U316, 4000, 1, 0 );
                 /* STARTTIMER */ sub_10987( ref l_U316 );
                l_U273 = 1;
            }
        }
        if (l_U274 == 0)
        {
            if (( /* F_ISPLAYERINTRIGGERBOX */ sub_15836( l_U104 )) == 1)
            {
                for ( I = 0; I < l_U196; I++ )
                {
                    if (((IS_PED_DEAD( l_U267[I] )) == 0) AND ((DOES_PED_EXIST( l_U267[I] )) == 1))
                    {
                        PED_SET_ACTION_INTENTION( l_U267[I], 47, 6000, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS(  /* PLAYER_PED_ID */ sub_595() ) );
                    }
                }
                l_U274 = 1;
            }
        }
        if (( /* ISTIMERDONE */ sub_11182( ref l_U316 )) == 1)
        {
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_11889( ref l_U287 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_12012( 1, l_U267[1], "M6_CP_06_Avg", ref l_U287, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_12012( 0,  /* PLAYER_PED_ID */ sub_595(), "MAX", ref l_U287, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_12281( "SOFF_VIG02", ref l_U287, 8, 1 );
        }
        if (l_U273 == 1)
        {
            if ((( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_16132( ref l_U196 )) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_16132( ref l_U267 ))) == 1)
            {
                if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_16132( ref l_U196 )) > 0)
                {
                    l_U272 =  /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_16282( ref l_U196 );
                }
                else if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_16132( ref l_U267 )) > 0)
                {
                    l_U272 =  /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_16282( ref l_U267 );
                }
                if (((IS_PED_DEAD( l_U272 )) == 0) AND ((DOES_PED_EXIST( l_U272 )) == 1))
                {
                    SET_PED_COMBAT_MOVEMENT( l_U272, 2 );
                     /* P_REMOVEALLTETHERSFROMPED */ sub_16541( l_U272 );
                     /* P_REMOVEALLCOMBATAREASFROMPED */ sub_16629( l_U272 );
                     /* P_TETHERPED */ sub_8981( ref l_U146, l_U272, 1 );
                     /* P_TETHERPED */ sub_8981( ref l_U147, l_U272, 1 );
                }
            }
        }
        if ((( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_16132( ref l_U196 )) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_16132( ref l_U267 ))) == 0)
        {
            l_U82 = 0;
             /* WRITESCRIPTLOG */ sub_477( "SP", "eArchScenarioState2 = SCENARIO_IDLE", 0 );
        }
        break;
    }
    return;
}

/* P_SETUP_ARCH_BACKUP_ENEMIES2 */ void sub_19461()
{
    int I;
    char[32] cVar3;

     /* WRITESCRIPTLOG */ sub_477( "SP", "P_SETUP_ARCH_BACKUP_ENEMIES2", 0 );
     /* P_SETUP_AI_GROUP */ sub_3209( ref l_U206, 1056964608, 0 );
    for ( I = 0; I < l_U267; I++ )
    {
         /* CLEANPED */ sub_2853( l_U267[I] );
        l_U267[I] =  /* CREATEPED */ sub_3811( ref l_U214[I] );
        if (((IS_PED_DEAD( l_U267[I] )) == 0) AND ((DOES_PED_EXIST( l_U267[I] )) == 1))
        {
            StrCopy( ref cVar3, "piArchBackupEnemies", 32 );
            ConcatString(ref cVar3, " ", 32);
            ConcatString(ref cVar3, I, 32);
            SET_PED_NAME_DEBUG( l_U267[I], ref cVar3 );
            FREEZE_PED_POSITION( l_U267[I], 1 );
            SET_PED_CAN_SMASH_GLASS( l_U267[I], 1 );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U267[I], 1 );
            SET_PED_AI_TEMPLATE( l_U267[I], "AIT_EXPERT" );
            SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( l_U267[I], 0 );
            if (I == 0)
            {
                 /* P_QUICK_ADD_PED_TO_GROUP */ sub_4583( l_U267[I], ref l_U206 );
                SET_ROOM_FOR_PED_BY_NAME( l_U267[I], ref g_U1125 );
                 /* F_GIVEPEDWEAPON */ sub_699( l_U267[I], g_U1271, 25000, 0, 0 );
            }
            else if (I == 1)
            {
                 /* P_QUICK_ADD_PED_TO_GROUP */ sub_4583( l_U267[I], ref l_U206 );
                SET_ROOM_FOR_PED_BY_NAME( l_U267[I], ref g_U1125 );
                 /* F_GIVEPEDWEAPON */ sub_699( l_U267[I], g_U1269, 25000, 0, 0 );
            }
            else if (I == 2)
            {
                 /* P_QUICK_ADD_PED_TO_GROUP */ sub_4583( l_U267[I], ref l_U206 );
                SET_ROOM_FOR_PED_BY_NAME( l_U267[I], ref g_U1125 );
                 /* F_GIVEPEDWEAPON */ sub_699( l_U267[I], g_U1269, 25000, 0, 0 );
            }
            else if (I == 3)
            {
                 /* CLEANPED */ sub_2853( l_U267[I] );
            };;;;
        }
    }
    return;
}

/* P_ACTIVATE_ARCH_BACKUP2 */ void sub_20077()
{
    vector vVar2;
    float fVar5;
    vector vVar6;
    float fVar9;
    unknown uVar10;
    int I;

     /* WRITESCRIPTLOG */ sub_477( "SP", "P_ACTIVATE_ARCH_BACKUP2", 0 );
    vVar2 = {-27.93000000, 7.21000000, 4.91300000};
    fVar5 = 180.00000000;
    vVar6 = {-30.11000000, 4.61000000, 4.91300000};
    fVar9 = 180.00000000;
    if (((IS_PED_DEAD( l_U267[0] )) == 0) AND ((DOES_PED_EXIST( l_U267[0] )) == 1))
    {
        FREEZE_PED_POSITION( l_U267[0], 0 );
    }
    if (((IS_PED_DEAD( l_U267[1] )) == 0) AND ((DOES_PED_EXIST( l_U267[1] )) == 1))
    {
        FREEZE_PED_POSITION( l_U267[1], 0 );
    }
    if (((IS_PED_DEAD( l_U267[2] )) == 0) AND ((DOES_PED_EXIST( l_U267[2] )) == 1))
    {
        FREEZE_PED_POSITION( l_U267[2], 0 );
    }
    if (((IS_PED_DEAD( l_U267[3] )) == 0) AND ((DOES_PED_EXIST( l_U267[3] )) == 1))
    {
        FREEZE_PED_POSITION( l_U267[3], 0 );
    }
     /* TELEPORTPED */ sub_1169( l_U267[0], vVar2, fVar5 );
     /* TELEPORTPED */ sub_1169( l_U267[1], vVar6, fVar9 );
    ISEQ_REGISTER_ENTITY( 2034456429, "enemy1", l_U267[0], 0 );
    ISEQ_REGISTER_ENTITY( 2034456429, "enemy2", l_U267[1], 0 );
    ISEQ_START( 2034456429 );
    if (((IS_PED_DEAD( l_U267[0] )) == 0) AND ((DOES_PED_EXIST( l_U267[0] )) == 1))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U267[0], 0 );
    }
    if (((IS_PED_DEAD( l_U267[1] )) == 0) AND ((DOES_PED_EXIST( l_U267[1] )) == 1))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U267[1], 0 );
    }
    if (((IS_PED_DEAD( l_U267[2] )) == 0) AND ((DOES_PED_EXIST( l_U267[2] )) == 1))
    {
         /* TELEPORTPED */ sub_1169( l_U267[2], l_U214[2]._fU0, l_U214[2]._fU12 );
        OPEN_SEQUENCE_TASK( ref uVar10 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
        TASK_GO_TO_COORD_WHILE_AIMING_AT_COORD( 0, -29.08190000, 1.23921900, 4.92433700, -8.00000000, 6.00000000, 4.90000000, 3, 0, 0.50000000, 1.00000000, 0, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        TASK_COMBAT_PED( l_U267[2],  /* PLAYER_PED_ID */ sub_595() );
        CLOSE_SEQUENCE_TASK( uVar10 );
        CLEAR_PED_TASKS( l_U267[2] );
        TASK_PERFORM_SEQUENCE( l_U267[2], uVar10 );
        CLEAR_SEQUENCE_TASK( uVar10 );
    }
    l_U213 = PEDGROUPTASK_ADVANCE_CREATE( l_U206._fU0 );
    for ( I = 0; I <= 2; I++ )
    {
        if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0) AND (((IS_PED_DEAD( l_U267[I] )) == 0) AND ((DOES_PED_EXIST( l_U267[I] )) == 1)))
        {
            TASK_COMBAT_PED( l_U267[I],  /* PLAYER_PED_ID */ sub_595() );
        }
    }
    for ( I = 0; I <= 2; I++ )
    {
        if (((IS_PED_DEAD( l_U267[I] )) == 0) AND ((DOES_PED_EXIST( l_U267[I] )) == 1))
        {
            PEDGROUPTASK_ADVANCE_ASSIGNPED( l_U206._fU0, l_U213, l_U267[I] );
        }
    }
    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0)
    {
        PEDGROUPTASK_ADVANCE_SETTARGET_PED( l_U206._fU0, l_U213,  /* PLAYER_PED_ID */ sub_595() );
    }
    PEDGROUPTASK_ADVANCE_SETTIMETOHIDE( l_U206._fU0, l_U213, l_U76 );
    PEDGROUPTASK_ADVANCE_SETTIMETOIDLE( l_U206._fU0, l_U213, l_U77 );
    PEDGROUPTASK_ADVANCE_SETTIMERANGEFORALLPEDSTOSTARTFIRING( l_U206._fU0, l_U213, l_U78 );
    PEDGROUPTASK_ADVANCE_SETADVANCEDISTANCE( l_U206._fU0, l_U213, l_U79 );
    PEDGROUPTASK_ADVANCE_SETNUMPEDSTOADVANCE( l_U206._fU0, l_U213, l_U80 );
    PEDGROUPTASK_ADVANCE_TRIGGER_MOVE( l_U206._fU0, l_U213 );
    return;
}

/* P_HANDLE_BOARDROOM_FIGHT_TEST */ void sub_21865()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;

    if (l_U71 == 1)
    {
         /* P_FADE_OUT_AND_WAIT */ sub_2471( 250 );
         /* TELEPORTPED */ sub_1169(  /* PLAYER_PED_ID */ sub_595(), -10.45452000, 20.07167000, 4.90041800, 347.63280000 );
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0)
        {
            FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_595(), 1 );
        }
        uVar2 = GET_HASH_KEY( ref g_U1141 );
        uVar3 = GET_INTERIOR_FROM_NAME( ref g_U1077, 0 );
        SET_INTERIOR_ACTIVE( uVar3, 1, 0 );
        LOAD_SCENE_FOR_ROOM_BY_KEY( uVar3, uVar2 );
        if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0) AND ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_633() )) == 0))
        {
            FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_595(), 0 );
        }
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( 11.88668000, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( -10.14178000, 1065353216, 0 );
         /* P_FADE_IN_AND_WAIT */ sub_1406( 250 );
        l_U71 = 0;
    }
    if (l_U72 == 1)
    {
        DO_SCREEN_FADE_OUT( 0 );
        CLEAR_AREA( 0.00000000, 0.00000000, 0.00000000, 1000.00000000, 1 );
        uVar4 = GET_HASH_KEY( ref g_U1141 );
        uVar5 = GET_INTERIOR_FROM_NAME( ref g_U1077, 0 );
        SET_INTERIOR_ACTIVE( uVar5, 1, 0 );
        LOAD_SCENE_FOR_ROOM_BY_KEY( uVar5, uVar4 );
         /* P_SETUP_RAPPELERS */ sub_22234();
         /* P_ACTIVATE_RAPPELERS */ sub_23129();
        DO_SCREEN_FADE_IN( 0 );
        l_U72 = 0;
    }
    if (l_U73 == 1)
    {
        DO_SCREEN_FADE_OUT( 0 );
        CLEAR_AREA( 0.00000000, 0.00000000, 0.00000000, 1000.00000000, 1 );
        uVar6 = GET_HASH_KEY( ref g_U1141 );
        uVar7 = GET_INTERIOR_FROM_NAME( ref g_U1077, 0 );
        SET_INTERIOR_ACTIVE( uVar7, 1, 0 );
        LOAD_SCENE_FOR_ROOM_BY_KEY( uVar7, uVar6 );
         /* P_SETUP_COVER_RAPPELERS */ sub_23718();
         /* P_ACTIVATE_COVER_RAPPELERS */ sub_24500();
        DO_SCREEN_FADE_IN( 0 );
        l_U73 = 0;
    }
    if (l_U74 == 1)
    {
         /* CLEANPEDARRAY */ sub_6300( ref l_U410 );
         /* UNLOADMODEL */ sub_5401( -1191626852 );
        l_U74 = 0;
    }
    return;
}

/* P_SETUP_RAPPELERS */ void sub_22234()
{
    int I;

     /* WRITESCRIPTLOG */ sub_477( "SP", "P_SETUP_RAPPELERS", 0 );
     /* LOADMODEL */ sub_2954( -1191626852, 1 );
     /* P_SETUP_AI_GROUP */ sub_3209( ref l_U325, 1056964608, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U331[0], -16.23637000, 29.98495000, 4.90045300, 214.35420000, 755155591, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U331[1], -14.12145000, 35.69639000, 4.90045300, 233.89360000, -1189455104, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U331[2], -3.88984900, 39.26111000, 4.90043600, 141.29910000, -968598121, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U331[3], -4.24615300, 29.73421000, 4.90043600, 139.45410000, -1756393917, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U331[4], -1.10642900, 25.31510000, 4.90043600, 196.83390000, -491288833, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U331[5], -6.82530800, 24.87255000, 4.90043600, 93.59643000, 1234921722, 7, 3, 2, 0, 0 );
    for ( I = 0; I < 6; I++ )
    {
         /* CLEANPED */ sub_2853( l_U410[I] );
        l_U410[I] =  /* CREATEPED */ sub_3811( ref l_U331[I] );
        if (NOT (IS_PED_DEAD( l_U410[I] )))
        {
            SET_ROOM_FOR_PED_BY_NAME( l_U410[I], ref g_U1141 );
             /* P_QUICK_ADD_PED_TO_GROUP */ sub_4583( l_U410[I], ref l_U325 );
            CLEAR_PED_TASKS( l_U410[I] );
            SET_PED_AI_TEMPLATE( l_U410[I], "AIT_EXPERT" );
            if (I == 0)
            {
                 /* F_GIVEPEDWEAPON */ sub_699( l_U410[I], g_U1272, 25000, 0, 0 );
            }
            else if (I == 1)
            {
                 /* F_GIVEPEDWEAPON */ sub_699( l_U410[I], g_U1271, 25000, 0, 0 );
            }
            else if (I == 2)
            {
                 /* F_GIVEPEDWEAPON */ sub_699( l_U410[I], g_U1271, 25000, 0, 0 );
            }
            else if (I == 3)
            {
                 /* F_GIVEPEDWEAPON */ sub_699( l_U410[I], g_U1271, 25000, 0, 0 );
            }
            else if (I == 4)
            {
                 /* F_GIVEPEDWEAPON */ sub_699( l_U410[I], g_U1272, 25000, 0, 0 );
            }
            else if (I == 5)
            {
                 /* F_GIVEPEDWEAPON */ sub_699( l_U410[I], g_U1271, 25000, 0, 0 );
            };;;;;;
        }
    }
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_22991( ref l_U410, "RAPPEL_ENEMY" );
    return;
}

/* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ void sub_22991(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

/* P_ACTIVATE_RAPPELERS */ void sub_23129()
{
    int I;

     /* WRITESCRIPTLOG */ sub_477( "SP", "P_ACTIVATE_RAPPELERS", 0 );
    l_U418 = PEDGROUPTASK_ADVANCE_CREATE( l_U325._fU0 );
    for ( I = 0; I < l_U410; I++ )
    {
        if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0) AND (((IS_PED_DEAD( l_U410[I] )) == 0) AND ((DOES_PED_EXIST( l_U410[I] )) == 1)))
        {
            TASK_COMBAT_PED( l_U410[I],  /* PLAYER_PED_ID */ sub_595() );
        }
    }
    for ( I = 0; I < l_U410; I++ )
    {
        if (((IS_PED_DEAD( l_U410[I] )) == 0) AND ((DOES_PED_EXIST( l_U410[I] )) == 1))
        {
            PEDGROUPTASK_ADVANCE_ASSIGNPED( l_U325._fU0, l_U418, l_U410[I] );
        }
    }
    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0)
    {
        PEDGROUPTASK_ADVANCE_SETTARGET_PED( l_U325._fU0, l_U418,  /* PLAYER_PED_ID */ sub_595() );
    }
    PEDGROUPTASK_ADVANCE_SETTIMETOHIDE( l_U325._fU0, l_U418, l_U76 );
    PEDGROUPTASK_ADVANCE_SETTIMETOIDLE( l_U325._fU0, l_U418, l_U77 );
    PEDGROUPTASK_ADVANCE_SETTIMERANGEFORALLPEDSTOSTARTFIRING( l_U325._fU0, l_U418, l_U78 );
    PEDGROUPTASK_ADVANCE_SETADVANCEDISTANCE( l_U325._fU0, l_U418, l_U79 );
    PEDGROUPTASK_ADVANCE_SETNUMPEDSTOADVANCE( l_U325._fU0, l_U418, l_U80 );
    PEDGROUPTASK_ADVANCE_TRIGGER_MOVE( l_U325._fU0, l_U418 );
    return;
}

/* P_SETUP_COVER_RAPPELERS */ void sub_23718()
{
    int I;

     /* WRITESCRIPTLOG */ sub_477( "SP", "P_SETUP_COVER_RAPPELERS", 0 );
     /* LOADMODEL */ sub_2954( -1191626852, 1 );
     /* P_SETUP_AI_GROUP */ sub_3209( ref l_U325, 1056964608, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U331[0], -21.44122000, 40.06734000, 4.90041700, 180.00000000, 755155591, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U331[1], -12.12142000, 40.07878000, 4.90041800, 180.00000000, -1189455104, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U331[2], -8.67279900, 40.63526000, 4.90041800, 180.00000000, -968598121, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U331[3], -7.11095500, 34.96950000, 4.90041800, 180.00000000, -1756393917, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U331[4], -0.72079800, 40.74728000, 4.90041800, 180.00000000, -491288833, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_3626( ref l_U331[5], -6.12768100, 29.66348000, 4.90041800, 180.00000000, 1234921722, 7, 3, 2, 0, 0 );
    for ( I = 0; I < 6; I++ )
    {
         /* CLEANPED */ sub_2853( l_U410[I] );
        l_U410[I] =  /* CREATEPED */ sub_3811( ref l_U331[I] );
        if (NOT (IS_PED_DEAD( l_U410[I] )))
        {
            SET_ROOM_FOR_PED_BY_NAME( l_U410[I], ref g_U1141 );
             /* P_QUICK_ADD_PED_TO_GROUP */ sub_4583( l_U410[I], ref l_U325 );
            CLEAR_PED_TASKS( l_U410[I] );
            SET_PED_AI_TEMPLATE( l_U410[I], "AIT_EXPERT" );
            if (I == 0)
            {
                 /* F_GIVEPEDWEAPON */ sub_699( l_U410[I], g_U1272, 25000, 0, 0 );
            }
            else if (I == 1)
            {
                 /* F_GIVEPEDWEAPON */ sub_699( l_U410[I], g_U1271, 25000, 0, 0 );
            }
            else if (I == 2)
            {
                 /* F_GIVEPEDWEAPON */ sub_699( l_U410[I], g_U1271, 25000, 0, 0 );
            }
            else if (I == 3)
            {
                 /* F_GIVEPEDWEAPON */ sub_699( l_U410[I], g_U1271, 25000, 0, 0 );
            }
            else if (I == 4)
            {
                 /* F_GIVEPEDWEAPON */ sub_699( l_U410[I], g_U1272, 25000, 0, 0 );
            }
            else if (I == 5)
            {
                 /* F_GIVEPEDWEAPON */ sub_699( l_U410[I], g_U1271, 25000, 0, 0 );
            };;;;;;
        }
    }
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_22991( ref l_U410, "RAPPEL_ENEMY" );
    return;
}

/* P_ACTIVATE_COVER_RAPPELERS */ void sub_24500()
{
    int I;

     /* WRITESCRIPTLOG */ sub_477( "SP", "P_ACTIVATE_COVER_RAPPELERS", 0 );
    l_U418 = PEDGROUPTASK_ADVANCE_CREATE( l_U325._fU0 );
    for ( I = 0; I < l_U410; I++ )
    {
        if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0) AND (((IS_PED_DEAD( l_U410[I] )) == 0) AND ((DOES_PED_EXIST( l_U410[I] )) == 1)))
        {
            if (I == 0)
            {
                TASK_COMBAT_SNAP_TO_COVER( l_U410[I], "GenCover", "60BB2DC7_FF170F89_Corner2",  /* PLAYER_PED_ID */ sub_595() );
            }
            else if (I == 1)
            {
                TASK_COMBAT_SNAP_TO_COVER( l_U410[I], "GenCover", "60BB2DC7_E394D885_Corner1",  /* PLAYER_PED_ID */ sub_595() );
            }
            else if (I == 2)
            {
                TASK_COMBAT_SNAP_TO_COVER( l_U410[I], "GenCover", "60BB2DC7_9C79663B_Corner2",  /* PLAYER_PED_ID */ sub_595() );
            }
            else if (I == 3)
            {
                TASK_COMBAT_SNAP_TO_COVER( l_U410[I], "GenCover", "60BB2DC7_1573BF2D_Popover1",  /* PLAYER_PED_ID */ sub_595() );
            }
            else if (I == 4)
            {
                TASK_COMBAT_SNAP_TO_COVER( l_U410[I], "GenCover", "60BB2DC7_98205D89_Popover1",  /* PLAYER_PED_ID */ sub_595() );
            }
            else if (I == 5)
            {
                TASK_COMBAT_SNAP_TO_COVER( l_U410[I], "GenCover", "60BB2DC7_B7A5FF90_Popover7",  /* PLAYER_PED_ID */ sub_595() );
            };;;;;;
        }
    }
    for ( I = 0; I < l_U410; I++ )
    {
        if (((IS_PED_DEAD( l_U410[I] )) == 0) AND ((DOES_PED_EXIST( l_U410[I] )) == 1))
        {
            PEDGROUPTASK_ADVANCE_ASSIGNPED( l_U325._fU0, l_U418, l_U410[I] );
        }
    }
    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_595() )) == 0)
    {
        PEDGROUPTASK_ADVANCE_SETTARGET_PED( l_U325._fU0, l_U418,  /* PLAYER_PED_ID */ sub_595() );
    }
    PEDGROUPTASK_ADVANCE_SETTIMETOHIDE( l_U325._fU0, l_U418, l_U76 );
    PEDGROUPTASK_ADVANCE_SETTIMETOIDLE( l_U325._fU0, l_U418, l_U77 );
    PEDGROUPTASK_ADVANCE_SETTIMERANGEFORALLPEDSTOSTARTFIRING( l_U325._fU0, l_U418, l_U78 );
    PEDGROUPTASK_ADVANCE_SETADVANCEDISTANCE( l_U325._fU0, l_U418, l_U79 );
    PEDGROUPTASK_ADVANCE_SETNUMPEDSTOADVANCE( l_U325._fU0, l_U418, l_U80 );
    PEDGROUPTASK_ADVANCE_TRIGGER_MOVE( l_U325._fU0, l_U418 );
    return;
}

