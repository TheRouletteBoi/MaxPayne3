void main()
{
    l_U0 = 1;
    l_U1 = 144;
    l_U3 = 0;
    l_U4 = 0;
    l_U5 = 1500;
    StrCopy( ref l_U15, "DEFAULT_SCRIPTED_CAMERA", 32 );
    StrCopy( ref l_U23, "DEFAULT_SPLINE_CAMERA", 32 );
    l_U114 = 0;
    l_U133 = 0;
    l_U134 = 0;
    l_U135 = 0;
    l_U136 = 0;
    l_U137 = 0;
    l_U138 = 0;
    l_U175 = 0;
    l_U241 = {22.50533000, -30.65623000, -0.00010100};
    l_U244 = 340.49100000;
    l_U288 = 0;
    l_U467 = 0;
    l_U489 = 0;
    l_U526 = 0;
    l_U527 = 0;
    l_U528 = 0;
    l_U529 = 0;
    l_U530 = 0;
    l_U531 = 0;
    l_U570 = 0;
    l_U571 = {26.10012000, -18.40194000, -0.00021400};
    l_U574 = 240.65750000;
    l_U575 = -5.00000000;
    l_U576 = -90.00000000;
    l_U577 = -0.96738200;
     /* WRITESCRIPTLOG */ sub_360( "SP", "Script s_office_lobbyGun.sc is starting...", 0 );
    l_U136 = 1;
    while (IS_EXITFLAG_SET() == 0)
    {
         /* P_HANDLE_FAILURE */ sub_498();
        if (l_U137 == 0)
        {
             /* P_HANDLE_EVENTS */ sub_9405();
        }
        WAIT( 0 );
    }
     /* P_CLEANUP_ALL */ sub_3684();
     /* P_UNLOAD_ASSETS */ sub_39946();
    SET_EXITFLAG_RESPONSE();
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "s_office_lobbyGun" );
     /* WRITESCRIPTLOG */ sub_360( "SP", "Script s_office_lobbyGun.sc is terminating...", 0 );
    return;
}

/* WRITESCRIPTLOG */ void sub_360(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    DISPLAYF( "[{0}][{1}]{3} {2} {3}", 4, 513, uVar5, 1537, uParam0, 1537, uParam1, 1537, sParam2 );
    return;
}

/* P_HANDLE_FAILURE */ void sub_498()
{
    switch (l_U137)
    {
        case 0:
        if (g_U706 == 7)
        {
            if (( /* RESTARTING_CHECKPOINT */ sub_607()) == 1)
            {
                DO_SCREEN_FADE_OUT( 0 );
                if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0)
                {
                    SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_903(), 1 );
                    SET_PED_PROOFS(  /* PLAYER_PED_ID */ sub_903(), 1, 1, 1, 1, 1 );
                }
                if (IS_LAST_MAN_STANDING_ACTIVE() == 1)
                {
                    RESET_LAST_MAN_STANDING();
                }
                l_U137 = 4;
                 /* WRITESCRIPTLOG */ sub_360( "SP", "eFailState = FAIL_CLEANUP_ALL", 0 );
            }
            if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 1)
            {
                 /* WRITESCRIPTLOG */ sub_360( "SP", "Mission Failed: Player died.", 0 );
                l_U137 = 2;
                 /* WRITESCRIPTLOG */ sub_360( "SP", "eFailState = FAIL_WAITING_FOR_PLAYER", 0 );
            }
        }
        else if ((( /* IS_RESTART_ACTIVE */ sub_1417()) == 1) || ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 1))
        {
            if (((CUTSCENE_NAMED_IS_LOADING( "mid_08_office_pt2" )) == 1) || ((CUTSCENE_IS_LOADED( "mid_08_office_pt2" )) == 1))
            {
                CLEAR_NAMED_CUTSCENE( "mid_08_office_pt2" );
            }
             /* P_RESET_CHECKPOINT_THREAD */ sub_1566( ref g_U708[7] );
            SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        }
        break;
        case 1:
        if (IS_ANIMATED_CAMERA_PLAYING() == 0)
        {
            l_U137 = 2;
             /* WRITESCRIPTLOG */ sub_360( "SP", "eFailState = FAIL_WAITING_FOR_PLAYER", 0 );
        }
        break;
        case 2:
        if (( /* F_CHECK_QUIT_RETRY */ sub_1723( 0 )) == 1)
        {
            l_U137 = 3;
             /* WRITESCRIPTLOG */ sub_360( "SP", "eFailState = FAIL_WAITING_FOR_RESPAWN", 0 );
        }
        break;
        case 3:
        if ((IS_LAST_MAN_STANDING_ACTIVE() == 0) AND ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0))
        {
            if ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_941() )) == 0)
            {
                SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_941(), 0, 0 );
            }
            DO_SCREEN_FADE_OUT( 0 );
            l_U137 = 4;
             /* WRITESCRIPTLOG */ sub_360( "SP", "eFailState = FAIL_CLEANUP_ALL", 0 );
        }
        break;
        case 4:
         /* WRITESCRIPTLOG */ sub_360( "SP", "eFailState = FAIL_CLEANUP_ALL", 0 );
         /* NIS_PRE_SETUP */ sub_3373( 1, 0, 0, 1 );
        CLEAR_HELP();
        CLEAR_PRINTS();
        DESTROY_ALL_CAMS();
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        AUDIO_MUSIC_SUSPEND( 500 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0)
        {
            PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_903(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
        }
         /* P_CLEANUP_ALL */ sub_3684();
        l_U137 = 5;
         /* WRITESCRIPTLOG */ sub_360( "SP", "eFailState = FAIL_RESTORE_PLAYER", 0 );
        break;
        case 5:
         /* WRITESCRIPTLOG */ sub_360( "SP", "eFailState = FAIL_RESTORE_PLAYER", 0 );
         /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_4715( ref l_U139,  /* PLAYER_PED_ID */ sub_903() );
        l_U137 = 6;
         /* WRITESCRIPTLOG */ sub_360( "SP", "eFailState = FAIL_RESTART_CHECKPOINT", 0 );
        break;
        case 6:
         /* WRITESCRIPTLOG */ sub_360( "SP", "eFailState = FAIL_RESTART_CHECKPOINT", 0 );
        l_U136 = 1;
        l_U137 = 0;
         /* WRITESCRIPTLOG */ sub_360( "SP", "eFailState = FAIL_RESTART_CHECKPOINT", 0 );
        break;
    }
    return;
}

/* RESTARTING_CHECKPOINT */ int sub_607()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U0 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )))
        {
            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_903(), 0 );
            SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_941(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE(  /* PLAYER_ID */ sub_941(), 1 );
            if ((IS_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_903() )) == 0)
            {
                SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_903(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

/* PLAYER_PED_ID */ int sub_903()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED(  /* PLAYER_ID */ sub_941() );
    }
    return 0;
}

/* PLAYER_ID */ void sub_941()
{
    return GET_PLAYER_ID();
}

/* IS_RESTART_ACTIVE */ void sub_1417()
{
    return g_U648;
}

/* P_RESET_CHECKPOINT_THREAD */ void sub_1566(int iParam0)
{
    iParam0->_fU36 = 0;
    iParam0->_fU40 = 0;
    return;
}

/* F_CHECK_QUIT_RETRY */ int sub_1723(int iParam0)
{
    iParam0 = 1;
    switch (l_U4)
    {
        case 0:
        if (NOT ( /* HASTIMERBEENACTIVATED */ sub_1801( ref l_U6 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )))
            {
                l_U5 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
             /* CREATETIMER */ sub_1929( ref l_U6, l_U5, 1, 1 );
             /* STARTTIMER */ sub_2077( ref l_U6 );
        }
        if ( /* ISTIMERDONE */ sub_2208( ref l_U6 ))
        {
             /* WRITESCRIPTLOG */ sub_360( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_941() )))
            {
                SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_941(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U4 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U4 = 2;
            }
            else
            {
                l_U4 = 3;
            }
        }
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_360( "NS", "Player will QUIT", 0 );
         /* P_POSTQUITRETRYCLEANUP */ sub_2703();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_360( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
         /* P_POSTQUITRETRYCLEANUP */ sub_2703();
        return 1;
        break;
    }
    return 0;
}

/* HASTIMERBEENACTIVATED */ int sub_1801(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

/* CREATETIMER */ void sub_1929(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

/* STARTTIMER */ void sub_2077(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

/* ISTIMERDONE */ int sub_2208(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

/* P_POSTQUITRETRYCLEANUP */ void sub_2703()
{
     /* WRITESCRIPTLOG */ sub_360( "NS", "P_PostFailRetryCleanup", 0 );
     /* RESETTIMER */ sub_2776( ref l_U6 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_941() )))
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_941(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U3 = 0;
    l_U3 = l_U3;
    l_U4 = 0;
    return;
}

/* RESETTIMER */ void sub_2776(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

/* NIS_PRE_SETUP */ void sub_3373(int iParam0, int iParam1, unknown uParam2, boolean bParam3)
{
    END_POSTFX_BLENDER( 12, 0 );
    if (bParam3)
    {
        STOP_ALL_IMAGEFX( 0 );
    }
    SET_WIDESCREEN_BORDERS( 1, 500 );
    DISPLAY_HUD( 0 );
    if (iParam0 == 1)
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )))
        {
            SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_941(), 0, uParam2 );
            SET_PED_DUCKING(  /* PLAYER_PED_ID */ sub_903(), 0 );
            if (iParam1 == 1)
            {
                CLEAR_PED_TASKS_IMMEDIATELY(  /* PLAYER_PED_ID */ sub_903() );
            }
            SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_903(), 1 );
        }
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    return;
}

/* P_CLEANUP_ALL */ void sub_3684()
{
     /* WRITESCRIPTLOG */ sub_360( "SP", "P_CLEANUP_ALL", 0 );
     /* CLEANPED */ sub_3742( l_U240 );
     /* CLEANPEDARRAY */ sub_3831( ref l_U278 );
     /* CLEANPEDARRAY */ sub_3831( ref l_U443 );
    if (g_U706 >= 7)
    {
         /* CLEANOBJECT */ sub_3931( g_U1433 );
        STOP_PARTICLE_FX_LOOPED( g_U1434 );
    }
    if (g_U706 >= 7)
    {
         /* CLEANPED */ sub_3742( g_U1430 );
    }
    if (g_U706 >= 7)
    {
         /* CLEANVEHICLE */ sub_4036( g_U1432 );
         /* CLEANVEHICLE */ sub_4036( g_U1436 );
    }
    if (g_U706 >= 7)
    {
         /* CLEANOBJECT */ sub_3931( g_U1446 );
         /* CLEANOBJECT */ sub_3931( g_U1448 );
    }
    if (g_U706 >= 7)
    {
         /* CLEANOBJECTARRAY */ sub_4163( ref l_U477 );
         /* CLEANOBJECTARRAY */ sub_4163( ref g_U1437 );
         /* CLEANOBJECT */ sub_3931( g_U1450 );
         /* CLEANOBJECT */ sub_3931( g_U1452 );
    }
    if (g_U706 < 7)
    {
        if (((CUTSCENE_NAMED_IS_LOADING( "mid_08_office_pt2" )) == 1) || ((CUTSCENE_IS_LOADED( "mid_08_office_pt2" )) == 1))
        {
            CLEAR_NAMED_CUTSCENE( "mid_08_office_pt2" );
        }
    }
     /* CLEANPLACEMENT */ sub_4378( g_U667._fU0 );
     /* P_STOP_SP_CHALLENGES */ sub_4438();
    return;
}

/* CLEANPED */ void sub_3742(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

/* CLEANPEDARRAY */ void sub_3831(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
         /* CLEANPED */ sub_3742( (uParam0^)[I] );
    }
    return;
}

/* CLEANOBJECT */ void sub_3931(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

/* CLEANVEHICLE */ void sub_4036(unknown uParam0)
{
    if (IS_VEHICLE_DEAD( uParam0 ))
    {
        ;
    }
    if (DOES_VEHICLE_EXIST( uParam0 ))
    {
        DELETE_VEHICLE( ref uParam0 );
    }
    return;
}

/* CLEANOBJECTARRAY */ void sub_4163(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* CLEANOBJECT */ sub_3931( (uParam0^)[I] );
    }
    return;
}

/* CLEANPLACEMENT */ void sub_4378(unknown uParam0)
{
    if ((DOES_PLACEMENT_EXIST( uParam0 )) == 1)
    {
        REMOVE_PLACEMENT( uParam0 );
    }
    return;
}

/* P_STOP_SP_CHALLENGES */ void sub_4438()
{
     /* WRITESCRIPTLOG */ sub_360( "CCB", "P_STOP_SP_CHALLENGES", 0 );
     /* WRITESCRIPTLOG */ sub_360( "CCB", "Stopping the Office_Lobby_Gun context...", 0 );
    END_CONTEXT( "Office_Lobby_Gun" );
    return;
}

/* P_RESTORE_PLAYER_DATA_CHECKPOINT */ void sub_4715(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

     /* WRITESCRIPTLOG */ sub_360( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U0)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
     /* CLOSE_CURRENT_LEVEL_CONTEXT */ sub_4934( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
         /* LOADCOLLISIONFORPED */ sub_6098( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_6412( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_6891( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_6412( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_6891( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_6412( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_6891( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPON */ sub_7207( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_6891( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPON */ sub_7207( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_6891( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U0 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if (( /* F_CAN_GIVE_AMMO_TO_REGULAR_WEAPON_TYPE */ sub_7779( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
     /* START_NEW_LEVEL_CONTEXT */ sub_7981( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING(  /* PLAYER_PED_ID */ sub_903(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U0)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U0 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
     /* WRITESCRIPTLOG */ sub_360( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

/* CLOSE_CURRENT_LEVEL_CONTEXT */ void sub_4934(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_4996( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

/* GET_MISSION_INDEX_FROM_NAME */ int sub_4996(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    }
    else
    {
        PRINTSTRING( uParam0 );
        PRINTSTRING( uParam0 );
        PRINTSTRING( uParam0 );
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

/* LOADCOLLISIONFORPED */ void sub_6098(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

/* F_GIVEPEDWEAPONTOHOLSTER */ void sub_6412(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_6816( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* WRITE_STRING */ void sub_6816(unknown uParam0)
{
    PRINTSTRING( uParam0 );
    PRINTNL();
    return;
}

/* P_RESTORE_WEAPON_ATTACHMENTS */ void sub_6891(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

/* F_GIVEPEDWEAPON */ void sub_7207(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_6816( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* F_CAN_GIVE_AMMO_TO_REGULAR_WEAPON_TYPE */ int sub_7779(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

/* START_NEW_LEVEL_CONTEXT */ void sub_7981(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_4996( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
     /* CLEAR_GG_CONTEXTS */ sub_8079( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

/* CLEAR_GG_CONTEXTS */ void sub_8079(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

/* P_HANDLE_EVENTS */ void sub_9405()
{
    unknown uVar2;
    unknown uVar3;
    vector vVar4;
    int I;

    vVar4 = {12.57300000, 5.22200000, 0.00000000};
    switch (l_U136)
    {
        case 1:
         /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_INIT_SCRIPT_DATA", 0 );
         /* P_INIT_SCRIPT_VARIABLES */ sub_9635();
         /* P_INIT_GAMEPLAY_STRUCTS */ sub_10027();
        SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
        l_U136 = 2;
         /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_REQUEST_ASSETS", 0 );
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_REQUEST_ASSETS", 0 );
         /* P_REQUEST_ASSETS */ sub_11545();
        l_U136 = 3;
         /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_LOAD_ASSETS", 0 );
        break;
        case 3:
        if (( /* F_HAVE_ASSETS_LOADED */ sub_13000()) == 1)
        {
            l_U136 = 4;
             /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_SETUP_START_POINT", 0 );
            break;
        }
        return;
        case 4:
         /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_SETUP_START_POINT", 0 );
        if (g_U706 < 7)
        {
             /* P_CREATE_HEAVY_GUNNER */ sub_13660();
            l_U136 = 7;
             /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_HANDLE_SPAWN_ENEMIES", 0 );
        }
        else
        {
             /* P_QUICK_CREATE_ALL_PEDS */ sub_15528();
             /* P_CREATE_OTHER_LOBBY_ENTITES */ sub_16586();
             /* P_ACTIVATE_ALL_PEDS */ sub_22291();
             /* P_ACTIVATE_DEAD_BODIES */ sub_22625();
            if ((l_U175 == 0) AND (g_U707 == 7))
            {
                l_U175 = 1;
                if (( /* HAS_SAVEFILE_LOADED */ sub_23486( ref l_U139 )) == 0)
                {
                     /* F_GIVEPEDWEAPON */ sub_7207(  /* PLAYER_PED_ID */ sub_903(), g_U1270, 200, 0, 0 );
                }
                l_U136 = 5;
                 /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_WAIT_FOR_PLAYER_WEAPON", 0 );
            }
            else
            {
                 /* CREATETIMER */ sub_1929( ref l_U468, 2500, 1, 0 );
                 /* STARTTIMER */ sub_2077( ref l_U468 );
                l_U136 = 6;
                 /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_WAIT_FOR_BODIES_TO_SETTLE", 0 );
            }
        }
        break;
        case 5:
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0)
        {
            uVar3 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_903(), 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
            {
                 /* CREATETIMER */ sub_1929( ref l_U468, 2500, 1, 0 );
                 /* STARTTIMER */ sub_2077( ref l_U468 );
                l_U136 = 6;
                 /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_WAIT_FOR_BODIES_TO_SETTLE", 0 );
            }
        }
        break;
        case 6:
        if (( /* ISTIMERDONE */ sub_2208( ref l_U468 )) == 1)
        {
            l_U136 = 10;
             /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_HANDLE_OPENING_BLENDOUT", 0 );
        }
        break;
        case 7:
        if (( /* F_HANDLE_SPAWN_LOBBY_HG_ENEMIES */ sub_15606()) == 1)
        {
            l_U136 = 8;
             /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_HANDLE_SPAWN_BODIES", 0 );
        }
        break;
        case 8:
        if (( /* F_HANDLE_SPAWN_DEAD_BODIES */ sub_16254()) == 1)
        {
            l_U138 = 1;
            l_U136 = 9;
             /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_HANDLE_OPENING_CUTSCENE", 0 );
        }
        break;
        case 9:
        if (( /* F_HANDLE_OPENING_CUTSCENE */ sub_24321()) == 1)
        {
            l_U526 = 1;
            l_U136 = 10;
             /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_HANDLE_OPENING_BLENDOUT", 0 );
            break;
        }
        return;
        case 10:
        if (( /* F_HANDLE_OPENING_BLENDOUT */ sub_26255()) == 1)
        {
            if (((IS_VEHICLE_DEAD( g_U1436 )) == 0) AND ((DOES_VEHICLE_EXIST( g_U1436 )) == 1))
            {
                SET_VEHICLE_PROOFS( g_U1436, 1, 1, 1, 1, 1 );
                SET_VEHICLE_CAN_BE_VISIBLY_DAMAGED( g_U1436, 1 );
                FREEZE_VEHICLE_POSITION( g_U1436, 1 );
            }
            if (l_U526 == 0)
            {
                 /* TELEPORTPED */ sub_23196( l_U240, l_U241, l_U244 );
                if (((IS_PED_DEAD( l_U240 )) == 0) AND ((DOES_PED_EXIST( l_U240 )) == 1))
                {
                    PED_ACTION_TREE_PLAY_NODE( l_U240, "/Global/HeavyGunner/HeavyGunner_Init" );
                }
            }
             /* P_ACTIVATE_HEAVY_GUNNER */ sub_27145();
             /* P_ACTIVATE_GUNNER_ENEMIES */ sub_27816();
            AUDIO_MUSIC_FORCE_TRACK( "OFFICE_ACTION_SONG_02", "OFFICE_ACTION_2_5_6", "", 1.00000000, 5000, 5000, -1082130432, 0 );
             /* NIS_POST_SETUP */ sub_28371( 1, 0 );
            if (IS_MAGDEMO() == 0)
            {
                 /* P_START_CHECKPOINT_THREAD */ sub_28696( ref g_U708[8] );
            }
            if ((l_U139._fU0 == 0) || (g_U706 < 7))
            {
                g_U706 = 7;
                 /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_28826( ref l_U139, g_U706,  /* PLAYER_PED_ID */ sub_903(), g_U817[7], g_U926[7], g_U963[7], g_U1000[7], 1 );
            }
            if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0)
            {
                SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_903(), 0 );
                SET_PED_PROOFS(  /* PLAYER_PED_ID */ sub_903(), 0, 0, 0, 0, 0 );
            }
             /* P_START_SP_CHALLENGES */ sub_33473();
             /* CREATETIMER */ sub_1929( ref l_U490, 500, 1, 0 );
             /* STARTTIMER */ sub_2077( ref l_U490 );
             /* CREATETIMER */ sub_1929( ref l_U499, 1000, 1, 0 );
             /* STARTTIMER */ sub_2077( ref l_U499 );
             /* CREATETIMER */ sub_1929( ref l_U508, 2500, 1, 0 );
             /* STARTTIMER */ sub_2077( ref l_U508 );
             /* CREATETIMER */ sub_1929( ref l_U517, 4000, 1, 0 );
             /* STARTTIMER */ sub_2077( ref l_U517 );
            l_U136 = 11;
             /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_HANDLE_GUNNER_FIGHT", 0 );
            break;
        }
        return;
        case 11:
         /* P_HANDLE_LOBBY_HG_ENEMIES_AMMO */ sub_33801();
        if (( /* ISTIMERDONE */ sub_2208( ref l_U490 )) == 1)
        {
            if (IS_SCREEN_FADED_OUT() == 1)
            {
                DO_SCREEN_FADE_IN( 250 );
            }
        }
        if (( /* ISTIMERDONE */ sub_2208( ref l_U499 )) == 1)
        {
            if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0) AND ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_941() )) == 0))
            {
                SET_PED_PROOFS(  /* PLAYER_PED_ID */ sub_903(), 0, 0, 0, 0, 0 );
                SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_903(), 0 );
            }
        }
        if (( /* ISTIMERDONE */ sub_2208( ref l_U508 )) == 1)
        {
             /* P_LOBBY_HG_ENEMY_0_ADVANCE */ sub_34130();
        }
        if (( /* ISTIMERDONE */ sub_2208( ref l_U517 )) == 1)
        {
             /* P_LOBBY_HG_ENEMY_1_ADVANCE */ sub_34421();
        }
        if (l_U527 == 0)
        {
            if (((IS_PED_DEAD( l_U278[1] )) == 1) AND ((DOES_PED_EXIST( l_U278[1] )) == 1))
            {
                 /* P_REMOVEALLTETHERSFROMPED */ sub_34756( l_U278[0] );
                l_U527 = 1;
            }
        }
        if (l_U528 == 0)
        {
            if (((IS_PED_DEAD( l_U278[0] )) == 1) AND ((DOES_PED_EXIST( l_U278[0] )) == 1))
            {
                 /* P_REMOVEALLTETHERSFROMPED */ sub_34756( l_U278[1] );
                l_U528 = 1;
            }
        }
        if (l_U529 == 0)
        {
            if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0) AND (((IS_PED_DEAD( l_U240 )) == 0) AND ((DOES_PED_EXIST( l_U240 )) == 1)))
            {
                if ((GET_DISTANCE_BETWEEN_COORDS( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS(  /* PLAYER_PED_ID */ sub_903() ), "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( l_U240 ), 1 )) < 2.50000000)
                {
                     /* P_TETHERPED */ sub_15905( ref l_U219, l_U240, 1 );
                     /* P_TETHERPED */ sub_15905( ref l_U220, l_U240, 1 );
                    l_U529 = 1;
                }
            }
        }
        if (l_U530 == 0)
        {
            if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_35072( ref l_U278 )) == 0)
            {
                l_U530 = 1;
            }
        }
        if (l_U531 == 0)
        {
            if (( /* F_GET_NUM_LIVING_ENEMIES */ sub_35210()) == 1)
            {
                for ( I = 0; I < l_U278; I++ )
                {
                    if (((IS_PED_DEAD( l_U278[I] )) == 0) AND ((DOES_PED_EXIST( l_U278[I] )) == 1))
                    {
                        ;
                    }
                }
                if (((IS_PED_DEAD( l_U240 )) == 0) AND ((DOES_PED_EXIST( l_U240 )) == 1))
                {
                    uVar2 = l_U240;
                }
                else
                {
                    uVar2 =  /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_35501( ref l_U278 );
                }
                if (((IS_PED_DEAD( uVar2 )) == 0) AND ((DOES_PED_EXIST( uVar2 )) == 1))
                {
                    BULLET_CAMERA_TRACK_UNTIL_GROUNDED( 1 );
                    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 0 );
                    SET_PED_CAN_TRIGGER_BULLET_CAM( uVar2, 1 );
                }
                l_U531 = 1;
            }
        }
        if ((IS_LAST_MAN_STANDING_ACTIVE() == 0) AND (((IS_BULLET_CAMERA_RUNNING( 0 )) == 0) AND (( /* F_GET_NUM_LIVING_ENEMIES */ sub_35210()) == 0)))
        {
            if (IS_ARCADE_MODE_ACTIVE() == 1)
            {
                DISPLAY_ARCADE_MODE_LEVEL_END( "s_fire" );
                DO_SCREEN_FADE_IN( 0 );
                l_U136 = 14;
                 /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_FINISHED", 0 );
            }
            else
            {
                SET_HIGHEST_ARCADE_LEVEL_UNLOCKED( 8 );
                BULLET_CAMERA_TRACK_UNTIL_GROUNDED( 0 );
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
                AUDIO_MUSIC_SUSPEND( 8000 );
                 /* P_RESET_MAX_CONTEXTUAL_DIALOGUE */ sub_35900();
                 /* CREATETIMER */ sub_1929( ref l_U552, 2000, 1, 0 );
                 /* STARTTIMER */ sub_2077( ref l_U552 );
                l_U136 = 12;
                 /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_HANDLE_GOTO_ELEVATOR", 0 );
            }
        }
        break;
        case 12:
         /* P_HANDLE_MAX_CONTEXTUAL_DIALOGUE */ sub_36137();
        if (( /* ISTIMERDONE */ sub_2208( ref l_U552 )) == 1)
        {
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_36559( ref l_U542 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_36668( 0,  /* PLAYER_PED_ID */ sub_903(), "MAX", ref l_U542, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_36668( 1,  /* PLAYER_PED_ID */ sub_903(), "MAX", ref l_U542, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_36949( "SOFF_ADWGL2", ref l_U542, 8, 1 );
        }
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0)
        {
            if ((GET_DISTANCE_BETWEEN_COORDS( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS(  /* PLAYER_PED_ID */ sub_903() ), vVar4, 1 )) < 10.00000000)
            {
                if (l_U570 == 0)
                {
                    SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_903(), 1 );
                     /* CREATETIMER */ sub_1929( ref l_U561, 1500, 1, 0 );
                     /* STARTTIMER */ sub_2077( ref l_U561 );
                    l_U570 = 1;
                }
            }
            else
            {
                SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_903(), 0 );
                 /* RESETTIMER */ sub_2776( ref l_U561 );
                l_U570 = 0;
            }
            if ((( /* ISTIMERDONE */ sub_2208( ref l_U561 )) == 1) || ((GET_DISTANCE_BETWEEN_COORDS( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS(  /* PLAYER_PED_ID */ sub_903() ), vVar4, 1 )) < 8.00000000))
            {
                if (IS_MAGDEMO() == 1)
                {
                    DO_SCREEN_FADE_OUT( 0 );
                    BULLET_CAMERA_TRACK_UNTIL_GROUNDED( 0 );
                    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
                    SWITCH_TO_LEVEL_NAME( "s_fire" );
                }
                else
                {
                    g_U1043 = 1;
                }
                l_U136 = 13;
                 /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_WAIT_FOR_HANDOFF", 0 );
            }
            else
            {
                return;
            }
            break;
        }
        return;
        case 13:
        if ((CUTSCENE_IS_LOADED( "06_04_office_concat" )) == 1)
        {
            if (GET_CUTSCENE_TIME_MS() > 14620)
            {
                l_U136 = 14;
                 /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_FINISHED", 0 );
            }
        }
        break;
        case 14:
         /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_FINISHED", 0 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        l_U136 = 0;
         /* WRITESCRIPTLOG */ sub_360( "SP", "eCheckpointState = CHECKPOINT_IDLE", 0 );
        break;
    }
    return;
}

/* P_INIT_SCRIPT_VARIABLES */ void sub_9635()
{
     /* WRITESCRIPTLOG */ sub_360( "SP", "P_INIT_SCRIPT_VARIABLES", 0 );
    l_U483[0] = 1023908954;
    l_U483[1] = -117920018;
    l_U483[2] = -980563943;
    l_U483[3] = 590824295;
    l_U483[4] = -1823657596;
    g_U1441[0] = 2077743038;
    g_U1441[1] = -1764999398;
    g_U1441[2] = -1484220333;
    l_U289[0] = {18.08674000, -30.15470000, -0.00023300};
    l_U296[0] = 338.83730000;
    l_U289[1] = {27.52532000, -28.38830000, -0.00023400};
    l_U296[1] = 8.89053600;
    l_U288 = 0;
    l_U467 = 0;
    l_U489 = 0;
    l_U526 = 0;
    l_U527 = 0;
    l_U528 = 0;
    l_U529 = 0;
    l_U530 = 0;
    l_U531 = 0;
    l_U570 = 0;
     /* RESETTIMER */ sub_2776( ref l_U468 );
     /* RESETTIMER */ sub_2776( ref l_U490 );
     /* RESETTIMER */ sub_2776( ref l_U499 );
     /* RESETTIMER */ sub_2776( ref l_U508 );
     /* RESETTIMER */ sub_2776( ref l_U517 );
     /* RESETTIMER */ sub_2776( ref l_U552 );
     /* RESETTIMER */ sub_2776( ref l_U561 );
    l_U138 = 0;
    return;
}

/* P_INIT_GAMEPLAY_STRUCTS */ void sub_10027()
{
     /* WRITESCRIPTLOG */ sub_360( "SP", "P_INIT_GAMEPLAY_STRUCTS", 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_10136( ref l_U227, 36.93757000, -29.78766000, -0.00017400, 0.00000000, 1003151468, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_10136( ref l_U251[0], 36.93757000, -28.78766000, -0.00017400, 0.00000000, 1898966324, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_10136( ref l_U251[1], 36.93757000, -27.78766000, -0.00017400, 0.00000000, -1169641842, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_10136( ref l_U299[0], 40.17127000, -12.81712000, 0.00003800, 0.00000000, -1684531295, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_10136( ref l_U299[1], 40.17127000, -13.81712000, 0.00003800, 0.00000000, -1843388166, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_10136( ref l_U299[2], 40.17127000, -14.81712000, 0.00003800, 0.00000000, 1047003985, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_10136( ref l_U299[3], 40.17127000, -15.81712000, 0.00003800, 0.00000000, 749203962, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_10136( ref l_U299[4], 40.17127000, -16.81712000, 0.00003800, 0.00000000, -1418781641, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_10136( ref l_U299[5], 40.17127000, -17.81712000, 0.00003800, 0.00000000, 1161560132, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_10136( ref l_U299[6], 40.17127000, -18.81712000, 0.00003800, 0.00000000, -493387395, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_10136( ref l_U299[7], 40.17127000, -19.81712000, 0.00003800, 0.00000000, 229382780, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_10136( ref l_U299[8], 40.17127000, -20.81712000, 0.00003800, 0.00000000, 1898966324, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_10136( ref l_U299[9], 40.17127000, -21.81712000, 0.00003800, 0.00000000, -1169641842, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_10136( ref l_U299[10], 40.17127000, -22.81712000, 0.00003800, 0.00000000, 2037011856, 7, 3, 2, 0, 0 );
     /* P_CREATETRIGGERBOX */ sub_10909( ref l_U176, "TRIG_HEAVY_GUNNER_MOVE", 22.17630000, -30.89120000, -0.25635300, 12.00000000, 12.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_10909( ref l_U197, "TRIG_WRECKED_MONOLOGUE", 23.10000000, -25.48000000, -1.54000000, 23.08000000, 15.33000000, 8.70000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_11165( ref l_U218, "TETH_HEAVY_GUNNER", 22.78000000, -27.79000000, -0.56000000, 7.69000000, 5.76000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_11165( ref l_U219, "TETH_LOBBY_HG_ENEMY_0", 16.46000000, -13.62000000, -0.77000000, 9.00000000, 33.96000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_11165( ref l_U220, "TETH_LOBBY_HG_ENEMY_1", 29.65000000, -13.78000000, -0.77000000, 9.94000000, 33.96000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    return;
}

/* P_CREATEPEDSTRUCTWITHNAME */ void sub_10136(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

/* P_CREATETRIGGERBOX */ void sub_10909(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    StrCopy( ref iParam0->_fU0, uParam1, 64 );
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = {uParam2};
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 1, iParam0 + 0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* P_CREATETETHERBOX */ void sub_11165(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 2, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* P_REQUEST_ASSETS */ void sub_11545()
{
    int I;

     /* WRITESCRIPTLOG */ sub_360( "SP", "P_REQUEST_ASSETS", 0 );
     /* LOADMODEL */ sub_11610( 45140746, 0 );
     /* LOADMODEL */ sub_11610( 1541666737, 0 );
     /* LOADMODEL */ sub_11610( g_U1435, 0 );
    for ( I = 0; I < l_U483; I++ )
    {
         /* LOADMODEL */ sub_11610( l_U483[I], 0 );
    }
    for ( I = 0; I < g_U1441; I++ )
    {
         /* LOADMODEL */ sub_11610( g_U1441[I], 0 );
    }
     /* LOADMODEL */ sub_11610( 1286391775, 0 );
     /* LOADMODEL */ sub_11610( g_U1449, 0 );
     /* LOADMODEL */ sub_11610( g_U1451, 0 );
     /* LOADMODEL */ sub_11610( g_U1445, 0 );
     /* LOADMODEL */ sub_11610( g_U1447, 0 );
     /* LOADWEAPON */ sub_12022( g_U1269, 0 );
     /* LOADWEAPON */ sub_12022( g_U1270, 0 );
     /* LOADWEAPON */ sub_12022( g_U1271, 0 );
     /* LOADWEAPON */ sub_12022( g_U1272, 0 );
     /* LOADWEAPON */ sub_12022( 319712764, 0 );
     /* LOADANIMDICT */ sub_12236( "LEVEL_S_OFFICE_CP_04", 0, 0 );
     /* LOADANIMDICT */ sub_12236( "AMED_HEVY_CORE", 0, 0 );
     /* LOADACTIONTREE */ sub_12450( "NPC/BOSS_HeavyGunner", 0 );
     /* LOADVEHICLERECORDING */ sub_12608( 248, 0 );
     /* LOADMODEL */ sub_11610( g_U704, 0 );
    if (g_U706 < 7)
    {
        AUDIO_MUSIC_STOP_ONESHOT();
        AUDIO_MUSIC_REQUEST_ONESHOT( "OFFICE_ONE_SHOT_VAN_SLAM", 0 );
        if (((CUTSCENE_NAMED_IS_LOADING( "mid_08_office_pt2" )) == 0) AND ((CUTSCENE_IS_LOADED( "mid_08_office_pt2" )) == 0))
        {
            PRE_STREAM_SEAMLESS_CUTSCENE( "mid_08_office_pt2" );
        }
    }
    return;
}

/* LOADMODEL */ void sub_11610(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
         /* WRITE_STRING */ sub_6816( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADWEAPON */ void sub_12022(unknown uParam0, boolean bParam1)
{
    REQUEST_WEAPON( uParam0 );
    if (bParam1)
    {
        while ((HAS_WEAPON_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load weapon: {!f1} : {1} ###", 2, 1, 199730165, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADANIMDICT */ void sub_12236(unknown uParam0, unknown uParam1, int iParam2)
{
    REQUEST_ANIM_DICT( uParam0, uParam1 );
    "[doubled result, dropped if not asigned]";
    if (iParam2 == 1)
    {
        while ((HAS_ANIM_DICT_LOADED( uParam0, uParam1 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an animation dictionary to be loaded: {} ###", 1, 1537, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADACTIONTREE */ void sub_12450(unknown uParam0, int iParam1)
{
    ACTION_TREE_LOAD( uParam0 );
    if (iParam1 == 1)
    {
        while ((IS_ACTION_TREE_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an Action Tree to be loaded: {} ###", 1, 1537, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADVEHICLERECORDING */ void sub_12608(unknown uParam0, int iParam1)
{
    REQUEST_VEHICLE_RECORDING( uParam0 );
    if (iParam1 == 1)
    {
        while ((HAS_VEHICLE_RECORDING_BEEN_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for a recording to be loaded: Rec# {} ###", 1, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* F_HAVE_ASSETS_LOADED */ int sub_13000()
{
    int I;

    if (((HAS_MODEL_LOADED( 1286391775 )) == 1) AND (((HAS_MODEL_LOADED( g_U1435 )) == 1) AND (((HAS_MODEL_LOADED( 1541666737 )) == 1) AND ((HAS_MODEL_LOADED( 45140746 )) == 1))))
    {
        for ( I = 0; I < l_U483; I++ )
        {
            if ((HAS_MODEL_LOADED( l_U483[I] )) == 0)
            {
                return 0;
            }
        }
        for ( I = 0; I < g_U1441; I++ )
        {
            if ((HAS_MODEL_LOADED( g_U1441[I] )) == 0)
            {
                return 0;
            }
        }
        if (((HAS_VEHICLE_RECORDING_BEEN_LOADED( 248 )) == 1) AND (((IS_ACTION_TREE_LOADED( "NPC/BOSS_HeavyGunner" )) == 1) AND (((HAS_ANIM_DICT_LOADED( "AMED_HEVY_CORE", 0 )) == 1) AND (((HAS_ANIM_DICT_LOADED( "LEVEL_S_OFFICE_CP_04", 0 )) == 1) AND (((HAS_WEAPON_LOADED( 319712764 )) == 1) AND (((HAS_WEAPON_LOADED( g_U1272 )) == 1) AND (((HAS_WEAPON_LOADED( g_U1271 )) == 1) AND (((HAS_WEAPON_LOADED( g_U1270 )) == 1) AND (((HAS_WEAPON_LOADED( g_U1269 )) == 1) AND (((HAS_MODEL_LOADED( g_U704 )) == 1) AND (((HAS_MODEL_LOADED( g_U1451 )) == 1) AND ((HAS_MODEL_LOADED( g_U1449 )) == 1))))))))))))
        {
            if (g_U706 < 7)
            {
                if ((CUTSCENE_IS_LOADED( "mid_08_office_pt2" )) == 1)
                {
                    return 1;
                }
            }
            else
            {
                return 1;
            }
        }
    }
    return 0;
}

/* P_CREATE_HEAVY_GUNNER */ void sub_13660()
{
     /* WRITESCRIPTLOG */ sub_360( "SP", "P_CREATE_HEAVY_GUNNER", 0 );
     /* CLEANPED */ sub_3742( l_U240 );
    l_U240 =  /* CREATEPED */ sub_13743( ref l_U227 );
     /* P_QUICK_ADD_PED_TO_GROUP */ sub_14465( l_U240, ref l_U221 );
    SET_GROUP_LAST_ALIVE_AS_LONE_WOLF( l_U221._fU0, 0 );
    if (((IS_PED_DEAD( l_U240 )) == 0) AND ((DOES_PED_EXIST( l_U240 )) == 1))
    {
        SET_PED_NAME_DEBUG( l_U240, "piHeavyGunner" );
        PED_ACTION_TREE_PLAY_NODE( l_U240, "/Global/HeavyGunner/HeavyGunner_Init" );
        FREEZE_PED_POSITION( l_U240, 1 );
        SET_PED_VISIBLE( l_U240, 0 );
        SET_PED_FREEZE_PROCESSING( l_U240, 1 );
        SET_PED_COLLISION( l_U240, 0 );
        SET_PED_PROOFS( l_U240, 1, 1, 1, 1, 1 );
         /* F_GIVEPEDWEAPON */ sub_7207( l_U240, 319712764, 25000, 0, 0 );
    }
    return;
}

/* CREATEPED */ void sub_13743(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_11610( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
     /* SETPEDDEFAULTSTATS */ sub_14234( iParam0->_fU40 );
     /* SETPEDDEFAULTTEMPLATE */ sub_14335( iParam0->_fU40 );
    return iParam0->_fU40;
}

/* SETPEDDEFAULTSTATS */ void sub_14234(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

/* SETPEDDEFAULTTEMPLATE */ void sub_14335(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

/* P_QUICK_ADD_PED_TO_GROUP */ void sub_14465(unknown uParam0, int iParam1)
{
    int iVar4;
    unknown uVar5;

    if ((DOES_GROUP_EXIST( iParam1->_fU0 )) == 0)
    {
         /* WRITE_STRING */ sub_6816( "[SP]### Warning!!! Group does not exist. Creating new group specified attributes. ###" );
        if (iParam1->_fU4 > 0)
        {
             /* P_SETUP_AI_GROUP */ sub_14635( iParam1, iParam1->_fU4, 0 );
        }
        else
        {
             /* P_SETUP_AI_GROUP */ sub_14635( iParam1, 1056964608, 0 );
        }
    }
    else
    {
        PRINTSTRING( "[MSWW]### P_QUICK_ADD_PED_TO_GROUP adding ped to group with ID: " );
        PRINTINT( iParam1->_fU0 );
        PRINTNL();
    }
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        GET_GROUP_SIZE( iParam1->_fU0, ref iVar4, ref uVar5 );
        if (iVar4 == 0)
        {
            SET_PED_AS_GROUP_LEADER( uParam0, iParam1->_fU0 );
        }
        else
        {
            SET_PED_AS_GROUP_MEMBER( uParam0, iParam1->_fU0 );
        }
        SET_PED_NEVER_LEAVES_GROUP( uParam0, 1 );
    }
    return;
}

/* P_SETUP_AI_GROUP */ void sub_14635(int iParam0, unknown uParam1, boolean bParam2)
{
    iParam0->_fU4 = uParam1;
    iParam0->_fU0 = CREATE_GROUP( 3, 1 );
    if (bParam2)
    {
        PRINTSTRING( "[MSWW]### P_SETUP_AI_GROUP TOLD TO WAIT FOR GROUP TO EXIST ###" );
        PRINTNL();
        while (NOT (DOES_GROUP_EXIST( iParam0->_fU0 )))
        {
            WAIT( 0 );
            PRINTSTRING( "[MSWW]### GROUP ###" );
            PRINTNL();
        }
        PRINTSTRING( "[MSWW]### P_SETUP_AI_GROUP created group with ID: " );
        PRINTINT( iParam0->_fU0 );
        PRINTNL();
    }
    SET_GROUP_RATIO_FIRING_AT_VISIBLE( iParam0->_fU0, iParam0->_fU4 );
    SET_GROUP_RATIO_FIRING_AT_INVISIBLE( iParam0->_fU0, iParam0->_fU4 );
    if (iParam0->_fU8)
    {
        SET_GROUP_FORMATION( iParam0->_fU0, iParam0->_fU12 );
        SET_GROUP_FORMATION_SPACING( iParam0->_fU0, iParam0->_fU16 );
        SET_GROUP_FORMATION_MAX_MOVE_SPEED( iParam0->_fU0, iParam0->_fU20 );
    }
    return;
}

/* P_QUICK_CREATE_ALL_PEDS */ void sub_15528()
{
     /* WRITESCRIPTLOG */ sub_360( "SP", "P_QUICK_CREATE_ALL_PEDS", 0 );
     /* P_CREATE_HEAVY_GUNNER */ sub_13660();
    while (( /* F_HANDLE_SPAWN_LOBBY_HG_ENEMIES */ sub_15606()) == 0)
    {
        ;
    }
    while (( /* F_HANDLE_SPAWN_DEAD_BODIES */ sub_16254()) == 0)
    {
        ;
    }
    return;
}

/* F_HANDLE_SPAWN_LOBBY_HG_ENEMIES */ int sub_15606()
{
    int iVar2;

    iVar2 = l_U288;
     /* CLEANPED */ sub_3742( l_U278[iVar2] );
    l_U278[iVar2] =  /* CREATEPED */ sub_13743( ref l_U251[iVar2] );
    if (((IS_PED_DEAD( l_U278[iVar2] )) == 0) AND ((DOES_PED_EXIST( l_U278[iVar2] )) == 1))
    {
        SET_PED_COMBAT_MOVEMENT( l_U278[iVar2], 1 );
        CLEAR_PED_TASKS( l_U278[iVar2] );
        SET_PED_VISIBLE( l_U278[iVar2], 0 );
        FREEZE_PED_POSITION( l_U278[iVar2], 1 );
        SET_PED_FREEZE_PROCESSING( l_U278[iVar2], 1 );
        SET_PED_COLLISION( l_U278[iVar2], 0 );
        SET_PED_PROOFS( l_U278[iVar2], 1, 1, 1, 1, 1 );
        if (iVar2 == 0)
        {
             /* F_GIVEPEDWEAPON */ sub_7207( l_U278[iVar2], g_U1271, 25000, 0, 0 );
             /* P_TETHERPED */ sub_15905( ref l_U219, l_U278[iVar2], 1 );
        }
        else if (iVar2 == 1)
        {
             /* F_GIVEPEDWEAPON */ sub_7207( l_U278[iVar2], g_U1271, 25000, 0, 0 );
             /* P_TETHERPED */ sub_15905( ref l_U220, l_U278[iVar2], 1 );
        }
        l_U288++;
    }
    if (l_U288 == l_U278)
    {
         /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_16099( ref l_U278, "piLobbyHGEnemies" );
        return 1;
    }
    return 0;
}

/* P_TETHERPED */ void sub_15905(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_TETHERING_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_TETHERING_OPTION( uParam1, uParam2 );
    }
    return;
}

/* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ void sub_16099(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

/* F_HANDLE_SPAWN_DEAD_BODIES */ int sub_16254()
{
    unknown uVar2;

    uVar2 = l_U467;
     /* CLEANPED */ sub_3742( l_U443[uVar2] );
    l_U443[uVar2] =  /* CREATEPED */ sub_13743( ref l_U299[uVar2] );
    if (((IS_PED_DEAD( l_U443[uVar2] )) == 0) AND ((DOES_PED_EXIST( l_U443[uVar2] )) == 1))
    {
        SET_PED_AIM_LOCKONABLE( l_U443[uVar2], 0 );
        SET_PED_CAN_BE_TARGETTED( l_U443[uVar2], 0 );
        FREEZE_PED_POSITION( l_U443[uVar2], 1 );
        SET_PED_VISIBLE( l_U443[uVar2], 0 );
        SET_PED_FREEZE_PROCESSING( l_U443[uVar2], 1 );
        SET_PED_COLLISION( l_U443[uVar2], 0 );
        SET_PED_PROOFS( l_U443[uVar2], 1, 1, 1, 1, 1 );
        l_U467++;
    }
    if (l_U467 == l_U443)
    {
         /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_16099( ref l_U443, "piDeadBodies" );
        return 1;
    }
    return 0;
}

/* P_CREATE_OTHER_LOBBY_ENTITES */ void sub_16586()
{
     /* WRITESCRIPTLOG */ sub_360( "SP", "P_CREATE_OTHER_LOBBY_ENTITES", 0 );
     /* P_SETUP_RECEPTIONIST */ sub_16669();
     /* P_SETUP_LOBBY_VAN */ sub_17035( 0 );
     /* P_SETUP_LOBBY_JEEP */ sub_17862( 1 );
     /* P_CREATE_PLACEMENTS */ sub_18882();
     /* P_SETUP_LOBBY_GOLDEN_GUN */ sub_19667();
     /* P_CREATE_MPM_STATIC_OBJECTS */ sub_20579();
     /* P_CREATE_LOBBY_ELEVATOR_DOORS */ sub_20946();
     /* P_CREATE_LOBBY_BROKEN_DESK */ sub_21551();
     /* P_CREATE_LOBBY_WALL_BLOCKER */ sub_21869();
     /* P_CREATE_LOBBY_WALL_BLOCKER_COLLISION */ sub_22066();
    return;
}

/* P_SETUP_RECEPTIONIST */ void sub_16669()
{
    vector vVar2;
    float fVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;

     /* WRITESCRIPTLOG */ sub_360( "SP", "P_SETUP_RECEPTIONIST", 0 );
    vVar2 = {22.22000000, 0.23000000, -0.00000000};
    fVar5 = -120.00000000;
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_10136( ref uVar6, vVar2, fVar5, 1278052404, 26, 6, 0, 0, 1 );
     /* CLEANPED */ sub_3742( g_U1430 );
    g_U1430 =  /* CREATEPED */ sub_13743( ref uVar6 );
    if (((IS_PED_DEAD( g_U1430 )) == 0) AND ((DOES_PED_EXIST( g_U1430 )) == 1))
    {
        SET_ROOM_FOR_PED_BY_NAME( g_U1430, ref g_U1157 );
         /* P_SETUP_DEAD_PED */ sub_16860( g_U1430 );
    }
    return;
}

/* P_SETUP_DEAD_PED */ void sub_16860(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_360( "SP", "P_SETUP_DEAD_PED", 0 );
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        ENABLE_PED_PAIN( uParam0, 0 );
        OVERRIDE_MOVER_PHYSICS_ON_RAGDOLL_SLEEP( uParam0, 1 );
        SET_PED_CORPSE_FROM_ANIM( uParam0, "DAM_DEAD", "MED_DEAD_POSE_FRONT_01", 1.00000000, 1 );
    }
    return;
}

/* P_SETUP_LOBBY_VAN */ void sub_17035(int iParam0)
{
    int iVar3;
    int[10] iVar4;
    vector vVar15;
    float fVar18;
    int I;

     /* WRITESCRIPTLOG */ sub_360( "SP", "P_SETUP_LOBBY_VAN", 0 );
    iVar3 = 1;
    array(ref iVar4, 10);
    iVar4[1] = 0;
    iVar4[2] = 0;
    iVar4[3] = 1;
    iVar4[4] = 0;
    iVar4[5] = 0;
    iVar4[6] = 0;
    iVar4[7] = 0;
    iVar4[8] = 0;
    iVar4[9] = 1;
    if ((DOES_VEHICLE_EXIST( g_U1436 )) == 0)
    {
        if (iParam0 == 1)
        {
            vVar15 = {-8.44315000, -23.60470000, -0.01607020};
            fVar18 = 0.00000000;
        }
        else
        {
            vVar15 = {22.03460000, -36.79270000, 0.84270000};
            fVar18 = 90.00000000;
        }
         /* CLEANVEHICLE */ sub_4036( g_U1436 );
        g_U1436 =  /* CREATEVEHICLE */ sub_17273( g_U1435, vVar15, fVar18, 0, 0, 1 );
        if (((IS_VEHICLE_DEAD( g_U1436 )) == 0) AND ((DOES_VEHICLE_EXIST( g_U1436 )) == 1))
        {
            SET_VEHICLE_ENGINE_ON( g_U1436, 1, 1 );
            SET_VEHICLE_IN_CUTSCENE( g_U1436, 1 );
            SET_VEHICLE_CAN_BE_VISIBLY_DAMAGED( g_U1436, 1 );
            SET_VEHICLE_PROOFS( g_U1436, 1, 1, 1, 1, 1 );
            for ( I = 0; I < iVar4; I++ )
            {
                if (I > 0)
                {
                    SET_VEHICLE_EXTRA( g_U1436, I, iVar4[I] );
                }
            }
            SET_VEHICLE_COLOUR_COMBINATION( g_U1436, iVar3 );
            if (iParam0 == 1)
            {
                if ((IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U1436 )) == 1)
                {
                    SKIP_TO_END_AND_STOP_PLAYBACK_RECORDED_VEHICLE( g_U1436 );
                }
                FREEZE_VEHICLE_POSITION( g_U1436, 0 );
                START_PLAYBACK_RECORDED_VEHICLE( g_U1436, 159 );
                SKIP_TIME_IN_PLAYBACK_RECORDED_VEHICLE( g_U1436, 1400.00000000 );
                SET_PLAYBACK_SPEED( g_U1436, 0.00000000 );
            }
        }
    }
    return;
}

/* CREATEVEHICLE */ void sub_17273(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, int iParam5, unknown uParam6, unknown uParam7)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a vehicle with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_11610( uParam0, 1 );
    }
    Result = CREATE_VEHICLE( uParam0, uParam1, uParam4, uParam6, uParam7 );
    if (iParam5 == 1)
    {
        while ((DOES_VEHICLE_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for vehicle to exist: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    if (DOES_VEHICLE_EXIST( Result ))
    {
        SET_PETROLTANK_BURN_RATE( Result, 125.00000000 );
    }
    return Result;
}

/* P_SETUP_LOBBY_JEEP */ void sub_17862(boolean bParam0)
{
    int[10] iVar3;
    int I;

     /* WRITESCRIPTLOG */ sub_360( "SP", "P_SETUP_LOBBY_JEEP", 0 );
    if (bParam0)
    {
         /* CLEANVEHICLE */ sub_4036( g_U1432 );
         /* UNLOADMODEL */ sub_17947( g_U1431 );
         /* CLEANOBJECT */ sub_3931( g_U1433 );
        g_U1433 =  /* CREATEOBJECTNOOFFSET */ sub_18145( 1286391775, 19.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
        if (DOES_OBJECT_EXIST( g_U1433 ))
        {
            ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( g_U1433, ref g_U1157 );
            FREEZE_OBJECT_POSITION( g_U1433, 1 );
        }
        STOP_PARTICLE_FX_LOOPED( g_U1434 );
        g_U1434 = START_PARTICLE_FX_LOOPED_AT_COORD( "Ambient_Steam_Giant_S", 16.46000000, 0.47000000, 1.19000000, 0.00000000, 0.00000000, 0.00000000, 1.25000000 );
    }
    else if ((DOES_VEHICLE_EXIST( g_U1432 )) == 0)
    {
         /* CLEANVEHICLE */ sub_4036( g_U1432 );
        g_U1432 =  /* CREATEVEHICLE */ sub_17273( g_U1431, -12.55610000, -23.51750000, -0.01607020, 0.00000000, 0, 0, 1 );
    }
    if (((IS_VEHICLE_DEAD( g_U1432 )) == 0) AND ((DOES_VEHICLE_EXIST( g_U1432 )) == 1))
    {
        SET_VEHICLE_ENGINE_ON( g_U1432, 1, 1 );
        SET_VEHICLE_PROOFS( g_U1432, 0, 0, 0, 1, 1 );
        SET_VEHICLE_CAN_BE_VISIBLY_DAMAGED( g_U1432, 1 );
        array(ref iVar3, 10);
        iVar3[1] = 1;
        iVar3[2] = 1;
        iVar3[3] = 1;
        iVar3[4] = 1;
        iVar3[5] = 1;
        iVar3[6] = 1;
        iVar3[7] = 1;
        iVar3[8] = 1;
        iVar3[9] = 1;
        for ( I = 0; I < iVar3; I++ )
        {
            if (I > 0)
            {
                SET_VEHICLE_EXTRA( g_U1432, I, iVar3[I] );
            }
        }
        SET_VEHICLE_COLOUR_COMBINATION( g_U1432, 0 );
    }
    return;
}

/* UNLOADMODEL */ void sub_17947(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 1)
    {
        SET_MODEL_AS_NO_LONGER_NEEDED( uParam0 );
    }
    else
    {
         /* WRITE_STRING */ sub_6816( "[SP]### ERROR! (UnloadModel) Trying to unload a model that isn't in the img! ###" );
    }
    return;
}

/* CREATEOBJECTNOOFFSET */ void sub_18145(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_11610( uParam0, 1 );
    }
    Result = CREATE_OBJECT_NO_OFFSET( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an object to exist: {!f1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

/* P_CREATE_PLACEMENTS */ void sub_18882()
{
     /* WRITESCRIPTLOG */ sub_360( "SP", "P_CREATE_PLACEMENTS", 0 );
     /* CLEANPLACEMENTARRAY */ sub_18951( ref l_U455 );
    l_U455[0] =  /* CREATEPLACEMENT */ sub_19075( g_U1276, 18.47000000, -23.67000000, -0.00000000, 80.00000000, 0.00000000, 0.00000000, 0, 0, 0, 1119092736 );
    l_U455[1] =  /* CREATEPLACEMENT */ sub_19075( g_U1275, 18.00000000, -29.98000000, -0.00000000, 80.00000000, 0.00000000, 0.00000000, 0, 0, 0, 1119092736 );
    l_U455[2] =  /* CREATEPLACEMENT */ sub_19075( g_U1275, 24.07000000, -29.96000000, -0.00000000, 80.00000000, 0.00000000, 0.00000000, 0, 0, 0, 1119092736 );
    l_U455[3] =  /* CREATEPLACEMENT */ sub_19075( g_U1276, 27.57000000, -25.34000000, -0.00000000, 80.00000000, 0.00000000, 0.00000000, 0, 0, 0, 1119092736 );
    l_U455[4] =  /* CREATEPLACEMENT */ sub_19075( g_U1276, 23.81000000, -18.08000000, -0.00000000, 80.00000000, 0.00000000, 0.00000000, 0, 0, 0, 1119092736 );
    l_U455[5] =  /* CREATEPLACEMENT */ sub_19075( g_U1274, 14.91000000, -23.69000000, -0.00000000, 30.00000000, 0.00000000, 0.00000000, 0, 0, 0, 1119092736 );
    l_U455[6] =  /* CREATEPLACEMENT */ sub_19075( g_U1276, 14.04000000, -28.21000000, -0.00000000, 80.00000000, 0.00000000, 0.00000000, 0, 0, 0, 1119092736 );
    l_U455[7] =  /* CREATEPLACEMENT */ sub_19075( g_U1275, 31.83000000, -27.60000000, -0.00000000, 80.00000000, 0.00000000, 0.00000000, 0, 0, 0, 1119092736 );
    return;
}

/* CLEANPLACEMENTARRAY */ void sub_18951(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* CLEANPLACEMENT */ sub_4378( (uParam0^)[I] );
    }
    return;
}

/* CREATEPLACEMENT */ void sub_19075(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, int iParam8, unknown uParam9, unknown uParam10)
{
    unknown Result;

    Result = CREATE_PLACEMENT_ROTATE( uParam0, uParam1, uParam4, uParam7, 0, uParam9, uParam10 );
    if (iParam8 == 1)
    {
        while ((DOES_PLACEMENT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for a placement to exist: {} ###", 1, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return Result;
}

/* P_SETUP_LOBBY_GOLDEN_GUN */ void sub_19667()
{
     /* WRITESCRIPTLOG */ sub_360( "SP", "P_SETUP_LOBBY_GOLDEN_GUN", 0 );
     /* CLEANPLACEMENT */ sub_4378( g_U667._fU0 );
     /* P_CREATE_S_OFF_GG_MD_02 */ sub_19754();
    return;
}

/* P_CREATE_S_OFF_GG_MD_02 */ void sub_19754()
{
     /* WRITESCRIPTLOG */ sub_360( "CO", "P_CREATE_S_OFF_GG_MD_02", 0 );
     /* P_CREATECOLLECTIBLESTRUCT */ sub_19892( ref g_U667, g_U704, 1584164528, 1075558658, 16.01000000, -8.84000000, 1.14000000, 1.50000000, 0.00000000, 1.00000000, "lobby_int_rm" );
     /* P_CREATECOLLECTIBLE */ sub_20049( ref g_U667 );
    return;
}

/* P_CREATECOLLECTIBLESTRUCT */ void sub_19892(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    if (NOT IS_ARCADE_MODE_ACTIVE())
    {
        iParam0->_fU4 = uParam1;
        iParam0->_fU8 = uParam2;
        iParam0->_fU12 = uParam3;
        iParam0->_fU16 = {uParam4};
        iParam0->_fU28 = {uParam7};
        StrCopy( ref iParam0->_fU40, uParam10, 32 );
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_360( "CO", "NO GOLDEN GUNS FOR ARCADE", 0 );
    }
    return;
}

/* P_CREATECOLLECTIBLE */ void sub_20049(int iParam0)
{
     /* WRITESCRIPTLOG */ sub_360( "CO", "P_CreateCollectible", 0 );
    if (NOT IS_ARCADE_MODE_ACTIVE())
    {
        if (( /* F_HAS_COLLECTIBLE_BEEN_COLLECTED */ sub_20132( iParam0->_fU12 )) == 1)
        {
             /* WRITESCRIPTLOG */ sub_360( "CO", "HAS BEEN COLLECTED.", 0 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_360( "CO", "has never been collected.", 0 );
        }
        if (( /* F_HAS_COLLECTIBLE_BEEN_COLLECTED */ sub_20132( iParam0->_fU12 )) == 0)
        {
             /* CLEANPLACEMENT */ sub_4378( iParam0->_fU0 );
            iParam0->_fU0 =  /* CREATEPLACEMENT */ sub_19075( iParam0->_fU8, iParam0->_fU16, iParam0->_fU28, 1, 0, 0, 1119092736 );
            if (NOT (IS_STRING_NULL( iParam0 + 40 )))
            {
                if ((DOES_PLACEMENT_EXIST( iParam0->_fU0 )) == 1)
                {
                     /* WRITESCRIPTLOG */ sub_360( "CO", "Added collectible to interior", 0 );
                    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( iParam0->_fU0, iParam0 + 40 );
                }
            }
        }
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_360( "CO", "NO GOLDEN GUNS FOR ARCADE", 0 );
    }
    return;
}

/* F_HAS_COLLECTIBLE_BEEN_COLLECTED */ int sub_20132(unknown uParam0)
{
    unknown uVar3;
    float fVar4;

    if (IS_COLLECTABLE_ENABLED() == 0)
    {
        return 1;
    }
    uVar3 = uParam0;
    fVar4 = STAT_HASH_GET_FLOAT( uVar3 );
    if (ARE_SP_STATS_LOADED() == 1)
    {
        if ((STAT_HASH_EXISTS( uVar3 )) == 1)
        {
            if (fVar4 > 0.00000000)
            {
                return 1;
            }
        }
    }
    return 0;
}

/* P_CREATE_MPM_STATIC_OBJECTS */ void sub_20579()
{
    vector[5] vVar2;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    int I;

     /* WRITESCRIPTLOG */ sub_360( "SP", "P_CREATE_MPM_STATIC_OBJECTS", 0 );
    array(ref vVar2, 5);
    vVar2[0] = {18.41500000, -23.25000000, -0.47000000};
    vVar2[1] = {24.45900000, -31.13800000, -0.30800000};
    vVar2[2] = {24.45900000, -31.13800000, -0.30800000};
    vVar2[3] = {22.52900000, -34.21800000, -0.00200000};
    vVar2[4] = {18.41500000, -23.25000000, 1.02300000};
    for ( I = 0; I < l_U477; I++ )
    {
         /* CLEANOBJECT */ sub_3931( l_U477[I] );
        l_U477[I] =  /* CREATEOBJECTNOOFFSET */ sub_18145( l_U483[I], vVar2[I], 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
        if ((DOES_OBJECT_EXIST( l_U477[I] )) == 1)
        {
            ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U477[I], ref g_U1157 );
            FREEZE_OBJECT_POSITION( l_U477[I], 1 );
        }
    }
    return;
}

/* P_CREATE_LOBBY_ELEVATOR_DOORS */ void sub_20946()
{
     /* WRITESCRIPTLOG */ sub_360( "SP", "P_CREATE_LOBBY_ELEVATOR_DOORS", 0 );
     /* CLEANOBJECT */ sub_3931( g_U1446 );
    g_U1446 =  /* CREATEOBJECT */ sub_21080( g_U1445, 12.66900000, 5.13000000, -0.00400000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( g_U1446 )) == 1)
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( g_U1446, ref g_U1157 );
        FREEZE_OBJECT_POSITION( g_U1446, 1 );
    }
     /* CLEANOBJECT */ sub_3931( g_U1448 );
    g_U1448 =  /* CREATEOBJECT */ sub_21080( g_U1447, 12.66900000, 5.13000000, -0.00400000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( g_U1448 )) == 1)
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( g_U1448, ref g_U1157 );
        FREEZE_OBJECT_POSITION( g_U1448, 1 );
    }
    return;
}

/* CREATEOBJECT */ void sub_21080(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_11610( uParam0, 1 );
    }
    Result = CREATE_OBJECT( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an object to exist: {!f1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

/* P_CREATE_LOBBY_BROKEN_DESK */ void sub_21551()
{
    vector[3] vVar2;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    int I;

     /* WRITESCRIPTLOG */ sub_360( "SP", "P_CREATE_LOBBY_BROKEN_DESK", 0 );
    array(ref vVar2, 3);
    vVar2[0] = {23.29300000, -2.15400000, -0.19800000};
    vVar2[1] = {23.43100000, -2.15400000, -0.19800000};
    vVar2[2] = {23.56800000, -2.15400000, -0.19800000};
    for ( I = 0; I < g_U1441; I++ )
    {
         /* CLEANOBJECT */ sub_3931( g_U1437[I] );
        g_U1437[I] =  /* CREATEOBJECTNOOFFSET */ sub_18145( g_U1441[I], vVar2[I], 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
        if (DOES_OBJECT_EXIST( g_U1437[I] ))
        {
            ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( g_U1437[I], ref g_U1157 );
            FREEZE_OBJECT_POSITION( g_U1437[I], 1 );
        }
    }
    return;
}

/* P_CREATE_LOBBY_WALL_BLOCKER */ void sub_21869()
{
     /* WRITESCRIPTLOG */ sub_360( "SP", "P_CREATE_LOBBY_WALL_BLOCKER", 0 );
     /* CLEANOBJECT */ sub_3931( g_U1450 );
    g_U1450 =  /* CREATEOBJECT */ sub_21080( g_U1449, 22.52900000, -34.21800000, -0.90000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( g_U1450 )) == 1)
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( g_U1450, ref g_U1157 );
        FREEZE_OBJECT_POSITION( g_U1450, 1 );
    }
    return;
}

/* P_CREATE_LOBBY_WALL_BLOCKER_COLLISION */ void sub_22066()
{
     /* WRITESCRIPTLOG */ sub_360( "SP", "P_CREATE_LOBBY_WALL_BLOCKER_COLLISION", 0 );
     /* CLEANOBJECT */ sub_3931( g_U1452 );
    g_U1452 =  /* CREATEOBJECT */ sub_21080( g_U1451, 22.52900000, -34.21800000, -1.15000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( g_U1452 )) == 1)
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( g_U1452, ref g_U1157 );
        FREEZE_OBJECT_POSITION( g_U1452, 1 );
    }
    return;
}

/* P_ACTIVATE_ALL_PEDS */ void sub_22291()
{
    int I;

     /* WRITESCRIPTLOG */ sub_360( "SP", "P_ACTIVATE_ALL_PEDS", 0 );
    if (((IS_PED_DEAD( l_U240 )) == 0) AND ((DOES_PED_EXIST( l_U240 )) == 1))
    {
        FREEZE_PED_POSITION( l_U240, 0 );
        SET_PED_VISIBLE( l_U240, 1 );
        SET_PED_FREEZE_PROCESSING( l_U240, 0 );
        SET_PED_COLLISION( l_U240, 1 );
        SET_PED_PROOFS( l_U240, 0, 0, 0, 0, 0 );
    }
    for ( I = 0; I < l_U278; I++ )
    {
        if (((IS_PED_DEAD( l_U278[I] )) == 0) AND ((DOES_PED_EXIST( l_U278[I] )) == 1))
        {
            FREEZE_PED_POSITION( l_U278[I], 0 );
            SET_PED_VISIBLE( l_U278[I], 1 );
            SET_PED_FREEZE_PROCESSING( l_U278[I], 0 );
            SET_PED_COLLISION( l_U278[I], 1 );
            SET_PED_PROOFS( l_U278[I], 0, 0, 0, 0, 0 );
        }
    }
    return;
}

/* P_ACTIVATE_DEAD_BODIES */ void sub_22625()
{
    vector[11] vVar2;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;
    float[11] fVar36;
    int I;

     /* WRITESCRIPTLOG */ sub_360( "SP", "P_ACTIVATE_DEAD_BODIES", 0 );
    array(ref vVar2, 11);
    array(ref fVar36, 11);
    vVar2[0] = {17.22000000, 2.98000000, 0.00000000};
    fVar36[0] = -102.29500000;
    vVar2[1] = {14.61000000, 1.71000000, 0.00000000};
    fVar36[1] = 100.29500000;
    vVar2[2] = {21.06000000, 2.72000000, 0.00000000};
    fVar36[2] = 25.29500000;
    vVar2[3] = {18.47000000, -24.67000000, 1.00000000};
    fVar36[3] = 90.00000000;
    vVar2[4] = {20.66000000, -27.13000000, 1.00000000};
    fVar36[4] = -90.00000000;
    vVar2[5] = {25.07000000, -29.96000000, 1.00000000};
    fVar36[5] = 90.00000000;
    vVar2[6] = {31.26000000, -20.84000000, 1.00000000};
    fVar36[6] = -90.00000000;
    vVar2[7] = {23.81000000, -19.08000000, 1.00000000};
    fVar36[7] = 0.00000000;
    vVar2[8] = {15.94000000, -24.15000000, 1.00000000};
    fVar36[8] = 0.00000000;
    vVar2[9] = {15.04000000, -29.21000000, 1.00000000};
    fVar36[9] = 0.00000000;
    vVar2[10] = {28.01000000, -23.88000000, 1.00000000};
    fVar36[10] = 0.00000000;
    for ( I = 0; I < l_U443; I++ )
    {
        if (((IS_PED_DEAD( l_U443[I] )) == 0) AND ((DOES_PED_EXIST( l_U443[I] )) == 1))
        {
             /* TELEPORTPED */ sub_23196( l_U443[I], vVar2[I], fVar36[I] );
            FREEZE_PED_POSITION( l_U443[I], 0 );
            SET_ROOM_FOR_PED_BY_NAME( l_U443[I], ref g_U1157 );
            SET_PED_VISIBLE( l_U443[I], 1 );
            SET_PED_FREEZE_PROCESSING( l_U443[I], 0 );
            SET_PED_COLLISION( l_U443[I], 1 );
            SET_PED_PROOFS( l_U443[I], 0, 0, 0, 0, 0 );
             /* P_SETUP_DEAD_PED */ sub_16860( l_U443[I] );
            SET_PED_CAN_BE_SNAPPED_TO_GROUND( l_U443[I], 1 );
        }
    }
    return;
}

/* TELEPORTPED */ void sub_23196(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

/* HAS_SAVEFILE_LOADED */ int sub_23486(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_360( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U0 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U1 );
             /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_4715( uParam0,  /* PLAYER_PED_ID */ sub_903() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

/* F_HANDLE_OPENING_CUTSCENE */ int sub_24321()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;

    switch (l_U138)
    {
        case 0: break;
        case 1:
         /* WRITESCRIPTLOG */ sub_360( "SP", "eOpeningCutsceneState = CUTSCENE_SETUP", 0 );
        l_U138 = 2;
         /* WRITESCRIPTLOG */ sub_360( "SP", "eOpeningCutsceneState = CUTSCENE_WAIT_FOR_HANDOFF", 0 );
        break;
        case 2:
        if (g_U1042 == 1)
        {
             /* NIS_PRE_SETUP */ sub_3373( 1, 0, 0, 1 );
            l_U138 = 3;
             /* WRITESCRIPTLOG */ sub_360( "SP", "eOpeningCutsceneState = CUTSCENE_START", 0 );
            break;
        }
        return 0;
        case 3:
         /* WRITESCRIPTLOG */ sub_360( "SP", "eOpeningCutsceneState = CUTSCENE_START", 0 );
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0)
        {
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE(  /* PLAYER_PED_ID */ sub_903(), "player", 0 );
            CUTSCENE_REGISTER_PED_TELEPORT(  /* PLAYER_PED_ID */ sub_903(), l_U571, l_U574 );
            CUTSCENE_REGISTER_SET_PLAYER_IN_COVER( "GenCover", "36A681B_64ECDA1F_Corner1", 1, 1 );
            CUTSCENE_SET_COVER_CAMERA_DIRECTION( l_U576, l_U577 );
        }
        if (((IS_PED_DEAD( l_U240 )) == 0) AND ((DOES_PED_EXIST( l_U240 )) == 1))
        {
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U240, "M_Crac_Sold_E", 0 );
            CUTSCENE_REGISTER_PED_TELEPORT( l_U240, l_U241, l_U244 );
            CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( l_U240, "/Global/HeavyGunner/HeavyGunner_Init" );
            uVar2 = GET_WEAPON_FROM_HAND( l_U240, 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
            {
                REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( uVar2, "W_MG_21E_Aa_H", 0 );
            }
        }
        if (((IS_PED_DEAD( l_U278[0] )) == 0) AND ((DOES_PED_EXIST( l_U278[0] )) == 1))
        {
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U278[0], "M_Crac_Sold_E^1", 0 );
            CUTSCENE_REGISTER_PED_TELEPORT( l_U278[0], l_U289[0], l_U296[0] );
            CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( l_U278[0], "/Global/PLGE/PLGE_Root/PLGE_INITIALIZE_IDLE" );
            uVar3 = GET_WEAPON_FROM_HAND( l_U278[0], 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
            {
                REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( uVar3, "W_SG_M590_Aa_H", 0 );
            }
        }
        if (((IS_PED_DEAD( l_U278[1] )) == 0) AND ((DOES_PED_EXIST( l_U278[1] )) == 1))
        {
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U278[1], "M_Crac_Sold_E^3", 0 );
            CUTSCENE_REGISTER_PED_TELEPORT( l_U278[1], l_U289[1], l_U296[1] );
            CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( l_U278[1], "/Global/PLGE/PLGE_Root/PLGE_INITIALIZE_IDLE" );
            uVar4 = GET_WEAPON_FROM_HAND( l_U278[1], 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar4 )) == 1)
            {
                REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( uVar4, "W_AR_97LC_Aa_H", 0 );
            }
        }
        if ((DOES_VEHICLE_EXIST( g_U1436 )) == 1)
        {
            STOP_PLAYBACK_RECORDED_VEHICLE( g_U1436 );
            FREEZE_VEHICLE_POSITION( g_U1436, 1 );
            REGISTER_VEHICLE_PRE_SEAMLESS_CUTSCENE( g_U1436, "van_nyc", 0 );
        }
        START_SEAMLESS_CUTSCENE();
        l_U138 = 4;
         /* WRITESCRIPTLOG */ sub_360( "SP", "eOpeningCutsceneState = CUTSCENE_FIRST_FRAME", 0 );
        break;
        case 4:
         /* WRITESCRIPTLOG */ sub_360( "SP", "eOpeningCutsceneState = CUTSCENE_FIRST_FRAME", 0 );
         /* P_CREATE_OTHER_LOBBY_ENTITES */ sub_16586();
         /* P_ACTIVATE_ALL_PEDS */ sub_22291();
         /* P_ACTIVATE_DEAD_BODIES */ sub_22625();
        if (((IS_VEHICLE_DEAD( g_U1436 )) == 0) AND ((DOES_VEHICLE_EXIST( g_U1436 )) == 1))
        {
            FREEZE_VEHICLE_POSITION( g_U1436, 0 );
        }
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0)
        {
            SET_PED_PROOFS(  /* PLAYER_PED_ID */ sub_903(), 1, 1, 1, 1, 1 );
            SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_903(), 1 );
        }
        BULLET_CAMERA_TRACK_UNTIL_GROUNDED( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
        l_U138 = 5;
         /* WRITESCRIPTLOG */ sub_360( "SP", "eOpeningCutsceneState = CUTSCENE_PLAYING", 0 );
        case 5:
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            if (l_U489 == 0)
            {
                if (GET_CUTSCENE_TIME_MS() >= 1500)
                {
                    AUDIO_MUSIC_PLAY_ONESHOT();
                    l_U489 = 1;
                }
            }
        }
        else if (((IS_VEHICLE_DEAD( g_U1436 )) == 0) AND ((DOES_VEHICLE_EXIST( g_U1436 )) == 1))
        {
            SET_VEHICLE_COORDS( g_U1436, 22.03460000, -36.79270000, 0.84270000 );
            FREEZE_VEHICLE_POSITION( g_U1436, 1 );
        }
        if (((CUTSCENE_NAMED_IS_LOADING( "mid_08_office_pt2" )) == 1) || ((CUTSCENE_IS_LOADED( "mid_08_office_pt2" )) == 1))
        {
            CLEAR_NAMED_CUTSCENE( "mid_08_office_pt2" );
        }
        l_U138 = 0;
         /* WRITESCRIPTLOG */ sub_360( "SP", "eOpeningCutsceneState = CUTSCENE_IDLE", 0 );
        return 1;;
        break;
    }
    return 0;
}

/* F_HANDLE_OPENING_BLENDOUT */ int sub_26255()
{
    if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0) AND ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_941() )) == 0))
    {
         /* P_CLOSEDOOR */ sub_26332( ref g_U1383, 1 );
         /* P_SETDOORLOCKED */ sub_26589( ref g_U1383, 1 );
         /* P_CLOSEDOOR */ sub_26332( ref g_U1390, 1 );
         /* P_SETDOORLOCKED */ sub_26589( ref g_U1390, 1 );
        if ((IS_PED_IN_COVER(  /* PLAYER_PED_ID */ sub_903() )) == 0)
        {
             /* TELEPORTPED */ sub_23196(  /* PLAYER_PED_ID */ sub_903(), l_U571, l_U574 );
            SNAP_PLAYER_TO_COVERPOINT(  /* PLAYER_ID */ sub_941(), "GenCover", "36A681B_64ECDA1F_Corner1", 1 );
            SET_PED_PROOFS(  /* PLAYER_PED_ID */ sub_903(), 1, 1, 1, 1, 1 );
            SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_903(), 1 );
            SET_GAMEPLAY_CAM_RELATIVE_HEADING( l_U576, 1065353216, 0 );
            SET_GAMEPLAY_CAM_RELATIVE_PITCH( l_U577, 1065353216, 0 );
            if (IS_DEATH_PANEL_WIPE_ALLOWED())
            {
                DO_SCREEN_FADE_IN( 0 );
            }
        }
    }
    return 1;
}

/* P_CLOSEDOOR */ void sub_26332(int iParam0, int iParam1)
{
    if (( /* F_DOESDOOREXIST */ sub_26358( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_26442( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    return;
}

/* F_DOESDOOREXIST */ int sub_26358(int iParam0)
{
    int iVar3;

    iVar3 = DOES_OBJECT_OF_TYPE_EXIST_AT_COORDS( iParam0->_fU4, 1.00000000, iParam0->_fU0 );
    if (iVar3 == 1)
    {
        return 1;
    }
    return 0;
}

/* P_PRINTDOORNOTEXIST */ void sub_26442(unknown uParam0)
{
    (uParam0^) = {(uParam0^)};
    return;
}

/* P_SETDOORLOCKED */ void sub_26589(int iParam0, int iParam1)
{
    int iVar4;
    float fVar5;

    if (( /* F_DOESDOOREXIST */ sub_26358( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_26442( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
    }
    else
    {
        iVar4 = 0;
        fVar5 = 0.00000000;
        GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref iVar4, ref fVar5 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar5 );
    }
    return;
}

/* P_ACTIVATE_HEAVY_GUNNER */ void sub_27145()
{
     /* WRITESCRIPTLOG */ sub_360( "SP", "P_ACTIVATE_HEAVY_GUNNER", 0 );
    if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0) AND (((IS_PED_DEAD( l_U240 )) == 0) AND ((DOES_PED_EXIST( l_U240 )) == 1)))
    {
        SET_PED_FREEZE_PROCESSING( l_U240, 0 );
        SET_PED_VISIBLE( l_U240, 1 );
        FREEZE_PED_POSITION( l_U240, 0 );
        SET_PED_COLLISION( l_U240, 1 );
        SET_PED_PROOFS( l_U240, 0, 0, 0, 0, 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U240, 0 );
        SET_PED_AI_TEMPLATE( l_U240, "AIT_CP_HEAVY_GNR" );
        SET_PED_REQUIRE_HEADSHOT_TO_KILL( l_U240, 1 );
        SET_PED_PANIC_RANGE_OVERRIDE( l_U240, 2.00000000 );
        SET_PED_IGNORE_LOS_CHECKS( l_U240, 1 );
        SET_PED_FLAG_BLOCK_WOUNDED_MOVEMENT( l_U240, 1 );
        SET_PED_ALLOWED_TO_KNEEL_AND_FIRE( l_U240, 0 );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( l_U240, 1 );
        SET_PED_GORE_FROM_PLAYER( l_U240, 0 );
        SET_PED_CAN_BE_MELEED( l_U240, 0 );
        SET_PED_NO_RAGDOLL_TO_BULLET_UNLESS_DEAD( l_U240, 1 );
        SET_PED_COMBAT_ATTRIBUTES( l_U240, 8192, 0 );
        SET_PED_COMBAT_ATTRIBUTES( l_U240, 1, 0 );
        SET_PED_COMBAT_ATTRIBUTES( l_U240, 128, 0 );
        SET_PED_COMBAT_ATTRIBUTES( l_U240, 524288, 0 );
        SET_PED_COMBAT_ATTRIBUTES( l_U240, 1024, 0 );
        SET_PED_COMBAT_ATTRIBUTES( l_U240, 1048576, 0 );
        SET_PED_HEALTH( l_U240, 600, 0 );
        SET_PED_BOSS_PECENT_DAMAGED( l_U240, 1 );
        SET_BOSS_PECENT_DAMAGE( 0.25000000 );
        SET_HELMET_KNOCK_OFF_HEALTH( l_U240, 500 );
        SET_BULLET_CAM_PREF( l_U240, "ALL_LMS_16", "ALL_02_MED_FAILSAFE", "ALL_01_FAR_FAILSAFE", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
        SET_PED_ALERTNESS( l_U240, 4 );
        REGISTER_TARGET( l_U240,  /* PLAYER_PED_ID */ sub_903() );
        CLEAR_PED_TASKS( l_U240 );
        TASK_COMBAT_PED( l_U240,  /* PLAYER_PED_ID */ sub_903() );
         /* P_TETHERPED */ sub_15905( ref l_U218, l_U240, 1 );
    }
    return;
}

/* P_ACTIVATE_GUNNER_ENEMIES */ void sub_27816()
{
    int I;

     /* WRITESCRIPTLOG */ sub_360( "SP", "P_ACTIVATE_GUNNER_ENEMIES", 0 );
    for ( I = 0; I < l_U278; I++ )
    {
        if (((IS_PED_DEAD( l_U278[I] )) == 0) AND ((DOES_PED_EXIST( l_U278[I] )) == 1))
        {
             /* TELEPORTPED */ sub_23196( l_U278[I], l_U289[I], l_U296[I] );
             /* P_ACTIVATEPED */ sub_27993( l_U278[I] );
            SET_PED_COMBAT_ATTRIBUTES( l_U278[I], 1, 1 );
            SET_PED_COMBAT_ATTRIBUTES( l_U278[I], 1024, 1 );
            SET_PED_COMBAT_ATTRIBUTES( l_U278[I], 8192, 1 );
            SET_PED_RELATIONSHIP( l_U278[I], 2, 0 );
            SET_PED_IGNORE_LOS_CHECKS( l_U278[I], 1 );
            SET_PED_ALERTNESS( l_U278[I], 4 );
            if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0)
            {
                REGISTER_TARGET( l_U278[I],  /* PLAYER_PED_ID */ sub_903() );
                TASK_COMBAT_PED( l_U278[I],  /* PLAYER_PED_ID */ sub_903() );
            }
        }
    }
    return;
}

/* P_ACTIVATEPED */ void sub_27993(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 0 );
        SET_PED_VISIBLE( uParam0, 1 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 1 );
        FREEZE_PED_POSITION( uParam0, 0 );
        SET_PED_COLLISION( uParam0, 1 );
        SET_PED_PROOFS( uParam0, 0, 0, 0, 0, 0 );
    }
    return;
}

/* NIS_POST_SETUP */ void sub_28371(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )))
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_941(), 1, 0 );
        SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_903(), 0 );
        if (bParam0)
        {
             /* P_MAX_RELOAD_WEAPONS */ sub_28469();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

/* P_MAX_RELOAD_WEAPONS */ void sub_28469()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_903(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_903(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP(  /* PLAYER_PED_ID */ sub_903(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP(  /* PLAYER_PED_ID */ sub_903(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

/* P_START_CHECKPOINT_THREAD */ void sub_28696(int iParam0)
{
    iParam0->_fU36 = 1;
    return;
}

/* P_SAVE_PLAYER_DATA_CHECKPOINT */ void sub_28826(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

     /* WRITESCRIPTLOG */ sub_360( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
         /* WRITESCRIPTLOG */ sub_360( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
         /* START_NEW_LEVEL_CONTEXT */ sub_7981( iParam1 );
         /* CLOSE_OLD_LEVEL_CONTEXT */ sub_29117( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_29594( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_29594( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_29854( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_29594( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_29854( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_29854( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_29594( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_29854( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_29854( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_29854( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_29594( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_29854( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_29854( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_29854( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_29854( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
             /* P_PRINT_CHECKPOINT_DATA */ sub_31434( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U1, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
     /* WRITESCRIPTLOG */ sub_360( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

/* CLOSE_OLD_LEVEL_CONTEXT */ void sub_29117(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_4996( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
         /* WRITESCRIPTLOG */ sub_360( "TEH", "Ending context", 0 );
         /* WRITESCRIPTLOG */ sub_360( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

/* P_SAVE_WEAPON_ATTACHMENTS */ void sub_29594(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

/* F_WEAPONS_SAME_AMMO */ void sub_29854(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

/* P_PRINT_CHECKPOINT_DATA */ void sub_31434(int iParam0)
{
     /* WRITE_STRING */ sub_6816( "CHECKPOINT DATA" );
    PRINTSTRING( "---Position: " );
     /* WRITE_VECTOR */ sub_31522( iParam0->_fU4 );
    PRINTSTRING( "---Heading: " );
     /* WRITE_FLOAT */ sub_31599( iParam0->_fU16 );
    PRINTSTRING( "---fRelativeGameCamHeading: " );
     /* WRITE_FLOAT */ sub_31599( iParam0->_fU20 );
    PRINTSTRING( "---fRelativeGameCamPitch: " );
     /* WRITE_FLOAT */ sub_31599( iParam0->_fU24 );
    PRINTSTRING( "---nHealth: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU28 );
    PRINTSTRING( "---wtRightHolster: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU56 );
    PRINTSTRING( "---wtLeftHolster: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU60 );
    PRINTSTRING( "---wtRifleHolster: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU64 );
    PRINTSTRING( "---wtRightHand: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU68 );
    PRINTSTRING( "---wtLeftHand: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU72 );
    PRINTSTRING( "---nWeaponRightHolsterAmmo: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU76 );
    PRINTSTRING( "---nWeaponLeftHolsterAmmo: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU80 );
    PRINTSTRING( "---nWeaponRifleHolsterAmmo: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU84 );
    PRINTSTRING( "---nWeaponRightHandAmmo: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU88 );
    PRINTSTRING( "---nWeaponLeftHandAmmo: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU92 );
    PRINTSTRING( "---fAdrenaline: " );
     /* WRITE_FLOAT */ sub_31599( iParam0->_fU32 );
    PRINTSTRING( "---nPayneKillers: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU36 );
    PRINTSTRING( "---nHour: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU40 );
    PRINTSTRING( "---nMinute: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU44 );
    PRINTSTRING( "---fSweatAmount: " );
     /* WRITE_FLOAT */ sub_31599( iParam0->_fU136 );
    PRINTSTRING( "---bTimeFrozen: " );
     /* WRITE_BOOL */ sub_32469( iParam0->_fU140 );
    PRINTSTRING( "---checkpointIndex: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU52 );
     /* WRITE_STRING */ sub_6816( "---nRightHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU96 );
     /* WRITE_STRING */ sub_6816( "---nRightHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU100 );
     /* WRITE_STRING */ sub_6816( "---nLeftHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU104 );
     /* WRITE_STRING */ sub_6816( "---nLeftHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU108 );
     /* WRITE_STRING */ sub_6816( "---nRifleHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU112 );
     /* WRITE_STRING */ sub_6816( "---nRifleHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU116 );
     /* WRITE_STRING */ sub_6816( "---nRightHandAttachmentEnabled: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU120 );
     /* WRITE_STRING */ sub_6816( "---nRightHandAttachmentToggled: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU124 );
     /* WRITE_STRING */ sub_6816( "---nLeftHandAttachmentEnabled: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU128 );
     /* WRITE_STRING */ sub_6816( "---nLeftHandAttachmentToggled: " );
     /* WRITE_INT */ sub_31768( iParam0->_fU132 );
    PRINTSTRING( "[CHECKPOINT DATA SIZE]: " );
     /* WRITE_INT */ sub_31768( l_U1 );
    PRINTSTRING( "[CHECKPOINT DATA REF SIZE]: " );
     /* WRITE_INT */ sub_31768( 144 );
    return;
}

/* WRITE_VECTOR */ void sub_31522(unknown uParam0, unknown uParam1, unknown uParam2)
{
    PRINTVECTOR( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_FLOAT */ void sub_31599(unknown uParam0)
{
    PRINTFLOAT( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_INT */ void sub_31768(unknown uParam0)
{
    PRINTINT( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_BOOL */ void sub_32469(boolean bParam0)
{
    if (bParam0)
    {
        PRINTSTRING( "TRUE" );
    }
    else
    {
        PRINTSTRING( "FALSE" );
    }
    PRINTNL();
    return;
}

/* P_START_SP_CHALLENGES */ void sub_33473()
{
     /* WRITESCRIPTLOG */ sub_360( "CCB", "P_START_SP_CHALLENGES", 0 );
     /* WRITESCRIPTLOG */ sub_360( "CCB", "Starting the Office_Lobby_Gun context...", 0 );
    START_CONTEXT( "Office_Lobby_Gun" );
    return;
}

/* P_HANDLE_LOBBY_HG_ENEMIES_AMMO */ void sub_33801()
{
    unknown uVar2;
    int iVar3;
    int I;

    iVar3 = 0;
    for ( I = 0; I < l_U278; I++ )
    {
        if (((IS_PED_DEAD( l_U278[I] )) == 0) AND ((DOES_PED_EXIST( l_U278[I] )) == 1))
        {
            uVar2 = GET_WEAPON_FROM_HAND( l_U278[I], 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
            {
                iVar3 = GET_WEAPON_AMMO( uVar2 );
                if (iVar3 < 200)
                {
                    SET_WEAPON_AMMO( uVar2, 25000 );
                }
            }
        }
    }
    return;
}

/* P_LOBBY_HG_ENEMY_0_ADVANCE */ void sub_34130()
{
    unknown uVar2;

     /* WRITESCRIPTLOG */ sub_360( "SP", "P_LOBBY_HG_ENEMY_0_ADVANCE", 0 );
    if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0) AND (((IS_PED_DEAD( l_U278[0] )) == 0) AND ((DOES_PED_EXIST( l_U278[0] )) == 1)))
    {
        CLEAR_PED_TASKS( l_U278[0] );
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
        TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 14.25000000, -21.94000000, -0.00000000,  /* PLAYER_PED_ID */ sub_903(), 3, 0, 0.50000000, 0.00000000, 1, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_903() );
        CLOSE_SEQUENCE_TASK( uVar2 );
        TASK_PERFORM_SEQUENCE( l_U278[0], uVar2 );
        CLEAR_SEQUENCE_TASK( uVar2 );
    }
    return;
}

/* P_LOBBY_HG_ENEMY_1_ADVANCE */ void sub_34421()
{
    unknown uVar2;

     /* WRITESCRIPTLOG */ sub_360( "SP", "P_LOBBY_HG_ENEMY_1_ADVANCE", 0 );
    if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0) AND (((IS_PED_DEAD( l_U278[1] )) == 0) AND ((DOES_PED_EXIST( l_U278[1] )) == 1)))
    {
        CLEAR_PED_TASKS( l_U278[1] );
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
        TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 30.23000000, -22.77000000, -0.00000000,  /* PLAYER_PED_ID */ sub_903(), 3, 0, 0.50000000, 0.00000000, 1, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_903() );
        CLOSE_SEQUENCE_TASK( uVar2 );
        TASK_PERFORM_SEQUENCE( l_U278[1], uVar2 );
        CLEAR_SEQUENCE_TASK( uVar2 );
    }
    return;
}

/* P_REMOVEALLTETHERSFROMPED */ void sub_34756(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        RESET_PED_TETHERING( uParam0 );
    }
    return;
}

/* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ void sub_35072(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result++;
        }
    }
    return Result;
}

/* F_GET_NUM_LIVING_ENEMIES */ void sub_35210()
{
    int Result;
    int I;

    Result = 0;
    if (((IS_PED_DEAD( l_U240 )) == 0) AND ((DOES_PED_EXIST( l_U240 )) == 1))
    {
        Result++;
    }
    for ( I = 0; I < l_U278; I++ )
    {
        if (((IS_PED_DEAD( l_U278[I] )) == 0) AND ((DOES_PED_EXIST( l_U278[I] )) == 1))
        {
            Result++;
        }
    }
    return Result;
}

/* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ void sub_35501(unknown uParam0)
{
    int I;

    if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_35072( uParam0 )) == 1)
    {
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
            {
                if (NOT (GET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I] )))
                {
                    SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I], 1 );
                    return (uParam0^)[I];
                }
            }
        }
    }
    return nil;
}

/* P_RESET_MAX_CONTEXTUAL_DIALOGUE */ void sub_35900()
{
     /* WRITESCRIPTLOG */ sub_360( "SP", "P_RESET_MAX_CONTEXTUAL_DIALOGUE", 0 );
    l_U114 = 0;
    l_U134 = 0;
    l_U135 = 0;
    l_U133 = 0;
     /* RESETTIMER */ sub_2776( ref l_U124 );
     /* RESETTIMER */ sub_2776( ref l_U115 );
    return;
}

/* P_HANDLE_MAX_CONTEXTUAL_DIALOGUE */ void sub_36137()
{
    int iVar2;
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    float fVar7;
    float fVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    int iVar12;

    if (l_U114 == 0)
    {
         /* CREATETIMER */ sub_1929( ref l_U115, 6000, 1, 0 );
         /* STARTTIMER */ sub_2077( ref l_U115 );
        l_U114 = 1;
    }
    if (((IS_PED_DEAD( g_U1424 )) == 0) AND (((DOES_PED_EXIST( g_U1424 )) == 1) AND ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0)))
    {
        if ((( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_36314()) == 0) AND ((TIME_SINCE_LAST_MONOLOGUE() > 1000) AND ((IS_MONOLOGUE_PLAYING() == 0) AND ((IS_LAST_MAN_STANDING_ACTIVE() == 0) AND ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)))))
        {
            if ((l_U115._fU16 == 1) || (( /* ISTIMERDONE */ sub_2208( ref l_U115 )) == 1))
            {
                if (((CAN_PED_SEE_OTHER_PED( g_U1424,  /* PLAYER_PED_ID */ sub_903(), 130.00000000, 15.00000000 )) == 1) AND (IS_PLAYER_SHOOTDODGING() == 1))
                {
                     /* WRITESCRIPTLOG */ sub_360( "SP", "Should be playing shootdodge Dialogue", 0 );
                    iVar2 = GET_RANDOM_INT_IN_RANGE( 0, 2 );
                    if (iVar2 == 0)
                    {
                         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_36559( ref l_U31 );
                         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_36668( 0,  /* PLAYER_PED_ID */ sub_903(), "MAX", ref l_U31, 2, 0 );
                         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_36668( 1, g_U1424, "M6_Offi_Tech_Avg_01", ref l_U31, 2, 0 );
                         /* PLAY_SINGLE_SPEECH */ sub_36949( "SOFF_MXSDGS", ref l_U31, 7, 1 );
                    }
                    else
                    {
                         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_36559( ref l_U41 );
                         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_36668( 0,  /* PLAYER_PED_ID */ sub_903(), "MAX", ref l_U41, 2, 0 );
                         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_36668( 1, g_U1424, "M6_Offi_Tech_Avg_01", ref l_U41, 2, 0 );
                         /* PLAY_SINGLE_SPEECH */ sub_36949( "SOFF_MXMSSRN", ref l_U41, 7, 1 );
                    }
                     /* CREATETIMER */ sub_1929( ref l_U115, 6000, 1, 0 );
                     /* STARTTIMER */ sub_2077( ref l_U115 );
                }
                if ((HAS_BULLET_IMPACTED_IN_AREA( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( g_U1424 ), 30.00000000, ref iVar3 )) == 1)
                {
                    if (iVar3 == ( /* PLAYER_PED_ID */ sub_903()))
                    {
                        uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_BULLET_IMPACT_AREA( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( g_U1424 ), 30.00000000, ref iVar3 )};
                        fVar7 = VDIST( uVar4, 0.00000000, 0.00000000, 0.00000000 );
                        if (fVar7 > 0.00000000)
                        {
                            fVar8 = VDIST( uVar4, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( g_U1424 ) );
                            if (fVar8 > 8.00000000)
                            {
                                 /* RESET_SCRIPT_SPEECH_STRUCT */ sub_36559( ref l_U51 );
                                 /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_36668( 0,  /* PLAYER_PED_ID */ sub_903(), "MAX", ref l_U51, 2, 0 );
                                 /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_36668( 1, g_U1424, "M6_Offi_Tech_Avg_01", ref l_U51, 2, 0 );
                                 /* PLAY_SINGLE_SPEECH */ sub_36949( "SOFF_MXPLYRS", ref l_U51, 7, 1 );
                                 /* CREATETIMER */ sub_1929( ref l_U115, 6000, 1, 0 );
                                 /* STARTTIMER */ sub_2077( ref l_U115 );
                            }
                        }
                    }
                }
            }
        }
    }
    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0)
    {
        if ((( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_36314()) == 0) AND ((TIME_SINCE_LAST_MONOLOGUE() > 1000) AND ((IS_MONOLOGUE_PLAYING() == 0) AND ((IS_LAST_MAN_STANDING_ACTIVE() == 0) AND ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)))))
        {
            uVar9 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS(  /* PLAYER_PED_ID */ sub_903() )};
            if ((VDIST( uVar9, l_U111 )) > 0.10000000)
            {
                 /* RESETTIMER */ sub_2776( ref l_U124 );
            }
            else if ((l_U124._fU16 == 0) AND (l_U124._fU20 == 0))
            {
                 /* CREATETIMER */ sub_1929( ref l_U124, 35000, 1, 0 );
                 /* STARTTIMER */ sub_2077( ref l_U124 );
            }
            if ((l_U124._fU16 == 1) || (( /* ISTIMERDONE */ sub_2208( ref l_U124 )) == 1))
            {
                if ((g_U706 == 2) || (g_U706 == 1))
                {
                    if (l_U133 < 4)
                    {
                        iVar12 = GET_RANDOM_INT_IN_RANGE( 0, 2 );
                        if (iVar12 == 0)
                        {
                             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_36559( ref l_U61 );
                             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_36668( 0,  /* PLAYER_PED_ID */ sub_903(), "MAX", ref l_U61, 2, 0 );
                             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_36668( 1,  /* PLAYER_PED_ID */ sub_903(), "MAX", ref l_U61, 2, 0 );
                             /* PLAY_SINGLE_SPEECH */ sub_36949( "SOFF_MVPRSRV", ref l_U61, 7, 1 );
                        }
                        else
                        {
                             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_36559( ref l_U71 );
                             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_36668( 0,  /* PLAYER_PED_ID */ sub_903(), "MAX", ref l_U71, 2, 0 );
                             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_36668( 1, g_U1424, "M6_Offi_Tech_Avg_01", ref l_U71, 2, 0 );
                             /* PLAY_SINGLE_SPEECH */ sub_36949( "SOFF_MXSTPDS", ref l_U71, 7, 1 );
                        }
                        l_U133++;
                    }
                }
                else if (g_U706 == 5)
                {
                    if (l_U133 < 4)
                    {
                         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_36559( ref l_U81 );
                         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_36668( 0,  /* PLAYER_PED_ID */ sub_903(), "MAX", ref l_U81, 2, 0 );
                         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_36668( 1,  /* PLAYER_PED_ID */ sub_903(), "MAX", ref l_U81, 2, 0 );
                         /* PLAY_SINGLE_SPEECH */ sub_36949( "SOFF_MVPSTSRV", ref l_U81, 7, 1 );
                        l_U133++;
                    }
                }
                else if (g_U706 == 7)
                {
                    if (l_U133 < 2)
                    {
                         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_36559( ref l_U91 );
                         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_36668( 0,  /* PLAYER_PED_ID */ sub_903(), "MAX", ref l_U91, 2, 0 );
                         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_36668( 1,  /* PLAYER_PED_ID */ sub_903(), "MAX", ref l_U91, 2, 0 );
                         /* PLAY_SINGLE_SPEECH */ sub_36949( "SOFF_MVPSTLBY", ref l_U91, 7, 1 );
                        l_U133++;
                    }
                };;;
                 /* CREATETIMER */ sub_1929( ref l_U124, 35000, 1, 0 );
                 /* STARTTIMER */ sub_2077( ref l_U124 );
            }
            l_U111 = {uVar9};
        }
    }
    if (l_U134 == 0)
    {
        l_U135 = GET_PAYNEKILLER_AMT();
        l_U134 = 1;
    }
    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_903() )) == 0)
    {
        if ((( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_36314()) == 0) AND ((TIME_SINCE_LAST_MONOLOGUE() > 1000) AND ((IS_MONOLOGUE_PLAYING() == 0) AND ((IS_LAST_MAN_STANDING_ACTIVE() == 0) AND ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)))))
        {
            if (l_U135 < GET_PAYNEKILLER_AMT())
            {
                 /* WRITESCRIPTLOG */ sub_360( "SP", "Playing Pills Monologue", 0 );
                 /* RESET_SCRIPT_SPEECH_STRUCT */ sub_36559( ref l_U101 );
                 /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_36668( 0,  /* PLAYER_PED_ID */ sub_903(), "MAX", ref l_U101, 2, 0 );
                 /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_36668( 1,  /* PLAYER_PED_ID */ sub_903(), "MAX", ref l_U101, 2, 0 );
                 /* PLAY_SINGLE_SPEECH */ sub_36949( "SOFF_MXFNDPLS", ref l_U101, 7, 1 );
            }
        }
    }
    l_U135 = GET_PAYNEKILLER_AMT();
    return;
}

/* IS_ANY_SPEECH_CURRENTLY_PLAYING */ void sub_36314()
{
    int Result;
    int I;

    Result = 0;
    for ( I = 0; I <= 3; I++ )
    {
        Result = (IS_SCRIPTED_CONVERSATION_ONGOING( I )) || (Result);
    }
    return Result;
}

/* RESET_SCRIPT_SPEECH_STRUCT */ void sub_36559(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

/* ADD_PED_FOR_SCRIPT_SPEECH */ void sub_36668(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

/* PLAY_SINGLE_SPEECH */ void sub_36949(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return  /* PLAY_SINGLE_SPEECH_FROM_BLOCK */ sub_36994( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

/* PLAY_SINGLE_SPEECH_FROM_BLOCK */ void sub_36994(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return  /* PLAYSPEECHMAIN */ sub_37081( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

/* PLAYSPEECHMAIN */ int sub_37081(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT ( /* CANTHISSPEECHBEPLAYED */ sub_37133( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
     /* COPYHIDDENSPEECHSTUCT */ sub_37651( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

/* CANTHISSPEECHBEPLAYED */ int sub_37133(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

/* COPYHIDDENSPEECHSTUCT */ void sub_37651(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

/* P_UNLOAD_ASSETS */ void sub_39946()
{
    int I;

     /* WRITESCRIPTLOG */ sub_360( "SP", "P_UNLOAD_ASSETS", 0 );
     /* UNLOADMODEL */ sub_17947( 45140746 );
     /* UNLOADMODEL */ sub_17947( 1541666737 );
     /* UNLOADMODEL */ sub_17947( g_U1435 );
     /* UNLOADMODEL */ sub_17947( 1286391775 );
    for ( I = 0; I < l_U477; I++ )
    {
         /* UNLOADMODEL */ sub_17947( l_U483[I] );
    }
    for ( I = 0; I < g_U1441; I++ )
    {
         /* UNLOADMODEL */ sub_17947( g_U1441[I] );
    }
     /* UNLOADMODEL */ sub_17947( g_U1449 );
     /* UNLOADMODEL */ sub_17947( g_U1451 );
     /* UNLOADMODEL */ sub_17947( -475261383 );
     /* UNLOADMODEL */ sub_17947( 1974746367 );
     /* UNLOADWEAPON */ sub_40170( g_U1269 );
     /* UNLOADWEAPON */ sub_40170( g_U1270 );
     /* UNLOADWEAPON */ sub_40170( g_U1271 );
     /* UNLOADWEAPON */ sub_40170( g_U1272 );
     /* UNLOADWEAPON */ sub_40170( 319712764 );
     /* UNLOADANIMDICT */ sub_40275( "LEVEL_S_OFFICE_CP_04" );
     /* UNLOADANIMDICT */ sub_40275( "AMED_HEVY_CORE" );
     /* UNLOADACTIONTREE */ sub_40377( "LEVEL/S_OFFICE/S_OFF_HEAVYGUNNER" );
     /* UNLOADACTIONTREE */ sub_40377( "LEVEL/S_OFFICE/S_OFF_MPM_DEAD_SEC" );
     /* UNLOADMODEL */ sub_17947( g_U704 );
     /* CLEANVEHICLERECORDING */ sub_40478( 248 );
    return;
}

/* UNLOADWEAPON */ void sub_40170(unknown uParam0)
{
    SET_WEAPON_AS_NO_LONGER_NEEDED( uParam0 );
    return;
}

/* UNLOADANIMDICT */ void sub_40275(unknown uParam0)
{
    REMOVE_ANIM_DICT( uParam0, 0 );
    return;
}

/* UNLOADACTIONTREE */ void sub_40377(unknown uParam0)
{
    ACTION_TREE_UNLOAD( uParam0 );
    return;
}

/* CLEANVEHICLERECORDING */ void sub_40478(unknown uParam0)
{
    REMOVE_VEHICLE_RECORDING( uParam0 );
    return;
}

