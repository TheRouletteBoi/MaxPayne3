void main()
{
    l_U0 = 1;
    l_U1 = 144;
    StrCopy( ref l_U2, "DEFAULT_SCRIPTED_CAMERA", 32 );
    StrCopy( ref l_U10, "DEFAULT_SPLINE_CAMERA", 32 );
    l_U19 = 0;
    l_U20 = 0;
    l_U21 = 1500;
    l_U32 = 0;
    l_U44 = 0;
    l_U45 = 0;
    l_U82 = 0;
    l_U83 = 0;
    l_U84 = 0;
    l_U85 = 1;
    l_U510 = {0.07300000, 0.02500000, -0.06000000};
    l_U513 = {3.14200000, 0.00000000, 0.00000000};
    l_U655 = 0;
    StrCopy( ref l_U709, "Room_fav1_cpt_a_01", 32 );
    l_U717 = 0;
    l_U718 = 1;
    l_U719 = 0;
    l_U720 = 1;
    l_U721 = 1;
    l_U722 = 1;
    l_U723 = 0;
    l_U724 = 0;
    l_U725 = 0;
    l_U727 = 0;
    l_U769 = 1500;
    l_U779 = 6000;
    l_U789 = 3000;
    l_U799 = 2500;
    l_U910 = 3000;
    l_U929 = 0;
     /* WRITESCRIPTLOG */ sub_378( "SP", "Script fav1_fountain.sc is starting...", "###" );
    g_U768 = 1;
    while (g_U768 == 1)
    {
         /* P_HANDLE_CHECKPOINTS */ sub_514();
        if (l_U84 == 0)
        {
             /* P_HANDLE_EVENTS */ sub_8409();
        }
        WAIT( 0 );
    }
     /* P_CLEANUP_ALL */ sub_2899();
     /* P_UNLOAD_ASSETS */ sub_38258();
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "s_fav1_fountain" );
     /* WRITESCRIPTLOG */ sub_378( "SP", "Script fav1_fountain.sc is terminating...", "###" );
    return;
}

/* WRITESCRIPTLOG */ void sub_378(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    DISPLAYF( "[{0}][{1}]{3} {2} {3}", 4, 513, uVar5, 1537, uParam0, 1537, uParam1, 1537, sParam2 );
    return;
}

/* P_HANDLE_CHECKPOINTS */ void sub_514()
{
    if (g_U1049 == 8)
    {
        switch (l_U84)
        {
            case 0:
            if (( /* RESTARTING_CHECKPOINT */ sub_720()) || (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
            {
                l_U84 = 1;
                 /* WRITESCRIPTLOG */ sub_378( "kja", "eFailState = FAIL_WAITING_FOR_PLAYER", 0 );
            }
            break;
            case 1:
            if ( /* IS_RESTART_ACTIVE */ sub_1239())
            {
                l_U84 = 2;
            }
            else if (( /* F_CHECK_QUIT_RETRY */ sub_1299( 0 )) == 1)
            {
                l_U84 = 2;
            }
            break;
            case 2:
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
            {
                l_U84 = 3;
                 /* WRITESCRIPTLOG */ sub_378( "kja", "eFailState = FAIL_CLEANUP_ALL", 0 );
            }
            break;
            case 3:
             /* WRITESCRIPTLOG */ sub_378( "kja", "eFailState = FAIL_CLEANUP_ALL", 0 );
            if ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_657() )) == 0)
            {
                SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_657(), 0, 0 );
            }
            if (IS_DEATH_PANEL_WIPE_ALLOWED() == 0)
            {
                DO_SCREEN_FADE_OUT( 0 );
            }
             /* P_CLEANUP_ALL */ sub_2899();
            l_U84 = 4;
             /* WRITESCRIPTLOG */ sub_378( "kja", "eFailState = FAIL_RESTORE_PLAYER", 0 );
            break;
            case 4:
             /* WRITESCRIPTLOG */ sub_378( "kja", "eFailState = FAIL_RESTORE_PLAYER", 0 );
             /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_3774( ref l_U46,  /* PLAYER_PED_ID */ sub_619() );
            l_U84 = 5;
             /* WRITESCRIPTLOG */ sub_378( "kja", "eFailState = FAIL_RESTART_CHECKPOINT", 0 );
            break;
            case 5:
             /* WRITESCRIPTLOG */ sub_378( "kja", "eFailState = FAIL_RESTART_CHECKPOINT", 0 );
            l_U83 = 0;
            l_U84 = 0;
             /* WRITESCRIPTLOG */ sub_378( "kja", "eFailState = FAIL_IDLE", 0 );
            break;
        }
    }
    return;
}

/* PLAYER_PED_ID */ int sub_619()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED(  /* PLAYER_ID */ sub_657() );
    }
    return 0;
}

/* PLAYER_ID */ void sub_657()
{
    return GET_PLAYER_ID();
}

/* RESTARTING_CHECKPOINT */ int sub_720()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U0 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
        {
            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_619(), 0 );
            SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_657(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE(  /* PLAYER_ID */ sub_657(), 1 );
            if ((IS_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_619() )) == 0)
            {
                SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_619(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

/* IS_RESTART_ACTIVE */ void sub_1239()
{
    return g_U648;
}

/* F_CHECK_QUIT_RETRY */ int sub_1299(int iParam0)
{
    iParam0 = 1;
    switch (l_U20)
    {
        case 0:
        if (NOT ( /* HASTIMERBEENACTIVATED */ sub_1377( ref l_U22 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
            {
                l_U21 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
             /* CREATETIMER */ sub_1505( ref l_U22, l_U21, 1, 1 );
             /* STARTTIMER */ sub_1653( ref l_U22 );
        }
        if ( /* ISTIMERDONE */ sub_1784( ref l_U22 ))
        {
             /* WRITESCRIPTLOG */ sub_378( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_657() )))
            {
                SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_657(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U20 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U20 = 2;
            }
            else
            {
                l_U20 = 3;
            }
        }
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_378( "NS", "Player will QUIT", 0 );
         /* P_POSTQUITRETRYCLEANUP */ sub_2279();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_378( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
         /* P_POSTQUITRETRYCLEANUP */ sub_2279();
        return 1;
        break;
    }
    return 0;
}

/* HASTIMERBEENACTIVATED */ int sub_1377(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

/* CREATETIMER */ void sub_1505(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

/* STARTTIMER */ void sub_1653(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

/* ISTIMERDONE */ int sub_1784(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

/* P_POSTQUITRETRYCLEANUP */ void sub_2279()
{
     /* WRITESCRIPTLOG */ sub_378( "NS", "P_PostFailRetryCleanup", 0 );
     /* RESETTIMER */ sub_2352( ref l_U22 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_657() )))
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_657(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U19 = 0;
    l_U19 = l_U19;
    l_U20 = 0;
    return;
}

/* RESETTIMER */ void sub_2352(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

/* P_CLEANUP_ALL */ void sub_2899()
{
     /* WRITESCRIPTLOG */ sub_378( "SP", "P_CLEANUP_ALL", "###" );
    ISEQ_UNREGISTER_ENTITY( 1669748883, "roof" );
    ISEQ_TERMINATE( 1669748883 );
     /* CLEANPLACEMENT */ sub_2993( l_U757 );
     /* CLEANPLACEMENT */ sub_2993( l_U758 );
     /* CLEANPLACEMENT */ sub_2993( l_U759 );
     /* CLEANPED */ sub_3078( l_U550 );
     /* CLEANPED */ sub_3078( l_U564 );
     /* CLEANPED */ sub_3078( l_U584 );
     /* CLEANPED */ sub_3078( l_U598 );
     /* CLEANPED */ sub_3078( l_U612 );
     /* CLEANPED */ sub_3078( l_U626 );
     /* CLEANPED */ sub_3078( l_U640 );
     /* CLEANPED */ sub_3078( l_U536 );
     /* CLEANPED */ sub_3078( l_U641 );
     /* CLEANPED */ sub_3078( l_U494 );
     /* CLEANPEDARRAY */ sub_3257( ref l_U703 );
     /* CLEANOBJECT */ sub_3336( l_U708 );
     /* UNLOADMODEL */ sub_3395( 1156505411 );
     /* RESETTIMER */ sub_2352( ref l_U737 );
     /* RESETTIMER */ sub_2352( ref l_U728 );
     /* RESETTIMER */ sub_2352( ref l_U760 );
     /* RESETTIMER */ sub_2352( ref l_U770 );
     /* RESETTIMER */ sub_2352( ref l_U780 );
     /* RESETTIMER */ sub_2352( ref l_U790 );
     /* RESETTIMER */ sub_2352( ref l_U746 );
    return;
}

/* CLEANPLACEMENT */ void sub_2993(unknown uParam0)
{
    if ((DOES_PLACEMENT_EXIST( uParam0 )) == 1)
    {
        REMOVE_PLACEMENT( uParam0 );
    }
    return;
}

/* CLEANPED */ void sub_3078(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

/* CLEANPEDARRAY */ void sub_3257(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
         /* CLEANPED */ sub_3078( (uParam0^)[I] );
    }
    return;
}

/* CLEANOBJECT */ void sub_3336(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

/* UNLOADMODEL */ void sub_3395(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 1)
    {
        SET_MODEL_AS_NO_LONGER_NEEDED( uParam0 );
    }
    else
    {
         /* WRITE_STRING */ sub_3532( "[SP]### ERROR! (UnloadModel) Trying to unload a model that isn't in the img! ###" );
    }
    return;
}

/* WRITE_STRING */ void sub_3532(unknown uParam0)
{
    PRINTSTRING( uParam0 );
    PRINTNL();
    return;
}

/* P_RESTORE_PLAYER_DATA_CHECKPOINT */ void sub_3774(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

     /* WRITESCRIPTLOG */ sub_378( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U0)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
     /* CLOSE_CURRENT_LEVEL_CONTEXT */ sub_3993( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
         /* LOADCOLLISIONFORPED */ sub_5157( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_5471( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_5906( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_5471( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_5906( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_5471( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_5906( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPON */ sub_6222( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_5906( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPON */ sub_6222( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_5906( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U0 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if (( /* F_CAN_GIVE_AMMO_TO_REGULAR_WEAPON_TYPE */ sub_6794( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
     /* START_NEW_LEVEL_CONTEXT */ sub_6996( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING(  /* PLAYER_PED_ID */ sub_619(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U0)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U0 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
     /* WRITESCRIPTLOG */ sub_378( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

/* CLOSE_CURRENT_LEVEL_CONTEXT */ void sub_3993(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_4055( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

/* GET_MISSION_INDEX_FROM_NAME */ int sub_4055(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    }
    else
    {
        PRINTSTRING( uParam0 );
        PRINTSTRING( uParam0 );
        PRINTSTRING( uParam0 );
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

/* LOADCOLLISIONFORPED */ void sub_5157(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

/* F_GIVEPEDWEAPONTOHOLSTER */ void sub_5471(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_3532( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* P_RESTORE_WEAPON_ATTACHMENTS */ void sub_5906(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

/* F_GIVEPEDWEAPON */ void sub_6222(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_3532( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* F_CAN_GIVE_AMMO_TO_REGULAR_WEAPON_TYPE */ int sub_6794(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

/* START_NEW_LEVEL_CONTEXT */ void sub_6996(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_4055( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
     /* CLEAR_GG_CONTEXTS */ sub_7094( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

/* CLEAR_GG_CONTEXTS */ void sub_7094(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

/* P_HANDLE_EVENTS */ void sub_8409()
{
    switch (l_U83)
    {
        case 0:
        if (g_U1049 < 8)
        {
             /* P_OPENDOOR */ sub_8520( ref g_U1636, 1, 1, 0.20000000 );
        }
         /* P_REQUEST_ASSETS */ sub_8792();
         /* P_SETUP_STATIC_DATA */ sub_9839();
         /* P_INITIALIZE_SCRIPT_DATA */ sub_14765();
         /* P_RESET_MAX_CONTEXTUAL_DIALOGUE */ sub_15431();
        if (g_U1049 == 8)
        {
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
            {
                if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_657() )))
                {
                    SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_657(), 0, 0 );
                }
                 /* TELEPORTPED */ sub_15624(  /* PLAYER_PED_ID */ sub_619(), g_U1050[8], g_U1174[8] );
                SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U1216[8], 1065353216, 0 );
                SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U1258[8], 1065353216, 0 );
                if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )) == 0)
                {
                    FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_619(), 1 );
                }
                LOAD_SCENE( g_U1050[8] );
                if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )) == 0)
                {
                    FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_619(), 0 );
                }
            }
        }
        SET_WEATHER_TYPE_NOW_PERSIST( "Sunny" );
        FREEZE_TIME_OF_DAY( 12, 0 );
        l_U83 = 1;
        break;
        case 1:
        if ( /* F_HAS_ASSETS_LOADED */ sub_15852())
        {
            AUDIO_MUSIC_FORCE_TRACK( "FAVELA_ONE_SONG", "FAV_ONE_1_2", "", 0.00000000, 0, 0, -1082130432, 0 );
            if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
            }
             /* P_START_GAMEPLAY */ sub_16176();
             /* P_CREATE_ENEMIES */ sub_16759();
            if (l_U82 == 0)
            {
                if (( /* HAS_SAVEFILE_LOADED */ sub_20785( ref l_U46 )) == 0)
                {
                    if (g_U1048 == 8)
                    {
                         /* F_GIVEPEDWEAPON */ sub_6222(  /* PLAYER_PED_ID */ sub_619(), g_U1816, 200, 0, 1 );
                    }
                }
                l_U82 = 1;
            }
            l_U83 = 2;
        }
        break;
        case 2:
        if (g_U1049 == 8)
        {
            l_U83 = 3;
        }
        if ( /* F_TRIGGER_FIREWORKS */ sub_21057())
        {
            l_U83 = 3;
        }
        break;
        case 3:
        l_U83 = 4;
        break;
        case 4:
        if ((l_U46._fU0 == 0) || (g_U1049 < 8))
        {
            g_U1049 = 8;
             /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_21488( ref l_U46, g_U1049,  /* PLAYER_PED_ID */ sub_619(), g_U1050[8], g_U1174[8], g_U1216[8], g_U1258[8], 1 );
        }
        l_U83 = 5;
        break;
        case 5:
        if (l_U723 == 1)
        {
            if (l_U727 == 0)
            {
                if ( /* F_ISPLAYERINTRIGGERBOX */ sub_21095( l_U317 ))
                {
                    if (( /* F_GET_NUM_LIVING_FOUNTAIN_ENEMIES */ sub_26137()) <= 4)
                    {
                         /* P_CREATE_FOUNT_WAVE2 */ sub_26555();
                        l_U727 = 1;
                    }
                }
            }
            else if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_27195( ref l_U338, 0 ))
            {
                 /* P_ACTION_FOUNT_WAVE2 */ sub_27330();
            }
        }
        if ( /* F_ISPEDINTRIGGERBOXFIRSTTIME */ sub_27706( ref l_U380,  /* PLAYER_PED_ID */ sub_619(), 0 ))
        {
             /* P_INITIALIZE_FOUNT_IMAGEFX_01 */ sub_27835();
        }
         /* P_HANDLE_IMAGEFX */ sub_28403( ref l_U800 );
        if ( /* F_HANDLE_FIREWORKS_MID */ sub_29233())
        {
            if (l_U723 == 0)
            {
                 /* P_ACTIVATE_REST_OF_FIGHT */ sub_31041();
                l_U723 = 1;
            }
        }
        if (l_U723 == 0)
        {
            if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_27195( ref l_U359, 0 ))
            {
                 /* WRITESCRIPTLOG */ sub_378( "NS", "Acitvate enemies early", 0 );
                 /* P_ACTIVATE_REST_OF_FIGHT */ sub_31041();
                if (l_U724 == 0)
                {
                     /* P_ACTION_FIRST_LURE */ sub_30651();
                    l_U724 = 1;
                }
                l_U723 = 1;
            }
        }
        if (NOT l_U726)
        {
            if ((IS_PED_DEAD( l_U494 )) || (l_U770._fU16))
            {
                 /* WRITESCRIPTLOG */ sub_378( "SA", "ONESHOT", 0 );
                AUDIO_MUSIC_PLAY_ONESHOT();
                 /* WRITESCRIPTLOG */ sub_378( "SA", "FAV_ONE_3_4_5_6", 0 );
                AUDIO_MUSIC_FORCE_TRACK( "FAVELA_ONE_SONG", "FAV_ONE_3_4_5_6", "", 3.00000000, 2000, 6000, -1082130432, 0 );
                l_U726 = 1;
            }
        }
        if (l_U655 == 0)
        {
            if (( /* F_HANDLE_LOCK_GRENADER_TO_COVER */ sub_32766()) == 1)
            {
                l_U655 = 1;
            }
        }
        if (l_U717 == 0)
        {
            if ((( /* F_ISPLAYERINTRIGGERBOX */ sub_21095( l_U128 )) == 1) || (( /* ISTIMERDONE */ sub_1784( ref l_U737 )) == 1))
            {
                 /* P_SETUP_FOUNTAIN_BACKUP */ sub_32926();
                l_U717 = 1;
            }
        }
        if (NOT l_U756)
        {
            if (( /* F_GET_NUM_LIVING_ENEMIES_AUDIO_SWITCH */ sub_33773()) < 4)
            {
                 /* WRITESCRIPTLOG */ sub_378( "SA", "FAV_ONE_3_5", 0 );
                AUDIO_MUSIC_FORCE_TRACK( "FAVELA_ONE_SONG", "FAV_ONE_3_5", "", 0.00000000, 0, 12000, -1082130432, 0 );
                l_U756 = 1;
            }
        }
        if (NOT l_U755)
        {
            if (( /* F_GET_NUM_LIVING_ENEMIES_AUDIO_SWITCH */ sub_33773()) == 0)
            {
                 /* WRITESCRIPTLOG */ sub_378( "SA", "FAV_ONE_5", 0 );
                AUDIO_MUSIC_FORCE_TRACK( "FAVELA_ONE_SONG", "FAV_ONE_5", "", 0.00000000, 6000, 0, -1082130432, 0 );
                 /* WRITESCRIPTLOG */ sub_378( "SA", "FAV1_RAND_ONESHOT", 0 );
                AUDIO_MUSIC_PLAY_ONESHOT();
                 /* RESETTIMER */ sub_2352( ref l_U746 );
                 /* CREATETIMER */ sub_1505( ref l_U746, 12000, 1, 0 );
                 /* STARTTIMER */ sub_1653( ref l_U746 );
                l_U755 = 1;
            }
        }
        if ( /* ISTIMERDONE */ sub_1784( ref l_U746 ))
        {
             /* WRITESCRIPTLOG */ sub_378( "SA", "AUDIO_MUSIC_SUSPEND", 0 );
            AUDIO_MUSIC_SUSPEND( 6000 );
        }
        if (l_U720 == 1)
        {
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
            {
                if (NOT (IS_PED_DEAD( l_U640 )))
                {
                    if (( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_27195( ref l_U191, 0 )) || (HAS_PED_CLEAR_LOS_TO_PED( l_U640,  /* PLAYER_PED_ID */ sub_619() )))
                    {
                         /* P_ACTION_SURPRISE_SIDE */ sub_34526();
                        l_U720 = 0;
                    }
                }
            }
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_27195( ref l_U170, 0 ))
        {
             /* P_ACTION_SURPRISE */ sub_34690();
        }
        if (l_U718 == 1)
        {
            l_U662 =  /* F_ASSIGN_BULLET_CAM_TO_LAST_FOUNTAIN_ENEMY */ sub_34967();
            if (DOES_PED_EXIST( l_U662 ))
            {
                l_U718 = 0;
            }
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_27195( ref l_U254, 0 ))
        {
            g_U769 = 1;
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_27195( ref l_U296, 0 ))
        {
             /* P_RELEASE_GRENADER */ sub_35880();
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_27195( ref l_U275, 0 ))
        {
             /* P_ENABLE_COKE_PACK_PLANT_EMITTER */ sub_36030();
        }
        if (l_U722 == 1)
        {
            if (( /* F_GET_NUM_LIVING_FOUNTAIN_ENEMIES */ sub_26137()) == 0)
            {
                 /* P_ENABLE_COKE_PACK_PLANT_EMITTER */ sub_36030();
                l_U722 = 0;
            }
        }
         /* P_SET_COCAINE_DOORS */ sub_36199();
        if (l_U718 == 0)
        {
             /* P_HANDLE_MAX_CONTEXTUAL_DIALOGUE */ sub_36566( 1 );
        }
        break;
    }
    return;
}

/* P_OPENDOOR */ void sub_8520(int iParam0, int iParam1, int iParam2, unknown uParam3)
{
    float fVar6;

    if (( /* F_DOESDOOREXIST */ sub_8545( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_8629( iParam0 );
    }
    fVar6 = 0.00000000;
    if (iParam1 == 1)
    {
        fVar6 = uParam3;
    }
    else
    {
        fVar6 = -uParam3;
    }
    if (iParam2 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, fVar6 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    return;
}

/* F_DOESDOOREXIST */ int sub_8545(int iParam0)
{
    int iVar3;

    iVar3 = DOES_OBJECT_OF_TYPE_EXIST_AT_COORDS( iParam0->_fU4, 1.00000000, iParam0->_fU0 );
    if (iVar3 == 1)
    {
        return 1;
    }
    return 0;
}

/* P_PRINTDOORNOTEXIST */ void sub_8629(unknown uParam0)
{
    (uParam0^) = {(uParam0^)};
    return;
}

/* P_REQUEST_ASSETS */ void sub_8792()
{
     /* WRITESCRIPTLOG */ sub_378( "SP", "LOAD_ASSETS", "###" );
     /* LOADMODEL */ sub_8857( -1947223203, 0 );
     /* LOADMODEL */ sub_8857( 1396472798, 0 );
     /* LOADMODEL */ sub_8857( -502497534, 0 );
     /* LOADMODEL */ sub_8857( 508600758, 0 );
     /* LOADMODEL */ sub_8857( 416428258, 0 );
     /* LOADANIMDICT */ sub_9169( "LEVEL_S_FAV1_CP_07", 0, 1 );
     /* LOADISEQ */ sub_9341( 1669748883, 0 );
     /* LOADAUDIOBANK */ sub_9674( "SCRIPT_MISSION\S_FAV1_FIREWORK_LAUNCH", 0 );
    return;
}

/* LOADMODEL */ void sub_8857(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
         /* WRITE_STRING */ sub_3532( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADANIMDICT */ void sub_9169(unknown uParam0, unknown uParam1, int iParam2)
{
    REQUEST_ANIM_DICT( uParam0, uParam1 );
    "[doubled result, dropped if not asigned]";
    if (iParam2 == 1)
    {
        while ((HAS_ANIM_DICT_LOADED( uParam0, uParam1 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an animation dictionary to be loaded: {} ###", 1, 1537, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADISEQ */ void sub_9341(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to load does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 0)
    {
        ISEQ_REQUEST( uParam0 );
        ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
        if (iParam1 == 1)
        {
            while ((ISEQ_QUERY_STATE( uParam0, 1 )) == 1)
            {
                DISPLAYF( "[SP]### Waiting for interactive sequence to be loaded: {0} {1} ###", 2, 1281, ref uVar4, 513, uParam0 );
                WAIT( 0 );
            }
        }
    }
    return;
}

/* LOADAUDIOBANK */ void sub_9674(unknown uParam0, int iParam1)
{
    LOAD_SCRIPT_AUDIO_BANK( uParam0 );
    if (iParam1 == 1)
    {
        while ((IS_SCRIPT_AUDIO_BANK_LOADED( uParam0, 0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for script audio bank to be loaded: {} ###", 1, 1537, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* P_SETUP_STATIC_DATA */ void sub_9839()
{
     /* WRITESCRIPTLOG */ sub_378( "SP", "P_SETUP_STATIC_DATA", "###" );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_9946( ref l_U495, -65.14200000, -47.13100000, 23.46000000, -180.00000000, -485270208, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_9946( ref l_U523, -62.14000000, -58.73000000, 13.84000000, 177.50000000, -2036221668, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_9946( ref l_U537, -60.65000000, -52.14000000, 18.70000000, 178.76000000, -1265474502, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_9946( ref l_U551, -55.81320000, -55.58808000, 14.01503000, 178.75840000, 2078165819, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_9946( ref l_U571, -69.25000000, -63.75000000, 12.47000000, -81.30000000, 755150765, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_9946( ref l_U585, -48.82462000, -61.74516000, 13.83007000, 180.86850000, -1927319148, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_9946( ref l_U599, -55.98311000, -52.51805000, 13.83007000, 88.97557000, -739680065, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_9946( ref l_U613, -70.78747000, -47.65159000, 13.63540000, 180.04260000, 431714796, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_9946( ref l_U627, -68.42000000, -48.73000000, 13.77000000, -148.48000000, -612401391, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_9946( ref l_U642, -60.94000000, -58.57000000, 13.91000000, -165.50000000, -485270208, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_9946( ref l_U663[0], -56.32000000, -52.84000000, 18.70000000, -165.50000000, 2130003499, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_9946( ref l_U663[1], -60.96986000, -57.95084000, 13.86038000, -165.50000000, 1736289771, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_9946( ref l_U663[2], -69.37000000, -46.02000000, 13.79000000, -165.50000000, -321081485, 7, 3, 2, 0, 0 );
     /* P_CREATETRIGGERBOX */ sub_10662( ref l_U86, "TRIG_SETUP_FOUNTAIN", -49.17000000, -79.32000000, 13.78000000, 10.00000000, 7.00000000, 7.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_10662( ref l_U107, "TRIG_FOUNTAIN_ACTION", -60.14000000, -72.48000000, 12.00000000, 20.00000000, 20.00000000, 5.00000000, 0.00000000, 0.00000000, 90.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_10662( ref l_U128, "TRIG_FOUNTAIN_BACKUP", -55.71000000, -71.20000000, 11.33000000, 12.00000000, 4.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_10662( ref l_U149, "TRIG_SETUP_COCAINE", -60.20000000, -58.78000000, 12.00000000, 25.00000000, 2.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_10662( ref l_U170, "tbSurprise0", -61.89000000, -61.44000000, 12.00000000, 2.61000000, 2.78000000, 5.25000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_10662( ref l_U191, "tbSurprise1", -64.79000000, -66.83000000, 11.61000000, 2.61000000, 15.04000000, 5.25000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_10662( ref l_U233, "tbCleanupVig24b", -66.26000000, -45.91000000, 17.16000000, 4.00000000, 4.00000000, 10.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_10662( ref l_U254, "tbStartDrugDen", -59.63000000, -58.21000000, 12.00000000, 8.22000000, 2.78000000, 5.25000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_10662( ref l_U275, "tbEnableEmitter", -68.37000000, -52.16000000, 12.20000000, 4.00000000, 4.00000000, 10.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_10662( ref l_U296, "tbReleaseGrenader", -58.83000000, -65.16000000, 12.00000000, 26.37000000, 4.78000000, 5.25000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_10662( ref l_U359, "tbFailSafe", -57.70000000, -69.63000000, 11.33000000, 21.00000000, 4.00000000, 10.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_10662( ref l_U212, "tbFirstLureBurstFromDoor", -61.89000000, -61.24000000, 12.00000000, 2.61000000, 2.78000000, 5.25000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_10662( ref l_U317, "tbCreateFountWav2", -53.59000000, -77.66000000, 13.79000000, 9.07000000, 10.60000000, 5.00000000, 0.00000000, 0.00000000, 90.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_10662( ref l_U338, "tbActionFountWav2", -55.71000000, -71.20000000, 11.40000000, 12.00000000, 4.00000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_10662( ref l_U380, "tbFOUNT_IMAGEFX_01", -69.29990000, -40.80750000, 8.45000000, 7.00000000, 6.00000000, 8.00000000, 0.00000000, 0.00000000, -8.22000000, 1 );
     /* P_CREATETETHERBOX */ sub_11905( ref l_U401, "TETH_ROOF_ENEMY_01", -57.79000000, -56.40000000, 18.31000000, 6.80000000, 1.50000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_11905( ref l_U402, "TETH_ROOF_ENEMY_02", -63.86000000, -57.08000000, 17.01000000, 6.00000000, 6.00000000, 3.00000000, 21.83230000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_11905( ref l_U403, "TETH_FOUNTAIN_HOUSE_WINDOWS", -59.43000000, -58.33000000, 13.30000000, 6.37000000, 3.00000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_11905( ref l_U404, "TETH_FOUNTAIN_HOUSE_BACK", -60.23000000, -57.00000000, 13.03000000, 9.45000000, 12.60000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_11905( ref l_U405, "teOpenFountain", -56.78000000, -64.49000000, 11.47000000, 14.25000000, 8.68000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_11905( ref l_U406, "teSurprise", -69.24000000, -57.05000000, 12.00000000, 6.72000000, 8.19000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_11905( ref l_U407, "teRightSide", -52.39000000, -61.10000000, 13.73000000, 5.27000000, 4.22000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATEPOISTRUCTCOORD */ sub_12511( ref l_U408, 1, -61.72000000, -8.86000000, 14.85000000, -62.20000000, -8.86000000, 14.81000000, -62.20000000, -8.86000000, 14.81000000, 1069547520, 1077936128, 1, 1 );
     /* P_SET_INTERACTIVE_TEXT */ sub_13464( ref l_U408, 30, "POI_OPENDOOR" );
     /* P_ENABLE_POI */ sub_13674( ref l_U408, 0 );
     /* CREATETIMER */ sub_1505( ref l_U790, l_U799, 1, 0 );
     /* P_CREATEDOORSTRUCT */ sub_14542( ref l_U516, 1731037237, -69.04147000, -60.59292000, 13.83030000, 0.00000000, 0.00000000, 0.00000000 );
     /* P_SETDOORLOCKED */ sub_14611( ref l_U516, 1 );
    return;
}

/* P_CREATEPEDSTRUCTWITHNAME */ void sub_9946(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

/* P_CREATETRIGGERBOX */ void sub_10662(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    StrCopy( ref iParam0->_fU0, uParam1, 64 );
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = {uParam2};
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 1, iParam0 + 0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* P_CREATETETHERBOX */ void sub_11905(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 2, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* P_CREATEPOISTRUCTCOORD */ void sub_12511(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14)
{
     /* P_CREATEBLANKPOISTRUCT */ sub_12551( iParam0, uParam13 );
    iParam0->_fU4 = uParam1;
    iParam0->_fU100 = {uParam5};
    iParam0->_fU112 = uParam11;
    iParam0->_fU200 = {uParam8};
    iParam0->_fU212 = uParam12;
    iParam0->_fU320 = uParam14;
    iParam0->_fU20 = {uParam2};
     /* P_CREATEPOIGLINT */ sub_12944( iParam0 );
    return;
}

/* P_CREATEBLANKPOISTRUCT */ void sub_12551(int iParam0, unknown uParam1)
{
    iParam0->_fU0 = uParam1;
    iParam0->_fU4 = 0;
    iParam0->_fU8 = 0;
    iParam0->_fU12 = nil;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU52 = 1;
    iParam0->_fU56 = 1;
    iParam0->_fU60 = 0;
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = 0;
    iParam0->_fU76 = 0;
    iParam0->_fU80 = 0;
    iParam0->_fU84 = 0;
    iParam0->_fU100 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU112 = 0.00000000;
    iParam0->_fU88 = 0;
    iParam0->_fU92 = 0;
    iParam0->_fU96 = 0;
    iParam0->_fU200 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU212 = 0.00000000;
    iParam0->_fU300 = 0;
    iParam0->_fU304 = 1;
    iParam0->_fU308 = 0;
    iParam0->_fU324 = 1;
    iParam0->_fU328 = 0;
    iParam0->_fU340 = 0;
    iParam0->_fU336 = 0.20000000;
    return;
}

/* P_CREATEPOIGLINT */ void sub_12944(int iParam0)
{
    if (iParam0->_fU12 != nil)
    {
        if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
        {
            REMOVE_GLINT( iParam0->_fU12 );
        }
    }
    iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
     /* P_INITPOIGLINT */ sub_13042( iParam0 );
    return;
}

/* P_INITPOIGLINT */ void sub_13042(int iParam0)
{
    if (iParam0->_fU0 == 1)
    {
        if (iParam0->_fU320 == 1)
        {
            if ((iParam0->_fU8 > 0) AND (iParam0->_fU4 == 0))
            {
                 /* P_ENABLEPOIGLINT */ sub_13118( iParam0, 1 );
            }
            else if ((iParam0->_fU8 < 2) AND (iParam0->_fU4 == 1))
            {
                 /* P_ENABLEPOIGLINT */ sub_13118( iParam0, 1 );
            }
            else if ((iParam0->_fU8 == 1) AND (iParam0->_fU4 == 2))
            {
                 /* P_ENABLEPOIGLINT */ sub_13118( iParam0, 1 );
            }
            else
            {
                 /* P_ENABLEPOIGLINT */ sub_13118( iParam0, 0 );
            };;;
        }
        else
        {
             /* P_ENABLEPOIGLINT */ sub_13118( iParam0, 0 );
        }
    }
    else
    {
         /* P_ENABLEPOIGLINT */ sub_13118( iParam0, 0 );
    }
    return;
}

/* P_ENABLEPOIGLINT */ void sub_13118(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        if (iParam0->_fU12 != nil)
        {
            if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
            {
                ENABLE_GLINT( iParam0->_fU12, 1 );
            }
            else
            {
                iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
            }
        }
        else
        {
            iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
        }
    }
    else if (iParam0->_fU12 != nil)
    {
        if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
        {
            ENABLE_GLINT( iParam0->_fU12, 0 );
        }
    }
    return;
}

/* P_SET_INTERACTIVE_TEXT */ void sub_13464(int iParam0, unknown uParam1, unknown uParam2)
{
    StrCopy( ref iParam0->_fU32, uParam2, 16 );
    iParam0->_fU48 = uParam1;
     /* P_INITINTERACTIVETEXT */ sub_13520( iParam0 );
    return;
}

/* P_INITINTERACTIVETEXT */ void sub_13520(int iParam0)
{
    if ((iParam0->_fU8 == 2) AND (iParam0->_fU0 == 1))
    {
        if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
        {
            SET_INTERACTIONTEXT_BUTTON( iParam0->_fU48 );
            SET_INTERACTIONTEXT_TEXT( iParam0 + 32 );
            SET_INTERACTIONTEXT_VISIBLE( 1 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 1 );
            SET_INTERACTIONTEXT_AVAILABLE( 1 );
            iParam0->_fU56 = 1;
        }
    }
    return;
}

/* P_ENABLE_POI */ void sub_13674(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        if ((iParam0->_fU4 == 1) AND (iParam0->_fU320 == 1))
        {
             /* P_ENABLEPOIGLINT */ sub_13118( iParam0, 1 );
        }
        iParam0->_fU0 = 1;
    }
    else
    {
         /* P_ENABLEPOIGLINT */ sub_13118( iParam0, 0 );
         /* P_ENABLEPOIINTERACTIONTEXT */ sub_13760( iParam0, 0 );
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )) == 0)
        {
            TASK_CLEAR_LOOK_AT(  /* PLAYER_PED_ID */ sub_619() );
            if ((iParam0->_fU328 == 1) AND (iParam0->_fU324 == 1))
            {
                SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_619(), 0 );
                iParam0->_fU328 = 0;
            }
        }
        iParam0->_fU8 = 0;
        iParam0->_fU0 = 0;
    }
    return;
}

/* P_ENABLEPOIINTERACTIONTEXT */ void sub_13760(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        SET_INTERACTIONTEXT_TEXT( iParam0 + 32 );
        SET_INTERACTIONTEXT_BUTTON( iParam0->_fU48 );
        if ((iParam0->_fU72 == 0) AND ((iParam0->_fU64 == 1) AND (iParam0->_fU68 == 1)))
        {
            SET_INTERACTIONTEXT_VISIBLE( 0 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 0 );
            SET_INTERACTIONTEXT_AVAILABLE( 0 );
            iParam0->_fU56 = 0;
        }
        else
        {
            SET_INTERACTIONTEXT_VISIBLE( 1 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 1 );
            SET_INTERACTIONTEXT_AVAILABLE( 1 );
            iParam0->_fU56 = 1;
        }
         /* P_UPDATEINTERACTIONTEXTAVAILABLE */ sub_13940( iParam0 );
        if (iParam0->_fU332 == 1)
        {
            SET_INTERACTIONTEXT_PULSE( 1 );
            SET_INTERACTIONTEXT_PULSE_PERIOD( iParam0->_fU336 );
        }
    }
    else
    {
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        SET_INTERACTIONTEXT_BUTTON_VISIBLE( 0 );
    }
    return;
}

/* P_UPDATEINTERACTIONTEXTAVAILABLE */ void sub_13940(int iParam0)
{
    if (iParam0->_fU60 == 1)
    {
        SET_INTERACTIONTEXT_AVAILABLE( 0 );
        iParam0->_fU56 = 0;
    }
    else if (iParam0->_fU56 == 1)
    {
        if (( /* F_ISACTIONINGAVAILABLE */ sub_14036( iParam0 )) == 0)
        {
            SET_INTERACTIONTEXT_AVAILABLE( 0 );
            iParam0->_fU56 = 0;
        }
    }
    else if (( /* F_ISACTIONINGAVAILABLE */ sub_14036( iParam0 )) == 1)
    {
        SET_INTERACTIONTEXT_AVAILABLE( 1 );
        iParam0->_fU56 = 1;
    };;;
    return;
}

/* F_ISACTIONINGAVAILABLE */ int sub_14036(int iParam0)
{
    if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )) == 0) AND ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_657() )) == 0))
    {
        if (((IS_PED_RELOADING(  /* PLAYER_PED_ID */ sub_619() )) == 1) || (((IS_PED_GETTING_UP(  /* PLAYER_PED_ID */ sub_619() )) == 1) || (((IS_PED_PICKING_UP_PICKUP(  /* PLAYER_PED_ID */ sub_619() )) == 1) || (((IS_PED_IN_COVER(  /* PLAYER_PED_ID */ sub_619() )) == 1) || (((IS_PED_DUCKING(  /* PLAYER_PED_ID */ sub_619() )) == 1) || (IS_PLAYER_SHOOTDODGING() == 1))))))
        {
            return 0;
        }
        if (iParam0->_fU304 == 0)
        {
            if ((IS_MONOLOGUE_PLAYING() == 1) || ((IS_ANY_SPEECH_PLAYING(  /* PLAYER_PED_ID */ sub_619() )) == 1))
            {
                return 0;
            }
        }
        return 1;
    }
    return 0;
}

/* P_CREATEDOORSTRUCT */ void sub_14542(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    iParam0->_fU0 = uParam1;
    iParam0->_fU4 = {uParam2};
    iParam0->_fU16 = {uParam5};
    return;
}

/* P_SETDOORLOCKED */ void sub_14611(int iParam0, int iParam1)
{
    int iVar4;
    float fVar5;

    if (( /* F_DOESDOOREXIST */ sub_8545( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_8629( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
    }
    else
    {
        iVar4 = 0;
        fVar5 = 0.00000000;
        GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref iVar4, ref fVar5 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar5 );
    }
    return;
}

/* P_INITIALIZE_SCRIPT_DATA */ void sub_14765()
{
     /* WRITESCRIPTLOG */ sub_378( "SP", "INITIALIZE_SCRIPT_DATA", "###" );
    l_U758 =  /* CREATEPLACEMENT */ sub_14888( -4072149, -61.89000000, -52.29000000, 14.58000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0, 1119092736 );
    if (DOES_PLACEMENT_EXIST( l_U758 ))
    {
        ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U758, ref g_U1751 );
    }
    if (DOES_PLACEMENT_EXIST( l_U759 ))
    {
        ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U759, ref g_U1751 );
    }
    l_U655 = 0;
    l_U717 = 0;
     /* RESETTIMER */ sub_2352( ref l_U728 );
     /* RESETTIMER */ sub_2352( ref l_U737 );
     /* P_CLOSEDOOR */ sub_15164( ref g_U1657, 1 );
     /* P_SETDOORLOCKED */ sub_14611( ref g_U1657, 1 );
     /* P_CLOSEDOOR */ sub_15164( ref g_U1678, 1 );
     /* P_SETDOORLOCKED */ sub_14611( ref g_U1678, 1 );
    l_U718 = 1;
    l_U726 = 0;
    l_U719 = 0;
    l_U720 = 1;
    l_U755 = 0;
    l_U756 = 0;
    l_U721 = 1;
    l_U722 = 1;
    l_U723 = 0;
    l_U724 = 0;
    l_U725 = 0;
    g_U783 = 0;
    l_U727 = 0;
    l_U83 = 0;
    l_U85 = 1;
    return;
}

/* CREATEPLACEMENT */ void sub_14888(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, int iParam8, unknown uParam9, unknown uParam10)
{
    unknown Result;

    Result = CREATE_PLACEMENT_ROTATE( uParam0, uParam1, uParam4, uParam7, 0, uParam9, uParam10 );
    if (iParam8 == 1)
    {
        while ((DOES_PLACEMENT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for a placement to exist: {} ###", 1, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return Result;
}

/* P_CLOSEDOOR */ void sub_15164(int iParam0, int iParam1)
{
    if (( /* F_DOESDOOREXIST */ sub_8545( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_8629( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    return;
}

/* P_RESET_MAX_CONTEXTUAL_DIALOGUE */ void sub_15431()
{
     /* WRITESCRIPTLOG */ sub_378( "NS", "P_RESET_MAX_CONTEXTUAL_DIALOGUE", 0 );
    l_U44 = 0;
    l_U45 = 0;
    return;
}

/* TELEPORTPED */ void sub_15624(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

/* F_HAS_ASSETS_LOADED */ int sub_15852()
{
     /* WRITESCRIPTLOG */ sub_378( "NS", "F_HAS_ASSETS_LOADED()", 0 );
    if ((IS_SCRIPT_AUDIO_BANK_LOADED( "SCRIPT_MISSION\S_FAV1_FIREWORK_LAUNCH", 0 )) AND (((ISEQ_QUERY_STATE( 1669748883, 2 )) == 1) AND ((HAS_ANIM_DICT_LOADED( "LEVEL_S_FAV1_CP_07", 0 )) AND ((HAS_MODEL_LOADED( 416428258 )) AND ((HAS_MODEL_LOADED( 508600758 )) AND ((HAS_MODEL_LOADED( -502497534 )) AND ((HAS_MODEL_LOADED( 1396472798 )) AND (HAS_MODEL_LOADED( -1947223203 )))))))))
    {
        return 1;
    }
    return 0;
}

/* P_START_GAMEPLAY */ void sub_16176()
{
     /* WRITESCRIPTLOG */ sub_378( "SP", "P_START_GAMEPLAY", "###" );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
     /* P_OPENDOOR */ sub_8520( ref g_U1643, 1, 1, -0.20000000 );
    if (g_U1049 == 8)
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
        {
            CLEAR_PED_TASKS(  /* PLAYER_PED_ID */ sub_619() );
            PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_619(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
        }
    }
    if ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_657() )) == 0)
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_657(), 1, 0 );
    }
     /* P_SETDOORLOCKED */ sub_14611( ref g_U1664, 0 );
     /* P_OPENDOOR */ sub_8520( ref g_U1664, 0, 1, 0.15000000 );
     /* P_CLOSEDOOR */ sub_15164( ref g_U1671, 1 );
     /* P_CLOSEDOOR */ sub_15164( ref g_U1650, 1 );
     /* P_SETDOORMINMAXLIMIT */ sub_16466( ref g_U1650, -100.00000000, 0.00000000 );
    DOOR_SET_IS_AFFECTED_BY_BULLETS( DOOR_FIND_CLOSEST( g_U1650._fU0, g_U1650._fU4 ), 0 );
    AUDIO_MUSIC_REQUEST_ONESHOT( "FAVELA_1_ONESHOT_1", 0 );
    l_U719 = 1;
    return;
}

/* P_SETDOORMINMAXLIMIT */ void sub_16466(int iParam0, float fParam1, float fParam2)
{
    if (( /* F_DOESDOOREXIST */ sub_8545( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_8629( iParam0 );
    }
    if (fParam1 > fParam2)
    {
        PRINTSTRING( "[SP]### Error: Door fMinLimit greater than fMaxLimit (default min:-81.0 max:81.0) ###" );
        PRINTNL();
    }
    else
    {
        DOOR_FIND_CLOSEST_SET_LIMIT_MIN( iParam0->_fU0, iParam0->_fU4, fParam1 );
        DOOR_FIND_CLOSEST_SET_LIMIT_MAX( iParam0->_fU0, iParam0->_fU4, fParam2 );
    }
    return;
}

/* P_CREATE_ENEMIES */ void sub_16759()
{
     /* P_SETUP_FOUNTAIN_ENEMIES */ sub_16788();
     /* P_CREATE_SURPRISE */ sub_18946();
     /* P_CREATE_PROPANE */ sub_19272();
     /* P_CREATE_GRENADER */ sub_19729();
     /* P_CREATE_FIRST_LURE */ sub_20024();
     /* P_SETUP_HOUSEENEMY */ sub_20431();
    return;
}

/* P_SETUP_FOUNTAIN_ENEMIES */ void sub_16788()
{
    unknown uVar2;
    unknown uVar3;

     /* WRITESCRIPTLOG */ sub_378( "SP", "P_SETUP_FOUNTAIN_ENEMIES", "###" );
     /* CLEANPED */ sub_3078( l_U584 );
     /* P_QUICK_ADD_PED_TO_GROUP */ sub_16887( l_U584, ref l_U565 );
     /* P_ADDPEDCOMBATAREA */ sub_17657( ref l_U405, l_U584 );
    if (((IS_PED_DEAD( l_U584 )) == 0) AND ((DOES_PED_EXIST( l_U584 )) == 1))
    {
        SET_PED_AI_TEMPLATE( l_U584, ref g_U1791 );
        SET_PED_ACCURACY( l_U584, 31186664 );
        SET_PED_COMBAT_MOVEMENT( l_U584, 1 );
        SET_PED_NAME_DEBUG( l_U584, "piFountainEnemy01" );
        uVar2 =  /* F_GIVEPEDWEAPON */ sub_6222( l_U584, g_U1818, 25000, 0, 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U584, 1 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
        {
            REGISTER_TARGET( l_U584,  /* PLAYER_PED_ID */ sub_619() );
        }
    }
     /* CLEANPED */ sub_3078( l_U598 );
    l_U598 =  /* CREATEPED */ sub_17934( ref l_U585 );
     /* P_QUICK_ADD_PED_TO_GROUP */ sub_16887( l_U598, ref l_U565 );
     /* P_TETHERPED */ sub_18671( ref l_U407, l_U598, 1 );
    if (((IS_PED_DEAD( l_U598 )) == 0) AND ((DOES_PED_EXIST( l_U598 )) == 1))
    {
        SET_PED_NAME_DEBUG( l_U598, "piFountainEnemy02" );
        SET_PED_AI_TEMPLATE( l_U598, ref g_U1791 );
        SET_PED_ACCURACY( l_U598, 31186664 );
        SET_PED_COMBAT_MOVEMENT( l_U598, 1 );
        uVar3 =  /* F_GIVEPEDWEAPON */ sub_6222( l_U598, g_U1820, 25000, 0, 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U598, 1 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
        {
            REGISTER_TARGET( l_U598,  /* PLAYER_PED_ID */ sub_619() );
        }
    }
    return;
}

/* P_QUICK_ADD_PED_TO_GROUP */ void sub_16887(unknown uParam0, int iParam1)
{
    int iVar4;
    unknown uVar5;

    if ((DOES_GROUP_EXIST( iParam1->_fU0 )) == 0)
    {
         /* WRITE_STRING */ sub_3532( "[SP]### Warning!!! Group does not exist. Creating new group specified attributes. ###" );
        if (iParam1->_fU4 > 0)
        {
             /* P_SETUP_AI_GROUP */ sub_17057( iParam1, iParam1->_fU4, 0 );
        }
        else
        {
             /* P_SETUP_AI_GROUP */ sub_17057( iParam1, 1056964608, 0 );
        }
    }
    else
    {
        PRINTSTRING( "[MSWW]### P_QUICK_ADD_PED_TO_GROUP adding ped to group with ID: " );
        PRINTINT( iParam1->_fU0 );
        PRINTNL();
    }
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        GET_GROUP_SIZE( iParam1->_fU0, ref iVar4, ref uVar5 );
        if (iVar4 == 0)
        {
            SET_PED_AS_GROUP_LEADER( uParam0, iParam1->_fU0 );
        }
        else
        {
            SET_PED_AS_GROUP_MEMBER( uParam0, iParam1->_fU0 );
        }
        SET_PED_NEVER_LEAVES_GROUP( uParam0, 1 );
    }
    return;
}

/* P_SETUP_AI_GROUP */ void sub_17057(int iParam0, unknown uParam1, boolean bParam2)
{
    iParam0->_fU4 = uParam1;
    iParam0->_fU0 = CREATE_GROUP( 3, 1 );
    if (bParam2)
    {
        PRINTSTRING( "[MSWW]### P_SETUP_AI_GROUP TOLD TO WAIT FOR GROUP TO EXIST ###" );
        PRINTNL();
        while (NOT (DOES_GROUP_EXIST( iParam0->_fU0 )))
        {
            WAIT( 0 );
            PRINTSTRING( "[MSWW]### GROUP ###" );
            PRINTNL();
        }
        PRINTSTRING( "[MSWW]### P_SETUP_AI_GROUP created group with ID: " );
        PRINTINT( iParam0->_fU0 );
        PRINTNL();
    }
    SET_GROUP_RATIO_FIRING_AT_VISIBLE( iParam0->_fU0, iParam0->_fU4 );
    SET_GROUP_RATIO_FIRING_AT_INVISIBLE( iParam0->_fU0, iParam0->_fU4 );
    if (iParam0->_fU8)
    {
        SET_GROUP_FORMATION( iParam0->_fU0, iParam0->_fU12 );
        SET_GROUP_FORMATION_SPACING( iParam0->_fU0, iParam0->_fU16 );
        SET_GROUP_FORMATION_MAX_MOVE_SPEED( iParam0->_fU0, iParam0->_fU20 );
    }
    return;
}

/* P_ADDPEDCOMBATAREA */ void sub_17657(int iParam0, unknown uParam1)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_SUGGESTED_COMBAT_AREA_ADD_BOX( uParam1, iParam0->_fU0 );
    }
    return;
}

/* CREATEPED */ void sub_17934(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_8857( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
     /* SETPEDDEFAULTSTATS */ sub_18425( iParam0->_fU40 );
     /* SETPEDDEFAULTTEMPLATE */ sub_18526( iParam0->_fU40 );
    return iParam0->_fU40;
}

/* SETPEDDEFAULTSTATS */ void sub_18425(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

/* SETPEDDEFAULTTEMPLATE */ void sub_18526(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

/* P_TETHERPED */ void sub_18671(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_TETHERING_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_TETHERING_OPTION( uParam1, uParam2 );
    }
    return;
}

/* P_CREATE_SURPRISE */ void sub_18946()
{
     /* WRITESCRIPTLOG */ sub_378( "NS", "P_CREATE_SURPRISE()", 0 );
     /* CLEANPED */ sub_3078( l_U640 );
    l_U640 =  /* CREATEPED */ sub_17934( ref l_U627 );
     /* P_QUICK_ADD_PED_TO_GROUP */ sub_16887( l_U640, ref l_U565 );
     /* F_GIVEPEDWEAPON */ sub_6222( l_U640, g_U1819, 25000, 0, 0 );
    if (NOT (IS_PED_DEAD( l_U640 )))
    {
        SET_PED_AI_TEMPLATE( l_U640, ref g_U1791 );
        SET_PED_ACCURACY( l_U640, 31186664 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U640, 1 );
        SET_PED_ALERTNESS( l_U640, 4 );
        TASK_AIM_GUN_AT_COORD( l_U640, -65.89000000, -51.98000000, 14.35000000, -1, 1 );
        SET_PED_COMBAT_MOVEMENT( l_U640, 0 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
        {
            REGISTER_TARGET( l_U640,  /* PLAYER_PED_ID */ sub_619() );
        }
    }
     /* P_TETHERPED */ sub_18671( ref l_U406, l_U640, 1 );
    SET_PED_NAME_DEBUG( l_U640, "piSurprise" );
    return;
}

/* P_CREATE_PROPANE */ void sub_19272()
{
     /* WRITESCRIPTLOG */ sub_378( "ns", "P_CREATE_PROPANE()", 0 );
     /* CLEANOBJECT */ sub_3336( l_U708 );
    l_U708 =  /* CREATEOBJECT */ sub_19383( -502497534, -55.67000000, -60.61000000, 12.46000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U708 ))
    {
        CAMERA_CAN_TARGET_OBJECT( 1, l_U708 );
    }
    return;
}

/* CREATEOBJECT */ void sub_19383(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_8857( uParam0, 1 );
    }
    Result = CREATE_OBJECT( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an object to exist: {!f1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

/* P_CREATE_GRENADER */ void sub_19729()
{
     /* WRITESCRIPTLOG */ sub_378( "NS", "P_CREATE_GRENADER()", 0 );
     /* CLEANPED */ sub_3078( l_U641 );
    l_U641 =  /* CREATEPED */ sub_17934( ref l_U642 );
     /* F_GIVEPEDWEAPON */ sub_6222( l_U641, g_U1817, 25000, 0, 0 );
    if (NOT (IS_PED_DEAD( l_U641 )))
    {
        SET_PED_AI_TEMPLATE( l_U641, ref g_U1791 );
        SET_PED_ACCURACY( l_U641, 31186664 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U641, 1 );
        SET_PED_ALERTNESS( l_U641, 2 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
        {
            REGISTER_TARGET( l_U641,  /* PLAYER_PED_ID */ sub_619() );
        }
        FREEZE_PED_POSITION( l_U641, 1 );
    }
     /* P_TETHERPED */ sub_18671( ref l_U403, l_U641, 1 );
     /* P_QUICK_ADD_PED_TO_GROUP */ sub_16887( l_U641, ref l_U565 );
    SET_PED_NAME_DEBUG( l_U641, "piGrenader" );
    return;
}

/* P_CREATE_FIRST_LURE */ void sub_20024()
{
     /* WRITESCRIPTLOG */ sub_378( "NS", "P_CREATE_FIRST_LURE()", 0 );
     /* CLEANPED */ sub_3078( l_U536 );
    l_U536 =  /* CREATEPED */ sub_17934( ref l_U523 );
    if (NOT (IS_PED_DEAD( l_U536 )))
    {
        SET_PED_NAME_DEBUG( l_U536, "piFirstLure" );
        SET_PED_AI_TEMPLATE( l_U536, ref g_U1791 );
        SET_PED_ALERTNESS( l_U536, 4 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U536, 1 );
        SET_PED_ACCURACY( l_U536, 31186664 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
        {
            REGISTER_TARGET( l_U536,  /* PLAYER_PED_ID */ sub_619() );
        }
    }
     /* P_TETHERPED */ sub_18671( ref l_U405, l_U536, 1 );
     /* P_QUICK_ADD_PED_TO_GROUP */ sub_16887( l_U536, ref l_U565 );
     /* F_GIVEPEDWEAPON */ sub_6222( l_U536, g_U1820, 25000, 0, 0 );
     /* P_DEACTIVATEPED */ sub_20308( l_U536 );
    return;
}

/* P_DEACTIVATEPED */ void sub_20308(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 1 );
        SET_PED_VISIBLE( uParam0, 0 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 0 );
        FREEZE_PED_POSITION( uParam0, 1 );
        SET_PED_COLLISION( uParam0, 0 );
        SET_PED_PROOFS( uParam0, 1, 1, 1, 1, 1 );
    }
    return;
}

/* P_SETUP_HOUSEENEMY */ void sub_20431()
{
    unknown uVar2;

     /* WRITESCRIPTLOG */ sub_378( "SP", "P_SETUP_ROOF_ENEMY_02", "###" );
     /* CLEANPED */ sub_3078( l_U564 );
    l_U564 =  /* CREATEPED */ sub_17934( ref l_U551 );
    if (((IS_PED_DEAD( l_U564 )) == 0) AND ((DOES_PED_EXIST( l_U564 )) == 1))
    {
        SET_PED_NAME_DEBUG( l_U564, "piHouseEnemy" );
        SET_PED_AI_TEMPLATE( l_U564, ref g_U1791 );
        SET_PED_ACCURACY( l_U564, 31186664 );
        uVar2 =  /* F_GIVEPEDWEAPON */ sub_6222( l_U564, g_U1819, 25000, 0, 0 );
        SET_PED_ALERTNESS( l_U564, 4 );
        SET_PED_COMBAT_MOVEMENT( l_U564, 1 );
         /* P_QUICK_ADD_PED_TO_GROUP */ sub_16887( l_U564, ref l_U565 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
        {
            REGISTER_TARGET( l_U564,  /* PLAYER_PED_ID */ sub_619() );
        }
        SET_PED_ALERTNESS( l_U564, 4 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U564, 1 );
    }
     /* P_DEACTIVATEPED */ sub_20308( l_U564 );
    return;
}

/* HAS_SAVEFILE_LOADED */ int sub_20785(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_378( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U0 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U1 );
             /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_3774( uParam0,  /* PLAYER_PED_ID */ sub_619() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

/* F_TRIGGER_FIREWORKS */ int sub_21057()
{
    if ( /* F_ISPLAYERINTRIGGERBOX */ sub_21095( l_U107 ))
    {
        if (IS_SPHERE_VISIBLE( -62.38000000, -56.96000000, 20.55000000, 1.00000000, 1 ))
        {
            return 1;
        }
        if ( /* F_HAS_PLAYER_SHOT */ sub_21262())
        {
            return 1;
        }
    }
    return 0;
}

/* F_ISPLAYERINTRIGGERBOX */ void sub_21095(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20)
{
    return  /* F_ISPEDINTRIGGERBOX */ sub_21138(  /* PLAYER_PED_ID */ sub_619(), uParam0 );
}

/* F_ISPEDINTRIGGERBOX */ int sub_21138(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, ref uParam1._fU0 );
    }
    return 0;
}

/* F_HAS_PLAYER_SHOT */ int sub_21262()
{
    int iVar2;

    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
    {
        if (HAS_SHOT_BEEN_FIRED_IN_AREA( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS(  /* PLAYER_PED_ID */ sub_619() ), 2.00000000, 1, ref iVar2 ))
        {
            if (iVar2 == ( /* PLAYER_PED_ID */ sub_619()))
            {
                return 1;
            }
        }
    }
    return 0;
}

/* P_SAVE_PLAYER_DATA_CHECKPOINT */ void sub_21488(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

     /* WRITESCRIPTLOG */ sub_378( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
         /* WRITESCRIPTLOG */ sub_378( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
         /* START_NEW_LEVEL_CONTEXT */ sub_6996( iParam1 );
         /* CLOSE_OLD_LEVEL_CONTEXT */ sub_21779( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_22256( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_22256( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22516( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_22256( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22516( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22516( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_22256( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22516( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22516( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22516( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_22256( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22516( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22516( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22516( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22516( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
             /* P_PRINT_CHECKPOINT_DATA */ sub_24096( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U1, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
     /* WRITESCRIPTLOG */ sub_378( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

/* CLOSE_OLD_LEVEL_CONTEXT */ void sub_21779(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_4055( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
         /* WRITESCRIPTLOG */ sub_378( "TEH", "Ending context", 0 );
         /* WRITESCRIPTLOG */ sub_378( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

/* P_SAVE_WEAPON_ATTACHMENTS */ void sub_22256(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

/* F_WEAPONS_SAME_AMMO */ void sub_22516(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

/* P_PRINT_CHECKPOINT_DATA */ void sub_24096(int iParam0)
{
     /* WRITE_STRING */ sub_3532( "CHECKPOINT DATA" );
    PRINTSTRING( "---Position: " );
     /* WRITE_VECTOR */ sub_24184( iParam0->_fU4 );
    PRINTSTRING( "---Heading: " );
     /* WRITE_FLOAT */ sub_24261( iParam0->_fU16 );
    PRINTSTRING( "---fRelativeGameCamHeading: " );
     /* WRITE_FLOAT */ sub_24261( iParam0->_fU20 );
    PRINTSTRING( "---fRelativeGameCamPitch: " );
     /* WRITE_FLOAT */ sub_24261( iParam0->_fU24 );
    PRINTSTRING( "---nHealth: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU28 );
    PRINTSTRING( "---wtRightHolster: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU56 );
    PRINTSTRING( "---wtLeftHolster: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU60 );
    PRINTSTRING( "---wtRifleHolster: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU64 );
    PRINTSTRING( "---wtRightHand: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU68 );
    PRINTSTRING( "---wtLeftHand: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU72 );
    PRINTSTRING( "---nWeaponRightHolsterAmmo: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU76 );
    PRINTSTRING( "---nWeaponLeftHolsterAmmo: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU80 );
    PRINTSTRING( "---nWeaponRifleHolsterAmmo: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU84 );
    PRINTSTRING( "---nWeaponRightHandAmmo: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU88 );
    PRINTSTRING( "---nWeaponLeftHandAmmo: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU92 );
    PRINTSTRING( "---fAdrenaline: " );
     /* WRITE_FLOAT */ sub_24261( iParam0->_fU32 );
    PRINTSTRING( "---nPayneKillers: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU36 );
    PRINTSTRING( "---nHour: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU40 );
    PRINTSTRING( "---nMinute: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU44 );
    PRINTSTRING( "---fSweatAmount: " );
     /* WRITE_FLOAT */ sub_24261( iParam0->_fU136 );
    PRINTSTRING( "---bTimeFrozen: " );
     /* WRITE_BOOL */ sub_25131( iParam0->_fU140 );
    PRINTSTRING( "---checkpointIndex: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU52 );
     /* WRITE_STRING */ sub_3532( "---nRightHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU96 );
     /* WRITE_STRING */ sub_3532( "---nRightHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU100 );
     /* WRITE_STRING */ sub_3532( "---nLeftHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU104 );
     /* WRITE_STRING */ sub_3532( "---nLeftHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU108 );
     /* WRITE_STRING */ sub_3532( "---nRifleHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU112 );
     /* WRITE_STRING */ sub_3532( "---nRifleHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU116 );
     /* WRITE_STRING */ sub_3532( "---nRightHandAttachmentEnabled: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU120 );
     /* WRITE_STRING */ sub_3532( "---nRightHandAttachmentToggled: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU124 );
     /* WRITE_STRING */ sub_3532( "---nLeftHandAttachmentEnabled: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU128 );
     /* WRITE_STRING */ sub_3532( "---nLeftHandAttachmentToggled: " );
     /* WRITE_INT */ sub_24430( iParam0->_fU132 );
    PRINTSTRING( "[CHECKPOINT DATA SIZE]: " );
     /* WRITE_INT */ sub_24430( l_U1 );
    PRINTSTRING( "[CHECKPOINT DATA REF SIZE]: " );
     /* WRITE_INT */ sub_24430( 144 );
    return;
}

/* WRITE_VECTOR */ void sub_24184(unknown uParam0, unknown uParam1, unknown uParam2)
{
    PRINTVECTOR( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_FLOAT */ void sub_24261(unknown uParam0)
{
    PRINTFLOAT( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_INT */ void sub_24430(unknown uParam0)
{
    PRINTINT( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_BOOL */ void sub_25131(boolean bParam0)
{
    if (bParam0)
    {
        PRINTSTRING( "TRUE" );
    }
    else
    {
        PRINTSTRING( "FALSE" );
    }
    PRINTNL();
    return;
}

/* F_GET_NUM_LIVING_FOUNTAIN_ENEMIES */ void sub_26137()
{
    int Result;
    int I;

    Result = 0;
    if (((IS_PED_DEAD( l_U640 )) == 0) AND ((DOES_PED_EXIST( l_U640 )) == 1))
    {
        Result++;
    }
    if (((IS_PED_DEAD( l_U612 )) == 0) AND ((DOES_PED_EXIST( l_U612 )) == 1))
    {
        Result++;
    }
    if (((IS_PED_DEAD( l_U584 )) == 0) AND ((DOES_PED_EXIST( l_U584 )) == 1))
    {
        Result++;
    }
    if (((IS_PED_DEAD( l_U598 )) == 0) AND ((DOES_PED_EXIST( l_U598 )) == 1))
    {
        Result++;
    }
    if (((IS_PED_DEAD( l_U550 )) == 0) AND ((DOES_PED_EXIST( l_U550 )) == 1))
    {
        Result++;
    }
    if (((IS_PED_DEAD( l_U564 )) == 0) AND ((DOES_PED_EXIST( l_U564 )) == 1))
    {
        Result++;
    }
    if (((IS_PED_DEAD( l_U641 )) == 0) AND ((DOES_PED_EXIST( l_U641 )) == 1))
    {
        Result++;
    }
    for ( I = 0; I < 3; I++ )
    {
        if (NOT (IS_PED_DEAD( l_U703[I] )))
        {
            if (IS_PED_VISIBLE( l_U703[I] ))
            {
                Result++;
            }
        }
    }
    return Result;
}

/* P_CREATE_FOUNT_WAVE2 */ void sub_26555()
{
    int I;

     /* WRITESCRIPTLOG */ sub_378( "NS", "P_CREATE_FOUNT_WAVE2()", 0 );
     /* CLEANPEDARRAY */ sub_3257( ref l_U703 );
    for ( I = 0; I < 3; I++ )
    {
        l_U703[I] =  /* CREATEPED */ sub_17934( ref l_U663[I] );
        if (NOT (IS_PED_DEAD( l_U703[I] )))
        {
            SET_PED_AI_TEMPLATE( l_U703[I], ref g_U1791 );
            SET_PED_ACCURACY( l_U703[I], 31186664 );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U703[I], 1 );
            SET_PED_ALERTNESS( l_U703[I], 2 );
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
            {
                REGISTER_TARGET( l_U703[I],  /* PLAYER_PED_ID */ sub_619() );
            }
        }
    }
     /* P_TETHERPED */ sub_18671( ref l_U401, l_U703[0], 1 );
     /* P_TETHERPED */ sub_18671( ref l_U405, l_U703[1], 3 );
     /* P_TETHERPED */ sub_18671( ref l_U405, l_U703[2], 1 );
     /* F_GIVEPEDWEAPON */ sub_6222( l_U703[0], g_U1819, 25000, 0, 0 );
     /* F_GIVEPEDWEAPON */ sub_6222( l_U703[1], g_U1820, 25000, 0, 0 );
     /* F_GIVEPEDWEAPON */ sub_6222( l_U703[2], g_U1819, 25000, 0, 0 );
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_26959( ref l_U703, "piFountWave2" );
     /* P_DEACTIVATEPEDARRAY */ sub_27093( ref l_U703 );
    return;
}

/* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ void sub_26959(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

/* P_DEACTIVATEPEDARRAY */ void sub_27093(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
         /* P_DEACTIVATEPED */ sub_20308( (uParam0^)[I] );
    }
    return;
}

/* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ void sub_27195(int iParam0, unknown uParam1)
{
    if (iParam0->_fU64 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU64 =  /* F_ISPEDINTRIGGERBOX */ sub_21138(  /* PLAYER_PED_ID */ sub_619(), (iParam0^) );
        if ((iParam0->_fU64) AND (uParam1))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU64;
}

/* P_ACTION_FOUNT_WAVE2 */ void sub_27330()
{
    int I;

     /* WRITESCRIPTLOG */ sub_378( "NS", "P_ACTION_FOUNT_WAVE2()", 0 );
     /* P_ACTIVATEPEDARRAY */ sub_27403( ref l_U703 );
    for ( I = 0; I < 3; I++ )
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
        {
            if (NOT (IS_PED_DEAD( l_U703[I] )))
            {
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U703[I], 0 );
                TASK_COMBAT_PED( l_U703[I],  /* PLAYER_PED_ID */ sub_619() );
            }
        }
    }
    return;
}

/* P_ACTIVATEPEDARRAY */ void sub_27403(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
         /* P_ACTIVATEPED */ sub_27455( (uParam0^)[I] );
    }
    return;
}

/* P_ACTIVATEPED */ void sub_27455(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 0 );
        SET_PED_VISIBLE( uParam0, 1 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 1 );
        FREEZE_PED_POSITION( uParam0, 0 );
        SET_PED_COLLISION( uParam0, 1 );
        SET_PED_PROOFS( uParam0, 0, 0, 0, 0, 0 );
    }
    return;
}

/* F_ISPEDINTRIGGERBOXFIRSTTIME */ void sub_27706(int iParam0, unknown uParam1, unknown uParam2)
{
    if (iParam0->_fU68 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU68 =  /* F_ISPEDINTRIGGERBOX */ sub_21138( uParam1, (iParam0^) );
        if ((iParam0->_fU68) AND (uParam2))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU68;
}

/* P_INITIALIZE_FOUNT_IMAGEFX_01 */ void sub_27835()
{
     /* WRITESCRIPTLOG */ sub_378( "CO", "P_INITIALIZE_FOUNT_IMAGEFX_01", 0 );
     /* P_INIT_IMAGEFX */ sub_27924( ref l_U800 );
    l_U800[0]._fU4 = "FLICKER_VIBRATE_INTERLACE_01";
    l_U800[0]._fU8 = 4;
    l_U800[0]._fU32 = 0;
    l_U800[1]._fU4 = "FLICKER_VIBRATE_INTERLACE_01";
    l_U800[1]._fU12 = 50;
    l_U800[1]._fU8 = 4;
    l_U800[1]._fU32 = 0;
    l_U800[2]._fU4 = "FLICKER_VIBRATE_INTERLACE_01";
    l_U800[2]._fU12 = 100;
    l_U800[2]._fU8 = 4;
    l_U800[2]._fU32 = 0;
    l_U800[3]._fU4 = "FLICKER_VIBRATE_INTERLACE_01";
    l_U800[3]._fU12 = 150;
    l_U800[3]._fU8 = 4;
    l_U800[3]._fU32 = 0;
    l_U31 = 0;
    return;
}

/* P_INIT_IMAGEFX */ void sub_27924(unknown uParam0)
{
    int I;

     /* WRITESCRIPTLOG */ sub_378( "CO", "P_INIT_IMAGEFX", 0 );
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        (uParam0^)[I]._fU4 = "";
        (uParam0^)[I]._fU12 = 0;
        (uParam0^)[I]._fU16 = 0;
        (uParam0^)[I]._fU20 = 0;
        (uParam0^)[I]._fU24 = 0;
        (uParam0^)[I]._fU28 = 0;
        (uParam0^)[I]._fU32 = 1;
    }
    return;
}

/* P_HANDLE_IMAGEFX */ void sub_28403(unknown uParam0)
{
    int I;
    int J;

    switch (l_U31)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_378( "CO", "P_HANDLE_IMAGEFX", 0 );
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (uParam0^)[I]._fU32)
            {
                 /* CREATETIMER */ sub_1505( ref (uParam0^)[I]._fU36, (uParam0^)[I]._fU12, 1, 0 );
                 /* STARTTIMER */ sub_1653( ref (uParam0^)[I]._fU36 );
                if ((uParam0^)[I]._fU20 > 0)
                {
                    I += (uParam0^)[I]._fU20;
                }
            }
        }
        l_U31 = 1;
        break;
        case 1:
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if ( /* ISTIMERDONE */ sub_1784( ref (uParam0^)[I]._fU36 ))
            {
                (uParam0^)[I]._fU0 = PLAY_IMAGEFX( (uParam0^)[I]._fU4, (uParam0^)[I]._fU8, (uParam0^)[I]._fU28 );
                if ((uParam0^)[I]._fU16 > 0)
                {
                     /* CREATETIMER */ sub_1505( ref (uParam0^)[I]._fU72, (uParam0^)[I]._fU16, 1, 0 );
                     /* STARTTIMER */ sub_1653( ref (uParam0^)[I]._fU72 );
                }
                if ((uParam0^)[I]._fU20 > 0)
                {
                    for ( J = I + 1; J <= (I + (uParam0^)[I]._fU20); J++ )
                    {
                        PRINTSTRING( "******* [CO] ***** STARTING CHILD FOR index : " );
                        PRINTINT( J );
                        PRINTNL();
                        (uParam0^)[J]._fU0 = PLAY_IMAGEFX( (uParam0^)[J]._fU4, (uParam0^)[J]._fU8, (uParam0^)[I]._fU28 );
                        if ((uParam0^)[J]._fU16 > 0)
                        {
                             /* CREATETIMER */ sub_1505( ref (uParam0^)[J]._fU72, (uParam0^)[J]._fU16, 1, 0 );
                             /* STARTTIMER */ sub_1653( ref (uParam0^)[J]._fU72 );
                        }
                    }
                    I += (uParam0^)[I]._fU20;
                }
            }
            if ( /* ISTIMERDONE */ sub_1784( ref (uParam0^)[I]._fU72 ))
            {
                STOP_IMAGEFX( (uParam0^)[I]._fU0, (uParam0^)[I]._fU24 );
                (uParam0^)[I]._fU32 = 1;
                if ((uParam0^)[I]._fU20 > 0)
                {
                    if ((uParam0^)[I]._fU20 == 1)
                    {
                        STOP_IMAGEFX( (uParam0^)[I + 1]._fU0, (uParam0^)[I + 1]._fU24 );
                        (uParam0^)[I + 1]._fU32 = 1;
                    }
                    else
                    {
                        for ( J = I + 1; J <= (uParam0^)[I]._fU20; J++ )
                        {
                            STOP_IMAGEFX( (uParam0^)[J]._fU0, (uParam0^)[J]._fU24 );
                            (uParam0^)[J]._fU32 = 1;
                        }
                    }
                    I += (uParam0^)[I]._fU20;
                }
            }
        }
        break;
    }
    return;
}

/* F_HANDLE_FIREWORKS_MID */ int sub_29233()
{
    switch (l_U85)
    {
        case 1:
         /* P_CREATE_VIG_24B_FOUNT */ sub_29320();
        if (NOT (IS_PED_DEAD( l_U494 )))
        {
            ISEQ_REGISTER_ENTITY( 1669748883, "roof", l_U494, 0 );
            ISEQ_START( 1669748883 );
        }
         /* CREATETIMER */ sub_1505( ref l_U920, 50, 1, 0 );
         /* STARTTIMER */ sub_1653( ref l_U920 );
        l_U85 = 2;
        break;
        case 2:
        if ( /* ISTIMERDONE */ sub_1784( ref l_U920 ))
        {
             /* P_ACTION_VIG_24B_FOUNT */ sub_30017();
            if (NOT (IS_PED_DEAD( l_U494 )))
            {
                SET_PED_VISIBLE( l_U494, 1 );
            }
            g_U782 = 0;
             /* CREATETIMER */ sub_1505( ref l_U911, l_U910, 1, 0 );
             /* STARTTIMER */ sub_1653( ref l_U911 );
            if (g_U1049 == 8)
            {
                if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_657() )))
                {
                    SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_657(), 1, 0 );
                }
            }
            DO_SCREEN_FADE_IN( 0 );
            l_U85 = 3;
        }
        break;
        case 3:
        if ((ISEQ_QUERY_STATE( 1669748883, 3 )) == 1)
        {
            l_U85 = 4;
        }
        break;
        case 4:
        if (( /* ISTIMERDONE */ sub_1784( ref l_U770 )) == 1)
        {
             /* P_FIRE_FIREWORKS */ sub_30396();
            if (l_U724 == 0)
            {
                 /* P_ACTION_FIRST_LURE */ sub_30651();
                l_U724 = 1;
            }
        }
        if ( /* ISTIMERDONE */ sub_1784( ref l_U911 ))
        {
            RENDER_SCRIPT_CAMS( 0, 1, 2250, 0 );
            DESTROY_ALL_CAMS();
        }
        if ((ISEQ_QUERY_STATE( 1669748883, 3 )) == 0)
        {
            if (NOT (IS_PED_DEAD( l_U494 )))
            {
                ISEQ_UNREGISTER_ENTITY( 1669748883, "roof" );
                ISEQ_TERMINATE( 1669748883 );
                 /* CLEANPED */ sub_3078( l_U494 );
                 /* RESETTIMER */ sub_2352( ref l_U911 );
                 /* RESETTIMER */ sub_2352( ref l_U770 );
            }
            DISPLAY_HUD( 1 );
            if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_657() )))
            {
                SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_657(), 1, 0 );
            }
            l_U85 = 0;
            return 1;
        }
        break;
        case 0: break;
    }
    return 0;
}

/* P_CREATE_VIG_24B_FOUNT */ void sub_29320()
{
    vector vVar2;

     /* WRITESCRIPTLOG */ sub_378( "NS", "P_CREATE_VIG_24B_FOUNT()", 0 );
     /* CLEANPED */ sub_3078( l_U494 );
    l_U494 =  /* CREATEPED */ sub_17934( ref l_U495 );
    if (((IS_PED_DEAD( l_U494 )) == 0) AND ((DOES_PED_EXIST( l_U494 )) == 1))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U494, 1 );
        SET_PED_VISIBLE( l_U494, 0 );
        SET_PED_AS_ONE_SHOT_KILL( l_U494, 1 );
        SET_PED_ACCURACY( l_U494, 31186664 );
        SET_BULLET_CAM_PREF( l_U494, "ALL_LMS_01", "ALL_LMS_03", "ALL_LMS_05", "", 0, 0, 0, 0, 0, 0, 0, 0 );
    }
    vVar2 = {2.70489700, -41.73405000, 17.51681000};
     /* CLEANOBJECT */ sub_3336( l_U508 );
    l_U508 =  /* CREATEOBJECT */ sub_19383( 508600758, vVar2, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( l_U508 )) == 1)
    {
        if (((IS_PED_DEAD( l_U494 )) == 0) AND ((DOES_PED_EXIST( l_U494 )) == 1))
        {
            ATTACH_OBJECT_TO_PED( l_U508, l_U494, 25310, l_U510, l_U513, 0 );
        }
    }
     /* CLEANOBJECT */ sub_3336( l_U509 );
    l_U509 =  /* CREATEOBJECT */ sub_19383( 416428258, vVar2, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( l_U509 )) == 1)
    {
        if (((IS_PED_DEAD( l_U494 )) == 0) AND ((DOES_PED_EXIST( l_U494 )) == 1))
        {
            ATTACH_OBJECT_TO_PED( l_U509, l_U494, 25310, l_U510, l_U513, 0 );
            SET_OBJECT_VISIBLE( l_U509, 0 );
        }
    }
    SET_PED_NAME_DEBUG( l_U494, "piVig24B_fountain_Enemy__" );
    return;
}

/* P_ACTION_VIG_24B_FOUNT */ void sub_30017()
{
     /* WRITESCRIPTLOG */ sub_378( "NS", "P_ACTION_VIG_24B_FOUNT()", 0 );
    if (NOT (IS_PED_DEAD( l_U494 )))
    {
        PED_SET_ACTION_INTENTION( l_U494, 47, 1000, 0.00000000, 0.00000000, 0.00000000 );
    }
     /* CREATETIMER */ sub_1505( ref l_U760, l_U769, 1, 0 );
     /* STARTTIMER */ sub_1653( ref l_U760 );
     /* CREATETIMER */ sub_1505( ref l_U770, l_U779, 1, 0 );
     /* STARTTIMER */ sub_1653( ref l_U770 );
     /* CREATETIMER */ sub_1505( ref l_U780, l_U789, 1, 0 );
     /* STARTTIMER */ sub_1653( ref l_U780 );
    return;
}

/* P_FIRE_FIREWORKS */ void sub_30396()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    vector vVar5;
    vector vVar8;

     /* WRITESCRIPTLOG */ sub_378( "SP", "Shooting Fireworks...", 0 );
    if ((IS_PED_DEAD( l_U494 )) == 0)
    {
        if ((DOES_OBJECT_EXIST( l_U509 )) == 1)
        {
            uVar2 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( l_U509 )};
            vVar5 = {0.00000000, 0.00000000, 0.30000000};
            vVar8 = {0.00000000, 0.00000000, 0.00000000};
            PLAY_SOUND_FROM_OBJECT( -1, "S_FAV1_FIREWORK_LAUNCH", l_U509 );
            START_PARTICLE_FX_NON_LOOPED_ON_OBJECT( "Firework_Launch", l_U509, vVar5, vVar8, 1.00000000 );
        }
    }
    return;
}

/* P_ACTION_FIRST_LURE */ void sub_30651()
{
     /* WRITESCRIPTLOG */ sub_378( "NS", "P_ACTION_FIRST_LURE()", 0 );
     /* P_ACTIVATEPED */ sub_27455( l_U536 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U536, 0 );
        TASK_ATTACK_MOVE_WHILE_AIMING_AT_PED( l_U536, -55.82000000, -64.41000000, 12.22000000,  /* PLAYER_PED_ID */ sub_619(), 1, 1092616192, 1101004800, -1082130432, 3 );
    }
    return;
}

/* P_ACTIVATE_REST_OF_FIGHT */ void sub_31041()
{
     /* P_ACTIVATE_FOUNTAIN_ENEMIES */ sub_31078();
     /* P_ACTION_GRENADER */ sub_31653();
     /* P_HOUSE_ENEMY_ACTION */ sub_31820();
    AUDIO_MUSIC_REQUEST_ONESHOT( "FAV1_RAND_ONESHOT", 0 );
     /* CREATETIMER */ sub_1505( ref l_U728, 5000, 1, 0 );
     /* STARTTIMER */ sub_1653( ref l_U728 );
     /* CREATETIMER */ sub_1505( ref l_U737, 10000, 1, 0 );
     /* STARTTIMER */ sub_1653( ref l_U737 );
     /* P_SETUP_ROOF_ENEMY_01 */ sub_32029();
     /* P_SETDOORMINMAXLIMIT */ sub_16466( ref g_U1650, -100.00000000, 100.00000000 );
    return;
}

/* P_ACTIVATE_FOUNTAIN_ENEMIES */ void sub_31078()
{
    vector vVar2;
    unknown uVar5;
    vector vVar6;
    unknown uVar9;

     /* WRITESCRIPTLOG */ sub_378( "SP", "P_ACTIVATE_FOUNTAIN_ENEMIES", "###" );
    vVar2 = {-67.17210000, -62.39354000, 12.37743000};
    if (((IS_PED_DEAD( l_U584 )) == 0) AND ((DOES_PED_EXIST( l_U584 )) == 1))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U584, 0 );
        OPEN_SEQUENCE_TASK( ref uVar5 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )) == 0)
        {
            TASK_ATTACK_MOVE( 0, vVar2, 1092616192, 1101004800, -1082130432, 3 );
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_619() );
        }
        CLOSE_SEQUENCE_TASK( uVar5 );
        TASK_PERFORM_SEQUENCE( l_U584, uVar5 );
        CLEAR_SEQUENCE_TASK( uVar5 );
    }
    vVar6 = {-56.66655000, -61.69790000, 12.41864000};
    if (((IS_PED_DEAD( l_U598 )) == 0) AND ((DOES_PED_EXIST( l_U598 )) == 1))
    {
        OPEN_SEQUENCE_TASK( ref uVar9 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )) == 0)
        {
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_619() );
        }
        CLOSE_SEQUENCE_TASK( uVar9 );
        TASK_PERFORM_SEQUENCE( l_U598, uVar9 );
        CLEAR_SEQUENCE_TASK( uVar9 );
    }
    if (IS_SCREEN_FADED_OUT())
    {
         /* P_FADE_IN_AND_WAIT */ sub_31491( 0 );
    }
    return;
}

/* P_FADE_IN_AND_WAIT */ void sub_31491(unknown uParam0)
{
    if ((IS_SCREEN_FADING_IN() == 0) AND (IS_SCREEN_FADED_IN() == 0))
    {
        DO_SCREEN_FADE_IN( uParam0 );
        while (IS_SCREEN_FADED_IN() == 0)
        {
            DISPLAYF( "[SP]### Waiting for screen to fade in... ###", 0 );
            WAIT( 0 );
        }
    }
    return;
}

/* P_ACTION_GRENADER */ void sub_31653()
{
     /* WRITESCRIPTLOG */ sub_378( "NS", "P_ACTION_GRENADER()", 0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
    {
        if (NOT (IS_PED_DEAD( l_U641 )))
        {
            FREEZE_PED_POSITION( l_U641, 0 );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U641, 0 );
            TASK_COMBAT_MOVE_TO_COVER_COORDS( l_U641, -58.60000000, -59.09000000, 13.90000000,  /* PLAYER_PED_ID */ sub_619() );
        }
    }
    return;
}

/* P_HOUSE_ENEMY_ACTION */ void sub_31820()
{
     /* P_ACTIVATEPED */ sub_27455( l_U564 );
    if (((IS_PED_DEAD( l_U564 )) == 0) AND ((DOES_PED_EXIST( l_U564 )) == 1))
    {
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )) == 0)
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U564, 0 );
            TASK_COMBAT_PED( l_U564,  /* PLAYER_PED_ID */ sub_619() );
        }
    }
    return;
}

/* P_SETUP_ROOF_ENEMY_01 */ void sub_32029()
{
    unknown uVar2;

     /* WRITESCRIPTLOG */ sub_378( "SP", "P_SETUP_ROOF_ENEMY_01", "###" );
     /* CLEANPED */ sub_3078( l_U550 );
    l_U550 =  /* CREATEPED */ sub_17934( ref l_U537 );
     /* P_TETHERPED */ sub_18671( ref l_U401, l_U550, 1 );
    if (((IS_PED_DEAD( l_U550 )) == 0) AND ((DOES_PED_EXIST( l_U550 )) == 1))
    {
        SET_PED_NAME_DEBUG( l_U550, "piRoofEnemy01" );
        uVar2 =  /* F_GIVEPEDWEAPON */ sub_6222( l_U550, g_U1819, 25000, 0, 0 );
        SET_PED_AI_TEMPLATE( l_U550, ref g_U1791 );
        SET_PED_ACCURACY( l_U550, 31186664 );
        SET_PED_COMBAT_MOVEMENT( l_U550, 1 );
         /* F_GIVEPEDWEAPONTOHOLSTER */ sub_5471( l_U550, g_U1817, 1, 25000, 0 );
         /* P_QUICK_ADD_PED_TO_GROUP */ sub_16887( l_U550, ref l_U565 );
        SET_BULLET_CAM_PREF( l_U550, "ALL_LMS_01", "ALL_LMS_03", "ALL_LMS_05", "", 0, 0, 0, 0, 0, 0, 0, 0 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
        {
            REGISTER_TARGET( l_U550,  /* PLAYER_PED_ID */ sub_619() );
        }
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U550, 1 );
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )) == 0)
        {
            TASK_COMBAT_PED( l_U550,  /* PLAYER_PED_ID */ sub_619() );
        }
    }
    return;
}

/* F_HANDLE_LOCK_GRENADER_TO_COVER */ int sub_32766()
{
    if (NOT (IS_PED_DEAD( l_U641 )))
    {
        if (IS_PED_IN_COVER( l_U641 ))
        {
            SET_PED_FLAG_LOCK_TO_COVER( l_U641, 1 );
            return 1;
        }
    }
    return 0;
}

/* P_SETUP_FOUNTAIN_BACKUP */ void sub_32926()
{
    vector vVar2;
    unknown uVar5;
    unknown uVar6;
    vector vVar7;
    unknown uVar10;
    unknown uVar11;

     /* WRITESCRIPTLOG */ sub_378( "SP", "P_SETUP_FOUNTAIN_BACKUP", "###" );
    vVar2 = {-61.43000000, -61.98000000, 13.81000000};
     /* CLEANPED */ sub_3078( l_U612 );
    l_U612 =  /* CREATEPED */ sub_17934( ref l_U599 );
     /* P_QUICK_ADD_PED_TO_GROUP */ sub_16887( l_U612, ref l_U565 );
     /* P_TETHERPED */ sub_18671( ref l_U407, l_U612, 1 );
    if (((IS_PED_DEAD( l_U612 )) == 0) AND ((DOES_PED_EXIST( l_U612 )) == 1))
    {
        SET_PED_NAME_DEBUG( l_U612, "piFountainBackup01" );
        SET_PED_AI_TEMPLATE( l_U612, ref g_U1791 );
        SET_PED_ACCURACY( l_U612, 31186664 );
        SET_PED_COMBAT_MOVEMENT( l_U612, 1 );
        uVar5 =  /* F_GIVEPEDWEAPON */ sub_6222( l_U612, g_U1819, 25000, 0, 0 );
        SET_PED_ALERTNESS( l_U612, 4 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( l_U612, 1 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( l_U612, 1 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
        {
            REGISTER_TARGET( l_U612,  /* PLAYER_PED_ID */ sub_619() );
        }
        OPEN_SEQUENCE_TASK( ref uVar6 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )) == 0)
        {
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_619() );
        }
        CLOSE_SEQUENCE_TASK( uVar6 );
        TASK_PERFORM_SEQUENCE( l_U612, uVar6 );
        CLEAR_SEQUENCE_TASK( uVar6 );
    }
    vVar7 = {-63.72724000, -52.41292000, 13.82744000};
     /* CLEANPED */ sub_3078( l_U626 );
     /* P_QUICK_ADD_PED_TO_GROUP */ sub_16887( l_U626, ref l_U565 );
     /* P_TETHERPED */ sub_18671( ref l_U404, l_U626, 3 );
    if (((IS_PED_DEAD( l_U626 )) == 0) AND ((DOES_PED_EXIST( l_U626 )) == 1))
    {
        SET_PED_NAME_DEBUG( l_U626, "piFountainBackup02" );
        SET_PED_AI_TEMPLATE( l_U626, ref g_U1791 );
        SET_PED_ACCURACY( l_U626, 31186664 );
        SET_PED_COMBAT_MOVEMENT( l_U626, 1 );
        uVar10 =  /* F_GIVEPEDWEAPON */ sub_6222( l_U626, g_U1820, 25000, 0, 0 );
        SET_PED_ALERTNESS( l_U626, 4 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( l_U626, 1 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( l_U626, 1 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
        {
            REGISTER_TARGET( l_U626,  /* PLAYER_PED_ID */ sub_619() );
        }
        OPEN_SEQUENCE_TASK( ref uVar11 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        TASK_ATTACK_MOVE( 0, vVar7, 1092616192, 1101004800, -1082130432, 3 );
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )) == 0)
        {
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_619() );
        }
        CLOSE_SEQUENCE_TASK( uVar11 );
        TASK_PERFORM_SEQUENCE( l_U626, uVar11 );
        CLEAR_SEQUENCE_TASK( uVar11 );
    }
    return;
}

/* F_GET_NUM_LIVING_ENEMIES_AUDIO_SWITCH */ void sub_33773()
{
    int Result;

    Result = 0;
    if (((IS_PED_DEAD( l_U536 )) == 0) AND ((DOES_PED_EXIST( l_U536 )) == 1))
    {
        Result++;
    }
    if (((IS_PED_DEAD( l_U641 )) == 0) AND ((DOES_PED_EXIST( l_U641 )) == 1))
    {
        Result++;
    }
    if (((IS_PED_DEAD( l_U564 )) == 0) AND ((DOES_PED_EXIST( l_U564 )) == 1))
    {
        Result++;
    }
    if (((IS_PED_DEAD( l_U640 )) == 0) AND ((DOES_PED_EXIST( l_U640 )) == 1))
    {
        Result++;
    }
    if (((IS_PED_DEAD( l_U598 )) == 0) AND ((DOES_PED_EXIST( l_U598 )) == 1))
    {
        Result++;
    }
    if (((IS_PED_DEAD( l_U550 )) == 0) AND ((DOES_PED_EXIST( l_U550 )) == 1))
    {
        Result++;
    }
    if (((IS_PED_DEAD( l_U612 )) == 0) AND ((DOES_PED_EXIST( l_U612 )) == 1))
    {
        Result++;
    }
    return Result;
}

/* P_ACTION_SURPRISE_SIDE */ void sub_34526()
{
     /* WRITESCRIPTLOG */ sub_378( "NS", "P_ACTION_SURPRISE_SIDE()", 0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
    {
        if (NOT (IS_PED_DEAD( l_U640 )))
        {
            TASK_SHOOT_AT_PED( l_U640,  /* PLAYER_PED_ID */ sub_619(), -1, -256437761, 1, 0, 0 );
        }
    }
    return;
}

/* P_ACTION_SURPRISE */ void sub_34690()
{
     /* WRITESCRIPTLOG */ sub_378( "NS", "P_ACTION_SURPRISE()", 0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )))
    {
        if (NOT (IS_PED_DEAD( l_U640 )))
        {
            SET_PED_COMBAT_MOVEMENT( l_U640, 2 );
             /* P_REMOVEALLTETHERSFROMPED */ sub_34807( l_U640 );
            CLEAR_PED_TASKS( l_U640 );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U640, 0 );
             /* P_TETHERPED */ sub_18671( ref l_U404, l_U640, 1 );
            TASK_COMBAT_PED( l_U640,  /* PLAYER_PED_ID */ sub_619() );
        }
    }
    return;
}

/* P_REMOVEALLTETHERSFROMPED */ void sub_34807(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        RESET_PED_TETHERING( uParam0 );
    }
    return;
}

/* F_ASSIGN_BULLET_CAM_TO_LAST_FOUNTAIN_ENEMY */ void sub_34967()
{
    if (( /* F_GET_NUM_LIVING_FOUNTAIN_ENEMIES */ sub_26137()) == 1)
    {
        if (((GET_PED_CAN_TRIGGER_BULLET_CAM( l_U640 )) == 0) AND (((IS_PED_DEAD( l_U640 )) == 0) AND ((DOES_PED_EXIST( l_U640 )) == 1)))
        {
            SET_PED_CAN_TRIGGER_BULLET_CAM( l_U640, 1 );
            return l_U640;
        }
        if (((GET_PED_CAN_TRIGGER_BULLET_CAM( l_U612 )) == 0) AND (((IS_PED_DEAD( l_U612 )) == 0) AND ((DOES_PED_EXIST( l_U612 )) == 1)))
        {
            SET_PED_CAN_TRIGGER_BULLET_CAM( l_U612, 1 );
            return l_U612;
        }
        if (((GET_PED_CAN_TRIGGER_BULLET_CAM( l_U584 )) == 0) AND (((IS_PED_DEAD( l_U584 )) == 0) AND ((DOES_PED_EXIST( l_U584 )) == 1)))
        {
            SET_PED_CAN_TRIGGER_BULLET_CAM( l_U584, 1 );
            return l_U584;
        }
        if (((GET_PED_CAN_TRIGGER_BULLET_CAM( l_U598 )) == 0) AND (((IS_PED_DEAD( l_U598 )) == 0) AND ((DOES_PED_EXIST( l_U598 )) == 1)))
        {
            SET_PED_CAN_TRIGGER_BULLET_CAM( l_U598, 1 );
            return l_U598;
        }
        if (((GET_PED_CAN_TRIGGER_BULLET_CAM( l_U550 )) == 0) AND (((IS_PED_DEAD( l_U550 )) == 0) AND ((DOES_PED_EXIST( l_U550 )) == 1)))
        {
            SET_PED_CAN_TRIGGER_BULLET_CAM( l_U550, 1 );
            return l_U550;
        }
        if (((GET_PED_CAN_TRIGGER_BULLET_CAM( l_U564 )) == 0) AND (((IS_PED_DEAD( l_U564 )) == 0) AND ((DOES_PED_EXIST( l_U564 )) == 1)))
        {
            SET_PED_CAN_TRIGGER_BULLET_CAM( l_U564, 1 );
            return l_U564;
        }
        if (((GET_PED_CAN_TRIGGER_BULLET_CAM( l_U641 )) == 0) AND (((IS_PED_DEAD( l_U641 )) == 0) AND ((DOES_PED_EXIST( l_U641 )) == 1)))
        {
            SET_PED_CAN_TRIGGER_BULLET_CAM( l_U641, 1 );
            return l_U641;
        }
        return  /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_35528( ref l_U703 );
    }
    return nil;
}

/* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ void sub_35528(unknown uParam0)
{
    int I;

    if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_35581( uParam0 )) == 1)
    {
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
            {
                if (NOT (GET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I] )))
                {
                    SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I], 1 );
                    return (uParam0^)[I];
                }
            }
        }
    }
    return nil;
}

/* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ void sub_35581(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result++;
        }
    }
    return Result;
}

/* P_RELEASE_GRENADER */ void sub_35880()
{
     /* WRITESCRIPTLOG */ sub_378( "NS", "P_RELEASE_GRENADER()", 0 );
    if (NOT (IS_PED_DEAD( l_U641 )))
    {
         /* P_REMOVEALLTETHERSFROMPED */ sub_34807( l_U641 );
         /* P_TETHERPED */ sub_18671( ref l_U404, l_U641, 1 );
        SET_PED_FLAG_LOCK_TO_COVER( l_U641, 0 );
    }
    l_U655 = 1;
    return;
}

/* P_ENABLE_COKE_PACK_PLANT_EMITTER */ void sub_36030()
{
     /* WRITESCRIPTLOG */ sub_378( "NS", "P_ENABLE_COKE_PACK_PLANT_EMITTER()", 0 );
    ENABLE_STATIC_EMITTER( "S_FAV1_COKE_PACK_PLANT", 1 );
    return;
}

/* P_SET_COCAINE_DOORS */ void sub_36199()
{
    if (DOES_OBJECT_EXIST( DOOR_FIND_CLOSEST( g_U1664._fU0, g_U1664._fU4 ) ))
    {
        if (DOOR_GET_IS_AFFECTED_BY_BULLETS( DOOR_FIND_CLOSEST( g_U1664._fU0, g_U1664._fU4 ) ))
        {
             /* WRITESCRIPTLOG */ sub_378( "NS", "Setting cocaine door to not react to bullets.", 0 );
            DOOR_SET_IS_AFFECTED_BY_BULLETS( DOOR_FIND_CLOSEST( g_U1664._fU0, g_U1664._fU4 ), 0 );
        }
    }
    if (DOES_OBJECT_EXIST( DOOR_FIND_CLOSEST( g_U1671._fU0, g_U1671._fU4 ) ))
    {
        if (DOOR_GET_IS_AFFECTED_BY_BULLETS( DOOR_FIND_CLOSEST( g_U1671._fU0, g_U1671._fU4 ) ))
        {
             /* WRITESCRIPTLOG */ sub_378( "NS", "Setting cocaine door to not react to bullets.", 0 );
            DOOR_SET_IS_AFFECTED_BY_BULLETS( DOOR_FIND_CLOSEST( g_U1671._fU0, g_U1671._fU4 ), 0 );
        }
    }
    return;
}

/* P_HANDLE_MAX_CONTEXTUAL_DIALOGUE */ void sub_36566(int iParam0)
{
    if (l_U44 == 0)
    {
        l_U45 = GET_PAYNEKILLER_AMT();
        l_U44 = 1;
    }
    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_619() )) == 0)
    {
        if ((IS_LAST_MAN_STANDING_ACTIVE() == 0) AND ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0))
        {
            if ((TIME_SINCE_LAST_MONOLOGUE() > 5000) AND ((IS_MONOLOGUE_PLAYING() == 0) AND (( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_36685()) == 0)))
            {
                if ((iParam0 == 1) AND (l_U45 < GET_PAYNEKILLER_AMT()))
                {
                    if (g_U789 < 5)
                    {
                        if (((g_U788 mod 3) == 0) || (g_U788 == 0))
                        {
                             /* WRITESCRIPTLOG */ sub_378( "NS", "Playing Pills Monologue", 0 );
                             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_36906( ref l_U34 );
                             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_37017( 0,  /* PLAYER_PED_ID */ sub_619(), "MAX", ref l_U34, 2, 0 );
                             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_37017( 1,  /* PLAYER_PED_ID */ sub_619(), "MAX", ref l_U34, 2, 0 );
                             /* PLAY_SINGLE_SPEECH */ sub_37285( "SFV1_MFPLS", ref l_U34, 7, 1 );
                            g_U789++;
                        }
                        g_U788++;
                    }
                }
            }
            l_U45 = GET_PAYNEKILLER_AMT();
        }
    }
    return;
}

/* IS_ANY_SPEECH_CURRENTLY_PLAYING */ void sub_36685()
{
    int Result;
    int I;

    Result = 0;
    for ( I = 0; I <= 3; I++ )
    {
        Result = (IS_SCRIPTED_CONVERSATION_ONGOING( I )) || (Result);
    }
    return Result;
}

/* RESET_SCRIPT_SPEECH_STRUCT */ void sub_36906(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

/* ADD_PED_FOR_SCRIPT_SPEECH */ void sub_37017(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

/* PLAY_SINGLE_SPEECH */ void sub_37285(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return  /* PLAY_SINGLE_SPEECH_FROM_BLOCK */ sub_37330( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

/* PLAY_SINGLE_SPEECH_FROM_BLOCK */ void sub_37330(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return  /* PLAYSPEECHMAIN */ sub_37417( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

/* PLAYSPEECHMAIN */ int sub_37417(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT ( /* CANTHISSPEECHBEPLAYED */ sub_37469( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
     /* COPYHIDDENSPEECHSTUCT */ sub_37987( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

/* CANTHISSPEECHBEPLAYED */ int sub_37469(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

/* COPYHIDDENSPEECHSTUCT */ void sub_37987(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

/* P_UNLOAD_ASSETS */ void sub_38258()
{
     /* WRITESCRIPTLOG */ sub_378( "SP", "P_UNLOAD_ASSETS", "###" );
     /* UNLOADMODEL */ sub_3395( -1947223203 );
     /* UNLOADMODEL */ sub_3395( 1396472798 );
     /* UNLOADMODEL */ sub_3395( 1156505411 );
     /* UNLOADMODEL */ sub_3395( -502497534 );
     /* UNLOADMODEL */ sub_3395( 508600758 );
     /* UNLOADMODEL */ sub_3395( 416428258 );
     /* UNLOADANIMDICT */ sub_38401( "LEVEL_S_FAV1_CP_07" );
    ISEQ_UNREGISTER_ENTITY( 1669748883, "roof" );
    ISEQ_TERMINATE( 1669748883 );
    GAMEPLAY_HELPER_BOX_DESTROY( ref l_U86._fU0 );
    GAMEPLAY_HELPER_BOX_DESTROY( ref l_U107._fU0 );
    GAMEPLAY_HELPER_BOX_DESTROY( ref l_U128._fU0 );
    GAMEPLAY_HELPER_BOX_DESTROY( ref l_U149._fU0 );
    GAMEPLAY_HELPER_BOX_DESTROY( ref l_U170._fU0 );
    GAMEPLAY_HELPER_BOX_DESTROY( ref l_U191._fU0 );
    GAMEPLAY_HELPER_BOX_DESTROY( ref l_U233._fU0 );
    GAMEPLAY_HELPER_BOX_DESTROY( ref l_U254._fU0 );
    GAMEPLAY_HELPER_BOX_DESTROY( ref l_U275._fU0 );
    GAMEPLAY_HELPER_BOX_DESTROY( ref l_U296._fU0 );
    GAMEPLAY_HELPER_BOX_DESTROY( l_U401._fU0 );
    GAMEPLAY_HELPER_BOX_DESTROY( l_U402._fU0 );
    GAMEPLAY_HELPER_BOX_DESTROY( l_U403._fU0 );
    GAMEPLAY_HELPER_BOX_DESTROY( l_U404._fU0 );
    GAMEPLAY_HELPER_BOX_DESTROY( l_U405._fU0 );
    GAMEPLAY_HELPER_BOX_DESTROY( l_U406._fU0 );
    return;
}

/* UNLOADANIMDICT */ void sub_38401(unknown uParam0)
{
    REMOVE_ANIM_DICT( uParam0, 0 );
    return;
}

