void main()
{
    l_U0 = 1;
    l_U1 = 144;
    l_U65 = 0;
    l_U75 = {0, 0, 0};
    StrCopy( ref l_U78, "DUMMY", 32 );
    l_U86 = 1;
    l_U91 = 0;
    l_U92 = 0;
    l_U93 = 0;
    l_U96 = 0;
    l_U141 = -1;
    l_U142 = {64536, 64536, 64536};
    StrCopy( ref l_U145, "Ambient_Lightning_Flash_BG_S", 32 );
    StrCopy( ref l_U153, "Ambient_Lightning_Flash_FG_S", 32 );
    l_U161 = {0.00000000, 0.00000000, 0.00000000};
    l_U164 = {0.00000000, 0.00000000, 0.00000000};
    l_U167 = 1.00000000;
    l_U168 = {0.00000000, 0.00000000, 0.00000000};
    l_U171 = {0.00000000, 0.00000000, 0.00000000};
    l_U174 = 1.00000000;
    l_U175 = 0;
    l_U176 = 0;
    l_U177 = 0;
    l_U178 = 0;
    l_U179 = 0.50000000;
    l_U181 = 0;
    l_U182 = 0;
    l_U225 = "PED_DEF";
    l_U267 = 1.00000000;
    l_U279 = 0;
    l_U320 = 0;
    l_U340 = 0;
    l_U341 = 1;
    l_U342 = 0;
    l_U343 = 1.00000000;
    l_U344 = -5.00000000;
    l_U345 = 0;
    l_U346 = 0;
    l_U347 = 0;
    l_U351 = 42;
    l_U352 = 0;
    l_U353 = 0;
    l_U354 = 0;
    l_U355 = 0;
    l_U356 = 0;
    l_U357 = 90.00000000;
    l_U358 = {0.00000000, 0.00000000, 0.00000000};
    l_U361 = {0.00000000, 0.00000000, 0.00000000};
    l_U364 = 0;
    l_U365 = 0;
    l_U366 = 0;
    l_U367 = 0;
    l_U368 = 0;
    l_U369 = 0;
    l_U370 = nil;
    l_U371 = {0.00000000, 0.00000000, 0.00000000};
    l_U374 = 0;
    l_U375 = 0;
    l_U376 = 0;
    l_U378 = 0;
    l_U379 = 0;
    l_U380 = 1500;
    l_U652 = "SCRIPT_MISSION\S_MARINA_SLIPWAY";
    l_U653 = "LEVEL_S_MARINA_CP_02";
    l_U654 = "B_IN_05_02_DOCKS_CAM";
    l_U655 = "B_OUT_05_02_DOCKS_CAM";
    l_U656 = "LEVEL_S_MARINA_CP_02";
    l_U657 = "B_OUT_MID_03_DOCKS_CAM";
    l_U661 = 0;
    l_U662 = 0;
    l_U681 = 0;
    l_U710 = 1;
    l_U711 = 0;
    l_U712 = 1;
    l_U713 = 0;
    l_U724 = 1;
    l_U764 = 0;
    l_U765 = 0;
    l_U766 = 0;
    l_U876 = {48.59875000, -36.83268000, 1.82873400};
    l_U879 = 273.90910000;
    l_U880 = 33;
    l_U883 = 851043189;
    l_U888 = {50.12000000, -37.55000000, 1.99000000};
    l_U891 = {0.00000000, 0.00000000, 98};
    l_U904 = {0.00000000, 0.00000000, -180.00000000};
    l_U907 = {57.00000000, -34.27000000, 2.00000000};
    l_U910 = {58.93600000, -34.27000000, 2.00000000};
    l_U913 = {54.47300000, -35.50700000, 2.00000000};
    l_U916 = 0.00000000;
    l_U1369 = 0;
    l_U1437 = {58.61546000, -4.88319000, 1.99000000};
    l_U1440 = {59.47160000, -10.78162000, 2.00000000};
    l_U1443 = 0;
    l_U1751 = 6200;
    l_U1752 = 10300;
    l_U1754 = -1;
    l_U1841 = {57.14000000, -21.40000000, 2.95000000};
    l_U1855 = 562756001;
    l_U1934 = -1;
    l_U1987 = 0;
    l_U1988 = 0;
    l_U1989 = 0;
     /* WRITESCRIPTLOG */ sub_1246( "GA", "Script s_marina_Slipway.sc is starting.", 0 );
     /* P_LOAD_ASSETS */ sub_1364();
     /* P_SETUP_STATIC_DATA */ sub_3900();
     /* P_INITIALIZE_SCRIPT_DATA */ sub_7561();
    if ((NOT IS_MAGDEMO()) AND (g_U788 == 2))
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Starting from dev menu: SLIPWAY", 0 );
         /* P_LOAD_WEAPONS */ sub_8463( 2, 1 );
         /* P_SETUP_UNLOADERS */ sub_8857();
         /* P_SLIPWAY_CRATES */ sub_10063( 1 );
         /* P_SETUP_SLIPWAY_DOORS_AND_GATES */ sub_10832();
        if (NOT ( /* HAS_SAVEFILE_LOADED */ sub_11750( ref l_U390 )))
        {
             /* P_PLAYER_WEAPON_SETUP */ sub_16485();
        }
        g_U789 = 2;
         /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_16734( ref l_U390, g_U789,  /* PLAYER_PED_ID */ sub_11897(), g_U790[2], g_U899[2], g_U936[2], g_U973[2], 0 );
        l_U710 = 6;
         /* P_HANDLE_MUSIC */ sub_21338();
        l_U651 = 1;
    }
    else if (g_U788 == 3)
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Starting from dev menu: SLIPWAY_WAREHOUSE", 0 );
         /* P_LOAD_WEAPONS */ sub_8463( 3, 1 );
        if (NOT ( /* HAS_SAVEFILE_LOADED */ sub_11750( ref l_U426 )))
        {
             /* P_PLAYER_WEAPON_SETUP */ sub_16485();
        }
        g_U789 = 3;
         /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_16734( ref l_U426, g_U789,  /* PLAYER_PED_ID */ sub_11897(), g_U790[3], g_U899[3], g_U936[3], g_U973[3], 0 );
        l_U710 = 11;
         /* P_HANDLE_MUSIC */ sub_21338();
        l_U651 = 4;
    }
    else
    {
         /* P_LOAD_WEAPONS */ sub_8463( 2, 1 );
         /* P_SETUP_UNLOADERS */ sub_8857();
         /* P_SLIPWAY_CRATES */ sub_10063( 1 );
         /* P_SETUP_SLIPWAY_DOORS_AND_GATES */ sub_10832();
        if (IS_MAGDEMO())
        {
             /* WRITESCRIPTLOG */ sub_1246( "BSW", "magdemo start slipway script", 0 );
             /* P_PLAYER_WEAPON_SETUP */ sub_16485();
             /* TELEPORTPED */ sub_23440(  /* PLAYER_PED_ID */ sub_11897(), 59.65000000, -54.26000000, 2.12000000, 0 );
             /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_16734( ref l_U390, g_U789,  /* PLAYER_PED_ID */ sub_11897(), g_U790[2], g_U899[2], g_U936[2], g_U973[2], 0 );
        }
        while (NOT ( /* F_ISPEDINTRIGGERBOX */ sub_23575(  /* PLAYER_PED_ID */ sub_11897(), l_U504 )))
        {
            WAIT( 0 );
        }
        DISABLE_RESTART_CHECKPOINT( 1 );
        l_U710 = 3;
         /* P_HANDLE_MUSIC */ sub_21338();
    }
     /* WRITESCRIPTLOG */ sub_1246( "GA", "Script s_marina_Slipway.sc activated.", 0 );
     /* P_START_GAMEPLAY */ sub_23736();
    while (NOT IS_EXITFLAG_SET())
    {
        if ( /* F_ISPLAYERINTRIGGERBOX */ sub_28248( l_U588 ))
        {
            SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        }
        else
        {
             /* P_HANDLE_MUSIC */ sub_21338();
             /* P_HANDLE_CHECKPOINTS */ sub_28333();
             /* P_HANDLE_EVENTS */ sub_32396();
             /* P_SLIP_DEBUG_TUNE_WIDGET */ sub_79704();
        }
        WAIT( 0 );
    }
     /* P_CLEANUP_ALL */ sub_30668();
     /* P_UNLOAD_ASSETS */ sub_80234();
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "s_marina_Slipway" );
    SET_EXITFLAG_RESPONSE();
     /* WRITESCRIPTLOG */ sub_1246( "SP", "Script s_marina_Slipway.sc is terminating...", "###" );
    return;
}

/* WRITESCRIPTLOG */ void sub_1246(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    DISPLAYF( "[{0}][{1}]{3} {2} {3}", 4, 513, uVar5, 1537, uParam0, 1537, uParam1, 1537, sParam2 );
    return;
}

/* P_LOAD_ASSETS */ void sub_1364()
{
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_LOAD_ASSETS start", 0 );
    if (g_U788 == 2)
    {
         /* BLOCKLOADMODEL */ sub_1440( g_U1030 );
         /* BLOCKLOADMODEL */ sub_1440( -1127527230 );
         /* BLOCKLOADMODEL */ sub_1440( -301519047 );
         /* BLOCKLOADMODEL */ sub_1440( g_U1038 );
         /* BLOCKLOADMODEL */ sub_1440( g_U1051 );
         /* BLOCKLOADMODEL */ sub_1440( l_U883 );
         /* BLOCKLOADMODEL */ sub_1440( g_U1057 );
         /* BLOCKLOADMODEL */ sub_1440( g_U1058 );
         /* BLOCKLOADMODEL */ sub_1440( g_U1100 );
         /* BLOCKLOADMODEL */ sub_1440( g_U1099 );
         /* BLOCKLOADMODEL */ sub_1440( g_U1061 );
         /* BLOCKLOADMODEL */ sub_1440( g_U1062 );
         /* BLOCKLOADMODEL */ sub_1440( l_U1855 );
         /* BLOCKLOADMODEL */ sub_1440( g_U1046 );
         /* LOADVEHICLERECORDING */ sub_2022( l_U880, 1 );
         /* INIT_WAREHOUSE_OFFICE_BINK */ sub_2183();
    }
    else if (g_U788 == 3)
    {
         /* BLOCKLOADMODEL */ sub_1440( g_U1030 );
         /* BLOCKLOADMODEL */ sub_1440( g_U1093 );
         /* BLOCKLOADMODEL */ sub_1440( g_U1057 );
         /* BLOCKLOADMODEL */ sub_1440( g_U1058 );
         /* BLOCKLOADMODEL */ sub_1440( g_U1100 );
         /* BLOCKLOADMODEL */ sub_1440( g_U1099 );
         /* BLOCKLOADMODEL */ sub_1440( g_U1061 );
         /* BLOCKLOADMODEL */ sub_1440( g_U1062 );
         /* BLOCKLOADMODEL */ sub_1440( l_U1855 );
         /* BLOCKLOADMODEL */ sub_1440( g_U1063 );
         /* BLOCKLOADMODEL */ sub_1440( 509064891 );
    }
    else
    {
         /* LOADMODEL */ sub_2625( g_U1030, 1 );
         /* LOADMODEL */ sub_2625( -1127527230, 1 );
         /* LOADMODEL */ sub_2625( -301519047, 1 );
         /* LOADMODEL */ sub_2625( g_U1027, 1 );
         /* LOADMODEL */ sub_2625( g_U1042, 1 );
         /* LOADMODEL */ sub_2625( g_U1038, 1 );
         /* LOADMODEL */ sub_2625( g_U1051, 1 );
         /* LOADMODEL */ sub_2625( l_U883, 1 );
         /* LOADMODEL */ sub_2625( g_U1057, 1 );
         /* LOADMODEL */ sub_2625( g_U1058, 1 );
         /* LOADMODEL */ sub_2625( g_U1100, 1 );
         /* LOADMODEL */ sub_2625( g_U1099, 1 );
         /* LOADMODEL */ sub_2625( g_U1061, 1 );
         /* LOADMODEL */ sub_2625( g_U1062, 1 );
         /* LOADMODEL */ sub_2625( l_U1855, 1 );
         /* LOADMODEL */ sub_2625( g_U1046, 1 );
         /* LOADVEHICLERECORDING */ sub_2022( l_U880, 1 );
         /* INIT_WAREHOUSE_OFFICE_BINK */ sub_2183();
    }
     /* LOADWEAPON */ sub_3057( 68019059, 1 );
     /* STREAMWATERRESPAWNANIMS */ sub_3202();
     /* LOADAUDIOBANK */ sub_3507( l_U652, 1 );
    l_U922 = GET_SOUND_ID();
    l_U1934 = GET_SOUND_ID();
     /* SETUP_SCRIPTED_SPEECH */ sub_3698( "SMARAUD" );
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_LOAD_ASSETS end", 0 );
    return;
}

/* BLOCKLOADMODEL */ void sub_1440(unknown uParam0)
{
    DISPLAYF( "[MSWW]### Trying to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
         /* WRITE_STRING */ sub_1642( "[SP]### ERROR! (BlockLoadModel) Trying to block load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    LOAD_ALL_OBJECTS_NOW();
    while ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        LOAD_ALL_OBJECTS_NOW();
        DISPLAYF( "[SP]### Waiting to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
        WAIT( 0 );
    }
    DISPLAYF( "[MSWW]### Has loaded model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
    return;
}

/* WRITE_STRING */ void sub_1642(unknown uParam0)
{
    PRINTSTRING( uParam0 );
    PRINTNL();
    return;
}

/* LOADVEHICLERECORDING */ void sub_2022(unknown uParam0, int iParam1)
{
    REQUEST_VEHICLE_RECORDING( uParam0 );
    if (iParam1 == 1)
    {
        while ((HAS_VEHICLE_RECORDING_BEEN_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for a recording to be loaded: Rec# {} ###", 1, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* INIT_WAREHOUSE_OFFICE_BINK */ void sub_2183()
{
    l_U1728._fU0 = l_U1741;
    l_U1728._fU8 = 0;
    l_U1728._fU12 = -100.00000000;
    l_U1728._fU16 = 0;
    l_U1728._fU20 = 0;
    l_U1728._fU32 = 0;
    l_U1728._fU36 = 0;
    l_U1728._fU40 = 0;
    l_U1728._fU4 = "DOCKS_GIOVANNA_SLIPWAY";
     /* P_SETUP_VIDEO_SCREEN */ sub_2337( ref l_U1728 );
    return;
}

/* P_SETUP_VIDEO_SCREEN */ void sub_2337(int iParam0)
{
    if (NOT iParam0->_fU40)
    {
        PRELOAD_MOVIE( iParam0->_fU8, iParam0->_fU4, 0, 0 );
    }
    SET_MOVIE_VOLUME( iParam0->_fU8, iParam0->_fU12 );
    SET_MOVIE_LOOP( iParam0->_fU8, 1 );
    if (iParam0->_fU20)
    {
        iParam0->_fU24 = 1;
    }
    else
    {
        iParam0->_fU24 = 0;
    }
    iParam0->_fU28 = GET_SOUND_ID();
    return;
}

/* LOADMODEL */ void sub_2625(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
         /* WRITE_STRING */ sub_1642( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADWEAPON */ void sub_3057(unknown uParam0, boolean bParam1)
{
    REQUEST_WEAPON( uParam0 );
    if (bParam1)
    {
        while ((HAS_WEAPON_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load weapon: {!f1} : {1} ###", 2, 1, 199730165, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* STREAMWATERRESPAWNANIMS */ void sub_3202()
{
    if (l_U3)
    {
         /* WRITE_STRING */ sub_1642( "Water Respawn: Anim dictionary 'SWIM' already requested" );
    }
    else
    {
         /* LOADANIMDICT */ sub_3323( "SWIM", 0, 1 );
        l_U3 = 1;
    }
    return;
}

/* LOADANIMDICT */ void sub_3323(unknown uParam0, unknown uParam1, int iParam2)
{
    REQUEST_ANIM_DICT( uParam0, uParam1 );
    "[doubled result, dropped if not asigned]";
    if (iParam2 == 1)
    {
        while ((HAS_ANIM_DICT_LOADED( uParam0, uParam1 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an animation dictionary to be loaded: {} ###", 1, 1537, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADAUDIOBANK */ void sub_3507(unknown uParam0, int iParam1)
{
    LOAD_SCRIPT_AUDIO_BANK( uParam0 );
    if (iParam1 == 1)
    {
        while ((IS_SCRIPT_AUDIO_BANK_LOADED( uParam0, 0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for script audio bank to be loaded: {} ###", 1, 1537, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* SETUP_SCRIPTED_SPEECH */ void sub_3698(unknown uParam0)
{
    StrCopy( ref g_U157._fU0, uParam0, 16 );
     /* CLEARPEDCONVERSATIONDATA */ sub_3742();
    return;
}

/* CLEARPEDCONVERSATIONDATA */ void sub_3742()
{
    int I;

    for ( I = 0; I <= 8; I++ )
    {
        g_U157._fU16[I]._fU0 = nil;
        g_U157._fU16[I]._fU4 = 0;
        g_U157._fU92[I] = 0;
    }
    return;
}

/* P_SETUP_STATIC_DATA */ void sub_3900()
{
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_SETUP_STATIC_DATA start", 0 );
     /* P_CREATEPEDSTRUCT */ sub_4006( ref l_U1207, 42.12870000, -34.83729000, 0.62591900, 94.00214000, g_U1027, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4153( ref l_U1221, 0.00000000, 0.00000000, 0.00000000, 0.00000000, -194690324, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4153( ref l_U1235, 0.00000000, 0.00000000, 0.00000000, 0.00000000, -194690324, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4153( ref l_U731[0], 45.62400000, -36.87500000, 1.24900000, -86.17000000, -543716414, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4153( ref l_U731[1], 46.69500000, -37.47600000, 2.28300000, 87.21000000, -183497857, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4153( ref l_U774[0], 71.46000000, -25.55000000, 2.26000000, 180.00000000, 1807643282, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4153( ref l_U774[1], 67.85000000, -24.27000000, 2.26000000, 179.50000000, -286733446, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4153( ref l_U845[0], 69.00000000, -25.00000000, 2.26000000, 180.00000000, 2094262594, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4153( ref l_U1407[0], 47.19200000, -6.13100000, 2.00000000, 270.00000000, -119960381, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4153( ref l_U1407[1], 48.23200000, -6.38900000, 2.00000000, 90.00000000, -2005382089, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4153( ref l_U1444[0], 56.12262000, 3.77559800, 1.99000000, -165.00000000, 835601075, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4153( ref l_U1444[1], 48.08280000, 1.08476400, 1.98667600, 180.00000000, 1281633144, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4153( ref l_U1444[2], 46.61821000, 1.86989300, 1.98667600, 190.00000000, -750839237, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCT */ sub_4006( ref l_U1551, 0.00000000, 0.00000000, 0.00000000, 0.00000000, g_U1028, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4153( ref l_U1565[0], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 119668021, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4153( ref l_U1565[1], 1.00000000, 1.00000000, 0.00000000, 0.00000000, 1417046166, 7, 3, 2, 0, 0 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U462, "TRIG_BLEND_IN_WALK", 60.00000000, -54.40000000, 1.38000000, 4.50000000, 4.50000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U483, "TRIG_BLEND_CAM_CUT", 61.33000000, -54.41000000, 1.38000000, 1.75000000, 2.00000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U546, "TRIG_SLIPWAY", 54.22000000, -43.48000000, -1.00000000, 32.00000000, 18.94000000, 8.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U504, "TRIGGER_SLIPWAY_ENTRYGATE", 64.33000000, -61.05000000, 1.38000000, 16.00000000, 16.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U525, "TRIGGER_SLIPWAY_NO_SHOOTDODGE", 62.29000000, -58.17000000, 1.38000000, 11.20000000, 10.00000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U567, "TRIG_SLIP_TRUCK_DEATH", 39.40000000, -36.84000000, -2.50000000, 18.00000000, 2.55000000, 6.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U923, "TRIG_SLIP_MAX_NEAR_GATE", 55.57000000, -35.71700000, 0.00000000, 5.00000000, 4.00000000, 4.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U944, "TRIG_SLIP_MAX_NEAR_TRUCKGATE", 54.93000000, -35.72000000, 0.00000000, 13.00000000, 4.00000000, 4.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U965, "TRIG_MAX_THROUGH_GATE", 50.02000000, -30.84000000, 1.00000000, 13.42000000, 6.00000000, 3.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U986, "TRIG_SLIP_BACKUPS_NEAR_GATE", 55.00000000, -32.48000000, 1.00000000, 3.50000000, 3.50000000, 3.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U1379, "TRIG_POST_SLIP_GATE_LOAD", 62.21000000, -30.84000000, 1.00000000, 11.00000000, 6.00000000, 3.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U1595, "TRIG_SLIPWAY_WAREHOUSE_OUTSIDE", 71.00000000, -22.33000000, 1.12000000, 8.00000000, 10.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U588, "TRIG_SLIPWAY_END", 62.44000000, 9.23000000, 1.80000000, 9.00000000, 3.40000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U1617, "TRIG_WAREHOUSE_ENTRY", 64.49000000, -19.33000000, 2.02000000, 5.00000000, 5.50000000, 3.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U1638, "TRIG_START_MID03", 57.16000000, -19.04000000, 2.50000000, 12.00000000, 4.67000000, 3.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U1498, "TRIG_SLIP_WAREHOUSE_PAST_OFFICE", 51.77000000, -15.35000000, 2.02000000, 8.00000000, 8.00000000, 3.00000000, 0.00000000, 0.00000000, -20.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U1519, "TRIG_WH_OUT_WINDOW", 57.84000000, -15.40000000, 2.02000000, 4.00000000, 2.50000000, 2.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U609, "TRIG_WH_FORCE_WALK", 62.00000000, 4.78300000, 1.90000000, 9.50000000, 5.25000000, 3.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U630, "TRIG_WH_GARAGE_MID04", 62.00000000, 6.91600000, 1.90000000, 4.50000000, 3.40000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U1944, "TRIG_SLIPWAY_DEATH_ZONE", 58.71000000, -22.75000000, -10.26000000, 42.96000000, 64.20000000, 8.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_4951( ref l_U1965, "DISABLE_SLIPWAY_SDODGE", 39.31000000, -37.08000000, -4.01000000, 11.00000000, 6.00000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_6753( ref l_U806, "TETH_STOR_UNLOADERS01", 54.48000000, -42.87300000, -0.03000000, 28.42000000, 17.10000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_6753( ref l_U807, "TETH_STOR_UNLOADERS02", 40.72000000, -37.11000000, -0.63000000, 4.00000000, 5.47000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_6753( ref l_U1007, "TETH_SLIP_BACKUPS_GATE", 55.72000000, -32.27000000, 1.00000000, 6.50000000, 3.75000000, 3.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_6753( ref l_U1008, "TETH_SLIP_BACKUPS_GATE_LONG", 58.47000000, -31.32000000, 1.00000000, 28.33000000, 7.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_6753( ref l_U1616, "TETH_WAREHOUSE", 55.98000000, -12.25000000, 1.90000000, 20.60000000, 18.68000000, 3.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATEVARIANTBOX */ sub_7215( ref l_U808, "VAR_TRUCK_BED", 47.01000000, -36.92000000, 2.00000000, 1.75000000, 1.75000000, 2.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* ADDWATERRESPAWNPOINT */ sub_7323( 44.08000000, -39.08000000, 1.00000000, 300.00000000, -15.00000000, -2.00000000 );
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_SETUP_STATIC_DATA end", 0 );
    return;
}

/* P_CREATEPEDSTRUCT */ void sub_4006(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU12 = uParam4;
    iParam0->_fU16 = uParam5;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU48 = uParam10;
    return;
}

/* P_CREATEPEDSTRUCTWITHNAME */ void sub_4153(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

/* P_CREATETRIGGERBOX */ void sub_4951(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    StrCopy( ref iParam0->_fU0, uParam1, 64 );
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = {uParam2};
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 1, iParam0 + 0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* P_CREATETETHERBOX */ void sub_6753(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 2, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* P_CREATEVARIANTBOX */ void sub_7215(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 4, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* ADDWATERRESPAWNPOINT */ int sub_7323(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    if (l_U2 >= 10)
    {
        PRINTSTRING( "ERROR: Too many water respawn points. Current max is " );
        PRINTINT( 10 );
        PRINTNL();
        return 0;
    }
    l_U4[l_U2]._fU0 = {uParam0};
    l_U4[l_U2]._fU12 = uParam3;
    l_U4[l_U2]._fU16 = uParam4;
    l_U4[l_U2]._fU20 = uParam5;
    l_U2++;
    return 1;
}

/* P_INITIALIZE_SCRIPT_DATA */ void sub_7561()
{
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_INITIALIZE_SCRIPT_DATA start", 0 );
    l_U651 = 0;
     /* RESETTIMER */ sub_7652( ref l_U818 );
     /* RESETTIMER */ sub_7652( ref l_U827 );
     /* RESETTIMER */ sub_7652( ref l_U836 );
     /* RESETTIMER */ sub_7652( ref l_U691 );
     /* RESETTIMER */ sub_7652( ref l_U700 );
     /* RESETTIMER */ sub_7652( ref l_U1370 );
     /* RESETTIMER */ sub_7652( ref l_U1700 );
     /* RESETTIMER */ sub_7652( ref l_U895 );
    l_U1018 = 0;
    l_U1019 = 0;
    l_U1030 = -1;
    l_U1031 = -1;
    l_U1187 = 0;
    l_U659 = 0;
    l_U1269 = 0;
    l_U1369 = 0;
    l_U660 = 0;
    l_U709 = 0;
    l_U761 = 0;
    l_U762 = 0;
    l_U865 = 0;
    l_U763 = 0;
    l_U804 = 0;
    l_U861 = 0;
    l_U920 = 0;
    l_U918 = 0;
    l_U764 = 0;
    l_U919 = 0;
    l_U765 = 0;
    l_U766 = 0;
    l_U767 = 0;
    l_U1986 = 0;
    l_U894 = 0;
    l_U881 = 0;
    l_U882 = 0;
    l_U863 = 0;
    l_U864 = 0;
    l_U1739 = 0;
     /* RESETTIMER */ sub_7652( ref l_U682 );
    l_U681 = 0;
    l_U917 = 0;
    l_U921 = 0;
    l_U805 = 0;
    l_U907 = {57.00000000, -34.27000000, 2.00000000};
    l_U862 = 0;
     /* P_CREATELIGHTNING */ sub_8116( ref l_U1188, 1.00000000, 59.65000000, -56.00000000, 4.00000000, 0, 1, 1000, 0.50000000, 1 );
    l_U1678 = 0;
    l_U1679 = 0;
    l_U1680 = 0;
    l_U1540 = 0;
    l_U1541 = 0;
    l_U1443 = 0;
     /* RESETTIMER */ sub_7652( ref l_U1542 );
    l_U1887 = -1;
    l_U1754 = -1;
    l_U1718 = 0;
    l_U1719 = 0;
    g_U1225 = 0;
    l_U661 = 0;
    l_U662 = 0;
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_INITIALIZE_SCRIPT_DATA end", 0 );
    return;
}

/* RESETTIMER */ void sub_7652(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

/* P_CREATELIGHTNING */ void sub_8116(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
     /* WRITESCRIPTLOG */ sub_1246( "BSW", "[SP]### P_CreateLightning ###", 0 );
    iParam0->_fU0 = uParam1;
    iParam0->_fU4 = {uParam2};
    iParam0->_fU16 = uParam5;
    iParam0->_fU20 = uParam6;
    iParam0->_fU60 = uParam7;
    iParam0->_fU64 = uParam8;
    iParam0->_fU68 = uParam9;
    return;
}

/* P_LOAD_WEAPONS */ void sub_8463(unknown uParam0, unknown uParam1)
{
     /* LOADWEAPON */ sub_3057( 68019059, uParam1 );
    switch (uParam0)
    {
        case 0:
        case 1:
         /* LOADWEAPON */ sub_3057( -1074756423, uParam1 );
        break;
        case 2:
         /* LOADWEAPON */ sub_3057( -612753081, uParam1 );
        break;
        case 3:
         /* LOADWEAPON */ sub_3057( 1194438308, uParam1 );
         /* LOADWEAPON */ sub_3057( -612753081, uParam1 );
        break;
        case 4:
         /* LOADWEAPON */ sub_3057( 1194438308, uParam1 );
         /* LOADWEAPON */ sub_3057( -612753081, uParam1 );
         /* LOADWEAPON */ sub_3057( -168327769, uParam1 );
         /* LOADWEAPON */ sub_3057( -1074756423, uParam1 );
        break;
        case 5:
        case 6:
         /* LOADWEAPON */ sub_3057( 1194438308, uParam1 );
         /* LOADWEAPON */ sub_3057( -168327769, uParam1 );
         /* LOADWEAPON */ sub_3057( -612753081, uParam1 );
         /* LOADWEAPON */ sub_3057( -1074756423, uParam1 );
        break;
        case 7:
        case 8:
        case 9:
         /* LOADWEAPON */ sub_3057( -110877124, uParam1 );
         /* LOADWEAPON */ sub_3057( -1980065396, uParam1 );
         /* LOADWEAPON */ sub_3057( -168327769, uParam1 );
         /* LOADWEAPON */ sub_3057( 1194438308, uParam1 );
         /* LOADWEAPON */ sub_3057( -612753081, uParam1 );
         /* LOADWEAPON */ sub_3057( -1074756423, uParam1 );
         /* LOADWEAPON */ sub_3057( 1308526797, uParam1 );
        break;
    }
    return;
}

/* P_SETUP_UNLOADERS */ void sub_8857()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_SETUP_UNLOADERS start", "***" );
    for ( I = 0; I <= 1; I++ )
    {
         /* CLEANPED */ sub_8951( l_U758[I] );
        l_U758[I] =  /* CREATEPED */ sub_9044( ref l_U731[I] );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U758[I], 1 );
        FREEZE_PED_POSITION( l_U758[I], 1 );
        SET_PED_VISIBLE( l_U758[I], 0 );
        SET_PED_CAN_BE_TARGETTED( l_U758[I], 0 );
        SET_PED_COMBAT_ATTRIBUTES( l_U758[I], 131072, 0 );
    }
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_9877( ref l_U758, "Unloader" );
    l_U761 = 1;
     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_SETUP_UNLOADERS end", "***" );
    return;
}

/* CLEANPED */ void sub_8951(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

/* CREATEPED */ void sub_9044(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_2625( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
     /* SETPEDDEFAULTSTATS */ sub_9535( iParam0->_fU40 );
     /* SETPEDDEFAULTTEMPLATE */ sub_9636( iParam0->_fU40 );
    return iParam0->_fU40;
}

/* SETPEDDEFAULTSTATS */ void sub_9535(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

/* SETPEDDEFAULTTEMPLATE */ void sub_9636(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

/* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ void sub_9877(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

/* P_SLIPWAY_CRATES */ void sub_10063(boolean bParam0)
{
    int I;
    vector[2] vVar4;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    vector[2] vVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;

     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_CREATE_START_CRATES...", "***" );
    array(ref vVar4, 2);
    array(ref vVar11, 2);
    if (bParam0)
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_CREATE_START_CRATES: Creating the crates", "***" );
        vVar4[0] = {44.67000000, -38.13000000, 1.07000000};
        vVar11[0] = {-1.75000000, -2.45000000, 8.60000000};
        vVar4[1] = {47.25000000, -36.48000000, 2.38000000};
        vVar11[1] = {9.07387000, 0.00000000, -76.59280000};
        l_U884[0] =  /* CREATEOBJECT */ sub_10326( l_U883, vVar4[0], vVar11[0], 0, 0, 0 );
        FREEZE_OBJECT_POSITION( l_U884[0], 1 );
        SET_OBJECT_COLLISION( l_U884[0], 0 );
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_CREATE_START_CRATES: Destroying the crates", "***" );
        for ( I = 0; I <= 1; I++ )
        {
             /* CLEANOBJECT */ sub_10759( l_U884[I] );
        }
    }
    return;
}

/* CREATEOBJECT */ void sub_10326(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_2625( uParam0, 1 );
    }
    Result = CREATE_OBJECT( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an object to exist: {!f1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

/* CLEANOBJECT */ void sub_10759(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

/* P_SETUP_SLIPWAY_DOORS_AND_GATES */ void sub_10832()
{
    vector vVar2;
    vector vVar5;
    vector vVar8;
    vector vVar11;

     /* WRITESCRIPTLOG */ sub_1246( "SP", "P_SETUP_SLIPWAY_DOORS_AND_GATES", "###" );
     /* P_SETDOORMINMAXLIMIT */ sub_10941( ref g_U1390, -17.00000000, 17.00000000 );
     /* P_OPENDOOR */ sub_11284( ref g_U1390, 0, 1, 1065353216 );
    vVar2 = {79.26000000, -60.94000000, 1.91000000};
    vVar5 = {0.00000000, 0.00000000, 90.00000000};
     /* CLEANOBJECT */ sub_10759( g_U1531 );
     /* LOADMODEL */ sub_2625( g_U1046, 1 );
    g_U1531 =  /* CREATEOBJECT */ sub_10326( g_U1046, vVar2, vVar5, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( g_U1531 )) == 1)
    {
        SET_OBJECT_COORDS( g_U1531, vVar2 );
        SET_OBJECT_ROTATION( g_U1531, vVar5 );
        FREEZE_OBJECT_POSITION( g_U1531, 1 );
    }
    vVar8 = {57.46000000, -34.27000000, 2.00000000};
    vVar11 = {0.00000000, 0.00000000, -180.00000000};
     /* CLEANOBJECT */ sub_10759( g_U1530 );
     /* LOADMODEL */ sub_2625( g_U1046, 1 );
    g_U1530 =  /* CREATEOBJECT */ sub_10326( g_U1046, vVar8, vVar11, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( g_U1530 )) == 1)
    {
        SET_OBJECT_COORDS( g_U1530, vVar8 );
        SET_OBJECT_ROTATION( g_U1530, vVar11 );
        FREEZE_OBJECT_POSITION( g_U1530, 1 );
    }
    return;
}

/* P_SETDOORMINMAXLIMIT */ void sub_10941(int iParam0, float fParam1, float fParam2)
{
    if (( /* F_DOESDOOREXIST */ sub_10976( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_11060( iParam0 );
    }
    if (fParam1 > fParam2)
    {
        PRINTSTRING( "[SP]### Error: Door fMinLimit greater than fMaxLimit (default min:-81.0 max:81.0) ###" );
        PRINTNL();
    }
    else
    {
        DOOR_FIND_CLOSEST_SET_LIMIT_MIN( iParam0->_fU0, iParam0->_fU4, fParam1 );
        DOOR_FIND_CLOSEST_SET_LIMIT_MAX( iParam0->_fU0, iParam0->_fU4, fParam2 );
    }
    return;
}

/* F_DOESDOOREXIST */ int sub_10976(int iParam0)
{
    int iVar3;

    iVar3 = DOES_OBJECT_OF_TYPE_EXIST_AT_COORDS( iParam0->_fU4, 1.00000000, iParam0->_fU0 );
    if (iVar3 == 1)
    {
        return 1;
    }
    return 0;
}

/* P_PRINTDOORNOTEXIST */ void sub_11060(unknown uParam0)
{
    (uParam0^) = {(uParam0^)};
    return;
}

/* P_OPENDOOR */ void sub_11284(int iParam0, int iParam1, int iParam2, unknown uParam3)
{
    float fVar6;

    if (( /* F_DOESDOOREXIST */ sub_10976( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_11060( iParam0 );
    }
    fVar6 = 0.00000000;
    if (iParam1 == 1)
    {
        fVar6 = uParam3;
    }
    else
    {
        fVar6 = -uParam3;
    }
    if (iParam2 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, fVar6 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    return;
}

/* HAS_SAVEFILE_LOADED */ int sub_11750(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_1246( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U0 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U1 );
             /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_11991( uParam0,  /* PLAYER_PED_ID */ sub_11897() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

/* PLAYER_PED_ID */ int sub_11897()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED(  /* PLAYER_ID */ sub_11935() );
    }
    return 0;
}

/* PLAYER_ID */ void sub_11935()
{
    return GET_PLAYER_ID();
}

/* P_RESTORE_PLAYER_DATA_CHECKPOINT */ void sub_11991(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

     /* WRITESCRIPTLOG */ sub_1246( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U0)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
     /* CLOSE_CURRENT_LEVEL_CONTEXT */ sub_12210( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
         /* LOADCOLLISIONFORPED */ sub_13374( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_13688( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_14123( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_13688( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_14123( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_13688( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_14123( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPON */ sub_14439( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_14123( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPON */ sub_14439( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_14123( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U0 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if (( /* F_CAN_GIVE_AMMO_TO_REGULAR_WEAPON_TYPE */ sub_15011( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
     /* START_NEW_LEVEL_CONTEXT */ sub_15213( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING(  /* PLAYER_PED_ID */ sub_11897(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U0)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U0 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
     /* WRITESCRIPTLOG */ sub_1246( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

/* CLOSE_CURRENT_LEVEL_CONTEXT */ void sub_12210(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_12272( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

/* GET_MISSION_INDEX_FROM_NAME */ int sub_12272(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    }
    else
    {
        PRINTSTRING( uParam0 );
        PRINTSTRING( uParam0 );
        PRINTSTRING( uParam0 );
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

/* LOADCOLLISIONFORPED */ void sub_13374(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

/* F_GIVEPEDWEAPONTOHOLSTER */ void sub_13688(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_1642( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* P_RESTORE_WEAPON_ATTACHMENTS */ void sub_14123(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

/* F_GIVEPEDWEAPON */ void sub_14439(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_1642( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* F_CAN_GIVE_AMMO_TO_REGULAR_WEAPON_TYPE */ int sub_15011(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

/* START_NEW_LEVEL_CONTEXT */ void sub_15213(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_12272( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
     /* CLEAR_GG_CONTEXTS */ sub_15311( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

/* CLEAR_GG_CONTEXTS */ void sub_15311(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

/* P_PLAYER_WEAPON_SETUP */ void sub_16485()
{
    unknown uVar2;

     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_PLAYER_WEAPON_SETUP", "***" );
    uVar2 =  /* F_GIVEPEDWEAPON */ sub_14439( g_U779._fU4, 68019059, 54, 0, 1 );
    ENABLE_WEAPON_ATTACHMENT( uVar2, 14, 1 );
    TOGGLE_WEAPON_ATTACHMENT( uVar2, 14, 0 );
    ENABLE_WEAPON_ATTACHMENT( uVar2, 8, 1 );
    TOGGLE_WEAPON_ATTACHMENT( uVar2, 8, 1 );
    if (IS_MAGDEMO())
    {
         /* LOADWEAPON */ sub_3057( 1194438308, 1 );
         /* F_GIVEPEDWEAPONTOHOLSTER */ sub_13688(  /* PLAYER_PED_ID */ sub_11897(), 1194438308, 1, 64, 1 );
    }
    return;
}

/* P_SAVE_PLAYER_DATA_CHECKPOINT */ void sub_16734(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

     /* WRITESCRIPTLOG */ sub_1246( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
         /* WRITESCRIPTLOG */ sub_1246( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
         /* START_NEW_LEVEL_CONTEXT */ sub_15213( iParam1 );
         /* CLOSE_OLD_LEVEL_CONTEXT */ sub_17025( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_17502( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_17502( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_17762( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_17502( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_17762( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_17762( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_17502( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_17762( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_17762( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_17762( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_17502( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_17762( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_17762( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_17762( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_17762( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
             /* P_PRINT_CHECKPOINT_DATA */ sub_19342( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U1, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
     /* WRITESCRIPTLOG */ sub_1246( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

/* CLOSE_OLD_LEVEL_CONTEXT */ void sub_17025(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_12272( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
         /* WRITESCRIPTLOG */ sub_1246( "TEH", "Ending context", 0 );
         /* WRITESCRIPTLOG */ sub_1246( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

/* P_SAVE_WEAPON_ATTACHMENTS */ void sub_17502(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

/* F_WEAPONS_SAME_AMMO */ void sub_17762(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

/* P_PRINT_CHECKPOINT_DATA */ void sub_19342(int iParam0)
{
     /* WRITE_STRING */ sub_1642( "CHECKPOINT DATA" );
    PRINTSTRING( "---Position: " );
     /* WRITE_VECTOR */ sub_19430( iParam0->_fU4 );
    PRINTSTRING( "---Heading: " );
     /* WRITE_FLOAT */ sub_19507( iParam0->_fU16 );
    PRINTSTRING( "---fRelativeGameCamHeading: " );
     /* WRITE_FLOAT */ sub_19507( iParam0->_fU20 );
    PRINTSTRING( "---fRelativeGameCamPitch: " );
     /* WRITE_FLOAT */ sub_19507( iParam0->_fU24 );
    PRINTSTRING( "---nHealth: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU28 );
    PRINTSTRING( "---wtRightHolster: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU56 );
    PRINTSTRING( "---wtLeftHolster: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU60 );
    PRINTSTRING( "---wtRifleHolster: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU64 );
    PRINTSTRING( "---wtRightHand: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU68 );
    PRINTSTRING( "---wtLeftHand: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU72 );
    PRINTSTRING( "---nWeaponRightHolsterAmmo: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU76 );
    PRINTSTRING( "---nWeaponLeftHolsterAmmo: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU80 );
    PRINTSTRING( "---nWeaponRifleHolsterAmmo: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU84 );
    PRINTSTRING( "---nWeaponRightHandAmmo: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU88 );
    PRINTSTRING( "---nWeaponLeftHandAmmo: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU92 );
    PRINTSTRING( "---fAdrenaline: " );
     /* WRITE_FLOAT */ sub_19507( iParam0->_fU32 );
    PRINTSTRING( "---nPayneKillers: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU36 );
    PRINTSTRING( "---nHour: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU40 );
    PRINTSTRING( "---nMinute: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU44 );
    PRINTSTRING( "---fSweatAmount: " );
     /* WRITE_FLOAT */ sub_19507( iParam0->_fU136 );
    PRINTSTRING( "---bTimeFrozen: " );
     /* WRITE_BOOL */ sub_20377( iParam0->_fU140 );
    PRINTSTRING( "---checkpointIndex: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU52 );
     /* WRITE_STRING */ sub_1642( "---nRightHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU96 );
     /* WRITE_STRING */ sub_1642( "---nRightHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU100 );
     /* WRITE_STRING */ sub_1642( "---nLeftHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU104 );
     /* WRITE_STRING */ sub_1642( "---nLeftHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU108 );
     /* WRITE_STRING */ sub_1642( "---nRifleHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU112 );
     /* WRITE_STRING */ sub_1642( "---nRifleHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU116 );
     /* WRITE_STRING */ sub_1642( "---nRightHandAttachmentEnabled: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU120 );
     /* WRITE_STRING */ sub_1642( "---nRightHandAttachmentToggled: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU124 );
     /* WRITE_STRING */ sub_1642( "---nLeftHandAttachmentEnabled: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU128 );
     /* WRITE_STRING */ sub_1642( "---nLeftHandAttachmentToggled: " );
     /* WRITE_INT */ sub_19676( iParam0->_fU132 );
    PRINTSTRING( "[CHECKPOINT DATA SIZE]: " );
     /* WRITE_INT */ sub_19676( l_U1 );
    PRINTSTRING( "[CHECKPOINT DATA REF SIZE]: " );
     /* WRITE_INT */ sub_19676( 144 );
    return;
}

/* WRITE_VECTOR */ void sub_19430(unknown uParam0, unknown uParam1, unknown uParam2)
{
    PRINTVECTOR( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_FLOAT */ void sub_19507(unknown uParam0)
{
    PRINTFLOAT( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_INT */ void sub_19676(unknown uParam0)
{
    PRINTINT( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_BOOL */ void sub_20377(boolean bParam0)
{
    if (bParam0)
    {
        PRINTSTRING( "TRUE" );
    }
    else
    {
        PRINTSTRING( "FALSE" );
    }
    PRINTNL();
    return;
}

/* P_HANDLE_MUSIC */ void sub_21338()
{
    if (l_U712 != l_U710)
    {
         /* WRITESCRIPTLOG */ sub_1246( "TEH", "playing music:changed CUR FLAG", 0 );
         /* WRITE_INT */ sub_19676( l_U710 );
         /* WRITE_INT */ sub_19676( l_U711 );
        l_U712 = l_U710;
    }
    else if (l_U713 != l_U711)
    {
         /* WRITESCRIPTLOG */ sub_1246( "TEH", "playing music:changed NEW FLAG", 0 );
         /* WRITE_INT */ sub_19676( l_U710 );
         /* WRITE_INT */ sub_19676( l_U711 );
        l_U713 = l_U711;
    }
    switch (l_U710)
    {
        case 1:
         /* WRITESCRIPTLOG */ sub_1246( "TEH", "playing music: STARTUP", 0 );
        l_U723 = 0;
        l_U710 = 3;
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_1246( "TEH", "playing music: Warehouse Restart checkpoint ", 0 );
        AUDIO_MUSIC_SUSPEND( 500 );
        l_U723 = 0;
        l_U710 = 6;
        break;
        case 3:
        if (l_U711 == 3)
        {
             /* WRITESCRIPTLOG */ sub_1246( "TEH", "playing music: fading out", 0 );
            AUDIO_MUSIC_SUSPEND( 5000 );
            AUDIO_MUSIC_STOP_ONESHOT();
            l_U723 = 0;
            l_U710 = 4;
            l_U711 = 4;
        }
        break;
        case 4:
        if (l_U711 == 4)
        {
            AUDIO_MUSIC_PRELOAD_ONESHOT( "DOCKS_ONESHOT_SLIPWAY_DOOR", 0 );
            if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "TEH", "playing music: Sussesfully preloaded DOCKS_ONESHOT_SLIPWAY_DOOR ", 0 );
                l_U710 = 5;
            }
        }
        break;
        case 5:
        if (l_U711 == 5)
        {
            if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "TEH", "playing music: Succesfully played DOCKS_ONESHOT_SLIPWAY_DOOR ", 0 );
                AUDIO_MUSIC_PLAY_ONESHOT();
            }
            l_U710 = 6;
        }
        break;
        case 6:
        if (l_U711 == 6)
        {
            AUDIO_MUSIC_FORCE_TRACK( "DOCKS_SONG_02", "DOCKS_02_2_3", "", 0, 8000, 5000, -1082130432, 0 );
            l_U710 = 7;
        }
        break;
        case 7:
        if (l_U711 == 7)
        {
            AUDIO_MUSIC_FORCE_TRACK( "DOCKS_SONG_02", "DOCKS_02_2_3_5", "", 0, 6000, 6000, -1082130432, 0 );
            l_U723 = 0;
            l_U711 = 8;
            l_U710 = 8;
        }
        break;
        case 8:
        if (l_U711 == 8)
        {
            AUDIO_MUSIC_PRELOAD_ONESHOT( "DOCKS_ONESHOT_06", 0 );
            if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "TEH", "playing music: Sussesfully preloaded oneshot_06 ", 0 );
                l_U710 = 9;
            }
        }
        break;
        case 9:
        if (l_U711 == 9)
        {
            if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "TEH", "playing music: Succesfully played oneshot_06 ", 0 );
                AUDIO_MUSIC_PLAY_ONESHOT();
            }
            AUDIO_MUSIC_FORCE_TRACK( "DOCKS_SONG_02", "DOCKS_02_2", "", 0, 5000, 5000, -1082130432, 0 );
            l_U723 = 0;
            l_U710 = 10;
        }
        break;
        case 10:
        if (l_U711 == 10)
        {
             /* WRITESCRIPTLOG */ sub_1246( "TEH", "playing music: MC_ENTER_SLIP_WARE ", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "DOCKS_SONG_02", "DOCKS_02_2", "", 0, 5000, 5000, -1082130432, 0 );
            l_U710 = 12;
        }
        break;
        case 11:
         /* WRITESCRIPTLOG */ sub_1246( "TEH", "playing music: MC_RESTART_SLIPWAY_WAREHOUSE ", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "DOCKS_SONG_02", "DOCKS_02_2", "", 0, 5000, 5000, -1082130432, 0 );
        l_U710 = 12;
        break;
        case 12:
        if (l_U711 == 12)
        {
             /* WRITESCRIPTLOG */ sub_1246( "TEH", "playing music: MC_SLIPWARE_GUYS_Notice Max", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "DOCKS_SONG_02", "DOCKS_02_1_2", "", 0, 3000, 5000, -1082130432, 0 );
            l_U710 = 13;
        }
        break;
        case 13:
        if (l_U711 == 13)
        {
             /* WRITESCRIPTLOG */ sub_1246( "TEH", "playing music: MC_SLIPWARE_ALL_DEAD", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "DOCKS_SONG_02", "DOCKS_02_2", "", 0, 5000, 5000, -1082130432, 0 );
            l_U710 = 14;
        }
        break;
    }
    return;
}

/* TELEPORTPED */ void sub_23440(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

/* F_ISPEDINTRIGGERBOX */ int sub_23575(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, ref uParam1._fU0 );
    }
    return 0;
}

/* P_START_GAMEPLAY */ void sub_23736()
{
     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_START_GAMEPLAY start", 0 );
     /* P_SETUP_WEATHER_TIMEOFDAY */ sub_23803( 2 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
    if ((NOT ((l_U724) AND (IS_MAGDEMO()))) AND (g_U789 == 2))
    {
         /* WRITESCRIPTLOG */ sub_1246( "BSW", "P_START_GAMEPLAY current checkpoint = MCE_SLIPWAY", 0 );
         /* LOADISEQ */ sub_24332( -1043438555, 1 );
         /* P_CLOSEDOOR */ sub_24629( ref g_U1390, 1 );
         /* P_SETDOORLOCKED */ sub_24773( ref g_U1390, 1 );
         /* P_SET_WAREHOUSE_DOOR */ sub_24920( 1 );
         /* P_SLIP_CREATE_UNLOADER_TRUCK */ sub_25152();
        l_U1031 = 0;
    }
    else if ((g_U789 == 3) || (g_U788 == 3))
    {
        ;
    }
    else
    {
         /* LOADISEQ */ sub_24332( -449677894, 0 );
         /* P_SLIP_START_SERRANO_BOAT_CREW */ sub_27694();
         /* P_SET_WAREHOUSE_DOOR */ sub_24920( 1 );
         /* P_SLIP_CREATE_UNLOADER_TRUCK */ sub_25152();
        l_U1030 = 0;
    }
     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_START_GAMEPLAY end", 0 );
    return;
}

/* P_SETUP_WEATHER_TIMEOFDAY */ void sub_23803(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_1246( "SP", "P_SETUP_WEATHER_TIMEOFDAY", 0 );
    FREEZE_TIME_OF_DAY( 22, 0 );
    switch (uParam0)
    {
        case 0:
        case 1:
        SET_WEATHER_TYPE_NOW_PERSIST( "DRIZZLE" );
        SET_PUDDLES( 0.00000000, 0.07000000, 0.00000000, 0.11000000 );
        break;
        case 2:
        case 4:
        case 5:
        SET_WEATHER_TYPE_NOW_PERSIST( "RAIN" );
        SET_PUDDLES( 0.00000000, 0.07000000, 0.00000000, 0.67000000 );
        break;
        case 6:
        case 7:
        case 8:
        SET_WEATHER_TYPE_NOW_PERSIST( "STORMY" );
        SET_PUDDLES( 0.11000000, 0.07000000, 0.11000000, 0.90000000 );
        break;
        case 9:
        SET_WEATHER_TYPE_NOW_PERSIST( "STORMY" );
        SET_PUDDLES( 0.11000000, 0.07000000, 0.11000000, 1.00000000 );
        break;
        case 10:
        SET_WEATHER_TYPE_NOW_PERSIST( "STORMY" );
        FREEZE_TIME_OF_DAY( 21, 0 );
        break;
        default:
        SET_WEATHER_TYPE_NOW_PERSIST( "RAIN" );
        break;
    }
    return;
}

/* LOADISEQ */ void sub_24332(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to load does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 0)
    {
        ISEQ_REQUEST( uParam0 );
        ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
        if (iParam1 == 1)
        {
            while ((ISEQ_QUERY_STATE( uParam0, 1 )) == 1)
            {
                DISPLAYF( "[SP]### Waiting for interactive sequence to be loaded: {0} {1} ###", 2, 1281, ref uVar4, 513, uParam0 );
                WAIT( 0 );
            }
        }
    }
    return;
}

/* P_CLOSEDOOR */ void sub_24629(int iParam0, int iParam1)
{
    if (( /* F_DOESDOOREXIST */ sub_10976( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_11060( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    return;
}

/* P_SETDOORLOCKED */ void sub_24773(int iParam0, int iParam1)
{
    int iVar4;
    float fVar5;

    if (( /* F_DOESDOOREXIST */ sub_10976( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_11060( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
    }
    else
    {
        iVar4 = 0;
        fVar5 = 0.00000000;
        GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref iVar4, ref fVar5 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar5 );
    }
    return;
}

/* P_SET_WAREHOUSE_DOOR */ void sub_24920(boolean bParam0)
{
    if (bParam0)
    {
         /* P_SETDOORLOCKED */ sub_24773( ref g_U1418, 0 );
         /* P_SETDOORLOCKED */ sub_24773( ref g_U1411, 0 );
         /* P_OPENDOOR */ sub_11284( ref g_U1418, 1, 1, 0.10000000 );
         /* P_SETDOORLOCKED */ sub_24773( ref g_U1460, 0 );
         /* P_SETDOORLOCKED */ sub_24773( ref g_U1453, 0 );
         /* P_OPENDOOR */ sub_11284( ref g_U1460, 1, 1, 1065353216 );
         /* P_OPENDOOR */ sub_11284( ref g_U1453, 0, 1, 1065353216 );
         /* P_SETDOORLATCH */ sub_25053( ref g_U1453, 1 );
    }
    else
    {
         /* P_CLOSEDOOR */ sub_24629( ref g_U1418, 0 );
    }
    return;
}

/* P_SETDOORLATCH */ void sub_25053(int iParam0, unknown uParam1)
{
    if (( /* F_DOESDOOREXIST */ sub_10976( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_11060( iParam0 );
    }
    DOOR_FIND_CLOSEST_SET_LATCH( iParam0->_fU0, iParam0->_fU4, uParam1 );
    return;
}

/* P_SLIP_CREATE_UNLOADER_TRUCK */ void sub_25152()
{
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_SLIP_CREATE_UNLOADER_TRUCK start", 0 );
     /* CLEANVEHICLE */ sub_25246( l_U875 );
    l_U875 =  /* CREATEVEHICLE */ sub_25334( g_U1038, l_U876, l_U879, 1, 0, 0 );
    if ((IS_VEHICLE_DEAD( l_U875 )) == 0)
    {
        SET_VEHICLE_COLOUR_COMBINATION( l_U875, 0 );
        SET_VEHICLE_ON_GROUND_PROPERLY( l_U875 );
        SET_VEHICLE_LIGHTS( l_U875, 2 );
        SET_VEHICLE_LIGHT_MULTIPLIER( l_U875, 0.30000000 );
        REMOVE_VEHICLE_WINDOW( l_U875, 0 );
        REMOVE_VEHICLE_WINDOW( l_U875, 1 );
        SET_VEHICLE_DOOR_BROKEN( l_U875, 5, 1 );
        SET_VEHICLE_DOOR_CONTROL( l_U875, 2, 1, 1.00000000 );
        SET_VEHICLE_DOOR_CONTROL( l_U875, 3, 1, 1.00000000 );
        SET_VEHICLE_ENGINE_HEALTH( l_U875, 700 );
        SET_VEHICLE_EXTRA( l_U875, 1, 1 );
        SET_VEHICLE_EXTRA( l_U875, 2, 1 );
        SET_VEHICLE_EXTRA( l_U875, 3, 1 );
        SET_VEHICLE_EXTRA( l_U875, 4, 1 );
        SET_VEHICLE_EXTRA( l_U875, 5, 1 );
        SET_VEHICLE_EXTRA( l_U875, 6, 1 );
        SET_VEHICLE_EXTRA( l_U875, 7, 0 );
        SET_VEHICLE_EXTRA( l_U875, 8, 1 );
        START_PLAYBACK_RECORDED_VEHICLE( l_U875, l_U880 );
        SKIP_TIME_IN_PLAYBACK_RECORDED_VEHICLE( l_U875, 1600 );
        PAUSE_PLAYBACK_RECORDED_VEHICLE( l_U875 );
        SET_VEHICLE_PROOFS( l_U875, 1, 1, 1, 1, 1 );
        STOP_SCRIPT_STREAM( 1 );
         /* LOADSCRIPTSTREAM */ sub_26031( "S_MARINA_SLIPWAY_TRUCK_RADIO", 1, 1 );
        PLAY_SCRIPT_STREAM_FROM_VEHICLE( l_U875, 1 );
    }
    l_U887 =  /* CREATEOBJECT */ sub_10326( g_U1051, l_U888, l_U891, 0, 1, 0 );
    if ((DOES_OBJECT_EXIST( l_U887 )) == 1)
    {
        SET_OBJECT_PROOFS( l_U887, 0, 1, 0, 1, 1 );
        SET_OBJECT_HEALTH( l_U887, 1 );
        SET_OBJECT_ONLY_DAMAGED_BY_PLAYER( l_U887, 1 );
        CAMERA_CAN_TARGET_OBJECT( 1, l_U887 );
    }
     /* P_HANDLE_TRUCK_COVERPOINTS */ sub_26325( 1 );
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_SLIP_CREATE_UNLOADER_TRUCK end", 0 );
    return;
}

/* CLEANVEHICLE */ void sub_25246(unknown uParam0)
{
    if (IS_VEHICLE_DEAD( uParam0 ))
    {
        ;
    }
    if (DOES_VEHICLE_EXIST( uParam0 ))
    {
        DELETE_VEHICLE( ref uParam0 );
    }
    return;
}

/* CREATEVEHICLE */ void sub_25334(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, int iParam5, unknown uParam6, unknown uParam7)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a vehicle with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_2625( uParam0, 1 );
    }
    Result = CREATE_VEHICLE( uParam0, uParam1, uParam4, uParam6, uParam7 );
    if (iParam5 == 1)
    {
        while ((DOES_VEHICLE_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for vehicle to exist: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    if (DOES_VEHICLE_EXIST( Result ))
    {
        SET_PETROLTANK_BURN_RATE( Result, 125.00000000 );
    }
    return Result;
}

/* LOADSCRIPTSTREAM */ void sub_26031(unknown uParam0, unknown uParam1, int iParam2)
{
    if (iParam2 == 0)
    {
        REQUEST_SCRIPT_STREAM( uParam0, uParam1 );
    }
    else
    {
        while ((LOAD_SCRIPT_STREAM( uParam0, uParam1 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for script stream to be loaded: {} : {} ###", 2, 1537, uParam0, 513, uParam1 );
            WAIT( 0 );
        }
    }
    return;
}

/* P_HANDLE_TRUCK_COVERPOINTS */ void sub_26325(boolean bParam0)
{
    ENABLE_NORMAL_LINE( "ma_sec2", "GrabSpline55", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_E54BF468_Corner1", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_471EB808_Corner2", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_525C37DD_Popover1", bParam0 );
    ENABLE_NORMAL_LINE( "ma_sec2", "GrabSpline58", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_200B533C_Corner1", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_200B533C_Corner2", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_200B533C_Popover1", bParam0 );
    ENABLE_NORMAL_LINE( "ma_sec2", "GrabSpline56", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_40889436_Corner1", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_40889436_Corner2", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_40889436_Popover1", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_40889436_Popover2", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_40889436_Popover3", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_40889436_Popover4", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_40889436_Popover5", bParam0 );
    ENABLE_NORMAL_LINE( "ma_sec2", "GrabSpline57", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_FDDB0EDC_Corner1", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_FDDB0EDC_Corner2", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_FDDB0EDC_Popover1", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_FDDB0EDC_Popover2", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_FDDB0EDC_Popover3", bParam0 );
    ENABLE_COVERPOINTMP3( "GenCover", "E634EAAC_FDDB0EDC_Popover4", bParam0 );
    if (bParam0)
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_TRUCK_COVERPOINTS: Enabling truck coverpoints", "****" );
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_TRUCK_COVERPOINTS: Removing truck coverpoints", "****" );
    }
    return;
}

/* P_SLIP_START_SERRANO_BOAT_CREW */ void sub_27694()
{
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_SLIP_CREATE_SERRANO_BOAT_CREW start", 0 );
     /* CLEANVEHICLE */ sub_25246( l_U1248 );
    l_U1248 =  /* CREATEVEHICLE */ sub_25334( g_U1042, 0, 0, 0, 0.00000000, 1, 0, 0 );
    if ( /* IS_VEHICLE_VALID */ sub_27832( l_U1248 ))
    {
        SET_VEHICLE_ENGINE_ON( l_U1248, 1, 1 );
        SET_VEHICLE_EXTRA( l_U1248, 2, 1 );
        SET_VEHICLE_EXTRA( l_U1248, 3, 0 );
        SET_VEHICLE_COLOUR_COMBINATION( l_U1248, 0 );
    }
     /* CLEANPED */ sub_8951( l_U1206 );
    l_U1206 =  /* CREATEPED */ sub_9044( ref l_U1207 );
     /* F_GIVEPEDWEAPON */ sub_14439( l_U1206, 68019059, 25000, 0, 0 );
    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1206, 1 );
     /* CLEANPED */ sub_8951( l_U1220 );
    l_U1220 =  /* CREATEPED */ sub_9044( ref l_U1221 );
    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1220, 1 );
     /* CLEANPED */ sub_8951( l_U1234 );
    l_U1234 =  /* CREATEPED */ sub_9044( ref l_U1235 );
     /* F_GIVEPEDWEAPON */ sub_14439( l_U1234, -1074756423, 25000, 0, 0 );
    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1234, 1 );
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_SLIP_CREATE_SERRANO_BOAT_CREW end", 0 );
    return;
}

/* IS_VEHICLE_VALID */ int sub_27832(unknown uParam0)
{
    if ((NOT (IS_VEHICLE_DEAD( uParam0 ))) AND (DOES_VEHICLE_EXIST( uParam0 )))
    {
        return 1;
    }
    return 0;
}

/* F_ISPLAYERINTRIGGERBOX */ void sub_28248(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20)
{
    return  /* F_ISPEDINTRIGGERBOX */ sub_23575(  /* PLAYER_PED_ID */ sub_11897(), uParam0 );
}

/* P_HANDLE_CHECKPOINTS */ void sub_28333()
{
    if ((g_U789 == 3) || (g_U789 == 2))
    {
        if (( /* RESTARTING_CHECKPOINT */ sub_28398()) || (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )))
        {
             /* P_SETUP_PLAYER_DEATH_CAM */ sub_28856( 1 );
            if ( /* IS_RESTART_ACTIVE */ sub_28945())
            {
                ;
            }
            else
            {
                while (( /* F_CHECK_QUIT_RETRY */ sub_28999( 0 )) == 0)
                {
                    WAIT( 0 );
                }
                while (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() ))
                {
                    WAIT( 0 );
                }
            }
            if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_11935() )))
            {
                SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_11935(), 0, 0 );
            }
            if (IS_DEATH_PANEL_WIPE_ALLOWED() == 0)
            {
                 /* P_FADE_OUT_AND_WAIT */ sub_30417( 0 );
            }
             /* P_CLEAN_UP_DEATHCAM */ sub_30573();
             /* P_CLEANUP_ALL */ sub_30668();
            if (g_U789 == 2)
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "Restarting at SLIPWAY", 0 );
                 /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_11991( ref l_U390,  /* PLAYER_PED_ID */ sub_11897() );
                l_U724 = 0;
                 /* P_SETUP_STATIC_DATA */ sub_3900();
                 /* P_INITIALIZE_SCRIPT_DATA */ sub_7561();
                 /* P_SETUP_UNLOADERS */ sub_8857();
                 /* P_SLIPWAY_CRATES */ sub_10063( 1 );
                 /* P_SETUP_SLIPWAY_DOORS_AND_GATES */ sub_10832();
                 /* P_START_GAMEPLAY */ sub_23736();
                l_U710 = 2;
                l_U651 = 1;
            }
            else if (g_U789 == 3)
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "Restarting at SLIPWAY_WAREHOUSE", 0 );
                 /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_11991( ref l_U426,  /* PLAYER_PED_ID */ sub_11897() );
                 /* P_SETUP_STATIC_DATA */ sub_3900();
                 /* P_INITIALIZE_SCRIPT_DATA */ sub_7561();
                 /* P_START_GAMEPLAY */ sub_23736();
                l_U710 = 11;
                l_U651 = 4;
            }
            if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_11935() )))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "Restoring player control", 0 );
                SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_11935(), 1, 0 );
                SET_PLAYER_CAN_USE_SHOOTDODGE(  /* PLAYER_ID */ sub_11935(), 1 );
            }
        }
    }
    return;
}

/* RESTARTING_CHECKPOINT */ int sub_28398()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U0 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )))
        {
            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_11897(), 0 );
            SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_11935(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE(  /* PLAYER_ID */ sub_11935(), 1 );
            if ((IS_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_11897() )) == 0)
            {
                SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_11897(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

/* P_SETUP_PLAYER_DEATH_CAM */ void sub_28856(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_1246( "NS", "P_SETUP_PLAYER_DEATH_CAM()", 0 );
    uParam0 = uParam0;
    return;
}

/* IS_RESTART_ACTIVE */ void sub_28945()
{
    return g_U648;
}

/* F_CHECK_QUIT_RETRY */ int sub_28999(int iParam0)
{
    iParam0 = 1;
    switch (l_U379)
    {
        case 0:
        if (NOT ( /* HASTIMERBEENACTIVATED */ sub_29081( ref l_U381 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )))
            {
                l_U380 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
             /* CREATETIMER */ sub_29215( ref l_U381, l_U380, 1, 1 );
             /* STARTTIMER */ sub_29365( ref l_U381 );
        }
        if ( /* ISTIMERDONE */ sub_29498( ref l_U381 ))
        {
             /* WRITESCRIPTLOG */ sub_1246( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_11935() )))
            {
                SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_11935(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U379 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U379 = 2;
            }
            else
            {
                l_U379 = 3;
            }
        }
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_1246( "NS", "Player will QUIT", 0 );
         /* P_POSTQUITRETRYCLEANUP */ sub_29999();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_1246( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
         /* P_POSTQUITRETRYCLEANUP */ sub_29999();
        return 1;
        break;
    }
    return 0;
}

/* HASTIMERBEENACTIVATED */ int sub_29081(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

/* CREATETIMER */ void sub_29215(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

/* STARTTIMER */ void sub_29365(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

/* ISTIMERDONE */ int sub_29498(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

/* P_POSTQUITRETRYCLEANUP */ void sub_29999()
{
     /* WRITESCRIPTLOG */ sub_1246( "NS", "P_PostFailRetryCleanup", 0 );
     /* RESETTIMER */ sub_7652( ref l_U381 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_11935() )))
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_11935(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U378 = 0;
    l_U378 = l_U378;
    l_U379 = 0;
    return;
}

/* P_FADE_OUT_AND_WAIT */ void sub_30417(unknown uParam0)
{
    if ((IS_SCREEN_FADING_OUT() == 0) AND (IS_SCREEN_FADED_OUT() == 0))
    {
        DO_SCREEN_FADE_OUT( uParam0 );
        while (IS_SCREEN_FADED_OUT() == 0)
        {
            DISPLAYF( "[SP]### Waiting for screen to fade out... ###", 0 );
            WAIT( 0 );
        }
    }
    return;
}

/* P_CLEAN_UP_DEATHCAM */ void sub_30573()
{
     /* WRITESCRIPTLOG */ sub_1246( "NS", "P_CLEAN_UP_DEATHCAM()", 0 );
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    DESTROY_ALL_CAMS();
    return;
}

/* P_CLEANUP_ALL */ void sub_30668()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_CLEANUP_ALL start", 0 );
     /* CLEARWATERRESPAWNPOINTS */ sub_30727();
     /* P_CLEANUPTVASSETS */ sub_30779( ref l_U1728 );
     /* TERMINATEISEQ */ sub_30919( -449677894, 1 );
     /* TERMINATEISEQ */ sub_30919( -1043438555, 1 );
     /* TERMINATEISEQ */ sub_30919( -2116802822, 1 );
     /* TERMINATEISEQ */ sub_30919( 9319211, 1 );
     /* CLEANPED */ sub_8951( l_U1206 );
     /* CLEANPED */ sub_8951( l_U1220 );
     /* CLEANPED */ sub_8951( l_U1234 );
     /* CLEANPEDARRAY */ sub_31287( ref l_U758 );
     /* CLEANPEDARRAY */ sub_31287( ref l_U801 );
     /* CLEANPEDARRAY */ sub_31287( ref l_U859 );
     /* CLEANPEDARRAY */ sub_31287( ref l_U1434 );
     /* CLEANPEDARRAY */ sub_31287( ref l_U1484 );
     /* CLEANPED */ sub_8951( l_U1564 );
     /* CLEANPEDARRAY */ sub_31287( ref l_U1592 );
     /* CLEANVEHICLE */ sub_25246( l_U1248 );
     /* CLEANVEHICLE */ sub_25246( l_U875 );
     /* CLEANPLACEMENTARRAY */ sub_31440( ref l_U1721 );
     /* CLEANPLACEMENT */ sub_31495( l_U1720 );
     /* CLEANOBJECT */ sub_10759( l_U887 );
     /* CLEANOBJECTARRAY */ sub_31598( ref l_U884 );
     /* CLEANOBJECT */ sub_10759( l_U1740 );
     /* CLEANOBJECT */ sub_10759( l_U1741 );
     /* CLEANOBJECT */ sub_10759( l_U1853 );
     /* CLEANOBJECT */ sub_10759( l_U1854 );
     /* CLEANOBJECT */ sub_10759( l_U1753 );
    for ( I = 0; I <= 5; I++ )
    {
         /* CLEANOBJECT */ sub_10759( l_U1897[I]._fU0 );
    }
     /* RESETTIMER */ sub_7652( ref l_U827 );
     /* RESETTIMER */ sub_7652( ref l_U836 );
    if (IS_ANIMATED_CAMERA_PLAYING())
    {
        CAMERA_ANIMATED_STOP( 3000, 0 );
    }
    STOP_SCRIPT_STREAM( 0 );
    STOP_SCRIPT_STREAM( 1 );
    STOP_SOUND( l_U922, 0 );
    STOP_SOUND( l_U1934, 0 );
    ENABLE_WALLA_ZONE( "S_MARINA_WZ_CRATE_CONVERSATION", 0 );
     /* CLEAR_LOADED_CUTSCENE */ sub_31908( "05_02_docks_concat" );
     /* CLEAR_LOADED_CUTSCENE */ sub_31908( "MID_03_DOCKS_concat" );
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_CLEANUP_ALL end", 0 );
    return;
}

/* CLEARWATERRESPAWNPOINTS */ void sub_30727()
{
    l_U2 = 0;
    return;
}

/* P_CLEANUPTVASSETS */ void sub_30779(int iParam0)
{
    SET_TEXT_RENDER_ID( GET_SCRIPT_RENDERTARGET_RENDER_ID() );
    DRAW_RECT( 0.50000000, 0.50000000, 1.00000000, 1.00000000, 0, 0, 0, 255 );
    STOP_MOVIE( iParam0->_fU8 );
    RELEASE_MOVIE( iParam0->_fU8 );
    STOP_SOUND( iParam0->_fU28, 0 );
    RELEASE_SOUND_ID( iParam0->_fU28 );
    return;
}

/* TERMINATEISEQ */ void sub_30919(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to terminate does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 1)
    {
        ISEQ_TERMINATE( uParam0 );
    }
    ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
    if (iParam1 == 1)
    {
        while ((ISEQ_IS_LOADED( uParam0 )) == 1)
        {
            DISPLAYF( "[SP]### Waiting for interactive sequence to terminate: {0} {1} ###", 2, 1281, ref uVar4, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* CLEANPEDARRAY */ void sub_31287(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
         /* CLEANPED */ sub_8951( (uParam0^)[I] );
    }
    return;
}

/* CLEANPLACEMENTARRAY */ void sub_31440(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* CLEANPLACEMENT */ sub_31495( (uParam0^)[I] );
    }
    return;
}

/* CLEANPLACEMENT */ void sub_31495(unknown uParam0)
{
    if ((DOES_PLACEMENT_EXIST( uParam0 )) == 1)
    {
        REMOVE_PLACEMENT( uParam0 );
    }
    return;
}

/* CLEANOBJECTARRAY */ void sub_31598(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* CLEANOBJECT */ sub_10759( (uParam0^)[I] );
    }
    return;
}

/* CLEAR_LOADED_CUTSCENE */ void sub_31908(unknown uParam0)
{
    if ((CUTSCENE_NAMED_IS_LOADING( uParam0 )) || (CUTSCENE_IS_LOADED( uParam0 )))
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Clearing cutscene:", 0 );
         /* WRITE_STRING */ sub_1642( uParam0 );
        CLEAR_NAMED_CUTSCENE( uParam0 );
    }
    return;
}

/* P_HANDLE_EVENTS */ void sub_32396()
{
    unknown uVar2;
    int iVar3;

    if ((g_U789 == 3) || (g_U789 == 2))
    {
         /* UPDATEPLAYERWATERRESPAWN */ sub_32444();
    }
    switch (l_U651)
    {
        case 0:
         /* P_HANDLE_DISABLE_SHOOTDODGE */ sub_33819();
        if ( /* IS_MAX_VALID */ sub_34165())
        {
            if ( /* F_HANDLE_CUT_05_02_BLENDIN */ sub_34281())
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "Starting cutscene 05_02", "*****" );
                l_U1018 = 1;
                 /* LOADISEQ */ sub_24332( -1043438555, 0 );
                 /* P_PLAY_CUTSCENE_05_02_DOCKS */ sub_36829();
                 /* P_NIS_SABONETE_NIS_FINISHED */ sub_38004();
                l_U1031 = 0;
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_EVENTS: going to eMSS_Checkpoint_Start", "*****" );
                l_U651 = 1;
            }
        }
        break;
        case 1:
        if (l_U1031 != -1)
        {
             /* P_HANDLE_05_02_BLENDOUT */ sub_38615();
        }
        else
        {
             /* LOADISEQ */ sub_24332( -2116802822, 0 );
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_EVENTS: going to eMSS_Slipway", "*****" );
            l_U651 = 2;
        }
         /* P_HANDLE_TRUCK_STUFF */ sub_45530();
        break;
        case 2:
        if (NOT l_U764)
        {
            if ( /* IS_PED_VALID */ sub_34195( l_U758[0] ))
            {
                if (GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HAND( l_U758[0], 0, 0 ) ))
                {
                    l_U711 = 6;
                     /* WRITESCRIPTLOG */ sub_1246( "SBA", "pi_cs_unloader[0] has weapon", 0 );
                    l_U764 = 1;
                    if (NOT l_U818._fU20)
                    {
                         /* WRITESCRIPTLOG */ sub_1246( "SBA", "pi_cs_unloader[0] - start timer", 0 );
                         /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U818, 1500 );
                    }
                     /* PED_SET_REGISTER_TARGET_PLAYER */ sub_42672( ref l_U758[1] );
                }
                else if (NOT (IS_PED_DEAD( l_U758[0] )))
                {
                     /* MAL_WRITESCRIPTLOG */ sub_40110( "Waiting for pi_cs_unloader[0] to have drawn weapon" );
                }
            }
        }
        if (NOT l_U765)
        {
            if ( /* IS_PED_VALID */ sub_34195( l_U758[1] ))
            {
                if (GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HAND( l_U758[1], 0, 0 ) ))
                {
                    l_U711 = 6;
                     /* WRITESCRIPTLOG */ sub_1246( "SBA", "pi_cs_unloader[1] has weapon", 0 );
                    l_U765 = 1;
                    if (NOT l_U818._fU20)
                    {
                         /* WRITESCRIPTLOG */ sub_1246( "SBA", "pi_cs_unloader[1] - start timer", 0 );
                         /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U818, 1500 );
                    }
                     /* PED_SET_REGISTER_TARGET_PLAYER */ sub_42672( ref l_U758[0] );
                }
                else if (NOT (IS_PED_DEAD( l_U758[1] )))
                {
                     /* MAL_WRITESCRIPTLOG */ sub_40110( "Waiting for pi_cs_unloader[1] to have drawn weapon" );
                }
            }
        }
        if (NOT l_U1986)
        {
            if ( /* F_ISPLAYERINTRIGGERBOX */ sub_28248( l_U1965 ))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "RJM", "Disabling shootdodge near truck", 0 );
                SET_PLAYER_CAN_USE_SHOOTDODGE(  /* PLAYER_ID */ sub_11935(), 0 );
                l_U1986 = 1;
            }
        }
        else if (NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_28248( l_U1965 )))
        {
             /* WRITESCRIPTLOG */ sub_1246( "RJM", "Enabling shootdodge near truck", 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE(  /* PLAYER_ID */ sub_11935(), 1 );
            l_U1986 = 0;
        }
         /* P_HANDLE_TRUCK_STUFF */ sub_45530();
        if ((NOT (IS_BULLET_CAMERA_RUNNING( 0 ))) AND ((l_U804) AND (( /* F_NUM_CS_ALIVE_SLIPWAY */ sub_47826()) == 0)))
        {
            l_U711 = 9;
        }
        if (NOT l_U919)
        {
            if ( /* F_ISPLAYERINTRIGGERBOX */ sub_28248( l_U965 ))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "Player is through the gate!", 0 );
                 /* RESETTIMER */ sub_7652( ref l_U827 );
                 /* RESETTIMER */ sub_7652( ref l_U836 );
                if (( /* F_UNLOADERS_OUT_OF_ISEQ */ sub_43791()) AND (( /* F_NUM_CS_ALIVE_SLIPWAY */ sub_47826()) > 0))
                {
                     /* P_TASK_UNLOADER_ATTACK */ sub_48178();
                    if (NOT l_U804)
                    {
                         /* P_SETUP_UNLOADER_BACKUP */ sub_48703();
                        l_U804 = 1;
                    }
                     /* WRITESCRIPTLOG */ sub_1246( "SBA", "Sending in 1st backups early!", 0 );
                     /* P_ACTIVATEPEDARRAY */ sub_49488( ref l_U801 );
                    l_U711 = 7;
                     /* PED_ARRAY_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_49683( ref l_U801, 0 );
                    if (l_U805 == 0)
                    {
                         /* PED_TASK_ATTACK_MOVE */ sub_49836( l_U801[0], 71.46000000, -30.55200000, 2.15000000, 4, 30, -1082130432, 3 );
                         /* PED_TASK_ATTACK_MOVE */ sub_49836( l_U801[1], 67.85000000, -28.88100000, 2.14714700, 4, 30, -1082130432, 3 );
                         /* P_DIALOG_BACKUP_01 */ sub_49957();
                         /* P_TETHERPEDARRAY */ sub_51336( ref l_U1008, ref l_U801, 1 );
                         /* P_TETHERPEDARRAY */ sub_51336( ref l_U806, ref l_U801, 1 );
                    }
                    if (NOT l_U861)
                    {
                         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Sending in backups backups early!", 0 );
                         /* P_SETUP_UNLOADER_BACKUP_BACKUPS */ sub_51507();
                         /* PED_TASK_ATTACK_MOVE */ sub_49836( l_U859[0], 69.00000000, -29.51200000, 2.15000000, 4, 30, -1082130432, 3 );
                         /* P_TETHERPEDARRAY */ sub_51336( ref l_U1008, ref l_U859, 1 );
                         /* P_TETHERPEDARRAY */ sub_51336( ref l_U806, ref l_U859, 1 );
                        l_U861 = 1;
                    }
                     /* P_RESET_SLIPWAY_BULLETCAM */ sub_52242();
                    l_U862 = 0;
                }
                 /* P_TETHERPED */ sub_40547( ref l_U1008, l_U758[0], 1 );
                if ( /* F_ISPEDINVARIANTBOX */ sub_44805( l_U758[1], l_U808 ))
                {
                     /* PED_SET_COMBAT_MOVEMENT */ sub_52496( ref l_U758[1], 0 );
                }
                l_U919 = 1;
            }
        }
        if (l_U882)
        {
            if ((l_U761) AND (NOT l_U804))
            {
                 /* P_SETUP_UNLOADER_BACKUP */ sub_48703();
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "EXPLOSION: Starting timer to activate first backups", 0 );
                 /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U827, 1500 );
                 /* P_RESET_SLIPWAY_BULLETCAM */ sub_52242();
                l_U804 = 1;
            }
            if ( /* ISTIMERDONE */ sub_29498( ref l_U827 ))
            {
                 /* P_ACTIVATEPEDARRAY */ sub_49488( ref l_U801 );
                l_U711 = 7;
                l_U805 = 1;
                 /* P_DIALOG_BACKUP_01 */ sub_49957();
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "EXPLOSION: Starting timer to spawn next backups", 0 );
                 /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U836, 1000 );
                l_U862 = 0;
            }
            if ((NOT l_U861) AND (l_U804))
            {
                if ( /* ISTIMERDONE */ sub_29498( ref l_U836 ))
                {
                     /* P_SETUP_UNLOADER_BACKUP_BACKUPS */ sub_51507();
                    l_U861 = 1;
                }
            }
            if ((NOT l_U920) AND (l_U861))
            {
                if ( /* F_ISPEDINTRIGGERBOX */ sub_23575( l_U859[0], l_U965 ))
                {
                    TASK_AIM_GUN_AT_PED( l_U859[0],  /* PLAYER_PED_ID */ sub_11897(), 250, 0 );
                     /* PED_SET_REGISTER_TARGET_PLAYER */ sub_42672( ref l_U859[0] );
                     /* P_TETHERPEDARRAY */ sub_51336( ref l_U1008, ref l_U859, 1 );
                     /* P_TETHERPEDARRAY */ sub_51336( ref l_U806, ref l_U859, 1 );
                    l_U920 = 1;
                }
            }
        }
        else if (NOT l_U919)
        {
            if ((l_U761) AND (NOT l_U804))
            {
                if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_47870( ref l_U758 )) > 0)
                {
                    if ( /* F_UNLOADER_BACKUP_READY */ sub_53014())
                    {
                         /* P_SETUP_UNLOADER_BACKUP */ sub_48703();
                         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Starting timer to activate first backups", 0 );
                         /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U827, 1500 );
                         /* P_RESET_SLIPWAY_BULLETCAM */ sub_52242();
                        l_U804 = 1;
                    }
                }
            }
            if ( /* ISTIMERDONE */ sub_29498( ref l_U827 ))
            {
                 /* P_ACTIVATEPEDARRAY */ sub_49488( ref l_U801 );
                l_U711 = 7;
                l_U805 = 1;
                 /* P_DIALOG_BACKUP_01 */ sub_49957();
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "Starting timer to spawn next backups", 0 );
                 /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U836, 1000 );
                l_U862 = 0;
            }
            if ((NOT l_U861) AND (l_U804))
            {
                if ( /* ISTIMERDONE */ sub_29498( ref l_U836 ))
                {
                     /* P_SETUP_UNLOADER_BACKUP_BACKUPS */ sub_51507();
                    l_U861 = 1;
                }
            }
            if ((NOT l_U920) AND (l_U861))
            {
                if ( /* F_ISPEDINTRIGGERBOX */ sub_23575( l_U859[0], l_U965 ))
                {
                    TASK_AIM_GUN_AT_PED( l_U859[0],  /* PLAYER_PED_ID */ sub_11897(), 250, 0 );
                     /* PED_SET_REGISTER_TARGET_PLAYER */ sub_42672( ref l_U859[0] );
                     /* P_TETHERPEDARRAY */ sub_51336( ref l_U1008, ref l_U859, 1 );
                     /* P_TETHERPEDARRAY */ sub_51336( ref l_U806, ref l_U859, 1 );
                    l_U920 = 1;
                }
            }
        }
        if ((NOT l_U767) AND ( /* IS_PED_VALID */ sub_34195( l_U758[1] )))
        {
            if (NOT ( /* F_ISPEDINVARIANTBOX */ sub_44805( l_U758[1], l_U808 )))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "Unloader is out of truck - set new tethers, allow movement", "***" );
                SET_PED_COMBAT_MOVEMENT( l_U758[1], 2 );
                RESET_PED_TETHERING( l_U758[1] );
                 /* P_TETHERPED */ sub_40547( ref l_U806, l_U758[1], 1 );
                 /* P_TETHERPED */ sub_40547( ref l_U807, l_U758[1], 1 );
                 /* P_TETHERPED */ sub_40547( ref l_U1008, l_U758[1], 1 );
                l_U767 = 1;
            }
        }
        if (l_U805 != 0)
        {
             /* P_HANDLE_CS_GATE_ISEQUENCE */ sub_54085();
        }
        if ((NOT l_U804) AND (NOT l_U1269))
        {
            if ((NOT (IS_BULLET_CAMERA_RUNNING( 0 ))) AND (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_47870( ref l_U758 )) == 0))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "OK for P_MONOLOG_MAX_LOW_PROFILE: starting timer ", 0 );
                 /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U1270, 750 );
                l_U1269 = 1;
            }
        }
        if ( /* ISTIMERDONE */ sub_29498( ref l_U1270 ))
        {
             /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U691, 3000 );
             /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U700, 40000 );
             /* P_MONOLOG_MAX_LOW_PROFILE */ sub_57807();
        }
        if ((l_U804) AND (( /* F_NUM_CS_ALIVE_SLIPWAY */ sub_47826()) == 0))
        {
            if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
            {
                if ((l_U1369 == 0) AND (( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_58029()) == 0))
                {
                    l_U1369 = 1;
                     /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U691, 2000 );
                     /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U700, 40000 );
                }
            }
        }
        if ( /* F_ISPLAYERINTRIGGERBOX */ sub_28248( l_U1379 ))
        {
            if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_58029()))
            {
                if ( /* ISTIMERDONE */ sub_29498( ref l_U691 ))
                {
                     /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_58229( "SMAR_MKEBTA", ref l_U1319 );
                }
            }
        }
        if ( /* ISTIMERDONE */ sub_29498( ref l_U700 ))
        {
             /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_58229( "SMAR_MKEBTB", ref l_U1329 );
        }
        if (NOT l_U865)
        {
            if (( /* IS_PED_VALID */ sub_34195( l_U758[0] )) AND ( /* F_ISPLAYERINTRIGGERBOX */ sub_28248( l_U944 )))
            {
                if (NOT (CAN_PED_SEE_OTHER_PED( l_U758[0],  /* PLAYER_PED_ID */ sub_11897(), 360, 12 )))
                {
                     /* WRITESCRIPTLOG */ sub_1246( "SBA", "Max needed flushing", "*****" );
                     /* P_TASK_UNLOADER_ATTACK */ sub_48178();
                    l_U865 = 1;
                }
            }
        }
        if ((l_U761) AND (NOT l_U862))
        {
            if (( /* F_NUM_CS_ALIVE_SLIPWAY */ sub_47826()) <= 1)
            {
                 /* P_ASSIGN_SLIPWAY_CS_BULLET_CAM */ sub_58586();
                l_U862 = 1;
            }
        }
        if (l_U917 == 1)
        {
             /* P_HANDLE_SLIPWAY_TO_WAREHOUSE_GATE_SOUND */ sub_59664();
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_35035( ref l_U1379, 0 ))
        {
             /* LOADSEAMLESSCUTSCENE */ sub_34474( "MID_03_DOCKS_concat", 0 );
             /* LOADMODEL */ sub_2625( 509064891, 0 );
             /* LOADMODEL */ sub_2625( g_U1028, 0 );
             /* P_CREATE_WH_LIGHTS */ sub_59963( 0, 0 );
             /* LOADMODEL */ sub_2625( g_U1063, 1 );
             /* P_CREATE_WH_GARAGEDOOR */ sub_61105();
        }
        if (( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_35035( ref l_U1595, 0 )) == 1)
        {
             /* P_OPENDOOR */ sub_11284( ref g_U1425, 0, 1, 1065353216 );
             /* P_SETDOORLATCH */ sub_25053( ref g_U1425, 1 );
             /* P_CREATE_WAREHOUSE_OFFICE_PLACEMENTS */ sub_61449();
             /* P_CREATE_BLANK_MONITOR */ sub_62034( 1 );
             /* P_CREATE_RANSOM_NOTE_2 */ sub_62328();
             /* LOADMODEL */ sub_2625( g_U1093, 1 );
             /* DISABLETIMER */ sub_64448( ref l_U691 );
             /* P_OPENDOOR */ sub_11284( ref g_U1439, 1, 1, 1065353216 );
             /* P_SETDOORLATCH */ sub_25053( ref g_U1439, 1 );
             /* P_OPENDOOR */ sub_11284( ref g_U1432, 0, 1, 1065353216 );
             /* P_SETDOORLATCH */ sub_25053( ref g_U1432, 1 );
             /* LOADISEQ */ sub_24332( 9319211, 0 );
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_35035( ref l_U1617, 0 ))
        {
             /* DISABLETIMER */ sub_64448( ref l_U700 );
             /* DISABLETIMER */ sub_64448( ref l_U691 );
            l_U660 = 1;
             /* P_SET_WAREHOUSE_DOOR */ sub_24920( 0 );
             /* P_REMOVE_TRUCK_UNLOADERS */ sub_64601();
             /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U895, 2000 );
            if ( /* IS_MAX_VALID */ sub_34165())
            {
                SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_11897(), 1 );
                SET_PLAYER_CAN_USE_SHOOTDODGE(  /* PLAYER_ID */ sub_11935(), 0 );
            }
             /* LOADMODEL */ sub_2625( g_U1028, 1 );
             /* P_CREATE_FABIANA_AND_THUGS */ sub_64907();
        }
        if (l_U660)
        {
             /* HANDLE_WAREHOUSE_FX */ sub_65168();
        }
        if (( /* ISTIMERDONE */ sub_29498( ref l_U895 )) || ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_35035( ref l_U1638, 0 )))
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "Advancing to eMSS_Warehouse_MID03 state", 0 );
             /* RESETTIMER */ sub_7652( ref l_U895 );
            l_U651 = 3;
        }
        break;
        case 3:
        TOGGLE_WEAPON_ATTACHMENT( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_11897(), 0, 0 ), 14, 0 );
         /* P_CREATE_WAREHOUSE_CS */ sub_66024();
         /* P_PLAY_CUTSCENE_MID_03_DOCKS */ sub_66328();
        l_U1679 = 1;
         /* P_SETDOORLOCKED */ sub_24773( ref g_U1418, 1 );
         /* P_SETDOORLOCKED */ sub_24773( ref g_U1411, 1 );
        if ( /* IS_MAX_VALID */ sub_34165())
        {
            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_11897(), 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE(  /* PLAYER_ID */ sub_11935(), 1 );
        }
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Advancing to eMSS_Warehouse state", 0 );
        l_U651 = 5;
        break;
        case 4:
         /* P_CREATE_WAREHOUSE_CS */ sub_66024();
         /* PED_ARRAY_SET_VISIBILITY */ sub_67337( ref l_U1434, 1 );
         /* P_SET_WAREHOUSE_CS_TRAITS */ sub_69463();
         /* LOADISEQ */ sub_24332( 9319211, 1 );
        ISEQ_REGISTER_ENTITY( 9319211, "cs1", l_U1434[0], 0 );
        ISEQ_REGISTER_ENTITY( 9319211, "cs2", l_U1434[1], 0 );
         /* TELEPORTPED */ sub_23440( l_U1434[0], l_U1437, 180 );
         /* TELEPORTPED */ sub_23440( l_U1434[1], l_U1440, 180 );
        ISEQ_START( 9319211 );
        if (IS_DEATH_PANEL_WIPE_ALLOWED())
        {
            DO_SCREEN_FADE_IN( 0 );
        }
         /* P_POST_MID03_SETUP_BLENDOUT */ sub_69164();
         /* P_CREATE_WAREHOUSE_OFFICE_PLACEMENTS */ sub_61449();
         /* P_CREATE_BLANK_MONITOR */ sub_62034( 0 );
         /* P_CREATE_RANSOM_NOTE_2 */ sub_62328();
         /* P_CREATE_WH_LIGHTS */ sub_59963( 1, 0 );
         /* P_SETDOORLOCKED */ sub_24773( ref g_U1418, 1 );
         /* P_SETDOORLOCKED */ sub_24773( ref g_U1411, 1 );
         /* P_OPENDOOR */ sub_11284( ref g_U1425, 0, 1, 1065353216 );
         /* P_SETDOORLATCH */ sub_25053( ref g_U1425, 1 );
         /* LOADMODEL */ sub_2625( g_U1063, 1 );
         /* P_CREATE_WH_GARAGEDOOR */ sub_61105();
        l_U1679 = 1;
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "eMSS_Warehouse_Checkpoint: Advancing to eMSS_Warehouse state", 0 );
        l_U651 = 5;
         /* NIS_PRE_SETUP */ sub_32705( 1, 0, 0, 1 );
         /* P_FADE_IN_AND_WAIT */ sub_70235( 1000 );
        break;
        case 5:
        if ((ISEQ_QUERY_ENTITY_ANIMATION_PHASE( 9319211, "cs1", "VIGNETTE_A" )) > 0.67000000)
        {
             /* PED_ARRAY_SET_REGISTER_TARGET_PLAYER */ sub_56439( ref l_U1434 );
        }
        if (NOT l_U1540)
        {
            if (l_U1679 == 0)
            {
                if ( /* F_WAREHOUSE_START_CS_BACKUP */ sub_70472( ref l_U1443 ))
                {
                     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_9877( ref l_U1484, "cs_warehouseB" );
                     /* P_TETHERPEDARRAY */ sub_51336( ref l_U1616, ref l_U1434, 1 );
                     /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U1542, 500 );
                    l_U1540 = 1;
                }
            }
        }
        if (l_U1679 != 0)
        {
             /* P_HANDLE_MID03_BLENDOUT */ sub_71141();
        }
        if ((NOT g_U1224) AND ( /* ISTIMERDONE */ sub_29498( ref l_U809 )))
        {
            g_U1224 = 1;
        }
        if ((l_U1540) AND (NOT l_U1541))
        {
            if ( /* F_SAFE_TO_DEPLOY_FINAL_WAVE */ sub_72351())
            {
                 /* P_SEND_IN_LAST_WAVE */ sub_72528();
                 /* CREATETIMER */ sub_29215( ref l_U809, 50, 1, 0 );
                 /* STARTTIMER */ sub_29365( ref l_U809 );
                l_U1728._fU24 = 4;
                 /* P_HANDLE_SCREEN */ sub_67561( ref l_U1728 );
                l_U1541 = 1;
            }
        }
        if (NOT l_U1719)
        {
            if ((l_U1541) AND (l_U1540))
            {
                iVar3 = ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_47870( ref l_U1434 )) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_47870( ref l_U1484 ));
                if ((NOT l_U1718) AND (iVar3 == 1))
                {
                     /* P_ASSIGN_WAREHOUSE_BULLET_CAM */ sub_72988();
                    l_U1718 = 1;
                }
                if ((NOT (IS_BULLET_CAMERA_RUNNING( 0 ))) AND (iVar3 == 0))
                {
                     /* WRITESCRIPTLOG */ sub_1246( "SBA", "All warehouse enemies dead, bullet cam done", 0 );
                    l_U711 = 13;
                     /* P_SET_POI_AVAILABLE */ sub_63951( ref l_U1755, 1 );
                    ENABLE_WALLA_ZONE( "S_MARINA_WZ_CRATE_CONVERSATION", 1 );
                    l_U1719 = 1;
                }
            }
        }
         /* P_HANDLE_RANSOM_NOTE2_POI */ sub_73607();
        if ((NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_28248( l_U630 ))) AND (l_U1719))
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "eMSS_Warehouse_Checkpoint: Advancing to eMSS_AllDead state", 0 );
            if (NOT g_U1224)
            {
                g_U1224 = 1;
            }
             /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U1709, 1500 );
             /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U1700, 40000 );
            l_U651 = 6;
        }
        if (l_U1540)
        {
             /* P_PEDARRAY_HEIGHT_SAFETY_CHECK */ sub_77597( ref l_U1434, -1054867456 );
             /* P_PEDARRAY_HEIGHT_SAFETY_CHECK */ sub_77597( ref l_U1484, -1054867456 );
        }
        break;
        case 6:
         /* P_HANDLE_RANSOM_NOTE2_POI */ sub_73607();
        if (l_U662 == 0)
        {
             /* TAKE_PAINKILLER_ARRAY_SNAPSHOT */ sub_77884( ref l_U1721, ref l_U1724 );
            if ((GET_RANDOM_FLOAT_IN_RANGE( 0, 1065353216 )) < 0.50000000)
            {
                l_U1727 = "SMAR_MXFNPL7";
            }
            else
            {
                l_U1727 = "SMAR_MXFNPL6";
            }
            l_U662 = 1;
        }
        if (l_U661 == 0)
        {
            l_U661 =  /* UPDATE_PILL_VO */ sub_78200( l_U1727, ref l_U1721, ref l_U1724 );
            if (l_U661)
            {
                g_U1641 = 1;
            }
        }
        if ( /* ISTIMERDONE */ sub_29498( ref l_U1709 ))
        {
             /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_58229( "SMAR_MGKM2A", ref l_U1339 );
        }
        if ( /* ISTIMERDONE */ sub_29498( ref l_U1700 ))
        {
             /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U1370, 30000 );
             /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_58229( "SMAR_MGKM1A", ref l_U1349 );
        }
        if ( /* ISTIMERDONE */ sub_29498( ref l_U1370 ))
        {
             /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_58229( "SMAR_MGKM3A", ref l_U1359 );
        }
        if ( /* IS_MAX_VALID */ sub_34165())
        {
            if ( /* F_ISPLAYERINTRIGGERBOX */ sub_28248( l_U609 ))
            {
                if (NOT (GET_IS_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_11897() )))
                {
                    SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_11897(), 1 );
                }
            }
            else if (GET_IS_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_11897() ))
            {
                SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_11897(), 0 );
            }
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_35035( ref l_U630, 0 ))
        {
            RELEASE_NAMED_SCRIPT_AUDIO_BANK( l_U652 );
            PLAY_IMAGEFX( "DISTORT_INTERLACE_MIDDLE_INVRT", 4, 1 );
             /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U672, 500 );
        }
        if ( /* ISTIMERDONE */ sub_29498( ref l_U672 ))
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "Cleaning up warehouse enemies!", 0 );
             /* CLEANPEDARRAY */ sub_31287( ref l_U1434 );
             /* CLEANPEDARRAY */ sub_31287( ref l_U1484 );
             /* MAR_HOLSTERRIFLEORDUALANDDRAWPISTOL */ sub_78792( ref g_U1639, ref g_U1640 );
            ENABLE_WALLA_ZONE( "S_MARINA_WZ_CRATE_CONVERSATION", 0 );
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "Passing off to the container yard script!", "***" );
            g_U1225 = 1;
            l_U651 = 7;
        }
        break;
        case 7: break;
    }
    return;
}

/* UPDATEPLAYERWATERRESPAWN */ void sub_32444()
{
    unknown uVar2;
    int I;
    int iVar4;
    float fVar5;
    float fVar6;
    float fVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;

    uVar2 =  /* PLAYER_PED_ID */ sub_11897();
    iVar4 = -1;
    fVar5 = 0.00000000;
    fVar6 = 9999.00000000;
    fVar7 = 0.00000000;
    switch (l_U65)
    {
        case 0:
        if ((NOT IS_LAST_MAN_STANDING_ACTIVE()) AND (IS_PED_IN_WATER( uVar2 )))
        {
            if (NOT (PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_11897(), "/Global/Player/PlayerLoco/PlayerLoco_WATER/TreadWater" )))
            {
                PRINTSTRING( "Failed to play tread water action node!" );
                PRINTNL();
            }
             /* NIS_PRE_SETUP */ sub_32705( 1, 0, 0, 1 );
             /* CREATETIMER */ sub_29215( ref l_U66, 3000, 1, 0 );
             /* STARTTIMER */ sub_29365( ref l_U66 );
            l_U65 = 1;
             /* WRITE_STRING */ sub_1642( "Water Respawn: Timer started" );
        }
        break;
        case 1:
        if ( /* ISTIMERDONE */ sub_29498( ref l_U66 ))
        {
             /* P_FADE_OUT_AND_WAIT */ sub_30417( 1000 );
            l_U65 = 2;
             /* WRITE_STRING */ sub_1642( "Water Respawn: Timer expired, fading out" );
        }
        break;
        case 2:
        if (IS_SCREEN_FADED_OUT())
        {
            for ( I = 0; I <= (l_U2 - 1); I++ )
            {
                fVar7 = GET_DISTANCE_BETWEEN_COORDS( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uVar2 ), l_U4[I]._fU0, 1 );
                if (fVar7 < fVar6)
                {
                    iVar4 = I;
                    fVar6 = fVar7;
                }
            }
            GET_GROUND_Z_FOR_3D_COORD( l_U4[iVar4]._fU0, ref fVar5 );
            uVar8 = {l_U4[iVar4]._fU0._fU0, l_U4[iVar4]._fU0._fU4, fVar5};
             /* TELEPORTPED */ sub_23440(  /* PLAYER_PED_ID */ sub_11897(), uVar8, l_U4[iVar4]._fU12 );
            SET_GAMEPLAY_CAM_RELATIVE_HEADING( l_U4[iVar4]._fU16, 1065353216, 0 );
            SET_GAMEPLAY_CAM_RELATIVE_PITCH( l_U4[iVar4]._fU20, 1065353216, 0 );
            if (NOT (PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_11897(), "/Global/Player/PlayerLoco/PlayerLoco_WATER/DryOff" )))
            {
                PRINTSTRING( "Failed to play dry off action node!" );
                PRINTNL();
            }
            l_U65 = 0;
            DO_SCREEN_FADE_IN( 1000 );
             /* NIS_POST_SETUP */ sub_33371( 1, 1 );
             /* WRITE_STRING */ sub_1642( "Water Respawn: Player respawned, fading in" );
        }
        break;
        default: break;
    }
    return;
}

/* NIS_PRE_SETUP */ void sub_32705(int iParam0, int iParam1, unknown uParam2, boolean bParam3)
{
    END_POSTFX_BLENDER( 12, 0 );
    if (bParam3)
    {
        STOP_ALL_IMAGEFX( 0 );
    }
    SET_WIDESCREEN_BORDERS( 1, 500 );
    DISPLAY_HUD( 0 );
    if (iParam0 == 1)
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )))
        {
            SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_11935(), 0, uParam2 );
            SET_PED_DUCKING(  /* PLAYER_PED_ID */ sub_11897(), 0 );
            if (iParam1 == 1)
            {
                CLEAR_PED_TASKS_IMMEDIATELY(  /* PLAYER_PED_ID */ sub_11897() );
            }
            SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_11897(), 1 );
        }
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    return;
}

/* NIS_POST_SETUP */ void sub_33371(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )))
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_11935(), 1, 0 );
        SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_11897(), 0 );
        if (bParam0)
        {
             /* P_MAX_RELOAD_WEAPONS */ sub_33469();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

/* P_MAX_RELOAD_WEAPONS */ void sub_33469()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_11897(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_11897(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP(  /* PLAYER_PED_ID */ sub_11897(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP(  /* PLAYER_PED_ID */ sub_11897(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

/* P_HANDLE_DISABLE_SHOOTDODGE */ void sub_33819()
{
    if ( /* F_ISPLAYERINTRIGGERBOX */ sub_28248( l_U525 ))
    {
        if (NOT l_U658)
        {
             /* WRITESCRIPTLOG */ sub_1246( "RJM", "HANDLE_EVENTS - Player entered the shootdodge disabling volume, shut it down!", 0 );
            if ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_11935() )) == 0)
            {
                SET_PLAYER_CAN_USE_SHOOTDODGE(  /* PLAYER_ID */ sub_11935(), 0 );
            }
            l_U658 = 1;
        }
    }
    else if (l_U658)
    {
         /* WRITESCRIPTLOG */ sub_1246( "RJM", "HANDLE_EVENTS - Player left the shootdodge disabling volume, re-enable it!", 0 );
        if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_11935() )))
        {
            SET_PLAYER_CAN_USE_SHOOTDODGE(  /* PLAYER_ID */ sub_11935(), 1 );
        }
        l_U658 = 0;
    }
    return;
}

/* IS_MAX_VALID */ int sub_34165()
{
    if ( /* IS_PED_VALID */ sub_34195(  /* PLAYER_PED_ID */ sub_11897() ))
    {
        return 1;
    }
    return 0;
}

/* IS_PED_VALID */ int sub_34195(unknown uParam0)
{
    if ((NOT (IS_PED_DEAD( uParam0 ))) AND (DOES_PED_EXIST( uParam0 )))
    {
        return 1;
    }
    return 0;
}

/* F_HANDLE_CUT_05_02_BLENDIN */ void sub_34281()
{
    int Result;

    Result = 0;
    switch (l_U1030)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_HANDLE_CUT_05_02_BLENDIN: ISS_SCRIPT_LOADING", "***" );
         /* LOADISEQ */ sub_24332( -449677894, 1 );
         /* LOADSEAMLESSCUTSCENE */ sub_34474( "05_02_docks_concat", 0 );
         /* CLEANCAMERA */ sub_34818( ref l_U1029 );
        l_U1029 = CREATE_CAM( "DEFAULT_BULLET_CAMERA", 1 );
        SETUP_BULLET_CAMERA_ANIM_SCENE( l_U1029,  /* PLAYER_PED_ID */ sub_11897(),  /* PLAYER_PED_ID */ sub_11897() );
        STOP_SCRIPT_STREAM( 0 );
         /* LOADSCRIPTSTREAM */ sub_26031( "SMAR_SLIPWAY_SNEAK", 0, 1 );
         /* CREATETIMER */ sub_29215( ref l_U1020, 1850, 1, 0 );
        l_U1030 = 1;
        break;
        case 1:
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_35035( ref l_U462, 0 ))
        {
            SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_11935(), 0, 0 );
            TASK_FOLLOW_NAV_MESH_TO_COORD(  /* PLAYER_PED_ID */ sub_11897(), g_U1357, 2, 20000, 1048576000, 0, 0 );
            l_U711 = 3;
            l_U1030 = 2;
        }
        break;
        case 2:
        if (NOT l_U659)
        {
            if ( /* F_ISPLAYERINTRIGGERBOX */ sub_28248( l_U483 ))
            {
                l_U659 = 1;
            }
        }
        if (NOT l_U681)
        {
            if ( /* IS_MAX_VALID */ sub_34165())
            {
                if ((( /* F_GET_SCRIPT_TASK_STATUS */ sub_35325(  /* PLAYER_PED_ID */ sub_11897(), 29 )) == 7) || (IS_PED_AT_COORD(  /* PLAYER_PED_ID */ sub_11897(), g_U1357, 0.30000000, 0.30000000, 1.00000000, 0, 1 )))
                {
                     /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_HANDLE_CUT_05_02_BLENDIN: Player reached door, start blend in to cutscene", "***" );
                    if (IS_MAGDEMO())
                    {
                        FORCE_PAUSEMENU_OPEN( 1 );
                    }
                    PLAY_IMAGEFX( "GAMMA_SATURATION_COLOR_ZOOM_3", 4, 1 );
                     /* CREATETIMER */ sub_29215( ref l_U682, 350, 1, 0 );
                     /* STARTTIMER */ sub_29365( ref l_U682 );
                    l_U681 = 1;
                }
            }
        }
        if ( /* ISTIMERDONE */ sub_29498( ref l_U682 ))
        {
            if ( /* IS_MAX_VALID */ sub_34165())
            {
                 /* P_STARTLIGHTNING */ sub_35635( ref l_U1188 );
                 /* NIS_PRE_SETUP */ sub_32705( 1, 0, 0, 0 );
                if (IS_SCREEN_FADED_OUT())
                {
                    DO_SCREEN_FADE_IN( 250 );
                }
                 /* P_UNFREEZE_MAKE_VISIBLE_UNLOADERS */ sub_35872();
                PLAY_SCRIPT_STREAM_FRONTEND( 0 );
                TOGGLE_WEAPON_ATTACHMENT( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_11897(), 0, 0 ), 14, 0 );
                ISEQ_REGISTER_ENTITY( -449677894, "blend_player",  /* PLAYER_PED_ID */ sub_11897(), 0 );
                CAMERA_PLAY_ANIMATED( l_U653, l_U654, 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
                 /* TELEPORTPED */ sub_23440(  /* PLAYER_PED_ID */ sub_11897(), g_U1357, 0.00000000 );
                ISEQ_START( -449677894 );
                 /* STARTTIMER */ sub_29365( ref l_U1020 );
                 /* P_STARTLIGHTNING */ sub_35635( ref l_U1188 );
                l_U1030 = 3;
            }
        }
        break;
        case 3:
        if (NOT (IS_BULLET_CAMERA_SCENE_ACTIVE( l_U1029 )))
        {
            SETUP_BULLET_CAMERA_ANIM_SCENE( l_U1029,  /* PLAYER_PED_ID */ sub_11897(),  /* PLAYER_PED_ID */ sub_11897() );
            l_U711 = 5;
        }
        if ( /* IS_MAX_VALID */ sub_34165())
        {
            if ((PED_GET_ACTION_INTENTION_STATUS(  /* PLAYER_PED_ID */ sub_11897(), 47 )) == 3)
            {
                 /* CLEANCAMERA */ sub_34818( ref l_U1029 );
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_HANDLE_CUT_05_02_BLENDIN: iSeq is done...", "***" );
                l_U1030 = 5;
            }
        }
        break;
        case 5:
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_HANDLE_CUT_05_02_BLENDIN: ISS_SCRIPT_FINISHING --> ISS_SCRIPT_IDLE", "***" );
        STOP_SCRIPT_STREAM( 0 );
        Result = 1;
        l_U1030 = -1;
        break;
    }
    if (( /* ISTIMERDONE */ sub_29498( ref l_U1020 )) == 1)
    {
         /* WRITESCRIPTLOG */ sub_1246( "BSW", "slipway door timer is done", 0 );
        l_U710 = 5;
         /* P_HANDLE_MUSIC */ sub_21338();
         /* P_SETDOORLOCKED */ sub_24773( ref g_U1390, 0 );
         /* P_SETDOORMINMAXLIMIT */ sub_10941( ref g_U1390, -130.00000000, 0.00000000 );
         /* P_OPENDOOR */ sub_11284( ref g_U1390, 0, 0, 1065353216 );
    }
     /* P_HANDLE_THUNDER_LIGHTNING */ sub_36647( ref l_U1188 );
    return Result;
}

/* LOADSEAMLESSCUTSCENE */ void sub_34474(unknown uParam0, int iParam1)
{
    if (HAS_CUTSCENE_LOADED())
    {
        if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
        {
            SCRIPT_ASSERT( "Another cutscene is already loaded.  You can only load one cutscene into memory.  Your current cutscene will not load into memory.", 0 );
        }
    }
    if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
    {
        PRE_STREAM_SEAMLESS_CUTSCENE( uParam0 );
        if (iParam1 == 1)
        {
            while ((CUTSCENE_IS_LOADED( uParam0 )) == 0)
            {
                DISPLAYF( "[SP]### Waiting for seamless cutscene to load: {} ###", 1, 1537, uParam0 );
                WAIT( 0 );
            }
        }
    }
    return;
}

/* CLEANCAMERA */ void sub_34818(unknown uParam0)
{
    if ((DOES_CAM_EXIST( (uParam0^) )) == 1)
    {
        if ((IS_CAM_ACTIVE( (uParam0^) )) == 1)
        {
            SET_CAM_ACTIVE( (uParam0^), 0 );
        }
        DESTROY_CAM( (uParam0^) );
    }
    (uParam0^) = nil;
    return;
}

/* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ void sub_35035(int iParam0, unknown uParam1)
{
    if (iParam0->_fU64 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU64 =  /* F_ISPEDINTRIGGERBOX */ sub_23575(  /* PLAYER_PED_ID */ sub_11897(), (iParam0^) );
        if ((iParam0->_fU64) AND (uParam1))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU64;
}

/* F_GET_SCRIPT_TASK_STATUS */ int sub_35325(unknown uParam0, unknown uParam1)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        return GET_SCRIPT_TASK_STATUS( uParam0, uParam1 );
    }
    return 0;
}

/* P_STARTLIGHTNING */ void sub_35635(int iParam0)
{
    vector vVar3;

     /* WRITESCRIPTLOG */ sub_1246( "BSW", "[SP]### P_StartLightning ###", 0 );
    vVar3 = {0.00000000, 0.00000000, 0.00000000};
    if (iParam0->_fU16 == 1)
    {
        START_PARTICLE_FX_NON_LOOPED_AT_COORD( ref l_U145, iParam0->_fU4, vVar3, iParam0->_fU0 );
    }
    else
    {
        START_PARTICLE_FX_NON_LOOPED_AT_COORD( ref l_U153, iParam0->_fU4, vVar3, iParam0->_fU0 );
    }
    if (iParam0->_fU20 == 1)
    {
         /* CREATETIMER */ sub_29215( iParam0 + 24, iParam0->_fU60, 1, 0 );
         /* STARTTIMER */ sub_29365( iParam0 + 24 );
    }
    return;
}

/* P_UNFREEZE_MAKE_VISIBLE_UNLOADERS */ void sub_35872()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_UNFREEZE_MAKE_VISIBLE_UNLOADERS", "***" );
    for ( I = 0; I <= 1; I++ )
    {
         /* PED_SET_VISIBILITY */ sub_35993( l_U758[I], 1 );
        FREEZE_PED_POSITION( l_U758[I], 0 );
    }
    return;
}

/* PED_SET_VISIBILITY */ void sub_35993(unknown uParam0, unknown uParam1)
{
    if ( /* IS_PED_VALID */ sub_34195( uParam0 ))
    {
        SET_PED_VISIBLE( uParam0, uParam1 );
    }
    return;
}

/* P_HANDLE_THUNDER_LIGHTNING */ void sub_36647(int iParam0)
{
    if (( /* ISTIMERDONE */ sub_29498( iParam0 + 24 )) == 1)
    {
        if (iParam0->_fU68 == 0)
        {
            TRIGGER_THUNDER( iParam0->_fU64, 1 );
        }
        else
        {
            TRIGGER_LIGHTNING( 0 );
        }
    }
    return;
}

/* P_PLAY_CUTSCENE_05_02_DOCKS */ void sub_36829()
{
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_PLAY_CUTSCENE_05_02_DOCKS start", 0 );
     /* LOADSEAMLESSCUTSCENE */ sub_34474( "05_02_docks_concat", 1 );
     /* LOADISEQ */ sub_24332( -1043438555, 1 );
    if ( /* IS_PED_VALID */ sub_34195( l_U1206 ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U1206, "Sero_Unif_1", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U1206, 0, 0 ), "W_PI_PT92_Aa_H^1", 0 );
    }
    if ( /* IS_PED_VALID */ sub_34195( l_U758[0] ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U758[0], "G_CS_DOCK_B", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( l_U758[0], l_U731[0]._fU0, l_U731[0]._fU12 );
    }
    if ( /* IS_PED_VALID */ sub_34195( l_U758[1] ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U758[1], "G_CS_DOCK_B^1", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( l_U758[1], l_U731[1]._fU0, l_U731[1]._fU12 );
    }
    if ( /* IS_PED_VALID */ sub_34195( l_U1220 ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U1220, "G_CS_DOCK_B^2", 0 );
    }
    if ( /* IS_PED_VALID */ sub_34195( l_U1234 ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U1234, "G_CS_DOCK_B^3", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U1234, 0, 0 ), "W_AR_AK47_Aa_H", 0 );
    }
    if ( /* IS_VEHICLE_VALID */ sub_27832( l_U1248 ))
    {
        REGISTER_VEHICLE_PRE_SEAMLESS_CUTSCENE( l_U1248, "boat_chase", 0 );
    }
    ISEQ_REGISTER_ENTITY( -1043438555, "cs1", l_U758[0], 0 );
    ISEQ_REGISTER_ENTITY( -1043438555, "cs2", l_U758[1], 0 );
    CUTSCENE_REGISTER_ISEQ( -1043438555 );
    if ( /* IS_MAX_VALID */ sub_34165())
    {
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_11897(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
        CUTSCENE_REGISTER_PED_TELEPORT(  /* PLAYER_PED_ID */ sub_11897(), g_U790[2], g_U899[2] );
        CUTSCENE_REGISTER_SET_PLAYER_IN_COVER( "GenCover", "E634EAAC_80FA5AE5_popover1", 1, 0 );
        CUTSCENE_SET_COVER_CAMERA_DIRECTION( g_U936[2], g_U973[2] );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_11897(), 0, 0 ), "W_PI_PT92_Aa_H", 0 );
    }
    SET_WAKES_SECTION( 12 );
    if ( /* IS_VEHICLE_VALID */ sub_27832( l_U875 ))
    {
        SET_VEHICLE_COLLISION( l_U875, 0 );
        FREEZE_VEHICLE_POSITION( l_U875, 1 );
    }
    START_SEAMLESS_CUTSCENE();
    WAIT( 1 );
    while (NOT HAS_CUTSCENE_FINISHED())
    {
         /* P_HANDLE_MUSIC */ sub_21338();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "Killing blend-in animated cam", "*****" );
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        WAIT( 0 );
    }
    if ( /* IS_VEHICLE_VALID */ sub_27832( l_U875 ))
    {
        SET_VEHICLE_COLLISION( l_U875, 1 );
        FREEZE_VEHICLE_POSITION( l_U875, 0 );
    }
    if ( /* IS_PED_VALID */ sub_34195( l_U758[1] ))
    {
        SET_PED_PROP_INDEX( l_U758[1], 12, 0, 0, 255 );
    }
    SET_WAKES_SECTION( 0 );
    CAMERA_PLAY_ANIMATED( l_U653, l_U655, 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_PLAY_CUTSCENE_05_02_DOCKS end", 0 );
    return;
}

/* P_NIS_SABONETE_NIS_FINISHED */ void sub_38004()
{
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_NIS_SABONETE_NIS_FINISHED start", 0 );
    if (l_U1018)
    {
         /* MLOG */ sub_38119( "Cleaning peds", 0, 0 );
         /* CLEANPED */ sub_8951( l_U1220 );
         /* CLEANPED */ sub_8951( l_U1234 );
         /* CLEANPED */ sub_8951( l_U1206 );
         /* CLEANVEHICLE */ sub_25246( l_U1248 );
         /* MLOG */ sub_38119( "Unloading Models", 0, 0 );
         /* UNLOADMODEL */ sub_38269( g_U1027 );
         /* UNLOADMODEL */ sub_38269( g_U1042 );
    }
    SET_PED_VISIBLE( g_U779._fU4, 1 );
     /* P_CLOSEDOOR */ sub_24629( ref g_U1390, 1 );
     /* P_SETDOORLOCKED */ sub_24773( ref g_U1390, 1 );
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_NIS_SABONETE_NIS_FINISHED end", 0 );
    return;
}

/* MLOG */ void sub_38119(unknown uParam0, string sParam1, string sParam2)
{
    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "ML";
    }
    if (IS_STRING_NULL( sParam1 ))
    {
        sParam1 = "---";
    }
     /* WRITESCRIPTLOG */ sub_1246( sParam2, uParam0, sParam1 );
    return;
}

/* UNLOADMODEL */ void sub_38269(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 1)
    {
        SET_MODEL_AS_NO_LONGER_NEEDED( uParam0 );
    }
    else
    {
         /* WRITE_STRING */ sub_1642( "[SP]### ERROR! (UnloadModel) Trying to unload a model that isn't in the img! ###" );
    }
    return;
}

/* P_HANDLE_05_02_BLENDOUT */ void sub_38615()
{
    int iVar2;
    int iVar3;

    iVar2 = 1;
     /* P_SWITCH_CRATE_OBJ_TO_PROP */ sub_38654();
    switch (l_U1031)
    {
        case -1: break;
        case 0:
         /* WRITESCRIPTLOG */ sub_1246( "SP", "issSlipCheckpoint = ISS_SCRIPT_LOADING", 0 );
         /* LOADISEQ */ sub_24332( -1043438555, 1 );
         /* P_SET_UNLOADERS_TRAITS */ sub_39094();
        if (NOT l_U1018)
        {
             /* NIS_PRE_SETUP */ sub_32705( 1, 0, 0, 1 );
             /* P_UNFREEZE_MAKE_VISIBLE_UNLOADERS */ sub_35872();
            ISEQ_REGISTER_ENTITY( -1043438555, "cs1", l_U758[0], 0 );
            ISEQ_REGISTER_ENTITY( -1043438555, "cs2", l_U758[1], 0 );
        }
        if (NOT l_U1018)
        {
            if ( /* IS_PED_VALID */ sub_34195(  /* PLAYER_PED_ID */ sub_11897() ))
            {
                 /* TELEPORTPED */ sub_23440(  /* PLAYER_PED_ID */ sub_11897(), g_U790[2], g_U899[2] );
                TOGGLE_WEAPON_ATTACHMENT( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_11897(), 0, 0 ), 14, 0 );
                SNAP_PLAYER_TO_COVERPOINT(  /* PLAYER_ID */ sub_11935(), "GenCover", "E634EAAC_80FA5AE5_popover1", 0 );
            }
            if ( /* IS_PED_VALID */ sub_34195( l_U758[1] ))
            {
                SET_PED_PROP_INDEX( l_U758[1], 12, 0, 0, 255 );
            }
        }
        ISEQ_START( -1043438555 );
         /* WRITESCRIPTLOG */ sub_1246( "BSW", "Making loaders 1-shots just for the VIG", "--" );
        SET_PED_AS_ONE_SHOT_KILL( l_U758[0], 1 );
        SET_PED_AS_ONE_SHOT_KILL( l_U758[1], 1 );
        if ( /* IS_VEHICLE_VALID */ sub_27832( l_U875 ))
        {
            SET_VEHICLE_PROOFS( l_U875, 0, 0, 0, 0, 0 );
        }
        if (NOT l_U1018)
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "CHECKPOINT SHOT (NOT from cutscene): NCam_SLIP_Middle", "*****" );
            DO_SCREEN_FADE_IN( 0 );
            CAMERA_PLAY_ANIMATED( l_U653, l_U655, 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
        }
        l_U1031 = 3;
        break;
        case 3:
        if (NOT l_U863)
        {
            if ((NOT l_U864) AND ((CAMERA_ANIMATED_LENGTH( l_U653, l_U655 )) <= (CAMERA_ANIMATED_CURRENT_TIME() + 750)))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "BSW", "P_HANDLE_05_02_BLENDOUT - blending out of animated cam...", 0 );
                iVar3 = 750;
                 /* CREATETIMER */ sub_29215( ref l_U866, iVar3, 1, 0 );
                 /* STARTTIMER */ sub_29365( ref l_U866 );
                SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U936[2], 1065353216, 0 );
                SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U973[2], 1065353216, 0 );
                CAMERA_ANIMATED_STOP( iVar3, 1 );
                l_U864 = 1;
            }
            if ( /* ISTIMERDONE */ sub_29498( ref l_U866 ))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "BSW", "P_HANDLE_05_02_BLENDOUT - finished", 0 );
                 /* NIS_POST_SETUP */ sub_33371( 1, 1 );
                if (g_U788 == 2)
                {
                    iVar2 = 0;
                }
                if (g_U789 != 2)
                {
                    g_U789 = 2;
                     /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_16734( ref l_U390, g_U789,  /* PLAYER_PED_ID */ sub_11897(), g_U790[2], g_U899[2], g_U936[2], g_U973[2], iVar2 );
                }
                DISABLE_RESTART_CHECKPOINT( 0 );
                 /* LOADISEQ */ sub_24332( -2116802822, 0 );
                l_U863 = 1;
                SET_PED_COMBAT_ATTRIBUTES( l_U758[0], 131072, 1 );
                SET_PED_COMBAT_ATTRIBUTES( l_U758[1], 131072, 1 );
                 /* PED_SET_ALERTNESS */ sub_41792( ref l_U758[0], 0 );
                 /* PED_SET_ALERTNESS */ sub_41792( ref l_U758[1], 2 );
                 /* P_REPLACE_PROP_CRATE_WITH_OBJECT */ sub_41869( 1 );
            }
        }
        if (NOT l_U762)
        {
            if ( /* F_IS_ACTION_INTENTION_STATUS_REACHED */ sub_42380( l_U758[0], 56, 3 ))
            {
                 /* P_REPLACE_PROP_CRATE_WITH_OBJECT */ sub_41869( 0 );
            }
            if (( /* F_IS_ACTION_INTENTION_STATUS_REACHED */ sub_42380( l_U758[1], 48, 1 )) || ( /* F_IS_ACTION_INTENTION_STATUS_REACHED */ sub_42380( l_U758[0], 48, 1 )))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "ACT_INT_SEQ_ACTION02 = ACTION_COMPLETED", "**" );
                 /* PED_SET_REGISTER_TARGET_PLAYER */ sub_42672( ref l_U758[0] );
            }
            if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_35035( ref l_U944, 0 ))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "Max is in tbSlipMaxNearTruckAndGate! ", "**" );
                 /* PED_SET_REGISTER_TARGET_PLAYER */ sub_42672( ref l_U758[0] );
            }
             /* P_UNLOADERS_HEAR_BULLET */ sub_42909();
            if ( /* F_UNLOADERS_OUT_OF_ISEQ */ sub_43791())
            {
                 /* P_HANDLE_UNLOADERS_DROP_CRATES */ sub_44301();
                if ( /* F_ISPEDINVARIANTBOX */ sub_44805( l_U758[1], l_U808 ))
                {
                    if ( /* IS_PED_VALID */ sub_34195( l_U758[1] ))
                    {
                         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Still in truck - tether him there", "***" );
                        SET_PED_COMBAT_MOVEMENT( l_U758[1], 0 );
                        RESET_PED_TETHERING( l_U758[1] );
                    }
                     /* P_TETHERPEDINVARIANTBOX */ sub_44998( ref l_U808, l_U758[1], 1 );
                }
                 /* WRITESCRIPTLOG */ sub_1246( "BSW", "Clearing loaders 1-shots now that their VIG is over", "--" );
                SET_PED_AS_ONE_SHOT_KILL( l_U758[0], 0 );
                SET_PED_AS_ONE_SHOT_KILL( l_U758[1], 0 );
                l_U762 = 1;
                l_U1031 = 5;
            }
        }
        break;
        case 5:
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_05_02_BLENDOUT = ISS_SCRIPT_FINISHING", "*****" );
         /* P_NIS_SABONETE_NIS_FINISHED */ sub_38004();
         /* P_SET_CRATES_DYNAMIC */ sub_45287();
        l_U1031 = -1;
        break;
    }
    return;
}

/* P_SWITCH_CRATE_OBJ_TO_PROP */ void sub_38654()
{
    if (NOT l_U1019)
    {
        if ( /* IS_PED_VALID */ sub_34195( l_U758[0] ))
        {
            if ((PED_GET_ACTION_INTENTION_STATUS( l_U758[0], 48 )) == 3)
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_SWITCH_CRATE_OBJ_TO_PROP: Hit anim frame to switch creates to props", "***" );
                if (( /* IS_PED_VALID */ sub_34195( l_U758[1] )) AND ( /* IS_PED_VALID */ sub_34195( l_U758[0] )))
                {
                     /* CLEANOBJECT */ sub_10759( l_U884[0] );
                     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_SWITCH_CRATE_OBJ_TO_PROP: making crate props", "***" );
                    SET_PED_PROP_INDEX( l_U758[0], 12, 0, 0, 255 );
                    l_U1019 = 1;
                }
            }
        }
    }
    return;
}

/* P_SET_UNLOADERS_TRAITS */ void sub_39094()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_SET_UNLOADERS_TRAITS start", "***" );
     /* P_SETUP_AI_GROUP */ sub_39187( ref l_U725, 0.75000000, 0 );
    for ( I = 0; I <= 1; I++ )
    {
         /* P_QUICK_ADD_PED_TO_GROUP */ sub_39597( l_U758[I], ref l_U725 );
         /* F_GIVEPEDWEAPONTOHOLSTER */ sub_13688( l_U758[I], 68019059, 0, 25000, 0 );
        if (I == 1)
        {
             /* MAL_SETTEMPLATEANDRANGES */ sub_40046( ref l_U758[I], "AIT_CS_DOCKS_TRUCK", 3, 20, 1 );
        }
        else
        {
             /* MAL_SETTEMPLATEANDRANGES */ sub_40046( ref l_U758[I], ref g_U1602, 3, 20, 1 );
        }
         /* P_TETHERPED */ sub_40547( ref l_U806, l_U758[I], 1 );
         /* P_TETHERPED */ sub_40547( ref l_U807, l_U758[I], 1 );
        if ((IS_PED_DEAD( l_U758[I] )) == 0)
        {
            SET_PED_DIES_INSTANTLY_IN_WATER( l_U758[I], 1 );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U758[I], 0 );
            SET_PED_CAN_BE_TARGETTED( l_U758[I], 1 );
            SET_PED_COMBAT_ATTRIBUTES( l_U758[I], 1, 0 );
        }
    }
    if (( /* IS_PED_VALID */ sub_34195( l_U758[0] )) AND ( /* IS_MAX_VALID */ sub_34165()))
    {
        SET_PED_PRIMARY_LOOKAT( l_U758[0],  /* PLAYER_PED_ID */ sub_11897() );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( l_U758[0], 0 );
    }
    return;
}

/* P_SETUP_AI_GROUP */ void sub_39187(int iParam0, unknown uParam1, boolean bParam2)
{
    iParam0->_fU4 = uParam1;
    iParam0->_fU0 = CREATE_GROUP( 3, 1 );
    if (bParam2)
    {
        PRINTSTRING( "[MSWW]### P_SETUP_AI_GROUP TOLD TO WAIT FOR GROUP TO EXIST ###" );
        PRINTNL();
        while (NOT (DOES_GROUP_EXIST( iParam0->_fU0 )))
        {
            WAIT( 0 );
            PRINTSTRING( "[MSWW]### GROUP ###" );
            PRINTNL();
        }
        PRINTSTRING( "[MSWW]### P_SETUP_AI_GROUP created group with ID: " );
        PRINTINT( iParam0->_fU0 );
        PRINTNL();
    }
    SET_GROUP_RATIO_FIRING_AT_VISIBLE( iParam0->_fU0, iParam0->_fU4 );
    SET_GROUP_RATIO_FIRING_AT_INVISIBLE( iParam0->_fU0, iParam0->_fU4 );
    if (iParam0->_fU8)
    {
        SET_GROUP_FORMATION( iParam0->_fU0, iParam0->_fU12 );
        SET_GROUP_FORMATION_SPACING( iParam0->_fU0, iParam0->_fU16 );
        SET_GROUP_FORMATION_MAX_MOVE_SPEED( iParam0->_fU0, iParam0->_fU20 );
    }
    return;
}

/* P_QUICK_ADD_PED_TO_GROUP */ void sub_39597(unknown uParam0, int iParam1)
{
    int iVar4;
    unknown uVar5;

    if ((DOES_GROUP_EXIST( iParam1->_fU0 )) == 0)
    {
         /* WRITE_STRING */ sub_1642( "[SP]### Warning!!! Group does not exist. Creating new group specified attributes. ###" );
        if (iParam1->_fU4 > 0)
        {
             /* P_SETUP_AI_GROUP */ sub_39187( iParam1, iParam1->_fU4, 0 );
        }
        else
        {
             /* P_SETUP_AI_GROUP */ sub_39187( iParam1, 1056964608, 0 );
        }
    }
    else
    {
        PRINTSTRING( "[MSWW]### P_QUICK_ADD_PED_TO_GROUP adding ped to group with ID: " );
        PRINTINT( iParam1->_fU0 );
        PRINTNL();
    }
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        GET_GROUP_SIZE( iParam1->_fU0, ref iVar4, ref uVar5 );
        if (iVar4 == 0)
        {
            SET_PED_AS_GROUP_LEADER( uParam0, iParam1->_fU0 );
        }
        else
        {
            SET_PED_AS_GROUP_MEMBER( uParam0, iParam1->_fU0 );
        }
        SET_PED_NEVER_LEAVES_GROUP( uParam0, 1 );
    }
    return;
}

/* MAL_SETTEMPLATEANDRANGES */ void sub_40046(unknown uParam0, unknown uParam1, float fParam2, float fParam3, boolean bParam4)
{
     /* MAL_WRITESCRIPTLOG */ sub_40110( "MAL_SetTemplateAndRanges" );
    PRINTSTRING( "[MSWW]### Template Name: " );
     /* WRITE_STRING */ sub_1642( uParam1 );
    PRINTSTRING( "[MSWW]### Min Range: " );
     /* WRITE_FLOAT */ sub_19507( fParam2 );
    PRINTSTRING( "[MSWW]### Max Range: " );
     /* WRITE_FLOAT */ sub_19507( fParam3 );
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        SET_PED_AI_TEMPLATE( (uParam0^), uParam1 );
        if (fParam2 > -1)
        {
            SET_PED_COMBAT_RANGE_MIN( (uParam0^), fParam2 );
        }
        if (fParam3 > -1)
        {
            SET_PED_COMBAT_RANGE_MAX( (uParam0^), fParam3 );
        }
    }
    if (NOT bParam4)
    {
         /* MAL_SETPEDCOMBATATTRIBUTES */ sub_40421( uParam0, 1, 0 );
    }
    return;
}

/* MAL_WRITESCRIPTLOG */ void sub_40110(unknown uParam0)
{
    unknown uVar3;

    uVar3 = GET_REAL_GAME_TIMER();
    DISPLAYF( "[{0}][{1}]{3} {2} {3}", 4, 513, uVar3, 1537, "MSWW", 1537, uParam0, 1537, "###" );
    return;
}

/* MAL_SETPEDCOMBATATTRIBUTES */ void sub_40421(unknown uParam0, unknown uParam1, unknown uParam2)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^), uParam1, uParam2 );
    }
    return;
}

/* P_TETHERPED */ void sub_40547(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_TETHERING_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_TETHERING_OPTION( uParam1, uParam2 );
    }
    return;
}

/* PED_SET_ALERTNESS */ void sub_41792(unknown uParam0, unknown uParam1)
{
    if ( /* IS_PED_VALID */ sub_34195( (uParam0^) ))
    {
        SET_PED_ALERTNESS( (uParam0^), uParam1 );
    }
    return;
}

/* P_REPLACE_PROP_CRATE_WITH_OBJECT */ void sub_41869(int iParam0)
{
    if ( /* IS_PED_VALID */ sub_34195( l_U758[iParam0] ))
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_REPLACE_PROP_CRATE_WITH_OBJECT: Clearing ped prop", 0 );
        CLEAR_ALL_PED_PROPS( l_U758[iParam0] );
    }
    if (iParam0 == 0)
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_REPLACE_PROP_CRATE_WITH_OBJECT: pi_cs_unloader[0]", 0 );
        l_U884[iParam0] =  /* CREATEOBJECT */ sub_10326( l_U883, 46.40000000, -37.14000000, 2.17000000, 0, 0, 65446, 0, 0, 0 );
    }
    else if (iParam0 == 1)
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_REPLACE_PROP_CRATE_WITH_OBJECT: pi_cs_unloader[1]", 0 );
        l_U884[iParam0] =  /* CREATEOBJECT */ sub_10326( l_U883, 47.58000000, -36.39000000, 2.33000000, 9.07387000, 0.00000000, -76.59280000, 0, 0, 0 );
    }
    else
    {
        SCRIPT_ASSERT( "P_REPLACE_PROP_CRATE_WITH_OBJECT: Bad iUnloaderIndex passed in!", 0 );
    }
    return;
}

/* F_IS_ACTION_INTENTION_STATUS_REACHED */ int sub_42380(unknown uParam0, unknown uParam1, int iParam2)
{
    if ( /* IS_PED_VALID */ sub_34195( uParam0 ))
    {
        if ((PED_GET_ACTION_INTENTION_STATUS( uParam0, uParam1 )) == iParam2)
        {
            PED_FINISH_ACTION_INTENTION( uParam0, uParam1 );
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_IS_ACTION_INTENTION_STATUS_REACHED: Returning TRUE", "***" );
            return 1;
        }
    }
    return 0;
}

/* PED_SET_REGISTER_TARGET_PLAYER */ void sub_42672(unknown uParam0)
{
    if (( /* IS_MAX_VALID */ sub_34165()) AND ( /* IS_PED_VALID */ sub_34195( (uParam0^) )))
    {
         /* PED_SET_REGISTER_TARGET */ sub_42741( uParam0,  /* PLAYER_PED_ID */ sub_11897() );
    }
    return;
}

/* PED_SET_REGISTER_TARGET */ void sub_42741(unknown uParam0, unknown uParam1)
{
    if (( /* IS_PED_VALID */ sub_34195( uParam1 )) AND ( /* IS_PED_VALID */ sub_34195( (uParam0^) )))
    {
        REGISTER_TARGET( (uParam0^), uParam1 );
    }
    return;
}

/* P_UNLOADERS_HEAR_BULLET */ void sub_42909()
{
    unknown uVar2;

    if (( /* IS_MAX_VALID */ sub_34165()) AND (( /* IS_PED_VALID */ sub_34195( l_U758[1] )) AND ( /* IS_PED_VALID */ sub_34195( l_U758[0] ))))
    {
        if (HAS_BULLET_IMPACTED_IN_AREA( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( l_U758[0] ), 3.00000000, ref uVar2 ))
        {
            if ( /* IS_PED_VALID */ sub_34195( l_U758[0] ))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_UNLOADERS_HEAR_BULLET: Impact[0]! pi_cs_unloader[0] registering player.", 0 );
                 /* PED_SET_REGISTER_TARGET_PLAYER */ sub_42672( ref l_U758[0] );
            }
            else if ( /* IS_PED_VALID */ sub_34195( l_U758[1] ))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_UNLOADERS_HEAR_BULLET: Impact! pi_cs_unloader[1] registering player.", 0 );
                 /* PED_SET_REGISTER_TARGET_PLAYER */ sub_42672( ref l_U758[1] );
            }
        }
        else if (HAS_BULLET_IMPACTED_IN_AREA( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( l_U758[1] ), 3.00000000, ref uVar2 ))
        {
            if ( /* IS_PED_VALID */ sub_34195( l_U758[1] ))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_UNLOADERS_HEAR_BULLET: Impact[1]! pi_cs_unloader[1] registering player.", 0 );
                 /* PED_SET_REGISTER_TARGET_PLAYER */ sub_42672( ref l_U758[1] );
            }
            else if ( /* IS_PED_VALID */ sub_34195( l_U758[0] ))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_UNLOADERS_HEAR_BULLET: Impact! pi_cs_unloader[0] registering player.", 0 );
                 /* PED_SET_REGISTER_TARGET_PLAYER */ sub_42672( ref l_U758[0] );
            }
        }
        if (GET_PED_AWARENESS_STATE( l_U758[0],  /* PLAYER_PED_ID */ sub_11897(), 8 ))
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_UNLOADERS_HEAR_BULLET: Shot at pi_cs_unloader[0], registering player.", 0 );
             /* PED_SET_REGISTER_TARGET_PLAYER */ sub_42672( ref l_U758[0] );
        }
        else if (GET_PED_AWARENESS_STATE( l_U758[1],  /* PLAYER_PED_ID */ sub_11897(), 8 ))
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_UNLOADERS_HEAR_BULLET: Shot at pi_cs_unloader[1], registering player.", 0 );
             /* PED_SET_REGISTER_TARGET_PLAYER */ sub_42672( ref l_U758[1] );
        }
    }
    return;
}

/* F_UNLOADERS_OUT_OF_ISEQ */ int sub_43791()
{
    if ((ISEQ_QUERY_ENTITY_STATE( -1043438555, "cs1", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -1043438555, "cs1", 5 )))
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_UNLOADERS_OUT_OF_ISEQ: Ground guy ISEQ not playing", "***" );
        if (ISEQ_QUERY_ENTITY_STATE( -1043438555, "cs2", 3 ))
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_UNLOADERS_OUT_OF_ISEQ: Unregistering Truck guy", "***" );
            ISEQ_UNREGISTER_ENTITY( -1043438555, "cs2" );
        }
        return 1;
    }
    if ((ISEQ_QUERY_ENTITY_STATE( -1043438555, "cs2", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -1043438555, "cs2", 5 )))
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_UNLOADERS_OUT_OF_ISEQ: Truck guy ISEQ not playing", "***" );
        if (ISEQ_QUERY_ENTITY_STATE( -1043438555, "cs1", 3 ))
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_UNLOADERS_OUT_OF_ISEQ: Unregistering Ground guy", "***" );
            ISEQ_UNREGISTER_ENTITY( -1043438555, "cs1" );
        }
        return 1;
    }
    return 0;
}

/* P_HANDLE_UNLOADERS_DROP_CRATES */ void sub_44301()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    int I;

    if (NOT l_U1019)
    {
        if (DOES_OBJECT_EXIST( l_U884[0] ))
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_UNLOADERS_DROP_CRATES: Crate never lifted - setting unfrozen!", 0 );
            FREEZE_OBJECT_POSITION( l_U884[0], 0 );
            SET_OBJECT_COLLISION( l_U884[0], 1 );
        }
    }
    for ( I = 0; I <= 1; I++ )
    {
        if ((IS_PED_DEAD( l_U758[I] )) || (NOT (IS_PED_DEAD( l_U758[I] ))))
        {
            if ((GET_PED_PROP_INDEX( l_U758[I], 12 )) >= 0)
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_UNLOADERS_DROP_CRATES: Dropping the crate ped prop!", 0 );
                uVar5 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_PROP_POSITION( l_U758[I], 12 )};
                uVar2 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PEP_PROP_ROTATION( l_U758[I], 12 )};
                CLEAR_ALL_PED_PROPS( l_U758[I] );
                l_U884[I] =  /* CREATEOBJECT */ sub_10326( l_U883, uVar5, uVar2, 0, 0, 0 );
                SET_OBJECT_COLLISION( l_U884[I], 1 );
                SET_OBJECT_COLLIDE_WITH_NON_PLAYER_CHARACTER( l_U884[I], 0 );
            }
        }
    }
    return;
}

/* F_ISPEDINVARIANTBOX */ int sub_44805(unknown uParam0, unknown uParam1)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, uParam1._fU0 );
    }
    return 0;
}

/* P_TETHERPEDINVARIANTBOX */ void sub_44998(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_TETHERING_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_TETHERING_OPTION( uParam1, uParam2 );
    }
    return;
}

/* P_SET_CRATES_DYNAMIC */ void sub_45287()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_SET_CRATES_DYNAMIC", "***" );
    for ( I = 0; I <= 1; I++ )
    {
        if (DOES_OBJECT_EXIST( l_U884[I] ))
        {
            SET_OBJECT_DYNAMIC( l_U884[I], 1 );
        }
    }
    return;
}

/* P_HANDLE_TRUCK_STUFF */ void sub_45530()
{
    if (l_U894 == 0)
    {
        if ( /* IS_MAX_VALID */ sub_34165())
        {
            if ((DOES_OBJECT_EXIST( l_U887 )) == 1)
            {
                if ((HAS_OBJECT_BEEN_DAMAGED_BY_PED( l_U887,  /* PLAYER_PED_ID */ sub_11897() )) == 1)
                {
                     /* WRITESCRIPTLOG */ sub_1246( "SBA", "Truck block destroyed!", "***" );
                    if ((IS_VEHICLE_DEAD( l_U875 )) == 0)
                    {
                         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Starting truck vehicle playback!", "***" );
                        UNPAUSE_PLAYBACK_RECORDED_VEHICLE( l_U875 );
                         /* P_HANDLE_TRUCK_COVERPOINTS */ sub_26325( 0 );
                         /* PED_SET_REGISTER_TARGET_PLAYER */ sub_42672( ref l_U758[1] );
                    }
                    l_U894 = 1;
                }
            }
        }
    }
    if (NOT l_U881)
    {
        if (DOES_VEHICLE_EXIST( l_U875 ))
        {
            if (IS_VEHICLE_DEAD( l_U875 ))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "Truck destroyed!  Stopping radio stream.", "***" );
                STOP_PLAYBACK_RECORDED_VEHICLE( l_U875 );
                SET_VEHICLE_FREEZE_AFTER_BLOWING_UP( l_U875, 1 );
                STOP_SCRIPT_STREAM( 1 );
                l_U881 = 1;
                if ( /* F_ISPLAYERINTRIGGERBOX */ sub_28248( l_U546 ))
                {
                     /* WRITESCRIPTLOG */ sub_1246( "SBA", "Setting bExplosionCanBringBackups = TRUE", "***" );
                    l_U882 = 1;
                }
            }
            else if (IS_VEHICLE_IN_WATER( l_U875 ))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "Unloaders truck is in the water!  Stopping radio stream.", "***" );
                l_U711 = 6;
                STOP_SCRIPT_STREAM( 1 );
                SET_VEHICLE_NOT_EXPLODABLE( l_U875, 1 );
                l_U881 = 1;
            }
        }
    }
     /* P_TRUCK_KILLS_PED */ sub_46144(  /* PLAYER_PED_ID */ sub_11897(), 32.00000000 );
     /* P_TRUCK_KILLS_PED */ sub_46144( l_U758[0], 30.00000000 );
     /* P_TRUCK_KILLS_PED */ sub_46144( l_U758[1], 60.00000000 );
     /* P_TRUCK_KILLS_PED */ sub_46144( l_U801[0], 30.00000000 );
     /* P_TRUCK_KILLS_PED */ sub_46144( l_U801[1], 30.00000000 );
     /* P_TRUCK_KILLS_PED */ sub_46144( l_U859[0], 30.00000000 );
    return;
}

/* P_TRUCK_KILLS_PED */ void sub_46144(unknown uParam0, float fParam1)
{
    float fVar4;

    if ( /* IS_VEHICLE_VALID */ sub_27832( l_U875 ))
    {
        if ((IS_PLAYBACK_GOING_ON_FOR_VEHICLE( l_U875 )) AND (l_U894))
        {
            fVar4 =  /* GET_VEHICLE_RECORDING_PLAYBACK_PERCENTAGE_PROGRESS */ sub_46222( l_U875, l_U880 );
            if (fVar4 > fParam1)
            {
                if ( /* ISPEDBEHINDTRUCK */ sub_46370( uParam0 ))
                {
                    if (IS_PED_TOUCHING_VEHICLE( uParam0, l_U875 ))
                    {
                         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Truck Kills Ped!", "***" );
                         /* P_KILL_PED */ sub_46768( uParam0 );
                        SET_ARCADEMODE_EVENT( 1, uParam0 );
                        START_PARTICLE_FX_NON_LOOPED_ON_PED_BONE( "Blood_headsoup_S_01", uParam0, 0.25000000, 0, -0.20000000, 0, 0, 0, 57704, 2 );
                    }
                }
            }
        }
    }
    return;
}

/* GET_VEHICLE_RECORDING_PLAYBACK_PERCENTAGE_PROGRESS */ float sub_46222(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_VEHICLE_DEAD( uParam0 )))
    {
        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( uParam0 ))
        {
            return 100.00000000 * ((GET_TIME_POSITION_IN_RECORDING( uParam0 )) / (GET_TOTAL_DURATION_OF_VEHICLE_RECORDING( uParam1 )));
        }
    }
    return -1.00000000;
}

/* ISPEDBEHINDTRUCK */ int sub_46370(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    float fVar9;

    fVar9 = 0.50000000;
    if ( /* F_ISPEDINTRIGGERBOX */ sub_23575( iParam0, l_U567 ))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_VEHICLE_COORDS( l_U875 )};
        uVar6 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0 )};
        if ((NOT (IS_VEHICLE_IN_WATER( l_U875 ))) AND (iParam0 == ( /* PLAYER_PED_ID */ sub_11897())))
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "isPedBehindTruck: Player passed in - increasing offset", "***" );
            fVar9 = 2.70000000;
        }
         /* WRITESCRIPTLOG */ sub_1246( "GA", "isPedBehindTruck: Truck Position:", 0 );
         /* WRITE_FLOAT */ sub_19507( uVar3._fU0 - fVar9 );
         /* WRITESCRIPTLOG */ sub_1246( "GA", "isPedBehindTruck: Ped Position:", 0 );
         /* WRITE_FLOAT */ sub_19507( uVar6._fU0 );
        if (uVar6._fU0 < (uVar3._fU0 - fVar9))
        {
            return 1;
        }
    }
    return 0;
}

/* P_KILL_PED */ void sub_46768(unknown uParam0)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        STOP_PED_SPEAKING( uParam0, 1 );
        SET_PED_HEALTH( uParam0, 0, 0 );
        SET_PED_CORPSE( uParam0, 0 );
    }
    return;
}

/* P_CREATE_AND_START_TIMER */ void sub_47204(unknown uParam0, unknown uParam1)
{
     /* CREATETIMER */ sub_29215( uParam0, uParam1, 1, 0 );
     /* STARTTIMER */ sub_29365( uParam0 );
    return;
}

/* F_NUM_CS_ALIVE_SLIPWAY */ void sub_47826()
{
    int Result;

    Result = 0;
    Result +=  /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_47870( ref l_U758 );
    if (l_U804)
    {
        Result +=  /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_47870( ref l_U801 );
    }
    if (l_U861)
    {
        Result +=  /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_47870( ref l_U859 );
    }
    return Result;
}

/* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ void sub_47870(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result++;
        }
    }
    return Result;
}

/* P_TASK_UNLOADER_ATTACK */ void sub_48178()
{
    unknown uVar2;

     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_TASK_UNLOADER_ATTACK", "***" );
    if (( /* IS_MAX_VALID */ sub_34165()) AND ( /* IS_PED_VALID */ sub_34195( l_U758[0] )))
    {
         /* PED_SET_ALERTNESS */ sub_41792( ref l_U758[0], 2 );
        PED_ACTION_TREE_PLAY_NODE( l_U758[0], "/Global/AMED/AMED_Root/AMED_INITIALIZE_IDLE" );
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
        TASK_SHOOT_AT_PED( 0,  /* PLAYER_PED_ID */ sub_11897(), 1000, 0, 0, 0, 0 );
        TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 51.53749000, -39.66749000, 1.97100500,  /* PLAYER_PED_ID */ sub_11897(), 3, 1, 1056964608, 0, 1, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        CLOSE_SEQUENCE_TASK( uVar2 );
        CLEAR_PED_TASKS_IMMEDIATELY( l_U758[0] );
        TASK_PERFORM_SEQUENCE( l_U758[0], uVar2 );
        CLEAR_SEQUENCE_TASK( uVar2 );
         /* PED_SET_REGISTER_TARGET_PLAYER */ sub_42672( ref l_U758[0] );
        PLAY_AUDIO_EVENT_FROM_PED( "NPC_38_REVOLVER_SINGLESHOT", l_U758[0] );
        l_U766 = 1;
    }
    if (( /* IS_MAX_VALID */ sub_34165()) AND ( /* IS_PED_VALID */ sub_34195( l_U758[1] )))
    {
        CLEAR_PED_TASKS_IMMEDIATELY( l_U758[1] );
         /* PED_SET_REGISTER_TARGET_PLAYER */ sub_42672( ref l_U758[1] );
        TASK_SHOOT_AT_PED( l_U758[1],  /* PLAYER_PED_ID */ sub_11897(), 2000, 0, 0, 0, 0 );
        if (NOT l_U766)
        {
            PLAY_AUDIO_EVENT_FROM_PED( "NPC_38_REVOLVER_SINGLESHOT", l_U758[1] );
        }
    }
    return;
}

/* P_SETUP_UNLOADER_BACKUP */ void sub_48703()
{
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_SETUP_UNLOADER_BACKUP start", 0 );
     /* P_SETUP_AI_GROUP */ sub_39187( ref l_U768, 1.00000000, 0 );
     /* CLEANPED */ sub_8951( l_U801[0] );
    l_U801[0] =  /* CREATEPED */ sub_9044( ref l_U774[0] );
     /* P_QUICK_ADD_PED_TO_GROUP */ sub_39597( l_U801[0], ref l_U768 );
     /* F_GIVEPEDWEAPON */ sub_14439( l_U801[0], 68019059, 25000, 0, 0 );
     /* MAL_SETTEMPLATEANDRANGES */ sub_40046( ref l_U801[0], ref g_U1594, -1082130432, -1082130432, 1 );
     /* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_48906( ref l_U801[0], 1 );
    if ((IS_PED_DEAD( l_U801[0] )) == 0)
    {
        SET_PED_DIES_INSTANTLY_IN_WATER( l_U801[0], 1 );
    }
     /* CLEANPED */ sub_8951( l_U801[1] );
    l_U801[1] =  /* CREATEPED */ sub_9044( ref l_U774[1] );
     /* P_QUICK_ADD_PED_TO_GROUP */ sub_39597( l_U801[1], ref l_U768 );
     /* F_GIVEPEDWEAPON */ sub_14439( l_U801[1], 68019059, 25000, 0, 0 );
     /* MAL_SETTEMPLATEANDRANGES */ sub_40046( ref l_U801[1], ref g_U1594, -1082130432, -1082130432, 1 );
    if ((IS_PED_DEAD( l_U801[1] )) == 0)
    {
        SET_PED_DIES_INSTANTLY_IN_WATER( l_U801[1], 1 );
    }
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_9877( ref l_U801, "UnloadBackup" );
     /* P_DEACTIVATEPEDARRAY */ sub_49197( ref l_U801 );
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_SETUP_UNLOADER_BACKUP end", 0 );
    return;
}

/* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ void sub_48906(unknown uParam0, unknown uParam1)
{
    if ( /* IS_PED_VALID */ sub_34195( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), uParam1 );
    }
    return;
}

/* P_DEACTIVATEPEDARRAY */ void sub_49197(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
         /* P_DEACTIVATEPED */ sub_49251( (uParam0^)[I] );
    }
    return;
}

/* P_DEACTIVATEPED */ void sub_49251(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 1 );
        SET_PED_VISIBLE( uParam0, 0 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 0 );
        FREEZE_PED_POSITION( uParam0, 1 );
        SET_PED_COLLISION( uParam0, 0 );
        SET_PED_PROOFS( uParam0, 1, 1, 1, 1, 1 );
    }
    return;
}

/* P_ACTIVATEPEDARRAY */ void sub_49488(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
         /* P_ACTIVATEPED */ sub_49540( (uParam0^)[I] );
    }
    return;
}

/* P_ACTIVATEPED */ void sub_49540(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 0 );
        SET_PED_VISIBLE( uParam0, 1 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 1 );
        FREEZE_PED_POSITION( uParam0, 0 );
        SET_PED_COLLISION( uParam0, 1 );
        SET_PED_PROOFS( uParam0, 0, 0, 0, 0, 0 );
    }
    return;
}

/* PED_ARRAY_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ void sub_49683(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_48906( ref (uParam0^)[I], uParam1 );
    }
    return;
}

/* PED_TASK_ATTACK_MOVE */ void sub_49836(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    if ( /* IS_PED_VALID */ sub_34195( uParam0 ))
    {
        CLEAR_PED_TASKS_IMMEDIATELY( uParam0 );
        TASK_ATTACK_MOVE( uParam0, uParam1, uParam4, uParam5, uParam6, uParam7 );
    }
    return;
}

/* P_DIALOG_BACKUP_01 */ void sub_49957()
{
     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_DIALOG_BACKUP_01 start", 0 );
    if (NOT (IS_PED_DEAD( l_U801[1] )))
    {
         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_50052( ref l_U1279 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_50175( 0, l_U801[1], "M5_CS_05_Avg", ref l_U1279, 2, 0 );
         /* PLAY_SINGLE_SPEECH */ sub_50421( "SMAR_VIG02A", ref l_U1279, 7, 1 );
    }
    return;
}

/* RESET_SCRIPT_SPEECH_STRUCT */ void sub_50052(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

/* ADD_PED_FOR_SCRIPT_SPEECH */ void sub_50175(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

/* PLAY_SINGLE_SPEECH */ void sub_50421(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return  /* PLAY_SINGLE_SPEECH_FROM_BLOCK */ sub_50466( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

/* PLAY_SINGLE_SPEECH_FROM_BLOCK */ void sub_50466(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return  /* PLAYSPEECHMAIN */ sub_50553( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

/* PLAYSPEECHMAIN */ int sub_50553(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT ( /* CANTHISSPEECHBEPLAYED */ sub_50605( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
     /* COPYHIDDENSPEECHSTUCT */ sub_51123( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

/* CANTHISSPEECHBEPLAYED */ int sub_50605(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

/* COPYHIDDENSPEECHSTUCT */ void sub_51123(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

/* P_TETHERPEDARRAY */ void sub_51336(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < (uParam1^); I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam1^)[I] )))
        {
             /* P_TETHERPED */ sub_40547( uParam0, (uParam1^)[I], uParam2 );
        }
    }
    return;
}

/* P_SETUP_UNLOADER_BACKUP_BACKUPS */ void sub_51507()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_SETUP_UNLOADER_BACKUP_BACKUPS", "***" );
    for ( I = 0; I <= 0; I++ )
    {
         /* PED_INITIALIZE */ sub_51648( ref l_U845[I], ref l_U859[I], 68019059, ref g_U1586, 0, 25000, 2, 0, 25000 );
        if ( /* IS_PED_VALID */ sub_34195( l_U859[I] ))
        {
            SET_PED_DIES_INSTANTLY_IN_WATER( l_U859[I], 1 );
            SET_PED_CAN_PLAY_LOCO_FLAVOR_STARTS( l_U859[I], 0 );
             /* P_QUICK_ADD_PED_TO_GROUP */ sub_39597( l_U859[I], ref l_U768 );
        }
    }
     /* PED_ARRAY_SET_ALERTNESS */ sub_52000( ref l_U859, 3 );
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_9877( ref l_U859, "BackupBackup" );
     /* PED_TASK_ATTACK_MOVE */ sub_49836( l_U859[0], 55.19396000, -31.80685000, 1.95059700, 4, 30, -1082130432, 3 );
     /* P_TETHERPEDARRAY */ sub_51336( ref l_U1008, ref l_U859, 1 );
    return;
}

/* PED_INITIALIZE */ void sub_51648(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, int iParam7, unknown uParam8)
{
    unknown uVar11;

     /* CLEANPED */ sub_8951( (uParam1^) );
    (uParam1^) =  /* CREATEPED */ sub_9044( uParam0 );
    if ( /* IS_PED_VALID */ sub_34195( (uParam1^) ))
    {
        uVar11 =  /* F_GIVEPEDWEAPON */ sub_14439( (uParam1^), uParam2, uParam5, 0, 1 );
        if (iParam7 != 0)
        {
             /* F_GIVEPEDWEAPONTOHOLSTER */ sub_13688( (uParam1^), iParam7, 0, uParam8, 0 );
        }
        SET_PED_AI_TEMPLATE( (uParam1^), uParam3 );
        SET_PED_ALERTNESS( (uParam1^), uParam6 );
        switch (uParam4)
        {
            case 0: break;
            case 1:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 13, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 13, 1 );
            break;
            case 2:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 14, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 14, 1 );
            break;
            case 3:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 12, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 12, 1 );
            break;
        }
    }
    return;
}

/* PED_ARRAY_SET_ALERTNESS */ void sub_52000(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* PED_SET_ALERTNESS */ sub_41792( ref (uParam0^)[I], uParam1 );
    }
    return;
}

/* P_RESET_SLIPWAY_BULLETCAM */ void sub_52242()
{
     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_RESET_SLIPWAY_BULLETCAM: removing bulletcam from loaders!", "***" );
    if (NOT (IS_PED_DEAD( l_U758[0] )))
    {
        SET_PED_CAN_TRIGGER_BULLET_CAM( l_U758[0], 0 );
    }
    if (NOT (IS_PED_DEAD( l_U758[1] )))
    {
        SET_PED_CAN_TRIGGER_BULLET_CAM( l_U758[1], 0 );
    }
    return;
}

/* PED_SET_COMBAT_MOVEMENT */ void sub_52496(unknown uParam0, unknown uParam1)
{
    if ( /* IS_PED_VALID */ sub_34195( (uParam0^) ))
    {
        SET_PED_COMBAT_MOVEMENT( (uParam0^), uParam1 );
    }
    return;
}

/* F_UNLOADER_BACKUP_READY */ int sub_53014()
{
    int iVar2;
    int iVar3;

    if (HAS_SOMETHING_EXPLODED_IN_AREA( g_U790[2], 75.00000000 ))
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_UNLOADER_BACKUP_READY: Something exploded - returning TRUE", "***" );
        return 1;
    }
     /* ISTIMERDONE */ sub_29498( ref l_U818 );
    if (l_U818._fU16)
    {
        if (HAS_SHOT_BEEN_FIRED_IN_AREA( g_U790[2], 75.00000000, 0, ref iVar2 ))
        {
            if ((iVar2 == l_U758[1]) || (iVar2 == l_U758[0]))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_UNLOADER_BACKUP_READY: Unloader has shot - returning TRUE", "***" );
                return 1;
            }
        }
    }
    if ((l_U765) || (l_U764))
    {
        if ( /* IS_MAX_VALID */ sub_34165())
        {
            if (HAS_BULLET_IMPACTED_IN_AREA( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS(  /* PLAYER_PED_ID */ sub_11897() ), 5.00000000, ref iVar3 ))
            {
                if ((iVar3 == l_U758[1]) || (iVar3 == l_U758[0]))
                {
                     /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_UNLOADER_BACKUP_READY: bullet impact near player - returning TRUE", "***" );
                    return 1;
                }
            }
        }
    }
    return 0;
}

/* P_HANDLE_CS_GATE_ISEQUENCE */ void sub_54085()
{
    switch (l_U805)
    {
        case 1:
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_CS_GATE_ISEQUENCE: state = eNIS_STATE_SETUP", 0 );
         /* LOADISEQ */ sub_24332( -2116802822, 1 );
        ISEQ_REGISTER_ENTITY( -2116802822, "s_mar_gmed3", l_U801[0], 0 );
        ISEQ_REGISTER_ENTITY( -2116802822, "s_mar_gmed4", l_U801[1], 0 );
        ISEQ_REGISTER_ENTITY( -2116802822, "slip_gate", g_U1530, 1 );
         /* TELEPORTPED */ sub_23440( l_U801[0], l_U774[0]._fU0, l_U774[0]._fU12 );
         /* TELEPORTPED */ sub_23440( l_U801[1], l_U774[1]._fU0, l_U774[1]._fU12 );
        ISEQ_START( -2116802822 );
        if ( /* IS_MAX_VALID */ sub_34165())
        {
            SET_PED_PRIMARY_LOOKAT( l_U801[0],  /* PLAYER_PED_ID */ sub_11897() );
            REGISTER_TARGET( l_U801[0],  /* PLAYER_PED_ID */ sub_11897() );
             /* PED_SET_ALERTNESS */ sub_41792( ref l_U801[0], 4 );
        }
         /* CREATETIMER */ sub_29215( ref l_U1009, 2000, 1, 0 );
        l_U805 = 2;
        break;
        case 2:
        if ( /* F_ISPEDINTRIGGERBOXFIRSTTIME */ sub_54530( ref l_U965, l_U801[0], 0 ))
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_ABORT_GATE_OPENING: Backup gate opener is near gate", "***" );
            if ( /* F_ABORT_GATE_OPENING */ sub_54732())
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_CS_GATE_ISEQUENCE: Backups, don't open gate!  Go to combat!", "***" );
                PED_SET_ACTION_INTENTION( l_U801[0], 56, 1000, 0, 0, 0 );
                PED_SET_ACTION_INTENTION( l_U801[1], 56, 1000, 0, 0, 0 );
                l_U805 = 4;
                return;
            }
        }
        if (NOT l_U918)
        {
            if ( /* IS_PED_VALID */ sub_34195( l_U801[0] ))
            {
                if ((PED_GET_ACTION_INTENTION_STATUS( l_U801[0], 47 )) == 3)
                {
                     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_CS_GATE_ISEQUENCE: Gate opener has started opening gate!  Starting gate timer!", "***" );
                     /* STARTTIMER */ sub_29365( ref l_U1009 );
                    l_U918 = 1;
                    l_U917 = 1;
                    return;
                }
            }
            if ( /* F_HAS_PLAYER_DAMAGED_PED */ sub_55529( l_U801[0] ))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_CS_GATE_ISEQUENCE: Gate opener shot by player!", "***" );
                PED_SET_ACTION_INTENTION( l_U801[0], 56, 1000, 0, 0, 0 );
                PED_SET_ACTION_INTENTION( l_U801[1], 56, 1000, 0, 0, 0 );
                l_U805 = 4;
                return;
            }
            if ( /* F_HAS_PLAYER_DAMAGED_PED */ sub_55529( l_U801[1] ))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_CS_GATE_ISEQUENCE: Other backup (not opener) shot by player!", "***" );
                PED_SET_ACTION_INTENTION( l_U801[0], 56, 1000, 0, 0, 0 );
                PED_SET_ACTION_INTENTION( l_U801[1], 56, 1000, 0, 0, 0 );
                l_U805 = 4;
                return;
            }
        }
        if (l_U918)
        {
            if ((PED_GET_ACTION_INTENTION_STATUS( l_U801[0], 55 )) == 3)
            {
                if ( /* F_ISPLAYERINTRIGGERBOX */ sub_28248( l_U923 ))
                {
                    PED_SET_ACTION_INTENTION( l_U801[0], 56, 1000, 0, 0, 0 );
                    PED_SET_ACTION_INTENTION( l_U801[1], 56, 1000, 0, 0, 0 );
                     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_CS_GATE_ISEQUENCE: Max is by the gate!  Go to combat!", "***" );
                    l_U805 = 4;
                }
            }
            else if ((ISEQ_QUERY_ENTITY_STATE( -2116802822, "s_mar_gmed4", 6 )) AND (ISEQ_QUERY_ENTITY_STATE( -2116802822, "s_mar_gmed3", 6 )))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_CS_GATE_ISEQUENCE: Backup has finished iSeq!  Go to combat!", "***" );
                l_U805 = 4;
            }
        }
        break;
        case 4:
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_CS_GATE_ISEQUENCE: eNIS_STATE_RETURNING_TO_PLAYER going to eNIS_STATE_COMPLETE!", "***" );
         /* P_TETHERPEDARRAY */ sub_51336( ref l_U1008, ref l_U801, 1 );
         /* P_TETHERPEDARRAY */ sub_51336( ref l_U806, ref l_U801, 1 );
         /* P_TETHERPED */ sub_40547( ref l_U1008, l_U758[0], 1 );
         /* PED_ARRAY_SET_REGISTER_TARGET_PLAYER */ sub_56439( ref l_U801 );
         /* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_48906( ref l_U801[0], 0 );
        l_U805 = 5;
        break;
        case 5:
        if ( /* HASTIMERBEENACTIVATED */ sub_29081( ref l_U1009 ))
        {
            if ( /* ISTIMERDONE */ sub_29498( ref l_U1009 ))
            {
                 /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_CS_GATE_ISEQUENCE - gate open: VIG02 iSeq terminating", "***" );
                 /* TERMINATEISEQ */ sub_30919( -2116802822, 1 );
                 /* P_REPLACE_SLIPWAY_GATE */ sub_56761( l_U910 );
                 /* P_DIALOG_BACKUP_02 */ sub_57230();
                l_U805 = 0;
            }
        }
        else if ((ISEQ_QUERY_ENTITY_STATE( -2116802822, "s_mar_gmed4", 6 )) AND (ISEQ_QUERY_ENTITY_STATE( -2116802822, "s_mar_gmed3", 6 )))
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_CS_GATE_ISEQUENCE - gate closed: VIG02 iSeq terminating", "***" );
             /* TERMINATEISEQ */ sub_30919( -2116802822, 1 );
             /* P_DIALOG_BACKUP_02 */ sub_57230();
            l_U805 = 0;
        }
        break;
    }
    return;
}

/* F_ISPEDINTRIGGERBOXFIRSTTIME */ void sub_54530(int iParam0, unknown uParam1, unknown uParam2)
{
    if (iParam0->_fU68 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU68 =  /* F_ISPEDINTRIGGERBOX */ sub_23575( uParam1, (iParam0^) );
        if ((iParam0->_fU68) AND (uParam2))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU68;
}

/* F_ABORT_GATE_OPENING */ int sub_54732()
{
    if ( /* F_ISPLAYERINTRIGGERBOX */ sub_28248( l_U923 ))
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_ABORT_GATE_OPENING: Max is near gate!", "***" );
        if ( /* F_IS_PED_ARRAY_IN_CROSSHAIR_CYLINDER */ sub_54849( ref l_U801, 3.00000000 ))
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_ABORT_GATE_OPENING: Backup unloader is in player's sights!", "***" );
            return 1;
        }
    }
    if (( /* F_ISPLAYERINTRIGGERBOX */ sub_28248( l_U1379 )) || ( /* F_ISPLAYERINTRIGGERBOX */ sub_28248( l_U965 )))
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_ABORT_GATE_OPENING: Max went through gate!", "***" );
        return 1;
    }
    return 0;
}

/* F_IS_PED_ARRAY_IN_CROSSHAIR_CYLINDER */ int sub_54849(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ( /* IS_PED_VALID */ sub_34195( (uParam0^)[I] ))
        {
            if (IS_PED_IN_CROSSHAIR_CYLINDER( (uParam0^)[I], uParam1, 50, 0, -1082130432 ))
            {
                return 1;
            }
        }
    }
    return 0;
}

/* F_HAS_PLAYER_DAMAGED_PED */ int sub_55529(unknown uParam0)
{
    if ( /* IS_PED_VALID */ sub_34195( uParam0 ))
    {
        if (HAS_PED_BEEN_DAMAGED_BY_PED( uParam0,  /* PLAYER_PED_ID */ sub_11897(), 0 ))
        {
            return 1;
        }
    }
    return 0;
}

/* PED_ARRAY_SET_REGISTER_TARGET_PLAYER */ void sub_56439(unknown uParam0)
{
     /* PED_ARRAY_SET_REGISTER_TARGET */ sub_56495( uParam0,  /* PLAYER_PED_ID */ sub_11897() );
    return;
}

/* PED_ARRAY_SET_REGISTER_TARGET */ void sub_56495(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ( /* IS_PED_VALID */ sub_34195( (uParam0^)[I] ))
        {
             /* PED_SET_REGISTER_TARGET */ sub_42741( ref (uParam0^)[I], uParam1 );
        }
    }
    return;
}

/* P_REPLACE_SLIPWAY_GATE */ void sub_56761(unknown uParam0, unknown uParam1, unknown uParam2)
{
     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_REPLACE_SLIPWAY_GATE", "***" );
     /* CLEANOBJECT */ sub_10759( g_U1530 );
     /* LOADMODEL */ sub_2625( g_U1046, 1 );
    g_U1530 =  /* CREATEOBJECTNOOFFSET */ sub_56876( g_U1046, uParam0, l_U904, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( g_U1530 ))
    {
        FREEZE_OBJECT_POSITION( g_U1530, 1 );
    }
    return;
}

/* CREATEOBJECTNOOFFSET */ void sub_56876(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_2625( uParam0, 1 );
    }
    Result = CREATE_OBJECT_NO_OFFSET( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an object to exist: {!f1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

/* P_DIALOG_BACKUP_02 */ void sub_57230()
{
     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_DIALOG_BACKUP_02 start", 0 );
    if ((NOT (IS_PED_DEAD( l_U801[1] ))) AND (NOT (IS_PED_DEAD( l_U801[0] ))))
    {
         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_50052( ref l_U1289 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_50175( 1, l_U801[0], "M5_CS_06_Mus", ref l_U1289, 2, 0 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_50175( 2, l_U801[1], "M5_CS_05_Avg", ref l_U1289, 2, 0 );
         /* PLAY_SINGLE_SPEECH */ sub_50421( "SMAR_VIG02B", ref l_U1289, 7, 1 );
    }
    return;
}

/* P_MONOLOG_MAX_LOW_PROFILE */ void sub_57807()
{
     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_MONOLOG_MAX_LOW_PROFILE start", 0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )))
    {
         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_50052( ref l_U1259 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_50175( 0,  /* PLAYER_PED_ID */ sub_11897(), "MAX", ref l_U1259, 2, 0 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_50175( 1,  /* PLAYER_PED_ID */ sub_11897(), "MAX", ref l_U1259, 2, 0 );
         /* PLAY_SINGLE_SPEECH */ sub_50421( "SMAR_VIG03", ref l_U1259, 7, 1 );
    }
    return;
}

/* IS_ANY_SPEECH_CURRENTLY_PLAYING */ void sub_58029()
{
    int Result;
    int I;

    Result = 0;
    for ( I = 0; I <= 3; I++ )
    {
        Result = (IS_SCRIPTED_CONVERSATION_ONGOING( I )) || (Result);
    }
    return Result;
}

/* P_SPEECH_PLAY_MAX_MONOLOGUE */ void sub_58229(unknown uParam0, unknown uParam1)
{
     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_SPEECH_PLAY_MAX_MONOLOGUE", "***" );
    if ( /* IS_MAX_VALID */ sub_34165())
    {
         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_50052( uParam1 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_50175( 0,  /* PLAYER_PED_ID */ sub_11897(), "MAX", uParam1, 2, 0 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_50175( 1,  /* PLAYER_PED_ID */ sub_11897(), "MAX", uParam1, 2, 0 );
         /* PLAY_SINGLE_SPEECH */ sub_50421( uParam0, uParam1, 8, 1 );
    }
    return;
}

/* P_ASSIGN_SLIPWAY_CS_BULLET_CAM */ void sub_58586()
{
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_ASSIGN_SLIPWAY_CS_BULLET_CAM", 0 );
    if (NOT (IS_PED_DEAD( l_U758[0] )))
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Assigning bullet cam to pi_cs_unloader[0]", 0 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( l_U758[0], 1 );
        SET_BULLET_CAM_PREF( l_U758[0], "ALL_F_06_FAILSAFE", "ALL_F_06_FAILSAFE", "ALL_F_06_FAILSAFE", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
    }
    else if (NOT (IS_PED_DEAD( l_U758[1] )))
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Assigning bullet cam to pi_cs_unloader[1]", 0 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( l_U758[1], 1 );
        SET_BULLET_CAM_PREF( l_U758[1], "ALL_F_06_FAILSAFE", "ALL_F_06_FAILSAFE", "ALL_F_06_FAILSAFE", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
    }
    else if (NOT (IS_PED_DEAD( l_U801[0] )))
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Assigning bullet cam to pi_cs_unloaderBackup[0]", 0 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( l_U801[0], 1 );
        SET_BULLET_CAM_PREF( l_U801[0], "ALL_F_06_FAILSAFE", "ALL_F_06_FAILSAFE", "ALL_F_06_FAILSAFE", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
    }
    else if (NOT (IS_PED_DEAD( l_U801[1] )))
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Assigning bullet cam to pi_cs_unloaderBackup[1]", 0 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( l_U801[1], 1 );
        SET_BULLET_CAM_PREF( l_U801[1], "ALL_F_06_FAILSAFE", "ALL_F_06_FAILSAFE", "ALL_F_06_FAILSAFE", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
    }
    else if (NOT (IS_PED_DEAD( l_U859[0] )))
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Assigning bullet cam to piBackupBackup[0]", 0 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( l_U859[0], 1 );
        SET_BULLET_CAM_PREF( l_U859[0], "ALL_F_06_FAILSAFE", "ALL_F_06_FAILSAFE", "ALL_F_06_FAILSAFE", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "No bullet cam assigned!", "***" );
    };;;;;
    return;
}

/* P_HANDLE_SLIPWAY_TO_WAREHOUSE_GATE_SOUND */ void sub_59664()
{
    if ((DOES_OBJECT_EXIST( g_U1530 )) AND (l_U921 == 0))
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_SLIPWAY_TO_WAREHOUSE_GATE_SOUND: Start gate sound", "***" );
        PLAY_SOUND_FROM_OBJECT( l_U922, "S_MARINA_SLIPWAY_CHAINLINK_GATE_OPEN", g_U1530 );
        l_U917 = 0;
        l_U921 = 1;
    }
    return;
}

/* P_CREATE_WH_LIGHTS */ void sub_59963(int iParam0, boolean bParam1)
{
    int I;
    vector vVar5;
    vector vVar8;
    unknown uVar11;
    vector vVar12;
    vector vVar15;
    vector vVar18;

     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_CREATE_WH_LIGHTS start", 0 );
    vVar5 = {57.85000000, -1.29000000, 3.28600000};
    vVar8 = {0.00000000, 0.00000000, 180.00000000};
    uVar11 = l_U1853;
    if (iParam0 == 1)
    {
        l_U1853 =  /* CREATEOBJECTNOOFFSET */ sub_56876( g_U1100, vVar5, vVar8, 0, 1, 0 );
    }
    else
    {
        l_U1853 =  /* CREATEOBJECTNOOFFSET */ sub_56876( g_U1099, vVar5, vVar8, 0, 1, 0 );
    }
     /* CLEANOBJECT */ sub_10759( uVar11 );
    if (DOES_OBJECT_EXIST( l_U1853 ))
    {
        FREEZE_OBJECT_POSITION( l_U1853, 1 );
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1853, ref g_U1170 );
    }
    vVar12 = {59.35000000, -1.52000000, 4.70000000};
    vVar15 = {-90.00000000, 0.00000000, 0.00000000};
     /* CLEANOBJECT */ sub_10759( l_U1854 );
    if (iParam0 == 1)
    {
        l_U1854 =  /* CREATEOBJECT */ sub_10326( g_U1061, vVar12, vVar15, 0, 1, 0 );
    }
    else
    {
        l_U1854 =  /* CREATEOBJECT */ sub_10326( g_U1062, vVar12, vVar15, 0, 1, 0 );
    }
    if (DOES_OBJECT_EXIST( l_U1854 ))
    {
        FREEZE_OBJECT_POSITION( l_U1854, 1 );
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1854, ref g_U1170 );
    }
    if (bParam1)
    {
        if (iParam0 == 1)
        {
             /* WRITESCRIPTLOG */ sub_1246( "MSWW", "Playing for light switch on...", 0 );
            PLAY_SOUND_FROM_OBJECT( l_U1934, "LIGHT_SWITCH_LARGE_ON", l_U1854 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_1246( "MSWW", "Playing for light switch off...", 0 );
            PLAY_SOUND_FROM_OBJECT( l_U1934, "LIGHT_SWITCH_LARGE_OFF", l_U1854 );
        }
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Not playing light switch sound.", 0 );
    }
    vVar18 = {0.00000000, 0.00000000, 0.00000000};
    l_U1897[0]._fU4 = {63.02100000, -3.82700000, 6.65800000};
    l_U1897[1]._fU4 = {62.83900000, -12.21300000, 6.67900000};
    l_U1897[2]._fU4 = {55.00500000, -4.40500000, 6.57800000};
    l_U1897[3]._fU4 = {55.16300000, -12.78500000, 6.67400000};
    l_U1897[4]._fU4 = {48.11500000, -9.17600000, 6.44500000};
    l_U1897[5]._fU4 = {48.14400000, -16.14800000, 6.44500000};
    for ( I = 0; I <= 5; I++ )
    {
        l_U1897[I]._fU16 = iParam0;
        if (l_U1897[I]._fU16 == 1)
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_CREATE_WH_LIGHTS: Creating lights", "***" );
             /* CLEANOBJECT */ sub_10759( l_U1897[I]._fU0 );
            l_U1897[I]._fU0 =  /* CREATEOBJECT */ sub_10326( l_U1855, l_U1897[I]._fU4, vVar18, 0, 1, 0 );
            ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1897[I]._fU0, ref g_U1170 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_CREATE_WH_LIGHTS: Removing lights", "***" );
             /* CLEANOBJECT */ sub_10759( l_U1897[I]._fU0 );
        }
    }
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_CREATE_WH_LIGHTS end", 0 );
    return;
}

/* P_CREATE_WH_GARAGEDOOR */ void sub_61105()
{
     /* WRITESCRIPTLOG */ sub_1246( "SP", "P_CREATE_WH_GARAGEDOOR", "###" );
     /* CLEANOBJECT */ sub_10759( g_U1532 );
    g_U1532 =  /* CREATEOBJECT */ sub_10326( g_U1063, g_U1656, 0.00000000, 0.00000000, 0.00000000, 0, 1, 0 );
    if ((DOES_OBJECT_EXIST( g_U1532 )) == 1)
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( g_U1532, ref g_U1178 );
        FREEZE_OBJECT_POSITION( g_U1532, 1 );
        PLAY_OBJECT_ANIM( g_U1532, "p_ma_botdor_aa_h", ref g_U1138, 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( g_U1532, "p_ma_botdor_aa_h", ref g_U1138, 0 );
        SET_OBJECT_ANIM_CURRENT_TIME( g_U1532, "p_ma_botdor_aa_h", ref g_U1138, 0.10000000 );
    }
    return;
}

/* P_CREATE_WAREHOUSE_OFFICE_PLACEMENTS */ void sub_61449()
{
    vector vVar2;
    vector vVar5;
    vector vVar8;
    vector vVar11;

     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_CREATE_WAREHOUSE_OFFICE_PLACEMENTS start", 0 );
    vVar2 = {50.98000000, -18.54000000, 3.49000000};
    vVar5 = {50.93000000, -18.26000000, 3.49000000};
    vVar8 = {59.32400000, -21.25400000, 3.30800000};
    vVar11 = {-1.52000000, 0, 3.00000000};
    l_U1721[0] =  /* CREATEPLACEMENT */ sub_61660( -4072149, vVar5, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0, 1119092736 );
    l_U1721[1] =  /* CREATEPLACEMENT */ sub_61660( -4072149, 59.90000000, -21.20000000, 2.70000000, 0, 0, 0, 0, 1, 0, 1119092736 );
    l_U1720 =  /* CREATEPLACEMENT */ sub_61660( 39142315, vVar8, vVar11, 0, 0, 0, 1119092736 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1721[0], ref g_U1170 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1721[1], ref g_U1170 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1720, ref g_U1170 );
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_CREATE_WAREHOUSE_OFFICE_PLACEMENTS end", 0 );
    return;
}

/* CREATEPLACEMENT */ void sub_61660(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, int iParam8, unknown uParam9, unknown uParam10)
{
    unknown Result;

    Result = CREATE_PLACEMENT_ROTATE( uParam0, uParam1, uParam4, uParam7, 0, uParam9, uParam10 );
    if (iParam8 == 1)
    {
        while ((DOES_PLACEMENT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for a placement to exist: {} ###", 1, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return Result;
}

/* P_CREATE_BLANK_MONITOR */ void sub_62034(boolean bParam0)
{
    vector vVar3;
    vector vVar6;

     /* WRITESCRIPTLOG */ sub_1246( "SP", "P_CREATE_BLANK_MONITOR", 0 );
    vVar3 = {56.12000000, -21.71300000, 2.91000000};
    vVar6 = {6.21400000, 0.00000000, -20.00000000};
     /* CLEANOBJECT */ sub_10759( l_U1740 );
    l_U1740 =  /* CREATEOBJECTNOOFFSET */ sub_56876( g_U1057, vVar3, vVar6, 0, 1, 0 );
    ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1740, ref g_U1170 );
    FREEZE_OBJECT_POSITION( l_U1740, 1 );
    SET_OBJECT_PROOFS( l_U1740, bParam0, bParam0, bParam0, bParam0, bParam0 );
    if (bParam0)
    {
        SET_OBJECT_INVINCIBLE( l_U1740, 1 );
         /* WRITESCRIPTLOG */ sub_1246( "SP", "setting proofs...ON", 0 );
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_1246( "SP", "setting proofs...OFF", 0 );
    }
    return;
}

/* P_CREATE_RANSOM_NOTE_2 */ void sub_62328()
{
     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_CREATE_RANSOM_NOTE_2", 0 );
     /* CLEANOBJECT */ sub_10759( l_U1753 );
    l_U1753 =  /* CREATEOBJECT */ sub_10326( 509064891, l_U1841, 0, 0, 100, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U1753 ))
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1753, ref g_U1170 );
        FREEZE_OBJECT_POSITION( l_U1753, 1 );
         /* P_CREATEPOISTRUCTOBJECT */ sub_62518( ref l_U1755, 1, l_U1841, l_U1753, 1, 0, 1.50000000, 3.00000000, 1, 0 );
         /* P_SET_INTERACTIVE_TEXT */ sub_63633( ref l_U1755, 30, "POI_DOCKRANSOM2" );
         /* P_SET_POI_REUSABLE */ sub_63843( ref l_U1755, 1 );
         /* P_SET_POI_FORCE_WALK */ sub_63896( ref l_U1755, 0 );
         /* P_SET_POI_AVAILABLE */ sub_63951( ref l_U1755, 0 );
    }
     /* LOADANIMDICT */ sub_3323( "EXPL_CAM", 0, 0 );
    return;
}

/* P_CREATEPOISTRUCTOBJECT */ void sub_62518(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;

     /* P_CREATEBLANKPOISTRUCT */ sub_62559( iParam0, uParam10 );
    if ((DOES_OBJECT_EXIST( uParam5 )) == 1)
    {
        uVar14 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( uParam5 )};
        iParam0->_fU4 = uParam1;
        iParam0->_fU308 = uParam7;
        if (iParam0->_fU308 == 0)
        {
            iParam0->_fU100 = {uVar14};
            iParam0->_fU200 = {uVar14};
        }
        iParam0->_fU112 = uParam8;
        iParam0->_fU212 = uParam9;
        iParam0->_fU300 = uParam6;
        iParam0->_fU312 = uParam5;
        iParam0->_fU320 = uParam11;
        iParam0->_fU20 = {uParam2};
         /* P_CREATEPOIGLINT */ sub_63023( iParam0 );
    }
    else
    {
        SCRIPT_ASSERT( "[SP]### WARNING!!! (P_CreateObjectPOIStruct): Object doesn't exist! ###", 0 );
    }
    return;
}

/* P_CREATEBLANKPOISTRUCT */ void sub_62559(int iParam0, unknown uParam1)
{
    iParam0->_fU0 = uParam1;
    iParam0->_fU4 = 0;
    iParam0->_fU8 = 0;
    iParam0->_fU12 = nil;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU52 = 1;
    iParam0->_fU56 = 1;
    iParam0->_fU60 = 0;
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = 0;
    iParam0->_fU76 = 0;
    iParam0->_fU80 = 0;
    iParam0->_fU84 = 0;
    iParam0->_fU100 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU112 = 0.00000000;
    iParam0->_fU88 = 0;
    iParam0->_fU92 = 0;
    iParam0->_fU96 = 0;
    iParam0->_fU200 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU212 = 0.00000000;
    iParam0->_fU300 = 0;
    iParam0->_fU304 = 1;
    iParam0->_fU308 = 0;
    iParam0->_fU324 = 1;
    iParam0->_fU328 = 0;
    iParam0->_fU340 = 0;
    iParam0->_fU336 = 0.20000000;
    return;
}

/* P_CREATEPOIGLINT */ void sub_63023(int iParam0)
{
    if (iParam0->_fU12 != nil)
    {
        if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
        {
            REMOVE_GLINT( iParam0->_fU12 );
        }
    }
    iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
     /* P_INITPOIGLINT */ sub_63121( iParam0 );
    return;
}

/* P_INITPOIGLINT */ void sub_63121(int iParam0)
{
    if (iParam0->_fU0 == 1)
    {
        if (iParam0->_fU320 == 1)
        {
            if ((iParam0->_fU8 > 0) AND (iParam0->_fU4 == 0))
            {
                 /* P_ENABLEPOIGLINT */ sub_63197( iParam0, 1 );
            }
            else if ((iParam0->_fU8 < 2) AND (iParam0->_fU4 == 1))
            {
                 /* P_ENABLEPOIGLINT */ sub_63197( iParam0, 1 );
            }
            else if ((iParam0->_fU8 == 1) AND (iParam0->_fU4 == 2))
            {
                 /* P_ENABLEPOIGLINT */ sub_63197( iParam0, 1 );
            }
            else
            {
                 /* P_ENABLEPOIGLINT */ sub_63197( iParam0, 0 );
            };;;
        }
        else
        {
             /* P_ENABLEPOIGLINT */ sub_63197( iParam0, 0 );
        }
    }
    else
    {
         /* P_ENABLEPOIGLINT */ sub_63197( iParam0, 0 );
    }
    return;
}

/* P_ENABLEPOIGLINT */ void sub_63197(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        if (iParam0->_fU12 != nil)
        {
            if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
            {
                ENABLE_GLINT( iParam0->_fU12, 1 );
            }
            else
            {
                iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
            }
        }
        else
        {
            iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
        }
    }
    else if (iParam0->_fU12 != nil)
    {
        if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
        {
            ENABLE_GLINT( iParam0->_fU12, 0 );
        }
    }
    return;
}

/* P_SET_INTERACTIVE_TEXT */ void sub_63633(int iParam0, unknown uParam1, unknown uParam2)
{
    StrCopy( ref iParam0->_fU32, uParam2, 16 );
    iParam0->_fU48 = uParam1;
     /* P_INITINTERACTIVETEXT */ sub_63689( iParam0 );
    return;
}

/* P_INITINTERACTIVETEXT */ void sub_63689(int iParam0)
{
    if ((iParam0->_fU8 == 2) AND (iParam0->_fU0 == 1))
    {
        if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
        {
            SET_INTERACTIONTEXT_BUTTON( iParam0->_fU48 );
            SET_INTERACTIONTEXT_TEXT( iParam0 + 32 );
            SET_INTERACTIONTEXT_VISIBLE( 1 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 1 );
            SET_INTERACTIONTEXT_AVAILABLE( 1 );
            iParam0->_fU56 = 1;
        }
    }
    return;
}

/* P_SET_POI_REUSABLE */ void sub_63843(int iParam0, unknown uParam1)
{
    iParam0->_fU68 = uParam1;
    return;
}

/* P_SET_POI_FORCE_WALK */ void sub_63896(int iParam0, unknown uParam1)
{
    iParam0->_fU324 = uParam1;
    return;
}

/* P_SET_POI_AVAILABLE */ void sub_63951(int iParam0, int iParam1)
{
    if (iParam1 == 0)
    {
        iParam0->_fU60 = 1;
    }
    else
    {
        iParam0->_fU60 = 0;
    }
     /* P_UPDATEINTERACTIONTEXTAVAILABLE */ sub_64015( iParam0 );
    return;
}

/* P_UPDATEINTERACTIONTEXTAVAILABLE */ void sub_64015(int iParam0)
{
    if (iParam0->_fU60 == 1)
    {
        SET_INTERACTIONTEXT_AVAILABLE( 0 );
        iParam0->_fU56 = 0;
    }
    else if (iParam0->_fU56 == 1)
    {
        if (( /* F_ISACTIONINGAVAILABLE */ sub_64111( iParam0 )) == 0)
        {
            SET_INTERACTIONTEXT_AVAILABLE( 0 );
            iParam0->_fU56 = 0;
        }
    }
    else if (( /* F_ISACTIONINGAVAILABLE */ sub_64111( iParam0 )) == 1)
    {
        SET_INTERACTIONTEXT_AVAILABLE( 1 );
        iParam0->_fU56 = 1;
    };;;
    return;
}

/* F_ISACTIONINGAVAILABLE */ int sub_64111(int iParam0)
{
    if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )) == 0) AND ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_11935() )) == 0))
    {
        if (((IS_PED_RELOADING(  /* PLAYER_PED_ID */ sub_11897() )) == 1) || (((IS_PED_GETTING_UP(  /* PLAYER_PED_ID */ sub_11897() )) == 1) || (((IS_PED_PICKING_UP_PICKUP(  /* PLAYER_PED_ID */ sub_11897() )) == 1) || (((IS_PED_IN_COVER(  /* PLAYER_PED_ID */ sub_11897() )) == 1) || (((IS_PED_DUCKING(  /* PLAYER_PED_ID */ sub_11897() )) == 1) || (IS_PLAYER_SHOOTDODGING() == 1))))))
        {
            return 0;
        }
        if (iParam0->_fU304 == 0)
        {
            if ((IS_MONOLOGUE_PLAYING() == 1) || ((IS_ANY_SPEECH_PLAYING(  /* PLAYER_PED_ID */ sub_11897() )) == 1))
            {
                return 0;
            }
        }
        return 1;
    }
    return 0;
}

/* DISABLETIMER */ void sub_64448(int iParam0)
{
    iParam0->_fU20 = 0;
    iParam0->_fU16 = 0;
    return;
}

/* P_REMOVE_TRUCK_UNLOADERS */ void sub_64601()
{
     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_REMOVE_TRUCK_UNLOADERS start", 0 );
    STOP_SCRIPT_STREAM( 1 );
     /* CLEANPEDARRAY */ sub_31287( ref l_U758 );
     /* CLEANPEDARRAY */ sub_31287( ref l_U801 );
     /* CLEANPEDARRAY */ sub_31287( ref l_U859 );
     /* CLEANOBJECTARRAY */ sub_31598( ref l_U884 );
     /* CLEANVEHICLE */ sub_25246( l_U875 );
     /* UNLOADMODEL */ sub_38269( -1127527230 );
     /* UNLOADMODEL */ sub_38269( -301519047 );
     /* UNLOADMODEL */ sub_38269( g_U1027 );
     /* UNLOADMODEL */ sub_38269( g_U1038 );
     /* UNLOADMODEL */ sub_38269( l_U883 );
     /* UNLOADMODEL */ sub_38269( g_U1042 );
     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_REMOVE_TRUCK_UNLOADERS end", 0 );
    return;
}

/* P_CREATE_FABIANA_AND_THUGS */ void sub_64907()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_CREATE_FABIANA_AND_THUGS", "***" );
     /* CLEANPED */ sub_8951( l_U1564 );
    l_U1564 =  /* CREATEPED */ sub_9044( ref l_U1551 );
    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1564, 1 );
    for ( I = 0; I <= 1; I++ )
    {
         /* CLEANPED */ sub_8951( l_U1592[I] );
        l_U1592[I] =  /* CREATEPED */ sub_9044( ref l_U1565[I] );
         /* F_GIVEPEDWEAPON */ sub_14439( l_U1592[I], -1074756423, 25000, 0, 1 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1592[I], 1 );
    }
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_9877( ref l_U1592, "MID03GUY" );
    return;
}

/* HANDLE_WAREHOUSE_FX */ void sub_65168()
{
    if (NOT IS_SCRIPTEDFX_ENABLED())
    {
        return;
    }
    switch (l_U709)
    {
        case 0:
        PLAY_IMAGEFX( "KILL_FLASH_DOUBLE", 3, 0 );
         /* WRITESCRIPTLOG */ sub_1246( "bsw", "HANDLE_WAREHOUSE_FX - playing KILL_FLASH_DOUBLE", 0 );
         /* CREATETIMER */ sub_29215( ref l_U663, 0, 1, 0 );
         /* STARTTIMER */ sub_29365( ref l_U663 );
        l_U709 = 1;
        break;
        case 1:
        if ( /* ISTIMERDONE */ sub_29498( ref l_U663 ))
        {
            PLAY_IMAGEFX( "DISTORT_INTERLACE_MIDDLE", 4, 0 );
             /* WRITESCRIPTLOG */ sub_1246( "bsw", "HANDLE_WAREHOUSE_FX - playing DISTORT_INTERLACE_MIDDLE", 0 );
             /* CREATETIMER */ sub_29215( ref l_U663, 500, 1, 0 );
             /* STARTTIMER */ sub_29365( ref l_U663 );
            l_U709 = 2;
        }
        break;
        case 2:
        if ( /* ISTIMERDONE */ sub_29498( ref l_U663 ))
        {
            PLAY_IMAGEFX( "DOUBLE_TINT_BLUE_FLASH", 4, 0 );
             /* WRITESCRIPTLOG */ sub_1246( "bsw", "HANDLE_WAREHOUSE_FX - playing DOUBLE_TINT_BLUE_FLASH", 0 );
             /* CREATETIMER */ sub_29215( ref l_U663, 500, 1, 0 );
             /* STARTTIMER */ sub_29365( ref l_U663 );
            l_U709 = 3;
        }
        break;
        case 3:
        if ( /* ISTIMERDONE */ sub_29498( ref l_U663 ))
        {
            PLAY_IMAGEFX( "DISTORT_INTERLACE_MIDDLE", 4, 0 );
             /* WRITESCRIPTLOG */ sub_1246( "bsw", "HANDLE_WAREHOUSE_FX - playing DISTORT_INTERLACE_MIDDLE", 0 );
             /* WRITESCRIPTLOG */ sub_1246( "bsw", "HANDLE_WAREHOUSE_FX - playing KILL_FLASH_DOUBLE", 0 );
            l_U709 = 4;
        }
        break;
        case 4: break;
    }
    return;
}

/* P_CREATE_WAREHOUSE_CS */ void sub_66024()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_CREATE_WAREHOUSE_CS", "***" );
    for ( I = 0; I <= 1; I++ )
    {
         /* CLEANPED */ sub_8951( l_U1434[I] );
        l_U1434[I] =  /* CREATEPED */ sub_9044( ref l_U1407[I] );
         /* PED_SET_ROOM_BY_NAME */ sub_66161( ref l_U1434[I], g_U1170 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1434[I], 1 );
        SET_PED_VISIBLE( l_U1434[I], 0 );
         /* F_GIVEPEDWEAPON */ sub_14439( l_U1434[I], 68019059, 25000, 0, 1 );
    }
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_9877( ref l_U1434, "cs_warehouse" );
    return;
}

/* PED_SET_ROOM_BY_NAME */ void sub_66161(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    if ( /* IS_PED_VALID */ sub_34195( (uParam0^) ))
    {
        SET_ROOM_FOR_PED_BY_NAME( (uParam0^), ref uParam1 );
    }
    return;
}

/* P_PLAY_CUTSCENE_MID_03_DOCKS */ void sub_66328()
{
    int iVar2;

     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_PLAY_CUTSCENE_MID_03_DOCKS start", 0 );
     /* LOADSEAMLESSCUTSCENE */ sub_34474( "MID_03_DOCKS_concat", 1 );
     /* LOADISEQ */ sub_24332( 9319211, 1 );
     /* NIS_PRE_SETUP */ sub_32705( 1, 0, 0, 1 );
    if ( /* IS_PED_VALID */ sub_34195( l_U1564 ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U1564, "Fabi_Docks", 0 );
    }
    if ( /* IS_PED_VALID */ sub_34195( l_U1434[0] ))
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Registering MID_03 - G_CS_DOCK_B^2", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U1434[0], "G_CS_DOCK_B^2", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U1434[0], 0, 0 ), "W_PI_PT92_Aa_H^1", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( l_U1434[0], l_U1437, 180 );
    }
    if ( /* IS_PED_VALID */ sub_34195( l_U1434[1] ))
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Registering MID_03 - G_CS_DOCK_B^3", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U1434[1], "G_CS_DOCK_B^3", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U1434[1], 0, 0 ), "W_PI_PT92_Aa_H^2", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( l_U1434[1], l_U1440, 180 );
    }
    if ( /* IS_PED_VALID */ sub_34195( l_U1592[0] ))
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Registering MID_03 - G_CS_DOCK_B", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U1592[0], "G_CS_DOCK_B", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U1592[0], 0, 0 ), "W_AR_AK47_Aa_H", 0 );
    }
    if ( /* IS_PED_VALID */ sub_34195( l_U1592[1] ))
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "Registering MID_03 - G_CS_DOCK_B^1", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U1592[1], "G_CS_DOCK_B^1", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U1592[1], 0, 0 ), "W_AR_AK47_Aa_H^1", 0 );
    }
    if ( /* IS_MAX_VALID */ sub_34165())
    {
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_11897(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_11897(), 0, 0 ), "W_PI_PT92_Aa_H", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT(  /* PLAYER_PED_ID */ sub_11897(), g_U790[3], g_U899[3] );
    }
    ISEQ_REGISTER_ENTITY( 9319211, "cs1", l_U1434[0], 0 );
    ISEQ_REGISTER_ENTITY( 9319211, "cs2", l_U1434[1], 0 );
    CUTSCENE_REGISTER_ISEQ( 9319211 );
     /* PED_ARRAY_SET_VISIBILITY */ sub_67337( ref l_U1434, 1 );
    START_SEAMLESS_CUTSCENE();
     /* P_SETUP_WEATHER_TIMEOFDAY */ sub_23803( 1 );
    WAIT( 1 );
    if (l_U710 == 9)
    {
         /* WRITESCRIPTLOG */ sub_1246( "BSW", "We didnt play ONESHOT_06, just unload it", 0 );
        AUDIO_MUSIC_STOP_ONESHOT();
    }
    l_U710 = 10;
    l_U711 = 10;
    while (NOT HAS_CUTSCENE_FINISHED())
    {
        iVar2 = GET_CUTSCENE_TIME_MS();
         /* P_HANDLE_MUSIC */ sub_21338();
         /* P_HANDLE_SCREEN */ sub_67561( ref l_U1728 );
        if ((iVar2 > 3000) AND (NOT l_U1739))
        {
            l_U1739 = 1;
             /* WRITESCRIPTLOG */ sub_1246( "RJM", "Start up the security video", 0 );
            l_U1728._fU24 = 1;
             /* CLEANOBJECT */ sub_10759( l_U1740 );
             /* CREATE_WAREHOUSE_OFFICE_SECURITY_MONITOR */ sub_68649();
             /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U1742, l_U1752 );
        }
        if (NOT l_U1897[0]._fU16)
        {
            if (iVar2 >= 23650)
            {
                 /* WRITESCRIPTLOG */ sub_1246( "TEH", "Hit lights", 0 );
                 /* P_TOGGLE_WH_LIGHTS */ sub_68937();
                 /* WRITESCRIPTLOG */ sub_1246( "RJM", "Stop the security video, swap monitors", 0 );
                l_U1728._fU24 = 3;
                 /* CLEANOBJECT */ sub_10759( l_U1741 );
                 /* P_CREATE_BLANK_MONITOR */ sub_62034( 0 );
                 /* DISABLETIMER */ sub_64448( ref l_U1742 );
            }
        }
        WAIT( 0 );
    }
     /* CLEANPED */ sub_8951( l_U1564 );
     /* CLEANPEDARRAY */ sub_31287( ref l_U1592 );
     /* CLEANOBJECT */ sub_10759( g_U1660 );
     /* UNLOADMODEL */ sub_38269( g_U1028 );
     /* UNLOADMODEL */ sub_38269( g_U1093 );
     /* P_SETUP_WEATHER_TIMEOFDAY */ sub_23803( 2 );
     /* P_POST_MID03_SETUP_BLENDOUT */ sub_69164();
    STOP_MOVIE( l_U1728._fU8 );
    if (NOT l_U1897[0]._fU16)
    {
         /* P_CREATE_WH_LIGHTS */ sub_59963( 1, 1 );
    }
     /* P_SET_WAREHOUSE_CS_TRAITS */ sub_69463();
     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_PLAY_CUTSCENE_MID_03_DOCKS end", 0 );
    return;
}

/* PED_ARRAY_SET_VISIBILITY */ void sub_67337(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* PED_SET_VISIBILITY */ sub_35993( (uParam0^)[I], uParam1 );
    }
    return;
}

/* P_HANDLE_SCREEN */ void sub_67561(int iParam0)
{
     /* P_HANDLE_SCREEN_VIDEO */ sub_67591( iParam0 );
    if (iParam0->_fU36)
    {
         /* P_HANDLE_SCREEN_DAMAGE */ sub_67944( iParam0 );
    }
    if (iParam0->_fU16)
    {
         /* P_HANDLE_TV_PROMPT */ sub_68165( iParam0 );
    }
    return;
}

/* P_HANDLE_SCREEN_VIDEO */ void sub_67591(int iParam0)
{
    switch (iParam0->_fU24)
    {
        case 0: break;
        case 1:
        if (DOES_OBJECT_EXIST( iParam0->_fU0 ))
        {
            SET_OBJECT_LIGHTS( iParam0->_fU0, 1 );
        }
        PLAY_MOVIE( iParam0->_fU8, 0 );
        iParam0->_fU24 = 2;
        break;
        case 2: break;
        case 3:
         /* P_STOP_MOVIE */ sub_67743( iParam0 );
        iParam0->_fU24 = 0;
        break;
        case 4:
         /* P_CLEANUPTVASSETS */ sub_30779( iParam0 );
        break;
    }
    return;
}

/* P_STOP_MOVIE */ void sub_67743(int iParam0)
{
    SET_TEXT_RENDER_ID( GET_SCRIPT_RENDERTARGET_RENDER_ID() );
    DRAW_RECT( 0.50000000, 0.50000000, 1.00000000, 1.00000000, 0, 0, 0, 255 );
    STOP_MOVIE( iParam0->_fU8 );
    if (DOES_OBJECT_EXIST( iParam0->_fU0 ))
    {
        SET_OBJECT_LIGHTS( iParam0->_fU0, 0 );
    }
    PLAY_SOUND_FROM_OBJECT( iParam0->_fU28, "TELEVISION_OFF", iParam0->_fU0 );
    return;
}

/* P_HANDLE_SCREEN_DAMAGE */ void sub_67944(int iParam0)
{
    if (DOES_OBJECT_EXIST( iParam0->_fU0 ))
    {
        if (((GET_OBJECT_HEALTH( iParam0->_fU0 )) < 900.00000000) || (HAS_OBJECT_BEEN_DAMAGED( iParam0->_fU0 )))
        {
            SMASH_GLASS_ON_OBJECT( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU0 ), 1.00000000, GET_OBJECT_MODEL( iParam0->_fU0 ), 1.00000000 );
            SET_OBJECT_LIGHTS( iParam0->_fU0, 0 );
            if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )) == 0) AND (iParam0->_fU32 == 1))
            {
                TASK_CLEAR_LOOK_AT(  /* PLAYER_PED_ID */ sub_11897() );
            }
            iParam0->_fU24 = 4;
        }
    }
    else
    {
        iParam0->_fU24 = 4;
    }
    return;
}

/* P_HANDLE_TV_PROMPT */ void sub_68165(int iParam0)
{
    unknown uVar3;

    uVar3 = GET_PLAYER_PED( INT_TO_PLAYERINDEX( GET_PLAYER_ID() ) );
    if ((DOES_OBJECT_EXIST( iParam0->_fU0 )) AND (NOT (IS_PED_DEAD( uVar3 ))))
    {
        if ((GET_DISTANCE_BETWEEN_COORDS( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uVar3 ), "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU0 ), 1 )) < 3.00000000)
        {
            if (iParam0->_fU32 == 0)
            {
                if ((IS_PED_IN_COMBAT( uVar3 )) == 0)
                {
                    TASK_LOOK_AT_OBJECT( uVar3, iParam0->_fU0, 180000, 16 );
                }
                iParam0->_fU32 = 1;
            }
        }
        else if (iParam0->_fU32 == 1)
        {
            CLEAR_PRINTS();
            TASK_CLEAR_LOOK_AT( uVar3 );
            iParam0->_fU32 = 0;
        }
        if (((GET_DISTANCE_BETWEEN_COORDS( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uVar3 ), "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU0 ), 1 )) < 1.50000000) AND (IS_OBJECT_ON_SCREEN( iParam0->_fU0 )))
        {
            if (IS_BUTTON_JUST_PRESSED( 0, 15 ))
            {
                if (iParam0->_fU24 == 0)
                {
                    PLAY_SOUND_FROM_OBJECT( iParam0->_fU28, "TELEVISION_ON", iParam0->_fU0 );
                    WAIT( 200 );
                    iParam0->_fU24 = 1;
                }
                else if (iParam0->_fU24 == 2)
                {
                    WAIT( 200 );
                    iParam0->_fU24 = 3;
                }
            }
        }
    }
    return;
}

/* CREATE_WAREHOUSE_OFFICE_SECURITY_MONITOR */ void sub_68649()
{
    vector vVar2;
    vector vVar5;

     /* WRITESCRIPTLOG */ sub_1246( "GA", "CREATE_WAREHOUSE_OFFICE_SECURITY_MONITOR", 0 );
    vVar2 = {56.12000000, -21.71300000, 2.91000000};
    vVar5 = {6.21400000, 0.00000000, -20.00000000};
     /* CLEANOBJECT */ sub_10759( l_U1741 );
    l_U1741 =  /* CREATEOBJECTNOOFFSET */ sub_56876( g_U1058, vVar2, vVar5, 0, 1, 0 );
    if ((DOES_OBJECT_EXIST( l_U1741 )) == 1)
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1741, ref g_U1170 );
    }
    return;
}

/* P_TOGGLE_WH_LIGHTS */ void sub_68937()
{
    if (l_U1897[0]._fU16)
    {
         /* P_CREATE_WH_LIGHTS */ sub_59963( 0, 1 );
    }
    else
    {
         /* P_CREATE_WH_LIGHTS */ sub_59963( 1, 1 );
    }
    return;
}

/* P_POST_MID03_SETUP_BLENDOUT */ void sub_69164()
{
     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_POST_MID03_SETUP_BLENDOUT", "*****" );
    CAMERA_PLAY_ANIMATED( l_U656, l_U657, 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
    if ( /* IS_MAX_VALID */ sub_34165())
    {
        CLEAR_PED_DEFAULT_AIM(  /* PLAYER_PED_ID */ sub_11897() );
        SNAP_PLAYER_TO_COVERPOINT(  /* PLAYER_ID */ sub_11935(), "GenCover", "E634EAAC_4C50CF1D_Corner2", 0 );
    }
    WAIT( 1 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U936[3], 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U973[3], 1065353216, 0 );
    return;
}

/* P_SET_WAREHOUSE_CS_TRAITS */ void sub_69463()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_SET_WAREHOUSE_CS_TRAITS", "***" );
     /* P_SETUP_AI_GROUP */ sub_39187( ref l_U1400, 1.00000000, 0 );
    for ( I = 0; I <= 1; I++ )
    {
        if ( /* IS_PED_VALID */ sub_34195( l_U1434[I] ))
        {
             /* P_QUICK_ADD_PED_TO_GROUP */ sub_39597( l_U1434[I], ref l_U1400 );
             /* MAL_SETTEMPLATEANDRANGES */ sub_40046( ref l_U1434[I], ref g_U1586, -1082130432, -1082130432, 1 );
            SET_PED_DIES_INSTANTLY_IN_WATER( l_U1434[I], 1 );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1434[I], 0 );
             /* PED_SET_ALERTNESS */ sub_41792( ref l_U1434[I], 2 );
        }
    }
    return;
}

/* P_FADE_IN_AND_WAIT */ void sub_70235(unknown uParam0)
{
    if ((IS_SCREEN_FADING_IN() == 0) AND (IS_SCREEN_FADED_IN() == 0))
    {
        DO_SCREEN_FADE_IN( uParam0 );
        while (IS_SCREEN_FADED_IN() == 0)
        {
            DISPLAYF( "[SP]### Waiting for screen to fade in... ###", 0 );
            WAIT( 0 );
        }
    }
    return;
}

/* F_WAREHOUSE_START_CS_BACKUP */ int sub_70472(unknown uParam0)
{
    unknown uVar3;

    if ((uParam0^) >= 3)
    {
         /* WRITESCRIPTLOG */ sub_1246( "BSW", "F_WAREHOUSE_START_CS_BACKUP finished", 0 );
        return 1;
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_1246( "BSW", "F_WAREHOUSE_START_CS_BACKUP spawning a ped", 0 );
    }
    l_U1488[0] = {62.22608000, -3.46927300, 2.20000000};
    l_U1488[1] = {47.44432000, -7.04987400, 1.98649500};
    l_U1488[2] = {52.44901000, -3.28626400, 1.98649500};
     /* CLEANPED */ sub_8951( l_U1484[(uParam0^)] );
    l_U1484[(uParam0^)] =  /* CREATEPED */ sub_9044( ref l_U1444[(uParam0^)] );
     /* F_GIVEPEDWEAPON */ sub_14439( l_U1484[(uParam0^)], -612753081, 25000, 0, 0 );
     /* P_QUICK_ADD_PED_TO_GROUP */ sub_39597( l_U1484[(uParam0^)], ref l_U1400 );
    if ( /* IS_PED_VALID */ sub_34195( l_U1484[(uParam0^)] ))
    {
        SET_ROOM_FOR_PED_BY_NAME( l_U1484[(uParam0^)], ref g_U1178 );
        SET_PED_CAN_PLAY_LOCO_FLAVOR_STARTS( l_U1484[(uParam0^)], 0 );
        SET_PED_CAN_AVOID_DEATH_ZONES( l_U1484[(uParam0^)], 0 );
        if ((uParam0^) == 0)
        {
            if ( /* IS_MAX_VALID */ sub_34165())
            {
                 /* MAL_SETTEMPLATEANDRANGES */ sub_40046( ref l_U1484[(uParam0^)], ref g_U1586, -1082130432, -1082130432, 1 );
                REGISTER_TARGET( l_U1484[(uParam0^)],  /* PLAYER_PED_ID */ sub_11897() );
                SET_PED_DIES_INSTANTLY_IN_WATER( l_U1484[(uParam0^)], 1 );
                 /* P_TETHERPED */ sub_40547( ref l_U1616, l_U1484[(uParam0^)], 1 );
                 /* PED_TASK_ATTACK_MOVE */ sub_49836( l_U1484[(uParam0^)], l_U1488[(uParam0^)], 1, 1101004800, -1082130432, 3 );
            }
        }
        else
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1484[(uParam0^)], 1 );
        }
    }
    l_U1443++;
    return 0;
}

/* P_HANDLE_MID03_BLENDOUT */ void sub_71141()
{
    switch (l_U1679)
    {
        case 1:
        if ((CAMERA_ANIMATED_LENGTH( l_U656, l_U657 )) <= (CAMERA_ANIMATED_CURRENT_TIME() + 1000))
        {
            SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U936[3], 1065353216, 0 );
            SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U973[3], 1065353216, 0 );
            CAMERA_ANIMATED_STOP( 500, 1 );
             /* NIS_POST_SETUP */ sub_33371( 1, 0 );
            if (g_U789 != 3)
            {
                g_U789 = 3;
                 /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_16734( ref l_U426, g_U789,  /* PLAYER_PED_ID */ sub_11897(), g_U790[3], g_U899[3], g_U936[3], g_U973[3], 1 );
            }
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_MID03_BLENDOUT: Going to eNIS_STATE_RETURNING_TO_PLAYER", 0 );
            l_U1679 = 2;
        }
        break;
        case 2:
        if ( /* F_IS_MAX_SPOTTED_IN_WAREHOUSE */ sub_71468())
        {
            l_U711 = 12;
             /* P_HANDLE_MUSIC */ sub_21338();
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_MID03_BLENDOUT: Enemies have noticed Max", "***" );
             /* PED_ARRAY_SET_REGISTER_TARGET_PLAYER */ sub_56439( ref l_U1434 );
            l_U1679 = 5;
        }
        if (ISEQ_QUERY_STATE( 9319211, 6 ))
        {
            l_U711 = 12;
             /* P_HANDLE_MUSIC */ sub_21338();
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_MID03_BLENDOUT: Warehouse iSequence done", "***" );
            l_U1679 = 5;
        }
        break;
        case 5:
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_MID03_BLENDOUT: eNIS_STATE_COMPLETE", "***" );
         /* TERMINATEISEQ */ sub_30919( 9319211, 1 );
        l_U1679 = 0;
        break;
    }
    return;
}

/* F_IS_MAX_SPOTTED_IN_WAREHOUSE */ int sub_71468()
{
    if (( /* IS_PED_VALID */ sub_34195( l_U1434[1] )) AND (( /* IS_PED_VALID */ sub_34195( l_U1434[0] )) AND ( /* IS_MAX_VALID */ sub_34165())))
    {
        if ( /* F_HASPLAYERFIREDGUN */ sub_71554( 3.00000000, 1 ))
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_IS_MAX_SPOTTED_IN_WAREHOUSE: Player fired gun!", 0 );
            return 1;
        }
        if (NOT (IS_PED_IN_COVER(  /* PLAYER_PED_ID */ sub_11897() )))
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_IS_MAX_SPOTTED_IN_WAREHOUSE: Player has left cover!", 0 );
            return 1;
        }
        if (IS_PLAYER_SHOOTDODGING())
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_IS_MAX_SPOTTED_IN_WAREHOUSE: Player is shootdodging!", 0 );
            return 1;
        }
        if (IS_CONTROL_PRESSED( 0, 6 ))
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_IS_MAX_SPOTTED_IN_WAREHOUSE: Player is aiming!", 0 );
            return 1;
        }
    }
    return 0;
}

/* F_HASPLAYERFIREDGUN */ void sub_71554(unknown uParam0, unknown uParam1)
{
    int iVar4;
    int iVar5;
    int Result;

    iVar4 =  /* PLAYER_PED_ID */ sub_11897();
    iVar5 = nil;
    Result = 0;
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )))
    {
        if (HAS_SHOT_BEEN_FIRED_IN_AREA( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iVar4 ), uParam0, uParam1, ref iVar5 ))
        {
            if (iVar5 == iVar4)
            {
                Result = 1;
            }
        }
    }
    return Result;
}

/* F_SAFE_TO_DEPLOY_FINAL_WAVE */ int sub_72351()
{
    if (( /* ISTIMERDONE */ sub_29498( ref l_U1542 )) || (( /* F_ISPLAYERINTRIGGERBOX */ sub_28248( l_U1519 )) || ( /* F_ISPLAYERINTRIGGERBOX */ sub_28248( l_U1498 ))))
    {
        l_U1542._fU16 = 1;
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "F_SAFE_TO_DEPLOY_FINAL_WAVE: final guys ok to send in", "***" );
        return 1;
    }
    return 0;
}

/* P_SEND_IN_LAST_WAVE */ void sub_72528()
{
    unknown uVar2;
    int I;

     /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_SEND_IN_LAST_WAVE", "***" );
    for ( I = 1; I <= 2; I++ )
    {
         /* MAL_SETTEMPLATEANDRANGES */ sub_40046( ref l_U1484[I], ref g_U1602, -1082130432, -1082130432, 1 );
        if (( /* IS_MAX_VALID */ sub_34165()) AND ( /* IS_PED_VALID */ sub_34195( l_U1484[I] )))
        {
            SET_PED_DIES_INSTANTLY_IN_WATER( l_U1484[I], 1 );
            SET_PED_ALERTNESS( l_U1484[I], 3 );
            OPEN_SEQUENCE_TASK( ref uVar2 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            if (I == 2)
            {
                TASK_PAUSE( 0, 500 );
            }
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_ATTACK_MOVE( 0, l_U1488[I], 5, 1101004800, -1082130432, 3 );
            CLOSE_SEQUENCE_TASK( uVar2 );
            CLEAR_PED_TASKS( l_U1484[I] );
            TASK_PERFORM_SEQUENCE( l_U1484[I], uVar2 );
            CLEAR_SEQUENCE_TASK( uVar2 );
        }
         /* P_TETHERPED */ sub_40547( ref l_U1616, l_U1484[I], 1 );
         /* PED_SET_REGISTER_TARGET_PLAYER */ sub_42672( ref l_U1484[I] );
    }
    return;
}

/* P_ASSIGN_WAREHOUSE_BULLET_CAM */ void sub_72988()
{
    int iVar2;

    iVar2 =  /* PED_ARRAY_GET_LAST_LIVING_PED */ sub_73034( ref l_U1434 );
    if (iVar2 != nil)
    {
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_ASSIGN_WAREHOUSE_BULLET_CAM: Bullet cam assigned to pi_cs_warehouse", 0 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( iVar2, 1 );
    }
    else
    {
        iVar2 =  /* PED_ARRAY_GET_LAST_LIVING_PED */ sub_73034( ref l_U1484 );
        if (iVar2 != nil)
        {
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_ASSIGN_WAREHOUSE_BULLET_CAM: Bullet cam assigned to pi_cs_warehouseBackup", 0 );
            SET_PED_CAN_TRIGGER_BULLET_CAM( iVar2, 1 );
        }
        else
        {
            SCRIPT_ASSERT( "P_ASSIGN_WAREHOUSE_BULLET_CAM: no valid ped for bulelt cam!", 0 );
        }
    }
    return;
}

/* PED_ARRAY_GET_LAST_LIVING_PED */ void sub_73034(unknown uParam0)
{
    unknown Result;
    int I;

    Result = nil;
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result = (uParam0^)[I];
        }
    }
    return Result;
}

/* P_HANDLE_RANSOM_NOTE2_POI */ void sub_73607()
{
    if ( /* F_HANDLE_POI */ sub_73649( ref l_U1755 ))
    {
        l_U1754 = 0;
    }
    if ( /* HANDLE_RANSOM_NOTE2_CAM */ sub_75894())
    {
         /* P_ENABLE_POI */ sub_74648( ref l_U1755, 1 );
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "P_HANDLE_RANSOM_NOTE2_POI: POI has been used", 0 );
    }
    if ( /* F_POI_CAN_PLAY_UNAVALIABLE_MONO */ sub_77131( ref l_U1755 ))
    {
         /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_58229( "EXPLORE_ITEM", ref l_U1309 );
    }
    return;
}

/* F_HANDLE_POI */ int sub_73649(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    int iVar6;
    int iVar7;
    int iVar8;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )) == 0)
    {
        if (iParam0->_fU0 == 1)
        {
            uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS(  /* PLAYER_PED_ID */ sub_11897() )};
            iVar6 = 0;
            if (iParam0->_fU80 == 1)
            {
                if (( /* F_ISPEDINTRIGGERBOX */ sub_23575(  /* PLAYER_PED_ID */ sub_11897(), iParam0->_fU116 )) == 1)
                {
                    if (iParam0->_fU300 == 1)
                    {
                        if (((IS_OBJECT_ON_SCREEN( iParam0->_fU312 )) == 1) AND ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1))
                        {
                            iVar6 = 1;
                        }
                    }
                    else
                    {
                        iVar6 = 1;
                    }
                }
            }
            else if ((iParam0->_fU308 == 1) AND (iParam0->_fU84 == 1))
            {
                if ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU312 ), 1 )) <= iParam0->_fU112)
                    {
                        if (iParam0->_fU300 == 1)
                        {
                            if ((IS_OBJECT_ON_SCREEN( iParam0->_fU312 )) == 1)
                            {
                                iVar6 = 1;
                            }
                        }
                        else
                        {
                            iVar6 = 1;
                        }
                    }
                }
            }
            else if (iParam0->_fU96 == 1)
            {
                if ((DOES_PED_EXIST( iParam0->_fU316 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU316 ), 1 )) <= iParam0->_fU112)
                    {
                        if (iParam0->_fU300 == 1)
                        {
                            if ((IS_PED_ON_SCREEN( iParam0->_fU316, 0 )) == 1)
                            {
                                iVar6 = 1;
                            }
                        }
                        else
                        {
                            iVar6 = 1;
                        }
                    }
                }
            }
            else if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, iParam0->_fU100, 1 )) <= iParam0->_fU112)
            {
                if (iParam0->_fU300 == 1)
                {
                    if (((IS_OBJECT_ON_SCREEN( iParam0->_fU312 )) == 1) AND ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1))
                    {
                        iVar6 = 1;
                    }
                }
                else
                {
                    iVar6 = 1;
                }
            };;;;
            iVar7 = 0;
            if (iParam0->_fU88 == 1)
            {
                if (( /* F_ISPEDINTRIGGERBOX */ sub_23575(  /* PLAYER_PED_ID */ sub_11897(), iParam0->_fU216 )) == 1)
                {
                    iVar7 = 1;
                }
            }
            else if ((iParam0->_fU308 == 1) AND (iParam0->_fU92 == 1))
            {
                if ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU312 ), 1 )) <= iParam0->_fU212)
                    {
                        iVar7 = 1;
                    }
                }
            }
            else if (iParam0->_fU96 == 1)
            {
                if ((DOES_PED_EXIST( iParam0->_fU316 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU316 ), 1 )) <= iParam0->_fU212)
                    {
                        iVar7 = 1;
                    }
                }
            }
            else if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, iParam0->_fU200, 1 )) <= iParam0->_fU212)
            {
                iVar7 = 1;
            };;;;
            if (iVar6 == 1)
            {
                if ((iParam0->_fU4 != 3) AND (iParam0->_fU52 == 1))
                {
                    if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                    {
                         /* P_UPDATEINTERACTIONTEXTAVAILABLE */ sub_64015( iParam0 );
                    }
                    iVar8 = 0;
                    if ((IS_WEAPON_PICKUP_VISIBLE() == 0) AND ((iParam0->_fU60 == 0) AND (( /* F_ISACTIONINGAVAILABLE */ sub_64111( iParam0 )) == 1)))
                    {
                        SET_ACTION_CONSUMED( 0, 1 );
                        if (( /* F_HASACTIONBEENPRESSED */ sub_74546()) == 1)
                        {
                            iVar8 = 1;
                        }
                    }
                    if (iVar8 == 1)
                    {
                        if (iParam0->_fU332 == 0)
                        {
                             /* P_ENABLE_POI */ sub_74648( iParam0, 0 );
                            iParam0->_fU64 = 1;
                        }
                        if (iParam0->_fU68 == 1)
                        {
                            iParam0->_fU72 = 0;
                        }
                        return 1;
                    }
                    else if (iParam0->_fU8 != 2)
                    {
                        if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                        {
                             /* P_ENABLEPOIGLINT */ sub_63197( iParam0, 0 );
                             /* P_ENABLEPOIINTERACTIONTEXT */ sub_74734( iParam0, 1 );
                        }
                        else if (iParam0->_fU320 == 1)
                        {
                             /* P_ENABLEPOIGLINT */ sub_63197( iParam0, 1 );
                        }
                        iParam0->_fU8 = 2;
                    }
                    if ((iParam0->_fU328 == 0) AND (iParam0->_fU324 == 1))
                    {
                        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )) == 0)
                        {
                            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_11897(), 1 );
                            iParam0->_fU328 = 1;
                        }
                    }
                }
            }
            else if (iVar7 == 1)
            {
                if (iParam0->_fU8 != 1)
                {
                    if ((iParam0->_fU4 != 3) AND (iParam0->_fU320 == 1))
                    {
                         /* P_ENABLEPOIGLINT */ sub_63197( iParam0, 1 );
                    }
                    if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                    {
                         /* P_ENABLEPOIINTERACTIONTEXT */ sub_74734( iParam0, 0 );
                    }
                    if (iParam0->_fU96 == 1)
                    {
                        if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )) == 0) AND ((((IS_PED_DEAD( iParam0->_fU316 )) == 1) || ((IS_PED_DEAD( iParam0->_fU316 )) == 0)) AND ((DOES_PED_EXIST( iParam0->_fU316 )) == 1)))
                        {
                            TASK_LOOK_AT_PED(  /* PLAYER_PED_ID */ sub_11897(), iParam0->_fU316, -1, 0 );
                        }
                    }
                    else if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )) == 0)
                    {
                        TASK_LOOK_AT_COORD(  /* PLAYER_PED_ID */ sub_11897(), iParam0->_fU100, -1, 0 );
                    }
                    iParam0->_fU340 = 1;
                    if ((iParam0->_fU72 == 0) AND ((iParam0->_fU68 == 1) AND ((iParam0->_fU64 == 1) AND (iParam0->_fU8 == 2))))
                    {
                        iParam0->_fU72 = 1;
                    }
                    iParam0->_fU8 = 1;
                }
                if ((iParam0->_fU328 == 0) AND (iParam0->_fU324 == 1))
                {
                    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )) == 0)
                    {
                        SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_11897(), 1 );
                        iParam0->_fU328 = 1;
                    }
                }
            }
            else if ((iParam0->_fU4 == 1) || (iParam0->_fU4 == 3))
            {
                ;
            }
            else if (iParam0->_fU8 != 0)
            {
                if (iParam0->_fU320 == 1)
                {
                     /* P_ENABLEPOIGLINT */ sub_63197( iParam0, 0 );
                }
            }
            if (iParam0->_fU8 == 2)
            {
                if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                {
                     /* P_ENABLEPOIINTERACTIONTEXT */ sub_74734( iParam0, 0 );
                }
            }
            if (iParam0->_fU340)
            {
                if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )) == 0)
                {
                    TASK_CLEAR_LOOK_AT(  /* PLAYER_PED_ID */ sub_11897() );
                    iParam0->_fU340 = 0;
                }
            }
            if ((iParam0->_fU328 == 1) AND (iParam0->_fU324 == 1))
            {
                if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )) == 0)
                {
                    SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_11897(), 0 );
                    iParam0->_fU328 = 0;
                }
            }
            if (iParam0->_fU332 == 1)
            {
                 /* P_ENABLEPOIINTERACTIONTEXT */ sub_74734( iParam0, 0 );
            }
            iParam0->_fU8 = 0;;;
        }
    }
    return 0;
}

/* F_HASACTIONBEENPRESSED */ int sub_74546()
{
    if ((IS_CONTROL_JUST_PRESSED( 0, 30 )) == 1)
    {
        return 1;
    }
    return 0;
}

/* P_ENABLE_POI */ void sub_74648(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        if ((iParam0->_fU4 == 1) AND (iParam0->_fU320 == 1))
        {
             /* P_ENABLEPOIGLINT */ sub_63197( iParam0, 1 );
        }
        iParam0->_fU0 = 1;
    }
    else
    {
         /* P_ENABLEPOIGLINT */ sub_63197( iParam0, 0 );
         /* P_ENABLEPOIINTERACTIONTEXT */ sub_74734( iParam0, 0 );
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_11897() )) == 0)
        {
            TASK_CLEAR_LOOK_AT(  /* PLAYER_PED_ID */ sub_11897() );
            if ((iParam0->_fU328 == 1) AND (iParam0->_fU324 == 1))
            {
                SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_11897(), 0 );
                iParam0->_fU328 = 0;
            }
        }
        iParam0->_fU8 = 0;
        iParam0->_fU0 = 0;
    }
    return;
}

/* P_ENABLEPOIINTERACTIONTEXT */ void sub_74734(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        SET_INTERACTIONTEXT_TEXT( iParam0 + 32 );
        SET_INTERACTIONTEXT_BUTTON( iParam0->_fU48 );
        if ((iParam0->_fU72 == 0) AND ((iParam0->_fU64 == 1) AND (iParam0->_fU68 == 1)))
        {
            SET_INTERACTIONTEXT_VISIBLE( 0 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 0 );
            SET_INTERACTIONTEXT_AVAILABLE( 0 );
            iParam0->_fU56 = 0;
        }
        else
        {
            SET_INTERACTIONTEXT_VISIBLE( 1 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 1 );
            SET_INTERACTIONTEXT_AVAILABLE( 1 );
            iParam0->_fU56 = 1;
        }
         /* P_UPDATEINTERACTIONTEXTAVAILABLE */ sub_64015( iParam0 );
        if (iParam0->_fU332 == 1)
        {
            SET_INTERACTIONTEXT_PULSE( 1 );
            SET_INTERACTIONTEXT_PULSE_PERIOD( iParam0->_fU336 );
        }
    }
    else
    {
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        SET_INTERACTIONTEXT_BUTTON_VISIBLE( 0 );
    }
    return;
}

/* HANDLE_RANSOM_NOTE2_CAM */ void sub_75894()
{
    int Result;

    Result = 0;
    switch (l_U1754)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "HANDLE_RANSOM_NOTE2_CAM: eRansomNote2State = ASS_SETUP", 0 );
         /* NIS_PRE_SETUP */ sub_32705( 1, 0, 0, 1 );
         /* KILL_ANY_MISSION_SPEECH */ sub_76056( 0 );
         /* RESETTIMER */ sub_7652( ref l_U1844 );
        l_U1754 = 3;
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "HANDLE_RANSOM_NOTE2_CAM: eRansomNote2State = ASS_WAITING_TO_PLAY", 0 );
        CAMERA_PLAY_ANIMATED( "EXPL_CAM", "EXPL_CAM_GND_15_F_CAM", 1, 57.11000000, -20.55000000, 3.83000000, 180, 0, 0 );
        if ( /* IS_MAX_VALID */ sub_34165())
        {
            SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_11897(), 0 );
        }
        if (NOT (HAS_EXPLORATION_ITEM_BEEN_FOUND( "smar_2ndRansom" )))
        {
             /* KILL_ANY_MISSION_SPEECH */ sub_76056( 0 );
             /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_58229( "SMAR_EXPNTSA", ref l_U1299 );
            FOUND_EXPLORATION_ITEM( "smar_2ndRansom" );
        }
        else
        {
             /* P_CREATE_AND_START_TIMER */ sub_47204( ref l_U1844, 4000 );
        }
        l_U1754 = 4;
        break;
        case 4:
        if (((NOT ( /* IS_SPEECH_CURRENTLY_PLAYING */ sub_76577( l_U1299 ))) AND (NOT l_U1844._fU20)) || ( /* ISTIMERDONE */ sub_29498( ref l_U1844 )))
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
            if ( /* IS_MAX_VALID */ sub_34165())
            {
                SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_11897(), 1 );
            }
             /* WRITESCRIPTLOG */ sub_1246( "SBA", "HANDLE_RANSOM_NOTE2_CAM: Cam cut done, going to eRansomNote2State = ASS_FINISHED", 0 );
            l_U1754 = 6;
        }
        break;
        case 6:
         /* NIS_POST_SETUP */ sub_33371( 1, 1 );
        Result = 1;
         /* WRITESCRIPTLOG */ sub_1246( "SBA", "HANDLE_RANSOM_NOTE2_CAM: going to eRansomNote2State = ASS_INACTIVE", 0 );
        l_U1754 = -1;
        break;
    }
    return Result;
}

/* KILL_ANY_MISSION_SPEECH */ void sub_76056(unknown uParam0)
{
    int I;

    for ( I = 0; I <= 3; I++ )
    {
        PRINTSTRING( "\n KILL_ANY_MISSION_SPEECH CALLED***************************************" );
        if (IS_SCRIPTED_CONVERSATION_ONGOING( I ))
        {
            if ((g_U1[I] <= 8) AND (g_U1[I] >= 4))
            {
                STOP_SCRIPTED_CONVERSATION( I, uParam0, 0 );
            }
        }
    }
    return;
}

/* IS_SPEECH_CURRENTLY_PLAYING */ int sub_76577(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    if (NOT ( /* IS_SCRIPT_SPEECH_STRUCT_VALID */ sub_76620( uParam0 )))
    {
        return 0;
    }
    if ((g_U11[uParam0._fU4] == 2) || ((g_U11[uParam0._fU4] == 1) || (IS_SCRIPTED_CONVERSATION_ONGOING( uParam0._fU4 ))))
    {
        if (uParam0._fU8 == g_U6[uParam0._fU4])
        {
            return 1;
        }
    }
    return 0;
}

/* IS_SCRIPT_SPEECH_STRUCT_VALID */ boolean sub_76620(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    int iVar12;

    if (uParam0._fU4 < 0)
    {
        return 0;
    }
    iVar12 = GET_CHECK_HASH_FROM_CONVERSATION_ID( uParam0._fU4 );
    return (uParam0._fU16 == iVar12) AND (iVar12 != 0);
}

/* F_POI_CAN_PLAY_UNAVALIABLE_MONO */ int sub_77131(int iParam0)
{
    if ((iParam0->_fU8 == 2) AND ((iParam0->_fU76 == 0) AND (( /* F_IS_POI_AVAILABLE */ sub_77177( iParam0 )) == 0)))
    {
        if ((( /* F_HASACTIONBEENPRESSED */ sub_74546()) == 1) AND (((IS_PED_RELOADING(  /* PLAYER_PED_ID */ sub_11897() )) == 0) AND (((IS_PED_GETTING_UP(  /* PLAYER_PED_ID */ sub_11897() )) == 0) AND (((IS_PED_PICKING_UP_PICKUP(  /* PLAYER_PED_ID */ sub_11897() )) == 0) AND (((IS_PED_IN_COVER(  /* PLAYER_PED_ID */ sub_11897() )) == 0) AND (((IS_PED_DUCKING(  /* PLAYER_PED_ID */ sub_11897() )) == 0) AND ((IS_PLAYER_SHOOTDODGING() == 0) AND ((IS_MONOLOGUE_PLAYING() == 0) AND ((IS_INTERACTIONTEXT_AVAILABLE() == 0) AND (IS_INTERACTIONTEXT_ONSCREEN() == 1))))))))))
        {
            iParam0->_fU76 = 1;
            return 1;
        }
    }
    return 0;
}

/* F_IS_POI_AVAILABLE */ void sub_77177(int iParam0)
{
    return iParam0->_fU56;
}

/* P_PEDARRAY_HEIGHT_SAFETY_CHECK */ void sub_77597(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
         /* P_PED_HEIGHT_SAFETY_CHECK */ sub_77662( ref (uParam0^)[I], uParam1 );
    }
    return;
}

/* P_PED_HEIGHT_SAFETY_CHECK */ void sub_77662(unknown uParam0, float fParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;

    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( (uParam0^) )};
        if (uVar4._fU8 < fParam1)
        {
             /* MLOG */ sub_38119( "A ped has been killed by P_PED_HEIGHT_SAFETY_CHECK", 0, 0 );
            SET_PED_HEALTH( (uParam0^), 0, 0 );
        }
    }
    return;
}

/* TAKE_PAINKILLER_ARRAY_SNAPSHOT */ void sub_77884(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (DOES_PLACEMENT_EXIST( (uParam0^)[I] ))
        {
             /* WRITESCRIPTLOG */ sub_1246( "RJM", "DO_ANY_PAINKILLERS_STILL_EXIST - Found a pill in there, we can still play some V.O.", 0 );
            (uParam1^)[I] = 1;
        }
        else
        {
            (uParam1^)[I] = 0;
        }
    }
    return;
}

/* UPDATE_PILL_VO */ int sub_78200(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    if ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_11935() )) == 0)
    {
        if (( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_58029()) == 0)
        {
            for ( I = 0; I <= ((uParam1^) - 1); I++ )
            {
                if ((uParam2^)[I])
                {
                    if ((HAS_PLACEMENT_BEEN_COLLECTED( (uParam1^)[I] )) || (NOT (DOES_PLACEMENT_EXIST( (uParam1^)[I] ))))
                    {
                        (uParam2^)[I] = 0;
                        if (TIME_SINCE_LAST_MONOLOGUE() > 5000)
                        {
                             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_50052( ref l_U330 );
                             /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_58229( uParam0, ref l_U330 );
                            return 1;
                        }
                    }
                }
            }
        }
    }
    return 0;
}

/* MAR_HOLSTERRIFLEORDUALANDDRAWPISTOL */ void sub_78792(unknown uParam0, unknown uParam1)
{
    unknown uVar4;

     /* WRITESCRIPTLOG */ sub_1246( "TEH", "MAR_HolsterRifleOrDualAndDrawPistol begun", 0 );
    uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_11897(), 0, 0 );
    if (GET_DOES_WEAPON_EXIST( uVar4 ))
    {
        if (((uParam0^) == 1) || (((GET_WEAPON_TYPE( uVar4 )) == 1992962408) || (((GET_WEAPON_TYPE( uVar4 )) == 724901397) || (((GET_WEAPON_TYPE( uVar4 )) == 57534114) || (((GET_WEAPON_TYPE( uVar4 )) == 1308526797) || (((GET_WEAPON_TYPE( uVar4 )) == -1074756423) || (((GET_WEAPON_TYPE( uVar4 )) == -1013714740) || (((GET_WEAPON_TYPE( uVar4 )) == -184942895) || (((GET_WEAPON_TYPE( uVar4 )) == -168327769) || (((GET_WEAPON_TYPE( uVar4 )) == 1845102363) || ((GET_WEAPON_TYPE( uVar4 )) == 434544317)))))))))))
        {
             /* WRITESCRIPTLOG */ sub_1246( "TEH", "Holster weapon and draw gun", 0 );
            SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_11897(), 0, 0, 0 );
            uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_11897(), 0, 0 );
            while (GET_DOES_WEAPON_EXIST( uVar4 ))
            {
                WAIT( 0 );
                uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_11897(), 0, 0 );
            }
        }
    }
    uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_11897(), 1, 0 );
    if (GET_DOES_WEAPON_EXIST( uVar4 ))
    {
        (uParam1^) = 1;
         /* WRITESCRIPTLOG */ sub_1246( "TEH", "Dual wielding is true", 0 );
        SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_11897(), 0, 1, 0 );
        uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_11897(), 1, 0 );
        while (GET_DOES_WEAPON_EXIST( uVar4 ))
        {
            WAIT( 0 );
            uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_11897(), 1, 0 );
        }
    }
    uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_11897(), 0, 0 );
    if (NOT (GET_DOES_WEAPON_EXIST( uVar4 )))
    {
        uVar4 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_11897(), 0 );
        if (NOT (GET_DOES_WEAPON_EXIST( uVar4 )))
        {
            uVar4 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_11897(), 1 );
        }
        SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_11897(), uVar4, 0, 0 );
        uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_11897(), 0, 0 );
        while (NOT (GET_DOES_WEAPON_EXIST( uVar4 )))
        {
            WAIT( 0 );
            uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_11897(), 0, 0 );
        }
    }
     /* WRITESCRIPTLOG */ sub_1246( "TEH", "MAR_HolsterRifleOrDualAndDrawPistol ended", 0 );
    return;
}

/* P_SLIP_DEBUG_TUNE_WIDGET */ void sub_79704()
{
    if (NOT l_U1987)
    {
        START_WIDGET_GROUP( "Slipway Tuning Widget" );
        ADD_WIDGET_STRING( "Slipway Gate Animation" );
        ADD_WIDGET_BOOL( "Reset Slipway Gate", ref l_U1988 );
        ADD_WIDGET_BOOL( "Play Slipway Gate animation", ref l_U1989 );
        STOP_WIDGET_GROUP();
        START_WIDGET_GROUP( "MID_03 Security Monitor Tweaking" );
        ADD_WIDGET_STRING( "NOTE:  Time-To-Stop is amount of time AFTER Time-To-Start, not the absolute Cutscene time" );
        ADD_WIDGET_INT_SLIDER( "Time to Start Video Screen (ms) ", ref l_U1751, 0, 50000, 50 );
        ADD_WIDGET_INT_SLIDER( "Time to Stop Video Screen (ms) ", ref l_U1752, 0, 38033 - l_U1751, 50 );
        STOP_WIDGET_GROUP();
        l_U1987 = 1;
    }
    if (l_U1988)
    {
         /* P_CLEANUP_ALL */ sub_30668();
         /* P_SETUP_STATIC_DATA */ sub_3900();
         /* P_INITIALIZE_SCRIPT_DATA */ sub_7561();
         /* P_SETUP_SLIPWAY_DOORS_AND_GATES */ sub_10832();
        l_U1988 = 0;
    }
    return;
}

/* P_UNLOAD_ASSETS */ void sub_80234()
{
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_UNLOAD_ASSETS start", 0 );
     /* UNLOADMODEL */ sub_38269( g_U1030 );
     /* UNLOADMODEL */ sub_38269( -1127527230 );
     /* UNLOADMODEL */ sub_38269( -301519047 );
     /* UNLOADMODEL */ sub_38269( g_U1027 );
     /* UNLOADMODEL */ sub_38269( g_U1042 );
     /* UNLOADMODEL */ sub_38269( g_U1093 );
     /* UNLOADMODEL */ sub_38269( g_U1038 );
     /* UNLOADMODEL */ sub_38269( g_U1051 );
     /* UNLOADMODEL */ sub_38269( l_U883 );
     /* UNLOADMODEL */ sub_38269( g_U1057 );
     /* UNLOADMODEL */ sub_38269( g_U1058 );
     /* UNLOADMODEL */ sub_38269( g_U1100 );
     /* UNLOADMODEL */ sub_38269( g_U1099 );
     /* UNLOADMODEL */ sub_38269( g_U1061 );
     /* UNLOADMODEL */ sub_38269( g_U1062 );
     /* UNLOADMODEL */ sub_38269( l_U1855 );
     /* UNLOADMODEL */ sub_38269( g_U1046 );
     /* UNLOADMODEL */ sub_38269( g_U1028 );
     /* UNLOADMODEL */ sub_38269( 509064891 );
     /* CLEANVEHICLERECORDING */ sub_80492( l_U880 );
     /* EVICTWATERRESPAWNANIMS */ sub_80543();
     /* UNLOADANIMDICT */ sub_80593( "EXPL_CAM" );
    RELEASE_SOUND_ID( l_U922 );
    RELEASE_SOUND_ID( l_U1934 );
    RELEASE_NAMED_SCRIPT_AUDIO_BANK( l_U652 );
     /* WRITESCRIPTLOG */ sub_1246( "GA", "P_UNLOAD_ASSETS end", 0 );
    return;
}

/* CLEANVEHICLERECORDING */ void sub_80492(unknown uParam0)
{
    REMOVE_VEHICLE_RECORDING( uParam0 );
    return;
}

/* EVICTWATERRESPAWNANIMS */ void sub_80543()
{
    if (l_U3)
    {
         /* UNLOADANIMDICT */ sub_80593( "SWIM" );
        l_U3 = 0;
    }
    return;
}

/* UNLOADANIMDICT */ void sub_80593(unknown uParam0)
{
    REMOVE_ANIM_DICT( uParam0, 0 );
    return;
}

