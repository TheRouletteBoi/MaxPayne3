void main()
{
    l_U0 = 1;
    l_U1 = 144;
    l_U2 = -1;
    l_U3 = {64536, 64536, 64536};
    l_U15 = 150;
    l_U16 = 0.02000000;
    l_U24 = 0;
    l_U54 = 0;
    l_U236 = {0, 2, -0.50000000};
    l_U239 = 45;
    l_U259 = 0;
    l_U260 = 0;
    l_U261 = 1500;
    l_U272 = 0;
    l_U310 = 0;
    l_U312 = 1;
    l_U313 = 0;
    l_U420 = 0;
    l_U421 = 0;
    l_U422 = 0;
    l_U423 = 0;
    l_U524 = {49.08000000, -30.61000000, 94.27000000};
    sub_220( "Script s_club_RS1.sc is starting up..." );
    l_U310 = 1;
    l_U272 = 0;
    while (NOT IS_EXITFLAG_SET())
    {
        sub_272();
        if (l_U313 == 0)
        {
            sub_10795();
            sub_47279();
        }
        WAIT( 0 );
    }
    SET_EXITFLAG_RESPONSE();
    sub_3315( 0 );
    sub_47460();
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "s_club_RS1" );
    sub_220( "Script s_club_RS1.sc is terminating..." );
    return;
}

void sub_220(unknown uParam0)
{
    unknown uVar3;

    uVar3 = GET_REAL_GAME_TIMER();
    return;
}

void sub_272()
{
    if (g_U892 == 6)
    {
        switch (l_U313)
        {
            case 0:
            if (IS_PED_DEAD( sub_354() ))
            {
                if (IS_PED_DEAD( sub_354() ))
                {
                    sub_449();
                }
                AUDIO_MUSIC_SUSPEND( 5000 );
                l_U313 = 1;
                sub_220( "eFailState = FAIL_WAITING_FOR_PLAYER" );
            }
            else if (sub_1200())
            {
                AUDIO_MUSIC_SUSPEND( 5000 );
                l_U313 = 3;
                sub_220( "eFailState = FAIL_WAITING_FOR_PLAYER" );
            }
            break;
            case 1:
            STOP_SCRIPT_STREAM( g_U2867 );
            if (sub_1709())
            {
                l_U313 = 3;
            }
            else if ((sub_1749( 0 )) == 1)
            {
                l_U313 = 2;
            }
            break;
            case 2:
            if (NOT (IS_PED_DEAD( sub_354() )))
            {
                l_U313 = 3;
                sub_220( "eFailState = FAIL_CLEANUP_ALL" );
            }
            break;
            case 3:
            sub_220( "eFailState = FAIL_CLEANUP_ALL" );
            if ((NOT (IS_PED_DEAD( sub_354() ))) AND (NOT (IS_PLAYER_DEAD( sub_376() ))))
            {
                SET_PLAYER_CONTROL( sub_376(), 0, 0 );
                if (GET_IS_PED_FORCED_TO_WALK( sub_354() ))
                {
                    SET_PED_FORCED_TO_WALK( sub_354(), 0 );
                }
            }
            DO_SCREEN_FADE_OUT( 0 );
            sub_3109( "CLUB_RS_GIOV1_SCRIPTED_FAIL_FX" );
            DESTROY_ALL_CAMS();
            RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
            AUDIO_MUSIC_SUSPEND( 500 );
            sub_3315( 1 );
            sub_4304();
            sub_4780();
            sub_6151();
            if (g_U893[7]._fU36 == 1)
            {
                SET_EXITFLAG_FOR_SCRIPT( g_U893[7]._fU32 );
                sub_6451( ref g_U893[7] );
                g_U1093 = 0;
                g_U1094 = 0;
            }
            l_U313 = 4;
            sub_220( "eFailState = FAIL_RESTORE_PLAYER" );
            break;
            case 4:
            sub_220( "eFailState = FAIL_RESTORE_PLAYER" );
            sub_6597( ref l_U274, sub_354() );
            l_U313 = 5;
            sub_220( "eFailState = FAIL_RESTART_CHECKPOINT" );
            break;
            case 5:
            sub_220( "eFailState = FAIL_RESTART_CHECKPOINT" );
            l_U310 = 1;
            l_U313 = 0;
            sub_220( "eFailState = FAIL_IDLE" );
            break;
        }
    }
    return;
}

int sub_354()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED( sub_376() );
    }
    return 0;
}

void sub_376()
{
    return GET_PLAYER_ID();
}

void sub_449()
{
    sub_483( ref l_U205, g_U665, g_U665, l_U239, 5000 );
    sub_821( ref l_U205 );
    ATTACH_CAM_TO_PED( l_U205._fU0, sub_354(), l_U236, 1 );
    POINT_CAM_AT_PED( l_U205._fU0, sub_354(), g_U665, 1 );
    return;
}

void sub_483(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    iParam0->_fU4 = {uParam4};
    iParam0->_fU16 = {uParam1};
    iParam0->_fU28 = uParam7;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    iParam0->_fU84 = uParam8;
    iParam0->_fU88 = 0;
    iParam0->_fU92 = 0;
    iParam0->_fU40 = 0;
    iParam0->_fU44 = 0;
    iParam0->_fU100 = 1;
    iParam0->_fU104 = 1;
    iParam0->_fU96 = 0;
    sub_611( iParam0 + 48, uParam8, 1, 0 );
    iParam0->_fU0 = CREATE_CAM_WITH_PARAMS( ref g_U649, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 1 );
    SET_CAM_PARAMS( iParam0->_fU0, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 0, 1, 1 );
    return;
}

void sub_611(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

void sub_821(int iParam0)
{
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    if (iParam0->_fU92 == 1)
    {
        SET_CAM_ACTIVE_WITH_INTERP( iParam0->_fU0, iParam0->_fU120, iParam0->_fU88, iParam0->_fU100, iParam0->_fU104 );
    }
    else
    {
        SET_CAM_ACTIVE( iParam0->_fU0, 1 );
    }
    RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    sub_935( iParam0 + 48 );
    iParam0->_fU32 = 1;
    iParam0->_fU40 = 1;
    return;
}

void sub_935(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

int sub_1200()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U0 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD( sub_354() )))
        {
            SET_PED_FORCED_TO_WALK( sub_354(), 0 );
            SET_PLAYER_FORCED_AIM( sub_376(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE( sub_376(), 1 );
            if ((IS_PED_VISIBLE( sub_354() )) == 0)
            {
                SET_PED_VISIBLE( sub_354(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

void sub_1709()
{
    return g_U648;
}

int sub_1749(int iParam0)
{
    iParam0 = 1;
    switch (l_U260)
    {
        case 0:
        if (NOT (sub_1810( ref l_U262 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_354() )))
            {
                l_U261 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
            sub_611( ref l_U262, l_U261, 1, 1 );
            sub_935( ref l_U262 );
        }
        if (sub_1938( ref l_U262 ))
        {
            sub_2134( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_354() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD( sub_376() )))
            {
                SET_PLAYER_CONTROL( sub_376(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U260 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U260 = 2;
            }
            else
            {
                l_U260 = 3;
            }
        }
        break;
        case 2:
        sub_2134( "NS", "Player will QUIT", 0 );
        sub_2469();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
        sub_2134( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        sub_2469();
        return 1;
        break;
    }
    return 0;
}

int sub_1810(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

int sub_1938(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

void sub_2134(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    return;
}

void sub_2469()
{
    sub_2134( "NS", "P_PostFailRetryCleanup", 0 );
    sub_2519( ref l_U262 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD( sub_376() )))
    {
        SET_PLAYER_CONTROL( sub_376(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U259 = 0;
    l_U259 = l_U259;
    l_U260 = 0;
    return;
}

void sub_2519(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

void sub_3109(unknown uParam0)
{
    sub_2134( "CO", "P_IMAGEFX_STOP_BULLETCAM:  Cameras Deleted", 0 );
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    sub_3192( ref l_U273 );
    l_U272 = 1;
    return;
}

void sub_3192(unknown uParam0)
{
    if ((DOES_CAM_EXIST( (uParam0^) )) == 1)
    {
        if ((IS_CAM_ACTIVE( (uParam0^) )) == 1)
        {
            SET_CAM_ACTIVE( (uParam0^), 0 );
        }
        DESTROY_CAM( (uParam0^) );
    }
    (uParam0^) = nil;
    return;
}

void sub_3315(boolean bParam0)
{
    sub_220( "P_CLEANUP_RS1" );
    if (bParam0)
    {
        sub_3359( -1313172978, 1 );
        sub_3359( 1476011597, 1 );
        sub_3359( -931023773, 1 );
        STOP_SCRIPT_STREAM( g_U2867 );
    }
    ISEQ_UNREGISTER_ENTITY( 2128723147, "CS1" );
    ISEQ_UNREGISTER_ENTITY( 2128723147, "CS2" );
    ISEQ_UNREGISTER_ENTITY( 2128723147, "CS3" );
    ISEQ_UNREGISTER_ENTITY( 2128723147, "CS4" );
    ISEQ_UNREGISTER_ENTITY( 2128723147, "CS5" );
    sub_3359( 2128723147, 1 );
    ISEQ_UNREGISTER_ENTITY( -1999590465, "CS1" );
    sub_3359( -1999590465, 1 );
    ISEQ_UNREGISTER_ENTITY( -754727277, "CS2" );
    sub_3359( -754727277, 1 );
    ISEQ_UNREGISTER_ENTITY( 1082088136, "CS3" );
    sub_3359( 1082088136, 1 );
    ISEQ_UNREGISTER_ENTITY( 1210507618, "CS4" );
    sub_3359( 1210507618, 1 );
    ISEQ_UNREGISTER_ENTITY( -1793275080, "CS5" );
    sub_3359( -1793275080, 1 );
    ISEQ_UNREGISTER_ENTITY( 191130716, "player" );
    sub_3359( 191130716, 1 );
    sub_3874( ref l_U333 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
    sub_3908( l_U319 );
    sub_4025( l_U318 );
    if ((CUTSCENE_NAMED_IS_LOADING( "02_02_NC_concat" )) || (CUTSCENE_IS_LOADED( "02_02_NC_concat" )))
    {
        CLEAR_NAMED_CUTSCENE( "02_02_NC_concat" );
    }
    DISABLE_RESTART_CHECKPOINT( 0 );
    sub_4168();
    return;
}

void sub_3359(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to terminate does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 1)
    {
        ISEQ_TERMINATE( uParam0 );
    }
    ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
    if (iParam1 == 1)
    {
        while ((ISEQ_IS_LOADED( uParam0 )) == 1)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_3874(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_3908( (uParam0^)[I] );
    }
    return;
}

void sub_3908(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

void sub_4025(unknown uParam0)
{
    if (IS_VEHICLE_DEAD( uParam0 ))
    {
        ;
    }
    if (DOES_VEHICLE_EXIST( uParam0 ))
    {
        DELETE_VEHICLE( ref uParam0 );
    }
    return;
}

void sub_4168()
{
    sub_2134( "CCB", "P_STOP_SP_CHALLENGES", 0 );
    sub_2134( "CCB", "Stopping the Nightclub_RS1 context...", 0 );
    END_CONTEXT( "Nightclub_RS1" );
    return;
}

void sub_4304()
{
    sub_220( "P_RS_GlobalCleanup" );
    DETACH_PED( g_U2763, 1 );
    DETACH_PED( g_U2749, 1 );
    DETACH_PED( sub_354(), 1 );
    sub_3908( g_U2763 );
    sub_3908( g_U2749 );
    sub_3908( g_U2777 );
    sub_4025( g_U2866 );
    sub_3359( -1313172978, 1 );
    sub_3359( -931023773, 1 );
    sub_3359( 1476011597, 1 );
    sub_4508( sub_354(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
    ENABLE_HIT_DETECTION( 1 );
    ENABLE_LAST_MAN_STANDING( 1 );
    SET_SILHOUETTE_ACTIVE( 1 );
    SET_PLAYER_COMBAT_TIMER_MODE( 0 );
    PLAYER_SET_AIM_MODE( 0 );
    ENABLE_CROSSHAIR( 1 );
    SET_PED_INVINCIBLE( sub_354(), 0 );
    SET_PED_PROOFS( sub_354(), 0, 0, 0, 0, 0 );
    SET_PLAYER_FORCED_AIM( sub_376(), 0, 0 );
    SET_PED_CONSUMING_AMMO( sub_354(), 1 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    SET_PED_CAN_RAGDOLL( sub_354(), 1 );
    AUDIO_SET_PED_FOOTSTEPS_ON( 1 );
    SET_INSTANT_FIRE_FORCED( 0 );
    RELEASE_PED_ENTITY_SYNC_POINT( sub_354() );
    SET_PED_USES_ANIMATED_DEATH( sub_354(), 0 );
    ALLOW_BULLET_CAMERA_CHEAT( 1 );
    sub_4732( l_U23 );
    return;
}

void sub_4508(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        PED_ACTION_TREE_PLAY_NODE( uParam0, uParam1 );
    }
    return;
}

void sub_4732(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

void sub_4780()
{
    sub_220( "P_REQUEST_RS1_NONPERSISTENT_ASSETS start" );
    sub_4845( 70, ref g_U1903 );
    sub_4845( 304, ref g_U1903 );
    sub_220( "P_REQUEST_RS1_NONPERSISTENT_ASSETS end" );
    return;
}

void sub_4845(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 = sub_4866( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
    if (iVar4 >= 0)
    {
        (uParam1^)[iVar4]._fU0 = uParam0;
        (uParam1^)[iVar4]._fU4 = 1;
        sub_5004( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
    }
    return;
}

int sub_4866(int iParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU4 == 1)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The VEHICLE_RECORDING asset is currently being requested!!!", 0 );
                sub_5004( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 2)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The VEHICLE_RECORDING asset is already loading!!!", 0 );
                sub_5004( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 3)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                if (HAS_VEHICLE_RECORDING_BEEN_LOADED( iParam0 ))
                {
                    sub_5004( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    SCRIPT_ASSERT( "The VEHICLE_RECORDING asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    (uParam1^)[Result]._fU0 = -1;
                    (uParam1^)[Result]._fU4 = 0;
                    sub_5673( ref (uParam1^)[Result]._fU8 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU4 == 4)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The VEHICLE_RECORDING asset is currently being removed!!!", 0 );
                sub_5004( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (HAS_VEHICLE_RECORDING_BEEN_LOADED( iParam0 ))
        {
            (uParam1^)[iVar6]._fU0 = iParam0;
            (uParam1^)[iVar6]._fU4 = 3;
            sub_5004( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The VEHICLE_RECORDING - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_5004(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_5024( uParam2, ref (uParam1^)[uParam0]._fU8 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU8[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The VEHICLE_RECORDING asset thread indices are NOT available!!!", 0 );
    }
    return;
}

int sub_5024(int iParam0, unknown uParam1)
{
    int I;
    int Result;

    Result = -1;
    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I] == nil)
        {
            Result = I;
        }
        else if (IS_THREAD_ACTIVE( (uParam1^)[I] ))
        {
            if ((uParam1^)[I] == iParam0)
            {
                (uParam1^)[I] = nil;
                Result = I;
            }
        }
        else
        {
            (uParam1^)[I] = nil;
            Result = I;
        }
    }
    if (NOT (Result == -1))
    {
        return Result;
    }
    SCRIPT_ASSERT( "There are no THREADID indices available for insert!!!", 0 );
    return -1;
}

void sub_5673(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        (uParam0^)[I] = nil;
    }
    return;
}

void sub_6151()
{
    sub_2134( "MF", "P_RESET_AMBIENT_SPEECH_VARIABLES - START", 0 );
    sub_6219( ref l_U65 );
    sub_6219( ref l_U45 );
    l_U43 = STAT_GET_INT( "SP_BULLETS_FIRED_RH" );
    l_U44 = STAT_GET_INT( "SP_BULLETS_HIT_RH" );
    sub_6219( ref l_U25 );
    sub_6219( ref l_U34 );
    l_U74 = 0;
    sub_2134( "MF", "P_RESET_AMBIENT_SPEECH_VARIABLES - END", 0 );
    return;
}

void sub_6219(int iParam0)
{
    iParam0->_fU20 = 0;
    iParam0->_fU16 = 0;
    return;
}

void sub_6451(int iParam0)
{
    iParam0->_fU36 = 0;
    iParam0->_fU40 = 0;
    return;
}

void sub_6597(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

    sub_2134( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U0)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
    sub_6781( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
        sub_7858( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 = sub_8150( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
        sub_8510( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 = sub_8150( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
        sub_8510( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 = sub_8150( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
        sub_8510( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 = sub_8795( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
        sub_8510( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 = sub_8795( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
        sub_8510( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U0 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if ((sub_9288( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
    sub_9449( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING( sub_354(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U0)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U0 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
    sub_2134( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

void sub_6781(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 = sub_6813( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

int sub_6813(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

void sub_7858(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

void sub_8150(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                }
            }
        }
    }
    else
    {
        sub_8466( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

void sub_8466(unknown uParam0)
{
    return;
}

void sub_8510(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

void sub_8795(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                }
            }
        }
    }
    else
    {
        sub_8466( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

int sub_9288(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

void sub_9449(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 = sub_6813( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
    sub_9521( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

void sub_9521(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

void sub_10795()
{
    int iVar2;
    int I;

    iVar2 = l_U310;
    sub_10812();
    switch (l_U310)
    {
        case 0: break;
        case 1:
        sub_220( "eCheckpointState = CP_INITIALIZE_SCRIPT_DATA" );
        sub_11640();
        sub_11800();
        sub_12020();
        SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
        l_U310 = 2;
        sub_220( "eCheckpointState = CP_INITIAL_REQUEST_ASSETS" );
        break;
        case 2:
        sub_220( "eCheckpointState = CP_INITIAL_REQUEST_ASSETS" );
        sub_12550();
        sub_4780();
        l_U310 = 3;
        sub_220( "eCheckpointState = CP_INITIAL_LOADING_ASSETS" );
        break;
        case 3:
        if (((GET_SCRIPT_STREAM_STATE( "S_CLUB_HELI_RS_STREAM", g_U2867 )) == 2) AND ((sub_20139( ref g_U1964 )) AND ((sub_20012( ref g_U2133 )) AND ((sub_19891( ref g_U1903 )) AND ((sub_19700( ref g_U1350 )) AND ((sub_19573( ref g_U1447 )) AND ((sub_19452( ref g_U1301 )) AND (sub_19332( ref g_U1108 )))))))))
        {
            if ((NOT l_U274._fU0) AND (g_U891 == 6))
            {
                sub_20327();
                l_U312 = 0;
                g_U1074[6] = 1;
                l_U310 = 4;
                sub_220( "eCheckpointState = CP_LEVEL_LOAD_SCRIPT_SETUP" );
            }
            else
            {
                l_U310 = 6;
                sub_220( "eCheckpointState = CP_WAITING_TO_ACTIVATE" );
            }
        }
        break;
        case 4:
        sub_220( "eCheckpointState = CP_LEVEL_LOAD_SCRIPT_SETUP" );
        if (NOT (sub_20611( ref l_U274 )))
        {
            sub_8795( sub_354(), 354276007, 25000, 0, 0 );
            l_U310 = 5;
            sub_220( "eCheckpointState = CP_LEVEL_LOAD_WAIT_FOR_PLAYER_WEAPONS" );
        }
        else
        {
            l_U310 = 6;
            sub_220( "eCheckpointState = CP_WAITING_TO_ACTIVATE" );
        }
        break;
        case 5:
        if (NOT (IS_PED_DEAD( sub_354() )))
        {
            if (GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HAND( sub_354(), 0, 0 ) ))
            {
                g_U892 = 6;
                if (NOT l_U274._fU0)
                {
                    sub_21059( ref l_U274, g_U892, sub_354(), g_U2216[6], g_U2331[6], g_U2370[6], g_U2409[6], 0 );
                }
                l_U310 = 6;
                sub_220( "eCheckpointState = CP_WAITING_TO_ACTIVATE" );
            }
        }
        break;
        case 6:
        if (g_U1074[6])
        {
            if (l_U312 == 1)
            {
                sub_15792( "02_02_NC_concat", 1 );
            }
            sub_24782();
            sub_27594();
            l_U310 = 7;
            sub_220( "eCheckpointState = CP_INTRO" );
        }
        break;
        case 7:
        if (l_U311)
        {
            sub_35256( ref l_U452, "02_02_NC_concat", 28646, 29749, 31191, 31992, 32009, 34625, 250, 0 );
            l_U452._fU64 = 0;
            if (l_U312)
            {
                l_U452._fU4 = 2;
                l_U312 = 0;
            }
            else
            {
                l_U452._fU4 = 7;
            }
        }
        if (sub_35698( ref l_U452 ))
        {
            l_U310 = 8;
            sub_220( "eCheckpointState = CP_SETUP" );
        }
        break;
        case 8:
        sub_37836();
        if (g_U892 != 6)
        {
            g_U892 = 6;
            sub_21059( ref l_U274, g_U892, sub_354(), g_U2216[6], g_U2331[6], g_U2370[6], g_U2409[6], 1 );
        }
        sub_38269();
        ENABLE_HIT_DETECTION( 0 );
        l_U310 = 9;
        if (IS_DEATH_PANEL_WIPE_ALLOWED())
        {
            DO_SCREEN_FADE_IN( 0 );
        }
        sub_220( "eCheckpointState = CP_GAMEPLAY" );
        break;
        case 9:
        if (l_U311)
        {
            sub_38565( ref g_U893[7] );
            SET_PAYNEKILLER_AMT( GET_PAYNEKILLER_AMT() + 1 );
            sub_6151();
            CAMERA_CLEAR_POINT_AT_TARGET();
        }
        sub_38630( ref l_U333, 90.00000000, 0, 1 );
        sub_31880();
        sub_34885();
        if (NOT sub_38787())
        {
            sub_38853();
            sub_40204();
        }
        sub_40445();
        if (IS_PED_DEAD( g_U2777 ))
        {
            l_U310 = 13;
            sub_220( "eCheckpointState = CP_SHOT_GIOVANNA" );
            break;
        }
        if (NOT (IS_VEHICLE_DEAD( l_U318 )))
        {
            if ((sub_40826( l_U318, 304 )) > 95)
            {
                sub_2134( "MF", "Cleaning up CS helicopter", 0 );
                sub_3908( l_U319 );
                sub_4025( l_U318 );
            }
        }
        if ((NOT (IS_PED_DEAD( l_U333[3] ))) AND (sub_1938( ref l_U424 )))
        {
            sub_2134( "MF", "Starting Vignette:  S_CLUB_VIG_12_NC_CS5_MOVE", 0 );
            sub_30070( l_U333[3], -1793275080, "CS5" );
            ISEQ_START( -1793275080 );
            SET_PED_CONSUMING_AMMO( l_U333[3], 0 );
            SET_AMMO_IN_CLIP( l_U333[3], 406496141, GET_MAX_AMMO_IN_CLIP( l_U333[3], 406496141 ) );
            sub_220( "eCheckpointState = CP_FAIL" );
            break;
        }
        if (NOT l_U451)
        {
            if ((sub_41213( ref l_U333 )) == 1)
            {
                if ((sub_41304( ref l_U333 )) == l_U333[0])
                {
                    sub_2519( ref l_U424 );
                    sub_35008( ref l_U424, 3000 );
                    l_U451 = 1;
                }
            }
        }
        if ((sub_41213( ref l_U333 )) < 1)
        {
            l_U310 = 11;
            sub_220( "eCheckpointState = CP_OUTRO" );
            break;
        }
        if (NOT l_U420)
        {
            if (IS_PED_DEAD( l_U333[3] ))
            {
                if (NOT (ISEQ_QUERY_ENTITY_STATE( 2128723147, "CS3", 3 )))
                {
                    if (NOT (IS_PED_RELOADING( l_U333[2] )))
                    {
                        if (NOT l_U411._fU20)
                        {
                            sub_2134( "MF", "Starting CS Reaction Delay Timer...", 0 );
                            sub_35008( ref l_U411, GET_RANDOM_INT_IN_RANGE( 100, 500 ) );
                            l_U74 = 0;
                        }
                        else if (sub_1938( ref l_U411 ))
                        {
                            sub_2134( "MF", "Starting Vignette:  S_CLUB_VIG_12_NC_CS1_MOVE", 0 );
                            l_U420 = 1;
                            SET_PED_CONSUMING_AMMO( l_U333[2], 0 );
                            SET_AMMO_IN_CLIP( l_U333[2], 406496141, GET_MAX_AMMO_IN_CLIP( l_U333[2], 406496141 ) );
                            sub_30070( l_U333[2], -1999590465, "CS1" );
                            ISEQ_START( -1999590465 );
                            sub_35008( ref l_U442, GET_RANDOM_INT_IN_RANGE( 1000, 1600 ) );
                            l_U74 = 1;
                        }
                    }
                }
            }
        }
        if ((IS_PED_DEAD( l_U333[3] )) AND (NOT l_U421))
        {
            if (IS_PED_DEAD( l_U333[2] ))
            {
                if (NOT (ISEQ_QUERY_ENTITY_STATE( 2128723147, "CS2", 3 )))
                {
                    if (NOT (IS_PED_RELOADING( l_U333[1] )))
                    {
                        if (NOT l_U411._fU20)
                        {
                            sub_2134( "MF", "Starting CS Reaction Delay Timer...", 0 );
                            sub_35008( ref l_U411, GET_RANDOM_INT_IN_RANGE( 100, 500 ) );
                            l_U74 = 0;
                        }
                        else if (sub_1938( ref l_U411 ))
                        {
                            sub_2134( "MF", "Starting Vignette:  S_CLUB_VIG_12_NC_CS2_MOVE", 0 );
                            sub_30070( l_U333[1], -754727277, "CS2" );
                            ISEQ_START( -754727277 );
                            SET_PED_CONSUMING_AMMO( l_U333[1], 0 );
                            SET_AMMO_IN_CLIP( l_U333[1], 406496141, GET_MAX_AMMO_IN_CLIP( l_U333[1], 406496141 ) );
                            if ((GET_RANDOM_INT_IN_RANGE( 0, 100 )) < 40)
                            {
                                sub_35008( ref l_U442, GET_RANDOM_INT_IN_RANGE( 1000, 1600 ) );
                            }
                            l_U74 = 1;
                            l_U421 = 1;
                        }
                    }
                }
            }
        }
        if (NOT l_U422)
        {
            if ((IS_PED_DEAD( l_U333[2] )) AND (IS_PED_DEAD( l_U333[1] )))
            {
                if (NOT (ISEQ_QUERY_ENTITY_STATE( 2128723147, "CS5", 3 )))
                {
                    if (NOT (IS_PED_RELOADING( l_U333[4] )))
                    {
                        if (NOT l_U411._fU20)
                        {
                            sub_2134( "MF", "Starting CS Reaction Delay Timer...", 0 );
                            sub_35008( ref l_U411, GET_RANDOM_INT_IN_RANGE( 100, 500 ) );
                            l_U74 = 0;
                        }
                        else if (sub_1938( ref l_U411 ))
                        {
                            sub_2134( "MF", "Starting Vignette:  S_CLUB_VIG_12_NC_CS3_MOVE", 0 );
                            sub_30070( l_U333[4], 1082088136, "CS3" );
                            ISEQ_START( 1082088136 );
                            SET_PED_CONSUMING_AMMO( l_U333[4], 0 );
                            SET_AMMO_IN_CLIP( l_U333[4], 406496141, GET_MAX_AMMO_IN_CLIP( l_U333[4], 406496141 ) );
                            if ((GET_RANDOM_INT_IN_RANGE( 0, 100 )) < 40)
                            {
                                sub_35008( ref l_U442, GET_RANDOM_INT_IN_RANGE( 1000, 1600 ) );
                            }
                            l_U74 = 1;
                            l_U422 = 1;
                        }
                    }
                }
            }
        }
        if (NOT l_U423)
        {
            if (((sub_41213( ref l_U333 )) == 1) AND (NOT (IS_PED_DEAD( l_U333[0] ))))
            {
                if (NOT (ISEQ_QUERY_ENTITY_STATE( 2128723147, "CS1", 3 )))
                {
                    if (NOT (IS_PED_RELOADING( l_U333[0] )))
                    {
                        if (NOT l_U411._fU20)
                        {
                            sub_2134( "MF", "Starting CS Reaction Delay Timer...", 0 );
                            sub_35008( ref l_U411, GET_RANDOM_INT_IN_RANGE( 100, 500 ) );
                            l_U74 = 0;
                        }
                        else if (sub_1938( ref l_U411 ))
                        {
                            sub_2134( "MF", "Starting Vignette:  S_CLUB_VIG_12_NC_CS4_MOVE", 0 );
                            sub_30070( l_U333[0], 1210507618, "CS4" );
                            ISEQ_START( 1210507618 );
                            SET_PED_CONSUMING_AMMO( l_U333[0], 0 );
                            SET_AMMO_IN_CLIP( l_U333[0], 406496141, GET_MAX_AMMO_IN_CLIP( l_U333[0], 406496141 ) );
                            if ((GET_RANDOM_INT_IN_RANGE( 0, 100 )) < 40)
                            {
                                sub_35008( ref l_U442, GET_RANDOM_INT_IN_RANGE( 1000, 1600 ) );
                            }
                            l_U74 = 1;
                            l_U423 = 1;
                        }
                    }
                }
            }
        }
        sub_43077();
        break;
        case 13:
        if (l_U311)
        {
            ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
        }
        if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
        {
            l_U310 = 0;
            l_U313 = 1;
            AUDIO_MUSIC_SUSPEND( 5000 );
        }
        break;
        case 10:
        if (l_U311)
        {
            sub_36565( 1, 0, 0, 1 );
            if (NOT (IS_VEHICLE_DEAD( g_U2866 )))
            {
                PAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2866 );
            }
            sub_6151();
            TOGGLE_WEAPON_ATTACHMENT( GET_WEAPON_FROM_HAND( sub_354(), 0, 0 ), 13, 0 );
            if (NOT (IS_PED_DEAD( l_U333[3] )))
            {
                sub_2134( "MF", "Performing Death Cam Setup for: piRS1_HELIPAD_CS[3]", 0 );
                sub_43671( g_U2777, 57, 1000 );
                WAIT( 0 );
                CAMERA_PLAY_ANIMATED( "LEVEL_S_CLUB_CP_06_HP", "VIG_12_NC_GIO_HELIPAD_CS5_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
                l_U524 = {49.30200000, -30.35100000, 94.26300000};
            }
            else if (NOT (IS_PED_DEAD( l_U333[2] )))
            {
                sub_2134( "MF", "Performing Death Cam Setup for: piRS1_HELIPAD_CS[2]", 0 );
                sub_43671( g_U2777, 53, 1000 );
                WAIT( 0 );
                CAMERA_PLAY_ANIMATED( "LEVEL_S_CLUB_CP_06_HP", "VIG_12_NC_GIO_HELIPAD_CS1_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
                l_U524 = {49.30200000, -30.35100000, 94.26300000};
            }
            else if (NOT (IS_PED_DEAD( l_U333[1] )))
            {
                sub_2134( "MF", "Performing Death Cam Setup for: piRS1_HELIPAD_CS[1]", 0 );
                sub_43671( g_U2777, 54, 1000 );
                WAIT( 0 );
                CAMERA_PLAY_ANIMATED( "LEVEL_S_CLUB_CP_06_HP", "VIG_12_NC_GIO_HELIPAD_CS2_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
                l_U524 = {49.30200000, -30.35100000, 94.26300000};
            }
            else if (NOT (IS_PED_DEAD( l_U333[4] )))
            {
                sub_2134( "MF", "Performing Death Cam Setup for: piRS1_HELIPAD_CS[4]", 0 );
                sub_43671( g_U2777, 55, 1000 );
                WAIT( 0 );
                CAMERA_PLAY_ANIMATED( "LEVEL_S_CLUB_CP_06_HP", "VIG_12_NC_GIO_HELIPAD_CS3_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
                l_U524 = {49.30200000, -30.35100000, 94.26300000};
            }
            else
            {
                sub_2134( "MF", "Performing Death Cam Setup for: piRS1_HELIPAD_CS[0] (or generic)", 0 );
                CAMERA_PLAY_ANIMATED( "LEVEL_S_CLUB_CP_06_HP", "VIG_12_NC_GIO_HELIPAD_CS4_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
                l_U524 = {49.62000000, -31.26000000, 94.27000000};
            };;;;
            sub_44733( "CLUB_RS_GIOV1_SCRIPTED_FAIL_FX", 0 );
            if (NOT (IS_PED_DEAD( g_U2777 )))
            {
                SET_PED_GORE( g_U2777, 1 );
                SET_PED_ONLY_DAMAGED_BY_PLAYER( g_U2777, 0 );
            }
            sub_35008( ref l_U479, 1000 );
            sub_35008( ref l_U515, 3000 );
            sub_39052( ref l_U105 );
            sub_39134( 1, g_U2777, "GIOVANNA", ref l_U105, 2, 0 );
            sub_39134( 0, sub_354(), "MAX", ref l_U105, 2, 0 );
            sub_39374( "SCLB_GVNSC1", ref l_U105, 8, 1 );
            sub_45105( g_U2777, l_U524, GET_PED_HEADING( g_U2777 ) );
            sub_35008( ref l_U497, 100 );
        }
        for ( I = 0; I < l_U333; I++ )
        {
            if ((sub_43115( l_U333[I], 48 )) == 3)
            {
                sub_2134( "MF", "ACT_INT_02 REACHED! Shooting Giovanna...", 0 );
                SET_PED_SHOOTS_AT_COORD( l_U333[I], "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_BONE_COORDS( g_U2777, 65488, 0.00000000, 0.00000000, 0.10000000 ) );
                sub_935( ref l_U506 );
            }
        }
        if ((sub_1938( ref l_U515 )) || (IS_PED_DEAD( g_U2777 )))
        {
            l_U313 = 1;
            AUDIO_MUSIC_SUSPEND( 5000 );
            for ( I = 0; I < l_U333; I++ )
            {
                sub_43367( ref l_U333[I], 48 );
                sub_32173( ref l_U333[I] );
            }
        }
        if (sub_1938( ref l_U506 ))
        {
            if (NOT (IS_PED_DEAD( g_U2777 )))
            {
                sub_2134( "MF", "Bullet did not kill Giovanna, spawning a magic bullet to kill her", 0 );
                SCRIPT_ASSERT( "Bullet did not kill Giovanna, spawning a magic bullet to kill her", 0 );
                SHOOT_SINGLE_BULLET_BETWEEN_COORDS( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_BONE_COORDS( g_U2777, 65488, 0.00000000, 0.00000000, 1.00000000 ), "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_BONE_COORDS( g_U2777, 65488, 0.00000000, 0.00000000, 0.00000000 ), 99, 1, 406496141, 0 );
            }
        }
        if ((sub_1938( ref l_U515 )) || (l_U479._fU16))
        {
            l_U310 = 0;
        }
        break;
        case 11:
        sub_34885();
        if (l_U311)
        {
            sub_43671( g_U2777, 47, 1000 );
            sub_45105( g_U2777, (vector( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( g_U2777 ))) - (vector( 0.00000000, 0.00000000, 1.00000000)), 60.00000000 );
            sub_35008( ref l_U433, 1000 );
            if (NOT (IS_VEHICLE_DEAD( g_U2866 )))
            {
                PAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2866 );
            }
            sub_45852();
            sub_45988();
            DISABLE_RESTART_CHECKPOINT( 1 );
            sub_36565( 1, 0, 0, 1 );
        }
        if ((sub_1938( ref l_U433 )) == 1)
        {
            g_U1094 = 1;
            l_U310 = 14;
            sub_220( "eCheckpointState = CP_FINISHED" );
        }
        break;
        case 14:
        if (g_U1092)
        {
            sub_220( "eCheckpointState = CP_FINISHED" );
            SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
            DISABLE_RESTART_CHECKPOINT( 0 );
            l_U310 = 0;
            sub_220( "eCheckpointState = CP_IDLE" );
        }
        break;
    }
    if (l_U310 != iVar2)
    {
        l_U311 = 1;
    }
    else
    {
        l_U311 = 0;
    }
    return;
}

void sub_10812()
{
    switch (l_U527)
    {
        case 0:
        sub_2134( "CCB", "eAllInGoodTime - STATE_CHALLENGE_IDLE", 0 );
        l_U527 = 1;
        break;
        case 1:
        if (l_U310 >= 9)
        {
            if (((sub_10952( ref l_U333 )) < 3) AND (IS_PED_DEAD( l_U333[3] )))
            {
                sub_2134( "CCB", "The player killed the hostage taker before killing 3 peds...", 0 );
                sub_2134( "CCB", "eAllInGoodTime - STATE_CHALLENGE_COMPLETE", 0 );
                l_U527 = 2;
            }
            else if (((sub_10952( ref l_U333 )) >= 3) AND (IS_PED_DEAD( l_U333[3] )))
            {
                if (SCRIPT_VAR_HASH_EXISTS( 1584744746 ))
                {
                    sub_2134( "CCB", "The player killed all the peds...", 0 );
                    SCRIPT_VAR_HASH_SET_INT( 1584744746, 1 );
                }
                else
                {
                    sub_2134( "CCB", "The AllInGoodTime script variable is NOT valid!!!", 0 );
                }
                sub_2134( "CCB", "eAllInGoodTime - STATE_CHALLENGE_COMPLETE", 0 );
                l_U527 = 2;
            }
        }
        break;
        case 2: break;
    }
    return;
}

void sub_10952(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            if (IS_PED_DEAD( (uParam0^)[I] ))
            {
                Result++;
            }
        }
    }
    return Result;
}

void sub_11640()
{
    sub_220( "P_INITIALIZE_SCRIPT_DATA" );
    l_U311 = 1;
    l_U420 = 0;
    l_U421 = 0;
    l_U422 = 0;
    l_U423 = 0;
    l_U451 = 0;
    l_U317 = 0;
    sub_611( ref l_U479, 1000, 1, 0 );
    sub_611( ref l_U488, 500, 1, 0 );
    sub_611( ref l_U506, 30, 1, 0 );
    sub_611( ref l_U515, 2500, 1, 0 );
    sub_611( ref l_U442, 500, 1, 0 );
    return;
}

void sub_11800()
{
    sub_220( "P_SET_STATIC_DATA" );
    l_U17[0] = g_U2453;
    l_U17[1] = 1037546172;
    l_U17[2] = 123419661;
    l_U17[3] = 1049690760;
    l_U17[4] = 230799837;
    sub_11900( "SCLBAUD" );
    return;
}

void sub_11900(unknown uParam0)
{
    StrCopy( ref g_U157._fU0, uParam0, 16 );
    sub_11920();
    return;
}

void sub_11920()
{
    int I;

    for ( I = 0; I <= 8; I++ )
    {
        g_U157._fU16[I]._fU0 = nil;
        g_U157._fU16[I]._fU4 = 0;
        g_U157._fU92[I] = 0;
    }
    return;
}

void sub_12020()
{
    sub_2134( "CCB", "P_INITIALIZE_SP_CHALLENGES", 0 );
    l_U527 = 0;
    if (NOT (SCRIPT_VAR_HASH_EXISTS( 1584744746 )))
    {
        sub_2134( "CCB", "Creating the AllInGoodTime script variable...", 0 );
        SCRIPT_VAR_HASH_ADD_INT( 1584744746 );
        if (SCRIPT_VAR_HASH_EXISTS( 1584744746 ))
        {
            sub_2134( "CCB", "The AllInGoodTime script variable was successfully created...", 0 );
        }
        else
        {
            sub_2134( "CCB", "The AllInGoodTime script variable is NOT valid!!!", 0 );
        }
    }
    else
    {
        sub_2134( "CCB", "The AllInGoodTime script variable was already created...", 0 );
        SCRIPT_VAR_HASH_SET_INT( 1584744746, 0 );
    }
    return;
}

void sub_12550()
{
    sub_220( "P_REQUEST_RS1_PERSISTENT_ASSETS start" );
    sub_12614( -1139974910, ref g_U1108 );
    sub_13700( ref l_U17, ref g_U1108 );
    sub_13768( 354276007, ref g_U1301 );
    sub_13768( 406496141, ref g_U1301 );
    sub_14745( "LEVEL_S_CLUB_CP_06", ref g_U1447 );
    sub_14745( "LEVEL_S_CLUB_CP_06_HP", ref g_U1447 );
    if ((g_U891 != 6) AND (l_U312 == 1))
    {
        sub_15792( "02_02_NC_concat", 0 );
    }
    sub_12614( 2121457570, ref g_U1108 );
    sub_16063( 191130716, ref g_U1350 );
    sub_16063( -1313172978, ref g_U1350 );
    sub_16063( -931023773, ref g_U1350 );
    sub_16063( 1476011597, ref g_U1350 );
    sub_16063( 2128723147, ref g_U1350 );
    sub_16063( -1999590465, ref g_U1350 );
    sub_16063( -754727277, ref g_U1350 );
    sub_16063( 1082088136, ref g_U1350 );
    sub_16063( 1210507618, ref g_U1350 );
    sub_16063( -1793275080, ref g_U1350 );
    sub_14745( "veh@std", ref g_U1447 );
    sub_14745( "veh@helicopter", ref g_U1447 );
    sub_18187( "Vehicle/Vehicle_heli.act", ref g_U1964 );
    REQUEST_SCRIPT_STREAM( "S_CLUB_HELI_RS_STREAM", g_U2867 );
    sub_220( "P_REQUEST_RS1_PERSISTENT_ASSETS end" );
    return;
}

void sub_12614(unknown uParam0, unknown uParam1)
{
    int iVar4;

    if (IS_MODEL_IN_CDIMAGE( uParam0 ))
    {
        iVar4 = sub_12649( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
        if (iVar4 >= 0)
        {
            (uParam1^)[iVar4]._fU0 = uParam0;
            (uParam1^)[iVar4]._fU4 = 1;
            sub_12780( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
        }
    }
    else
    {
        SCRIPT_ASSERT( "The asset is NOT in the image!!!", 0 );
    }
    return;
}

int sub_12649(int iParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU4 == 1)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The MODEL_NAME asset is currently being requested!!!", 0 );
                sub_12780( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 2)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The MODEL_NAME asset is already loading!!!", 0 );
                sub_12780( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 3)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                if (HAS_MODEL_LOADED( iParam0 ))
                {
                    sub_12780( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    SCRIPT_ASSERT( "The MODEL_NAME asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    (uParam1^)[Result]._fU0 = 0;
                    (uParam1^)[Result]._fU4 = 0;
                    sub_5673( ref (uParam1^)[Result]._fU8 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU4 == 4)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The MODEL_NAME asset is currently being removed!!!", 0 );
                sub_12780( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (HAS_MODEL_LOADED( iParam0 ))
        {
            SCRIPT_ASSERT( "The MODEL_NAME is already loaded, but the asset status flag was not set!!!", 0 );
            (uParam1^)[iVar6]._fU0 = iParam0;
            (uParam1^)[iVar6]._fU4 = 3;
            sub_12780( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The MODEL_NAMES - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_12780(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_5024( uParam2, ref (uParam1^)[uParam0]._fU8 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU8[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The MODEL_NAME asset thread indices are NOT available!!!", 0 );
    }
    return;
}

void sub_13700(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_12614( (uParam0^)[I], uParam1 );
    }
    return;
}

void sub_13768(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 = sub_13789( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
    if (iVar4 >= 0)
    {
        (uParam1^)[iVar4]._fU0 = uParam0;
        (uParam1^)[iVar4]._fU4 = 1;
        sub_13921( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
    }
    return;
}

int sub_13789(int iParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU4 == 1)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The WEAPON_TYPE asset is currently being requested!!!", 0 );
                sub_13921( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 2)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The WEAPON_TYPE asset is already loading!!!", 0 );
                sub_13921( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 3)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                if (HAS_WEAPON_LOADED( iParam0 ))
                {
                    sub_13921( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    SCRIPT_ASSERT( "The WEAPON_TYPE asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    (uParam1^)[Result]._fU0 = 0;
                    (uParam1^)[Result]._fU4 = 0;
                    sub_5673( ref (uParam1^)[Result]._fU8 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU4 == 4)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The WEAPON_TYPE asset is currently being removed!!!", 0 );
                sub_13921( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (HAS_WEAPON_LOADED( iParam0 ))
        {
            (uParam1^)[iVar6]._fU0 = iParam0;
            (uParam1^)[iVar6]._fU4 = 3;
            sub_13921( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The WEAPON_TYPE - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_13921(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_5024( uParam2, ref (uParam1^)[uParam0]._fU8 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU8[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The WEAPON_TYPE asset thread indices are NOT available!!!", 0 );
    }
    return;
}

void sub_14745(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 = sub_14766( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
    if (iVar4 >= 0)
    {
        StrCopy( ref (uParam1^)[iVar4]._fU0, uParam0, 32 );
        (uParam1^)[iVar4]._fU32 = 1;
        sub_14903( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
    }
    return;
}

int sub_14766(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU32 == 1)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The ANIM_DICT asset is currently being requested!!!", 0 );
                sub_14903( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU32 == 2)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The ANIM_DICT asset is already loading!!!", 0 );
                sub_14903( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU32 == 3)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                if (HAS_ANIM_DICT_LOADED( uParam0, 0 ))
                {
                    sub_14903( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    SCRIPT_ASSERT( "The ANIM_DICT asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    StrCopy( ref (uParam1^)[Result]._fU0, "", 32 );
                    (uParam1^)[Result]._fU32 = 0;
                    sub_5673( ref (uParam1^)[Result]._fU36 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU32 == 4)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The ANIM_DICT asset is currently being removed!!!", 0 );
                sub_14903( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU32 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (HAS_ANIM_DICT_LOADED( uParam0, 0 ))
        {
            StrCopy( ref (uParam1^)[iVar6]._fU0, uParam0, 32 );
            (uParam1^)[iVar6]._fU32 = 1;
            sub_14903( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The ANIM_DICT - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_14903(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_5024( uParam2, ref (uParam1^)[uParam0]._fU36 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU36[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The ANIM_DICT asset thread indices are NOT available!!!", 0 );
    }
    return;
}

void sub_15792(unknown uParam0, int iParam1)
{
    if (HAS_CUTSCENE_LOADED())
    {
        if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
        {
            SCRIPT_ASSERT( "Another cutscene is already loaded.  You can only load one cutscene into memory.  Your current cutscene will not load into memory.", 0 );
        }
    }
    if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
    {
        PRE_STREAM_SEAMLESS_CUTSCENE( uParam0 );
        if (iParam1 == 1)
        {
            while ((CUTSCENE_IS_LOADED( uParam0 )) == 0)
            {
                WAIT( 0 );
            }
        }
    }
    return;
}

void sub_16063(unknown uParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    int iVar12;

    if (ISEQ_DOES_EXIST( uParam0 ))
    {
        iVar12 = sub_16098( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
        if (iVar12 >= 0)
        {
            ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
            (uParam1^)[iVar12]._fU0 = uParam0;
            (uParam1^)[iVar12]._fU4 = 1;
            sub_16250( iVar12, uParam1, GET_ID_OF_THIS_THREAD() );
        }
    }
    else
    {
        SCRIPT_ASSERT( "[CCB] ### The eTempAssetName ISEQ is NOT valid!!! ###", 0 );
    }
    return;
}

int sub_16098(int iParam0, unknown uParam1, unknown uParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    int Result;
    int iVar14;

    iVar14 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU4 == 1)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The ISEQ asset is currently being requested!!!", 0 );
                sub_16250( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 2)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The ISEQ asset is already loading!!!", 0 );
                sub_16250( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 3)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                if ((uParam1^)[Result]._fU0 != 0)
                {
                    if ((ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 3 )) || (ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 2 )))
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        sub_16250( Result, uParam1, uParam2 );
                        return -1;
                    }
                    else if (ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 1 ))
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        SCRIPT_ASSERT( "The ISEQ asset is currently loading!!!", 0 );
                        sub_16250( Result, uParam1, uParam2 );
                        return -1;
                    }
                    else if (ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 6 ))
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        SCRIPT_ASSERT( "The ISEQ status is LOADED but the asset is already TERMINATED!!!", 0 );
                        (uParam1^)[Result]._fU0 = 0;
                        (uParam1^)[Result]._fU4 = 0;
                        return Result;
                    }
                    else if ((ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 5 )) || (ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 4 )))
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        SCRIPT_ASSERT( "The ISEQ status is LOADED but the asset is already interrupted or shutting down!!!", 0 );
                        (uParam1^)[Result]._fU0 = 0;
                        (uParam1^)[Result]._fU4 = 0;
                        sub_5673( ref (uParam1^)[Result]._fU8 );
                        return Result;
                    }
                    else
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        SCRIPT_ASSERT( "The ISEQ asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                        (uParam1^)[Result]._fU0 = 0;
                        (uParam1^)[Result]._fU4 = 0;
                        sub_5673( ref (uParam1^)[Result]._fU8 );
                        return Result;
                    };;;;
                }
                else
                {
                    SCRIPT_ASSERT( "Trying to update the state of a DUMMY_SEQUENCE!!!", 0 );
                }
            }
        }
        else if ((uParam1^)[Result]._fU4 == 4)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The ISEQ asset is currently being removed!!!", 0 );
                sub_16250( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 0)
        {
            iVar14 = Result;
        };;;;;
    }
    if (NOT (iVar14 == -1))
    {
        if (iParam0 != 0)
        {
            if ((ISEQ_QUERY_STATE( (uParam1^)[iVar14]._fU0, 3 )) || (ISEQ_QUERY_STATE( (uParam1^)[iVar14]._fU0, 2 )))
            {
                ISEQ_GET_NAME( 32, ref uVar5, iParam0 );
                SCRIPT_ASSERT( "The ISEQ asset is already loaded, but the asset status flag was not set!!!", 0 );
                (uParam1^)[iVar14]._fU0 = iParam0;
                (uParam1^)[iVar14]._fU4 = 3;
                sub_16250( iVar14, uParam1, uParam2 );
                return -1;
            }
            else
            {
                return iVar14;
            }
        }
        else
        {
            SCRIPT_ASSERT( "Trying to check if index is available for a DUMMY_SEQUENCE!!!", 0 );
        }
    }
    SCRIPT_ASSERT( "The ISEQ - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_16250(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_5024( uParam2, ref (uParam1^)[uParam0]._fU8 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU8[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The ISEQ asset thread indices are NOT available!!!", 0 );
    }
    return;
}

void sub_18187(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 = sub_18208( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
    if (iVar4 >= 0)
    {
        StrCopy( ref (uParam1^)[iVar4]._fU0, uParam0, 64 );
        (uParam1^)[iVar4]._fU64 = 1;
        sub_18347( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
    }
    return;
}

int sub_18208(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU64 == 1)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The ACTION_TREE asset is currently being requested!!!", 0 );
                sub_18347( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU64 == 2)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The ACTION_TREE asset is already loading!!!", 0 );
                sub_18347( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU64 == 3)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                if (IS_ACTION_TREE_LOADED( uParam0 ))
                {
                    sub_18347( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    SCRIPT_ASSERT( "The ACTION_TREE asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    StrCopy( ref (uParam1^)[Result]._fU0, "", 64 );
                    (uParam1^)[Result]._fU64 = 0;
                    sub_5673( ref (uParam1^)[Result]._fU68 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU64 == 4)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The ACTION_TREE asset is currently being removed!!!", 0 );
                sub_18347( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU64 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (IS_ACTION_TREE_LOADED( uParam0 ))
        {
            StrCopy( ref (uParam1^)[iVar6]._fU0, uParam0, 64 );
            (uParam1^)[iVar6]._fU64 = 3;
            sub_18347( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The ACTION_TREE - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_18347(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_5024( uParam2, ref (uParam1^)[uParam0]._fU68 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU68[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The ACTION_TREE asset thread indices are NOT available!!!", 0 );
    }
    return;
}

int sub_19332(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU4 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

int sub_19452(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU4 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

int sub_19573(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU32 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU32 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU32 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

int sub_19700(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU4 == 1)
        {
            ISEQ_GET_NAME( 32, ref uVar3, (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 2)
        {
            ISEQ_GET_NAME( 32, ref uVar3, (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 4)
        {
            ISEQ_GET_NAME( 32, ref uVar3, (uParam0^)[I]._fU0 );
            return 0;
        };;;
    }
    return 1;
}

int sub_19891(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU4 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

int sub_20012(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU32 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU32 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU32 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

int sub_20139(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU64 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU64 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU64 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

void sub_20327()
{
    sub_220( "P_SETUP_RS_WEATHER_AND_TOD" );
    RELEASE_TIME_OF_DAY();
    SET_WEATHER_TYPE_NOW_PERSIST( "EXTRASUNNY" );
    FREEZE_TIME_OF_DAY( 22, 0 );
    return;
}

int sub_20611(unknown uParam0)
{
    sub_2134( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U0 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U1 );
            sub_6597( uParam0, sub_354() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

void sub_21059(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

    sub_2134( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
        sub_2134( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
        sub_9449( iParam1 );
        sub_21318( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
            sub_21769( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
            sub_21769( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_22001( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
            sub_21769( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_22001( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_22001( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
            sub_21769( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_22001( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_22001( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_22001( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
            sub_21769( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_22001( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_22001( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_22001( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if (sub_22001( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
            sub_23559( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U1, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
    sub_2134( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

void sub_21318(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 = sub_6813( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
        sub_2134( "TEH", "Ending context", 0 );
        sub_2134( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

void sub_21769(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

void sub_22001(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

void sub_23559(int iParam0)
{
    sub_8466( "CHECKPOINT DATA" );
    sub_23598( iParam0->_fU4 );
    sub_23621( iParam0->_fU16 );
    sub_23621( iParam0->_fU20 );
    sub_23621( iParam0->_fU24 );
    sub_23664( iParam0->_fU28 );
    sub_23664( iParam0->_fU56 );
    sub_23664( iParam0->_fU60 );
    sub_23664( iParam0->_fU64 );
    sub_23664( iParam0->_fU68 );
    sub_23664( iParam0->_fU72 );
    sub_23664( iParam0->_fU76 );
    sub_23664( iParam0->_fU80 );
    sub_23664( iParam0->_fU84 );
    sub_23664( iParam0->_fU88 );
    sub_23664( iParam0->_fU92 );
    sub_23621( iParam0->_fU32 );
    sub_23664( iParam0->_fU36 );
    sub_23664( iParam0->_fU40 );
    sub_23664( iParam0->_fU44 );
    sub_23621( iParam0->_fU136 );
    sub_23869( iParam0->_fU140 );
    sub_23664( iParam0->_fU52 );
    sub_8466( "---nRightHolsterAttachmentEnabled: " );
    sub_23664( iParam0->_fU96 );
    sub_8466( "---nRightHolsterAttachmentToggled: " );
    sub_23664( iParam0->_fU100 );
    sub_8466( "---nLeftHolsterAttachmentEnabled: " );
    sub_23664( iParam0->_fU104 );
    sub_8466( "---nLeftHolsterAttachmentToggled: " );
    sub_23664( iParam0->_fU108 );
    sub_8466( "---nRifleHolsterAttachmentEnabled: " );
    sub_23664( iParam0->_fU112 );
    sub_8466( "---nRifleHolsterAttachmentToggled: " );
    sub_23664( iParam0->_fU116 );
    sub_8466( "---nRightHandAttachmentEnabled: " );
    sub_23664( iParam0->_fU120 );
    sub_8466( "---nRightHandAttachmentToggled: " );
    sub_23664( iParam0->_fU124 );
    sub_8466( "---nLeftHandAttachmentEnabled: " );
    sub_23664( iParam0->_fU128 );
    sub_8466( "---nLeftHandAttachmentToggled: " );
    sub_23664( iParam0->_fU132 );
    sub_23664( l_U1 );
    sub_23664( 144 );
    return;
}

void sub_23598(unknown uParam0, unknown uParam1, unknown uParam2)
{
    return;
}

void sub_23621(unknown uParam0)
{
    return;
}

void sub_23664(unknown uParam0)
{
    return;
}

void sub_23869(boolean bParam0)
{
    if (bParam0)
    {
        ;
    }
    return;
}

void sub_24782()
{
    int I;

    sub_24830( ref l_U339[0], 45.45800000, -24.35200000, 94.26500000, 90.00000000, 360058256, 7, 3, 2, 0, 0 );
    sub_24830( ref l_U339[1], 49.79800000, -22.86500000, 94.26600000, -45.00000000, -1363541453, 7, 3, 2, 0, 0 );
    sub_24830( ref l_U339[2], 49.18500000, -24.71600000, 94.26600000, -45.00000000, 363091154, 7, 3, 2, 0, 0 );
    sub_24830( ref l_U339[3], 49.67900000, -30.32500000, 94.26000000, 90.00000000, -3570185, 7, 3, 2, 0, 0 );
    sub_24830( ref l_U339[4], 49.72000000, -20.05500000, 94.26600000, -90.00000000, -26033824, 7, 3, 2, 0, 0 );
    while (NOT (sub_25125( ref l_U333, ref l_U339, -1, 1, 1, 0, 1 )))
    {
        WAIT( 0 );
    }
    sub_26767( ref l_U333, "piRS1_HELIPAD_CS" );
    for ( I = 0; I < l_U333; I++ )
    {
        if (NOT (IS_PED_DEAD( l_U333[I] )))
        {
            CLEAR_PED_TASKS( l_U333[I] );
            SET_PED_FLAG_BLOCK_WOUNDED_MOVEMENT( l_U333[I], 1 );
            SET_PED_IGNORE_LOS_CHECKS( l_U333[I], 1 );
            SET_PED_AS_ONE_SHOT_KILL( l_U333[I], 1 );
            SET_PED_COMBAT_MOVEMENT( l_U333[I], 0 );
            SET_PED_ACCURACY( l_U333[I], -729479261 );
            sub_27017( l_U333[I], ref l_U405 );
            SET_PED_ALERTNESS( l_U333[I], 3 );
            sub_8795( l_U333[I], 406496141, 25000, 0, 0 );
            SET_PED_PATH_CAN_AVOID_LINE_OF_FIRE( l_U333[I], 0 );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U333[I], 1 );
            SET_BLOCKING_OF_PED_TARGETTING( l_U333[I], 1 );
        }
    }
    if (NOT (IS_PED_DEAD( l_U333[3] )))
    {
        SET_PED_CONSUMING_AMMO( l_U333[3], 0 );
    }
    return;
}

void sub_24830(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

int sub_25125(unknown uParam0, unknown uParam1, int iParam2, boolean bParam3, boolean bParam4, int iParam5, unknown uParam6)
{
    int iVar9;
    int iVar10;
    int Result;

    iVar9 = sub_25139( uParam0, uParam1 );
    if (iParam2 == -1)
    {
        iVar10 = (uParam0^);
    }
    else
    {
        iVar10 = iParam2;
    }
    if (iVar9 < iVar10)
    {
        if ((uParam1^)[iVar9]._fU16 == 0)
        {
            SCRIPT_ASSERT( "Invalid Ped Struct!  No Model Defined! Aborting Ped Spawn", 0 );
            sub_2134( "MF", "Invalid Ped Struct!  No Model Defined! Aborting Ped Spawn", 0 );
            sub_23664( iVar9 );
            return 0;
        }
        if (NOT (DOES_PED_EXIST( (uParam0^)[iVar9] )))
        {
            sub_25480( (uParam1^)[iVar9]._fU16, uParam6 );
            (uParam0^)[iVar9] = sub_25652( ref (uParam1^)[iVar9] );
            if (NOT bParam4)
            {
                SET_PED_VISIBLE( (uParam0^)[iVar9], bParam4 );
                sub_8466( "SPAWNING INVISIBLE PED!!!" );
            }
            if (iParam5 == 1)
            {
                sub_26386( (uParam0^)[iVar9] );
                sub_8466( "Deactivating Ped..." );
            }
        }
    }
    if (bParam3)
    {
        if (iVar9 == (iVar10 - 1))
        {
            sub_2134( "MF", "F_HANDLE_PED_ARRAY_SPAWN: Returning true Once.  If you see this looping, you likely have unitialized ped model data in your pedstruct array.", 0 );
            Result = 1;
        }
        return Result;
    }
    else if (iVar9 >= iVar10)
    {
        return 1;
    }
    return 0;
}

void sub_25139(unknown uParam0, unknown uParam1)
{
    int I;
    int Result;

    Result = (uParam1^);
    for ( I = 0; I < (uParam0^); I++ )
    {
        if (NOT (DOES_PED_EXIST( (uParam0^)[I] )))
        {
            if ((uParam1^)[I]._fU16 != 0)
            {
                if (I < Result)
                {
                    Result = I;
                }
            }
        }
    }
    return Result;
}

void sub_25480(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
        sub_8466( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_25652(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
        sub_25480( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
    sub_26131( iParam0->_fU40 );
    sub_26211( iParam0->_fU40 );
    return iParam0->_fU40;
}

void sub_26131(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

void sub_26211(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

void sub_26386(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 1 );
        SET_PED_VISIBLE( uParam0, 0 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 0 );
        FREEZE_PED_POSITION( uParam0, 1 );
        SET_PED_COLLISION( uParam0, 0 );
        SET_PED_PROOFS( uParam0, 1, 1, 1, 1, 1 );
    }
    return;
}

void sub_26767(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

void sub_27017(unknown uParam0, int iParam1)
{
    int iVar4;
    unknown uVar5;

    if ((DOES_GROUP_EXIST( iParam1->_fU0 )) == 0)
    {
        sub_8466( "[SP]### Warning!!! Group does not exist. Creating new group specified attributes. ###" );
        if (iParam1->_fU4 > 0)
        {
            sub_27160( iParam1, iParam1->_fU4, 0 );
        }
        else
        {
            sub_27160( iParam1, 1056964608, 0 );
        }
    }
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        GET_GROUP_SIZE( iParam1->_fU0, ref iVar4, ref uVar5 );
        if (iVar4 == 0)
        {
            SET_PED_AS_GROUP_LEADER( uParam0, iParam1->_fU0 );
        }
        else
        {
            SET_PED_AS_GROUP_MEMBER( uParam0, iParam1->_fU0 );
        }
        SET_PED_NEVER_LEAVES_GROUP( uParam0, 1 );
    }
    return;
}

void sub_27160(int iParam0, unknown uParam1, boolean bParam2)
{
    iParam0->_fU4 = uParam1;
    iParam0->_fU0 = CREATE_GROUP( 3, 1 );
    if (bParam2)
    {
        while (NOT (DOES_GROUP_EXIST( iParam0->_fU0 )))
        {
            WAIT( 0 );
        }
    }
    SET_GROUP_RATIO_FIRING_AT_VISIBLE( iParam0->_fU0, iParam0->_fU4 );
    SET_GROUP_RATIO_FIRING_AT_INVISIBLE( iParam0->_fU0, iParam0->_fU4 );
    if (iParam0->_fU8)
    {
        SET_GROUP_FORMATION( iParam0->_fU0, iParam0->_fU12 );
        SET_GROUP_FORMATION_SPACING( iParam0->_fU0, iParam0->_fU16 );
        SET_GROUP_FORMATION_MAX_MOVE_SPEED( iParam0->_fU0, iParam0->_fU20 );
    }
    return;
}

void sub_27594()
{
    sub_2134( "MF", "P_RS1_CREATE_CS_HELI - START", 0 );
    l_U318 = sub_27675( 2121457570, 47.33440000, -23.67520000, 95.08020000, 340.88330000, 0, 0, 0 );
    if (NOT (IS_VEHICLE_DEAD( l_U318 )))
    {
        SET_VEHICLE_CAN_BE_DAMAGED( l_U318, 0 );
        SET_VEHICLE_CAN_BE_TARGETTED( l_U318, 0 );
        SET_VEHICLE_CAN_BE_VISIBLY_DAMAGED( l_U318, 0 );
        SET_HELI_BLADES_FULL_SPEED( l_U318 );
    }
    sub_24830( ref l_U320, 0.00000000, 0.00000000, 0.00000000, 0, -3570185, 7, 3, 2, 0, 0 );
    l_U319 = sub_28014( ref l_U320, l_U318, -1, 0, 0 );
    if (NOT (IS_PED_DEAD( l_U319 )))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U319, 1 );
    }
    sub_2134( "MF", "P_RS1_CREATE_CS_HELI - END", 0 );
    return;
}

void sub_27675(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, int iParam5, unknown uParam6, unknown uParam7)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a vehicle with MUST BE PRELOADED!!!!", 0 );
        sub_25480( uParam0, 1 );
    }
    Result = CREATE_VEHICLE( uParam0, uParam1, uParam4, uParam6, uParam7 );
    if (iParam5 == 1)
    {
        while ((DOES_VEHICLE_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    if (DOES_VEHICLE_EXIST( Result ))
    {
        SET_PETROLTANK_BURN_RATE( Result, 125.00000000 );
    }
    return Result;
}

void sub_28014(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4)
{
    if ((HAS_MODEL_LOADED( iParam0->_fU16 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
        sub_25480( iParam0->_fU16, 1 );
    }
    if (((IS_VEHICLE_DEAD( uParam1 )) == 0) AND ((DOES_VEHICLE_EXIST( uParam1 )) == 1))
    {
        iParam0->_fU40 = CREATE_PED_INSIDE_VEHICLE( uParam1, iParam0->_fU24, iParam0->_fU16, uParam2, uParam4, iParam0->_fU48 );
    }
    else
    {
        SCRIPT_ASSERT( "The vehicle your trying to create a ped inside of is not valid!!!", 0 );
    }
    if (iParam3 == 1)
    {
        while ((DOES_PED_EXIST( iParam0->_fU40 )) == 0)
        {
            WAIT( 0 );
        }
    }
    sub_26131( iParam0->_fU40 );
    sub_26211( iParam0->_fU40 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        iParam0->_fU44 = 1;
    }
    return iParam0->_fU40;
}

int sub_28646()
{
    sub_2134( "MF", "F_RS1_02_02_SETUP - START", 0 );
    sub_28708( 70, 0.15000000, 1400.25000000 );
    sub_24830( ref g_U2736, 55.11000000, -24.06000000, 94.27000000, 0.00000000, 817667075, 26, 6, 0, 0, 1 );
    sub_24830( ref g_U2750, 54.04000000, -24.06000000, 94.27000000, 0.00000000, -383356854, 26, 6, 0, 0, 1 );
    if (NOT (DOES_PED_EXIST( g_U2763 )))
    {
        g_U2763 = sub_25652( ref g_U2750 );
    }
    WAIT( 0 );
    if (NOT (DOES_PED_EXIST( g_U2749 )))
    {
        g_U2749 = sub_25652( ref g_U2736 );
    }
    WAIT( 0 );
    sub_24830( ref g_U2764, 49.08000000, -30.61000000, 94.26000000, 90, 1421546599, 5, 2, 0, 0, 0 );
    if (NOT (DOES_PED_EXIST( g_U2777 )))
    {
        g_U2777 = sub_25652( ref g_U2764 );
    }
    if (NOT (IS_PED_DEAD( l_U333[4] )))
    {
        SET_PED_VISIBLE( l_U333[4], 0 );
    }
    return 1;
}

void sub_28708(unknown uParam0, unknown uParam1, unknown uParam2)
{
    sub_220( "P_SETUP_HELI" );
    if (NOT (DOES_VEHICLE_EXIST( g_U2866 )))
    {
        g_U2866 = sub_27675( 1049690760, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_POSITION_OF_VEHICLE_RECORDING_AT_TIME( uParam0, uParam2 ), 0.00000000, 1, 0, 1 );
    }
    else if (NOT (IS_VEHICLE_DEAD( g_U2866 )))
    {
        SET_VEHICLE_COORDS( g_U2866, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_POSITION_OF_VEHICLE_RECORDING_AT_TIME( uParam0, uParam2 ) );
    }
    if ((NOT (IS_VEHICLE_DEAD( g_U2866 ))) AND (DOES_VEHICLE_EXIST( g_U2866 )))
    {
        SET_VEHICLE_ENGINE_ON( g_U2866, 1, 1 );
        SET_HELI_BLADES_FULL_SPEED( g_U2866 );
        SILENCE_VEHICLE( g_U2866, 1 );
        SET_VEHICLE_AS_MISSION_VEHICLE( g_U2866 );
        SET_VEHICLE_EXTRA( g_U2866, 5, 1 );
        SET_VEHICLE_INTERIORLIGHT( g_U2866, 1 );
        SET_VEHICLE_DOOR_OPEN( g_U2866, 3 );
        SET_VEHICLE_HEALTH( g_U2866, 600 );
        SET_VEHICLE_ENGINE_HEALTH( g_U2866, 600.00000000 );
        SET_VEHICLE_PETROL_TANK_HEALTH( g_U2866, 300.00000000 );
        SET_VEHICLE_CAN_BE_DAMAGED( g_U2866, 0 );
        SET_VEHICLE_CAN_BE_VISIBLY_DAMAGED( g_U2866, 1 );
        SET_VEHICLE_PROOFS( g_U2866, 0, 1, 1, 1, 1 );
        sub_29062( g_U2866, uParam0, uParam1, uParam2, 0 );
        PAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2866 );
        if (NOT (DOES_OBJECT_EXIST( l_U23 )))
        {
            l_U23 = CREATE_OBJECT( 230799837, 0.00000000, 1.00000000, 0.00000000, 0, 0 );
            ATTACH_OBJECT_TO_VEHICLE( l_U23, g_U2866, 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000 );
        }
    }
    ALLOW_BULLET_CAMERA_CHEAT( 0 );
    return;
}

void sub_29062(unknown uParam0, unknown uParam1, unknown uParam2, float fParam3, boolean bParam4)
{
    if (NOT (IS_VEHICLE_DEAD( uParam0 )))
    {
        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( uParam0 ))
        {
            STOP_PLAYBACK_RECORDED_VEHICLE( uParam0 );
        }
    }
    sub_29113( uParam1, 1 );
    if (NOT (IS_VEHICLE_DEAD( uParam0 )))
    {
        START_PLAYBACK_RECORDED_VEHICLE( uParam0, uParam1 );
        SET_PLAYBACK_SPEED( uParam0, uParam2 );
        if (fParam3 > 0.00000000)
        {
            SKIP_TIME_IN_PLAYBACK_RECORDED_VEHICLE( uParam0, fParam3 );
        }
    }
    if (bParam4)
    {
        while ((NOT (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( uParam0 ))) AND (NOT (IS_VEHICLE_DEAD( uParam0 ))))
        {
            sub_8466( "Waiting for vehicle to start playing recorded path." );
            WAIT( 0 );
        }
    }
    return;
}

void sub_29113(unknown uParam0, int iParam1)
{
    REQUEST_VEHICLE_RECORDING( uParam0 );
    if (iParam1 == 1)
    {
        while ((HAS_VEHICLE_RECORDING_BEEN_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_29749()
{
    sub_2134( "MF", "P_RS1_02_02_REGISTER - START", 0 );
    if (NOT (IS_PED_DEAD( sub_354() )))
    {
        CUTSCENE_REGISTER_PED_ATTACH_TO_VEHICLE( sub_354(), g_U2866, 0, 0.56600000, 0.00000000, 0.80400000, -90.00000000, 0.00000000, 1, 0 );
        SET_VEHICLE_AS_ENTITY_SYNC_POINT( g_U2866, sub_354() );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( sub_354(), 0, 0 ), "W_PI_PT92_Aa_H", 0 );
        ISEQ_REGISTER_ENTITY( 191130716, "player", sub_354(), 0 );
        if (GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HAND( sub_354(), 1, 0 ) ))
        {
            REMOVE_PED_WEAPON( sub_354(), GET_WEAPON_FROM_HAND( sub_354(), 1, 0 ) );
        }
    }
    CUTSCENE_REGISTER_ISEQ( 191130716 );
    CUTSCENE_REGISTER_ISEQ( -931023773 );
    CUTSCENE_REGISTER_ISEQ( 1476011597 );
    CUTSCENE_REGISTER_ISEQ( 2128723147 );
    sub_30070( g_U2777, 2128723147, "giovanna" );
    sub_30070( l_U333[0], 2128723147, "CS1" );
    sub_30070( l_U333[1], 2128723147, "CS2" );
    sub_30070( l_U333[2], 2128723147, "CS3" );
    sub_30070( l_U333[3], 2128723147, "CS4" );
    sub_30070( l_U333[4], 2128723147, "CS5" );
    if (NOT (IS_VEHICLE_DEAD( l_U318 )))
    {
        FREEZE_VEHICLE_POSITION( l_U318, 1 );
        REGISTER_VEHICLE_PRE_SEAMLESS_CUTSCENE( l_U318, "heli_cs", 0 );
    }
    if (NOT (IS_VEHICLE_DEAD( g_U2866 )))
    {
        FREEZE_VEHICLE_POSITION( g_U2866, 1 );
        REGISTER_VEHICLE_PRE_SEAMLESS_CUTSCENE( g_U2866, "heli_luxury", 0 );
    }
    if (NOT (IS_PED_DEAD( g_U2777 )))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( g_U2777, "Giov_Club_B", 0 );
    }
    if (NOT (IS_PED_DEAD( g_U2749 )))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( g_U2749, "Pass_Club_H", 0 );
        CUTSCENE_REGISTER_PED_ATTACH_TO_VEHICLE( g_U2749, g_U2866, 0, -0.61500000, 1.48000000, 1.55500000, 0.00000000, 0.00000000, 1, 0 );
        sub_30070( g_U2749, 1476011597, "passos" );
    }
    if (NOT (IS_PED_DEAD( g_U2763 )))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( g_U2763, "Marc_Casu", 0 );
        CUTSCENE_REGISTER_PED_ATTACH_TO_VEHICLE( g_U2763, g_U2866, 0, 0.67600000, 1.52300000, 1.50300000, 0.00000000, 0.00000000, 1, 0 );
        sub_30070( g_U2763, -931023773, "marcello" );
    }
    if (NOT (IS_PED_DEAD( l_U333[0] )))
    {
        CUTSCENE_REGISTER_PED_TELEPORT( l_U333[0], l_U339[0]._fU0, l_U339[0]._fU12 );
    }
    if (NOT (IS_PED_DEAD( l_U333[4] )))
    {
        CUTSCENE_REGISTER_PED_TELEPORT( l_U333[4], l_U339[4]._fU0, l_U339[4]._fU12 );
    }
    if (NOT (IS_PED_DEAD( l_U333[3] )))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U333[3], "G_CS_NCSM_B1", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U333[3], 0, 0 ), "W_SB_Uzi_Aa_H", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( l_U333[3], l_U339[3]._fU0, l_U339[3]._fU12 );
    }
    if (NOT (IS_PED_DEAD( l_U333[1] )))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U333[1], "G_CS_NCSM_B1^2", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U333[1], 0, 0 ), "W_PI_38_Ba_H", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( l_U333[1], l_U339[1]._fU0, l_U339[1]._fU12 );
    }
    if (NOT (IS_PED_DEAD( l_U333[2] )))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U333[2], "G_CS_NCSM_B1^1", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U333[2], 0, 0 ), "W_SB_Uzi_Aa_H^1", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( l_U333[2], l_U339[2]._fU0, l_U339[2]._fU12 );
    }
    CUTSCENE_FORCE_GAMEPLAY_HEADING_PITCH_UPDATE();
    CUTSCENE_ENABLE_SKIP( 0 );
    sub_2134( "MF", "P_RS1_02_02_REGISTER - END", 0 );
    return;
}

void sub_30070(unknown uParam0, unknown uParam1, unknown uParam2)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        ISEQ_REGISTER_ENTITY( uParam1, uParam2, uParam0, 0 );
    }
    return;
}

void sub_31191()
{
    if (l_U452._fU52 == 1)
    {
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        SET_CAMERA_OVERRIDE( "RAIL_HELI_CAMERA", "RAIL_HELI_CAMERA_AIM", 0, 1, 1 );
        sub_31283( ref g_U3297, 1 );
        sub_31283( ref g_U3304, 1 );
        g_U2655 = 1;
    }
    if (NOT l_U316)
    {
        if (GET_CUTSCENE_TIME_MS() > 7730)
        {
            sub_2134( "MF", "SMASHING GLASS!", 0 );
            SMASH_GLASS_IN_RADIUS( -42.79000000, 107.99000000, -0.10000000, 2.00000000, 1.00000000 );
            l_U316 = 1;
        }
    }
    if (NOT l_U314)
    {
        if (GET_CUTSCENE_TIME_MS() > 58400)
        {
            sub_2134( "MF", "Music Cue: 4.2A", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NIGHTCLUB_SUSPENSE", "NIGHTCLUB_01_2", "NIGHTCLUB_01_2", 0, 7000, -1, -1082130432, 0 );
            l_U314 = 1;
        }
    }
    if (NOT l_U315)
    {
        if (GET_CUTSCENE_TIME_MS() > 83000)
        {
            sub_2134( "MF", "Musc Cue: 4.2B", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NIGHTCLUB_SUSPENSE", "NIGHTCLUB_01_1_2", "NIGHTCLUB_01_1_2", 0, 4000, -1, -1082130432, 0 );
            CUTSCENE_ENABLE_SKIP( 1 );
            l_U315 = 1;
        }
    }
    sub_31880();
    if (NOT (IS_VEHICLE_DEAD( l_U318 )))
    {
        SET_VEHICLE_ENGINE_ON( l_U318, 1, 1 );
        SET_HELI_BLADES_FULL_SPEED( l_U318 );
    }
    return;
}

void sub_31283(int iParam0, int iParam1)
{
    if ((sub_31295( iParam0 )) == 0)
    {
        sub_31361( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    return;
}

int sub_31295(int iParam0)
{
    int iVar3;

    iVar3 = DOES_OBJECT_OF_TYPE_EXIST_AT_COORDS( iParam0->_fU4, 1.00000000, iParam0->_fU0 );
    if (iVar3 == 1)
    {
        return 1;
    }
    return 0;
}

void sub_31361(unknown uParam0)
{
    (uParam0^) = {(uParam0^)};
    return;
}

void sub_31880()
{
    if (NOT (IS_VEHICLE_DEAD( g_U2866 )))
    {
        SET_VEHICLE_ENGINE_ON( g_U2866, 1, 1 );
        SET_HELI_BLADES_FULL_SPEED( g_U2866 );
    }
    return;
}

int sub_31992()
{
    return 1;
}

void sub_32009()
{
    int I;

    sub_32056( 49.08000000, -30.61000000, 94.26000000, 90, 2128723147, "giovanna", 0 );
    if (NOT (ISEQ_QUERY_STATE( 2128723147, 3 )))
    {
        sub_28708( 70, 0.15000000, 1400.25000000 );
        sub_32562();
    }
    sub_32790();
    sub_32938( 191130716, "player" );
    sub_33553();
    UNPAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2866 );
    CAMERA_POINT_AT_COORD( 51.95000000, -20.77000000, 96.25000000, 50000 );
    FREEZE_VEHICLE_POSITION( g_U2866, 0 );
    sub_34197( g_U2777, g_U2764._fU0, g_U2764._fU12 );
    SET_PLAYBACK_SPEED( g_U2866, 0.15000000 );
    PLAY_SCRIPT_STREAM_FROM_VEHICLE( g_U2866, g_U2867 );
    sub_2134( "MF", "Music Cue: 6.1", 0 );
    AUDIO_MUSIC_FORCE_TRACK( "NIGHTCLUB_SUSPENSE", "NIGHTCLUB_01_1_2_4", "", 0, 1000, -1, -1082130432, 0 );
    if (NOT (IS_PED_DEAD( l_U333[4] )))
    {
        SET_PED_VISIBLE( l_U333[4], 1 );
    }
    for ( I = 0; I < l_U333; I++ )
    {
        SET_BLOCKING_OF_PED_TARGETTING( l_U333[I], 0 );
        CLEAR_PED_TASKS( l_U333[I] );
        REGISTER_TARGET( l_U333[I], sub_354() );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U333[I], 0 );
        TASK_SHOOT_AT_PED( l_U333[I], sub_354(), -1, 0, 1, 0, 0 );
    }
    CAMERA_PLAY_ANIMATED( "LEVEL_S_CLUB_CP_06_HP", "B_OUT_NC_RS_START_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
    return;
}

void sub_32056(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, boolean bParam6)
{
    sub_24830( ref g_U2764, uParam0, uParam3, 1421546599, 5, 2, 0, 0, 0 );
    if (NOT (DOES_PED_EXIST( g_U2777 )))
    {
        g_U2777 = sub_25652( ref g_U2764 );
    }
    if (NOT (IS_PED_DEAD( g_U2777 )))
    {
        sub_220( "Setting Giovanna crap" );
        sub_32173( ref g_U2777 );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( g_U2777, 1 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( g_U2777, 1 );
        SET_BULLET_CAM_PREF( g_U2777, "ALL_F_06_FAILSAFE", "ALL_F_06_FAILSAFE", "ALL_F_06_FAILSAFE", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
        SET_PED_AS_ONE_SHOT_KILL( g_U2777, 1 );
        SET_PED_DIES_WHEN_INJURED( g_U2777, 1 );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( g_U2777, 1 );
        RESET_PED_GORE( g_U2777 );
        SET_COLLISION_BETWEEN_PEDS( g_U2777, 0 );
        SET_PED_VALIDATE_BULLET_CAM_HIT( g_U2777, 0 );
        SET_PED_USES_DYING_ANIM( g_U2777, 0 );
        if (NOT (ISEQ_QUERY_STATE( uParam4, 3 )))
        {
            sub_30070( g_U2777, uParam4, uParam5 );
            if (bParam6)
            {
                ISEQ_START( uParam4 );
            }
        }
    }
    return;
}

void sub_32173(unknown uParam0)
{
    unknown uVar3;

    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        CLEAR_PED_TASKS_IMMEDIATELY( (uParam0^) );
        OPEN_SEQUENCE_TASK( ref uVar3 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
        TASK_STAND_STILL( 0, -1 );
        CLOSE_SEQUENCE_TASK( uVar3 );
        TASK_PERFORM_SEQUENCE( (uParam0^), uVar3 );
        CLEAR_SEQUENCE_TASK( uVar3 );
    }
    return;
}

void sub_32562()
{
    sub_2134( "MF", "P_RS1_START_VIG_12 - START", 0 );
    sub_30070( l_U333[0], 2128723147, "CS1" );
    sub_30070( l_U333[1], 2128723147, "CS2" );
    sub_30070( l_U333[2], 2128723147, "CS3" );
    sub_30070( l_U333[3], 2128723147, "CS4" );
    sub_30070( l_U333[4], 2128723147, "CS5" );
    ISEQ_START( 2128723147 );
    sub_2134( "MF", "P_RS1_START_VIG_12 - END", 0 );
    return;
}

void sub_32790()
{
    sub_2134( "MF", "P_RS1_START_CS_HELI - START", 0 );
    sub_29062( l_U318, 304, 1065353216, 0, 0 );
    SKIP_TIME_IN_PLAYBACK_RECORDED_VEHICLE( l_U318, 2500 );
    sub_2134( "MF", "P_RS1_START_CS_HELI - END", 0 );
    return;
}

void sub_32938(unknown uParam0, unknown uParam1)
{
    sub_220( "P_SETUP_PLAYER" );
    if (NOT (IS_PED_DEAD( sub_354() )))
    {
        SET_PED_DUCKING( sub_354(), 0 );
        SET_PED_INVINCIBLE( sub_354(), 1 );
        SET_ADRENALINE_AMT( 0.75000000 );
        CLEAR_PED_TASKS( sub_354() );
        SET_PED_HEALTH( sub_354(), GET_PED_MAX_HEALTH( sub_354() ), 0 );
        if (NOT (IS_PED_ATTACHED_TO_ANY_VEHICLE( sub_354() )))
        {
            if (NOT (IS_VEHICLE_DEAD( g_U2866 )))
            {
                ATTACH_PED_TO_VEHICLE( sub_354(), g_U2866, 0, 0.56600000, 0.00000000, 0.80400000, -90.00000000, 0.00000000, 1, 0, 0, 1 );
                SET_VEHICLE_AS_ENTITY_SYNC_POINT( g_U2866, sub_354() );
            }
        }
        SET_PED_CAN_RAGDOLL( sub_354(), 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        ENABLE_HIT_DETECTION( 0 );
        ENABLE_LAST_MAN_STANDING( 0 );
        SET_SILHOUETTE_ACTIVE( 0 );
        SET_RAIL_RELATIVE_DIR( 2, 0 );
        SET_PLAYER_COMBAT_TIMER_MODE( 1 );
        PLAYER_SET_AIM_MODE( 2 );
        AUDIO_SET_PED_FOOTSTEPS_ON( 0 );
        SET_HOLSTER_VISIBLE( sub_354(), 0, 0 );
        SET_HOLSTER_VISIBLE( sub_354(), 1, 0 );
        SET_INSTANT_FIRE_FORCED( 1 );
        SET_PED_USES_ANIMATED_DEATH( sub_354(), 1 );
        if (NOT (ISEQ_QUERY_STATE( uParam0, 3 )))
        {
            sub_2134( "MF", "Starting Player Helicopter Interactive Sequence", 0 );
            PED_ACTION_TREE_PLAY_NODE( sub_354(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
            ISEQ_REGISTER_ENTITY( uParam0, uParam1, sub_354(), 0 );
            ISEQ_START( uParam0 );
        }
        REMOVE_ALL_PED_WEAPONS( sub_354() );
        sub_8795( sub_354(), 354276007, 25000, 0, 0 );
        SET_CAMERA_OVERRIDE( "RAIL_HELI_CAMERA", "RAIL_HELI_CAMERA_AIM", 0, 1, 1 );
    }
    return;
}

void sub_33553()
{
    sub_24830( ref g_U2736, 55.11000000, -24.06000000, 94.27000000, 0.00000000, 817667075, 26, 6, 0, 0, 1 );
    sub_24830( ref g_U2750, 54.04000000, -24.06000000, 94.27000000, 0.00000000, -383356854, 26, 6, 0, 0, 1 );
    if (NOT (ISEQ_IS_LOADED( -931023773 )))
    {
        ISEQ_REQUEST( -931023773 );
    }
    if (NOT (ISEQ_IS_LOADED( 1476011597 )))
    {
        ISEQ_REQUEST( 1476011597 );
    }
    if (NOT (DOES_PED_EXIST( g_U2763 )))
    {
        g_U2763 = sub_25652( ref g_U2750 );
    }
    if (NOT (IS_PED_DEAD( g_U2763 )))
    {
        sub_32173( ref g_U2763 );
        SET_PED_INVINCIBLE( g_U2763, 1 );
        DETACH_PED( g_U2763, 1 );
        if (NOT (IS_VEHICLE_DEAD( g_U2866 )))
        {
            ATTACH_PED_TO_VEHICLE( g_U2763, g_U2866, 0, 0.67600000, 1.52300000, 1.50300000, 0.00000000, 0.00000000, 1, 0, 0, 1 );
        }
    }
    if (NOT (DOES_PED_EXIST( g_U2749 )))
    {
        g_U2749 = sub_25652( ref g_U2736 );
    }
    if (NOT (IS_PED_DEAD( g_U2749 )))
    {
        sub_32173( ref g_U2749 );
        SET_PED_INVINCIBLE( g_U2749, 1 );
        DETACH_PED( g_U2749, 1 );
        if (NOT (IS_VEHICLE_DEAD( g_U2866 )))
        {
            ATTACH_PED_TO_VEHICLE( g_U2749, g_U2866, 0, -0.61500000, 1.48000000, 1.55500000, 0.00000000, 0.00000000, 1, 0, 0, 1 );
        }
    }
    if (NOT (ISEQ_QUERY_STATE( -931023773, 3 )))
    {
        sub_30070( g_U2763, -931023773, "marcello" );
        ISEQ_START( -931023773 );
    }
    if (NOT (ISEQ_QUERY_STATE( 1476011597, 3 )))
    {
        sub_30070( g_U2749, 1476011597, "passos" );
        ISEQ_START( 1476011597 );
    }
    return;
}

void sub_34197(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

int sub_34625()
{
    if (l_U452._fU52)
    {
        if (NOT sub_34649())
        {
            DO_SCREEN_FADE_IN( 100 );
        }
    }
    sub_31880();
    sub_34885();
    if (NOT l_U317)
    {
        if (CAMERA_ANIMATED_CURRENT_TIME() > ((CAMERA_ANIMATED_LENGTH( "LEVEL_S_CLUB_CP_06_HP", "B_OUT_NC_RS_START_CAM" )) - 1000))
        {
            CAMERA_ANIMATED_STOP( 1000, 1 );
            l_U317 = 1;
        }
    }
    if ((ISEQ_QUERY_ENTITY_STATE( 191130716, "player", 6 )) || (ISEQ_QUERY_ENTITY_STATE( 191130716, "player", 5 )))
    {
        return 1;
    }
    return 0;
}

int sub_34649()
{
    if (l_U272)
    {
        sub_2134( "CO", "F_IMAGEFX_FADE_IN: IMAGEFX START", 0 );
        START_PANEL_WIPE( 0, 6 );
        PLAY_IMAGEFX( "BULLETCAM_IMPACT", 3, 1 );
        PLAY_IMAGEFX( "BLACK_FADE_UP_FAST_01", 3, 1 );
        DO_SCREEN_FADE_IN( 0 );
        l_U272 = 0;
        return 1;
        break;
    }
    sub_2134( "CO", "F_IMAGEFX_FADE_IN: NORMAL START", 0 );
    return 0;
}

void sub_34885()
{
    if (NOT l_U6._fU20)
    {
        sub_2134( "MF", "INITIAL HELI RAIL CAM SHAKE...", 0 );
        SHAKE_GAMEPLAY_CAM( sub_34950(), l_U16 );
        sub_35008( ref l_U6, l_U15 );
    }
    if (sub_1938( ref l_U6 ))
    {
        SHAKE_GAMEPLAY_CAM( sub_34950(), l_U16 );
        sub_35008( ref l_U6, l_U15 );
    }
    return;
}

string sub_34950()
{
    return "MEDIUM_EXPLOSION_SHAKE";
}

void sub_35008(unknown uParam0, unknown uParam1)
{
    sub_611( uParam0, uParam1, 1, 0 );
    sub_935( uParam0 );
    return;
}

void sub_35256(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    sub_2134( "MSWW", "CutSys_CreateCutsceneWithBlendOut", "###" );
    return sub_35381( uParam0, uParam1, uParam2, uParam3, uParam4, uParam5, uParam9, 1, uParam6, uParam7, 0, 35341, 35359, uParam8 );
}

void sub_35341()
{
    return;
}

int sub_35359()
{
    return 1;
}

void sub_35381(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13)
{
    iParam0->_fU0 = uParam1;
    iParam0->_fU8 = uParam2;
    iParam0->_fU12 = uParam3;
    iParam0->_fU16 = uParam4;
    iParam0->_fU20 = uParam5;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU32 = uParam8;
    iParam0->_fU36 = uParam9;
    iParam0->_fU40 = uParam10;
    iParam0->_fU44 = uParam11;
    iParam0->_fU48 = uParam12;
    iParam0->_fU52 = 1;
    iParam0->_fU56 = uParam13;
    iParam0->_fU60 = 1;
    iParam0->_fU64 = 1;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = 0;
    iParam0->_fU76 = "Pants";
    iParam0->_fU80 = "Pants";
    iParam0->_fU84 = {0, 0, 0};
    iParam0->_fU100 = 1;
    iParam0->_fU104 = 1;
    return (iParam0^);
}

void sub_35698(int iParam0)
{
    int iVar3;
    int Result;
    unknown uVar5;

    iVar3 = iParam0->_fU4;
    Result = 0;
    switch (iParam0->_fU4)
    {
        case 0: break;
        case 1:
        if (IS_ARCADE_MODE_ACTIVE())
        {
            sub_2134( "AT", "ARCADE MODE ACTIVE. SKIPPING BINK STATE.", "###" );
            iParam0->_fU4 = 2;
        }
        else if (iParam0->_fU52)
        {
            sub_2134( "AT", "Setting CUTSCENE_SET_WAIT_FOR_MOVIE.", "###" );
            CUTSCENE_SET_WAIT_FOR_MOVIE( 9 );
            SET_TRANSITION_MOVIE_SKIPPABLE( 0 );
            iParam0->_fU96 = 0;
        }
        if (NOT iParam0->_fU96)
        {
            if (GET_NUMBER_OF_STREAMING_REQUESTS() == 0)
            {
                if (IS_SCREEN_FADED_OUT())
                {
                    DO_SCREEN_FADE_IN( 0 );
                }
                sub_2134( "AT", "Streaming requests complete! Cutscene can be skipped!", "###" );
                SET_TRANSITION_MOVIE_SKIPPABLE( 1 );
                iParam0->_fU96 = 1;
                break;
                iParam0->_fU12;
                break;
            }
        }
        if ((NOT IS_TRANSITION_MOVIE_PLAYING()) || (NOT CUTSCENE_IS_WAITING_FOR_MOVIE()))
        {
            sub_2134( "AT", "Bink is complete! Playing cutscene!", "###" );
            iParam0->_fU4 = 5;
        }
        break;
        case 2:
        if (NOT HAS_CUTSCENE_LOADED())
        {
            sub_2134( "MSWW", "CutSys reports cutscene not already loaded.", "###" );
        }
        else if ((NOT (CUTSCENE_IS_LOADED( iParam0->_fU0 ))) AND (HAS_CUTSCENE_LOADED()))
        {
            sub_2134( "MSWW", "CutSys reports wrong cutscene is loaded.", "###" );
            CLEAR_NAMED_CUTSCENE( "ThisStringDoesNothing" );
            break;
        }
        if (CUTSCENE_IS_LOADED( iParam0->_fU0 ))
        {
            iParam0->_fU4 = 4;
        }
        else if (NOT CUTSCENE_IS_LOADING())
        {
            sub_15792( iParam0->_fU0, 0 );
            sub_2134( "MSWW", "CutSys trying to load cutscene.", "###" );
        }
        break;
        case 4:
        if (iParam0->_fU8)
        {
            sub_36565( iParam0->_fU60, 0, 0, iParam0->_fU104 );
            if (iParam0->_fU40)
            {
                iParam0->_fU4 = 3;
                break;
                iParam0->_fU44;
                break;
            }
            else
            {
                iParam0->_fU4 = 5;
                break;
                iParam0->_fU12;
                break;
            }
        }
        break;
        case 3:
        if (iParam0->_fU48)
        {
            iParam0->_fU4 = 5;
            break;
            iParam0->_fU12;
            break;
        }
        break;
        case 5:
        sub_36565( 1, 0, 0, iParam0->_fU104 );
        if (NOT iParam0->_fU100)
        {
            CUTSCENE_ENABLE_SKIP( 0 );
        }
        sub_2134( "MSWW", "CUTSCENE SYSTEM STARTING CUTSCENE!", "###" );
        START_SEAMLESS_CUTSCENE();
        if (iParam0->_fU24)
        {
            CUTSCENE_DISABLE_FADE_IN_GAME_AT_END( 1 );
        }
        iParam0->_fU4 = 6;
        break;
        case 6:
        if (iParam0->_fU52)
        {
            DO_SCREEN_FADE_IN( iParam0->_fU56 );
        }
        if (HAS_CUTSCENE_FINISHED())
        {
            if (iParam0->_fU68)
            {
                if (WAS_CUTSCENE_SKIPPED())
                {
                    if (iParam0->_fU72)
                    {
                        uVar5 = GET_INTERIOR_FROM_NAME( iParam0->_fU76, 0 );
                        SET_INTERIOR_ACTIVE( uVar5, 1, 0 );
                        LOAD_SCENE_FOR_ROOM_BY_KEY( uVar5, GET_HASH_KEY( iParam0->_fU80 ) );
                    }
                    else
                    {
                        LOAD_SCENE( iParam0->_fU84 );
                    }
                }
            }
            if (iParam0->_fU64)
            {
                sub_37093( 1 );
            }
            if (iParam0->_fU28)
            {
                iParam0->_fU4 = 8;
                break;
                iParam0->_fU32;
                break;
            }
            else
            {
                iParam0->_fU4 = 9;
            }
        }
        break;
        break;
        iParam0->_fU16;
        break;
        case 7:
        sub_36565( 1, 0, 0, iParam0->_fU104 );
        iParam0->_fU4 = 8;
        break;
        break;
        iParam0->_fU32;
        break;
        case 8:
        if (iParam0->_fU36)
        {
            iParam0->_fU4 = 9;
        }
        break;
        case 9:
        if (iParam0->_fU20)
        {
            sub_37442( 1, 1 );
            iParam0->_fU4 = 0;
            Result = 1;
        }
        break;
        case 10:
        sub_37442( 1, 1 );
        iParam0->_fU4 = 0;
        Result = 1;
        break;
    }
    if (iParam0->_fU4 != iVar3)
    {
        iParam0->_fU52 = 1;
    }
    else
    {
        iParam0->_fU52 = 0;
    }
    return Result;
}

void sub_36565(int iParam0, int iParam1, unknown uParam2, boolean bParam3)
{
    END_POSTFX_BLENDER( 12, 0 );
    if (bParam3)
    {
        STOP_ALL_IMAGEFX( 0 );
    }
    SET_WIDESCREEN_BORDERS( 1, 500 );
    DISPLAY_HUD( 0 );
    if (iParam0 == 1)
    {
        if (NOT (IS_PED_DEAD( sub_354() )))
        {
            SET_PLAYER_CONTROL( sub_376(), 0, uParam2 );
            SET_PED_DUCKING( sub_354(), 0 );
            if (iParam1 == 1)
            {
                CLEAR_PED_TASKS_IMMEDIATELY( sub_354() );
            }
            SET_PED_INVINCIBLE( sub_354(), 1 );
        }
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    return;
}

void sub_37093(unknown uParam0)
{
    unknown uVar3;

    if (NOT (IS_PED_DEAD( sub_354() )))
    {
        uVar3 = GET_WEAPON_FROM_HAND( sub_354(), 0, 0 );
        if (GET_DOES_WEAPON_EXIST( uVar3 ))
        {
            SET_WEAPON_VISIBLE( uVar3, uParam0 );
        }
        uVar3 = GET_WEAPON_FROM_HAND( sub_354(), 1, 0 );
        if (GET_DOES_WEAPON_EXIST( uVar3 ))
        {
            SET_WEAPON_VISIBLE( uVar3, uParam0 );
        }
        uVar3 = GET_WEAPON_FROM_HOLSTER( sub_354(), 0 );
        if (GET_DOES_WEAPON_EXIST( uVar3 ))
        {
            SET_WEAPON_VISIBLE( uVar3, uParam0 );
        }
        uVar3 = GET_WEAPON_FROM_HOLSTER( sub_354(), 1 );
        if (GET_DOES_WEAPON_EXIST( uVar3 ))
        {
            SET_WEAPON_VISIBLE( uVar3, uParam0 );
        }
        uVar3 = GET_WEAPON_FROM_HOLSTER( sub_354(), 2 );
        if (GET_DOES_WEAPON_EXIST( uVar3 ))
        {
            SET_WEAPON_VISIBLE( uVar3, uParam0 );
        }
    }
    return;
}

void sub_37442(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD( sub_354() )))
    {
        SET_PLAYER_CONTROL( sub_376(), 1, 0 );
        SET_PED_INVINCIBLE( sub_354(), 0 );
        if (bParam0)
        {
            sub_37523();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

void sub_37523()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_354() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND( sub_354(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND( sub_354(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_354(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_354(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

void sub_37836()
{
    sub_2134( "MF", "P_START_GAMEPLAY - START", 0 );
    sub_35008( ref l_U424, 18000 );
    sub_37896();
    if (GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HAND( sub_354(), 0, 0 ) ))
    {
        ENABLE_WEAPON_ATTACHMENT( GET_WEAPON_FROM_HAND( sub_354(), 0, 0 ), 13, 1 );
        TOGGLE_WEAPON_ATTACHMENT( GET_WEAPON_FROM_HAND( sub_354(), 0, 0 ), 13, 1 );
        SET_LASER_SIGHT_ATTACHMENT( GET_WEAPON_FROM_HAND( sub_354(), 0, 0 ), -1363960247 );
    }
    SET_WEATHER_TYPE_NOW_PERSIST( "EXTRASUNNY" );
    FREEZE_TIME_OF_DAY( 22, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
    BULLET_CAMERA_TRACK_UNTIL_GROUNDED( 0 );
    sub_2134( "MF", "P_START_GAMEPLAY - END", 0 );
    return;
}

void sub_37896()
{
    SET_PLAYER_CONTROL( sub_376(), 0, 256 );
    REENABLE_PLAYER_INPUT( 17 );
    REENABLE_PLAYER_INPUT( 16 );
    REENABLE_PLAYER_INPUT( 15 );
    REENABLE_PLAYER_INPUT( 14 );
    REENABLE_PLAYER_INPUT( 6 );
    REENABLE_PLAYER_INPUT( 28 );
    REENABLE_PLAYER_INPUT( 29 );
    REENABLE_PLAYER_INPUT( 4 );
    REENABLE_PLAYER_INPUT( 19 );
    REENABLE_PLAYER_INPUT( 20 );
    return;
}

void sub_38269()
{
    sub_2134( "CCB", "P_START_SP_CHALLENGES", 0 );
    sub_2134( "CCB", "Starting the Nightclub_RS context...", 0 );
    START_CONTEXT( "Nightclub_RS" );
    sub_2134( "CCB", "Starting the Nightclub_RS1 context...", 0 );
    START_CONTEXT( "Nightclub_RS1" );
    return;
}

void sub_38565(int iParam0)
{
    iParam0->_fU36 = 1;
    return;
}

void sub_38630(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_38667( (uParam0^)[I], uParam1, uParam2, uParam3 );
    }
    return;
}

void sub_38667(unknown uParam0, float fParam1, int iParam2, boolean bParam3)
{
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;

    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        uVar6 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        if (uVar6._fU8 < fParam1)
        {
            if (iParam2 == 1)
            {
                SET_PED_HEALTH( uParam0, 0, 0 );
            }
            if (bParam3)
            {
                sub_3908( uParam0 );
            }
        }
    }
    return;
}

void sub_38787()
{
    int Result;
    int I;

    Result = 0;
    for ( I = 0; I <= 3; I++ )
    {
        Result = (IS_SCRIPTED_CONVERSATION_ONGOING( I )) || (Result);
    }
    return Result;
}

void sub_38853()
{
    if (NOT (IS_PED_DEAD( sub_354() )))
    {
        if (NOT l_U54)
        {
            if (NOT (IS_ANY_SPEECH_PLAYING( sub_354() )))
            {
                if (TIME_SINCE_LAST_MONOLOGUE() > 500)
                {
                    if (IS_PED_RELOADING( sub_354() ))
                    {
                        l_U54 = 1;
                        if ((l_U74 == 1) || ((GET_WEAPON_AMMO_IN_CLIP( GET_WEAPON_FROM_HAND( sub_354(), 0, 0 ) )) < 2))
                        {
                            sub_35008( ref l_U65, 400 );
                        }
                        else if ((GET_RANDOM_INT_IN_RANGE( 0, 100 )) < 45)
                        {
                            sub_35008( ref l_U65, 400 );
                        }
                    }
                }
            }
        }
        if (sub_1938( ref l_U65 ))
        {
            sub_39052( ref l_U55 );
            sub_39134( 0, sub_354(), "MAX", ref l_U55, 2, 0 );
            sub_39134( 1, sub_354(), "MAX", ref l_U55, 2, 0 );
            sub_39374( "SCLB_MCHWR", ref l_U55, 5, 1 );
            l_U74 = 0;
        }
        if (l_U54 == 1)
        {
            if (NOT (IS_PED_RELOADING( sub_354() )))
            {
                l_U54 = 0;
            }
        }
    }
    return;
}

void sub_39052(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

void sub_39134(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

void sub_39374(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return sub_39398( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

void sub_39398(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return sub_39453( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

int sub_39453(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT (sub_39488( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
    sub_39982( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

int sub_39488(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

void sub_39982(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

void sub_40204()
{
    if (sub_1938( ref l_U45 ))
    {
        sub_40228();
    }
    return;
}

void sub_40228()
{
    sub_2134( "MF", "P_RS_SPEECH_VIG_10 - START", 0 );
    sub_39052( ref l_U115 );
    sub_39134( 1, sub_354(), "MAX", ref l_U115, 2, 0 );
    sub_39134( 0, sub_354(), "MAX", ref l_U115, 2, 0 );
    sub_39374( "SCLB_VIG10", ref l_U115, 8, 1 );
    PED_SET_ACTION_INTENTION( sub_354(), 47, 1000, 0.00000000, 0.00000000, 0.00000000 );
    sub_2134( "MF", "P_RS_SPEECH_VIG_10 - END", 0 );
    return;
}

void sub_40445()
{
    unknown uVar2;

    if (NOT (IS_PED_DEAD( g_U2777 )))
    {
        if (NOT (IS_ANY_SPEECH_PLAYING( g_U2777 )))
        {
            if (HAS_BULLET_IMPACTED_IN_AREA( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( g_U2777 ), 1.90000000, ref uVar2 ))
            {
                if ((GET_RANDOM_INT_IN_RANGE( 0, 100 )) > 30)
                {
                    sub_40539();
                }
            }
        }
    }
    return;
}

void sub_40539()
{
    sub_2134( "MF", "P_RS_SPEECH_GVNSC1 - START", 0 );
    sub_39052( ref l_U105 );
    sub_39134( 1, g_U2777, "GIOVANNA", ref l_U105, 2, 0 );
    sub_39134( 0, sub_354(), "MAX", ref l_U105, 2, 0 );
    sub_39374( "SCLB_GVNSC1", ref l_U105, 8, 1 );
    sub_2134( "MF", "P_RS_SPEECH_GVNSC1 - END", 0 );
    return;
}

float sub_40826(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_VEHICLE_DEAD( uParam0 )))
    {
        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( uParam0 ))
        {
            return 100.00000000 * ((GET_TIME_POSITION_IN_RECORDING( uParam0 )) / (GET_TOTAL_DURATION_OF_VEHICLE_RECORDING( uParam1 )));
        }
    }
    return -1.00000000;
}

void sub_41213(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result++;
        }
    }
    return Result;
}

void sub_41304(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            return (uParam0^)[I];
        }
    }
    return nil;
}

void sub_43077()
{
    int I;

    for ( I = 0; I < l_U333; I++ )
    {
        if ((sub_43115( l_U333[I], 47 )) == 3)
        {
            sub_2134( "MF", "ACT_INT_01 REACHED! Starting scripted cam...", 0 );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U333[I], 1 );
            SET_BLOCKING_OF_PED_TARGETTING( l_U333[I], 1 );
            SET_PED_PROOFS( l_U333[I], 1, 1, 1, 1, 1 );
            CLEAR_PED_TASKS( l_U333[I] );
            REGISTER_TARGET( l_U333[I], g_U2777 );
            SET_LOCKED_TARGET( l_U333[I], g_U2777 );
            l_U310 = 10;
            sub_36565( 1, 0, 0, 1 );
            sub_43367( ref l_U333[I], 47 );
        }
    }
    return;
}

int sub_43115(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        return PED_GET_ACTION_INTENTION_STATUS( uParam0, uParam1 );
    }
    return 0;
}

void sub_43367(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        PED_FINISH_ACTION_INTENTION( (uParam0^), uParam1 );
    }
    return;
}

void sub_43671(unknown uParam0, unknown uParam1, unknown uParam2)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        PED_SET_ACTION_INTENTION( uParam0, uParam1, uParam2, g_U665 );
    }
    return;
}

void sub_44733(unknown uParam0, boolean bParam1)
{
    sub_3192( ref l_U273 );
    l_U273 = CREATE_CAM( "DEFAULT_BULLET_CAMERA", 1 );
    SETUP_BULLET_CAMERA_SCENE( l_U273, uParam0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, "", "" );
    if (bParam1)
    {
        RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    }
    return;
}

void sub_45105(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

void sub_45852()
{
    sub_2134( "MF", "P_RS1_CLEANUP_HELI_AND_PILOT - START", 0 );
    sub_3908( l_U319 );
    sub_4025( l_U318 );
    sub_2134( "MF", "P_RS1_CLEANUP_HELI_AND_PILOT - END", 0 );
    return;
}

void sub_45988()
{
    sub_2134( "MF", "P_RS1_RELEASE_HELI_ASSETS - START", 0 );
    sub_46054( 2121457570, ref g_U1108 );
    sub_46422( 304, ref g_U1903 );
    sub_46590( "veh@std", ref g_U1447 );
    sub_46590( "veh@helicopter", ref g_U1447 );
    sub_46816( "Vehicle/Vehicle_heli.act", ref g_U1964 );
    sub_2134( "MF", "P_RS1_RELEASE_HELI_ASSETS - END", 0 );
    return;
}

void sub_46054(int iParam0, unknown uParam1)
{
    int I;
    int iVar5;

    if (IS_MODEL_IN_CDIMAGE( iParam0 ))
    {
        for ( I = 0; I <= ((uParam1^) - 1); I++ )
        {
            if (((uParam1^)[I]._fU4 == 1) || (((uParam1^)[I]._fU4 == 2) || ((uParam1^)[I]._fU4 == 3)))
            {
                if ((uParam1^)[I]._fU0 == iParam0)
                {
                    iVar5 = sub_46166( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU8 );
                    if (iVar5 == -1)
                    {
                        (uParam1^)[I]._fU4 = 4;
                        return;
                    }
                    else
                    {
                        return;
                    }
                }
            }
        }
    }
    else
    {
        SCRIPT_ASSERT( "The asset is NOT in the image!!!", 0 );
    }
    return;
}

int sub_46166(int iParam0, unknown uParam1)
{
    int I;
    int Result;

    Result = -1;
    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I] == nil)
        {
            ;
        }
        else if ((uParam1^)[I] == iParam0)
        {
            (uParam1^)[I] = nil;
        }
        else if (IS_THREAD_ACTIVE( (uParam1^)[I] ))
        {
            Result = I;
        }
        else
        {
            (uParam1^)[I] = nil;
        };;;
    }
    if (NOT (Result == -1))
    {
        return Result;
    }
    return -1;
}

void sub_46422(int iParam0, unknown uParam1)
{
    int I;
    int iVar5;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if (((uParam1^)[I]._fU4 == 1) || (((uParam1^)[I]._fU4 == 2) || ((uParam1^)[I]._fU4 == 3)))
        {
            if ((uParam1^)[I]._fU0 == iParam0)
            {
                iVar5 = sub_46166( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU8 );
                if (iVar5 == -1)
                {
                    (uParam1^)[I]._fU4 = 4;
                    return;
                }
                else
                {
                    return;
                }
            }
        }
    }
    return;
}

void sub_46590(unknown uParam0, unknown uParam1)
{
    int I;
    int iVar5;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if (((uParam1^)[I]._fU32 == 1) || (((uParam1^)[I]._fU32 == 2) || ((uParam1^)[I]._fU32 == 3)))
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[I]._fU0, uParam0 ))
            {
                iVar5 = sub_46166( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU36 );
                if (iVar5 == -1)
                {
                    (uParam1^)[I]._fU32 = 4;
                    return;
                }
                else
                {
                    return;
                }
            }
        }
    }
    return;
}

void sub_46816(unknown uParam0, unknown uParam1)
{
    int I;
    int iVar5;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if (((uParam1^)[I]._fU64 == 1) || (((uParam1^)[I]._fU64 == 2) || ((uParam1^)[I]._fU64 == 3)))
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[I]._fU0, uParam0 ))
            {
                iVar5 = sub_46166( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU68 );
                if (iVar5 == -1)
                {
                    (uParam1^)[I]._fU64 = 4;
                    return;
                }
                else
                {
                    return;
                }
            }
        }
    }
    return;
}

void sub_47279()
{
    if (NOT l_U528)
    {
        START_WIDGET_GROUP( "Rail shooter cam shake" );
        ADD_WIDGET_FLOAT_SLIDER( "Shake Intensity:", ref l_U16, 0.00000000, 10.00000000, 0.10000000 );
        ADD_WIDGET_INT_SLIDER( "Shake Repeat Delay", ref l_U15, 0, 1000, 10 );
        STOP_WIDGET_GROUP();
        l_U528 = 1;
    }
    return;
}

void sub_47460()
{
    sub_220( "P_RELEASE_RS1_ASSETS" );
    sub_47504( ref l_U17, ref g_U1108 );
    sub_46054( -1139974910, ref g_U1108 );
    sub_46054( 2121457570, ref g_U1108 );
    sub_47600( -1313172978, ref g_U1350 );
    sub_47600( 191130716, ref g_U1350 );
    sub_47600( -931023773, ref g_U1350 );
    sub_47600( 1476011597, ref g_U1350 );
    sub_47600( 2128723147, ref g_U1350 );
    sub_47600( -1999590465, ref g_U1350 );
    sub_47600( -754727277, ref g_U1350 );
    sub_47600( 1082088136, ref g_U1350 );
    sub_47600( 1210507618, ref g_U1350 );
    sub_47600( -1793275080, ref g_U1350 );
    sub_46422( 70, ref g_U1903 );
    sub_46422( 304, ref g_U1903 );
    sub_46590( "LEVEL_S_CLUB_CP_06", ref g_U1447 );
    sub_46590( "LEVEL_S_CLUB_CP_06_HP", ref g_U1447 );
    sub_48045( 354276007, ref g_U1301 );
    sub_48045( 406496141, ref g_U1301 );
    sub_46590( "veh@std", ref g_U1447 );
    sub_46590( "veh@helicopter", ref g_U1447 );
    sub_46816( "Vehicle/Vehicle_heli.act", ref g_U1964 );
    return;
}

void sub_47504(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_46054( (uParam0^)[I], uParam1 );
    }
    return;
}

void sub_47600(int iParam0, unknown uParam1)
{
    int I;
    int iVar5;

    if (ISEQ_DOES_EXIST( iParam0 ))
    {
        for ( I = 0; I <= ((uParam1^) - 1); I++ )
        {
            if (((uParam1^)[I]._fU4 == 1) || (((uParam1^)[I]._fU4 == 2) || ((uParam1^)[I]._fU4 == 3)))
            {
                if ((uParam1^)[I]._fU0 == iParam0)
                {
                    iVar5 = sub_46166( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU8 );
                    if (iVar5 == -1)
                    {
                        (uParam1^)[I]._fU4 = 4;
                        return;
                    }
                    else
                    {
                        return;
                    }
                }
            }
        }
    }
    else
    {
        SCRIPT_ASSERT( "The eTempAssetName ISEQ is NOT valid!!!", 0 );
    }
    return;
}

void sub_48045(int iParam0, unknown uParam1)
{
    int I;
    int iVar5;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if (((uParam1^)[I]._fU4 == 1) || (((uParam1^)[I]._fU4 == 2) || ((uParam1^)[I]._fU4 == 3)))
        {
            if ((uParam1^)[I]._fU0 == iParam0)
            {
                iVar5 = sub_46166( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU8 );
                if (iVar5 == -1)
                {
                    (uParam1^)[I]._fU4 = 4;
                    return;
                }
                else
                {
                    return;
                }
            }
        }
    }
    return;
}

