void main()
{
    l_U0 = 1;
    l_U1 = 144;
    l_U2 = 0;
    l_U3 = 1;
    l_U4 = 0;
    l_U5 = 1.00000000;
    l_U6 = -5.00000000;
    l_U7 = 0;
    l_U8 = 0;
    l_U9 = 0;
    l_U13 = 42;
    l_U14 = 0;
    l_U15 = 0;
    l_U16 = 0;
    l_U17 = 0;
    l_U18 = 0;
    l_U19 = 90.00000000;
    l_U20 = {0.00000000, 0.00000000, 0.00000000};
    l_U23 = {0.00000000, 0.00000000, 0.00000000};
    l_U26 = 0;
    l_U27 = 0;
    l_U28 = 0;
    l_U29 = 0;
    l_U30 = 0;
    l_U31 = 0;
    l_U32 = nil;
    l_U33 = {0.00000000, 0.00000000, 0.00000000};
    l_U36 = 0;
    l_U37 = 0;
    l_U38 = 0;
    l_U85 = "PED_DEF";
    l_U127 = 1.00000000;
    l_U139 = 0;
    l_U180 = 0;
    l_U200 = -1;
    l_U201 = {64536, 64536, 64536};
    l_U204 = 1;
    l_U1212 = 1.00000000;
    l_U1213 = 0;
    l_U1214 = 0;
    l_U1215 = {51.00000000, -14.00000000, 50.00000000};
    l_U1218 = {75.00000000, -48.00000000, 65.00000000};
    l_U1221 = {-19.45000000, 0.00000000, 49.15000000};
    l_U1224 = {-23.00000000, 0.00000000, 48.00000000};
    l_U1227 = 50.00000000;
    l_U1228 = 13500;
    l_U1230 = 0;
    l_U1232 = 1;
    l_U1233 = 0;
    l_U1234 = 1;
    l_U1235 = 0;
    l_U1246 = 1;
    l_U1265 = 0;
    l_U1266 = 0;
    l_U1267 = "12_06_HOTEL_concat";
    l_U1299 = 0;
    l_U1300 = 0;
    l_U1301 = 1500;
    l_U1347 = 0;
    l_U1349 = 1;
    l_U1352 = 0;
    l_U1354 = 928600325;
    l_U1403 = 150000;
    l_U1413 = 2300;
    l_U1472 = 4500;
    l_U1482 = 0;
    l_U1502 = -1;
    l_U1669 = -1;
    l_U1670 = -1;
    l_U1714 = 2500;
    l_U1724 = -1;
    l_U1725 = -1;
    l_U1726 = -1;
    l_U1745 = -1;
    l_U1746 = -1;
    l_U1747 = 6.00000000;
    l_U1748 = 3000;
    l_U2217 = -1;
    l_U2218 = -1;
    l_U2219 = -1;
    l_U2605 = 0.50000000;
    l_U2606 = 0.40000000;
    l_U2607 = 0.40000000;
    l_U2608 = 0.30000000;
    l_U2609 = 0.30000000;
    l_U2613 = 0.60000000;
    l_U2614 = 0.80000000;
    l_U2617 = 0.80000000;
    l_U2621 = 0.80000000;
    l_U2622 = 0.70000000;
    l_U2623 = {5.91000000, 8.21000000, 44.03000000};
    l_U2626 = 1.00000000;
    l_U2627 = {6.60000000, 7.60000000, 44.10000000};
    l_U2630 = 1.00000000;
    l_U2631 = {6.90000000, 8.80000000, 44.30000000};
    l_U2634 = 1.00000000;
    l_U2635 = 500;
    l_U2645 = 0.85000000;
    l_U2646 = 1.00000000;
    l_U2647 = 0.85000000;
    l_U2648 = 0.85000000;
    l_U2649 = 0.85000000;
    l_U2650 = 0.80000000;
    l_U2651 = 0.80000000;
    l_U2652 = {13.50000000, 26.50000000, 40.10000000};
    l_U2655 = 1.00000000;
    l_U2656 = 0;
    l_U2657 = {14.89120000, 27.00090000, 41.51830000};
    l_U2660 = 1.00000000;
    l_U2661 = 600;
    l_U2665 = 1844478068;
    l_U2666 = -1455579663;
    l_U2667 = -1563045636;
    l_U2668 = 1.00000000;
    l_U2669 = 1.00000000;
    l_U2674 = 1188691208;
    l_U2675 = -895442446;
    l_U2676 = 638412747;
    l_U2677 = 1.00000000;
    l_U2678 = 1.00000000;
    l_U2681 = -1911968389;
    l_U2682 = -1210755311;
    l_U2683 = 1.00000000;
    l_U2684 = {-9.50000000, 1.00000000, 41.00000000};
    l_U2687 = 1.00000000;
    l_U2688 = 700;
    l_U2693 = -1318069598;
    l_U2694 = -138770415;
    l_U2695 = 1085512198;
    l_U2696 = -2014992279;
    l_U2697 = 1.00000000;
    l_U2698 = 1.00000000;
    l_U2699 = 1.00000000;
    l_U2702 = 1379132568;
    l_U2703 = -1478959939;
    l_U2704 = 1.00000000;
    l_U2705 = {3.60000000, 41.00000000, 39.60000000};
    l_U2708 = 1.00000000;
    l_U2715 = 1954663832;
    l_U2716 = 936208156;
    l_U2717 = -127310191;
    l_U2718 = -433077730;
    l_U2719 = -1880750327;
    l_U2720 = 694618066;
    l_U2721 = 1.00000000;
    l_U2722 = 1.00000000;
    l_U2723 = 1.00000000;
    l_U2724 = 1.00000000;
    l_U2725 = 1.00000000;
    l_U2726 = {9.15000000, 31.12000000, 39.74000000};
    l_U2729 = 1.00000000;
    l_U2730 = {4.70000000, 29.60000000, 42.36000000};
    l_U2733 = 1.00000000;
    l_U2739 = -1901851883;
    l_U2740 = 712645242;
    l_U2741 = -1062877481;
    l_U2742 = 1849270784;
    l_U2743 = -237396474;
    l_U2744 = 1.00000000;
    l_U2745 = 1.00000000;
    l_U2746 = 1.00000000;
    l_U2747 = {24.84000000, 29.83000000, 42.75000000};
    l_U2750 = 1.00000000;
    l_U2751 = 1;
    l_U2770 = "12_05_HOTEL_concat";
    sub_1656( "AT", "Script s_hotel_roof.sc is starting up...", 0 );
    sub_1705();
    sub_2424( 0 );
    l_U1230 = 0;
    if (g_U854 == 10)
    {
        g_U1001 = 1;
        l_U1347 = 1;
    }
    else
    {
        l_U1347 = 3;
    }
    while (NOT IS_EXITFLAG_SET())
    {
        if (g_U855 == 10)
        {
            sub_2626();
        }
        sub_3453();
        if (l_U1352 == 0)
        {
            sub_13986();
        }
        WAIT( 0 );
    }
    sub_6015();
    sub_79629();
    SET_EXITFLAG_RESPONSE();
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "hotel_roof" );
    sub_1656( "AT", "Script s_hotel_roof.sc is terminating...", 0 );
    return;
}

void sub_1656(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    return;
}

void sub_1705()
{
    sub_1656( "AT", "SETUP_ASSET_ARRAYS start", 0 );
    l_U1355[0] = l_U1354;
    l_U1355[1] = l_U2681;
    l_U1355[2] = l_U2693;
    l_U1355[3] = l_U2702;
    l_U1355[4] = -1267912278;
    l_U1355[5] = 1550581806;
    l_U1355[6] = 1682089860;
    l_U1355[7] = l_U2715;
    l_U1355[8] = l_U2718;
    l_U1355[9] = l_U2739;
    l_U1355[10] = l_U2743;
    l_U1355[11] = l_U2665;
    l_U1355[12] = l_U2666;
    l_U1355[13] = l_U2667;
    l_U1355[14] = l_U2674;
    l_U1355[15] = l_U2675;
    l_U1355[16] = l_U2676;
    l_U1355[17] = l_U2682;
    l_U1355[18] = -367636848;
    l_U1355[19] = -985729267;
    l_U1355[20] = -2018457515;
    l_U1355[21] = -529475815;
    l_U1355[22] = 1739372840;
    l_U1355[23] = -1991423309;
    l_U1355[24] = 1340369130;
    l_U1355[25] = 1629971762;
    l_U1355[26] = 1629971762;
    l_U1355[27] = -75073551;
    l_U1355[28] = 21794980;
    l_U1355[29] = -934816225;
    l_U1355[30] = -726132516;
    l_U1355[31] = -304211046;
    l_U1355[32] = 429354730;
    l_U1355[33] = 729316143;
    l_U1355[34] = -318167782;
    l_U1355[35] = l_U2694;
    l_U1355[36] = l_U2695;
    l_U1355[37] = l_U2696;
    l_U1355[38] = l_U2703;
    l_U1355[39] = l_U2716;
    l_U1355[40] = l_U2717;
    l_U1355[41] = l_U2719;
    l_U1355[42] = l_U2720;
    l_U1355[43] = l_U2740;
    l_U1355[44] = l_U2741;
    l_U1355[45] = l_U2742;
    sub_1656( "AT", "SETUP_ASSET_ARRAYS end", 0 );
    return;
}

void sub_2424(unknown uParam0)
{
    sub_2441( -612753081, uParam0 );
    sub_2441( 1478009203, uParam0 );
    sub_2441( -1013714740, uParam0 );
    sub_2441( 514118749, uParam0 );
    sub_2441( 319712764, uParam0 );
    return;
}

void sub_2441(unknown uParam0, boolean bParam1)
{
    REQUEST_WEAPON( uParam0 );
    if (bParam1)
    {
        while ((HAS_WEAPON_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_2626()
{
    if (l_U1234 != l_U1232)
    {
        sub_1656( "TEH", "playing music:changed CUR FLAG", 0 );
        sub_2702( l_U1232 );
        sub_2702( l_U1233 );
        l_U1234 = l_U1232;
    }
    else if (l_U1235 != l_U1233)
    {
        sub_1656( "TEH", "playing music:changed NEW FLAG", 0 );
        sub_2702( l_U1232 );
        sub_2702( l_U1233 );
        l_U1235 = l_U1233;
    }
    switch (l_U1232)
    {
        case 1:
        sub_1656( "TEH", "playing music: MC_STARTUP ", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "HOTEL_SONG", "HOTEL_SONG_5_6", "", 0, 4000, -1, -1082130432, 0 );
        l_U1232 = 3;
        break;
        case 2:
        sub_1656( "TEH", "playing music: MC_CHECKPOINT_RESTART_ROOFTOP ", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "HOTEL_SONG", "HOTEL_SONG_5_6", "", 0, 4000, -1, -1082130432, 0 );
        l_U1232 = 3;
        break;
        case 3:
        if (l_U1233 == 3)
        {
            AUDIO_MUSIC_FORCE_TRACK( "HOTEL_SONG", "HOTEL_SONG_2_5_6", 0, 0, -1, -1, -1082130432, 0 );
            AUDIO_MUSIC_REQUEST_ONESHOT( "HOTEL_ONESHOT_15", 0 );
            l_U1232 = 4;
        }
        break;
        case 4:
        if (l_U1233 == 4)
        {
            if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "HOTEL_ONESHOT_15" ))
            {
                sub_1656( "MF", "CUE: 9.3 playing music: HOTEL_ONESHOT_15 ", 0 );
                AUDIO_MUSIC_PLAY_ONESHOT();
                l_U1232 = 5;
            }
        }
        break;
        case 5:
        if (l_U1233 == 5)
        {
            AUDIO_MUSIC_FORCE_TRACK( "HOTEL_SONG", "HOTEL_SONG_5", "", 0, -1, 10000, -1082130432, 0 );
            l_U1232 = 6;
        }
        break;
        case 6:
        if (l_U1233 == 6)
        {
            AUDIO_MUSIC_SUSPEND( 10000 );
            l_U1232 = 7;
        }
        break;
    }
    return;
}

void sub_2702(unknown uParam0)
{
    return;
}

void sub_3453()
{
    if (g_U855 == 10)
    {
        switch (l_U1352)
        {
            case 0:
            if (sub_3535())
            {
                l_U1352 = 1;
                sub_1656( "SBA", "RESTARTING CHECKPOINT: eFailState = FAIL_CLEANUP_ALL", 0 );
            }
            else if ((l_U1482) || (IS_PED_DEAD( sub_3807() )))
            {
                l_U1352 = 1;
                sub_1656( "AT", "eFailState = FAIL_WAITING_FOR_PLAYER", 0 );
            }
            break;
            case 1:
            if (sub_4190())
            {
                l_U1352 = 2;
            }
            else if ((sub_4230( 0 )) == 1)
            {
                l_U1352 = 2;
            }
            break;
            case 2:
            if (NOT (IS_PED_DEAD( sub_3807() )))
            {
                l_U1352 = 3;
                sub_1656( "AT", "eFailState = FAIL_CLEANUP_ALL", 0 );
            }
            break;
            case 3:
            sub_1656( "AT", "eFailState = FAIL_CLEANUP_ALL", 0 );
            if ((NOT (IS_PED_DEAD( sub_3807() ))) AND (NOT (IS_PLAYER_DEAD( sub_3829() ))))
            {
                SET_PLAYER_CONTROL( sub_3829(), 1, 0 );
                if (GET_IS_PED_FORCED_TO_WALK( sub_3807() ))
                {
                    SET_PED_FORCED_TO_WALK( sub_3807(), 0 );
                }
                SET_PED_VISIBLE( sub_3807(), 1 );
            }
            DO_SCREEN_FADE_OUT( 0 );
            sub_5803( "MISS_DEATH_FAIL_FAST_01A" );
            DESTROY_ALL_CAMS();
            RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
            AUDIO_MUSIC_SUSPEND( 500 );
            RESET_FORCED_AIM_INTENTION_DIRECTION();
            sub_6015();
            sub_8869();
            l_U1352 = 4;
            sub_1656( "AT", "eFailState = FAIL_RESTORE_PLAYER", 0 );
            break;
            case 4:
            sub_1656( "AT", "eFailState = FAIL_RESTORE_PLAYER", 0 );
            if (l_U1311._fU0)
            {
                sub_9358( ref l_U1311, sub_3807() );
            }
            l_U1352 = 5;
            sub_1656( "AT", "eFailState = FAIL_RESTART_CHECKPOINT", 0 );
            break;
            case 5:
            sub_1656( "AT", "eFailState = FAIL_RESTART_CHECKPOINT", 0 );
            l_U1347 = 3;
            l_U1349 = 0;
            l_U1482 = 0;
            l_U1232 = 2;
            l_U1352 = 0;
            sub_1656( "SP", "eFailState = FAIL_IDLE", 0 );
            break;
        }
    }
    return;
}

int sub_3535()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U0 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD( sub_3807() )))
        {
            SET_PED_FORCED_TO_WALK( sub_3807(), 0 );
            SET_PLAYER_FORCED_AIM( sub_3829(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE( sub_3829(), 1 );
            if ((IS_PED_VISIBLE( sub_3807() )) == 0)
            {
                SET_PED_VISIBLE( sub_3807(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

int sub_3807()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED( sub_3829() );
    }
    return 0;
}

void sub_3829()
{
    return GET_PLAYER_ID();
}

void sub_4190()
{
    return g_U648;
}

int sub_4230(int iParam0)
{
    iParam0 = 1;
    switch (l_U1300)
    {
        case 0:
        if (NOT (sub_4291( ref l_U1302 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_3807() )))
            {
                l_U1301 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
            sub_4401( ref l_U1302, l_U1301, 1, 1 );
            sub_4537( ref l_U1302 );
        }
        if (sub_4657( ref l_U1302 ))
        {
            sub_1656( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_3807() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD( sub_3829() )))
            {
                SET_PLAYER_CONTROL( sub_3829(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U1300 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U1300 = 2;
            }
            else
            {
                l_U1300 = 3;
            }
        }
        break;
        case 2:
        sub_1656( "NS", "Player will QUIT", 0 );
        sub_5144();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
        sub_1656( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        sub_5144();
        return 1;
        break;
    }
    return 0;
}

int sub_4291(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

void sub_4401(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

void sub_4537(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

int sub_4657(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

void sub_5144()
{
    sub_1656( "NS", "P_PostFailRetryCleanup", 0 );
    sub_5194( ref l_U1302 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD( sub_3829() )))
    {
        SET_PLAYER_CONTROL( sub_3829(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U1299 = 0;
    l_U1299 = l_U1299;
    l_U1300 = 0;
    return;
}

void sub_5194(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

void sub_5803(unknown uParam0)
{
    sub_1656( "CO", "P_IMAGEFX_STOP_BULLETCAM:  Cameras Deleted", 0 );
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    sub_5886( ref l_U1231 );
    l_U1230 = 1;
    return;
}

void sub_5886(unknown uParam0)
{
    if ((DOES_CAM_EXIST( (uParam0^) )) == 1)
    {
        if ((IS_CAM_ACTIVE( (uParam0^) )) == 1)
        {
            SET_CAM_ACTIVE( (uParam0^), 0 );
        }
        DESTROY_CAM( (uParam0^) );
    }
    (uParam0^) = nil;
    return;
}

void sub_6015()
{
    int I;

    sub_1656( "MW", "P_CLEANUP_ROOF start", 0 );
    STREAM_HELPERS_REQUEST_AT_LOC( 130.00000000, 50.00000000, 35.00000000, 0 );
    STOP_SCRIPT_STREAM( 0 );
    ENABLE_AMBIENT_ZONE( "S_HOTEL_ZONE_BUILDING_COLLAPSE", 0 );
    ENABLE_AMBIENT_STREAM( "S_HOTEL_OUTSIDE", 1 );
    ENABLE_AMBIENT_STREAM( "S_HOTEL_OUTSIDE_ROOFTOP", 0 );
    ENABLE_STATIC_EMITTER( "S_HOTEL_SE_ROOFTOP_RUMBLE_STREAM", 0 );
    ISEQ_TERMINATE( 469460336 );
    ISEQ_TERMINATE( -1844315547 );
    ISEQ_TERMINATE( -473924166 );
    RELEASE_SCRIPT_AUDIO_BANK();
    sub_6283( l_U1745, 1 );
    sub_6446( ref l_U1745 );
    sub_6283( l_U1746, 1 );
    sub_6446( ref l_U1746 );
    sub_6283( l_U1502, 1 );
    sub_6446( ref l_U1502 );
    sub_6283( l_U1724, 1 );
    sub_6446( ref l_U1724 );
    sub_6283( l_U1725, 1 );
    sub_6446( ref l_U1725 );
    sub_6283( l_U1726, 1 );
    sub_6446( ref l_U1726 );
    sub_6283( l_U2217, 1 );
    sub_6446( ref l_U2217 );
    sub_6283( l_U2218, 1 );
    sub_6446( ref l_U2218 );
    sub_6283( l_U2219, 1 );
    sub_6446( ref l_U2219 );
    sub_6283( l_U1669, 1 );
    sub_6446( ref l_U1669 );
    sub_6283( l_U1670, 1 );
    sub_6446( ref l_U1670 );
    for ( I = 0; I <= 3; I++ )
    {
        sub_6844( ref l_U1807[I] );
    }
    sub_6897();
    sub_7343();
    sub_7530();
    sub_7628();
    sub_7802();
    sub_7974();
    sub_8184();
    sub_8352( ref l_U2145 );
    sub_8386( l_U2233 );
    sub_8352( ref l_U2248 );
    sub_8352( ref l_U2361 );
    sub_8386( l_U2387 );
    if (NOT (IS_PED_DEAD( sub_3807() )))
    {
        SET_PED_PROOFS( sub_3807(), 0, 0, 0, 0, 0 );
    }
    sub_8557( g_U991 );
    sub_8615( ref l_U2011 );
    sub_8715( l_U2770 );
    sub_8715( l_U1267 );
    sub_1656( "MW", "P_CLEANUP_ROOF end", 0 );
    return;
}

void sub_6283(int iParam0, unknown uParam1)
{
    if (iParam0 != -1)
    {
        sub_1656( "MF", "P_SAFE_STOP_SOUND: Stopping Sound...", 0 );
        STOP_SOUND( iParam0, uParam1 );
    }
    else
    {
        sub_1656( "MF", "P_SAFE_STOP_SOUND: Not stopping sound (SoundID = -1)", 0 );
    }
    return;
}

void sub_6446(unknown uParam0)
{
    if ((uParam0^) != -1)
    {
        sub_1656( "MF", "P_SAFE_RELEASE_SOUND_ID: Releasing Sound...", 0 );
        RELEASE_SOUND_ID( (uParam0^) );
        (uParam0^) = -1;
    }
    else
    {
        sub_1656( "MF", "P_SAFE_RELEASE_SOUND_ID: Not RELEASING sound (SoundID != -1)", 0 );
    }
    return;
}

void sub_6844(unknown uParam0)
{
    if ((uParam0^) != 0)
    {
        REMOVE_PARTICLE_FX( (uParam0^) );
        (uParam0^) = 0;
    }
    return;
}

void sub_6897()
{
    sub_6914( l_U750._fU0 );
    sub_6914( l_U767._fU0 );
    sub_6914( l_U784._fU0 );
    sub_6914( l_U801._fU0 );
    sub_6914( l_U818[0]._fU0 );
    sub_6914( l_U818[1]._fU0 );
    sub_6914( l_U818[2]._fU0 );
    sub_6914( l_U818[3]._fU0 );
    sub_6914( l_U818[4]._fU0 );
    sub_6914( l_U818[5]._fU0 );
    sub_6914( l_U818[6]._fU0 );
    sub_6914( l_U818[7]._fU0 );
    sub_6914( l_U955[0]._fU0 );
    sub_6914( l_U955[1]._fU0 );
    sub_6914( l_U955[2]._fU0 );
    sub_6914( l_U955[3]._fU0 );
    sub_6914( l_U955[4]._fU0 );
    sub_6914( l_U955[5]._fU0 );
    sub_6914( l_U955[6]._fU0 );
    sub_6914( l_U955[7]._fU0 );
    sub_6914( l_U955[8]._fU0 );
    sub_6914( l_U955[9]._fU0 );
    sub_6914( l_U955[10]._fU0 );
    sub_6914( l_U1143[0]._fU0 );
    sub_6914( l_U1143[1]._fU0 );
    sub_6914( l_U1143[2]._fU0 );
    sub_6914( l_U1143[3]._fU0 );
    return;
}

void sub_6914(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

void sub_7343()
{
    sub_1656( "GA", "CLEAN_EXPLOSION1 start", 0 );
    sub_6844( ref l_U2656 );
    sub_6914( l_U2636 );
    sub_6914( l_U2637 );
    sub_6914( l_U2638 );
    sub_6914( l_U2639 );
    sub_6914( l_U2640 );
    sub_6914( l_U2643 );
    sub_6914( l_U2641 );
    sub_6914( l_U2642 );
    sub_6914( l_U2644 );
    sub_1656( "GA", "CLEAN_EXPLOSION1 end", 0 );
    return;
}

void sub_7530()
{
    sub_6914( l_U2610 );
    sub_6914( l_U2611 );
    sub_6914( l_U2612 );
    sub_6914( l_U2615 );
    sub_6914( l_U2616 );
    sub_6914( l_U2618 );
    sub_6914( l_U2619 );
    sub_6914( l_U2620 );
    return;
}

void sub_7628()
{
    sub_1656( "GA", "P_CLEAN_ROOFTOP_BACK_COLLAPSE start", 0 );
    sub_6914( l_U2689 );
    sub_6914( l_U2690 );
    sub_6914( l_U2691 );
    sub_6914( l_U2692 );
    sub_6914( l_U2700 );
    sub_6914( l_U2701 );
    sub_1656( "GA", "P_CLEAN_ROOFTOP_BACK_COLLAPSE end", 0 );
    return;
}

void sub_7802()
{
    sub_1656( "GA", "P_CLEAN_ROOFTOP_MID_COLLAPSE start", 0 );
    sub_6914( l_U2709 );
    sub_6914( l_U2710 );
    sub_6914( l_U2711 );
    sub_6914( l_U2712 );
    sub_6914( l_U2713 );
    sub_6914( l_U2714 );
    sub_1656( "GA", "P_CLEAN_ROOFTOP_MID_COLLAPSE end", 0 );
    return;
}

void sub_7974()
{
    sub_1656( "GA", "P_CLEAN_ROOFTOP_CORNER_EXPLOSION start", 0 );
    sub_6914( l_U2662 );
    sub_6914( l_U2663 );
    sub_6914( l_U2664 );
    sub_6914( l_U2670 );
    sub_6914( l_U2671 );
    sub_6914( l_U2672 );
    sub_6914( l_U2673 );
    sub_6914( l_U2679 );
    sub_6914( l_U2680 );
    sub_1656( "GA", "P_CLEAN_ROOFTOP_CORNER_EXPLOSION end", 0 );
    return;
}

void sub_8184()
{
    sub_1656( "GA", "P_CLEAN_ROOFTOP_HALL_COLLAPSE start", 0 );
    sub_6914( l_U2734 );
    sub_6914( l_U2735 );
    sub_6914( l_U2736 );
    sub_6914( l_U2737 );
    sub_6914( l_U2738 );
    sub_1656( "GA", "P_CLEAN_ROOFTOP_HALL_COLLAPSE end", 0 );
    return;
}

void sub_8352(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_8386( (uParam0^)[I] );
    }
    return;
}

void sub_8386(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

void sub_8557(unknown uParam0)
{
    if (IS_VEHICLE_DEAD( uParam0 ))
    {
        ;
    }
    if (DOES_VEHICLE_EXIST( uParam0 ))
    {
        DELETE_VEHICLE( ref uParam0 );
    }
    return;
}

void sub_8615(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_8648( (uParam0^)[I] );
    }
    return;
}

void sub_8648(unknown uParam0)
{
    if ((DOES_PLACEMENT_EXIST( uParam0 )) == 1)
    {
        REMOVE_PLACEMENT( uParam0 );
    }
    return;
}

void sub_8715(unknown uParam0)
{
    if ((CUTSCENE_NAMED_IS_LOADING( uParam0 )) || (CUTSCENE_IS_LOADED( uParam0 )))
    {
        sub_1656( "SBA", "Clearing cutscene:", 0 );
        sub_8784( uParam0 );
        CLEAR_NAMED_CUTSCENE( uParam0 );
    }
    return;
}

void sub_8784(unknown uParam0)
{
    return;
}

void sub_8869()
{
    sub_1656( "MF", "UNLOAD_ROOFTOP_HEAVY_GUNNER_ASSETS - START", 0 );
    sub_8952( "AMED_HEVY_CORE" );
    sub_9003( "NPC/BOSS_HeavyGunner" );
    sub_9036( 619024212 );
    sub_1656( "MF", "UNLOAD_ROOFTOP_HEAVY_GUNNER_ASSETS - END", 0 );
    return;
}

void sub_8952(unknown uParam0)
{
    REMOVE_ANIM_DICT( uParam0, 0 );
    return;
}

void sub_9003(unknown uParam0)
{
    ACTION_TREE_UNLOAD( uParam0 );
    return;
}

void sub_9036(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 1)
    {
        SET_MODEL_AS_NO_LONGER_NEEDED( uParam0 );
    }
    else
    {
        sub_8784( "[SP]### ERROR! (UnloadModel) Trying to unload a model that isn't in the img! ###" );
    }
    return;
}

void sub_9358(unknown uParam0, unknown uParam1)
{
    sub_9372( uParam0, uParam1 );
    sub_13393( uParam0 );
    return;
}

void sub_9372(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

    sub_1656( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U0)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
    sub_9556( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
        sub_10633( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 = sub_10925( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
        sub_11272( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 = sub_10925( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
        sub_11272( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 = sub_10925( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
        sub_11272( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 = sub_11557( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
        sub_11272( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 = sub_11557( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
        sub_11272( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U0 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if ((sub_12050( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
    sub_12211( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING( sub_3807(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U0)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U0 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
    sub_1656( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

void sub_9556(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 = sub_9588( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

int sub_9588(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

void sub_10633(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

void sub_10925(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                }
            }
        }
    }
    else
    {
        sub_8784( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

void sub_11272(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

void sub_11557(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                }
            }
        }
    }
    else
    {
        sub_8784( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

int sub_12050(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

void sub_12211(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 = sub_9588( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
    sub_12283( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

void sub_12283(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

void sub_13393(int iParam0)
{
    unknown uVar3;

    sub_1656( "BSW", "RESTORE_WATERBOTTLE_STATE start", 0 );
    uVar3 = sub_13449();
    if (GET_DOES_WEAPON_EXIST( uVar3 ))
    {
        SET_SUPPRESSOR_DAMAGE_LEVEL( uVar3, iParam0->_fU48 );
    }
    return;
}

void sub_13449()
{
    boolean bVar2;
    unknown Result;

    sub_1656( "BSW", "DOES_PLAYER_HAVE_WATERBOTTLE start", 0 );
    bVar2 = false;
    if (sub_13511())
    {
        Result = GET_WEAPON_FROM_SLOT( sub_3807(), 0 );
        if (GET_DOES_WEAPON_EXIST( Result ))
        {
            if ((GET_WEAPON_TYPE( Result )) == 811797242)
            {
                bVar2 = true;
            }
        }
        if (NOT bVar2)
        {
            Result = GET_WEAPON_FROM_SLOT( sub_3807(), 1 );
            if (GET_DOES_WEAPON_EXIST( Result ))
            {
                if ((GET_WEAPON_TYPE( Result )) == 811797242)
                {
                    bVar2 = true;
                }
            }
        }
    }
    if (bVar2)
    {
        return Result;
        break;
    }
    return nil;
}

int sub_13511()
{
    if (sub_13526( sub_3807() ))
    {
        return 1;
    }
    return 0;
}

int sub_13526(unknown uParam0)
{
    if ((NOT (IS_PED_DEAD( uParam0 ))) AND (DOES_PED_EXIST( uParam0 )))
    {
        return 1;
    }
    return 0;
}

void sub_13986()
{
    int iVar2;
    int iVar3;
    unknown uVar4;
    int I;
    float fVar6;
    float fVar7;
    float fVar8;
    int J;

    iVar2 = l_U1347;
    sub_14003();
    switch (l_U1347)
    {
        case 0:
        if (sub_4657( ref l_U2594 ))
        {
            DEACTIVATE_BULLET_TIME( 1, 0 );
        }
        sub_14464( ref l_U1758 );
        break;
        case 1:
        sub_1656( "AT", "eRooftopState = ROOFTOP_LEVEL_LOAD_SCRIPT_SETUP", 0 );
        sub_2424( 1 );
        if (NOT (sub_15049( ref l_U1311 )))
        {
            sub_11557( sub_3807(), -612753081, 50, 0, 0 );
            sub_10925( sub_3807(), -1013714740, 2, 200, 0 );
            sub_10925( sub_3807(), -612753081, 0, 50, 0 );
            SET_PAYNEKILLER_AMT( 4 );
            l_U1347 = 2;
            sub_1656( "AT", "eRooftopState = ROOFTOP_WAIT_FOR_PLAYER_WEAPONS", 0 );
        }
        else
        {
            l_U1347 = 3;
            sub_1656( "AT", "eRooftopState = ROOFTOP_INITIALIZE_SCRIPT_DATA", 0 );
        }
        break;
        case 2:
        if (NOT (IS_PED_DEAD( sub_3807() )))
        {
            if ((GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HOLSTER( sub_3807(), 2 ) )) AND ((GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HOLSTER( sub_3807(), 0 ) )) AND (GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HAND( sub_3807(), 0, 0 ) ))))
            {
                g_U855 = 10;
                sub_15584( ref l_U1311, g_U855, sub_3807(), g_U1020[10], g_U1123[10], g_U1158[10], g_U1193[10], 0 );
                l_U1347 = 3;
                sub_1656( "AT", "eRooftopState = ROOFTOP_INITIALIZE_SCRIPT_DATA", 0 );
            }
        }
        break;
        case 3:
        sub_1656( "AT", "eRooftopState = ROOFTOP_INITIALIZE_SCRIPT_DATA", 0 );
        sub_19453();
        sub_19922();
        sub_25500();
        SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
        l_U1347 = 4;
        sub_1656( "AT", "eRooftopState = ROOFTOP_REQUEST_ASSETS", 0 );
        break;
        case 4:
        sub_1656( "AT", "eRooftopState = ROOFTOP_REQUEST_ASSETS", 0 );
        l_U1347 = 5;
        sub_1656( "AT", "eRooftopState = ROOFTOP_LOADING_ASSETS", 0 );
        break;
        case 5:
        sub_1656( "SP", "eRooftopState = ROOFTOP_LOADING_ASSETS", 0 );
        sub_26143();
        sub_2424( 1 );
        sub_1656( "RJM", "eRooftopState = ROOFTOP_PRESPAWN_PEDS", 0 );
        l_U1347 = 6;
        break;
        case 6:
        if (l_U1348)
        {
            l_U2156 = 1;
        }
        if ((l_U2156 != 4) AND (l_U2156 != 0))
        {
            sub_27243();
        }
        if (l_U2156 == 4)
        {
            sub_29791( 10 );
            if ((NOT l_U1349) || (g_U854 == 10))
            {
                sub_30109( 1 );
                sub_26212( 1721151522, 1 );
                sub_30649();
                sub_35195( 1, 0, 0, 1 );
                sub_35354();
                sub_1656( "RJM", "eRooftopState = ROOFTOP_BLENDOUT_12_05", 0 );
                l_U1347 = 9;
            }
            else
            {
                sub_20020( ref l_U2872, 0, 0, 0, 0, 1460404455, 26, 6, 0, 0, 0 );
                l_U2871 = sub_27611( ref l_U2872 );
                sub_35410();
                sub_1656( "RJM", "eRooftopState = ROOFTOP_WAIT_TO_START_IN_FLOW", 0 );
                l_U1347 = 7;
            }
        }
        break;
        case 7:
        if (g_U1001)
        {
            sub_38210( ref l_U2145, ref l_U2871 );
            l_U1347 = 8;
            CUTSCENE_ENABLE_SKIP( 0 );
        }
        break;
        case 8:
        sub_39351( 1, 0, 0 );
        if (NOT HAS_CUTSCENE_FINISHED())
        {
            if (NOT l_U1351)
            {
                if (GET_CUTSCENE_TIME_MS() > 30000)
                {
                    sub_1656( "GA", "Requesting remaining roof assets.", 0 );
                    sub_30109( 0 );
                    l_U1351 = 1;
                }
            }
            if ((l_U1351) AND (NOT l_U1350))
            {
                if (sub_42710())
                {
                    sub_1656( "GA", "All assets loaded.  cutscene can be skipped.", 0 );
                    CUTSCENE_ENABLE_SKIP( 1 );
                    l_U1350 = 1;
                }
            }
        }
        if ((l_U2751 == 5) || ((HAS_CUTSCENE_FINISHED()) AND (l_U2751 >= 4)))
        {
            sub_42894();
            sub_8352( ref l_U2771 );
            sub_8386( l_U2871 );
            AUDIO_MUSIC_FORCE_TRACK( "HOTEL_SONG", "HOTEL_SONG_5_6", "", 0, 4000, -1, -1082130432, 0 );
            sub_30109( 1 );
            sub_41087();
            sub_30649();
            l_U1347 = 9;
            sub_1656( "AT", "eRooftopState = ROOFTOP_BLENDOUT_12_05", 0 );
        }
        break;
        case 9:
        if (l_U1348)
        {
            DO_SCREEN_FADE_IN( 0 );
            sub_44068();
            sub_42112();
        }
        else if (NOT l_U1960)
        {
            sub_45479();
            SET_PAD_SHAKE( 0, 3000, 64 );
            l_U1960 = 1;
        }
        if (NOT sub_46027())
        {
            if ((IS_BULLET_CAMERA_RUNNING( 0 )) AND (IS_DEATH_PANEL_WIPE_ALLOWED()))
            {
                DO_SCREEN_FADE_IN( 0 );
            }
        }
        sub_46277();
        if (NOT (IS_PED_DEAD( sub_3807() )))
        {
            if ((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 47 )) == 3)
            {
                sub_1656( "GA", "Making Max's gun visible.", 0 );
                SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( sub_3807(), 0, 0 ), 1 );
                PED_FINISH_ACTION_INTENTION( sub_3807(), 47 );
            }
        }
        if (sub_4657( ref l_U1483 ))
        {
            sub_46508();
            sub_47254();
        }
        if ((NOT IS_ANIMATED_CAMERA_PLAYING()) || (CAMERA_ANIMATED_CURRENT_TIME() >= ((CAMERA_ANIMATED_LENGTH( "LEVEL_S_HOTEL_CP_09", "B_OUT_12_05_HOTEL_CAM" )) - 1)))
        {
            if (g_U855 != 10)
            {
                g_U855 = 10;
                sub_15584( ref l_U1311, g_U855, sub_3807(), g_U1020[10], g_U1123[10], g_U1158[10], g_U1193[10], 0 );
            }
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( sub_3807(), 0, 0 ), 1 );
            SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U1158[10], 1065353216, 0 );
            SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U1193[10], 1065353216, 0 );
            CAMERA_FREEZE_FRAME( 1, 500, 0, 0 );
            sub_47827( l_U2145[0] );
            sub_47827( l_U2145[1] );
            sub_47827( l_U2145[3] );
            sub_42251( 1, 1 );
            for ( I = 0; I <= 3; I++ )
            {
                sub_47945( ref l_U1807[I] );
            }
            sub_1656( "RJM", "eRooftopState = ROOFTOP_FIGHT", 0 );
            l_U1347 = 10;
        }
        break;
        case 10:
        if (l_U1348)
        {
            sub_4537( ref l_U1404 );
            sub_48073( 0 );
        }
        sub_48367();
        sub_48589( ref l_U2145, 36.50000000, 0, 1 );
        sub_48589( ref l_U2248, 36.50000000, 0, 1 );
        sub_48589( ref l_U2361, 36.50000000, 0, 1 );
        sub_48768();
        sub_50816();
        if (sub_4657( ref l_U2594 ))
        {
            DEACTIVATE_BULLET_TIME( 1, 0 );
        }
        if (((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 4 )) == 1) || (((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 5 )) == 1) || ((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 3 )) == 1)))
        {
            sub_1656( "GA", "Forcing the player to prone.", 0 );
            TASK_SHOOTDODGE( sub_3807(), 1, 0, 0 );
            PED_FINISH_ACTION_INTENTION( sub_3807(), 3 );
            PED_FINISH_ACTION_INTENTION( sub_3807(), 5 );
            PED_FINISH_ACTION_INTENTION( sub_3807(), 4 );
            SET_CAMERA_OVERRIDE( "", "", 0, 1, 1 );
        }
        if (sub_4657( ref l_U1555 ))
        {
            if (((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 4 )) != 3) AND (((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 5 )) != 3) AND ((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 3 )) != 3)))
            {
                sub_1656( "GA", "Reaction didn't start, cancelling action intention.", 0 );
                PED_FINISH_ACTION_INTENTION( sub_3807(), 3 );
                PED_FINISH_ACTION_INTENTION( sub_3807(), 5 );
                PED_FINISH_ACTION_INTENTION( sub_3807(), 4 );
            }
            else
            {
                sub_1656( "GA", "Overriding camera to HOTEL_STUMBLE_CAMERA", 0 );
                SET_CAMERA_OVERRIDE( "HOTEL_STUMBLE_CAMERA", "HOTEL_STUMBLE_CAMERA", 0, 1, 1 );
            }
        }
        if (NOT l_U1492)
        {
            if (sub_51318())
            {
                if (IS_SPHERE_VISIBLE( l_U2652, 1.00000000, 0 ))
                {
                    sub_6283( l_U1502, 0 );
                    sub_6446( ref l_U1502 );
                    l_U1502 = GET_SOUND_ID();
                    PLAY_SOUND_FROM_COORD( l_U1502, "S_HOTEL_PRE_WALL_EXPLOSION", l_U2652 );
                    sub_4537( ref l_U1493 );
                    l_U1492 = 1;
                }
            }
        }
        else if (sub_4657( ref l_U1493 ))
        {
            sub_51863();
            sub_52684();
            TRIGGER_EXPLOSION_AUDIO_FROM_COORDS( "S_HOTEL_EXP_WALL_EXPLOSION", l_U2652 );
            if (NOT (IS_PED_DEAD( sub_3807() )))
            {
                fVar6 = GET_PED_HEADING( sub_3807() );
                if ((fVar6 < 225.00000000) AND (fVar6 > 100.00000000))
                {
                    sub_53139( 0 );
                }
                else
                {
                    sub_53139( 1 );
                }
            }
            sub_14672( "SMALL_EXPLOSION_SHAKE", 0.50000000 );
            SET_PAD_SHAKE( 0, l_U2661, 32 );
        }
        if (NOT l_U1671)
        {
            if (NOT (sub_51334( l_U1672 )))
            {
                sub_4537( ref l_U1715 );
                l_U1671 = 1;
            }
        }
        if (sub_4657( ref l_U1715 ))
        {
            sub_53438();
            sub_14672( "SMALL_EXPLOSION_SHAKE", 0.50000000 );
            sub_54733();
            if (sub_51334( l_U1693 ))
            {
                sub_49281();
            }
            sub_55151();
        }
        if (sub_48404( ref l_U1627, 0 ))
        {
            sub_55522();
            RELEASE_NAMED_SCRIPT_AUDIO_BANK( "SCRIPT_MISSION\S_HOTEL_ROOFTOP_RAYFIRES_01" );
            sub_30421( "SCRIPT_MISSION\S_HOTEL_ROOFTOP_RAYFIRES_02", 0 );
            l_U2250 = 1;
            sub_56009();
        }
        else if (l_U1627._fU64)
        {
            if (NOT l_U2253)
            {
                if (sub_56556())
                {
                    sub_55231( l_U2248[0] );
                    l_U2253 = 1;
                }
            }
            if (NOT l_U2216)
            {
                if (sub_56736())
                {
                    l_U1233 = 3;
                    sub_57095();
                    sub_57261();
                    sub_57602();
                    sub_58501();
                    if (NOT (IS_PED_DEAD( sub_3807() )))
                    {
                        fVar7 = GET_PED_HEADING( sub_3807() );
                        if ((fVar7 < 335.00000000) AND (fVar7 > 150.00000000))
                        {
                            sub_53139( 0 );
                        }
                        else
                        {
                            sub_53139( 1 );
                        }
                    }
                    sub_14672( "SMALL_EXPLOSION_SHAKE", 1.00000000 );
                    SET_PAD_SHAKE( 0, l_U2635, 32 );
                    if (NOT l_U2215)
                    {
                        l_U2215 = 1;
                        sub_26212( -1071978962, 0 );
                    }
                    l_U2216 = 1;
                }
            }
        }
        if ((l_U2250 != 4) AND (l_U2250 != 0))
        {
            sub_59129();
        }
        if ((NOT (IS_PED_DEAD( sub_3807() ))) AND (NOT (IS_PED_DEAD( l_U2233 ))))
        {
            if (NOT (IS_PED_DEAD( sub_3807() )))
            {
                REGISTER_TARGET( l_U2233, sub_3807() );
            }
            if ((PED_GET_ACTION_INTENTION_STATUS( l_U2233, 47 )) == 3)
            {
                sub_1656( "GA", "Killing HEAVY GUNNER exploded ped.", 0 );
                sub_47827( l_U2233 );
            }
        }
        if (sub_48404( ref l_U2194, 0 ))
        {
            sub_60084();
            RELEASE_NAMED_SCRIPT_AUDIO_BANK( "SCRIPT_MISSION\S_HOTEL_ROOFTOP_RAYFIRES_02" );
            sub_30421( "SCRIPT_MISSION\S_HOTEL_ROOFTOP_RAYFIRES_03", 0 );
        }
        if (NOT l_U2194._fU64)
        {
            if (NOT (IS_PED_DEAD( l_U2145[9] )))
            {
                if (IS_PED_VISIBLE( l_U2145[9] ))
                {
                    SET_PED_VISIBLE( l_U2145[9], 0 );
                }
            }
        }
        if (sub_48404( ref l_U2275, 0 ))
        {
            sub_24530( ref l_U1982, 0 );
            sub_60642( ref l_U1982, 1, 0 );
            sub_60708( ref l_U1982, 0 );
            sub_60774();
        }
        else if ((NOT l_U2296) AND (l_U2275._fU64))
        {
            if ((sub_61186( l_U1982, 1008981770 )) AND (sub_51334( l_U2275 )))
            {
                sub_24259( ref l_U1982, 1 );
                l_U2296 = 1;
            }
        }
        if (l_U2275._fU64)
        {
            sub_61337();
        }
        if (l_U2296)
        {
            if (NOT l_U2318)
            {
                if (l_U2296)
                {
                    if (sub_51334( l_U2297 ))
                    {
                        sub_61675();
                        sub_49281();
                        sub_49422();
                        sub_14672( "MEDIUM_EXPLOSION_SHAKE", 1065353216 );
                        sub_6283( l_U1669, 0 );
                        sub_6446( ref l_U1669 );
                        l_U1669 = GET_SOUND_ID();
                        PLAY_SOUND_FROM_OBJECT( l_U1669, "S_HOTEL_HALL_COLLAPSE_TOWER", l_U2738 );
                        sub_6283( l_U1670, 0 );
                        sub_6446( ref l_U1670 );
                        l_U1670 = GET_SOUND_ID();
                        TRIGGER_EXPLOSION_AUDIO_FROM_COORDS( "S_HOTEL_EXP_HALL_COLLAPSE", l_U2747 );
                        l_U2319 = 1;
                        sub_62496();
                        l_U2318 = 1;
                    }
                }
            }
            else
            {
                sub_62756();
            }
        }
        if ((l_U2319 != 4) AND (l_U2319 != 0))
        {
            sub_62794();
        }
        if (sub_63999())
        {
            if (sub_4657( ref l_U1404 ))
            {
                l_U1347 = 13;
                sub_1656( "AT", "eRooftopState = ROOFTOP_FAIL_COLLAPSE", 0 );
            }
        }
        if (l_U2319 == 4)
        {
            iVar3 = ((sub_64246( ref l_U2145 )) + (sub_64246( ref l_U2248 ))) + (sub_64246( ref l_U2361 ));
            if (NOT l_U2365._fU20)
            {
                if ((NOT IS_LAST_MAN_STANDING_ACTIVE()) AND (iVar3 == 0))
                {
                    sub_4537( ref l_U2365 );
                }
            }
            if (sub_64388())
            {
                if (sub_4657( ref l_U2365 ))
                {
                    sub_64504();
                    l_U1347 = 11;
                    sub_1656( "AT", "eRooftopState = ROOFTOP_NIS_HEAVY_GUNNER", 0 );
                }
            }
        }
        break;
        case 11:
        if (l_U1348)
        {
            sub_35195( 1, 0, 0, 1 );
            CAMERA_PLAY_ANIMATED( "LEVEL_S_HOTEL_CP_09", "PLGE_RIFLE_COMBAT_AIMFWD_POSE_CAM", 1, 17.10000000, 20.73000000, 46.54000000, -5.00000000, 0, 0 );
            l_U1233 = 4;
            if (NOT (IS_PED_DEAD( l_U2387 )))
            {
                CAMERA_POINT_AT_PED( l_U2387, 0 );
            }
            sub_36271( l_U2387 );
            l_U1404._fU12 += 1500;
            ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
            if ((NOT (IS_PED_DEAD( l_U2387 ))) AND (NOT (IS_PED_DEAD( sub_3807() ))))
            {
                if (sub_65373( ref l_U2407, 0 ))
                {
                    sub_35871( sub_3807(), 20.82000000, 23.96000000, 43.77000000, 130.59000000 );
                }
                if (NOT (IS_PED_DEAD( sub_3807() )))
                {
                    SET_FORCED_AIM_INTENTION_DIRECTION( sub_65609( (vector( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( l_U2387 ))) - (vector( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( sub_3807() ))) ) );
                }
            }
        }
        if (NOT IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_CLEAR_POINT_AT_TARGET();
            sub_42251( 1, 1 );
            RESET_FORCED_AIM_INTENTION_DIRECTION();
            l_U1347 = 12;
            sub_1656( "AT", "eRooftopState = ROOFTOP_GAMEPLAY_HEAVY_GUNNER", 0 );
        }
        break;
        case 12:
        if (l_U1348)
        {
            sub_4537( ref l_U2389 );
            sub_4537( ref l_U2398 );
            ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 0 );
            BULLET_CAMERA_TRACK_UNTIL_GROUNDED( 1 );
            sub_26412( l_U1267, 0 );
        }
        sub_48367();
        sub_48626( l_U2387, 44.00000000, 1, 0 );
        sub_48768();
        sub_65899( ref l_U1812 );
        sub_50816();
        if (sub_4657( ref l_U2594 ))
        {
            DEACTIVATE_BULLET_TIME( 1, 0 );
        }
        if (((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 4 )) == 1) || (((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 5 )) == 1) || ((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 3 )) == 1)))
        {
            sub_1656( "GA", "Forcing the player to prone.", 0 );
            TASK_SHOOTDODGE( sub_3807(), 1, 0, 0 );
            PED_FINISH_ACTION_INTENTION( sub_3807(), 3 );
            PED_FINISH_ACTION_INTENTION( sub_3807(), 5 );
            PED_FINISH_ACTION_INTENTION( sub_3807(), 4 );
            SET_CAMERA_OVERRIDE( "", "", 0, 1, 1 );
            if (NOT l_U2593)
            {
                l_U2593 = 1;
                sub_1656( "CCB", "Ending the HOTEL_ROOF_SHAKING context...", 0 );
                END_CONTEXT( "HOTEL_ROOF_SHAKING" );
            }
        }
        if (sub_4657( ref l_U1555 ))
        {
            if (((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 4 )) != 3) AND (((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 5 )) != 3) AND ((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 3 )) != 3)))
            {
                sub_1656( "GA", "Reaction didn't start, cancelling action intention.", 0 );
                PED_FINISH_ACTION_INTENTION( sub_3807(), 3 );
                PED_FINISH_ACTION_INTENTION( sub_3807(), 5 );
                PED_FINISH_ACTION_INTENTION( sub_3807(), 4 );
            }
            else
            {
                sub_1656( "GA", "Overriding camera to HOTEL_STUMBLE_CAMERA", 0 );
                SET_CAMERA_OVERRIDE( "HOTEL_STUMBLE_CAMERA", "HOTEL_STUMBLE_CAMERA", 0, 1, 1 );
            }
        }
        if ((NOT (IS_PED_DEAD( sub_3807() ))) AND (NOT (IS_PED_DEAD( l_U2387 ))))
        {
            REGISTER_TARGET( l_U2387, sub_3807() );
            if (sub_4657( ref l_U2389 ))
            {
                sub_1656( "GA", "Heavy gunner start firing.", 0 );
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U2387, 0 );
                TASK_COMBAT_PED( l_U2387, sub_3807() );
            }
        }
        if (NOT (IS_PED_DEAD( l_U2387 )))
        {
            if (sub_4657( ref l_U2398 ))
            {
                sub_1656( "GA", "Heavy gunner ending blanks.", 0 );
                SET_WEAPON_CHANCE_TO_FIRE_BLANKS( GET_WEAPON_FROM_HAND( l_U2387, 0, 0 ), 0 );
            }
        }
        if (NOT l_U1545)
        {
            if (sub_66772())
            {
                sub_1656( "CCB", "Starting the HOTEL_ROOF_SHAKING context...", 0 );
                START_CONTEXT( "HOTEL_ROOF_SHAKING" );
                sub_66932();
                if (NOT (IS_PED_DEAD( sub_3807() )))
                {
                    fVar8 = GET_PED_HEADING( sub_3807() );
                    if ((fVar8 < 220.00000000) AND (fVar8 > 55.00000000))
                    {
                        sub_53139( 0 );
                    }
                    else
                    {
                        sub_53139( 1 );
                    }
                }
                sub_14672( "SMALL_EXPLOSION_SHAKE", 1.00000000 );
                SET_PAD_SHAKE( 0, l_U2688, 32 );
                l_U1545 = 1;
            }
        }
        if (sub_63999())
        {
            if (sub_4657( ref l_U1404 ))
            {
                if (NOT l_U2593)
                {
                    l_U2593 = 1;
                    sub_1656( "CCB", "Ending the HOTEL_ROOF_SHAKING context...", 0 );
                    END_CONTEXT( "HOTEL_ROOF_SHAKING" );
                }
                l_U1347 = 13;
                sub_1656( "AT", "eRooftopState = ROOFTOP_FAIL_COLLAPSE", 0 );
            }
        }
        if ((NOT (sub_4291( ref l_U2887 ))) AND ((NOT (IS_BULLET_CAMERA_RUNNING( 0 ))) AND (IS_PED_DEAD( l_U2387 ))))
        {
            sub_68259( ref l_U2887, 1000 );
        }
        if (sub_4657( ref l_U2887 ))
        {
            END_CONTEXT( "HOTEL_TO_END" );
            sub_9556( l_U1311._fU52 );
            if (NOT l_U2593)
            {
                l_U2593 = 1;
                sub_1656( "CCB", "Ending the HOTEL_ROOF_SHAKING context...", 0 );
                END_CONTEXT( "HOTEL_ROOF_SHAKING" );
            }
            if (IS_ARCADE_MODE_ACTIVE())
            {
                DISPLAY_ARCADE_MODE_LEVEL_END( "s_police" );
                l_U1347 = 0;
                sub_1656( "AT", "eRooftopState = ROOFTOP_IDLE", 0 );
            }
            else
            {
                ISEQ_TERMINATE( 469460336 );
                ISEQ_TERMINATE( -1844315547 );
                ISEQ_TERMINATE( -473924166 );
                for ( J = 0; J < l_U1355; J++ )
                {
                    sub_9036( l_U1355[J] );
                }
                sub_9036( 1721151522 );
                sub_8952( "LEVEL_S_HOTEL_CP_11" );
                sub_8952( "AMED_HEVY_CORE" );
                sub_8952( "LEVEL_S_HOTEL_CP_09" );
                sub_9003( "NPC/BOSS_HeavyGunner" );
                sub_26212( -1071978962, 1 );
                sub_1656( "RJM", "Everyone's dead, going to ROOFTOP_CUTSCENE_12_06", 0 );
                l_U1233 = 5;
                SET_HIGHEST_ARCADE_LEVEL_UNLOCKED( 15 );
                REMOVE_ALL_PICKUPS_AND_PLACEMENTS_OF_TYPE( 525284907 );
                REMOVE_ALL_PICKUPS_AND_PLACEMENTS_OF_TYPE( 280965399 );
                REMOVE_ALL_PICKUPS_AND_PLACEMENTS_OF_TYPE( 1676080365 );
                REMOVE_ALL_PICKUPS_AND_PLACEMENTS_OF_TYPE( -514108743 );
                REMOVE_ALL_PICKUPS_AND_PLACEMENTS_OF_TYPE( 809028259 );
                sub_2626();
                l_U1347 = 14;
            }
        }
        break;
        case 13:
        if (l_U1348)
        {
            sub_68898();
            sub_71282();
            STREAM_HELPERS_REQUEST_AT_LOC( 130.00000000, 50.00000000, 35.00000000, 1 );
            sub_48073( 1 );
            sub_72753();
            DISPLAY_HUD( 0 );
            sub_26982( "S_HOTEL_FINAL_COLLAPSE", 1, 0 );
            sub_4537( ref l_U1414 );
        }
        sub_14464( ref l_U1423 );
        if (sub_4657( ref l_U1414 ))
        {
            sub_73026();
            sub_50389();
            sub_50508( ref l_U1423, 0 );
            sub_74093( 1, 0 );
            sub_75095();
            sub_8352( ref l_U2145 );
            sub_8386( l_U2233 );
            sub_8352( ref l_U2248 );
            sub_8352( ref l_U2361 );
            sub_8386( l_U2387 );
            sub_7343();
            sub_7530();
            sub_7628();
            sub_7802();
            sub_7974();
            sub_8184();
            sub_8557( g_U991 );
            if (NOT (IS_PED_DEAD( sub_3807() )))
            {
                SET_PED_VISIBLE( sub_3807(), 0 );
            }
            CAMERA_PLAY_ANIMATED( "LEVEL_S_HOTEL_CP_11", "MID_10_HOTEL_COLLAPSE_CAM1", 0, 0, 0, 0, 0.00000000, 0, 0 );
            sub_4401( ref l_U1473, (CAMERA_ANIMATED_LENGTH( "LEVEL_S_HOTEL_CP_11", "MID_10_HOTEL_COLLAPSE_CAM1" )) - 2000, 1, 1 );
            sub_4537( ref l_U1473 );
            PLAY_SCRIPT_STREAM_FRONTEND( 1 );
            STREAM_HELPERS_REQUEST_AT_LOC( 130.00000000, 50.00000000, 35.00000000, 0 );
            REMOVE_ALL_PICKUPS_AND_PLACEMENTS_OF_TYPE( 525284907 );
            REMOVE_ALL_PICKUPS_AND_PLACEMENTS_OF_TYPE( 280965399 );
            REMOVE_ALL_PICKUPS_AND_PLACEMENTS_OF_TYPE( 1676080365 );
            REMOVE_ALL_PICKUPS_AND_PLACEMENTS_OF_TYPE( -514108743 );
            REMOVE_ALL_PICKUPS_AND_PLACEMENTS_OF_TYPE( 809028259 );
        }
        if (l_U1414._fU16)
        {
            sub_75706();
        }
        if (sub_4657( ref l_U1473 ))
        {
            sub_75906( "MISS_DEATH_FAIL_FAST_01A", 0 );
            l_U1482 = 1;
        }
        break;
        case 14:
        if (NOT HAS_CUTSCENE_FINISHED())
        {
            if (NOT l_U2590)
            {
                sub_76136();
                l_U2590 = 1;
            }
            if (NOT l_U2591)
            {
                if (GET_CUTSCENE_TIME_MS() >= 73000)
                {
                    sub_1656( "GA", "Cleaning up all dead bodies.", 0 );
                    sub_8352( ref l_U2145 );
                    sub_8386( l_U2233 );
                    sub_8352( ref l_U2248 );
                    sub_8352( ref l_U2361 );
                    sub_8386( l_U2387 );
                    sub_6897();
                    sub_7343();
                    sub_7530();
                    sub_7628();
                    sub_7802();
                    sub_7974();
                    sub_8184();
                    l_U2591 = 1;
                }
            }
        }
        if (sub_76832( 1, 0, 0 ))
        {
            if (NOT IS_BULLET_CAMERA_TO_GAMEPLAY_ALLOWED())
            {
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
            }
            l_U1347 = 15;
        }
        break;
        case 15:
        g_U1008 = 0;
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        l_U1347 = 0;
        sub_1656( "AT", "eRooftopState = ROOFTOP_IDLE", 0 );
        break;
    }
    if (l_U1347 != iVar2)
    {
        l_U1348 = 1;
    }
    else
    {
        l_U1348 = 0;
    }
    return;
}

void sub_14003()
{
    switch (l_U2592)
    {
        case 0:
        sub_1656( "CCB", "eOldPainless - STATE_CHALLENGE_IDLE", 0 );
        l_U2592 = 1;
        break;
        case 1:
        if (l_U1347 >= 14)
        {
            if (SCRIPT_VAR_HASH_EXISTS( 1701971384 ))
            {
                SCRIPT_VAR_HASH_SET_INT( 1701971384, 1 );
            }
            else
            {
                sub_1656( "CCB", "The OldPainless script variable is NOT valid!!!", 0 );
            }
            sub_1656( "CCB", "eOldPainless - STATE_CHALLENGE_COMPLETE", 0 );
            l_U2592 = 2;
        }
        break;
        case 2: break;
    }
    return;
}

void sub_14464(int iParam0)
{
    if (iParam0->_fU172 == 1)
    {
        if (iParam0->_fU164 == 0)
        {
            sub_4401( iParam0 + 40, iParam0->_fU148, 1, 0 );
            sub_4537( iParam0 + 40 );
            if (iParam0->_fU152 > 0)
            {
                sub_4401( iParam0 + 76, iParam0->_fU152, 1, 0 );
                sub_4537( iParam0 + 76 );
            }
            iParam0->_fU164 = 1;
        }
        if (sub_4657( iParam0 + 40 ))
        {
            sub_1656( "ML", "P_HANDLE_CAM_SHAKE is shaking the camera", "---" );
            sub_14672( iParam0 + 4, iParam0->_fU36 );
            if (iParam0->_fU156 > 0)
            {
                sub_4401( iParam0 + 112, iParam0->_fU156, 1, 0 );
                sub_4537( iParam0 + 112 );
            }
        }
        if (sub_4657( iParam0 + 112 ))
        {
            sub_14672( iParam0 + 4, iParam0->_fU36 );
            sub_4401( iParam0 + 112, iParam0->_fU156, 1, 0 );
            sub_4537( iParam0 + 112 );
        }
        if (sub_4657( iParam0 + 76 ))
        {
            sub_1656( "ML", "P_HANDLE_CAM_SHAKE is done shaking the camera", "---" );
            STOP_CAM_SHAKING( GET_RENDERING_CAM(), iParam0->_fU160 );
            STOP_GAMEPLAY_CAM_SHAKING( iParam0 + 4, iParam0->_fU160 );
            sub_5194( iParam0 + 112 );
            iParam0->_fU172 = 0;
        }
    }
    return;
}

void sub_14672(unknown uParam0, unknown uParam1)
{
    SHAKE_CAM( GET_RENDERING_CAM(), uParam0, uParam1 );
    SHAKE_GAMEPLAY_CAM( uParam0, uParam1 );
    return;
}

int sub_15049(unknown uParam0)
{
    sub_1656( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U0 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U1 );
            sub_9372( uParam0, sub_3807() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

void sub_15584(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    sub_15596( uParam0 );
    sub_15713( uParam0, uParam1, uParam2, uParam3, uParam6, uParam7, uParam8, uParam9 );
    return;
}

void sub_15596(int iParam0)
{
    unknown uVar3;

    sub_1656( "BSW", "SAVE_WATERBOTTLE_STATE start", 0 );
    uVar3 = sub_13449();
    if (GET_DOES_WEAPON_EXIST( uVar3 ))
    {
        iParam0->_fU48 = GET_SUPPRESSOR_DAMAGE_LEVEL( uVar3 );
    }
    return;
}

void sub_15713(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

    sub_1656( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
        sub_1656( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
        sub_12211( iParam1 );
        sub_15972( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
            sub_16423( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
            sub_16423( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_16655( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
            sub_16423( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_16655( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_16655( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
            sub_16423( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_16655( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_16655( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_16655( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
            sub_16423( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_16655( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_16655( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_16655( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if (sub_16655( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
            sub_18213( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U1, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
    sub_1656( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

void sub_15972(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 = sub_9588( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
        sub_1656( "TEH", "Ending context", 0 );
        sub_1656( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

void sub_16423(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

void sub_16655(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

void sub_18213(int iParam0)
{
    sub_8784( "CHECKPOINT DATA" );
    sub_18252( iParam0->_fU4 );
    sub_18275( iParam0->_fU16 );
    sub_18275( iParam0->_fU20 );
    sub_18275( iParam0->_fU24 );
    sub_2702( iParam0->_fU28 );
    sub_2702( iParam0->_fU56 );
    sub_2702( iParam0->_fU60 );
    sub_2702( iParam0->_fU64 );
    sub_2702( iParam0->_fU68 );
    sub_2702( iParam0->_fU72 );
    sub_2702( iParam0->_fU76 );
    sub_2702( iParam0->_fU80 );
    sub_2702( iParam0->_fU84 );
    sub_2702( iParam0->_fU88 );
    sub_2702( iParam0->_fU92 );
    sub_18275( iParam0->_fU32 );
    sub_2702( iParam0->_fU36 );
    sub_2702( iParam0->_fU40 );
    sub_2702( iParam0->_fU44 );
    sub_18275( iParam0->_fU136 );
    sub_18510( iParam0->_fU140 );
    sub_2702( iParam0->_fU52 );
    sub_8784( "---nRightHolsterAttachmentEnabled: " );
    sub_2702( iParam0->_fU96 );
    sub_8784( "---nRightHolsterAttachmentToggled: " );
    sub_2702( iParam0->_fU100 );
    sub_8784( "---nLeftHolsterAttachmentEnabled: " );
    sub_2702( iParam0->_fU104 );
    sub_8784( "---nLeftHolsterAttachmentToggled: " );
    sub_2702( iParam0->_fU108 );
    sub_8784( "---nRifleHolsterAttachmentEnabled: " );
    sub_2702( iParam0->_fU112 );
    sub_8784( "---nRifleHolsterAttachmentToggled: " );
    sub_2702( iParam0->_fU116 );
    sub_8784( "---nRightHandAttachmentEnabled: " );
    sub_2702( iParam0->_fU120 );
    sub_8784( "---nRightHandAttachmentToggled: " );
    sub_2702( iParam0->_fU124 );
    sub_8784( "---nLeftHandAttachmentEnabled: " );
    sub_2702( iParam0->_fU128 );
    sub_8784( "---nLeftHandAttachmentToggled: " );
    sub_2702( iParam0->_fU132 );
    sub_2702( l_U1 );
    sub_2702( 144 );
    return;
}

void sub_18252(unknown uParam0, unknown uParam1, unknown uParam2)
{
    return;
}

void sub_18275(unknown uParam0)
{
    return;
}

void sub_18510(boolean bParam0)
{
    if (bParam0)
    {
        ;
    }
    return;
}

void sub_19453()
{
    sub_1656( "MW", "P_INITIALIZE_ROOF_SCRIPT_DATA start", 0 );
    l_U1350 = 0;
    l_U1351 = 0;
    l_U1402 = 0;
    sub_5194( ref l_U2594 );
    sub_4401( ref l_U1555, 250, 1, 0 );
    l_U1492 = 0;
    sub_4401( ref l_U1493, 2000, 1, 0 );
    l_U1545 = 0;
    l_U1960 = 0;
    sub_4401( ref l_U1546, 2000, 1, 0 );
    sub_4401( ref l_U1483, 1000, 1, 0 );
    sub_4401( ref l_U1727, 12000, 1, 0 );
    sub_4401( ref l_U1736, 15000, 1, 0 );
    sub_4401( ref l_U1749, l_U1748, 1, 0 );
    l_U1671 = 0;
    sub_4401( ref l_U1715, l_U1714, 1, 0 );
    l_U2156 = 0;
    l_U2157 = 0;
    l_U2250 = 0;
    l_U2251 = 0;
    l_U2253 = 0;
    l_U2296 = 0;
    l_U2318 = 0;
    sub_4401( ref l_U2365, 2000, 1, 0 );
    l_U2216 = 0;
    l_U1348 = 1;
    l_U2215 = 0;
    l_U2319 = 0;
    l_U2320 = 0;
    sub_4401( ref l_U2389, 2000, 1, 0 );
    sub_4401( ref l_U2398, 5000, 1, 0 );
    sub_4401( ref l_U1404, l_U1403, 1, 0 );
    sub_4401( ref l_U1414, l_U1413, 1, 0 );
    sub_4401( ref l_U1473, l_U1472, 1, 0 );
    l_U2590 = 0;
    l_U2591 = 0;
    sub_4401( ref l_U2887, 1000, 1, 0 );
    sub_1656( "MW", "P_INITIALIZE_ROOF_SCRIPT_DATA end", 0 );
    return;
}

void sub_19922()
{
    unknown[3] uVar2;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;
    unknown uVar36;
    unknown uVar37;
    unknown uVar38;
    unknown uVar39;
    unknown uVar40;
    unknown uVar41;
    unknown uVar42;
    unknown uVar43;
    unknown uVar44;
    unknown uVar45;
    unknown uVar46;
    unknown uVar47;
    unknown uVar48;
    unknown uVar49;
    unknown uVar50;
    unknown uVar51;
    unknown uVar52;
    unknown uVar53;
    unknown uVar54;
    unknown uVar55;
    unknown uVar56;
    unknown uVar57;
    unknown uVar58;
    unknown uVar59;
    unknown uVar60;
    unknown uVar61;
    unknown uVar62;
    unknown uVar63;
    unknown uVar64;
    unknown uVar65;

    sub_1656( "MW", "P_SET_ROOF_STATIC_GAMEPLAY_DATA start", 0 );
    sub_20020( ref l_U2014[0], 3.14000000, 42.08000000, 39.70000000, 245.00000000, 1843238895, 7, 3, 2, 0, 0 );
    sub_20020( ref l_U2014[1], 0.75000000, 39.97000000, 39.70000000, 256.00000000, 1737415154, 7, 3, 2, 0, 0 );
    sub_20020( ref l_U2014[2], 12.68000000, 30.93000000, 39.70000000, 350.00000000, 1820013202, 7, 3, 2, 0, 0 );
    sub_20020( ref l_U2014[3], -6.64000000, 35.40000000, 42.80000000, 307.00000000, 1230663476, 7, 3, 2, 0, 0 );
    sub_20020( ref l_U2014[4], -3.43000000, 34.11000000, 42.75000000, -75.00000000, -110444939, 7, 3, 2, 0, 0 );
    sub_20020( ref l_U2014[5], 1.87000000, 29.38000000, 42.80000000, -35.00000000, -263273570, 7, 3, 2, 0, 0 );
    sub_20020( ref l_U2014[6], -1.47000000, 28.19000000, 42.80000000, -60.00000000, -1091825948, 7, 3, 2, 0, 0 );
    sub_20020( ref l_U2014[7], 0.39000000, 22.90000000, 42.80000000, 330.00000000, 1311218474, 7, 3, 2, 0, 0 );
    sub_20020( ref l_U2014[8], -4.62000000, 19.75000000, 39.80000000, 250.00000000, 1043413257, 7, 3, 2, 0, 0 );
    sub_20020( ref l_U2014[9], 18.22000000, 20.66000000, 42.80000000, 125.00000000, -2135788986, 7, 3, 2, 0, 0 );
    sub_20020( ref l_U2220, 4.91000000, 8.22000000, 42.75000000, 90.00000000, -523520642, 7, 3, 2, 0, 0 );
    sub_20020( ref l_U2234[0], 1.94000000, 8.63000000, 42.20000000, 80.00000000, -1815919647, 7, 3, 2, 0, 0 );
    sub_20020( ref l_U2321[0], 33.29000000, 37.12000000, 44.09000000, 110.00000000, 607021148, 7, 3, 2, 0, 0 );
    sub_20020( ref l_U2321[1], 35.09000000, 39.02000000, 43.73000000, 115.00000000, 535507561, 7, 3, 2, 0, 0 );
    sub_20020( ref l_U2321[2], 36.69000000, 42.07000000, 43.73000000, 145.00000000, 1663155418, 7, 3, 2, 0, 0 );
    sub_20020( ref l_U2374, 13.10000000, 16.00000000, 45.95000000, -30.00000000, 317753830, 7, 3, 2, 0, 0 );
    sub_20838( ref l_U1564, "tb_Roof_SafetyExplosion01", 17.69000000, 39.39000000, 39.72000000, 12.00000000, 5.00000000, 3.04000000, 0.00000000, 0.00000000, -55.00000000, 1 );
    sub_20838( ref l_U1503, "tb_Roof_Explosion01_KillZone", 10.86000000, 29.99000000, 39.54000000, 10.00000000, 8.00000000, 3.01000000, 0.00000000, 0.00000000, 50.00000000, 1 );
    sub_20838( ref l_U1524, "tb_Roof_Explosion01_KnockOver", 11.62000000, 31.16000000, 39.54000000, 20.00000000, 12.00000000, 3.01000000, 0.00000000, 0.00000000, 50.00000000, 1 );
    sub_20838( ref l_U1672, "tb_Roof_StartMidCollapse", 19.54000000, 40.68000000, 39.72000000, 12.00000000, 10.00000000, 3.04000000, 0.00000000, 0.00000000, -55.00000000, 1 );
    sub_20838( ref l_U1693, "tb_Roof_CaughtInCollapse", 10.97000000, 30.53000000, 39.54000000, 15.00000000, 12.00000000, 3.01000000, 0.00000000, 0.00000000, 50.00000000, 1 );
    sub_20838( ref l_U1585, "TRIGGER_ACTIVATE_BEHIND_AIRCON", -10.02000000, 14.10000000, 39.61000000, 9.02000000, 3.47000000, 2.91000000, 0.00000000, 0.00000000, 27.63000000, 1 );
    sub_20838( ref l_U2275, "TRIGGER_LAST_AREA", 20.83000000, 25.84000000, 42.72000000, 15.00000000, 20.00000000, 2.91000000, 0.00000000, 0.00000000, -31.21000000, 1 );
    sub_20838( ref l_U1606, "TRIGGER_OPEN_GATE", 4.38000000, 22.17000000, 39.61000000, 1.98000000, 2.12000000, 2.91000000, 0.00000000, 0.00000000, 62.51000000, 1 );
    sub_20838( ref l_U1627, "tb_Roof_StartStairsHeavyGunner", -2.69000000, 21.12000000, 39.73000000, 4.73000000, 5.57000000, 3.00000000, 0.00000000, 0.00000000, -20.00000000, 1 );
    sub_20838( ref l_U1648, "tb_Roof_StairSafetyCornerExplosion", -2.89000000, 10.77000000, 39.73000000, 4.73000000, 8.00000000, 3.00000000, 0.00000000, 0.00000000, -10.00000000, 1 );
    sub_20838( ref l_U2194, "tb_Roof_PlayerHeadingToLastAreaGate", 5.64000000, 12.76000000, 42.76000000, 3.00000000, 5.81000000, 3.55000000, 0.00000000, 0.00000000, -15.00000000, 1 );
    sub_20838( ref l_U2297, "tb_Roof_StartHallCollapse", 21.62000000, 27.09000000, 42.76000000, 12.00000000, 7.00000000, 3.59000000, 0.00000000, 0.00000000, -45.00000000, 1 );
    sub_20838( ref l_U2173, "tb_Roof_OutOfSightTeleportToRoof", -9.27000000, 21.51000000, 39.49000000, 8.00000000, 8.00000000, 3.21000000, 0.00000000, 0.00000000, -25.00000000, 1 );
    sub_20838( ref l_U2254, "tb_Roof_HidingOnRoof", 13.44000000, 1.51000000, 45.73000000, 9.97000000, 7.46000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_20838( ref l_U2548, "tb_Roof_KillZone", 12.91000000, 28.75000000, 33.56000000, 80.00000000, 80.00000000, 4.75000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    array(ref uVar2, 3);
    sub_20838( ref uVar2[0], "tb_Roof_LastHGForcePlayerOutOfCover[0]", 18.12000000, 25.28000000, 42.86000000, 5.43000000, 3.00000000, 3.00000000, 0.00000000, 0.00000000, -40.00000000, 1 );
    sub_20838( ref uVar2[1], "tb_Roof_LastHGForcePlayerOutOfCover[1]", 21.65000000, 20.55000000, 42.86000000, 3.00000000, 4.00000000, 3.00000000, 0.00000000, 0.00000000, -40.00000000, 1 );
    sub_20838( ref uVar2[2], "tb_Roof_LastHGForcePlayerOutOfCover[2]", 25.08000000, 24.32000000, 42.86000000, 3.00000000, 3.00000000, 3.00000000, 0.00000000, 0.00000000, -50.00000000, 1 );
    sub_22403( ref l_U2407, ref uVar2 );
    sub_20838( ref l_U2569, "tb_Roof_1206_DeadBodySafeZone", 15.99000000, 20.32000000, 42.72000000, 15.00000000, 15.00000000, 2.91000000, 0.00000000, 0.00000000, -36.21000000, 1 );
    sub_22850( ref l_U2164, "teth_Roof_StartHalf_LOWER", 14.64000000, 35.25000000, 38.68000000, 40.00000000, 40.00000000, 3.00000000, 0.00000000, 0.00000000, -30.00000000, 1 );
    sub_22850( ref l_U2165, "teth_Roof_Bridge", 2.98000000, 23.47000000, 42.38000000, 10.00000000, 7.00000000, 6.00000000, 0.00000000, 0.00000000, -25.00000000, 1 );
    sub_22850( ref l_U2166, "teth_Roof_Helipad", -2.34000000, 31.91000000, 42.38000000, 12.00000000, 6.00000000, 6.00000000, 0.00000000, 0.00000000, -30.00000000, 1 );
    sub_22850( ref l_U2167, "teth_Roof_LastArea", 21.17000000, 26.45000000, 42.70000000, 12.00000000, 12.00000000, 3.21000000, 0.00000000, 0.00000000, -45.00000000, 1 );
    sub_22850( ref l_U2252, "teth_Roof_BaseOfStairs", -2.96000000, 10.93000000, 39.62000000, 5.00000000, 8.00000000, 3.00000000, 0.00000000, 0.00000000, -10.00000000, 1 );
    sub_22850( ref l_U2169[0], "teth_Roof_UpperSection[0]", 14.07000000, 17.67000000, 42.70000000, 15.00000000, 8.00000000, 6.00000000, 0.00000000, 0.00000000, -25.00000000, 1 );
    sub_22850( ref l_U2169[1], "teth_Roof_UpperSection[1]", 18.98000000, 23.72000000, 42.70000000, 12.00000000, 12.00000000, 6.00000000, 0.00000000, 0.00000000, -40.00000000, 1 );
    sub_22850( ref l_U2169[2], "teth_Roof_UpperSection[2]", 24.38000000, 29.36000000, 42.70000000, 12.00000000, 12.00000000, 6.00000000, 0.00000000, 0.00000000, -50.00000000, 1 );
    sub_22850( ref l_U2388, "teth_Roof_LastHG", 14.19000000, 17.87000000, 46.84000000, 1.85000000, 2.58000000, 3.00000000, 0.00000000, 0.00000000, 65.00000000, 1 );
    sub_22850( ref l_U2168, "teth_Roof_SplosionMan", 12.09000000, 30.20000000, 38.11000000, 3.60000000, 8.46000000, 3.21000000, 0.00000000, 0.00000000, -39.93000000, 1 );
    sub_23660( ref l_U1961, g_U1481, 4.86017000, 21.46267000, 41.13677000, g_U657 );
    sub_23718( ref l_U1961, -170.00000000, 95.00000000 );
    sub_23896( ref l_U1961, 0, 1, 1065353216 );
    sub_24047( ref l_U1961, 1 );
    sub_23660( ref l_U1968, g_U1482, 7.15458000, 20.20000000, 44.06000000, g_U657 );
    sub_23718( ref l_U1968, 65446, 65447 );
    sub_23896( ref l_U1968, 0, 1, 1065353216 );
    sub_24047( ref l_U1968, 1 );
    sub_23660( ref l_U1975, g_U1483, 11.45683000, 18.35566000, 44.08820000, g_U657 );
    sub_23660( ref l_U1982, g_U1481, 8.84019000, 19.67155000, 44.08596000, g_U657 );
    sub_24259( ref l_U1982, 0 );
    sub_23896( ref l_U1982, 1, 1, 0.75000000 );
    sub_24411( ref l_U1982, ref l_U1975 );
    sub_24530( ref l_U1975, 1 );
    sub_24259( ref l_U1975, 1 );
    sub_23660( ref l_U1989, -995190896, 2.81055000, 3.68765000, 44.03121000, 0.00000000, 0.00000000, 0.00000000 );
    sub_23718( ref l_U1989, -110.00000000, 105.00000000 );
    sub_23896( ref l_U1989, 0, 1, 1065353216 );
    sub_24047( ref l_U1989, 1 );
    sub_23660( ref l_U1996[0], -1702366341, 23.05440000, 42.75155000, 41.05700000, 0, 0, 0 );
    sub_24259( ref l_U1996[0], 1 );
    sub_23660( ref l_U1996[1], 609227234, 24.41670000, 40.53064000, 41.05700000, 0, 0, 0 );
    sub_24259( ref l_U1996[1], 1 );
    sub_24881( ref l_U1812[0], 1, 0.10000000, 1, 1100, 100, 1, 0 );
    sub_24881( ref l_U1812[1], 1, 1.00000000, 1100, 1500, -1, 1, 0 );
    sub_24881( ref l_U1812[2], 1, 0.25000000, 1500, 3000, 200, 1, 0 );
    sub_24881( ref l_U1758, 1, 0.20000000, 10, -1, 200, 0, 0 );
    sub_1656( "MW", "P_SET_ROOF_STATIC_GAMEPLAY_DATA end", 0 );
    return;
}

void sub_20020(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

void sub_20838(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    StrCopy( ref iParam0->_fU0, uParam1, 64 );
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = {uParam2};
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 1, iParam0 + 0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

void sub_22403(int iParam0, unknown uParam1)
{
    int iVar4;
    int I;

    iVar4 = (uParam1^);
    if (iVar4 > 6)
    {
        sub_1656( "[SA]", "P_CreateTriggerRegion() ERRROR: max number of trigger boxes exceeded.", 0 );
        SCRIPT_ASSERT( "P_CreateTriggerRegion() ERRROR: max number of trigger boxes exceeded.", 0 );
    }
    for ( I = 0; I < iVar4; I++ )
    {
        iParam0->_fU0[I] = {(uParam1^)[I]};
    }
    iParam0->_fU508 = iVar4;
    iParam0->_fU548 = 0;
    iParam0->_fU552 = 0;
    iParam0->_fU556 = 0;
    iParam0->_fU560 = 0;
    return;
}

void sub_22850(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 2, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

void sub_23660(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    iParam0->_fU0 = uParam1;
    iParam0->_fU4 = {uParam2};
    iParam0->_fU16 = {uParam5};
    return;
}

void sub_23718(int iParam0, float fParam1, float fParam2)
{
    if ((sub_23730( iParam0 )) == 0)
    {
        sub_23796( iParam0 );
    }
    if (fParam1 > fParam2)
    {
        ;
    }
    else
    {
        DOOR_FIND_CLOSEST_SET_LIMIT_MIN( iParam0->_fU0, iParam0->_fU4, fParam1 );
        DOOR_FIND_CLOSEST_SET_LIMIT_MAX( iParam0->_fU0, iParam0->_fU4, fParam2 );
    }
    return;
}

int sub_23730(int iParam0)
{
    int iVar3;

    iVar3 = DOES_OBJECT_OF_TYPE_EXIST_AT_COORDS( iParam0->_fU4, 1.00000000, iParam0->_fU0 );
    if (iVar3 == 1)
    {
        return 1;
    }
    return 0;
}

void sub_23796(unknown uParam0)
{
    (uParam0^) = {(uParam0^)};
    return;
}

void sub_23896(int iParam0, int iParam1, int iParam2, unknown uParam3)
{
    float fVar6;

    if ((sub_23730( iParam0 )) == 0)
    {
        sub_23796( iParam0 );
    }
    fVar6 = 0.00000000;
    if (iParam1 == 1)
    {
        fVar6 = uParam3;
    }
    else
    {
        fVar6 = -uParam3;
    }
    if (iParam2 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, fVar6 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    return;
}

void sub_24047(int iParam0, unknown uParam1)
{
    if ((sub_23730( iParam0 )) == 0)
    {
        sub_23796( iParam0 );
    }
    DOOR_FIND_CLOSEST_SET_LATCH( iParam0->_fU0, iParam0->_fU4, uParam1 );
    return;
}

void sub_24259(int iParam0, int iParam1)
{
    int iVar4;
    float fVar5;

    if ((sub_23730( iParam0 )) == 0)
    {
        sub_23796( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
    }
    else
    {
        iVar4 = 0;
        fVar5 = 0.00000000;
        GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref iVar4, ref fVar5 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar5 );
    }
    return;
}

void sub_24411(unknown uParam0, unknown uParam1)
{
    sub_23718( uParam0, 0, 90 );
    sub_23718( uParam1, 65446, 0 );
    sub_24450( uParam0, 1 );
    sub_24450( uParam1, 1 );
    return;
}

void sub_24450(int iParam0, unknown uParam1)
{
    if ((sub_23730( iParam0 )) == 0)
    {
        sub_23796( iParam0 );
    }
    DOOR_FIND_CLOSEST_SET_AUTO_CLOSE( iParam0->_fU0, iParam0->_fU4, uParam1 );
    return;
}

void sub_24530(int iParam0, int iParam1)
{
    if ((sub_23730( iParam0 )) == 0)
    {
        sub_23796( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    return;
}

void sub_24881(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    if (iParam0->_fU168 == 0)
    {
        sub_24909( iParam0, uParam1 );
        iParam0->_fU192 = uParam1;
        iParam0->_fU36 = uParam2;
        iParam0->_fU148 = uParam3;
        iParam0->_fU152 = uParam4;
        iParam0->_fU156 = uParam5;
        iParam0->_fU160 = uParam7;
        iParam0->_fU176 = uParam6;
    }
    sub_5194( iParam0 + 40 );
    sub_5194( iParam0 + 76 );
    sub_5194( iParam0 + 112 );
    iParam0->_fU172 = iParam0->_fU176;
    iParam0->_fU164 = 0;
    iParam0->_fU168 = 1;
    iParam0->_fU184 = 0;
    iParam0->_fU188 = 0;
    return;
}

void sub_24909(int iParam0, unknown uParam1)
{
    switch (uParam1)
    {
        case 1:
        StrCopy( ref iParam0->_fU4, "SMALL_EXPLOSION_SHAKE", 32 );
        break;
        case 2:
        StrCopy( ref iParam0->_fU4, "MEDIUM_EXPLOSION_SHAKE", 32 );
        break;
        case 3:
        StrCopy( ref iParam0->_fU4, "LARGE_EXPLOSION_SHAKE", 32 );
        break;
        case 4:
        StrCopy( ref iParam0->_fU4, "HAND_SHAKE", 32 );
        break;
        case 5:
        StrCopy( ref iParam0->_fU4, "JOLT_SHAKE", 32 );
        break;
        case 6:
        StrCopy( ref iParam0->_fU4, "VIBRATE_SHAKE", 32 );
        break;
        case 7:
        StrCopy( ref iParam0->_fU4, "WOBBLY_SHAKE", 32 );
        break;
    }
    iParam0->_fU0 = iParam0->_fU192;
    return;
}

void sub_25500()
{
    sub_1656( "CCB", "P_INITIALIZE_SP_CHALLENGES", 0 );
    l_U2592 = 0;
    l_U2593 = 0;
    if (NOT (SCRIPT_VAR_HASH_EXISTS( 1701971384 )))
    {
        sub_1656( "CCB", "Creating the OldPainless script variable...", 0 );
        SCRIPT_VAR_HASH_ADD_INT( 1701971384 );
        if (SCRIPT_VAR_HASH_EXISTS( 1701971384 ))
        {
            sub_1656( "CCB", "The OldPainless script variable was successfully created...", 0 );
        }
        else
        {
            sub_1656( "CCB", "The OldPainless script variable is NOT valid!!!", 0 );
        }
    }
    else
    {
        sub_1656( "CCB", "The OldPainless script variable was already created...", 0 );
        SCRIPT_VAR_HASH_SET_INT( 1701971384, 0 );
    }
    return;
}

void sub_26143()
{
    int I;

    sub_1656( "MW", "LOAD_12_05_ASSETS start", 0 );
    for ( I = 0; I <= 1; I++ )
    {
        sub_26212( l_U1355[I], 0 );
    }
    if ((l_U1349) AND (g_U854 != 10))
    {
        sub_26412( l_U2770, 1 );
    }
    sub_26684( "LEVEL_S_HOTEL_CP_09", 0, 1 );
    sub_26761( 469460336, 1 );
    sub_26982( "S_HOTEL_BACK_COLLAPSE", 0, 1 );
    for ( I = 0; I <= 1; I++ )
    {
        sub_26212( l_U1355[I], 1 );
    }
    sub_1656( "MW", "LOAD_12_05_ASSETS end", 0 );
    return;
}

void sub_26212(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
        sub_8784( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_26412(unknown uParam0, int iParam1)
{
    if (HAS_CUTSCENE_LOADED())
    {
        if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
        {
            SCRIPT_ASSERT( "Another cutscene is already loaded.  You can only load one cutscene into memory.  Your current cutscene will not load into memory.", 0 );
        }
    }
    if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
    {
        PRE_STREAM_SEAMLESS_CUTSCENE( uParam0 );
        if (iParam1 == 1)
        {
            while ((CUTSCENE_IS_LOADED( uParam0 )) == 0)
            {
                WAIT( 0 );
            }
        }
    }
    return;
}

void sub_26684(unknown uParam0, unknown uParam1, int iParam2)
{
    REQUEST_ANIM_DICT( uParam0, uParam1 );
    "[doubled result, dropped if not asigned]";
    if (iParam2 == 1)
    {
        while ((HAS_ANIM_DICT_LOADED( uParam0, uParam1 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_26761(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to load does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 0)
    {
        ISEQ_REQUEST( uParam0 );
        ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
        if (iParam1 == 1)
        {
            while ((ISEQ_QUERY_STATE( uParam0, 1 )) == 1)
            {
                WAIT( 0 );
            }
        }
    }
    return;
}

void sub_26982(unknown uParam0, unknown uParam1, int iParam2)
{
    if (iParam2 == 0)
    {
        REQUEST_SCRIPT_STREAM( uParam0, uParam1 );
    }
    else
    {
        while ((LOAD_SCRIPT_STREAM( uParam0, uParam1 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_27243()
{
    switch (l_U2156)
    {
        case 1:
        sub_1656( "GA", "e_Roof_W1_EnemySpawn = ENTITY_STATE_INIT", 0 );
        l_U2157 = 0;
        sub_27359( ref l_U2158, 1056964608, 0 );
        l_U2156 = 2;
        sub_1656( "GA", "e_Roof_W1_EnemySpawn = ENTITY_STATE_CREATING", 0 );
        break;
        case 2:
        l_U2145[l_U2157] = sub_27611( ref l_U2014[l_U2157] );
        sub_28290( l_U2145[l_U2157], ref l_U2158 );
        if (NOT (IS_PED_DEAD( l_U2145[l_U2157] )))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U2145[l_U2157], 1 );
            SET_PED_ALERTNESS( l_U2145[l_U2157], 3 );
            SET_PED_PATH_CAN_USE_CLIMBOVERS( l_U2145[l_U2157], 0 );
            SET_PED_PATH_CAN_DROP_FROM_HEIGHT( l_U2145[l_U2157], 0 );
        }
        l_U2157++;
        if (l_U2157 >= 10)
        {
            l_U2156 = 3;
            sub_1656( "GA", "e_Roof_W1_EnemySpawn = ENTITY_STATE_POST_CREATE_SETUP", 0 );
        }
        break;
        case 3:
        sub_28781( ref l_U2145, "pi_Roof_W1_Enemy" );
        sub_11557( l_U2145[0], -612753081, 25000, 0, 0 );
        sub_11557( l_U2145[1], 1478009203, 25000, 0, 0 );
        sub_11557( l_U2145[2], -1013714740, 25000, 0, 0 );
        sub_11557( l_U2145[3], -1013714740, 25000, 0, 0 );
        sub_11557( l_U2145[4], -1013714740, 25000, 0, 0 );
        sub_11557( l_U2145[5], -1013714740, 25000, 0, 0 );
        sub_11557( l_U2145[6], -612753081, 25000, 0, 0 );
        sub_11557( l_U2145[7], -612753081, 25000, 0, 0 );
        sub_11557( l_U2145[8], 514118749, 25000, 0, 0 );
        sub_11557( l_U2145[9], 514118749, 25000, 0, 0 );
        sub_29145( ref l_U2145[0], "AIT_EXPERT", 5.00000000, 40.00000000 );
        sub_29145( ref l_U2145[1], "AIT_EXPERT", 5.00000000, 40.00000000 );
        sub_29145( ref l_U2145[2], "AIT_EXPERT", 5.00000000, 40.00000000 );
        sub_29145( ref l_U2145[3], "AIT_EXPERT", 5.00000000, 40.00000000 );
        sub_29145( ref l_U2145[4], "AIT_EXPERT", 5.00000000, 40.00000000 );
        sub_29145( ref l_U2145[5], "AIT_EXPERT", 5.00000000, 40.00000000 );
        sub_29145( ref l_U2145[6], "AIT_EXPERT", 5.00000000, 40.00000000 );
        sub_29145( ref l_U2145[7], "AIT_EXPERT", 5.00000000, 40.00000000 );
        sub_29145( ref l_U2145[8], "AIT_EXPERT", 5.00000000, 10.00000000 );
        sub_29145( ref l_U2145[9], "AIT_EXPERT", 2.50000000, 10.00000000 );
        sub_29554( ref l_U2145 );
        l_U2156 = 4;
        sub_1656( "GA", "e_Roof_W1_EnemySpawn = ENTITY_STATE_COMPLETE", 0 );
        break;
    }
    return;
}

void sub_27359(int iParam0, unknown uParam1, boolean bParam2)
{
    iParam0->_fU4 = uParam1;
    iParam0->_fU0 = CREATE_GROUP( 3, 1 );
    if (bParam2)
    {
        while (NOT (DOES_GROUP_EXIST( iParam0->_fU0 )))
        {
            WAIT( 0 );
        }
    }
    SET_GROUP_RATIO_FIRING_AT_VISIBLE( iParam0->_fU0, iParam0->_fU4 );
    SET_GROUP_RATIO_FIRING_AT_INVISIBLE( iParam0->_fU0, iParam0->_fU4 );
    if (iParam0->_fU8)
    {
        SET_GROUP_FORMATION( iParam0->_fU0, iParam0->_fU12 );
        SET_GROUP_FORMATION_SPACING( iParam0->_fU0, iParam0->_fU16 );
        SET_GROUP_FORMATION_MAX_MOVE_SPEED( iParam0->_fU0, iParam0->_fU20 );
    }
    return;
}

void sub_27611(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
        sub_26212( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
    sub_28090( iParam0->_fU40 );
    sub_28170( iParam0->_fU40 );
    return iParam0->_fU40;
}

void sub_28090(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

void sub_28170(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

void sub_28290(unknown uParam0, int iParam1)
{
    int iVar4;
    unknown uVar5;

    if ((DOES_GROUP_EXIST( iParam1->_fU0 )) == 0)
    {
        sub_8784( "[SP]### Warning!!! Group does not exist. Creating new group specified attributes. ###" );
        if (iParam1->_fU4 > 0)
        {
            sub_27359( iParam1, iParam1->_fU4, 0 );
        }
        else
        {
            sub_27359( iParam1, 1056964608, 0 );
        }
    }
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        GET_GROUP_SIZE( iParam1->_fU0, ref iVar4, ref uVar5 );
        if (iVar4 == 0)
        {
            SET_PED_AS_GROUP_LEADER( uParam0, iParam1->_fU0 );
        }
        else
        {
            SET_PED_AS_GROUP_MEMBER( uParam0, iParam1->_fU0 );
        }
        SET_PED_NEVER_LEAVES_GROUP( uParam0, 1 );
    }
    return;
}

void sub_28781(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

void sub_29145(unknown uParam0, unknown uParam1, float fParam2, float fParam3)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        SET_PED_AI_TEMPLATE( (uParam0^), uParam1 );
        if (fParam2 > -1)
        {
            SET_PED_COMBAT_RANGE_MIN( (uParam0^), fParam2 );
        }
        if (fParam3 > -1)
        {
            SET_PED_COMBAT_RANGE_MAX( (uParam0^), fParam3 );
        }
    }
    return;
}

void sub_29554(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_29585( (uParam0^)[I] );
    }
    return;
}

void sub_29585(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 1 );
        SET_PED_VISIBLE( uParam0, 0 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 0 );
        FREEZE_PED_POSITION( uParam0, 1 );
        SET_PED_COLLISION( uParam0, 0 );
        SET_PED_PROOFS( uParam0, 1, 1, 1, 1, 1 );
    }
    return;
}

void sub_29791(unknown uParam0)
{
    int iVar3;
    string sVar4;

    switch (uParam0)
    {
        case 20:
        case 0:
        iVar3 = 20;
        sVar4 = "SUNNY";
        break;
        case 1:
        iVar3 = 12;
        sVar4 = "SUNNY";
        break;
        case 2:
        case 3:
        case 4:
        iVar3 = 9;
        sVar4 = "SUNNY";
        break;
        case 5:
        iVar3 = 12;
        sVar4 = "SUNNY";
        break;
        case 6:
        case 7:
        case 8:
        case 9:
        iVar3 = 9;
        sVar4 = "SUNNY_WINDY";
        break;
        case 10:
        iVar3 = 12;
        sVar4 = "SUNNY_WINDY";
        break;
        default:
        iVar3 = 12;
        sVar4 = "SUNNY";
        break;
    }
    SET_TIME_OF_DAY( iVar3, 0 );
    FREEZE_TIME_OF_DAY( iVar3, 0 );
    SET_WEATHER_TYPE_NOW_PERSIST( sVar4 );
    SET_WEATHER_TRANSITION_IMMEDIATE( 1 );
    return;
}

void sub_30109(unknown uParam0)
{
    int I;

    sub_1656( "MW", "LOAD_ROOFTOP_RAYFIRE_ASSETS start", 0 );
    sub_30176( "SHOTAUD" );
    for ( I = 2; I <= (l_U1355 - 1); I++ )
    {
        sub_26212( l_U1355[I], 0 );
    }
    sub_26684( "LEVEL_S_HOTEL_CP_11", 0, uParam0 );
    sub_26761( -1844315547, uParam0 );
    sub_26761( -473924166, uParam0 );
    sub_30421( "SCRIPT_MISSION\S_HOTEL_ROOFTOP", uParam0 );
    sub_30421( "SCRIPT_MISSION\S_HOTEL_ROOFTOP_RAYFIRES_01", uParam0 );
    for ( I = 2; I <= (l_U1355 - 1); I++ )
    {
        sub_26212( l_U1355[I], uParam0 );
    }
    sub_1656( "MW", "LOAD_ROOFTOP_RAYFIRE_ASSETS end", 0 );
    return;
}

void sub_30176(unknown uParam0)
{
    StrCopy( ref g_U157._fU0, uParam0, 16 );
    sub_30196();
    return;
}

void sub_30196()
{
    int I;

    for ( I = 0; I <= 8; I++ )
    {
        g_U157._fU16[I]._fU0 = nil;
        g_U157._fU16[I]._fU4 = 0;
        g_U157._fU92[I] = 0;
    }
    return;
}

void sub_30421(unknown uParam0, int iParam1)
{
    LOAD_SCRIPT_AUDIO_BANK( uParam0 );
    if (iParam1 == 1)
    {
        while ((IS_SCRIPT_AUDIO_BANK_LOADED( uParam0, 0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_30649()
{
    sub_30659();
    sub_31184();
    sub_31559();
    sub_32195();
    sub_33136();
    sub_34034();
    sub_34592();
    sub_34884();
    return;
}

void sub_30659()
{
    sub_30695( ref l_U2636, -1267912278, 14.00000000, 27.00000000, 42.80000000, 1, 0 );
    sub_6914( l_U2637 );
    sub_30695( ref l_U2638, 1550581806, 14.00000000, 27.00000000, 42.80000000, 1, 0 );
    sub_6914( l_U2639 );
    sub_6914( l_U2640 );
    sub_30695( ref l_U2643, -75073551, 14.70000000, 28.50000000, 41.50000000, 1, 0 );
    sub_30695( ref l_U2641, -318167782, 13.00000000, 27.90000000, 40.20000000, 1, 0 );
    sub_30695( ref l_U2644, -934816225, 14, 27, 42.80000000, 1, 0 );
    SET_OBJECT_VISIBLE( l_U2644, 0 );
    SET_OBJECT_COLLISION( l_U2644, 0 );
    return;
}

void sub_30695(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6)
{
    sub_30722( uParam0, uParam1, uParam2, g_U657, uParam5, uParam6 );
    return;
}

void sub_30722(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    sub_6914( (uParam0^) );
    (uParam0^) = sub_30753( uParam1, uParam2, uParam5, 0, uParam9, 0 );
    FREEZE_OBJECT_POSITION( (uParam0^), uParam8 );
    return;
}

void sub_30753(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
        sub_26212( uParam0, 1 );
    }
    Result = CREATE_OBJECT_NO_OFFSET( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

void sub_31184()
{
    sub_7530();
    sub_30695( ref l_U2610, -367636848, 3.50000000, 9, 43.50000000, 1, 0 );
    sub_30695( ref l_U2618, -985729267, 6, 9, 43.50000000, 1, 0 );
    sub_30695( ref l_U2615, -2018457515, -1.80000000, 6.50000000, 41.50000000, 1, 0 );
    sub_30695( ref l_U2612, -529475815, 3.20000000, 8.50000000, 43.50000000, 1, 0 );
    sub_30695( ref l_U2611, 1739372840, 3.50000000, 9, 43.50000000, 1, 0 );
    sub_30695( ref l_U2620, -1991423309, 6, 9, 43.50000000, 1, 0 );
    sub_30695( ref l_U2619, 1340369130, 6, 9, 43.50000000, 1, 0 );
    sub_30695( ref l_U2616, 1629971762, -2, 6.50000000, 41.50000000, 1, 0 );
    SET_OBJECT_VISIBLE( l_U2612, 0 );
    SET_OBJECT_VISIBLE( l_U2611, 0 );
    SET_OBJECT_VISIBLE( l_U2620, 0 );
    SET_OBJECT_VISIBLE( l_U2619, 0 );
    SET_OBJECT_VISIBLE( l_U2616, 0 );
    FREEZE_OBJECT_POSITION( l_U2612, 1 );
    FREEZE_OBJECT_POSITION( l_U2611, 1 );
    FREEZE_OBJECT_POSITION( l_U2620, 1 );
    FREEZE_OBJECT_POSITION( l_U2619, 1 );
    FREEZE_OBJECT_POSITION( l_U2616, 1 );
    return;
}

void sub_31559()
{
    sub_1656( "GA", "P_CREATE_ROOFTOP_BACK_COLLAPSE start", 0 );
    l_U2689 = sub_30753( l_U2693, 6.00000000, 40.00000000, 38.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2689 ))
    {
        FREEZE_OBJECT_POSITION( l_U2689, 1 );
    }
    l_U2690 = sub_30753( l_U2694, 6.00000000, 40.00000000, 38.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2690 ))
    {
        FREEZE_OBJECT_POSITION( l_U2690, 1 );
        SET_OBJECT_VISIBLE( l_U2690, 0 );
    }
    l_U2691 = sub_30753( l_U2695, 6.00000000, 40.00000000, 38.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2691 ))
    {
        FREEZE_OBJECT_POSITION( l_U2691, 1 );
        SET_OBJECT_VISIBLE( l_U2691, 0 );
    }
    l_U2692 = sub_30753( l_U2696, 6.00000000, 40.00000000, 38.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2692 ))
    {
        FREEZE_OBJECT_POSITION( l_U2692, 1 );
        SET_OBJECT_VISIBLE( l_U2692, 0 );
    }
    l_U2700 = sub_30753( l_U2702, 3.00000000, 44.00000000, 40.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2700 ))
    {
        FREEZE_OBJECT_POSITION( l_U2700, 1 );
    }
    l_U2701 = sub_30753( l_U2703, 3.00000000, 44.00000000, 40.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2701 ))
    {
        FREEZE_OBJECT_POSITION( l_U2701, 1 );
        SET_OBJECT_VISIBLE( l_U2701, 0 );
    }
    sub_1656( "GA", "P_CREATE_ROOFTOP_BACK_COLLAPSE end", 0 );
    return;
}

void sub_32195()
{
    sub_1656( "GA", "P_CREATE_ROOFTOP_MID_COLLAPSE start", 0 );
    l_U2709 = sub_30753( l_U2715, 8.00000000, 28.00000000, 39.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2709 ))
    {
        FREEZE_OBJECT_POSITION( l_U2709, 1 );
    }
    l_U2710 = sub_30753( l_U2716, 8.00000000, 28.00000000, 39.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2710 ))
    {
        FREEZE_OBJECT_POSITION( l_U2710, 1 );
        SET_OBJECT_VISIBLE( l_U2710, 0 );
    }
    l_U2711 = sub_30753( l_U2717, 13.00000000, 34.00000000, 39.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2711 ))
    {
        FREEZE_OBJECT_POSITION( l_U2711, 1 );
        SET_OBJECT_VISIBLE( l_U2711, 0 );
    }
    l_U2712 = sub_30753( l_U2718, 8.00000000, 28.00000000, 39.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2712 ))
    {
        FREEZE_OBJECT_POSITION( l_U2712, 1 );
    }
    l_U2713 = sub_30753( l_U2719, 10.00000000, 30.00000000, 40.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2713 ))
    {
        FREEZE_OBJECT_POSITION( l_U2713, 1 );
        SET_OBJECT_VISIBLE( l_U2713, 0 );
        SET_OBJECT_COLLISION( l_U2713, 0 );
    }
    l_U2714 = sub_30753( l_U2720, 13.00000000, 27.90000000, 40.20000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2714 ))
    {
        FREEZE_OBJECT_POSITION( l_U2714, 1 );
        SET_OBJECT_VISIBLE( l_U2714, 0 );
        SET_OBJECT_COLLISION( l_U2714, 0 );
    }
    ENABLE_NORMAL_LINE( "roof_simple", "ACUnitPre_Coverline04", 1 );
    ENABLE_COVERPOINTMP3( "roof_simple", "ACUnitPre_Coverpoint01", 1 );
    ENABLE_COVERPOINTMP3( "roof_simple", "ACUnitPre_Coverpoint02", 1 );
    ENABLE_NORMAL_LINE( "roof_simple", "ACUnitPost_CoverLine01", 0 );
    ENABLE_NORMAL_LINE( "roof_simple", "ACUnitPost_CoverLine1L", 0 );
    ENABLE_NORMAL_LINE( "roof_simple", "ACUnitPost_CoverLine1R", 0 );
    sub_1656( "GA", "P_CREATE_ROOFTOP_MID_COLLAPSE end", 0 );
    return;
}

void sub_33136()
{
    sub_1656( "GA", "P_CREATE_ROOFTOP_CORNER_EXPLOSION start", 0 );
    l_U2662 = sub_30753( l_U2665, -9.00000000, 2.00000000, 40.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2662 ))
    {
        FREEZE_OBJECT_POSITION( l_U2662, 1 );
    }
    l_U2663 = sub_30753( l_U2666, -9.00000000, 2.00000000, 40.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2663 ))
    {
        FREEZE_OBJECT_POSITION( l_U2663, 1 );
        SET_OBJECT_VISIBLE( l_U2663, 0 );
    }
    l_U2664 = sub_30753( l_U2667, -9.00000000, 2.00000000, 40.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2664 ))
    {
        FREEZE_OBJECT_POSITION( l_U2664, 1 );
        SET_OBJECT_VISIBLE( l_U2664, 0 );
    }
    l_U2670 = sub_30753( l_U2674, -11.90000000, 5.00000000, 39.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2670 ))
    {
        FREEZE_OBJECT_POSITION( l_U2670, 1 );
    }
    l_U2671 = sub_30753( l_U2674, -7.30000000, 4.50000000, 39.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2671 ))
    {
        FREEZE_OBJECT_POSITION( l_U2671, 1 );
    }
    l_U2672 = sub_30753( l_U2675, -11.90000000, 5.00000000, 39.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2672 ))
    {
        FREEZE_OBJECT_POSITION( l_U2672, 1 );
        SET_OBJECT_VISIBLE( l_U2672, 0 );
    }
    l_U2673 = sub_30753( l_U2676, -7.30000000, 4.50000000, 39.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2673 ))
    {
        FREEZE_OBJECT_POSITION( l_U2673, 1 );
        SET_OBJECT_VISIBLE( l_U2673, 0 );
    }
    l_U2679 = sub_30753( l_U2681, -11.00000000, 0.00000000, 42.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2679 ))
    {
        FREEZE_OBJECT_POSITION( l_U2679, 1 );
    }
    l_U2680 = sub_30753( l_U2682, -11.00000000, 0.00000000, 42.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2680 ))
    {
        FREEZE_OBJECT_POSITION( l_U2680, 1 );
        SET_OBJECT_VISIBLE( l_U2680, 0 );
    }
    sub_1656( "GA", "P_CREATE_ROOFTOP_CORNER_EXPLOSION end", 0 );
    return;
}

void sub_34034()
{
    sub_1656( "GA", "P_CREATE_ROOFTOP_HALL_COLLAPSE start", 0 );
    l_U2734 = sub_30753( l_U2739, 26.00000000, 30.00000000, 43.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2734 ))
    {
        FREEZE_OBJECT_POSITION( l_U2734, 1 );
    }
    l_U2735 = sub_30753( l_U2740, 26.00000000, 30.00000000, 42.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2735 ))
    {
        FREEZE_OBJECT_POSITION( l_U2735, 1 );
        SET_OBJECT_VISIBLE( l_U2735, 0 );
        SET_OBJECT_COLLISION( l_U2735, 0 );
    }
    l_U2736 = sub_30753( l_U2741, 26.00000000, 30.00000000, 43.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2736 ))
    {
        FREEZE_OBJECT_POSITION( l_U2736, 1 );
        SET_OBJECT_VISIBLE( l_U2736, 0 );
    }
    l_U2737 = sub_30753( l_U2742, 26.00000000, 30.00000000, 43.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2737 ))
    {
        FREEZE_OBJECT_POSITION( l_U2737, 1 );
        SET_OBJECT_VISIBLE( l_U2737, 0 );
    }
    l_U2738 = sub_30753( l_U2743, 32.00000000, 29.00000000, 46.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2738 ))
    {
        FREEZE_OBJECT_POSITION( l_U2738, 1 );
    }
    sub_1656( "GA", "P_CREATE_ROOFTOP_HALL_COLLAPSE end", 0 );
    return;
}

void sub_34592()
{
    sub_8557( g_U991 );
    g_U991 = sub_34641( 1721151522, -7.29860900, 28.41558000, 43.75145000, 8.00000000, 1, 0, 0 );
    SET_VEHICLE_ENGINE_CAN_BE_DAMAGED( g_U991, 0 );
    return;
}

void sub_34641(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, int iParam5, unknown uParam6, unknown uParam7)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a vehicle with MUST BE PRELOADED!!!!", 0 );
        sub_26212( uParam0, 1 );
    }
    Result = CREATE_VEHICLE( uParam0, uParam1, uParam4, uParam6, uParam7 );
    if (iParam5 == 1)
    {
        while ((DOES_VEHICLE_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    if (DOES_VEHICLE_EXIST( Result ))
    {
        SET_PETROLTANK_BURN_RATE( Result, 125.00000000 );
    }
    return Result;
}

void sub_34884()
{
    sub_1656( "MW", "P_CREATE_ROOF_PLACEMENTS start", 0 );
    l_U2011[0] = sub_34981( -4072149, 2.06000000, 2.68000000, 44.08000000, 0.00000000, 0.00000000, 0.00000000, 1, 0, 0, 1119092736 );
    l_U2011[1] = sub_34981( -4072149, 1.91000000, 2.67000000, 44.08000000, 0.00000000, 0.00000000, 0.45000000, 1, 0, 0, 1119092736 );
    sub_1656( "MW", "P_CREATE_ROOF_PLACEMENTS end", 0 );
    return;
}

void sub_34981(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, int iParam8, unknown uParam9, unknown uParam10)
{
    unknown Result;

    Result = CREATE_PLACEMENT_ROTATE( uParam0, uParam1, uParam4, uParam7, 0, uParam9, uParam10 );
    if (iParam8 == 1)
    {
        while ((DOES_PLACEMENT_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    return Result;
}

void sub_35195(int iParam0, int iParam1, unknown uParam2, boolean bParam3)
{
    END_POSTFX_BLENDER( 12, 0 );
    if (bParam3)
    {
        STOP_ALL_IMAGEFX( 0 );
    }
    SET_WIDESCREEN_BORDERS( 1, 500 );
    DISPLAY_HUD( 0 );
    if (iParam0 == 1)
    {
        if (NOT (IS_PED_DEAD( sub_3807() )))
        {
            SET_PLAYER_CONTROL( sub_3829(), 0, uParam2 );
            SET_PED_DUCKING( sub_3807(), 0 );
            if (iParam1 == 1)
            {
                CLEAR_PED_TASKS_IMMEDIATELY( sub_3807() );
            }
            SET_PED_INVINCIBLE( sub_3807(), 1 );
        }
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    return;
}

void sub_35354()
{
    sub_1656( "GA", "P_ROOF_START_BLENDOUT_1205 start", 0 );
    sub_35410();
    sub_35792();
    ISEQ_REGISTER_ENTITY( 469460336, "Max", sub_3807(), 0 );
    sub_35871( sub_3807(), g_U1020[10], g_U1123[10] );
    ISEQ_START( 469460336 );
    SNAP_PLAYER_TO_COVERPOINT( sub_3829(), "GenCover", "C8D703C8_30D084ED_Corner1", 1 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U1158[10], 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U1193[10], 1065353216, 0 );
    if (NOT (IS_PED_DEAD( sub_3807() )))
    {
        SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( sub_3807(), 0, 0 ), 0 );
    }
    sub_36146();
    PLAY_SCRIPT_STREAM_FROM_COORD( 4.03000000, 41.40000000, 39.73000000, 0 );
    TRIGGER_EXPLOSION_AUDIO_MIX_LAYER( "S_HOTEL_EXP_BACK_COLLAPSE", 4.03000000, 41.40000000, 39.73000000 );
    CAMERA_PLAY_ANIMATED( "LEVEL_S_HOTEL_CP_09", "B_OUT_12_05_HOTEL_CAM", 0, 0, 0, 0, 0, 0, 0 );
    sub_1656( "GA", "P_ROOF_START_BLENDOUT_1205 end", 0 );
    return;
}

void sub_35410()
{
    sub_1656( "GA", "P_ROOF_REGISTER_CP_FOR_1205_BLENDOUT start", 0 );
    if (NOT (IS_PED_DEAD( l_U2145[2] )))
    {
        ISEQ_REGISTER_ENTITY( 469460336, "PLGE", l_U2145[2], 0 );
    }
    if (NOT (IS_PED_DEAD( l_U2145[4] )))
    {
        ISEQ_REGISTER_ENTITY( 469460336, "PLGE1", l_U2145[4], 0 );
    }
    if (NOT (IS_PED_DEAD( l_U2145[5] )))
    {
        ISEQ_REGISTER_ENTITY( 469460336, "PLGE2", l_U2145[5], 0 );
    }
    if (NOT (IS_PED_DEAD( l_U2145[6] )))
    {
        ISEQ_REGISTER_ENTITY( 469460336, "PLGE3", l_U2145[6], 0 );
    }
    if (NOT (IS_PED_DEAD( l_U2145[7] )))
    {
        ISEQ_REGISTER_ENTITY( 469460336, "PLGE4", l_U2145[7], 0 );
    }
    sub_1656( "GA", "P_ROOF_REGISTER_CP_FOR_1205_BLENDOUT end", 0 );
    return;
}

void sub_35792()
{
    int I;

    for ( I = 0; I <= (l_U2145 - 1); I++ )
    {
        if (sub_13526( l_U2145[I] ))
        {
            sub_35871( l_U2145[I], l_U2014[I]._fU0, l_U2014[I]._fU12 );
        }
    }
    return;
}

void sub_35871(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

void sub_36146()
{
    sub_4537( ref l_U1483 );
    sub_4537( ref l_U1727 );
    sub_4537( ref l_U1736 );
    sub_36183();
    ENABLE_AMBIENT_ZONE( "S_HOTEL_ZONE_BUILDING_COLLAPSE", 1 );
    ENABLE_AMBIENT_STREAM( "S_HOTEL_OUTSIDE", 0 );
    ENABLE_AMBIENT_STREAM( "S_HOTEL_OUTSIDE_ROOFTOP", 1 );
    ENABLE_STATIC_EMITTER( "S_HOTEL_SE_ROOFTOP_RUMBLE_STREAM", 1 );
    return;
}

void sub_36183()
{
    unknown uVar2;

    sub_1656( "GA", "P_ROOF_ACTIVATE_W1_POST_CUTSCENE start", 0 );
    if (NOT (IS_PED_DEAD( sub_3807() )))
    {
        sub_36271( l_U2145[0] );
        if (NOT (IS_PED_DEAD( l_U2145[0] )))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U2145[0], 0 );
            REGISTER_TARGET( l_U2145[0], sub_3807() );
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( l_U2145[0], 0, 0 ), 1 );
        }
        sub_36271( l_U2145[1] );
        if (NOT (IS_PED_DEAD( l_U2145[1] )))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U2145[1], 0 );
            REGISTER_TARGET( l_U2145[1], sub_3807() );
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( l_U2145[1], 0, 0 ), 1 );
        }
        sub_36271( l_U2145[2] );
        if (NOT (IS_PED_DEAD( l_U2145[2] )))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U2145[2], 0 );
            REGISTER_TARGET( l_U2145[2], sub_3807() );
            sub_36628( ref l_U2168, l_U2145[2], 1 );
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( l_U2145[2], 0, 0 ), 1 );
        }
        sub_36271( l_U2145[3] );
        if (NOT (IS_PED_DEAD( l_U2145[3] )))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U2145[3], 0 );
            REGISTER_TARGET( l_U2145[3], sub_3807() );
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( l_U2145[3], 0, 0 ), 1 );
        }
        sub_36271( l_U2145[4] );
        if (NOT (IS_PED_DEAD( l_U2145[4] )))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U2145[4], 0 );
            REGISTER_TARGET( l_U2145[4], sub_3807() );
            sub_36628( ref l_U2164, l_U2145[4], 1 );
            sub_36628( ref l_U2166, l_U2145[4], 1 );
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( l_U2145[4], 0, 0 ), 1 );
        }
        sub_36271( l_U2145[5] );
        if (NOT (IS_PED_DEAD( l_U2145[5] )))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U2145[5], 0 );
            REGISTER_TARGET( l_U2145[5], sub_3807() );
            sub_36628( ref l_U2164, l_U2145[5], 1 );
            sub_36628( ref l_U2166, l_U2145[5], 1 );
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( l_U2145[5], 0, 0 ), 1 );
        }
        sub_36271( l_U2145[6] );
        if (NOT (IS_PED_DEAD( l_U2145[6] )))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U2145[6], 0 );
            REGISTER_TARGET( l_U2145[6], sub_3807() );
            SET_PED_SUGGESTED_COVER_POINT( l_U2145[6], "GenCover", "C8D703C8_49F04738_Popover4" );
            sub_36628( ref l_U2164, l_U2145[6], 1 );
            sub_36628( ref l_U2166, l_U2145[6], 1 );
            sub_36628( ref l_U2165, l_U2145[6], 1 );
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( l_U2145[6], 0, 0 ), 1 );
        }
        sub_36271( l_U2145[7] );
        if (NOT (IS_PED_DEAD( l_U2145[7] )))
        {
            REGISTER_TARGET( l_U2145[7], sub_3807() );
            SET_PED_SUGGESTED_COVER_POINT( l_U2145[7], "GenCover", "C8D703C8_49F04738_Popover1" );
            sub_36628( ref l_U2164, l_U2145[7], 1 );
            sub_36628( ref l_U2166, l_U2145[7], 1 );
            sub_36628( ref l_U2165, l_U2145[7], 1 );
            OPEN_SEQUENCE_TASK( ref uVar2 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_ATTACK_MOVE_WHILE_AIMING_AT_PED( 0, 2.07000000, 25.15000000, 42.75000000, sub_3807(), 1, 1092616192, 1101004800, -1082130432, 3 );
            TASK_SHOOT_AT_PED( 0, sub_3807(), 2000, 0, 0, 0, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_3807() );
            CLOSE_SEQUENCE_TASK( uVar2 );
            TASK_PERFORM_SEQUENCE( l_U2145[7], uVar2 );
            CLEAR_SEQUENCE_TASK( uVar2 );
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( l_U2145[7], 0, 0 ), 1 );
        }
    }
    sub_1656( "GA", "P_ROOF_ACTIVATE_W1_POST_CUTSCENE end", 0 );
    return;
}

void sub_36271(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 0 );
        SET_PED_VISIBLE( uParam0, 1 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 1 );
        FREEZE_PED_POSITION( uParam0, 0 );
        SET_PED_COLLISION( uParam0, 1 );
        SET_PED_PROOFS( uParam0, 0, 0, 0, 0, 0 );
    }
    return;
}

void sub_36628(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_TETHERING_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_TETHERING_OPTION( uParam1, uParam2 );
    }
    return;
}

void sub_38210(unknown uParam0, unknown uParam1)
{
    sub_1656( "RJM", "REGISTER_PEDS_HOTEL_CUT_12_05", "***" );
    if (sub_13511())
    {
        CUTSCENE_REGISTER_PED_TELEPORT( sub_3807(), g_U1020[10], g_U1123[10] );
        CUTSCENE_REGISTER_SET_PLAYER_IN_COVER( "GenCover", "C8D703C8_30D084ED_Corner1", 1, 1 );
        CUTSCENE_SET_COVER_CAMERA_DIRECTION( g_U1158[10], g_U1193[10] );
        CUTSCENE_REGISTER_ISEQ( 469460336 );
        ISEQ_REGISTER_ENTITY( 469460336, "Max", sub_3807(), 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( sub_38416(), "W_PI_Clt1911_Aa_H", 0 );
        CUTSCENE_REGISTER_PED_WEAPON_HAND( sub_3807(), sub_38416(), 0 );
    }
    sub_38877( uParam1, "Nevs_Unif", "W_AR_97LC_Aa_H^4" );
    sub_38877( ref (uParam0^)[0], "H_Crac_Sold_C", "W_AR_97LC_Aa_H" );
    sub_38877( ref (uParam0^)[1], "H_Crac_Sold_C^1", "W_AR_97LC_Aa_H^1" );
    sub_38877( ref (uParam0^)[2], "H_Crac_Sold_C^2", "W_AR_97LC_Aa_H^2" );
    sub_38877( ref (uParam0^)[3], "H_Crac_Sold_C^3", "W_AR_97LC_Aa_H^3" );
    sub_38877( ref (uParam0^)[4], "H_Crac_Sold_C^4", "W_SB_Uzi_Aa_H" );
    sub_38877( ref (uParam0^)[5], "H_Crac_Sold_C^5", "W_SB_Uzi_Aa_H^1" );
    sub_38877( ref (uParam0^)[6], "H_Crac_Sold_C^6", "W_SB_Uzi_Aa_H^2" );
    return;
}

int sub_38416()
{
    unknown Result;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_3807() )) == 0)
    {
        Result = GET_WEAPON_FROM_HAND( sub_3807(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( Result )) == 1)
        {
            if ((sub_38479( Result )) == 1)
            {
                return Result;
            }
        }
        uVar3 = GET_WEAPON_FROM_HAND( sub_3807(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            return uVar3;
        }
        uVar4 = GET_WEAPON_FROM_HOLSTER( sub_3807(), 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar4 )) == 1)
        {
            return uVar4;
        }
        uVar5 = GET_WEAPON_FROM_HOLSTER( sub_3807(), 1 );
        if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
        {
            return uVar5;
        }
    }
    return 0;
}

int sub_38479(unknown uParam0)
{
    int iVar3;

    if ((GET_DOES_WEAPON_EXIST( uParam0 )) == 1)
    {
        iVar3 = GET_WEAPON_TYPE( uParam0 );
        if ((iVar3 == 1194438308) || ((iVar3 == -76667461) || ((iVar3 == -1404433099) || ((iVar3 == 1131969637) || ((iVar3 == -691403429) || ((iVar3 == 1845102363) || ((iVar3 == 150541352) || ((iVar3 == -820634585) || ((iVar3 == -612753081) || ((iVar3 == 811797242) || ((iVar3 == 68019059) || ((iVar3 == -1464892298) || ((iVar3 == 456708483) || ((iVar3 == -862236369) || (iVar3 == 406496141)))))))))))))))
        {
            return 1;
        }
    }
    return 0;
}

void sub_38877(unknown uParam0, unknown uParam1, unknown uParam2)
{
    uParam2 = uParam2;
    if (sub_13526( (uParam0^) ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam0^), uParam1, 0 );
        SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( (uParam0^), 0, 0 ), 0 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( (uParam0^), "/Global/PLGE/PLGE_Root/PLGE_INITIALIZE_IDLE" );
    }
    return;
}

void sub_39351(boolean bParam0, boolean bParam1, unknown uParam2)
{
    int Result;
    int iVar6;
    int iVar7;
    unknown uVar8;

    Result = 0;
    if (IS_STRING_NULL( uParam2 ))
    {
        uParam2 = l_U2770;
    }
    switch (l_U2751)
    {
        case 1:
        sub_1656( "RJM", "PLAY_HOTEL_CUT_12_05 start", "*****" );
        sub_35195( 1, 0, 0, 1 );
        sub_26412( uParam2, 1 );
        if (NOT bParam0)
        {
            sub_39518();
            sub_39836();
            sub_38210( ref l_U2771, ref l_U2871 );
        }
        REGISTER_HIDE_ENTITY_AT_POSITION( -1702366341, 23.05440000, 42.74555000, 41.05700000 );
        REGISTER_HIDE_ENTITY_AT_POSITION( 609227234, 24.41670000, 40.53064000, 41.05700000 );
        sub_26212( 1721151522, 0 );
        l_U2885 = 0;
        l_U2886 = 0;
        l_U2751 = 2;
        break;
        case 2:
        if (bParam1)
        {
            START_CUTSCENE_CAPTURE( uParam2 );
        }
        if (bParam0)
        {
            CUTSCENE_ENABLE_SKIP( 0 );
        }
        START_SEAMLESS_CUTSCENE();
        l_U2751 = 3;
        break;
        case 3:
        sub_40307( 1 );
        iVar7 = sub_38416();
        if ((GET_DOES_WEAPON_EXIST( iVar7 )) == 1)
        {
            if (iVar7 == (GET_WEAPON_FROM_SLOT( sub_3807(), 0 )))
            {
                SET_WEAPON_SLOT( sub_3807(), iVar7, 1 );
            }
        }
        uVar8 = GET_WEAPON_FROM_HAND( sub_3807(), 1, 0 );
        if (GET_DOES_WEAPON_EXIST( uVar8 ))
        {
            SET_WEAPON_VISIBLE( uVar8, 0 );
        }
        if (GET_DOES_WEAPON_EXIST( sub_40562() ))
        {
            SET_WEAPON_VISIBLE( sub_40562(), 0 );
        }
        l_U2751 = 4;
        break;
        case 4:
        if (HAS_CUTSCENE_FINISHED())
        {
            l_U2751 = 5;
        }
        else
        {
            iVar6 = GET_CUTSCENE_TIME();
            if (iVar6 >= 25)
            {
                CUTSCENE_ENABLE_SKIP( 1 );
            }
            if (NOT l_U2885)
            {
                if (iVar6 >= 15)
                {
                    sub_26212( 1721151522, 1 );
                    sub_41077();
                    sub_34592();
                    l_U2885 = 1;
                }
            }
            if (NOT l_U2886)
            {
                if (iVar6 >= 17)
                {
                    if (GET_DOES_WEAPON_EXIST( sub_40562() ))
                    {
                        SET_WEAPON_VISIBLE( sub_40562(), 1 );
                    }
                    if (GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HAND( sub_3807(), 1, 0 ) ))
                    {
                        SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( sub_3807(), 1, 0 ), 1 );
                    }
                    l_U2886 = 1;
                }
            }
        }
        break;
        case 5:
        if (bParam1)
        {
            STOP_CUTSCENE_CAPTURE();
        }
        Result = 1;
        if (NOT bParam0)
        {
            sub_8352( ref l_U2771 );
        }
        sub_8386( l_U2871 );
        sub_42112();
        sub_42251( 1, 1 );
        l_U2751 = 0;
        sub_1656( "RJM", "PLAY_HOTEL_CUT_12_05 end", "*****" );
        break;
        case 0:
        l_U2751 = 1;
        break;
    }
    return Result;
}

void sub_39518()
{
    sub_1656( "RJM", "BLOCKLOAD_HOTEL_CUT_12_05_ASSETS", "***" );
    sub_39585( 466468872 );
    sub_39585( 928600325 );
    sub_39585( 609227234 );
    sub_39585( -1702366341 );
    sub_39585( 547887525 );
    sub_39585( 112963195 );
    sub_39585( 1844299595 );
    return;
}

void sub_39585(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
        sub_8784( "[SP]### ERROR! (BlockLoadModel) Trying to block load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    LOAD_ALL_OBJECTS_NOW();
    while ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        LOAD_ALL_OBJECTS_NOW();
        WAIT( 0 );
    }
    return;
}

void sub_39836()
{
    int I;

    sub_20020( ref l_U2872, 0, 0, 0, 0, 1460404455, 26, 6, 0, 0, 0 );
    sub_20020( ref l_U2779[0], 0, 0, 0, 0, 1843238895, 26, 6, 0, 0, 0 );
    sub_20020( ref l_U2779[1], 0, 0, 0, 0, 1737415154, 26, 6, 0, 0, 0 );
    sub_20020( ref l_U2779[2], 0, 0, 0, 0, 1820013202, 26, 6, 0, 0, 0 );
    sub_20020( ref l_U2779[3], 0, 0, 0, 0, 1230663476, 26, 6, 0, 0, 0 );
    sub_20020( ref l_U2779[4], 0, 0, 0, 0, -110444939, 26, 6, 0, 0, 0 );
    sub_20020( ref l_U2779[5], 0, 0, 0, 0, -263273570, 26, 6, 0, 0, 0 );
    sub_20020( ref l_U2779[6], 0, 0, 0, 0, -1091825948, 26, 6, 0, 0, 0 );
    l_U2871 = sub_27611( ref l_U2872 );
    for ( I = 0; I <= (l_U2771 - 1); I++ )
    {
        l_U2771[I] = sub_27611( ref l_U2779[I] );
    }
    return;
}

void sub_40307(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_3807() )) == 0)
    {
        iVar3 = 0;
        uVar4 = GET_WEAPON_FROM_HAND( sub_3807(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar4 )) == 0)
        {
            iVar3 = 1;
        }
        if (((sub_38479( uVar4 )) == 0) AND ((GET_DOES_WEAPON_EXIST( uVar4 )) == 1))
        {
            iVar3 = 1;
        }
        if (iVar3 == 1)
        {
            uVar5 = sub_38416();
            if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
            {
                SELECT_WEAPON_TO_HAND( sub_3807(), uVar5, 0, uParam0 );
            }
        }
    }
    return;
}

int sub_40562()
{
    unknown Result;
    unknown uVar3;

    if ((IS_PED_DEAD( sub_3807() )) == 0)
    {
        Result = GET_WEAPON_FROM_HAND( sub_3807(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( Result )) == 1)
        {
            if ((sub_40625( Result )) == 1)
            {
                return Result;
            }
        }
        uVar3 = GET_WEAPON_FROM_HOLSTER( sub_3807(), 2 );
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            return uVar3;
        }
    }
    return 0;
}

int sub_40625(unknown uParam0)
{
    int iVar3;

    if ((GET_DOES_WEAPON_EXIST( uParam0 )) == 1)
    {
        iVar3 = GET_WEAPON_TYPE( uParam0 );
        if ((iVar3 == -2075384407) || ((iVar3 == 10648147) || ((iVar3 == 1224272620) || ((iVar3 == 1478009203) || ((iVar3 == 1964270085) || ((iVar3 == -110877124) || ((iVar3 == 427207702) || ((iVar3 == 319712764) || ((iVar3 == 514118749) || ((iVar3 == -184942895) || ((iVar3 == -168327769) || ((iVar3 == 434544317) || ((iVar3 == -1659006841) || ((iVar3 == 930042831) || ((iVar3 == 1001413062) || ((iVar3 == 377623895) || ((iVar3 == -1312131151) || ((iVar3 == -1787162676) || ((iVar3 == 724901397) || ((iVar3 == 57534114) || ((iVar3 == 840671040) || ((iVar3 == 1308526797) || ((iVar3 == -1074756423) || ((iVar3 == 1992962408) || (iVar3 == -1013714740)))))))))))))))))))))))))
        {
            return 1;
        }
    }
    return 0;
}

void sub_41077()
{
    sub_41087();
    sub_1656( "RJM", "CREATE_STATIC_ROOFTOP_PIECES_FOR_CUTSCENE - start", 0 );
    l_U2679 = sub_30753( l_U2681, -11.00000000, 0.00000000, 42.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2679 ))
    {
        FREEZE_OBJECT_POSITION( l_U2679, 1 );
    }
    l_U2689 = sub_30753( l_U2693, 6.00000000, 40.00000000, 38.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2689 ))
    {
        FREEZE_OBJECT_POSITION( l_U2689, 1 );
    }
    l_U2700 = sub_30753( l_U2702, 3.00000000, 44.00000000, 40.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2700 ))
    {
        FREEZE_OBJECT_POSITION( l_U2700, 1 );
    }
    l_U2709 = sub_30753( l_U2715, 8.00000000, 28.00000000, 39.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2709 ))
    {
        FREEZE_OBJECT_POSITION( l_U2709, 1 );
    }
    l_U2712 = sub_30753( l_U2718, 8.00000000, 28.00000000, 39.50000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2712 ))
    {
        FREEZE_OBJECT_POSITION( l_U2712, 1 );
    }
    l_U2734 = sub_30753( l_U2739, 26.00000000, 30.00000000, 43.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2734 ))
    {
        FREEZE_OBJECT_POSITION( l_U2734, 1 );
    }
    l_U2738 = sub_30753( l_U2743, 32.00000000, 29.00000000, 46.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U2738 ))
    {
        FREEZE_OBJECT_POSITION( l_U2738, 1 );
    }
    sub_30695( ref l_U2636, -1267912278, 14.00000000, 27.00000000, 42.80000000, 1, 0 );
    sub_30695( ref l_U2638, 1550581806, 14.00000000, 27.00000000, 42.80000000, 1, 0 );
    sub_1656( "RJM", "CREATE_STATIC_ROOFTOP_PIECES_FOR_CUTSCENE - end", 0 );
    return;
}

void sub_41087()
{
    sub_6914( l_U2679 );
    sub_6914( l_U2689 );
    sub_6914( l_U2700 );
    sub_6914( l_U2709 );
    sub_6914( l_U2712 );
    sub_6914( l_U2734 );
    sub_6914( l_U2738 );
    sub_6914( l_U2636 );
    sub_6914( l_U2638 );
    sub_6914( l_U2642 );
    return;
}

void sub_42112()
{
    sub_1656( "RJM", "UNLOAD_HOTEL_CUT_12_05_ASSETS", "***" );
    sub_9036( 466468872 );
    sub_9036( 928600325 );
    sub_9036( 609227234 );
    sub_9036( -1702366341 );
    sub_9036( 547887525 );
    sub_9036( 112963195 );
    sub_9036( 1844299595 );
    return;
}

void sub_42251(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD( sub_3807() )))
    {
        SET_PLAYER_CONTROL( sub_3829(), 1, 0 );
        SET_PED_INVINCIBLE( sub_3807(), 0 );
        if (bParam0)
        {
            sub_42332();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

void sub_42332()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_3807() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND( sub_3807(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND( sub_3807(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_3807(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_3807(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

int sub_42710()
{
    int I;

    for ( I = 0; I <= (l_U1355 - 1); I++ )
    {
        if (NOT (HAS_MODEL_LOADED( l_U1355[I] )))
        {
            return 0;
        }
    }
    return 1;
}

void sub_42894()
{
    unknown uVar2;

    sub_1656( "GA", "P_ROOF_START_BLENDOUT_1205_FROM_CUTSCENE start", 0 );
    sub_35792();
    sub_36146();
    if (NOT (IS_PED_DEAD( sub_3807() )))
    {
        SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( sub_3807(), 0, 0 ), 0 );
        uVar2 = GET_WEAPON_FROM_HAND( sub_3807(), 0, 0 );
        if (GET_DOES_WEAPON_EXIST( uVar2 ))
        {
            sub_1656( "GA", "Adding one clip of ammo to right hand weapon.", 0 );
            ADD_AMMO_TO_PED( sub_3807(), GET_WEAPON_TYPE( uVar2 ), GET_MAX_AMMO_IN_CLIP( sub_3807(), GET_WEAPON_TYPE( uVar2 ) ), 0 );
        }
        uVar2 = GET_WEAPON_FROM_HAND( sub_3807(), 1, 0 );
        if (GET_DOES_WEAPON_EXIST( uVar2 ))
        {
            sub_1656( "GA", "Adding one clip of ammo to left hand weapon.", 0 );
            ADD_AMMO_TO_PED( sub_3807(), GET_WEAPON_TYPE( uVar2 ), GET_MAX_AMMO_IN_CLIP( sub_3807(), GET_WEAPON_TYPE( uVar2 ) ), 0 );
        }
        uVar2 = GET_WEAPON_FROM_HOLSTER( sub_3807(), 2 );
        if (GET_DOES_WEAPON_EXIST( uVar2 ))
        {
            sub_1656( "GA", "Adding one clip of ammo to rifle holster weapon.", 0 );
            ADD_AMMO_TO_PED( sub_3807(), GET_WEAPON_TYPE( uVar2 ), GET_MAX_AMMO_IN_CLIP( sub_3807(), GET_WEAPON_TYPE( uVar2 ) ), 0 );
        }
        uVar2 = GET_WEAPON_FROM_HOLSTER( sub_3807(), 1 );
        if (GET_DOES_WEAPON_EXIST( uVar2 ))
        {
            sub_1656( "GA", "Adding one clip of ammo to pistol left holster weapon.", 0 );
            ADD_AMMO_TO_PED( sub_3807(), GET_WEAPON_TYPE( uVar2 ), GET_MAX_AMMO_IN_CLIP( sub_3807(), GET_WEAPON_TYPE( uVar2 ) ), 0 );
        }
        uVar2 = GET_WEAPON_FROM_HOLSTER( sub_3807(), 0 );
        if (GET_DOES_WEAPON_EXIST( uVar2 ))
        {
            sub_1656( "GA", "Adding one clip of ammo to pistol right holster weapon.", 0 );
            ADD_AMMO_TO_PED( sub_3807(), GET_WEAPON_TYPE( uVar2 ), GET_MAX_AMMO_IN_CLIP( sub_3807(), GET_WEAPON_TYPE( uVar2 ) ), 0 );
        }
    }
    PLAY_SCRIPT_STREAM_FROM_COORD( 4.03000000, 41.40000000, 39.73000000, 0 );
    TRIGGER_EXPLOSION_AUDIO_MIX_LAYER( "S_HOTEL_EXP_BACK_COLLAPSE", 4.03000000, 41.40000000, 39.73000000 );
    CAMERA_PLAY_ANIMATED( "LEVEL_S_HOTEL_CP_09", "B_OUT_12_05_HOTEL_CAM", 0, 0, 0, 0, 0, 0, 0 );
    sub_36146();
    sub_1656( "GA", "P_ROOF_START_BLENDOUT_1205_FROM_CUTSCENE end", 0 );
    return;
}

void sub_44068()
{
    int I;
    int J;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    vector[15] vVar7;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;
    unknown uVar36;
    unknown uVar37;
    unknown uVar38;
    unknown uVar39;
    unknown uVar40;
    unknown uVar41;
    unknown uVar42;
    unknown uVar43;
    unknown uVar44;
    unknown uVar45;
    unknown uVar46;
    unknown uVar47;
    unknown uVar48;
    unknown uVar49;
    unknown uVar50;
    unknown uVar51;
    unknown uVar52;
    vector[4] vVar53;
    unknown uVar58;
    unknown uVar59;
    unknown uVar60;
    unknown uVar61;
    unknown uVar62;
    unknown uVar63;
    unknown uVar64;
    unknown uVar65;
    unknown uVar66;
    unknown uVar67;
    unknown uVar68;
    unknown uVar69;
    unknown uVar70;
    unknown uVar71;
    vector[7] vVar72;
    unknown uVar80;
    unknown uVar81;
    unknown uVar82;
    unknown uVar83;
    unknown uVar84;
    unknown uVar85;
    unknown uVar86;
    unknown uVar87;
    unknown uVar88;
    unknown uVar89;
    unknown uVar90;
    unknown uVar91;
    unknown uVar92;
    unknown uVar93;
    vector[2] vVar94;
    unknown uVar97;
    unknown uVar98;
    unknown uVar99;
    unknown uVar100;
    unknown uVar101;
    unknown uVar102;
    unknown uVar103;
    unknown uVar104;
    unknown uVar105;
    unknown uVar106;

    sub_1656( "GA", "P_ROOF_START_DUST_EFFECTS start", 0 );
    if (NOT (IS_PED_DEAD( sub_3807() )))
    {
        uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( sub_3807() )};
    }
    array(ref vVar7, 15);
    vVar7[0] = {14.00000000, 27.00000000, 43.00000000};
    vVar7[1] = {15.00000000, 29.00000000, 42.50000000};
    vVar7[2] = {8.70000000, 20.00000000, 42.50000000};
    vVar7[3] = {4.25000000, 31.63000000, 42.50000000};
    vVar7[4] = {5.00000000, 19.00000000, 42.50000000};
    vVar7[5] = {2.00000000, 22.00000000, 42.50000000};
    vVar7[6] = {10.00000000, 19.00000000, 45.50000000};
    vVar7[7] = {6.50000000, 10.50000000, 45.50000000};
    vVar7[8] = {5.00000000, 6.00000000, 45.50000000};
    vVar7[9] = {-2.00000000, 7.00000000, 45.70000000};
    vVar7[10] = {18.00000000, 41.80000000, 44.30000000};
    vVar7[11] = {21.80000000, 43.80000000, 43.50000000};
    vVar7[12] = {21.80000000, 35.10000000, 45.50000000};
    vVar7[13] = {29.20000000, 25.60000000, 45.50000000};
    vVar7[14] = {19.50000000, 14.50000000, 45.50000000};
    array(ref vVar53, 4);
    for ( I = 0; I <= 3; I++ )
    {
        vVar53[I] = {0.00000000, 0.00000000, 0.00000000};
    }
    for ( I = 0; I < vVar7; I++ )
    {
        uVar66 = {vVar7[I]};
        if (IS_SPHERE_VISIBLE( uVar66, 2.00000000, 0 ))
        {
            for ( J = 0; J <= 3; J++ )
            {
                if ((GET_DISTANCE_BETWEEN_COORDS( uVar4, uVar66, 1 )) < (GET_DISTANCE_BETWEEN_COORDS( uVar4, vVar53[J], 1 )))
                {
                    uVar69 = {vVar53[J]};
                    vVar53[J] = {uVar66};
                    uVar66 = {uVar69};
                }
            }
        }
    }
    for ( I = 0; I <= 3; I++ )
    {
        if (NOT (sub_44741( vVar53[I], 0.00000000, 0.00000000, 0.00000000, 1 )))
        {
            l_U1807[I] = START_PARTICLE_FX_LOOPED_AT_COORD( "HO_DebrisFall_S", vVar53[I], 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        }
    }
    array(ref vVar72, 7);
    vVar72[0] = {16.54000000, 38.95000000, 39.65000000};
    vVar72[1] = {7.00000000, 38.00000000, 39.65000000};
    vVar72[2] = {5.00000000, 23.00000000, 39.65000000};
    vVar72[3] = {-4.00000000, 20.00000000, 39.65000000};
    vVar72[4] = {-8.00000000, 15.00000000, 39.65000000};
    vVar72[5] = {9.20000000, 12.70000000, 42.65000000};
    vVar72[6] = {15.00000000, 20.70000000, 42.65000000};
    array(ref vVar94, 2);
    for ( I = 0; I <= 1; I++ )
    {
        vVar94[I] = {0.00000000, 0.00000000, 0.00000000};
    }
    for ( I = 0; I < vVar72; I++ )
    {
        uVar101 = {vVar72[I]};
        if (IS_SPHERE_VISIBLE( uVar101, 2.00000000, 0 ))
        {
            for ( J = 0; J <= 1; J++ )
            {
                if ((GET_DISTANCE_BETWEEN_COORDS( uVar4, uVar101, 1 )) < (GET_DISTANCE_BETWEEN_COORDS( uVar4, vVar94[J], 1 )))
                {
                    uVar104 = {vVar94[J]};
                    vVar94[J] = {uVar101};
                    uVar101 = {uVar104};
                }
            }
        }
    }
    for ( I = 0; I <= 1; I++ )
    {
        if (NOT (sub_44741( vVar94[I], 0.00000000, 0.00000000, 0.00000000, 1 )))
        {
            START_PARTICLE_FX_NON_LOOPED_AT_COORD( "HOTEL_Dust_Rumble_Lrg_S", vVar94[I], 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        }
    }
    sub_1656( "GA", "P_ROOF_START_DUST_EFFECTS end", 0 );
    return;
}

int sub_44741(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6)
{
    if ((GET_DISTANCE_BETWEEN_COORDS( uParam0, uParam3, uParam6 )) == 0)
    {
        return 1;
        break;
    }
    return 0;
}

void sub_45479()
{
    sub_1656( "GA", "P_ROOF_W1_ENEMIES_START_FALL_DOWN start", 0 );
    if (NOT (IS_PED_DEAD( l_U2145[0] )))
    {
        SET_PED_TO_RAGDOLL_WITH_FALL( l_U2145[0], 500, 500, 0, sub_45593( 5.98000000, 37.09000000, 40.23000000 ), 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000 );
    }
    if (NOT (IS_PED_DEAD( l_U2145[1] )))
    {
        SET_PED_TO_RAGDOLL_WITH_FALL( l_U2145[1], 500, 500, 0, sub_45593( 5.98000000, 37.09000000, 40.23000000 ), 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000 );
    }
    if (NOT (IS_PED_DEAD( l_U2145[3] )))
    {
        SET_PED_TO_RAGDOLL_WITH_FALL( l_U2145[3], 2000, 2000, 0, sub_45593( -18.04000000, 33.19000000, 40.23000000 ), 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000 );
    }
    sub_1656( "GA", "P_ROOF_W1_ENEMIES_START_FALL_DOWN end", 0 );
    return;
}

vector sub_45593(unknown uParam0, unknown uParam1, unknown uParam2)
{
    float fVar5;

    fVar5 = SQRT( ((uParam0._fU0 * uParam0._fU0) + (uParam0._fU4 * uParam0._fU4)) + (uParam0._fU8 * uParam0._fU8) );
    if (fVar5 > 0.00000000)
    {
        return vector( uParam0._fU0 / fVar5, uParam0._fU4 / fVar5, uParam0._fU8 / fVar5);
        break;
    }
    return vector( 0.00000000, 0.00000000, 0.00000000);
}

int sub_46027()
{
    if (l_U1230)
    {
        sub_1656( "CO", "F_IMAGEFX_FADE_IN: IMAGEFX START", 0 );
        START_PANEL_WIPE( 0, 6 );
        PLAY_IMAGEFX( "BULLETCAM_IMPACT", 3, 1 );
        PLAY_IMAGEFX( "BLACK_FADE_UP_FAST_01", 3, 1 );
        DO_SCREEN_FADE_IN( 0 );
        l_U1230 = 0;
        return 1;
        break;
    }
    sub_1656( "CO", "F_IMAGEFX_FADE_IN: NORMAL START", 0 );
    return 0;
}

void sub_46277()
{
    int I;

    for ( I = 0; I <= (l_U2145 - 1); I++ )
    {
        if ((NOT (IS_PED_DEAD( sub_3807() ))) AND (sub_13526( l_U2145[I] )))
        {
            REGISTER_TARGET( l_U2145[I], sub_3807() );
        }
    }
    return;
}

void sub_46508()
{
    sub_1656( "GA", "P_START_ROOFTOP_BACK_COLLAPSE start", 0 );
    sub_6914( l_U2689 );
    if (DOES_OBJECT_EXIST( l_U2690 ))
    {
        SET_OBJECT_VISIBLE( l_U2690, 1 );
        PLAY_OBJECT_ANIM( l_U2690, "P_AN_FLR_COL_BA", "ho_anim_stairs", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U2690, "P_AN_FLR_COL_BA", "ho_anim_stairs", l_U2697 );
    }
    if (DOES_OBJECT_EXIST( l_U2691 ))
    {
        SET_OBJECT_VISIBLE( l_U2691, 1 );
        PLAY_OBJECT_ANIM( l_U2691, "P_AN_FLR_COL_BD", "ho_anim_stairs", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U2691, "P_AN_FLR_COL_BD", "ho_anim_stairs", l_U2698 );
    }
    if (DOES_OBJECT_EXIST( l_U2692 ))
    {
        SET_OBJECT_VISIBLE( l_U2692, 1 );
        PLAY_OBJECT_ANIM( l_U2692, "P_AN_FLR_COL_BE", "ho_anim_stairs", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U2692, "P_AN_FLR_COL_BE", "ho_anim_stairs", l_U2699 );
    }
    sub_6914( l_U2700 );
    if (DOES_OBJECT_EXIST( l_U2701 ))
    {
        SET_OBJECT_VISIBLE( l_U2701, 1 );
        PLAY_OBJECT_ANIM( l_U2701, "P_AN_WAL_COL_AA", "ho_anim_stairs", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U2701, "P_AN_WAL_COL_AA", "ho_anim_stairs", l_U2704 );
    }
    START_PARTICLE_FX_NON_LOOPED_AT_COORD( "HOTEL_Blast_Side_collapse_S", l_U2705, 0.00000000, 0.00000000, 0.00000000, l_U2708 );
    sub_1656( "GA", "P_START_ROOFTOP_BACK_COLLAPSE end", 0 );
    return;
}

void sub_47254()
{
    sub_1656( "GA", "P_ROOF_TRIGGER_ENEMIES_FALLING_IN_COLLAPSE start", 0 );
    if (NOT (IS_PED_DEAD( l_U2145[0] )))
    {
        SET_PED_TO_RAGDOLL_WITH_FALL( l_U2145[0], 2000, 2000, 0, sub_45593( -4.32000000, 50.27000000, 39.75000000 ), 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000 );
    }
    if (NOT (IS_PED_DEAD( l_U2145[1] )))
    {
        SET_PED_TO_RAGDOLL_WITH_FALL( l_U2145[1], 2000, 2000, 0, sub_45593( -4.32000000, 50.27000000, 39.75000000 ), 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000 );
    }
    sub_1656( "GA", "P_ROOF_TRIGGER_ENEMIES_FALLING_IN_COLLAPSE end", 0 );
    return;
}

void sub_47827(unknown uParam0)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        STOP_PED_SPEAKING( uParam0, 1 );
        SET_PED_HEALTH( uParam0, 0, 0 );
        SET_PED_CORPSE( uParam0, 0 );
    }
    return;
}

void sub_47945(unknown uParam0)
{
    if ((uParam0^) != 0)
    {
        STOP_PARTICLE_FX_LOOPED( (uParam0^) );
        (uParam0^) = 0;
    }
    return;
}

void sub_48073(unknown uParam0)
{
    sub_26212( -732347608, uParam0 );
    sub_26212( 243792242, uParam0 );
    sub_26212( -1037534607, uParam0 );
    sub_26212( 1973799339, uParam0 );
    sub_26212( 67436979, uParam0 );
    sub_26212( -1618467083, uParam0 );
    sub_26212( -721108783, uParam0 );
    sub_26212( -2091080413, uParam0 );
    sub_26212( 910452449, uParam0 );
    sub_26212( 1652823720, uParam0 );
    sub_26212( -1077107170, uParam0 );
    sub_26212( -863152154, uParam0 );
    sub_26212( -1683029998, uParam0 );
    sub_26212( 601604623, uParam0 );
    sub_26212( -2117158730, uParam0 );
    sub_26212( 508806708, uParam0 );
    sub_26212( 2124107981, uParam0 );
    sub_26212( 677554510, uParam0 );
    sub_26212( 1704523747, uParam0 );
    sub_26212( 1085034612, uParam0 );
    sub_26212( -246844569, uParam0 );
    sub_26212( -875689657, uParam0 );
    sub_26212( 286256608, uParam0 );
    return;
}

void sub_48367()
{
    if ((NOT IS_LAST_MAN_STANDING_ACTIVE()) AND (NOT IS_BULLET_CAMERA_ACTIVE()))
    {
        if (sub_48404( ref l_U2548, 0 ))
        {
            SET_PED_HEALTH( sub_3807(), 0, 0 );
            l_U1482 = 1;
        }
    }
    return;
}

void sub_48404(int iParam0, unknown uParam1)
{
    if (iParam0->_fU64 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU64 = sub_48446( sub_3807(), (iParam0^) );
        if ((iParam0->_fU64) AND (uParam1))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU64;
}

int sub_48446(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, ref uParam1._fU0 );
    }
    return 0;
}

void sub_48589(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_48626( (uParam0^)[I], uParam1, uParam2, uParam3 );
    }
    return;
}

void sub_48626(unknown uParam0, float fParam1, int iParam2, boolean bParam3)
{
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;

    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        uVar6 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        if (uVar6._fU8 < fParam1)
        {
            if (iParam2 == 1)
            {
                SET_PED_HEALTH( uParam0, 0, 0 );
            }
            if (bParam3)
            {
                sub_8386( uParam0 );
            }
        }
    }
    return;
}

void sub_48768()
{
    if (sub_4657( ref l_U1727 ))
    {
        sub_48792();
    }
    if (sub_4657( ref l_U1736 ))
    {
        if ((NOT IS_BULLET_CAMERA_ACTIVE()) AND ((NOT (IS_GAMEPLAY_CAM_SHAKING( "SMALL_EXPLOSION_SHAKE" ))) AND (NOT (IS_GAMEPLAY_CAM_SHAKING( "MEDIUM_EXPLOSION_SHAKE" )))))
        {
            sub_1656( "GA", "Ambient shaking.", 0 );
            sub_49119();
        }
        sub_5194( ref l_U1736 );
        sub_4537( ref l_U1736 );
        sub_5194( ref l_U1727 );
        sub_4537( ref l_U1727 );
    }
    if (sub_4657( ref l_U1749 ))
    {
        sub_50389();
    }
    sub_14464( ref l_U1758 );
    return;
}

void sub_48792()
{
    sub_1656( "GA", "P_ROOF_BUILDING_PRE_SHAKE start", 0 );
    sub_6283( l_U1745, 0 );
    sub_6446( ref l_U1745 );
    l_U1745 = GET_SOUND_ID();
    PLAY_SOUND_FRONTEND( l_U1745, "S_HOTEL_ROOFTOP_RUMBLE" );
    SET_VARIABLE_ON_SOUND( l_U1745, "DURATION", 7.00000000 );
    sub_1656( "GA", "P_ROOF_BUILDING_PRE_SHAKE end", 0 );
    return;
}

void sub_49119()
{
    sub_1656( "GA", "P_ROOF_TRIGGER_BUILDING_SHAKING start", 0 );
    sub_14672( "HAND_SHAKE", l_U1747 );
    sub_6283( l_U1746, 0 );
    sub_6446( ref l_U1746 );
    l_U1746 = GET_SOUND_ID();
    PLAY_SOUND_FRONTEND( l_U1746, "S_HOTEL_ROOFTOP_FLOOR_DUST" );
    sub_44068();
    sub_49281();
    sub_49422();
    sub_50121( ref l_U1758 );
    sub_4537( ref l_U1749 );
    sub_1656( "CCB", "Starting the HOTEL_ROOF_SHAKING context...", 0 );
    START_CONTEXT( "HOTEL_ROOF_SHAKING" );
    sub_1656( "GA", "P_ROOF_TRIGGER_BUILDING_SHAKING end", 0 );
    return;
}

void sub_49281()
{
    sub_1656( "GA", "P_ROOF_MAX_STUMBLE start", 0 );
    if (NOT (IS_PED_DEAD( sub_3807() )))
    {
        PED_SET_ACTION_INTENTION( sub_3807(), 2, 1500, 0.00000000, 0.00000000, 0.00000000 );
    }
    sub_1656( "GA", "P_ROOF_MAX_STUMBLE end", 0 );
    return;
}

void sub_49422()
{
    int I;
    unknown[14] uVar3;
    int iVar18;
    int iVar19;
    unknown uVar20;
    int iVar21;
    vector[4] vVar22;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    int iVar35;
    int iVar36;

    sub_1656( "GA", "P_ROOF_BUILDING_SHAKING_KNOCK_OVER_ENEMIES start", 0 );
    array(ref uVar3, 14);
    for ( I = 0; I <= 9; I++ )
    {
        uVar3[I] = l_U2145[I];
    }
    for ( I = 0; I <= 0; I++ )
    {
        uVar3[I + 10] = l_U2248[I];
    }
    for ( I = 0; I <= 2; I++ )
    {
        uVar3[(I + 10) + 1] = l_U2361[I];
    }
    for ( I = 0; I <= 42; I++ )
    {
        iVar18 = (GET_RANDOM_INT_IN_RANGE( 0, 1000 )) mod 14;
        iVar19 = (GET_RANDOM_INT_IN_RANGE( 0, 1000 )) mod 14;
        uVar20 = uVar3[iVar18];
        uVar3[iVar18] = uVar3[iVar19];
        uVar3[iVar19] = uVar20;
    }
    iVar21 = ((GET_RANDOM_INT_IN_RANGE( 0, 1000 )) mod 3) + 1;
    array(ref vVar22, 4);
    vVar22[0] = {43.30000000, 49.99000000, 39.75000000};
    vVar22[1] = {-13.29000000, 44.53000000, 39.75000000};
    vVar22[2] = {-4.87000000, -10.16000000, 39.75000000};
    vVar22[3] = {39.98000000, 7.04000000, 39.75000000};
    iVar35 = 0;
    for ( I = 0; I <= 13; I++ )
    {
        if (NOT (IS_PED_DEAD( uVar3[I] )))
        {
            if ((NOT (IS_PED_PROCESSING_FROZEN( uVar3[I] ))) AND ((NOT (IS_PED_USING_MP3_COVER_TASK( uVar3[I] ))) AND (IS_PED_ON_SCREEN( uVar3[I], 0 ))))
            {
                iVar36 = (GET_RANDOM_INT_IN_RANGE( 0, 1000 )) mod 4;
                SET_PED_TO_RAGDOLL_WITH_FALL( uVar3[I], 2000, 2000, 0, sub_45593( vVar22[iVar36] ), 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000 );
                iVar35++;
                sub_2702( iVar35 );
            }
        }
        if (iVar35 >= iVar21)
        {
            return;
        }
    }
    sub_1656( "GA", "P_ROOF_BUILDING_SHAKING_KNOCK_OVER_ENEMIES end", 0 );
    return;
}

void sub_50121(int iParam0)
{
    sub_5194( iParam0 + 40 );
    sub_5194( iParam0 + 76 );
    sub_5194( iParam0 + 112 );
    iParam0->_fU172 = 1;
    iParam0->_fU164 = 0;
    return;
}

void sub_50389()
{
    int I;

    sub_1656( "GA", "P_ROOF_END_BUILDING_SHAKING start", 0 );
    STOP_GAMEPLAY_CAM_SHAKING( "HAND_SHAKE", 0 );
    for ( I = 0; I <= 3; I++ )
    {
        sub_47945( ref l_U1807[I] );
    }
    sub_50508( ref l_U1758, 0 );
    sub_1656( "CCB", "Ending the HOTEL_ROOF_SHAKING context...", 0 );
    END_CONTEXT( "HOTEL_ROOF_SHAKING" );
    sub_1656( "GA", "P_ROOF_END_BUILDING_SHAKING end", 0 );
    return;
}

void sub_50508(int iParam0, int iParam1)
{
    if (iParam0->_fU172 == 1)
    {
        if (iParam1 == 1)
        {
            STOP_CAM_SHAKING( GET_RENDERING_CAM(), iParam1 );
            STOP_GAMEPLAY_CAM_SHAKING( iParam0 + 4, iParam1 );
        }
        else
        {
            STOP_CAM_SHAKING( GET_RENDERING_CAM(), iParam0->_fU160 );
            STOP_GAMEPLAY_CAM_SHAKING( iParam0 + 4, iParam0->_fU160 );
        }
        sub_5194( iParam0 + 40 );
        sub_5194( iParam0 + 76 );
        sub_5194( iParam0 + 112 );
        iParam0->_fU172 = 0;
    }
    return;
}

void sub_50816()
{
    return;
}

int sub_51318()
{
    if (NOT (sub_51334( l_U1564 )))
    {
        sub_1656( "GA", "Player approached explosion 01 area, triggering explosion.", 0 );
        return 1;
    }
    if (NOT (IS_PED_DEAD( sub_3807() )))
    {
        if (DOES_PED_EXIST( l_U2145[2] ))
        {
            if (IS_PED_DEAD( l_U2145[2] ))
            {
                sub_1656( "GA", "Player killed one of the peds near the explosion, triggering explosion.", 0 );
                return 1;
            }
            else if (HAS_PED_BEEN_DAMAGED_BY_PED( l_U2145[2], sub_3807(), 0 ))
            {
                sub_1656( "GA", "Player shot one of the peds near the explosion, triggering explosion.", 0 );
                return 1;
            }
        }
    }
    return 0;
}

void sub_51334(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20)
{
    return sub_48446( sub_3807(), uParam0 );
}

void sub_51863()
{
    WAKE_RESTING_OBJECTS_AROUND( l_U2636 );
    WAKE_RESTING_OBJECTS_AROUND( l_U2638 );
    ADD_EXPLOSION( 14.38075000, 27.11443000, 42.75126000, 0, 1.00000000, 0, 1, 1065353216 );
    sub_30695( ref l_U2636, 21794980, 14.00000000, 27.00000000, 42.80000000, 1, 1 );
    sub_52023( ref l_U2637, -726132516, 14.00000000, 27.00000000, 42.80000000, "P_AN_FLREXP_BB_H", "ho_anim", l_U2646, 1, 0 );
    sub_30695( ref l_U2638, -304211046, 14.00000000, 27.00000000, 42.80000000, 1, 0 );
    sub_52023( ref l_U2639, 429354730, 15.50000000, 29.50000000, 44.00000000, "P_AN_FNCSKN_AA_H", "ho_anim", l_U2647, 1, 0 );
    sub_52023( ref l_U2640, 729316143, 12.50000000, 25.50000000, 44.00000000, "P_AN_FNCSKN_AB_H", "ho_anim", l_U2648, 1, 0 );
    sub_52061( l_U2641, "P_AN_BIGPIP_AA_H", "ho_anim", l_U2649, 0 );
    sub_52061( l_U2643, "P_AN_ELECAB_AA_H", "ho_anim", l_U2650, 0 );
    if (DOES_OBJECT_EXIST( l_U2644 ))
    {
        SET_OBJECT_VISIBLE( l_U2644, 1 );
        SET_OBJECT_COLLISION( l_U2644, 1 );
    }
    sub_52061( l_U2644, "P_AN_FLREXP_BD_H", "ho_anim", l_U2651, 0 );
    START_PARTICLE_FX_NON_LOOPED_AT_COORD( "HO_Explode1_S", l_U2652, 0.00000000, 0.00000000, 0.00000000, l_U2655 );
    l_U2656 = START_PARTICLE_FX_LOOPED_AT_COORD( "HO_GasLineFire_S", l_U2657, 0.00000000, 0.00000000, 0.00000000, l_U2660 );
    sub_4401( ref l_U2594, l_U2661, 1, 0 );
    sub_4537( ref l_U2594 );
    if (GET_ADRENALINE_AMT() < 0.10000000)
    {
        SET_ADRENALINE_AMT( 0.10000000 );
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ACTIVATE_BULLET_TIME( 0, 1065353216, 1 );
    return;
}

void sub_52023(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    sub_30695( uParam0, uParam1, uParam2, uParam8, uParam9 );
    sub_52061( (uParam0^), uParam5, uParam6, uParam7, 0 );
    return;
}

void sub_52061(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        PLAY_OBJECT_ANIM( uParam0, uParam1, uParam2, 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_CURRENT_TIME( uParam0, uParam1, uParam2, uParam4 );
        SET_OBJECT_ANIM_SPEED( uParam0, uParam1, uParam2, uParam3 );
    }
    return;
}

void sub_52684()
{
    int I;

    sub_1656( "GA", "P_ROOF_EXPLOSION01_ENEMY_REACTIONS start", 0 );
    for ( I = 0; I <= 9; I++ )
    {
        if (NOT (IS_PED_DEAD( l_U2145[I] )))
        {
            if (NOT (IS_PED_PROCESSING_FROZEN( l_U2145[I] )))
            {
                if (sub_48446( l_U2145[I], l_U1503 ))
                {
                    sub_47827( l_U2145[I] );
                }
                else if ((NOT (IS_PED_USING_MP3_COVER_TASK( l_U2145[I] ))) AND (sub_48446( l_U2145[I], l_U1524 )))
                {
                    SET_PED_TO_RAGDOLL_WITH_FALL( l_U2145[I], 1000, 1000, 0, sub_45593( -4.32000000, 50.27000000, 39.75000000 ), 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000 );
                }
            }
        }
    }
    sub_1656( "GA", "P_ROOF_EXPLOSION01_ENEMY_REACTIONS end", 0 );
    return;
}

void sub_53139(boolean bParam0)
{
    sub_1656( "GA", "P_ROOF_KNOCK_PLAYER_ON_ASS start", 0 );
    if (NOT (IS_PED_DEAD( sub_3807() )))
    {
        if (bParam0)
        {
            TASK_SET_ACTION_INTENTION( sub_3807(), 4, -1, 1000 );
        }
        else
        {
            TASK_SET_ACTION_INTENTION( sub_3807(), 5, -1, 1000 );
        }
        sub_4537( ref l_U1555 );
    }
    sub_1656( "GA", "P_ROOF_KNOCK_PLAYER_ON_ASS end", 0 );
    return;
}

void sub_53438()
{
    sub_1656( "GA", "P_START_ROOFTOP_MID_COLLAPSE start", 0 );
    sub_6914( l_U2709 );
    WAKE_RESTING_OBJECTS_AROUND( l_U2710 );
    WAKE_RESTING_OBJECTS_AROUND( l_U2711 );
    WAKE_RESTING_OBJECTS_AROUND( l_U2712 );
    if (DOES_OBJECT_EXIST( l_U2710 ))
    {
        SET_OBJECT_VISIBLE( l_U2710, 1 );
        PLAY_OBJECT_ANIM( l_U2710, "P_AN_FLR_HOL_DA", "ho_anim_stairs", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U2710, "P_AN_FLR_HOL_DA", "ho_anim_stairs", l_U2721 );
    }
    if (DOES_OBJECT_EXIST( l_U2711 ))
    {
        SET_OBJECT_VISIBLE( l_U2711, 1 );
        PLAY_OBJECT_ANIM( l_U2711, "P_AN_FLR_HOL_DB", "ho_anim_stairs", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U2711, "P_AN_FLR_HOL_DB", "ho_anim_stairs", l_U2722 );
    }
    if (DOES_OBJECT_EXIST( l_U2712 ))
    {
        PLAY_OBJECT_ANIM( l_U2712, "P_AN_FLR_HOL_DC", "ho_anim_stairs", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U2712, "P_AN_FLR_HOL_DC", "ho_anim_stairs", l_U2723 );
    }
    sub_6914( l_U2644 );
    if (DOES_OBJECT_EXIST( l_U2713 ))
    {
        SET_OBJECT_VISIBLE( l_U2713, 1 );
        PLAY_OBJECT_ANIM( l_U2713, "P_AN_FLREXP_WC_H", "ho_anim", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U2713, "P_AN_FLREXP_WC_H", "ho_anim", l_U2724 );
        SET_OBJECT_COLLISION( l_U2713, 1 );
    }
    sub_6914( l_U2641 );
    sub_6914( l_U2642 );
    if (DOES_OBJECT_EXIST( l_U2714 ))
    {
        SET_OBJECT_VISIBLE( l_U2714, 1 );
        PLAY_OBJECT_ANIM( l_U2714, "P_AN_BIGPIP_WA_H", "ho_anim", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U2714, "P_AN_BIGPIP_WA_H", "ho_anim", l_U2725 );
        SET_OBJECT_COLLISION( l_U2714, 1 );
    }
    START_PARTICLE_FX_NON_LOOPED_AT_COORD( "HOTEL_Mid_collapse_S", l_U2726, 0.00000000, 0.00000000, 0.00000000, l_U2729 );
    START_PARTICLE_FX_NON_LOOPED_AT_COORD( "HOTEL_AC_MID_SteamVent_S", l_U2730, 0.00000000, 0.00000000, 0.00000000, l_U2733 );
    ENABLE_NORMAL_LINE( "roof_simple", "ACUnitPre_Coverline04", 0 );
    ENABLE_COVERPOINTMP3( "roof_simple", "ACUnitPre_Coverpoint01", 0 );
    ENABLE_COVERPOINTMP3( "roof_simple", "ACUnitPre_Coverpoint02", 0 );
    ENABLE_NORMAL_LINE( "roof_simple", "ACUnitPost_CoverLine01", 1 );
    ENABLE_NORMAL_LINE( "roof_simple", "ACUnitPost_CoverLine1L", 1 );
    ENABLE_NORMAL_LINE( "roof_simple", "ACUnitPost_CoverLine1R", 1 );
    sub_1656( "GA", "P_START_ROOFTOP_MID_COLLAPSE end", 0 );
    return;
}

void sub_54733()
{
    sub_1656( "GA", "P_ROOF_START_MID_COLLAPSE_SOUNDS start", 0 );
    sub_6283( l_U1724, 0 );
    sub_6446( ref l_U1724 );
    l_U1724 = GET_SOUND_ID();
    if (NOT (IS_PED_DEAD( sub_3807() )))
    {
        TRIGGER_EXPLOSION_AUDIO_FROM_PED( "S_HOTEL_EXP_MID_COLLAPSE", sub_3807() );
    }
    sub_6283( l_U1725, 0 );
    sub_6446( ref l_U1725 );
    l_U1724 = GET_SOUND_ID();
    if (DOES_OBJECT_EXIST( l_U2712 ))
    {
        PLAY_SOUND_FROM_OBJECT( l_U1725, "S_HOTEL_MID_COLLAPSE_HVAC", l_U2712 );
    }
    sub_6283( l_U1726, 0 );
    sub_6446( ref l_U1726 );
    l_U1724 = GET_SOUND_ID();
    if (DOES_OBJECT_EXIST( l_U2714 ))
    {
        PLAY_SOUND_FROM_OBJECT( l_U1726, "S_HOTEL_MID_COLLAPSE_PIPE", l_U2714 );
    }
    sub_1656( "GA", "P_ROOF_START_MID_COLLAPSE_SOUNDS end", 0 );
    return;
}

void sub_55151()
{
    unknown uVar2;

    sub_1656( "GA", "P_ROOF_W1_ACTIVATE_GATE_ENEMY start", 0 );
    sub_36271( l_U2145[8] );
    sub_55231( l_U2145[8] );
    if ((NOT (IS_PED_DEAD( sub_3807() ))) AND (NOT (IS_PED_DEAD( l_U2145[8] ))))
    {
        REGISTER_TARGET( l_U2145[8], sub_3807() );
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_ATTACK_MOVE_WHILE_AIMING_AT_PED( 0, 2.94000000, 20.10000000, 40.00000000, sub_3807(), 1, 4.00000000, -1.00000000, -1082130432, 3 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        TASK_COMBAT_PED( 0, sub_3807() );
        CLOSE_SEQUENCE_TASK( uVar2 );
        TASK_PERFORM_SEQUENCE( l_U2145[8], uVar2 );
        CLEAR_SEQUENCE_TASK( uVar2 );
    }
    sub_1656( "GA", "P_ROOF_W1_ACTIVATE_GATE_ENEMY end", 0 );
    return;
}

void sub_55231(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        RESET_PED_TETHERING( uParam0 );
    }
    return;
}

void sub_55522()
{
    sub_1656( "GA", "P_ROOF_START_STAIRS_HEAVY_GUNNER start", 0 );
    l_U2233 = sub_27611( ref l_U2220 );
    sub_11557( l_U2233, 319712764, 25000, 0, 0 );
    if (NOT (IS_PED_DEAD( l_U2233 )))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U2233, 0 );
        SET_PED_ALERTNESS( l_U2233, 4 );
        SET_PED_COMBAT_MOVEMENT( l_U2233, 0 );
        SET_PED_NO_RAGDOLL_TO_BULLET_UNLESS_DEAD( l_U2233, 1 );
        SET_PED_AI_TEMPLATE( l_U2233, "AIT_CP_HEAVY_GNR" );
        SET_PED_HEALTH( l_U2233, 300, 0 );
        SET_PED_COMBAT_ATTRIBUTES( l_U2233, 8192, 0 );
        SET_PED_FLAG_BLOCK_WOUNDED_MOVEMENT( l_U2233, 1 );
        SET_BULLET_CAM_PREF( l_U2233, "ALL_LMS_01", "ALL_LMS_01", "ALL_LMS_01", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
        SET_PED_PROOFS( l_U2233, 0, 1, 1, 1, 1 );
    }
    sub_1656( "GA", "P_ROOF_START_STAIRS_HEAVY_GUNNER end", 0 );
    return;
}

void sub_56009()
{
    string[5] sVar2;
    int iVar8;
    int I;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;

    sub_1656( "GA", "P_ROOF_W1_UPPER_ENEMIES_MOVE_TO_LAST_AREA start", 0 );
    array(ref sVar2, 5);
    sVar2[0] = "C8D703C8_5B4D7B26_Popover1";
    sVar2[1] = "C8D703C8_9F92C8AC_Popover1";
    sVar2[2] = "C8D703C8_A24F5677_Corner1";
    sVar2[3] = "C8D703C8_A24F5677_Popover3";
    sVar2[4] = "C8D703C8_A24F5677_Popover1";
    iVar8 = 0;
    for ( I = 0; I <= 9; I++ )
    {
        if (NOT (IS_PED_DEAD( l_U2145[I] )))
        {
            if (NOT (IS_PED_PROCESSING_FROZEN( l_U2145[I] )))
            {
                uVar10 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( l_U2145[I] )};
                if (uVar10._fU8 >= 42.00000000)
                {
                    sub_55231( l_U2145[I] );
                    sub_36628( ref l_U2167, l_U2145[I], 1 );
                    SET_PED_SUGGESTED_COVER_POINT( l_U2145[I], "GenCover", sVar2[iVar8] );
                    iVar8++;
                    if (iVar8 >= 5)
                    {
                        iVar8 = 0;
                    }
                }
            }
        }
    }
    sub_1656( "GA", "P_ROOF_W1_UPPER_ENEMIES_MOVE_TO_LAST_AREA end", 0 );
    return;
}

int sub_56556()
{
    if (NOT (IS_PED_DEAD( l_U2233 )))
    {
        if (IS_PED_SHOOTING( l_U2233 ))
        {
            return 1;
        }
    }
    if ((NOT (IS_PED_DEAD( l_U2248[0] ))) AND (NOT (IS_PED_DEAD( sub_3807() ))))
    {
        if ((HAS_PED_BEEN_DAMAGED_BY_PED( sub_3807(), l_U2248[0], 0 )) || (HAS_PED_BEEN_DAMAGED_BY_PED( l_U2248[0], sub_3807(), 0 )))
        {
            return 1;
        }
    }
    return 0;
}

int sub_56736()
{
    if (IS_LAST_MAN_STANDING_ACTIVE())
    {
        return 0;
    }
    if (NOT (IS_PED_DEAD( l_U2233 )))
    {
        if ((GET_PED_HEALTH( l_U2233 )) <= 200)
        {
            sub_1656( "GA", "Trigger corner explosion because player has damaged Heavy Gunner Enough.", 0 );
            return 1;
        }
    }
    else
    {
        sub_1656( "GA", "Trigger corner explosion because player has killed Heavy Gunner.", 0 );
        return 1;
    }
    if (sub_51334( l_U1648 ))
    {
        sub_1656( "GA", "Trigger corner explosion because player is too close to stairs.", 0 );
        return 1;
    }
    return 0;
}

void sub_57095()
{
    sub_1656( "GA", "P_ROOF_EXPLODE_HEAVY_GUNNER start", 0 );
    if (NOT (IS_PED_DEAD( l_U2233 )))
    {
        ISEQ_REGISTER_ENTITY( -1844315547, "GMED", l_U2233, 0 );
        ISEQ_START( -1844315547 );
    }
    sub_1656( "GA", "P_ROOF_EXPLODE_HEAVY_GUNNER end", 0 );
    return;
}

void sub_57261()
{
    int I;

    sub_1656( "GA", "P_ROOF_HG_ENEMIES_FALL_OVER start", 0 );
    for ( I = 0; I <= 0; I++ )
    {
        if (NOT (IS_PED_DEAD( l_U2248[I] )))
        {
            if (NOT (IS_PED_USING_MP3_COVER_TASK( l_U2248[I] )))
            {
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U2248[I], 0 );
                CLEAR_PED_TASKS( l_U2248[I] );
                if (I == 0)
                {
                    SET_PED_TO_RAGDOLL_WITH_EXPLOSION( l_U2248[0], 2000, 2000, -4.32000000, 50.27000000, 39.75000000 );
                }
                else
                {
                    SET_PED_TO_RAGDOLL_WITH_FALL( l_U2248[I], 2000, 2000, 0, sub_45593( 43.30000000, 49.99000000, 39.75000000 ), 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000 );
                }
            }
        }
    }
    sub_1656( "GA", "P_ROOF_HG_ENEMIES_FALL_OVER end", 0 );
    return;
}

void sub_57602()
{
    sub_6914( l_U2610 );
    sub_6914( l_U2618 );
    sub_6914( l_U2615 );
    SET_OBJECT_VISIBLE( l_U2612, 1 );
    SET_OBJECT_VISIBLE( l_U2611, 1 );
    SET_OBJECT_VISIBLE( l_U2620, 1 );
    SET_OBJECT_VISIBLE( l_U2619, 1 );
    SET_OBJECT_VISIBLE( l_U2616, 1 );
    PLAY_OBJECT_ANIM( l_U2612, "P_AN_DORBEN_AA_H", "ho_anim_stairs", 0.00000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U2611, "P_AN_FENBEN_AA_H", "ho_anim_stairs", 0.00000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U2620, "P_AN_WALEXP_AA_H", "ho_anim_stairs", 0.00000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U2619, "P_AN_WALEXP_AB_H", "ho_anim_stairs", 0.00000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U2616, "P_AN_WALEXP_BA_H", "ho_anim_stairs", 0.00000000, 0, 1 );
    SET_OBJECT_ANIM_SPEED( l_U2612, "P_AN_DORBEN_AA_H", "ho_anim_stairs", l_U2613 );
    SET_OBJECT_ANIM_SPEED( l_U2611, "P_AN_FENBEN_AA_H", "ho_anim_stairs", l_U2614 );
    SET_OBJECT_ANIM_SPEED( l_U2620, "P_AN_WALEXP_AA_H", "ho_anim_stairs", l_U2621 );
    SET_OBJECT_ANIM_SPEED( l_U2619, "P_AN_WALEXP_AB_H", "ho_anim_stairs", l_U2622 );
    SET_OBJECT_ANIM_SPEED( l_U2616, "P_AN_WALEXP_BA_H", "ho_anim_stairs", l_U2617 );
    START_PARTICLE_FX_NON_LOOPED_AT_COORD( "HOTEL_Blast_ACWall_S", l_U2623, 0.00000000, 0.00000000, 0.00000000, l_U2626 );
    START_PARTICLE_FX_NON_LOOPED_AT_COORD( "HOTEL_AC_Steam_S", l_U2627, 0.00000000, 0.00000000, 0.00000000, l_U2630 );
    START_PARTICLE_FX_NON_LOOPED_AT_COORD( "HOTEL_AC_Steam_S", l_U2631, 0.00000000, 0.00000000, 0.00000000, l_U2634 );
    sub_4401( ref l_U2594, l_U2635, 1, 0 );
    sub_4537( ref l_U2594 );
    if (GET_ADRENALINE_AMT() < 0.10000000)
    {
        SET_ADRENALINE_AMT( 0.10000000 );
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ACTIVATE_BULLET_TIME( 0, 1065353216, 1 );
    return;
}

void sub_58501()
{
    sub_1656( "GA", "P_ROOF_START_EXP2_SOUNDS start", 0 );
    TRIGGER_EXPLOSION_AUDIO_FROM_COORDS( "S_HOTEL_EXP_STAIR_EXPLOSION", l_U2623 );
    sub_6283( l_U2217, 0 );
    sub_6446( ref l_U2217 );
    l_U2217 = GET_SOUND_ID();
    if (NOT (IS_PED_DEAD( sub_3807() )))
    {
        PLAY_SOUND_FROM_PED( l_U2217, "S_HOTEL_STAIR_EXPLOSION_SHOCKWAVE", sub_3807() );
    }
    sub_6283( l_U2218, 0 );
    sub_6446( ref l_U2218 );
    l_U2218 = GET_SOUND_ID();
    if (DOES_OBJECT_EXIST( l_U2619 ))
    {
        PLAY_SOUND_FROM_OBJECT( l_U2218, "S_HOTEL_STAIR_EXPLOSION_AIRCON_WHOOSH", l_U2619 );
    }
    sub_6283( l_U2219, 0 );
    sub_6446( ref l_U2219 );
    l_U2219 = GET_SOUND_ID();
    PLAY_SOUND_FROM_COORD( l_U2219, "S_HOTEL_STAIR_EXPLOSION_AIRCON_HIT", -1.97000000, 6.79000000, 44.11000000 );
    sub_1656( "GA", "P_ROOF_START_EXP2_SOUNDS end", 0 );
    return;
}

void sub_59129()
{
    unknown uVar2;

    switch (l_U2250)
    {
        case 1:
        sub_1656( "GA", "e_Roof_HG_EnemySpawn = ENTITY_STATE_INIT", 0 );
        l_U2251 = 0;
        l_U2250 = 2;
        sub_1656( "GA", "e_Roof_HG_EnemySpawn = ENTITY_STATE_INIT", 0 );
        break;
        case 2:
        l_U2248[l_U2251] = sub_27611( ref l_U2234[l_U2251] );
        sub_28290( l_U2248[l_U2251], ref l_U2158 );
        if (NOT (IS_PED_DEAD( l_U2248[l_U2251] )))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U2248[l_U2251], 1 );
            SET_PED_ALERTNESS( l_U2248[l_U2251], 3 );
            SET_PED_COMBAT_ATTRIBUTES( l_U2248[l_U2251], 1024, 0 );
        }
        l_U2251++;
        if (l_U2251 >= 1)
        {
            l_U2250 = 3;
            sub_1656( "GA", "e_Roof_HG_EnemySpawn = ENTITY_STATE_POST_CREATE_SETUP", 0 );
        }
        break;
        case 3:
        sub_28781( ref l_U2248, "pi_Roof_HG_Enemy" );
        sub_11557( l_U2248[0], -612753081, 25000, 0, 0 );
        sub_29145( ref l_U2248[0], "AIT_EXPERT", 5.00000000, 10.00000000 );
        sub_36628( ref l_U2252, l_U2248[0], 1 );
        if (NOT (IS_PED_DEAD( l_U2248[0] )))
        {
            REGISTER_TARGET( l_U2248[0], sub_3807() );
            SET_PED_SUGGESTED_COVER_POINT( l_U2248[0], "GenCover", "C8D703C8_47334F5_Corner2" );
            OPEN_SEQUENCE_TASK( ref uVar2 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_FOLLOW_NAV_MESH_TO_COORD( 0, -2.10000000, 9.65000000, 39.80000000, 3, -1, 1048576000, 0, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_3807() );
            CLOSE_SEQUENCE_TASK( uVar2 );
            TASK_PERFORM_SEQUENCE( l_U2248[0], uVar2 );
            CLEAR_SEQUENCE_TASK( uVar2 );
        }
        l_U2250 = 4;
        sub_1656( "GA", "e_Roof_HG_EnemySpawn = ENTITY_STATE_COMPLETE", 0 );
        break;
    }
    return;
}

void sub_60084()
{
    unknown uVar2;

    sub_1656( "GA", "P_ROOF_W1_ACTIVATE_LAST_AREA_ENEMY start", 0 );
    sub_36271( l_U2145[9] );
    if ((NOT (IS_PED_DEAD( sub_3807() ))) AND (NOT (IS_PED_DEAD( l_U2145[9] ))))
    {
        REGISTER_TARGET( l_U2145[9], sub_3807() );
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_ATTACK_MOVE_WHILE_AIMING_AT_PED( 0, 10.78000000, 21.63000000, 42.80000000, sub_3807(), 1, 4.00000000, -1.00000000, -1082130432, 3 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        TASK_COMBAT_PED( 0, sub_3807() );
        CLOSE_SEQUENCE_TASK( uVar2 );
        TASK_PERFORM_SEQUENCE( l_U2145[9], uVar2 );
        CLEAR_SEQUENCE_TASK( uVar2 );
        SET_PED_SUGGESTED_COVER_POINT( l_U2145[9], "roof_simple", "Corner_Position08" );
    }
    sub_1656( "GA", "P_ROOF_W1_ACTIVATE_LAST_AREA_ENEMY end", 0 );
    return;
}

void sub_60642(int iParam0, unknown uParam1, unknown uParam2)
{
    if ((sub_23730( iParam0 )) == 0)
    {
        sub_23796( iParam0 );
    }
    DOOR_FIND_CLOSEST_SET_FORCE_CLOSE( iParam0->_fU0, iParam0->_fU4, uParam1, uParam2 );
    return;
}

void sub_60708(int iParam0, unknown uParam1)
{
    if ((sub_23730( iParam0 )) == 0)
    {
        sub_23796( iParam0 );
    }
    DOOR_SET_IS_AFFECTED_BY_BULLETS( DOOR_FIND_CLOSEST( iParam0->_fU0, iParam0->_fU4 ), uParam1 );
    return;
}

void sub_60774()
{
    int I;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    sub_1656( "GA", "P_ROOF_W1_LOWER_ENEMIES_RUN_OFF start", 0 );
    for ( I = 0; I <= 9; I++ )
    {
        if (NOT (IS_PED_DEAD( l_U2145[I] )))
        {
            uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( l_U2145[I] )};
            if ((I == 8) || (uVar3._fU8 < 42.00000000))
            {
                sub_55231( l_U2145[I] );
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U2145[I], 1 );
                TASK_FOLLOW_NAV_MESH_TO_COORD( l_U2145[I], -9.27000000, 21.51000000, 39.49000000, 3, -1, 1048576000, 0, 0 );
            }
        }
    }
    if (NOT (IS_PED_DEAD( l_U2248[0] )))
    {
        sub_55231( l_U2248[0] );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U2248[0], 1 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( l_U2248[0], -9.27000000, 21.51000000, 39.49000000, 3, -1, 1048576000, 0, 0 );
    }
    sub_1656( "GA", "P_ROOF_W1_LOWER_ENEMIES_RUN_OFF end", 0 );
    return;
}

int sub_61186(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, float fParam7)
{
    if ((ABSF( sub_61197( ref uParam0 ) )) < fParam7)
    {
        return 1;
        break;
    }
    return 0;
}

void sub_61197(int iParam0)
{
    int iVar3;
    float Result;

    if ((sub_23730( iParam0 )) == 0)
    {
        sub_23796( iParam0 );
    }
    iVar3 = 0;
    Result = 0.00000000;
    GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref iVar3, ref Result );
    return Result;
}

void sub_61337()
{
    int I;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;

    for ( I = 0; I <= 9; I++ )
    {
        if (NOT (IS_PED_DEAD( l_U2145[I] )))
        {
            uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( l_U2145[I] )};
            if ((NOT (IS_PED_ON_SCREEN( l_U2145[I], 0 ))) AND (uVar3._fU8 < 42.00000000))
            {
                sub_8386( l_U2145[I] );
            }
            if (sub_48446( l_U2145[I], l_U2173 ))
            {
                sub_8386( l_U2145[I] );
            }
        }
    }
    if (NOT (IS_PED_DEAD( l_U2248[0] )))
    {
        uVar6 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( l_U2248[0] )};
        if ((NOT (IS_PED_ON_SCREEN( l_U2248[0], 0 ))) AND (uVar6._fU8 < 42.00000000))
        {
            sub_8386( l_U2248[0] );
        }
        if (sub_48446( l_U2248[0], l_U2173 ))
        {
            sub_8386( l_U2248[0] );
        }
    }
    return;
}

void sub_61675()
{
    sub_1656( "GA", "P_START_ROOFTOP_HALL_COLLAPSE start", 0 );
    sub_6914( l_U2734 );
    if (DOES_OBJECT_EXIST( l_U2735 ))
    {
        SET_OBJECT_VISIBLE( l_U2735, 1 );
        SET_OBJECT_COLLISION( l_U2735, 1 );
    }
    if (DOES_OBJECT_EXIST( l_U2736 ))
    {
        SET_OBJECT_VISIBLE( l_U2736, 1 );
        PLAY_OBJECT_ANIM( l_U2736, "P_AN_HALBOX_AA", "ho_anim_stairs", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U2736, "P_AN_HALBOX_AA", "ho_anim_stairs", l_U2744 );
    }
    if (DOES_OBJECT_EXIST( l_U2737 ))
    {
        SET_OBJECT_VISIBLE( l_U2737, 1 );
        PLAY_OBJECT_ANIM( l_U2737, "P_AN_HALBOX_AB", "ho_anim_stairs", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U2737, "P_AN_HALBOX_AB", "ho_anim_stairs", l_U2745 );
    }
    if (DOES_OBJECT_EXIST( l_U2738 ))
    {
        PLAY_OBJECT_ANIM( l_U2738, "P_AN_MICTWR_AA", "ho_anim_stairs", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U2738, "P_AN_MICTWR_AA", "ho_anim_stairs", l_U2746 );
    }
    START_PARTICLE_FX_NON_LOOPED_AT_COORD( "HOTEL_Blast_Hall_Lrg_S", l_U2747, 0.00000000, 0.00000000, 0.00000000, l_U2750 );
    sub_1656( "GA", "P_START_ROOFTOP_HALL_COLLAPSE end", 0 );
    return;
}

void sub_62496()
{
    sub_1656( "MF", "LOAD_ROOFTOP_HEAVY_GUNNER_ASSETS - START", 0 );
    sub_26684( "AMED_HEVY_CORE", 0, 0 );
    sub_62608( "NPC/BOSS_HeavyGunner", 0 );
    sub_26212( 619024212, 0 );
    sub_1656( "MF", "LOAD_ROOFTOP_HEAVY_GUNNER_ASSETS - END", 0 );
    return;
}

void sub_62608(unknown uParam0, int iParam1)
{
    ACTION_TREE_LOAD( uParam0 );
    if (iParam1 == 1)
    {
        while ((IS_ACTION_TREE_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_62756()
{
    return;
}

void sub_62794()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;

    switch (l_U2319)
    {
        case 1:
        sub_1656( "GA", "e_Roof_LA_EnemySpawn = ENTITY_STATE_INIT", 0 );
        l_U2320 = 0;
        sub_1656( "GA", "e_Roof_LA_EnemySpawn = ENTITY_STATE_CREATING", 0 );
        l_U2319 = 2;
        break;
        case 2:
        l_U2361[l_U2320] = sub_27611( ref l_U2321[l_U2320] );
        sub_28290( l_U2361[l_U2320], ref l_U2158 );
        sub_29145( ref l_U2361[l_U2320], "AIT_EXPERT", 3.50000000, 20.00000000 );
        if (NOT (IS_PED_DEAD( l_U2361[l_U2320] )))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U2361[l_U2320], 1 );
            SET_PED_ALERTNESS( l_U2361[l_U2320], 3 );
            SET_PED_PATH_CAN_USE_CLIMBOVERS( l_U2361[l_U2320], 0 );
            SET_PED_PATH_CAN_DROP_FROM_HEIGHT( l_U2361[l_U2320], 0 );
            sub_36628( ref l_U2169[0], l_U2361[l_U2320], 1 );
            sub_36628( ref l_U2169[1], l_U2361[l_U2320], 1 );
            sub_36628( ref l_U2169[2], l_U2361[l_U2320], 1 );
            if (NOT (IS_PED_DEAD( sub_3807() )))
            {
                REGISTER_TARGET( l_U2361[l_U2320], sub_3807() );
            }
        }
        l_U2320++;
        if (l_U2320 >= 3)
        {
            sub_1656( "GA", "e_Roof_LA_EnemySpawn = ENTITY_STATE_POST_CREATE_SETUP", 0 );
            l_U2319 = 3;
        }
        break;
        case 3:
        sub_28781( ref l_U2361, "pi_Roof_LA_Enemy" );
        if (NOT (IS_PED_DEAD( sub_3807() )))
        {
            if (NOT (IS_PED_DEAD( l_U2361[0] )))
            {
                sub_11557( l_U2361[0], 514118749, 25000, 0, 0 );
                OPEN_SEQUENCE_TASK( ref uVar2 );
                TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
                TASK_ATTACK_MOVE_WHILE_AIMING_AT_PED( 0, 26.84000000, 30.02000000, 45.28000000, sub_3807(), 1, 3.50000000, -1.00000000, -1082130432, 3 );
                TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
                TASK_COMBAT_PED( 0, sub_3807() );
                CLOSE_SEQUENCE_TASK( uVar2 );
                TASK_PERFORM_SEQUENCE( l_U2361[0], uVar2 );
                CLEAR_SEQUENCE_TASK( uVar2 );
            }
            if (NOT (IS_PED_DEAD( l_U2361[1] )))
            {
                sub_11557( l_U2361[1], -1013714740, 25000, 0, 0 );
                OPEN_SEQUENCE_TASK( ref uVar3 );
                TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
                TASK_ATTACK_MOVE_WHILE_AIMING_AT_PED( 0, 23.01000000, 34.83000000, 45.29000000, sub_3807(), 1, 3.50000000, -1.00000000, -1082130432, 3 );
                TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
                TASK_COMBAT_PED( 0, sub_3807() );
                CLOSE_SEQUENCE_TASK( uVar3 );
                TASK_PERFORM_SEQUENCE( l_U2361[1], uVar3 );
                CLEAR_SEQUENCE_TASK( uVar3 );
            }
            if (NOT (IS_PED_DEAD( l_U2361[2] )))
            {
                sub_11557( l_U2361[2], -1013714740, 25000, 0, 0 );
                OPEN_SEQUENCE_TASK( ref uVar4 );
                TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
                TASK_ATTACK_MOVE_WHILE_AIMING_AT_PED( 0, 25.07000000, 32.19000000, 45.29000000, sub_3807(), 1, 3.50000000, -1.00000000, -1082130432, 3 );
                TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
                TASK_COMBAT_PED( 0, sub_3807() );
                CLOSE_SEQUENCE_TASK( uVar4 );
                TASK_PERFORM_SEQUENCE( l_U2361[2], uVar4 );
                CLEAR_SEQUENCE_TASK( uVar4 );
            }
        }
        sub_1656( "GA", "e_Roof_LA_EnemySpawn = ENTITY_STATE_COMPLETE", 0 );
        l_U2319 = 4;
        break;
    }
    return;
}

int sub_63999()
{
    if (((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 4 )) == 1) || (((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 5 )) == 1) || ((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 3 )) == 1)))
    {
        return 0;
    }
    if (((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 4 )) == 3) || (((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 5 )) == 3) || ((PED_GET_ACTION_INTENTION_STATUS( sub_3807(), 3 )) == 3)))
    {
        return 0;
    }
    if ((IS_LAST_MAN_STANDING_ACTIVE()) || (IS_BULLET_CAMERA_ACTIVE()))
    {
        return 0;
    }
    return 1;
}

void sub_64246(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result++;
        }
    }
    return Result;
}

int sub_64388()
{
    if ((HAS_MODEL_LOADED( 619024212 )) AND ((IS_ACTION_TREE_LOADED( "NPC/BOSS_HeavyGunner" )) AND (HAS_ANIM_DICT_LOADED( "AMED_HEVY_CORE", 0 ))))
    {
        return 1;
    }
    return 0;
}

void sub_64504()
{
    unknown uVar2;

    sub_1656( "GA", "P_ROOF_START_LAST_HEAVY_GUNNER start", 0 );
    l_U2387 = sub_27611( ref l_U2374 );
    uVar2 = sub_11557( l_U2387, 319712764, 25000, 0, 0 );
    SET_WEAPON_CHANCE_TO_FIRE_BLANKS( uVar2, 75 );
    if (NOT (IS_PED_DEAD( l_U2387 )))
    {
        PED_ACTION_TREE_PLAY_NODE( l_U2387, "/Global/HeavyGunner/HeavyGunner_Loco" );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U2387, 1 );
        SET_PED_ALERTNESS( l_U2387, 3 );
        SET_PED_NO_RAGDOLL_TO_BULLET_UNLESS_DEAD( l_U2387, 1 );
        SET_PED_AI_TEMPLATE( l_U2387, "AIT_CP_HEAVY_GNR" );
        SET_PED_HEALTH( l_U2387, 700, 0 );
        SET_PED_COMBAT_ATTRIBUTES( l_U2387, 8192, 0 );
        SET_PED_IGNORE_LOS_CHECKS( l_U2387, 1 );
        SET_PED_FLAG_BLOCK_WOUNDED_MOVEMENT( l_U2387, 1 );
        SET_PED_ALLOWED_TO_KNEEL_AND_FIRE( l_U2387, 0 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( l_U2387, 1 );
        SET_BULLET_CAM_PREF( l_U2387, "ALL_LMS_16", "ALL_02_MED_FAILSAFE", "ALL_01_FAR_FAILSAFE", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
        SET_PED_PROOFS( l_U2387, 0, 1, 1, 1, 1 );
        SET_PED_BOSS_PECENT_DAMAGED( l_U2387, 1 );
        SET_BOSS_PECENT_DAMAGE( 0.25000000 );
        SET_HELMET_KNOCK_OFF_HEALTH( l_U2387, 300 );
        sub_36628( ref l_U2388, l_U2387, 1 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( l_U2387, 14.27000000, 18.04000000, 46.96000000, 3, -1, 0.01000000, 0, 0 );
    }
    sub_29585( l_U2387 );
    sub_1656( "GA", "P_ROOF_START_LAST_HEAVY_GUNNER end", 0 );
    return;
}

void sub_65373(int iParam0, unknown uParam1)
{
    int Result;
    int I;
    int J;

    Result = 0;
    if (NOT (IS_PED_DEAD( sub_3807() )))
    {
        for ( I = 0; I < iParam0->_fU508; I++ )
        {
            if (sub_51334( iParam0->_fU0[I] ))
            {
                Result = 1;
            }
        }
    }
    if ((uParam1) AND (Result))
    {
        for ( J = 0; J < iParam0->_fU508; J++ )
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( ref iParam0->_fU0[J]._fU0, 0 );
        }
    }
    iParam0->_fU548 = 1;
    return Result;
}

void sub_65609(unknown uParam0, unknown uParam1, unknown uParam2)
{
    unknown uVar5;
    unknown Result;
    unknown uVar7;
    unknown uVar8;

    uVar5 = SQRT( ((uParam0._fU0 * uParam0._fU0) + (uParam0._fU4 * uParam0._fU4)) + (uParam0._fU8 * uParam0._fU8) );
    Result._fU0 = uParam0._fU0 / uVar5;
    Result._fU4 = uParam0._fU4 / uVar5;
    Result._fU8 = uParam0._fU8 / uVar5;
    return Result;
}

void sub_65899(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_14464( ref (uParam0^)[I] );
    }
    return;
}

int sub_66772()
{
    if (IS_PED_DEAD( l_U2387 ))
    {
        return 1;
    }
    else if ((GET_PED_HEALTH( l_U2387 )) < 350)
    {
        return 1;
    }
    return 0;
}

void sub_66932()
{
    sub_1656( "GA", "P_START_ROOFTOP_CORNER_EXPLOSION start", 0 );
    sub_6914( l_U2662 );
    if (DOES_OBJECT_EXIST( l_U2663 ))
    {
        SET_OBJECT_VISIBLE( l_U2663, 1 );
        PLAY_OBJECT_ANIM( l_U2663, "P_AN_FLREXP_AA_H", "ho_anim", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U2663, "P_AN_FLREXP_AA_H", "ho_anim", l_U2668 );
    }
    if (DOES_OBJECT_EXIST( l_U2664 ))
    {
        SET_OBJECT_VISIBLE( l_U2664, 1 );
        PLAY_OBJECT_ANIM( l_U2664, "P_AN_FLREXP_AB_H", "ho_anim", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U2664, "P_AN_FLREXP_AB_H", "ho_anim", l_U2669 );
    }
    sub_6914( l_U2670 );
    sub_6914( l_U2671 );
    if (DOES_OBJECT_EXIST( l_U2672 ))
    {
        SET_OBJECT_VISIBLE( l_U2672, 1 );
        PLAY_OBJECT_ANIM( l_U2672, "P_AN_ACUEXP_AA_H", "ho_anim", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U2672, "P_AN_ACUEXP_AA_H", "ho_anim", l_U2677 );
    }
    if (DOES_OBJECT_EXIST( l_U2673 ))
    {
        SET_OBJECT_VISIBLE( l_U2673, 1 );
        PLAY_OBJECT_ANIM( l_U2673, "P_AN_ACUEXP_AB_H", "ho_anim", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U2673, "P_AN_ACUEXP_AB_H", "ho_anim", l_U2678 );
    }
    sub_6914( l_U2679 );
    if (DOES_OBJECT_EXIST( l_U2680 ))
    {
        SET_OBJECT_VISIBLE( l_U2680, 1 );
        PLAY_OBJECT_ANIM( l_U2680, "P_HO_SATEXP_AA_H", "ho_anim", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U2680, "P_HO_SATEXP_AA_H", "ho_anim", l_U2683 );
    }
    START_PARTICLE_FX_NON_LOOPED_AT_COORD( "HO_Corner_Explo_S", l_U2684, 0.00000000, 0.00000000, 0.00000000, l_U2687 );
    TRIGGER_EXPLOSION_AUDIO_FROM_COORDS( "S_HOTEL_EXP_CORNER_EXPLOSION", -9.50000000, 1.00000000, 41.00000000 );
    sub_4401( ref l_U2594, l_U2688, 1, 0 );
    sub_4537( ref l_U2594 );
    if (GET_ADRENALINE_AMT() < 0.10000000)
    {
        SET_ADRENALINE_AMT( 0.10000000 );
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ACTIVATE_BULLET_TIME( 0, 1065353216, 1 );
    sub_1656( "GA", "P_START_ROOFTOP_CORNER_EXPLOSION end", 0 );
    return;
}

void sub_68259(unknown uParam0, unknown uParam1)
{
    sub_4401( uParam0, uParam1, 1, 0 );
    sub_4537( uParam0 );
    return;
}

void sub_68898()
{
    l_U750._fU4 = {12, 27, 10};
    l_U750._fU16 = 1.00000000;
    l_U750._fU20 = 0;
    l_U750._fU60 = "ho_an_flr002_aa_h";
    l_U750._fU64 = 0;
    l_U767._fU4 = {12, 27, 15};
    l_U767._fU16 = 1.00000000;
    l_U767._fU20 = 0;
    l_U767._fU60 = "ho_an_flr003_aa_h";
    l_U767._fU64 = 0;
    l_U784._fU4 = {12, 27, 20};
    l_U784._fU16 = 1.00000000;
    l_U784._fU20 = 0;
    l_U784._fU60 = "ho_an_flr004_aa_h";
    l_U784._fU64 = 0;
    l_U801._fU4 = {12, 27, 25};
    l_U801._fU16 = 1.00000000;
    l_U801._fU20 = 0;
    l_U801._fU60 = "ho_an_flr005_aa_h";
    l_U801._fU64 = 0;
    l_U818[0]._fU4 = {12, 27, 30};
    l_U818[0]._fU16 = 1.00000000;
    l_U818[0]._fU20 = 0;
    l_U818[0]._fU60 = "ho_an_flr006_aa_h";
    l_U818[0]._fU64 = 0;
    l_U818[1]._fU4 = {12, 27, 30};
    l_U818[1]._fU16 = 1.00000000;
    l_U818[1]._fU20 = 0;
    l_U818[1]._fU60 = "ho_an_flr006_ab_h";
    l_U818[1]._fU64 = 0;
    l_U818[2]._fU4 = {12, 27, 30};
    l_U818[2]._fU16 = 1.00000000;
    l_U818[2]._fU20 = 0;
    l_U818[2]._fU60 = "ho_an_flr006_ac_h";
    l_U818[2]._fU64 = 0;
    l_U818[3]._fU4 = {12, 27, 30};
    l_U818[3]._fU16 = 1.00000000;
    l_U818[3]._fU20 = 0;
    l_U818[3]._fU60 = "ho_an_flr006_ad_h";
    l_U818[3]._fU64 = 0;
    l_U818[4]._fU4 = {18, 47, 31.21900000};
    l_U818[4]._fU16 = 1.00000000;
    l_U818[4]._fU20 = 0;
    l_U818[4]._fU60 = "p_an_winfrm_aa_h";
    l_U818[4]._fU64 = 0;
    l_U818[5]._fU4 = {18, 47, 31.21900000};
    l_U818[5]._fU16 = 1.00000000;
    l_U818[5]._fU20 = 0;
    l_U818[5]._fU60 = "p_an_winfrm_ab_h";
    l_U818[5]._fU64 = 0;
    l_U818[6]._fU4 = {18, 47, 31.21900000};
    l_U818[6]._fU16 = 1.00000000;
    l_U818[6]._fU20 = 0;
    l_U818[6]._fU60 = "p_an_winfrm_ac_h";
    l_U818[6]._fU64 = 0;
    l_U818[7]._fU4 = {18, 47, 31.21900000};
    l_U818[7]._fU16 = 1.00000000;
    l_U818[7]._fU20 = 0;
    l_U818[7]._fU60 = "p_an_winfrm_ad_h";
    l_U818[7]._fU64 = 0;
    l_U955[0]._fU4 = {12, 27, 35};
    l_U955[0]._fU16 = 1.00000000;
    l_U955[0]._fU20 = 0;
    l_U955[0]._fU60 = "ho_an_flr007_aa_h";
    l_U955[0]._fU64 = 0;
    l_U955[1]._fU4 = {12, 27, 35};
    l_U955[1]._fU16 = 1.00000000;
    l_U955[1]._fU20 = 0;
    l_U955[1]._fU60 = "ho_an_flr007_ab_h";
    l_U955[1]._fU64 = 0;
    l_U955[2]._fU4 = {12, 27, 35};
    l_U955[2]._fU16 = 1.00000000;
    l_U955[2]._fU20 = 0;
    l_U955[2]._fU60 = "ho_an_flr007_ac_h";
    l_U955[2]._fU64 = 0;
    l_U955[3]._fU4 = {12, 27, 35};
    l_U955[3]._fU16 = 1.00000000;
    l_U955[3]._fU20 = 0;
    l_U955[3]._fU60 = "ho_an_flr007_ad_h";
    l_U955[3]._fU64 = 0;
    l_U955[4]._fU4 = {12, 27, 35};
    l_U955[4]._fU16 = 1.00000000;
    l_U955[4]._fU20 = 0;
    l_U955[4]._fU60 = "ho_an_flr007_ae_h";
    l_U955[4]._fU64 = 0;
    l_U955[5]._fU4 = {12, 27, 35};
    l_U955[5]._fU16 = 1.00000000;
    l_U955[5]._fU20 = 0;
    l_U955[5]._fU60 = "ho_an_flr007_af_h";
    l_U955[5]._fU64 = 0;
    l_U955[6]._fU4 = {12, 27, 35};
    l_U955[6]._fU16 = 1.00000000;
    l_U955[6]._fU20 = 0;
    l_U955[6]._fU60 = "ho_an_flr007_ag_h";
    l_U955[6]._fU64 = 0;
    l_U955[7]._fU4 = {18, 47, 36};
    l_U955[7]._fU16 = 1.00000000;
    l_U955[7]._fU20 = 0;
    l_U955[7]._fU60 = "p_an_winfrm_aa_h";
    l_U955[7]._fU64 = 0;
    l_U955[8]._fU4 = {18, 47, 36};
    l_U955[8]._fU16 = 1.00000000;
    l_U955[8]._fU20 = 0;
    l_U955[8]._fU60 = "p_an_winfrm_ab_h";
    l_U955[8]._fU64 = 0;
    l_U955[9]._fU4 = {18, 47, 36};
    l_U955[9]._fU16 = 1.00000000;
    l_U955[9]._fU20 = 0;
    l_U955[9]._fU60 = "p_an_winfrm_ac_h";
    l_U955[9]._fU64 = 0;
    l_U955[10]._fU4 = {18, 47, 36};
    l_U955[10]._fU16 = 1.00000000;
    l_U955[10]._fU20 = 0;
    l_U955[10]._fU60 = "p_an_winfrm_ad_h";
    l_U955[10]._fU64 = 0;
    l_U1143[0]._fU4 = {12, 27, 41};
    l_U1143[0]._fU16 = 1.00000000;
    l_U1143[0]._fU20 = 0;
    l_U1143[0]._fU60 = "ho_an_flrrof_aa_h";
    l_U1143[0]._fU64 = 0;
    l_U1143[1]._fU4 = {12, 27, 41};
    l_U1143[1]._fU16 = 1.00000000;
    l_U1143[1]._fU20 = 0;
    l_U1143[1]._fU60 = "ho_an_flrrof_ab_h";
    l_U1143[1]._fU64 = 0;
    l_U1143[2]._fU4 = {12, 27, 41};
    l_U1143[2]._fU16 = 1.00000000;
    l_U1143[2]._fU20 = 0;
    l_U1143[2]._fU60 = "ho_an_flrrof_ac_h";
    l_U1143[2]._fU64 = 0;
    l_U1143[3]._fU4 = {12, 27, 41};
    l_U1143[3]._fU16 = 1.00000000;
    l_U1143[3]._fU20 = 0;
    l_U1143[3]._fU60 = "ho_an_flrrof_ad_h";
    l_U1143[3]._fU64 = 0;
    return;
}

void sub_71282()
{
    int I;

    for ( I = 0; I < l_U205; I++ )
    {
        l_U205[I]._fU0 = nil;
        l_U205[I]._fU4 = {0.00000000, 0.00000000, 0.00000000};
        l_U205[I]._fU16 = {0.00000000, 0.00000000, 0.00000000};
        l_U205[I]._fU64 = 0;
    }
    sub_71456( "Ho_Collapse_Explo_01_S", 34.00000000, 48.00000000, 36.00000000, 0, 0.00000000, 0.00000000, 0.00000000 );
    sub_71456( "Ho_Collapse_Explo_01_S", 34.00000000, 29.00000000, 35.00000000, 200, 0.00000000, 0.00000000, 0.00000000 );
    sub_71456( "Ho_Collapse_Explo_01_S", 20.00000000, 17.00000000, 33.00000000, 800, 0.00000000, 0.00000000, 0.00000000 );
    sub_71456( "Ho_Collapse_Explo_01_S", 15.00000000, -0.20000000, 33.00000000, 1000, 0.00000000, 0.00000000, 0.00000000 );
    sub_71456( "Ho_Collapse_Explo_01_S", 17.00000000, 11.00000000, 33.00000000, 1500, 0.00000000, 0.00000000, 0.00000000 );
    sub_71456( "Ho_Collapse_Explo_01_S", 35.00000000, 28.00000000, 20.00000000, 4500, 0.00000000, 0.00000000, 0.00000000 );
    sub_71456( "Ho_Collapse_Explo_01_S", 22.00000000, -2.00000000, 24.00000000, 4500, 0.00000000, 0.00000000, 0.00000000 );
    sub_71456( "Ho_Collapse_Explo_02_S", 30.00000000, 49.00000000, 38.00000000, 475, 0.00000000, -5.00000000, 25.00000000 );
    sub_71456( "Ho_Collapse_Explo_02_S", 30.00000000, 45.00000000, 24.00000000, 1050, 0.00000000, 0.00000000, 65511 );
    sub_71456( "Ho_Collapse_Explo_03_S", 28.00000000, 39.00000000, 34.00000000, 5500, 60.00000000, -20.00000000, 0.00000000 );
    sub_71456( "Ho_Collapse_Explo_03_S", -8.00000000, 8.50000000, 34.00000000, 7000, 0.00000000, 0.00000000, 0.00000000 );
    sub_71456( "Ho_Collapse_Explo_05_S", -9.00000000, 14.00000000, 41.00000000, 800, 0.00000000, 0.00000000, 0.00000000 );
    sub_71456( "Ho_Collapse_Explo_05_S", 13.00000000, 38.00000000, 41.00000000, 400, 0.00000000, 0.00000000, 0.00000000 );
    sub_71456( "HO_collapse_fire_01", 1.00000000, 22.00000000, 34.00000000, 3000, 0.00000000, 0.00000000, 0.00000000 );
    sub_71456( "HO_collapse_fire_01", -8.00000000, 8.50000000, 34.00000000, 3000, 0.00000000, 0.00000000, 0.00000000 );
    sub_71456( "HO_collapse_fire_01", 0.30000000, 3.50000000, 30.00000000, 3000, 0.00000000, 0.00000000, 0.00000000 );
    sub_71456( "HO_collapse_fire_01", 7.30000000, 32.50000000, 29.80000000, 3000, 0.00000000, 0.00000000, 0.00000000 );
    sub_71456( "HO_collapse_fire_01", 1.60000000, 20.80000000, 29.80000000, 3000, 0.00000000, 0.00000000, 0.00000000 );
    sub_71456( "HO_collapse_fire_01", 5.60000000, 33.80000000, 34.80000000, 3000, 0.00000000, 0.00000000, 0.00000000 );
    return;
}

void sub_71456(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    int I;

    for ( I = 0; I < l_U205; I++ )
    {
        if (IS_STRING_NULL( l_U205[I]._fU0 ))
        {
            l_U205[I]._fU0 = uParam0;
            l_U205[I]._fU4 = {uParam1};
            l_U205[I]._fU64 = uParam4;
            l_U205[I]._fU16 = {uParam5};
            return;
        }
    }
    return;
}

void sub_72753()
{
    DEACTIVATE_BULLET_TIME( 0, 0 );
    if (NOT IS_PLAYER_SHOOTDODGING())
    {
        ISEQ_REGISTER_ENTITY( -473924166, "Max", sub_3807(), 0 );
        ISEQ_START( -473924166 );
    }
    sub_14672( "HAND_SHAKE", 8.00000000 );
    sub_24881( ref l_U1423, 3, 1.00000000, 10, -1, 1000, 0, 0 );
    sub_50121( ref l_U1423 );
    sub_49422();
    SET_PAD_SHAKE( 0, l_U1413, 100 );
    PLAY_SOUND_FROM_PED( -1, "S_HOTEL_FINAL_COLLAPSE_PRE_RUMBLE", sub_3807() );
    return;
}

void sub_73026()
{
    sub_73036();
    sub_30695( ref l_U750._fU0, -732347608, l_U750._fU4, 1, 1 );
    sub_30695( ref l_U767._fU0, 243792242, l_U767._fU4, 1, 1 );
    sub_30695( ref l_U784._fU0, -1037534607, l_U784._fU4, 1, 1 );
    sub_30695( ref l_U801._fU0, 1973799339, l_U801._fU4, 1, 1 );
    sub_30695( ref l_U818[0]._fU0, 67436979, l_U818[0]._fU4, 1, 1 );
    sub_30695( ref l_U818[1]._fU0, -1618467083, l_U818[1]._fU4, 1, 1 );
    sub_30695( ref l_U818[2]._fU0, -721108783, l_U818[2]._fU4, 1, 1 );
    sub_30695( ref l_U818[3]._fU0, -2091080413, l_U818[3]._fU4, 1, 1 );
    sub_30695( ref l_U818[4]._fU0, 1085034612, l_U818[4]._fU4, 1, 1 );
    sub_30695( ref l_U818[5]._fU0, -246844569, l_U818[5]._fU4, 1, 1 );
    sub_30695( ref l_U818[6]._fU0, -875689657, l_U818[6]._fU4, 1, 1 );
    sub_30695( ref l_U818[7]._fU0, 286256608, l_U818[7]._fU4, 1, 1 );
    sub_30695( ref l_U955[0]._fU0, 910452449, l_U955[0]._fU4, 1, 1 );
    sub_30695( ref l_U955[1]._fU0, 1652823720, l_U955[1]._fU4, 1, 1 );
    sub_30695( ref l_U955[2]._fU0, -1077107170, l_U955[2]._fU4, 1, 1 );
    sub_30695( ref l_U955[3]._fU0, -863152154, l_U955[3]._fU4, 1, 1 );
    sub_30695( ref l_U955[4]._fU0, -1683029998, l_U955[4]._fU4, 1, 1 );
    sub_30695( ref l_U955[5]._fU0, 601604623, l_U955[5]._fU4, 1, 1 );
    sub_30695( ref l_U955[6]._fU0, -2117158730, l_U955[6]._fU4, 1, 1 );
    sub_30695( ref l_U955[7]._fU0, 1085034612, l_U955[7]._fU4, 1, 1 );
    sub_30695( ref l_U955[8]._fU0, -246844569, l_U955[8]._fU4, 1, 1 );
    sub_30695( ref l_U955[9]._fU0, -875689657, l_U955[9]._fU4, 1, 1 );
    sub_30695( ref l_U955[10]._fU0, 286256608, l_U955[10]._fU4, 1, 1 );
    sub_30695( ref l_U1143[0]._fU0, 508806708, l_U1143[0]._fU4, 1, 1 );
    sub_30695( ref l_U1143[1]._fU0, 2124107981, l_U1143[1]._fU4, 1, 1 );
    sub_30695( ref l_U1143[2]._fU0, 677554510, l_U1143[2]._fU4, 1, 1 );
    sub_30695( ref l_U1143[3]._fU0, 1704523747, l_U1143[3]._fU4, 1, 1 );
    return;
}

void sub_73036()
{
    sub_73050( ref l_U750 );
    sub_73050( ref l_U767 );
    sub_73050( ref l_U784 );
    sub_73050( ref l_U801 );
    sub_73123( ref l_U818 );
    sub_73123( ref l_U955 );
    sub_73123( ref l_U1143 );
    return;
}

void sub_73050(int iParam0)
{
    sub_4401( iParam0 + 24, iParam0->_fU20, 1, 0 );
    iParam0->_fU64 = 0;
    return;
}

void sub_73123(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_4401( ref (uParam0^)[I]._fU24, (uParam0^)[I]._fU20, 1, 0 );
        (uParam0^)[I]._fU64 = 0;
    }
    return;
}

int sub_74093(boolean bParam0, boolean bParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;
    unknown uVar36;
    unknown uVar37;
    unknown uVar38;
    unknown uVar39;
    unknown uVar40;
    unknown uVar41;
    unknown uVar42;
    unknown uVar43;
    unknown uVar44;
    unknown uVar45;
    unknown uVar46;
    unknown uVar47;
    unknown uVar48;
    unknown uVar49;
    unknown uVar50;
    unknown uVar51;
    unknown uVar52;
    unknown uVar53;
    unknown uVar54;
    unknown uVar55;
    unknown uVar56;
    unknown uVar57;
    unknown uVar58;
    unknown uVar59;
    unknown uVar60;
    unknown uVar61;
    unknown uVar62;
    unknown uVar63;
    unknown uVar64;
    unknown uVar65;

    if (bParam1)
    {
        sub_74131( ref uVar4, l_U1215, l_U1221, 1110704128, 1000 );
        sub_74131( ref uVar35, l_U1218, l_U1224, l_U1227, l_U1228 );
        sub_74385( ref uVar4, ref uVar35, uVar35._fU84, 1, 1 );
    }
    if (bParam0)
    {
        if ((sub_74832( ref l_U1143, 1 )) AND ((sub_74832( ref l_U955, 1 )) AND ((sub_74832( ref l_U818, 1 )) AND ((sub_74491( ref l_U801, 1 )) AND ((sub_74491( ref l_U784, 1 )) AND ((sub_74491( ref l_U767, 1 )) AND (sub_74491( ref l_U750, 1 ))))))))
        {
            sub_73036();
            return 1;
        }
    }
    else if ((sub_74832( ref l_U1143, 0 )) AND ((sub_74832( ref l_U955, 0 )) AND ((sub_74832( ref l_U818, 0 )) AND ((sub_74491( ref l_U801, 0 )) AND ((sub_74491( ref l_U784, 0 )) AND ((sub_74491( ref l_U767, 0 )) AND (sub_74491( ref l_U750, 0 ))))))))
    {
        sub_73036();
        return 1;
    }
    return 0;
}

void sub_74131(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    iParam0->_fU4 = {uParam4};
    iParam0->_fU16 = {uParam1};
    iParam0->_fU28 = uParam7;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    iParam0->_fU84 = uParam8;
    iParam0->_fU88 = 0;
    iParam0->_fU92 = 0;
    iParam0->_fU40 = 0;
    iParam0->_fU44 = 0;
    iParam0->_fU100 = 1;
    iParam0->_fU104 = 1;
    iParam0->_fU96 = 0;
    sub_4401( iParam0 + 48, uParam8, 1, 0 );
    iParam0->_fU0 = CREATE_CAM_WITH_PARAMS( ref g_U724, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 1 );
    SET_CAM_PARAMS( iParam0->_fU0, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 0, 1, 1 );
    return;
}

void sub_74385(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    SET_CAM_ACTIVE_WITH_INTERP( iParam1->_fU0, iParam0->_fU0, uParam2, uParam3, uParam4 );
    RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    sub_4537( iParam1 + 48 );
    iParam1->_fU32 = 1;
    iParam1->_fU40 = 1;
    return;
}

int sub_74491(int iParam0, boolean bParam1)
{
    char[64] cVar4;
    unknown uVar20;

    StrCopy( ref cVar4, "Playing anim : ", 64 );
    if (bParam1)
    {
        uVar20 = l_U1212;
    }
    else
    {
        uVar20 = iParam0->_fU16;
    }
    if (iParam0->_fU20 > 0)
    {
        if (NOT (ref iParam0->_fU24->_fU20))
        {
            sub_68259( iParam0 + 24, iParam0->_fU20 );
        }
        else if (sub_4657( iParam0 + 24 ))
        {
            sub_1656( "AT", "Delay timer is done!", 0 );
            ConcatString(ref cVar4, iParam0->_fU60, 64);
            sub_52061( iParam0->_fU0, iParam0->_fU60, "ho_anim_coll", uVar20, 0 );
            iParam0->_fU64 = 1;
        }
    }
    else if (NOT iParam0->_fU64)
    {
        ConcatString(ref cVar4, iParam0->_fU60, 64);
        sub_52061( iParam0->_fU0, iParam0->_fU60, "ho_anim_coll", uVar20, 0 );
        iParam0->_fU64 = 1;
    }
    if (NOT iParam0->_fU64)
    {
        return 0;
    }
    return 1;
}

int sub_74832(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (NOT (uParam0^)[I]._fU64)
        {
            sub_74491( ref (uParam0^)[I], uParam1 );
        }
    }
    for ( I = 0; I < (uParam0^); I++ )
    {
        if (NOT (uParam0^)[I]._fU64)
        {
            return 0;
        }
    }
    return 1;
}

void sub_75095()
{
    int I;

    for ( I = 0; I < l_U205; I++ )
    {
        if (l_U205[I]._fU64 > 0)
        {
            sub_4401( ref l_U205[I]._fU28, l_U205[I]._fU64, 1, 0 );
            sub_4537( ref l_U205[I]._fU28 );
        }
        else if ((IS_STRING_NULL( l_U205[I]._fU0 )) == 0)
        {
            sub_1656( "BSW", "playing collapse FX without timer", 0 );
            START_PARTICLE_FX_NON_LOOPED_AT_COORD( l_U205[I]._fU0, l_U205[I]._fU4, l_U205[I]._fU16, 1065353216 );
        }
    }
    return;
}

void sub_75706()
{
    int I;

    for ( I = 0; I < l_U205; I++ )
    {
        if (sub_4657( ref l_U205[I]._fU28 ))
        {
            sub_1656( "BSW", "playing collapse FX with timer", 0 );
            START_PARTICLE_FX_NON_LOOPED_AT_COORD( l_U205[I]._fU0, l_U205[I]._fU4, l_U205[I]._fU16, 1065353216 );
        }
    }
    return;
}

void sub_75906(unknown uParam0, boolean bParam1)
{
    sub_5886( ref l_U1231 );
    l_U1231 = CREATE_CAM( "DEFAULT_BULLET_CAMERA", 1 );
    SETUP_BULLET_CAMERA_SCENE( l_U1231, uParam0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, "", "" );
    if (bParam1)
    {
        RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    }
    return;
}

void sub_76136()
{
    int I;

    sub_1656( "GA", "P_ROOF_1206_DELETE_DEAD_BODIES_IN_THE_WAY start", 0 );
    for ( I = 0; I <= 9; I++ )
    {
        if (IS_PED_IN_GAMEPLAY_HELPER_BOX( l_U2145[I], "tb_Roof_1206_DeadBodySafeZone" ))
        {
            sub_8386( l_U2145[I] );
        }
    }
    for ( I = 0; I <= 0; I++ )
    {
        if (IS_PED_IN_GAMEPLAY_HELPER_BOX( l_U2248[I], "tb_Roof_1206_DeadBodySafeZone" ))
        {
            sub_8386( l_U2248[I] );
        }
    }
    for ( I = 0; I <= 2; I++ )
    {
        if (IS_PED_IN_GAMEPLAY_HELPER_BOX( l_U2361[I], "tb_Roof_1206_DeadBodySafeZone" ))
        {
            sub_8386( l_U2361[I] );
        }
    }
    if (IS_PED_IN_GAMEPLAY_HELPER_BOX( l_U2233, "tb_Roof_1206_DeadBodySafeZone" ))
    {
        sub_8386( l_U2233 );
    }
    if (IS_PED_IN_GAMEPLAY_HELPER_BOX( l_U2387, "tb_Roof_1206_DeadBodySafeZone" ))
    {
        sub_8386( l_U2387 );
    }
    sub_1656( "GA", "P_ROOF_1206_DELETE_DEAD_BODIES_IN_THE_WAY start", 0 );
    return;
}

void sub_76832(boolean bParam0, boolean bParam1, unknown uParam2)
{
    int Result;

    Result = 0;
    if (IS_STRING_NULL( uParam2 ))
    {
        uParam2 = l_U1267;
    }
    switch (l_U1246)
    {
        case 1:
        sub_1656( "RJM", "PLAY_HOTEL_CUT_12_06 start", "*****" );
        l_U1265 = 0;
        l_U1266 = 0;
        sub_68898();
        sub_71282();
        sub_48073( 1 );
        sub_26412( uParam2, 1 );
        sub_35195( 1, 0, 0, 1 );
        if (NOT bParam0)
        {
            sub_77027();
        }
        sub_77117();
        sub_77250( ref l_U1268 );
        REGISTER_HIDE_ENTITY_AT_POSITION( -1996980633, 8.84019000, 19.67155000, 44.08596000 );
        REGISTER_HIDE_ENTITY_AT_POSITION( 812253989, 11.45683000, 18.35566000, 44.08820000 );
        l_U1246 = 2;
        break;
        case 2:
        if (bParam0 == 1)
        {
            CUTSCENE_ENABLE_SKIP( 0 );
            CUTSCENE_REGISTER_SWITCH_TO_LEVEL_NAME( "s_police" );
            DISABLE_FADE_BETWEEN_SP_LEVELS();
            AUD_ENABLE_PRE_BINK_SHUTDOWN( 1 );
        }
        if (bParam1)
        {
            START_CUTSCENE_CAPTURE( uParam2 );
        }
        START_SEAMLESS_CUTSCENE();
        if (NOT IS_BULLET_CAMERA_TO_GAMEPLAY_ALLOWED())
        {
            ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
        }
        l_U1246 = 3;
        break;
        case 3:
        l_U1246 = 4;
        break;
        case 4:
        if ((l_U1232 == 6) AND (GET_CUTSCENE_TIME_MS() >= 68955))
        {
            sub_1656( "BSW", " cutscene fading out music", 0 );
            l_U1233 = 6;
        }
        if (NOT l_U1266)
        {
            if (GET_CUTSCENE_TIME_MS() >= 73000)
            {
                sub_1656( "GA", "Creating collapse rayfire objects.", 0 );
                sub_73026();
                l_U1266 = 1;
            }
        }
        if (GET_CUTSCENE_TIME_MS() >= 72986)
        {
            if (NOT (IS_VEHICLE_DEAD( g_U991 )))
            {
                SET_VEHICLE_ENGINE_ON( g_U991, 1, 1 );
                SET_HELI_BLADES_FULL_SPEED( g_U991 );
            }
        }
        if (GET_CUTSCENE_TIME_MS() > 77000)
        {
            if (NOT l_U1265)
            {
                sub_1656( "BSW", "starting collapse in 12_06", 0 );
                l_U1265 = 1;
                sub_74093( 1, 0 );
                sub_75095();
            }
            else
            {
                sub_75706();
            }
        }
        if (HAS_CUTSCENE_FINISHED())
        {
            sub_79061( l_U1247, 1 );
            sub_78133( l_U1247, 1 );
            l_U1246 = 5;
        }
        break;
        case 5:
        if (bParam1)
        {
            STOP_CUTSCENE_CAPTURE();
        }
        Result = 1;
        sub_8352( ref l_U1268 );
        if (NOT bParam0)
        {
            sub_79290();
        }
        sub_42251( 1, 1 );
        l_U1246 = 0;
        sub_1656( "RJM", "PLAY_HOTEL_CUT_12_06 end", "*****" );
        break;
        case 0:
        l_U1246 = 1;
        break;
    }
    return Result;
}

void sub_77027()
{
    sub_1656( "RJM", "BLOCKLOAD_HOTEL_CUT_12_06_ASSETS", "***" );
    sub_39585( 1844299595 );
    sub_39585( -1071978962 );
    return;
}

void sub_77117()
{
    int I;

    sub_20020( ref l_U1271[0], 0, 0, 0, 0, 1460404455, 26, 6, 0, 0, 0 );
    sub_20020( ref l_U1271[1], 0, 0, 0, 0, 1827385398, 26, 6, 0, 0, 0 );
    for ( I = 0; I <= (l_U1268 - 1); I++ )
    {
        l_U1268[I] = sub_27611( ref l_U1271[I] );
    }
    return;
}

void sub_77250(unknown uParam0)
{
    sub_1656( "RJM", "REGISTER_PEDS_HOTEL_CUT_12_06", "***" );
    if (sub_13511())
    {
        sub_77325( ref l_U1247, 1, 1 );
        sub_78133( l_U1247, 0 );
        sub_40307( 1 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( sub_3807(), 0, 0 ), "W_PI_Glk18_Aa_H", 0 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( sub_3807(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
    }
    sub_78357( ref (uParam0^)[0], "Nevs_Unif" );
    sub_78357( ref (uParam0^)[1], "Pass_Comb" );
    REGISTER_HIDE_ENTITY_AT_POSITION( -1996980633, 8.84019000, 19.67155000, 42.58596000 );
    REGISTER_HIDE_ENTITY_AT_POSITION( 812253989, 11.45683000, 18.35566000, 42.58820000 );
    if (NOT (IS_VEHICLE_DEAD( g_U991 )))
    {
        REGISTER_VEHICLE_PRE_SEAMLESS_CUTSCENE( g_U991, "heli_cp", 0 );
    }
    return;
}

void sub_77325(int iParam0, int iParam1, unknown uParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;

    sub_77337( iParam0 );
    if ((IS_PED_DEAD( sub_3807() )) == 0)
    {
        uVar5 = GET_WEAPON_FROM_HAND( sub_3807(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
        {
            if ((sub_38479( uVar5 )) == 1)
            {
                ref iParam0->_fU0->_fU0 = uVar5;
                ref iParam0->_fU0->_fU4 = GET_WEAPON_TYPE( uVar5 );
            }
            else if ((sub_40625( uVar5 )) == 1)
            {
                ref iParam0->_fU24->_fU0 = uVar5;
                ref iParam0->_fU24->_fU4 = GET_WEAPON_TYPE( uVar5 );
            }
        }
        uVar6 = GET_WEAPON_FROM_HAND( sub_3807(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar6 )) == 1)
        {
            ref iParam0->_fU12->_fU0 = uVar6;
            ref iParam0->_fU12->_fU4 = GET_WEAPON_TYPE( uVar6 );
        }
        uVar7 = GET_WEAPON_FROM_HOLSTER( sub_3807(), 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
        {
            ref iParam0->_fU36->_fU0 = uVar7;
            ref iParam0->_fU36->_fU4 = GET_WEAPON_TYPE( uVar7 );
        }
        uVar8 = GET_WEAPON_FROM_HOLSTER( sub_3807(), 1 );
        if ((GET_DOES_WEAPON_EXIST( uVar8 )) == 1)
        {
            ref iParam0->_fU48->_fU0 = uVar8;
            ref iParam0->_fU48->_fU4 = GET_WEAPON_TYPE( uVar8 );
        }
        uVar9 = GET_WEAPON_FROM_HOLSTER( sub_3807(), 2 );
        if ((GET_DOES_WEAPON_EXIST( uVar9 )) == 1)
        {
            ref iParam0->_fU60->_fU0 = uVar9;
            ref iParam0->_fU60->_fU4 = GET_WEAPON_TYPE( uVar9 );
        }
    }
    if (iParam1 == 0)
    {
        if ((IS_PED_DEAD( sub_3807() )) == 0)
        {
            uVar10 = GET_WEAPON_FROM_HAND( sub_3807(), 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar10 )) == 1)
            {
                SELECT_WEAPON_TO_HAND( sub_3807(), 0, 0, uParam2 );
            }
            uVar11 = GET_WEAPON_FROM_HAND( sub_3807(), 1, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar11 )) == 1)
            {
                SELECT_WEAPON_TO_HAND( sub_3807(), 0, 1, uParam2 );
            }
        }
    }
    else if (iParam1 == 1)
    {
        if ((IS_PED_DEAD( sub_3807() )) == 0)
        {
            uVar12 = GET_WEAPON_FROM_HAND( sub_3807(), 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar12 )) == 1)
            {
                if ((sub_40625( uVar12 )) == 1)
                {
                    SELECT_WEAPON_TO_HAND( sub_3807(), 0, 0, uParam2 );
                }
            }
            uVar13 = GET_WEAPON_FROM_HAND( sub_3807(), 1, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar13 )) == 1)
            {
                SELECT_WEAPON_TO_HAND( sub_3807(), 0, 1, uParam2 );
            }
        }
    }
    return;
}

void sub_77337(int iParam0)
{
    ref iParam0->_fU0->_fU0 = 0;
    ref iParam0->_fU0->_fU4 = 0;
    ref iParam0->_fU12->_fU0 = 0;
    ref iParam0->_fU12->_fU4 = 0;
    ref iParam0->_fU24->_fU0 = 0;
    ref iParam0->_fU24->_fU4 = 0;
    ref iParam0->_fU36->_fU0 = 0;
    ref iParam0->_fU36->_fU4 = 0;
    ref iParam0->_fU48->_fU0 = 0;
    ref iParam0->_fU48->_fU4 = 0;
    ref iParam0->_fU60->_fU0 = 0;
    ref iParam0->_fU60->_fU4 = 0;
    return;
}

void sub_78133(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18)
{
    unknown uVar21;
    unknown uVar22;

    uVar21 = uParam0._fU24._fU0;
    if ((GET_DOES_WEAPON_EXIST( uVar21 )) == 1)
    {
        SET_WEAPON_VISIBLE( uVar21, uParam18 );
    }
    uVar22 = uParam0._fU60._fU0;
    if ((GET_DOES_WEAPON_EXIST( uVar22 )) == 1)
    {
        SET_WEAPON_VISIBLE( uVar22, uParam18 );
    }
    return;
}

void sub_78357(unknown uParam0, unknown uParam1)
{
    if (sub_13526( (uParam0^) ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam0^), uParam1, 1 );
        SET_PED_NAME_DEBUG( (uParam0^), uParam1 );
    }
    return;
}

void sub_79061(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18)
{
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;

    if ((IS_PED_DEAD( sub_3807() )) == 0)
    {
        uVar21 = uParam0._fU0._fU0;
        if ((GET_DOES_WEAPON_EXIST( uVar21 )) == 1)
        {
            SELECT_WEAPON_TO_HAND( sub_3807(), uVar21, 0, uParam18 );
        }
        uVar22 = uParam0._fU12._fU0;
        if ((GET_DOES_WEAPON_EXIST( uVar22 )) == 1)
        {
            SELECT_WEAPON_TO_HAND( sub_3807(), uVar22, 1, uParam18 );
        }
        uVar23 = uParam0._fU24._fU0;
        if ((GET_DOES_WEAPON_EXIST( uVar23 )) == 1)
        {
            SELECT_WEAPON_TO_HAND( sub_3807(), uVar23, 0, uParam18 );
        }
    }
    return;
}

void sub_79290()
{
    sub_1656( "RJM", "UNLOAD_HOTEL_CUT_12_06_ASSETS", "***" );
    sub_9036( 1844299595 );
    sub_9036( -1071978962 );
    return;
}

void sub_79629()
{
    int I;

    sub_1656( "MW", "P_UNLOAD_ROOF_ASSETS start", 0 );
    sub_79679();
    for ( I = 0; I < l_U1355; I++ )
    {
        sub_9036( l_U1355[I] );
    }
    sub_9036( -1071978962 );
    sub_9036( 1721151522 );
    sub_8952( "LEVEL_S_HOTEL_CP_11" );
    sub_8952( "AMED_HEVY_CORE" );
    sub_8952( "LEVEL_S_HOTEL_CP_09" );
    sub_9003( "NPC/BOSS_HeavyGunner" );
    sub_1656( "MW", "P_UNLOAD_ROOF_ASSETS end", 0 );
    return;
}

void sub_79679()
{
    sub_9036( -732347608 );
    sub_9036( 243792242 );
    sub_9036( -1037534607 );
    sub_9036( 1973799339 );
    sub_9036( 67436979 );
    sub_9036( -1618467083 );
    sub_9036( -721108783 );
    sub_9036( -2091080413 );
    sub_9036( 910452449 );
    sub_9036( 1652823720 );
    sub_9036( -1077107170 );
    sub_9036( -863152154 );
    sub_9036( -1683029998 );
    sub_9036( 601604623 );
    sub_9036( -2117158730 );
    sub_9036( 508806708 );
    sub_9036( 2124107981 );
    sub_9036( 677554510 );
    sub_9036( 1704523747 );
    sub_9036( 1085034612 );
    sub_9036( -246844569 );
    sub_9036( -875689657 );
    sub_9036( 286256608 );
    return;
}

