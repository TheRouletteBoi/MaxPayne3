void main()
{
    l_U0 = 1;
    l_U1 = 144;
    l_U2 = 0;
    l_U3 = 1;
    l_U4 = 0;
    l_U5 = 1.00000000;
    l_U6 = -5.00000000;
    l_U7 = 0;
    l_U8 = 0;
    l_U9 = 0;
    l_U13 = 42;
    l_U14 = 0;
    l_U15 = 0;
    l_U16 = 0;
    l_U17 = 0;
    l_U18 = 0;
    l_U19 = 90.00000000;
    l_U20 = {0.00000000, 0.00000000, 0.00000000};
    l_U23 = {0.00000000, 0.00000000, 0.00000000};
    l_U26 = 0;
    l_U27 = 0;
    l_U28 = 0;
    l_U29 = 0;
    l_U30 = 0;
    l_U31 = 0;
    l_U32 = nil;
    l_U33 = {0.00000000, 0.00000000, 0.00000000};
    l_U36 = 0;
    l_U37 = 0;
    l_U38 = 0;
    StrCopy( ref l_U39, "Ambient_Lightning_Flash_BG_S", 32 );
    StrCopy( ref l_U47, "Ambient_Lightning_Flash_FG_S", 32 );
    l_U55 = {0.00000000, 0.00000000, 0.00000000};
    l_U58 = {0.00000000, 0.00000000, 0.00000000};
    l_U61 = 1.00000000;
    l_U62 = {0.00000000, 0.00000000, 0.00000000};
    l_U65 = {0.00000000, 0.00000000, 0.00000000};
    l_U68 = 1.00000000;
    l_U69 = 0;
    l_U70 = 0;
    l_U71 = 0;
    l_U72 = 0;
    l_U73 = 0.50000000;
    l_U75 = 0;
    l_U76 = 0;
    l_U119 = "PED_DEF";
    l_U161 = 1.00000000;
    l_U173 = 0;
    l_U214 = 0;
    l_U235 = 0;
    l_U236 = 0;
    l_U237 = 1500;
    l_U249 = 1;
    l_U250 = 0;
    l_U251 = 1;
    l_U252 = 0;
    StrCopy( ref l_U266, "mid_01a_docks_concat", 32 );
    l_U274 = 0;
    l_U332 = {61.00000000, -161.00000000, 3.54527800};
    l_U335 = 30.00000000;
    l_U476 = 0;
    l_U773 = {66.62800000, -97.85000000, 3.31500000};
    l_U776 = {67.08800000, -97.85000000, 3.46500000};
    l_U1272 = 0;
    sub_687( "SP", "Script s_marina_Jungle.sc script has started...", 0 );
    sub_737( 0 );
    sub_1370();
    sub_1715();
    sub_4798();
    if (sub_9317())
    {
        sub_687( "BSW", "Setting Max to never drown in case the player pauses the bink", 0 );
        SET_PED_DIES_IN_WATER( sub_5011(), 0 );
    }
    sub_9492();
    sub_9753();
    sub_10717( ref g_U1369, 0 );
    sub_10929( ref g_U1369, 1, 1, 1065353216 );
    sub_11080( ref g_U1369, 1 );
    if (g_U788 == 0)
    {
        sub_11173( "05_01_docks_concat", 0 );
        DO_SCREEN_FADE_OUT( 0 );
    }
    while (NOT IS_EXITFLAG_SET())
    {
        if (sub_11448( l_U311 ))
        {
            SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        }
        else
        {
            sub_11548();
            sub_12315();
            sub_13483();
            sub_14071();
            sub_16984();
        }
        WAIT( 0 );
    }
    sub_15987();
    sub_36684();
    SET_PLAYER_CAN_USE_FREEFORM_STRIKE( 0 );
    sub_687( "SP", "Script s_marina_Jungle.sc script has terminated...", 0 );
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "s_marina_jungle" );
    SET_EXITFLAG_RESPONSE();
    return;
}

void sub_687(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    return;
}

void sub_737(unknown uParam0)
{
    sub_687( "SP", "P_LOAD_JUNGLE_ASSETS", 0 );
    sub_788( g_U1052, uParam0 );
    sub_788( g_U1029, uParam0 );
    sub_788( g_U1036, uParam0 );
    sub_788( g_U1037, uParam0 );
    sub_788( -832750542, uParam0 );
    sub_1021( 901765082, uParam0 );
    sub_1021( -1260513009, uParam0 );
    l_U779 = GET_SOUND_ID();
    sub_1250( "SMARAUD" );
    return;
}

void sub_788(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
        sub_893( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_893(unknown uParam0)
{
    return;
}

void sub_1021(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to load does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 0)
    {
        ISEQ_REQUEST( uParam0 );
        ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
        if (iParam1 == 1)
        {
            while ((ISEQ_QUERY_STATE( uParam0, 1 )) == 1)
            {
                WAIT( 0 );
            }
        }
    }
    return;
}

void sub_1250(unknown uParam0)
{
    StrCopy( ref g_U157._fU0, uParam0, 16 );
    sub_1270();
    return;
}

void sub_1270()
{
    int I;

    for ( I = 0; I <= 8; I++ )
    {
        g_U157._fU16[I]._fU0 = nil;
        g_U157._fU16[I]._fU4 = 0;
        g_U157._fU92[I] = 0;
    }
    return;
}

void sub_1370()
{
    sub_687( "GA", "P_INITIALIZE_SCRIPT_DATA start", 0 );
    l_U686 = 0;
    l_U555 = 0;
    l_U336 = 0;
    l_U369 = 0;
    l_U1029 = 0;
    l_U1030 = 0;
    l_U476 = 0;
    l_U248 = 0;
    sub_1481( ref l_U780, 2000, 1, 0 );
    sub_1481( ref l_U789, 2500, 1, 0 );
    sub_1481( ref l_U798, 1500, 1, 0 );
    l_U263 = 1;
    sub_1647();
    sub_687( "GA", "P_INITIALIZE_SCRIPT_DATA end", 0 );
    return;
}

void sub_1481(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

void sub_1647()
{
    return;
}

void sub_1715()
{
    sub_687( "GA", "P_SET_STATIC_GAMEPLAY_DATA start", 0 );
    sub_1849( ref l_U915, "TRIG_JUNGLE_LIGHTNING_03", 52.87000000, -151.83000000, 2.53000000, 2.00000000, 13.00000000, 4.00000000, 0.00000000, 0.00000000, 90.00000000, 1 );
    sub_1849( ref l_U348, "TRIG_JUNGLE_NEAR_HELI", 25.81000000, -162.41000000, 1.06000000, 6.00000000, 19.00000000, 4.00000000, -1.88527000, 0.00000000, 0.00000000, 1 );
    sub_1849( ref l_U498, "TRIG_JUNGLE_NEAR_WALL", 51.92000000, -150.68000000, 2.97000000, 16.00000000, 30.00000000, 4.00000000, 0.00000000, 0.00000000, 90.00000000, 1 );
    sub_1849( ref l_U477, "TRIG_JUNGLE_FIRST_CLEANUP", 50.06000000, -142.92000000, -2.35000000, 12.50000000, 15.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_1849( ref l_U936, "TRIG_JUNGLE_WH_LIGHTNING", 67.27000000, -92.05000000, 1.02000000, 22.50000000, 4.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_1849( ref l_U311, "TRIG_JUNGLE_END", 62.96000000, -63.52000000, 0.90000000, 15.00000000, 11.00000000, 3.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_1849( ref l_U978, "DISABLE_JUNGLE_SHOOTDODGE", 7.96000000, -162.41000000, -3.78000000, 18.00000000, 10.00000000, 8.00000000, -1.88527000, 0.00000000, 0.00000000, 1 );
    sub_1849( ref l_U999, "TRIG_FREEFORM_STRIKE", 67.10000000, -99.30000000, 1.21000000, 4.00000000, 9.00000000, 4.00000000, 0.00000000, 0.00000000, 90.00000000, 1 );
    sub_1849( ref l_U556, "tbJungleFx_01", 39.72570000, -158.66700000, 0.00000000, 8.00000000, 20.00000000, 10.00000000, 0.00000000, 0.00000000, 10.93220000, 1 );
    sub_1849( ref l_U577, "tbJungleFx_02", 51.79490000, -157.96800000, 0.00000000, 8.00000000, 20.00000000, 10.00000000, 0.00000000, 0.00000000, 16.43280000, 1 );
    sub_1849( ref l_U619, "tbJungleFx_04", 56.17090000, -115.37600000, -0.87908900, 20.00000000, 6.00000000, 6.00000000, 0.00000000, 0.00000000, -43.68000000, 1 );
    sub_1849( ref l_U598, "tbJungleFx_03", 57.33820000, -135.33700000, -0.87908900, 25.00000000, 6.00000000, 6.00000000, 0.00000000, 0.00000000, 8.89243000, 1 );
    sub_1849( ref l_U519, "tbSlipImageFX", 53.79360000, -126.83700000, -1.01703000, 20.00000000, 10.00000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_1849( ref l_U957, "TRIG_BLENDOUT_DOOR_CLOSE", 43.27000000, -171.32000000, 6.84000000, 5.00000000, 2.38000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2979( ref l_U540, 38.82000000, -168.60300000, 7.16400000, 65356, -1801828532, 4, 6, 2, 0, 0 );
    sub_3126( ref l_U672, g_U1047, 64.32538000, -97.80737000, 3.12985000, 0.00000000, 0.00000000, 180.00000000 );
    sub_3126( ref l_U679, g_U1048, 69.51341000, -97.76849000, 3.13166000, 0.00000000, 0.00000000, 0.00000000 );
    sub_3250( ref l_U807, 1.00000000, 216.23000000, -207.54000000, 0.00000000, 1, 1, 5000, 0.25000000, 0 );
    sub_3250( ref l_U825, 1.00000000, 200.98000000, -29.94000000, -50.00000000, 1, 1, 10000, 0.70000000, 0 );
    sub_3250( ref l_U843, 1.00000000, -7.28000000, 104.64000000, -35.00000000, 1, 1, 2000, 0.40000000, 0 );
    sub_3250( ref l_U861, 1.00000000, 138.75000000, 122.82000000, -35.00000000, 1, 1, 6000, 0.45000000, 0 );
    sub_3250( ref l_U879, 1.00000000, 57.62000000, -82.66000000, 3.00000000, 0, 1, 1000, 0.10000000, 1 );
    sub_3250( ref l_U897, 1.00000000, 57.62000000, -82.66000000, 3.00000000, 1, 0, 0, 1056964608, 0 );
    sub_3621( ref l_U687, 3, 66.93000000, -98.11000000, 3.45000000, l_U773, l_U773, 0.00000000, 25.00000000, 1, 1 );
    sub_4454( ref l_U687, 0 );
    sub_3621( ref l_U370, 2, 53.34000000, -160.82000000, 5.02000000, 52.42265000, -160.28790000, 3.54544500, 52.42265000, -160.28790000, 3.54544500, 4.00000000, 6.00000000, 1, 0 );
    sub_4571( ref l_U370, 30, "POI_DOCKHELI" );
    sub_4454( ref l_U370, 0 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
    sub_687( "GA", "P_SET_STATIC_GAMEPLAY_DATA end", 0 );
    return;
}

void sub_1849(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    StrCopy( ref iParam0->_fU0, uParam1, 64 );
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = {uParam2};
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 1, iParam0 + 0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

void sub_2979(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

void sub_3126(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    iParam0->_fU0 = uParam1;
    iParam0->_fU4 = {uParam2};
    iParam0->_fU16 = {uParam5};
    return;
}

void sub_3250(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    sub_687( "BSW", "[SP]### P_CreateLightning ###", 0 );
    iParam0->_fU0 = uParam1;
    iParam0->_fU4 = {uParam2};
    iParam0->_fU16 = uParam5;
    iParam0->_fU20 = uParam6;
    iParam0->_fU60 = uParam7;
    iParam0->_fU64 = uParam8;
    iParam0->_fU68 = uParam9;
    return;
}

void sub_3621(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14)
{
    sub_3636( iParam0, uParam13 );
    iParam0->_fU4 = uParam1;
    iParam0->_fU100 = {uParam5};
    iParam0->_fU112 = uParam11;
    iParam0->_fU200 = {uParam8};
    iParam0->_fU212 = uParam12;
    iParam0->_fU320 = uParam14;
    iParam0->_fU20 = {uParam2};
    sub_4004( iParam0 );
    return;
}

void sub_3636(int iParam0, unknown uParam1)
{
    iParam0->_fU0 = uParam1;
    iParam0->_fU4 = 0;
    iParam0->_fU8 = 0;
    iParam0->_fU12 = nil;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU52 = 1;
    iParam0->_fU56 = 1;
    iParam0->_fU60 = 0;
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = 0;
    iParam0->_fU76 = 0;
    iParam0->_fU80 = 0;
    iParam0->_fU84 = 0;
    iParam0->_fU100 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU112 = 0.00000000;
    iParam0->_fU88 = 0;
    iParam0->_fU92 = 0;
    iParam0->_fU96 = 0;
    iParam0->_fU200 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU212 = 0.00000000;
    iParam0->_fU300 = 0;
    iParam0->_fU304 = 1;
    iParam0->_fU308 = 0;
    iParam0->_fU324 = 1;
    iParam0->_fU328 = 0;
    iParam0->_fU340 = 0;
    iParam0->_fU336 = 0.20000000;
    return;
}

void sub_4004(int iParam0)
{
    if (iParam0->_fU12 != nil)
    {
        if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
        {
            REMOVE_GLINT( iParam0->_fU12 );
        }
    }
    iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
    sub_4083( iParam0 );
    return;
}

void sub_4083(int iParam0)
{
    if (iParam0->_fU0 == 1)
    {
        if (iParam0->_fU320 == 1)
        {
            if ((iParam0->_fU8 > 0) AND (iParam0->_fU4 == 0))
            {
                sub_4142( iParam0, 1 );
            }
            else if ((iParam0->_fU8 < 2) AND (iParam0->_fU4 == 1))
            {
                sub_4142( iParam0, 1 );
            }
            else if ((iParam0->_fU8 == 1) AND (iParam0->_fU4 == 2))
            {
                sub_4142( iParam0, 1 );
            }
            else
            {
                sub_4142( iParam0, 0 );
            };;;
        }
        else
        {
            sub_4142( iParam0, 0 );
        }
    }
    else
    {
        sub_4142( iParam0, 0 );
    }
    return;
}

void sub_4142(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        if (iParam0->_fU12 != nil)
        {
            if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
            {
                ENABLE_GLINT( iParam0->_fU12, 1 );
            }
            else
            {
                iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
            }
        }
        else
        {
            iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
        }
    }
    else if (iParam0->_fU12 != nil)
    {
        if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
        {
            ENABLE_GLINT( iParam0->_fU12, 0 );
        }
    }
    return;
}

void sub_4454(int iParam0, unknown uParam1)
{
    iParam0->_fU324 = uParam1;
    return;
}

void sub_4571(int iParam0, unknown uParam1, unknown uParam2)
{
    StrCopy( ref iParam0->_fU32, uParam2, 16 );
    iParam0->_fU48 = uParam1;
    sub_4602( iParam0 );
    return;
}

void sub_4602(int iParam0)
{
    if ((iParam0->_fU8 == 2) AND (iParam0->_fU0 == 1))
    {
        if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
        {
            SET_INTERACTIONTEXT_BUTTON( iParam0->_fU48 );
            SET_INTERACTIONTEXT_TEXT( iParam0 + 32 );
            SET_INTERACTIONTEXT_VISIBLE( 1 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 1 );
            SET_INTERACTIONTEXT_AVAILABLE( 1 );
            iParam0->_fU56 = 1;
        }
    }
    return;
}

void sub_4798()
{
    sub_687( "SBA", "INITIALIZE_PLAYER_BY_DEBUG_MENU_CHECKPOINT", "***" );
    if (g_U788 == 0)
    {
        if (NOT (sub_4886( ref l_U275 )))
        {
            sub_7262( sub_5011(), 68019059, 200, 0, 0 );
        }
        l_U247 = 0;
    }
    else if (g_U788 == 1)
    {
        if (NOT (sub_4886( ref l_U275 )))
        {
            sub_7262( sub_5011(), 68019059, 200, 0, 1 );
        }
        l_U1271 = GET_WEAPON_FROM_HAND( sub_5011(), 0, 0 );
        ENABLE_WEAPON_ATTACHMENT( l_U1271, 8, 1 );
        TOGGLE_WEAPON_ATTACHMENT( l_U1271, 8, 1 );
        ENABLE_WEAPON_ATTACHMENT( l_U1271, 14, 1 );
        TOGGLE_WEAPON_ATTACHMENT( l_U1271, 14, 0 );
        sub_737( 1 );
        l_U247 = 2;
    }
    return;
}

int sub_4886(unknown uParam0)
{
    sub_687( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U0 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U1 );
            sub_5077( uParam0, sub_5011() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

int sub_5011()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED( sub_5033() );
    }
    return 0;
}

void sub_5033()
{
    return GET_PLAYER_ID();
}

void sub_5077(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

    sub_687( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U0)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
    sub_5261( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
        sub_6338( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 = sub_6630( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
        sub_6977( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 = sub_6630( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
        sub_6977( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 = sub_6630( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
        sub_6977( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 = sub_7262( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
        sub_6977( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 = sub_7262( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
        sub_6977( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U0 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if ((sub_7755( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
    sub_7916( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING( sub_5011(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U0)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U0 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
    sub_687( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

void sub_5261(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 = sub_5293( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

int sub_5293(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

void sub_6338(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

void sub_6630(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                }
            }
        }
    }
    else
    {
        sub_893( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

void sub_6977(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

void sub_7262(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                }
            }
        }
    }
    else
    {
        sub_893( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

int sub_7755(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

void sub_7916(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 = sub_5293( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
    sub_7988( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

void sub_7988(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

int sub_9317()
{
    if (sub_9332( sub_5011() ))
    {
        return 1;
    }
    return 0;
}

int sub_9332(unknown uParam0)
{
    if ((NOT (IS_PED_DEAD( uParam0 ))) AND (DOES_PED_EXIST( uParam0 )))
    {
        return 1;
    }
    return 0;
}

void sub_9492()
{
    START_WIDGET_GROUP( "Helicopter Position" );
    sub_9553( ref l_U332, "Heli Pos:", 1036831949 );
    ADD_WIDGET_FLOAT_SLIDER( "Heli Rot:", ref l_U335, 0, 360, 0.10000000 );
    ADD_WIDGET_BOOL( "Create New Helicopter?", ref l_U336 );
    STOP_WIDGET_GROUP();
    return;
}

void sub_9553(int iParam0, unknown uParam1, unknown uParam2)
{
    START_WIDGET_GROUP( uParam1 );
    ADD_WIDGET_FLOAT_SLIDER( "x", iParam0 + 0, 60536, 5000, uParam2 );
    ADD_WIDGET_FLOAT_SLIDER( "y", iParam0 + 4, 60536, 5000, uParam2 );
    ADD_WIDGET_FLOAT_SLIDER( "z", iParam0 + 8, 60536, 5000, uParam2 );
    STOP_WIDGET_GROUP();
    return;
}

void sub_9753()
{
    sub_687( "BSW", "P_CREATE_YAWNING_THUG", 0 );
    sub_9804( l_U553 );
    l_U553 = sub_9882( ref l_U540 );
    if (sub_9332( l_U553 ))
    {
        sub_687( "BSW", "P_CREATE_YAWNING_THUG", 0 );
        SET_PED_AS_ONE_SHOT_KILL( l_U553, 1 );
        sub_10607( l_U553 );
    }
    return;
}

void sub_9804(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

void sub_9882(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
        sub_788( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
    sub_10361( iParam0->_fU40 );
    sub_10441( iParam0->_fU40 );
    return iParam0->_fU40;
}

void sub_10361(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

void sub_10441(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

void sub_10607(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 1 );
        SET_PED_VISIBLE( uParam0, 0 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 0 );
        FREEZE_PED_POSITION( uParam0, 1 );
        SET_PED_COLLISION( uParam0, 0 );
        SET_PED_PROOFS( uParam0, 1, 1, 1, 1, 1 );
    }
    return;
}

void sub_10717(int iParam0, int iParam1)
{
    int iVar4;
    float fVar5;

    if ((sub_10729( iParam0 )) == 0)
    {
        sub_10795( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
    }
    else
    {
        iVar4 = 0;
        fVar5 = 0.00000000;
        GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref iVar4, ref fVar5 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar5 );
    }
    return;
}

int sub_10729(int iParam0)
{
    int iVar3;

    iVar3 = DOES_OBJECT_OF_TYPE_EXIST_AT_COORDS( iParam0->_fU4, 1.00000000, iParam0->_fU0 );
    if (iVar3 == 1)
    {
        return 1;
    }
    return 0;
}

void sub_10795(unknown uParam0)
{
    (uParam0^) = {(uParam0^)};
    return;
}

void sub_10929(int iParam0, int iParam1, int iParam2, unknown uParam3)
{
    float fVar6;

    if ((sub_10729( iParam0 )) == 0)
    {
        sub_10795( iParam0 );
    }
    fVar6 = 0.00000000;
    if (iParam1 == 1)
    {
        fVar6 = uParam3;
    }
    else
    {
        fVar6 = -uParam3;
    }
    if (iParam2 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, fVar6 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    return;
}

void sub_11080(int iParam0, unknown uParam1)
{
    if ((sub_10729( iParam0 )) == 0)
    {
        sub_10795( iParam0 );
    }
    DOOR_FIND_CLOSEST_SET_LATCH( iParam0->_fU0, iParam0->_fU4, uParam1 );
    return;
}

void sub_11173(unknown uParam0, int iParam1)
{
    if (HAS_CUTSCENE_LOADED())
    {
        if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
        {
            SCRIPT_ASSERT( "Another cutscene is already loaded.  You can only load one cutscene into memory.  Your current cutscene will not load into memory.", 0 );
        }
    }
    if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
    {
        PRE_STREAM_SEAMLESS_CUTSCENE( uParam0 );
        if (iParam1 == 1)
        {
            while ((CUTSCENE_IS_LOADED( uParam0 )) == 0)
            {
                WAIT( 0 );
            }
        }
    }
    return;
}

void sub_11448(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20)
{
    return sub_11466( sub_5011(), uParam0 );
}

int sub_11466(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, ref uParam1._fU0 );
    }
    return 0;
}

void sub_11548()
{
    if (l_U251 != l_U249)
    {
        sub_687( "TEH", "playing music:changed CUR FLAG", 0 );
        sub_11624( l_U249 );
        sub_11624( l_U250 );
        l_U251 = l_U249;
    }
    else if (l_U252 != l_U250)
    {
        sub_687( "TEH", "playing music:changed NEW FLAG", 0 );
        sub_11624( l_U249 );
        sub_11624( l_U250 );
        l_U252 = l_U250;
    }
    switch (l_U249)
    {
        case 1:
        if (l_U250 == 1)
        {
            sub_687( "TEH", "playing music: Startup ", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "DOCKS_SONG_02", "DOCKS_02_2", "", 0, 10000, 5000, -1082130432, 0 );
            l_U249 = 3;
            l_U250 = 3;
        }
        break;
        case 2:
        sub_687( "TEH", "playing music: Warehouse Restart checkpoint ", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "DOCKS_SONG_02", "DOCKS_02_2", "", 0, 10000, 5000, -1082130432, 0 );
        l_U249 = 3;
        l_U250 = 3;
        break;
        case 3:
        if (l_U250 == 3)
        {
            AUDIO_MUSIC_PRELOAD_ONESHOT( "DOCKS_ONESHOT_07", 0 );
            if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
            {
                sub_687( "TEH", "playing music: Sussesfully preloaded DOCKS_ONESHOT_07", 0 );
                l_U249 = 4;
            }
        }
        break;
        case 4:
        if (l_U250 == 4)
        {
            if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
            {
                sub_687( "TEH", "playing music: Sussesfully played MC_ONESHOT_PLAY_ONESHOT_07", 0 );
                AUDIO_MUSIC_PLAY_ONESHOT();
                l_U262 = 0;
                l_U249 = 5;
            }
        }
        break;
    }
    return;
}

void sub_11624(unknown uParam0)
{
    return;
}

void sub_12315()
{
    if (l_U71 == 0)
    {
        START_WIDGET_GROUP( "Thunder and Lightning Helper" );
        ADD_WIDGET_STRING( "Distant Thunder" );
        ADD_WIDGET_BOOL( "Start Thunder", ref l_U72 );
        ADD_WIDGET_FLOAT_SLIDER( "Thunder Intensity", ref l_U73, -5000.00000000, 5000.00000000, 10.00000000 );
        ADD_WIDGET_BOOL( "Is Approaching", ref l_U74 );
        ADD_WIDGET_STRING( "Thunder Strike" );
        ADD_WIDGET_BOOL( "Start Strike", ref l_U75 );
        ADD_WIDGET_BOOL( "Force After Flash", ref l_U76 );
        ADD_WIDGET_STRING( "Background Lightning" );
        ADD_WIDGET_BOOL( "Start Background Lightning", ref l_U69 );
        ADD_WIDGET_FLOAT_SLIDER( "FX Scale", ref l_U61, 0.00000000, 1000.00000000, 0.50000000 );
        ADD_WIDGET_FLOAT_SLIDER( "FX Pos X", ref l_U55._fU0, -5000.00000000, 5000.00000000, 10.00000000 );
        ADD_WIDGET_FLOAT_SLIDER( "FX Pos Y", ref l_U55._fU4, -5000.00000000, 5000.00000000, 10.00000000 );
        ADD_WIDGET_FLOAT_SLIDER( "FX Pos Z", ref l_U55._fU8, -5000.00000000, 5000.00000000, 10.00000000 );
        ADD_WIDGET_FLOAT_SLIDER( "FX Rot X", ref l_U58._fU0, -5000.00000000, 5000.00000000, 10.00000000 );
        ADD_WIDGET_FLOAT_SLIDER( "FX Rot Y", ref l_U58._fU4, -5000.00000000, 5000.00000000, 10.00000000 );
        ADD_WIDGET_FLOAT_SLIDER( "FX Rot Z", ref l_U58._fU8, -5000.00000000, 5000.00000000, 10.00000000 );
        ADD_WIDGET_STRING( "Foreground Lightning" );
        ADD_WIDGET_BOOL( "Start Foreground Lightning", ref l_U70 );
        ADD_WIDGET_FLOAT_SLIDER( "FX Scale", ref l_U68, 0.00000000, 1000.00000000, 0.50000000 );
        ADD_WIDGET_FLOAT_SLIDER( "FX Pos X", ref l_U62._fU0, -5000.00000000, 5000.00000000, 10.00000000 );
        ADD_WIDGET_FLOAT_SLIDER( "FX Pos Y", ref l_U62._fU4, -5000.00000000, 5000.00000000, 10.00000000 );
        ADD_WIDGET_FLOAT_SLIDER( "FX Pos Z", ref l_U62._fU8, -5000.00000000, 5000.00000000, 10.00000000 );
        ADD_WIDGET_FLOAT_SLIDER( "FX Rot X", ref l_U65._fU0, -5000.00000000, 5000.00000000, 10.00000000 );
        ADD_WIDGET_FLOAT_SLIDER( "FX Rot Y", ref l_U65._fU4, -5000.00000000, 5000.00000000, 10.00000000 );
        ADD_WIDGET_FLOAT_SLIDER( "FX Rot Z", ref l_U65._fU8, -5000.00000000, 5000.00000000, 10.00000000 );
        STOP_WIDGET_GROUP();
        l_U71 = 1;
    }
    if (l_U72 == 1)
    {
        TRIGGER_THUNDER( l_U73, l_U74 );
        l_U72 = 0;
    }
    if (l_U75 == 1)
    {
        TRIGGER_LIGHTNING( l_U76 );
        l_U75 = 0;
    }
    if (l_U69 == 1)
    {
        START_PARTICLE_FX_NON_LOOPED_AT_COORD( ref l_U39, l_U55, l_U58, l_U61 );
        l_U69 = 0;
    }
    if (l_U70 == 1)
    {
        START_PARTICLE_FX_NON_LOOPED_AT_COORD( ref l_U47, l_U62, l_U65, l_U68 );
        l_U70 = 0;
    }
    return;
}

void sub_13483()
{
    if (l_U336)
    {
        sub_13503();
        sub_13671();
        l_U336 = 0;
    }
    return;
}

void sub_13503()
{
    sub_687( "RJM", "DESTROY_HELICOPTER", 0 );
    if (sub_13551( l_U337 ))
    {
        sub_13609( l_U337 );
    }
    return;
}

int sub_13551(unknown uParam0)
{
    if ((NOT (IS_VEHICLE_DEAD( uParam0 ))) AND (DOES_VEHICLE_EXIST( uParam0 )))
    {
        return 1;
    }
    return 0;
}

void sub_13609(unknown uParam0)
{
    if (IS_VEHICLE_DEAD( uParam0 ))
    {
        ;
    }
    if (DOES_VEHICLE_EXIST( uParam0 ))
    {
        DELETE_VEHICLE( ref uParam0 );
    }
    return;
}

void sub_13671()
{
    sub_687( "GA", "CREATE_HELICOPTER start", 0 );
    sub_13609( l_U337 );
    l_U337 = sub_13747( g_U1037, l_U332, l_U335, 1, 0, 0 );
    if (sub_13551( l_U337 ))
    {
        FREEZE_VEHICLE_POSITION( l_U337, 1 );
        SET_VEHICLE_PROOFS( l_U337, 0, 1, 1, 1, 1 );
    }
    sub_687( "GA", "CREATE_HELICOPTER end", 0 );
    return;
}

void sub_13747(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, int iParam5, unknown uParam6, unknown uParam7)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a vehicle with MUST BE PRELOADED!!!!", 0 );
        sub_788( uParam0, 1 );
    }
    Result = CREATE_VEHICLE( uParam0, uParam1, uParam4, uParam6, uParam7 );
    if (iParam5 == 1)
    {
        while ((DOES_VEHICLE_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    if (DOES_VEHICLE_EXIST( Result ))
    {
        SET_PETROLTANK_BURN_RATE( Result, 125.00000000 );
    }
    return Result;
}

void sub_14071()
{
    if (g_U789 == 1)
    {
        if ((sub_14107()) || ((IS_PED_DEAD( sub_5011() )) == 1))
        {
            sub_687( "SP", "Mission Failed: Max has died.", "###" );
            if (sub_14588())
            {
                ;
            }
            else
            {
                while ((sub_14622( 0 )) == 0)
                {
                    WAIT( 0 );
                }
                while ((IS_PED_DEAD( sub_5011() )) == 1)
                {
                    WAIT( 0 );
                }
            }
            if ((IS_PLAYER_DEAD( g_U779._fU0 )) == 0)
            {
                SET_PLAYER_CONTROL( g_U779._fU0, 0, 0 );
            }
            SET_PLAYER_CAN_USE_FREEFORM_STRIKE( 0 );
            sub_15909( 0 );
            sub_15987();
            sub_5077( ref l_U275, sub_5011() );
            sub_1370();
            l_U247 = 2;
            sub_1715();
            sub_9753();
            sub_1021( 901765082, 1 );
            sub_1021( -1260513009, 1 );
            sub_10717( ref g_U1369, 0 );
            sub_10929( ref g_U1369, 1, 1, 1065353216 );
            sub_11080( ref g_U1369, 1 );
            l_U249 = 2;
            if ((IS_PLAYER_DEAD( g_U779._fU0 )) == 0)
            {
                SET_PLAYER_CONTROL( g_U779._fU0, 1, 0 );
            }
        }
    }
    return;
}

int sub_14107()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U0 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD( sub_5011() )))
        {
            SET_PED_FORCED_TO_WALK( sub_5011(), 0 );
            SET_PLAYER_FORCED_AIM( sub_5033(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE( sub_5033(), 1 );
            if ((IS_PED_VISIBLE( sub_5011() )) == 0)
            {
                SET_PED_VISIBLE( sub_5011(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

void sub_14588()
{
    return g_U648;
}

int sub_14622(int iParam0)
{
    iParam0 = 1;
    switch (l_U236)
    {
        case 0:
        if (NOT (sub_14683( ref l_U238 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_5011() )))
            {
                l_U237 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
            sub_1481( ref l_U238, l_U237, 1, 1 );
            sub_14802( ref l_U238 );
        }
        if (sub_14922( ref l_U238 ))
        {
            sub_687( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_5011() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD( sub_5033() )))
            {
                SET_PLAYER_CONTROL( sub_5033(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U236 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U236 = 2;
            }
            else
            {
                l_U236 = 3;
            }
        }
        break;
        case 2:
        sub_687( "NS", "Player will QUIT", 0 );
        sub_15409();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
        sub_687( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        sub_15409();
        return 1;
        break;
    }
    return 0;
}

int sub_14683(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

void sub_14802(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

int sub_14922(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

void sub_15409()
{
    sub_687( "NS", "P_PostFailRetryCleanup", 0 );
    sub_15459( ref l_U238 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD( sub_5033() )))
    {
        SET_PLAYER_CONTROL( sub_5033(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U235 = 0;
    l_U235 = l_U235;
    l_U236 = 0;
    return;
}

void sub_15459(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

void sub_15909(unknown uParam0)
{
    if ((IS_SCREEN_FADING_OUT() == 0) AND (IS_SCREEN_FADED_OUT() == 0))
    {
        DO_SCREEN_FADE_OUT( uParam0 );
        while (IS_SCREEN_FADED_OUT() == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_15987()
{
    sub_687( "GA", "P_CLEANUP_JUNGLE start", 0 );
    STOP_SOUND( l_U779, 0 );
    sub_16046();
    sub_15459( ref l_U1020 );
    sub_13609( l_U554 );
    sub_13609( l_U337 );
    sub_16480( l_U670 );
    sub_16480( l_U671 );
    sub_16534( ref l_U1031 );
    sub_16534( ref l_U1058 );
    sub_16534( ref l_U1137 );
    BULLET_CAMERA_PRELOAD_TEXT_BINK( "05_docks_txt_rustedshells", 0 );
    BULLET_CAMERA_PRELOAD_TEXT_BINK( "05_docks_txt_previouslives", 0 );
    sub_16691( ref l_U265 );
    ISEQ_UNREGISTER_ENTITY( -1260513009, "max" );
    sub_16088( -1260513009, 1 );
    sub_687( "GA", "P_CLEANUP_JUNGLE end", 0 );
    return;
}

void sub_16046()
{
    ISEQ_UNREGISTER_ENTITY( 901765082, "stretch_man" );
    sub_16088( 901765082, 1 );
    sub_9804( l_U553 );
    sub_16302( g_U1029 );
    return;
}

void sub_16088(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to terminate does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 1)
    {
        ISEQ_TERMINATE( uParam0 );
    }
    ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
    if (iParam1 == 1)
    {
        while ((ISEQ_IS_LOADED( uParam0 )) == 1)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_16302(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 1)
    {
        SET_MODEL_AS_NO_LONGER_NEEDED( uParam0 );
    }
    else
    {
        sub_893( "[SP]### ERROR! (UnloadModel) Trying to unload a model that isn't in the img! ###" );
    }
    return;
}

void sub_16480(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

void sub_16534(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        STOP_IMAGEFX( (uParam0^)[I]._fU0, 0 );
    }
    return;
}

void sub_16691(unknown uParam0)
{
    if ((DOES_CAM_EXIST( (uParam0^) )) == 1)
    {
        if ((IS_CAM_ACTIVE( (uParam0^) )) == 1)
        {
            SET_CAM_ACTIVE( (uParam0^), 0 );
        }
        DESTROY_CAM( (uParam0^) );
    }
    (uParam0^) = nil;
    return;
}

void sub_16984()
{
    int iVar2;
    int iVar3;

    sub_16994();
    switch (l_U247)
    {
        case 0:
        if (GET_NUMBER_OF_STREAMING_REQUESTS() == 0)
        {
            SET_TRANSITION_MOVIE_SKIPPABLE( 1 );
            l_U247 = 1;
        }
        break;
        case 1:
        iVar3 = GET_TRANSITION_MOVIE_FRAMES_REMAINING();
        iVar2 = l_U1272 - iVar3;
        l_U1272 = iVar3;
        if ((iVar3 <= 50) || (IS_TRANSITION_MOVIE_PLAYING() == 0))
        {
            sub_11173( "05_01_docks_concat", 1 );
            sub_17735( l_U553 );
            sub_17969( 1, 0, "05_01_docks_concat" );
            l_U247 = 2;
            break;
        }
        return;
        case 2:
        if (sub_21607())
        {
            if (sub_9317())
            {
                sub_687( "BSW", "re-Setting Max to drown in water", 0 );
                SET_PED_DIES_IN_WATER( sub_5011(), 1 );
            }
            sub_687( "RJM", "HANDLE_EVENTS - Going to JUNGLE_FIRST_SECTION", 0 );
            sub_27752();
            l_U247 = 4;
        }
        break;
        case 4:
        sub_27957();
        if (sub_17347( ref l_U348, 0 ))
        {
            START_CONTEXT( "DOCKS_START_TO_WET" );
        }
        if (NOT l_U263)
        {
            if (sub_11448( l_U978 ))
            {
                sub_687( "RJM", "Disabling shootdodge", 0 );
                SET_PLAYER_CAN_USE_SHOOTDODGE( sub_5033(), 0 );
                l_U263 = 1;
            }
        }
        else if (NOT (sub_11448( l_U978 )))
        {
            sub_687( "RJM", "Enabling shootdodge", 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE( sub_5033(), 1 );
            l_U263 = 0;
        }
        if (sub_30061( ref l_U370 ))
        {
            l_U274 = 0;
            l_U250 = 3;
            if (NOT (HAS_EXPLORATION_ITEM_BEEN_FOUND( "smar_Heli" )))
            {
                FOUND_EXPLORATION_ITEM( "smar_Heli" );
            }
            l_U369 = 1;
        }
        if (l_U369)
        {
            if (sub_32612( ref l_U369, 0 ))
            {
                l_U250 = 4;
            }
        }
        if (sub_9317())
        {
            if (IS_PED_VAULTING( sub_5011() ))
            {
                l_U264 = GET_CAM_VIEW_MODE();
                SET_CAM_VIEW_MODE( 0 );
                sub_13609( l_U337 );
                sub_16046();
                sub_16302( g_U1037 );
                sub_16302( g_U1036 );
                g_U1012 = 1;
                sub_687( "RJM", "HANDLE_EVENTS - Going to JUNGLE_WAIT_FOR_VAULT", 0 );
                l_U247 = 5;
            }
        }
        if (sub_17347( ref l_U477, 0 ))
        {
            sub_13609( l_U337 );
            sub_16046();
            sub_33451();
            sub_16302( g_U1037 );
            sub_16302( g_U1036 );
            g_U1012 = 1;
            sub_687( "RJM", "HANDLE_EVENTS - Player shootdodged, going to JUNGLE_JUNKYARD_TO_SLIPWAY", 0 );
            l_U247 = 6;
        }
        break;
        case 5:
        if (sub_17347( ref l_U477, 0 ))
        {
            SET_CAM_VIEW_MODE( l_U264 );
            sub_33451();
            sub_687( "RJM", "HANDLE_EVENTS - Going to JUNGLE_JUNKYARD_TO_SLIPWAY", 0 );
            l_U247 = 6;
        }
        break;
        case 6:
        sub_27957();
        if (NOT l_U1030)
        {
            if (sub_34983())
            {
                l_U1030 = 1;
            }
        }
        if (NOT l_U686)
        {
            sub_35114();
            if (NOT l_U686)
            {
                if (l_U476 == 0)
                {
                    if (TIME_SINCE_LAST_MONOLOGUE() > 5000)
                    {
                        if (IS_OBJECT_ON_SCREEN( l_U670 ))
                        {
                            sub_36265( "SMAR_NTTABYB", ref l_U456 );
                            l_U476 = 1;
                        }
                    }
                }
            }
            else
            {
                sub_1481( ref l_U1020, 4000, 1, 0 );
                sub_14802( ref l_U1020 );
            }
        }
        if (sub_14922( ref l_U1020 ))
        {
            sub_36449();
        }
        break;
        case 7: break;
    }
    return;
}

void sub_16994()
{
    if (NOT (sub_11448( l_U498 )))
    {
        if ((sub_14922( ref l_U780 )) == 1)
        {
            sub_17041( ref l_U807 );
        }
        sub_17232( ref l_U807 );
        if ((sub_14922( ref l_U789 )) == 1)
        {
            sub_17041( ref l_U825 );
        }
        sub_17232( ref l_U825 );
        if (sub_17347( ref l_U915, 0 ))
        {
            sub_17041( ref l_U843 );
            sub_14802( ref l_U798 );
        }
        if (l_U915._fU64)
        {
            sub_17232( ref l_U843 );
        }
        if ((sub_17347( ref l_U936, 0 )) == 1)
        {
            sub_17041( ref l_U879 );
            sub_17041( ref l_U897 );
        }
        if (l_U936._fU64)
        {
            sub_17232( ref l_U879 );
        }
    }
    return;
}

void sub_17041(int iParam0)
{
    vector vVar3;

    sub_687( "BSW", "[SP]### P_StartLightning ###", 0 );
    vVar3 = {0.00000000, 0.00000000, 0.00000000};
    if (iParam0->_fU16 == 1)
    {
        START_PARTICLE_FX_NON_LOOPED_AT_COORD( ref l_U39, iParam0->_fU4, vVar3, iParam0->_fU0 );
    }
    else
    {
        START_PARTICLE_FX_NON_LOOPED_AT_COORD( ref l_U47, iParam0->_fU4, vVar3, iParam0->_fU0 );
    }
    if (iParam0->_fU20 == 1)
    {
        sub_1481( iParam0 + 24, iParam0->_fU60, 1, 0 );
        sub_14802( iParam0 + 24 );
    }
    return;
}

void sub_17232(int iParam0)
{
    if ((sub_14922( iParam0 + 24 )) == 1)
    {
        if (iParam0->_fU68 == 0)
        {
            TRIGGER_THUNDER( iParam0->_fU64, 1 );
        }
        else
        {
            TRIGGER_LIGHTNING( 0 );
        }
    }
    return;
}

void sub_17347(int iParam0, unknown uParam1)
{
    if (iParam0->_fU64 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU64 = sub_11466( sub_5011(), (iParam0^) );
        if ((iParam0->_fU64) AND (uParam1))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU64;
}

void sub_17735(unknown uParam0)
{
    if (sub_9332( uParam0 ))
    {
        sub_687( "RJM", "Registering Comando Sombre guy with cutscene 05_01_docks_pt3", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( uParam0, "M5_CS_01_Avg", 0 );
        ISEQ_REGISTER_ENTITY( 901765082, "stretch_man", uParam0, 0 );
    }
    else
    {
        sub_687( "RJM", "CS guy's not valid now...WTF?!?", 0 );
    }
    return;
}

void sub_17969(boolean bParam0, int iParam1, unknown uParam2)
{
    boolean bVar5;
    boolean bVar6;
    int iVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    boolean bVar25;
    boolean bVar26;
    int iVar27;

    sub_687( "RJM", "P_PLAY_CUTSCENE_05_01 start", 0 );
    bVar6 = false;
    sub_18025( 0 );
    sub_788( g_U1029, 1 );
    sub_788( 434129791, 1 );
    sub_788( 984150689, 1 );
    uVar23 = sub_18491( 984150689, 1.00000000, 1.00000000, 1.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 1, 0 );
    uVar22 = sub_13747( g_U1036, 0, 0, 0, 0.00000000, 1, 0, 0 );
    if (NOT (IS_VEHICLE_DEAD( uVar22 )))
    {
        sub_687( "BSW", "creating viScene_PassosBoat", 0 );
        SET_VEHICLE_DOORS_LOCKED( uVar22, 2 );
        SET_VEHICLE_ENGINE_ON( uVar22, 0, 1 );
        SET_PAYNE_BOAT_PTFX_CUTSCENE_EFFECT( 1 );
        SET_PAYNE_BOAT_PTFX_MAX_SPEED_EVO( 1 );
        if (ARE_STRINGS_EQUAL( uParam2, "05_01_docks_sh04" ))
        {
            OVERRIDE_WATER_SETTINGS( 61.50000000, 2.17000000, 190 );
            bVar5 = true;
        }
        else
        {
            bVar5 = false;
        }
        SET_PAYNE_BOAT_PTFX_SKIP( bVar5 );
        SET_VEHICLE_EXTRA( uVar22, 1, 0 );
        SET_VEHICLE_EXTRA( uVar22, 2, 1 );
        SET_VEHICLE_EXTRA( uVar22, 3, 1 );
        SET_VEHICLE_EXTRA( uVar22, 4, 1 );
        SET_VEHICLE_EXTRA( uVar22, 5, 0 );
        SET_VEHICLE_EXTRA( uVar22, 6, 1 );
        if (DOES_OBJECT_EXIST( uVar23 ))
        {
            ATTACH_OBJECT_TO_VEHICLE( uVar23, uVar22, 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000 );
            SET_OBJECT_USE_WATER_PARTICLES( uVar23, 0 );
        }
    }
    if (ARE_STRINGS_EQUAL( uParam2, "05_01_docks_pt1" ))
    {
        sub_19104( sub_5011(), 290.20730000, -689.48680000, 1.45386100, 0 );
        LOAD_SCENE( 290.20730000, -689.48680000, 1.45386100 );
        while (GET_NUMBER_OF_STREAMING_REQUESTS() > 0)
        {
            WAIT( 0 );
        }
    }
    bVar25 = false;
    bVar26 = false;
    iVar27 = 0;
    if (ARE_STRINGS_EQUAL( uParam2, "05_01_docks_concat" ))
    {
        sub_687( "BSW", "Twiddle Time of Day: setting TOD to 0", 0 );
        FREEZE_TIME_OF_DAY( 0, 0 );
        bVar25 = true;
    }
    else if (ARE_STRINGS_EQUAL( uParam2, "05_01_docks_sh01" ))
    {
        sub_687( "BSW", "Twiddle Time of Day: setting TOD to 20 DRIZZLE", 0 );
        FREEZE_TIME_OF_DAY( 20, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "DRIZZLE" );
        SET_WEATHER_TRANSITION_IMMEDIATE( 1 );
        bVar26 = true;
    }
    sub_11173( uParam2, 1 );
    sub_1021( -1260513009, 1 );
    sub_1021( 901765082, 1 );
    if (sub_9317())
    {
        if (NOT bParam0)
        {
            sub_7262( sub_5011(), 68019059, 200, 0, 1 );
        }
        uVar24 = sub_19529();
        if (GET_DOES_WEAPON_EXIST( uVar24 ))
        {
            REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( uVar24, "W_PI_PT92_Aa_H", 0 );
        }
        CUTSCENE_REGISTER_PED_TELEPORT( sub_5011(), g_U1652, g_U1655 );
        ISEQ_REGISTER_ENTITY( -1260513009, "max", sub_5011(), 0 );
    }
    if (NOT bParam0)
    {
        sub_2979( ref uVar8, 0, 0, 0, 0.00000000, -1801828532, 7, 3, 2, 0, 0 );
        uVar21 = sub_9882( ref uVar8 );
        if (sub_9332( uVar21 ))
        {
            sub_687( "RJM", "piScene_CS is valid...why isn't he later?", 0 );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( uVar21, 1 );
            SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( uVar21, 0 );
        }
        sub_17735( uVar21 );
    }
    if (sub_13551( uVar22 ))
    {
        sub_687( "RJM", "Registering Boat with cutscene 05_01_docks_pt2", 0 );
        REGISTER_VEHICLE_PRE_SEAMLESS_CUTSCENE( uVar22, "boat_rs", 0 );
    }
    if (iParam1 == 1)
    {
        START_CUTSCENE_CAPTURE( uParam2 );
    }
    SET_PED_PTFX_SPLASH_OUT_SPECIAL_EFFECT( 1 );
    SET_WAKES_SECTION( 13 );
    if (bParam0)
    {
        CUTSCENE_ENABLE_SKIP( 0 );
    }
    CUTSCENE_REGISTER_ISEQ( 901765082 );
    CUTSCENE_REGISTER_ISEQ( -1260513009 );
    START_SEAMLESS_CUTSCENE();
    WAIT( 1 );
    DO_SCREEN_FADE_IN( 0 );
    while (NOT HAS_CUTSCENE_FINISHED())
    {
        iVar7 = GET_CUTSCENE_TIME_MS();
        if (bVar25)
        {
            if ((iVar27 == 0) AND (iVar7 > 32462))
            {
                FREEZE_TIME_OF_DAY( 22, 0 );
                sub_687( "BSW", "Twiddle Time of Day: setting TOD to 22", 0 );
                iVar27++;
            }
            else if ((iVar27 == 1) AND (iVar7 > 37255))
            {
                FREEZE_TIME_OF_DAY( 0, 0 );
                sub_687( "BSW", "Twiddle Time of Day: setting TOD to 0", 0 );
                iVar27++;
            }
            else if ((iVar27 == 2) AND (iVar7 > 70322))
            {
                FREEZE_TIME_OF_DAY( 22, 0 );
                sub_687( "BSW", "Twiddle Time of Day: setting TOD to 22", 0 );
                iVar27++;
            };;;
        }
        if (bVar26)
        {
            if ((iVar27 == 0) AND (iVar7 > 36780))
            {
                FREEZE_TIME_OF_DAY( 0, 0 );
                SET_WEATHER_TYPE_NOW_PERSIST( "RAIN" );
                SET_WEATHER_TRANSITION_IMMEDIATE( 1 );
                sub_687( "BSW", "Twiddle Time of Day: setting 0 RAIN", 0 );
                iVar27++;
            }
            else if ((iVar27 == 1) AND (iVar7 > 41563))
            {
                FREEZE_TIME_OF_DAY( 20, 0 );
                SET_WEATHER_TYPE_NOW_PERSIST( "DRIZZLE" );
                SET_WEATHER_TRANSITION_IMMEDIATE( 1 );
                sub_687( "BSW", "Twiddle Time of Day: setting TOD to 22", 0 );
                iVar27++;
            }
            else if ((iVar27 == 2) AND (iVar7 > 46309))
            {
                FREEZE_TIME_OF_DAY( 0, 0 );
                SET_WEATHER_TYPE_NOW_PERSIST( "RAIN" );
                SET_WEATHER_TRANSITION_IMMEDIATE( 1 );
                sub_687( "BSW", "Twiddle Time of Day: setting 0 RAIN #2", 0 );
                iVar27++;
            }
            else if ((iVar27 == 3) AND (iVar7 > 52491))
            {
                FREEZE_TIME_OF_DAY( 20, 0 );
                SET_WEATHER_TYPE_NOW_PERSIST( "DRIZZLE" );
                SET_WEATHER_TRANSITION_IMMEDIATE( 1 );
                sub_687( "BSW", "Twiddle Time of Day: setting 0 RAIN #2", 0 );
                iVar27++;
            };;;;
        }
        if (NOT bVar5)
        {
            if (iVar7 > 49000)
            {
                if (ARE_STRINGS_EQUAL( uParam2, "05_01_docks_concat" ))
                {
                    sub_687( "BSW", "Enabling PTFX skip and water settings at cutscene MS > 57000", 0 );
                    bVar5 = true;
                    SET_PAYNE_BOAT_PTFX_SKIP( bVar5 );
                    OVERRIDE_WATER_SETTINGS( 61.50000000, 2.17000000, 190 );
                }
            }
        }
        if (NOT bVar6)
        {
            if (iVar7 > 61000)
            {
                sub_687( "BSW", "Resetting water settings at cutscene MS > 66000", 0 );
                USE_DEFAULT_WATER_SETTINGS();
                bVar6 = true;
            }
        }
        WAIT( 0 );
    }
    FREEZE_TIME_OF_DAY( 22, 0 );
    if (ARE_STRINGS_EQUAL( uParam2, "05_01_docks_sh04" ))
    {
        SET_PAYNE_BOAT_PTFX_SKIP( 0 );
    }
    SET_PED_PTFX_SPLASH_OUT_SPECIAL_EFFECT( 0 );
    SET_WAKES_SECTION( 0 );
    SET_PAYNE_BOAT_PTFX_CUTSCENE_EFFECT( 0 );
    SET_PAYNE_BOAT_PTFX_MAX_SPEED_EVO( 0 );
    USE_DEFAULT_WATER_SETTINGS();
    sub_13609( uVar22 );
    sub_16480( uVar23 );
    sub_16302( 434129791 );
    sub_16302( 984150689 );
    if (IS_SCREEN_FADED_OUT())
    {
        LOAD_SCENE( g_U790[1] );
    }
    sub_9804( uVar21 );
    sub_687( "RJM", "P_PLAY_CUTSCENE_05_01 end", 0 );
    return;
}

void sub_18025(unknown uParam0)
{
    sub_687( "SP", "P_SETUP_WEATHER_TIMEOFDAY", 0 );
    FREEZE_TIME_OF_DAY( 22, 0 );
    switch (uParam0)
    {
        case 0:
        case 1:
        SET_WEATHER_TYPE_NOW_PERSIST( "DRIZZLE" );
        SET_PUDDLES( 0.00000000, 0.07000000, 0.00000000, 0.11000000 );
        break;
        case 2:
        case 4:
        case 5:
        SET_WEATHER_TYPE_NOW_PERSIST( "RAIN" );
        SET_PUDDLES( 0.00000000, 0.07000000, 0.00000000, 0.67000000 );
        break;
        case 6:
        case 7:
        case 8:
        SET_WEATHER_TYPE_NOW_PERSIST( "STORMY" );
        SET_PUDDLES( 0.11000000, 0.07000000, 0.11000000, 0.90000000 );
        break;
        case 9:
        SET_WEATHER_TYPE_NOW_PERSIST( "STORMY" );
        SET_PUDDLES( 0.11000000, 0.07000000, 0.11000000, 1.00000000 );
        break;
        case 10:
        SET_WEATHER_TYPE_NOW_PERSIST( "STORMY" );
        FREEZE_TIME_OF_DAY( 21, 0 );
        break;
        default:
        SET_WEATHER_TYPE_NOW_PERSIST( "RAIN" );
        break;
    }
    return;
}

void sub_18491(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
        sub_788( uParam0, 1 );
    }
    Result = CREATE_OBJECT( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

void sub_19104(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

int sub_19529()
{
    unknown Result;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_5011() )) == 0)
    {
        Result = GET_WEAPON_FROM_HAND( sub_5011(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( Result )) == 1)
        {
            if ((sub_19592( Result )) == 1)
            {
                return Result;
            }
        }
        uVar3 = GET_WEAPON_FROM_HAND( sub_5011(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            return uVar3;
        }
        uVar4 = GET_WEAPON_FROM_HOLSTER( sub_5011(), 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar4 )) == 1)
        {
            return uVar4;
        }
        uVar5 = GET_WEAPON_FROM_HOLSTER( sub_5011(), 1 );
        if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
        {
            return uVar5;
        }
    }
    return 0;
}

int sub_19592(unknown uParam0)
{
    int iVar3;

    if ((GET_DOES_WEAPON_EXIST( uParam0 )) == 1)
    {
        iVar3 = GET_WEAPON_TYPE( uParam0 );
        if ((iVar3 == 1194438308) || ((iVar3 == -76667461) || ((iVar3 == -1404433099) || ((iVar3 == 1131969637) || ((iVar3 == -691403429) || ((iVar3 == 1845102363) || ((iVar3 == 150541352) || ((iVar3 == -820634585) || ((iVar3 == -612753081) || ((iVar3 == 811797242) || ((iVar3 == 68019059) || ((iVar3 == -1464892298) || ((iVar3 == 456708483) || ((iVar3 == -862236369) || (iVar3 == 406496141)))))))))))))))
        {
            return 1;
        }
    }
    return 0;
}

int sub_21607()
{
    switch (l_U248)
    {
        case 0:
        sub_687( "BSW", "PLAY_05_01_BLENDOUT - BLENDOUT_INIT", 0 );
        sub_21715( 1, 0, 0, 1 );
        if (NOT l_U275._fU0)
        {
            g_U789 = 1;
            sub_21941( ref l_U275, g_U789, sub_5011(), g_U790[1], g_U899[1], g_U936[1], g_U973[1], 1 );
        }
        l_U1271 = GET_WEAPON_FROM_HAND( sub_5011(), 0, 0 );
        SET_WEAPON_LIGHT_DATA_BY_NAME( l_U1271, "Flashlight_Docks" );
        ENABLE_WEAPON_ATTACHMENT( l_U1271, 8, 1 );
        TOGGLE_WEAPON_ATTACHMENT( l_U1271, 8, 1 );
        ENABLE_WEAPON_ATTACHMENT( l_U1271, 14, 1 );
        TOGGLE_WEAPON_ATTACHMENT( l_U1271, 14, 0 );
        if (sub_9332( l_U553 ))
        {
            sub_25668( l_U553 );
            if (NOT (ISEQ_QUERY_STATE( 901765082, 3 )))
            {
                sub_687( "BSW", "PLAY_05_01_BLENDOUT - starting up stretch yawn man", 0 );
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U553, 1 );
                ISEQ_REGISTER_ENTITY( 901765082, "stretch_man", l_U553, 0 );
                ISEQ_START( 901765082 );
            }
        }
        if (sub_9317())
        {
            sub_687( "RJM", "Setting Max's sync point", 0 );
            if (NOT (ISEQ_QUERY_STATE( -1260513009, 3 )))
            {
                SET_FORCED_AIM_INTENTION_DIRECTION( g_U1645 );
                sub_19104( sub_5011(), g_U1652, g_U1655 );
                ISEQ_REGISTER_ENTITY( -1260513009, "max", sub_5011(), 0 );
                ISEQ_START( -1260513009 );
            }
        }
        CAMERA_PLAY_ANIMATED( "LEVEL_S_MARINA_CP_01", "B_OUT_05_01_DOCKS_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
        sub_13671();
        sub_687( "BSW", "PLAY_05_01_BLENDOUT - BLENDOUT_FRAME_1", 0 );
        l_U248 = 1;
        break;
        case 1:
        DO_SCREEN_FADE_IN( 0 );
        l_U250 = 1;
        sub_687( "BSW", "PLAY_05_01_BLENDOUT - BLENDOUT_WAIT_FOR_CAM", 0 );
        l_U248 = 2;
        break;
        case 2:
        if (sub_9332( l_U553 ))
        {
            if (sub_26297( ref l_U957, l_U553, 0 ))
            {
                sub_11080( ref g_U1369, 0 );
                sub_26410( ref g_U1369, 0 );
            }
        }
        if ((CAMERA_ANIMATED_CURRENT_TIME() + 1) >= (CAMERA_ANIMATED_LENGTH( "LEVEL_S_MARINA_CP_01", "B_OUT_05_01_DOCKS_CAM" )))
        {
            sub_26604();
            CAMERA_FREEZE_FRAME( 1, 500, 0, 0 );
            SET_GAMEPLAY_CAM_RELATIVE_HEADING( -0.89906500, 1065353216, 0 );
            SET_GAMEPLAY_CAM_RELATIVE_PITCH( 0.85242800, 1065353216, 0 );
            sub_687( "BSW", "PLAY_05_01_BLENDOUT - Going to BLENDOUT_DONE", 0 );
            sub_27267( 1, 1 );
            RESET_FORCED_AIM_INTENTION_DIRECTION();
            sub_687( "BSW", "PLAY_05_01_BLENDOUT - BLENDOUT_DONE", 0 );
            l_U248 = 3;
        }
        break;
        case 3:
        return 1;
        break;
    }
    return 0;
}

void sub_21715(int iParam0, int iParam1, unknown uParam2, boolean bParam3)
{
    END_POSTFX_BLENDER( 12, 0 );
    if (bParam3)
    {
        STOP_ALL_IMAGEFX( 0 );
    }
    SET_WIDESCREEN_BORDERS( 1, 500 );
    DISPLAY_HUD( 0 );
    if (iParam0 == 1)
    {
        if (NOT (IS_PED_DEAD( sub_5011() )))
        {
            SET_PLAYER_CONTROL( sub_5033(), 0, uParam2 );
            SET_PED_DUCKING( sub_5011(), 0 );
            if (iParam1 == 1)
            {
                CLEAR_PED_TASKS_IMMEDIATELY( sub_5011() );
            }
            SET_PED_INVINCIBLE( sub_5011(), 1 );
        }
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    return;
}

void sub_21941(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

    sub_687( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
        sub_687( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
        sub_7916( iParam1 );
        sub_22200( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
            sub_22651( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
            sub_22651( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_22883( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
            sub_22651( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_22883( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_22883( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
            sub_22651( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_22883( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_22883( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_22883( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
            sub_22651( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_22883( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_22883( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_22883( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if (sub_22883( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
            sub_24441( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U1, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
    sub_687( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

void sub_22200(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 = sub_5293( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
        sub_687( "TEH", "Ending context", 0 );
        sub_687( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

void sub_22651(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

void sub_22883(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

void sub_24441(int iParam0)
{
    sub_893( "CHECKPOINT DATA" );
    sub_24480( iParam0->_fU4 );
    sub_24503( iParam0->_fU16 );
    sub_24503( iParam0->_fU20 );
    sub_24503( iParam0->_fU24 );
    sub_11624( iParam0->_fU28 );
    sub_11624( iParam0->_fU56 );
    sub_11624( iParam0->_fU60 );
    sub_11624( iParam0->_fU64 );
    sub_11624( iParam0->_fU68 );
    sub_11624( iParam0->_fU72 );
    sub_11624( iParam0->_fU76 );
    sub_11624( iParam0->_fU80 );
    sub_11624( iParam0->_fU84 );
    sub_11624( iParam0->_fU88 );
    sub_11624( iParam0->_fU92 );
    sub_24503( iParam0->_fU32 );
    sub_11624( iParam0->_fU36 );
    sub_11624( iParam0->_fU40 );
    sub_11624( iParam0->_fU44 );
    sub_24503( iParam0->_fU136 );
    sub_24738( iParam0->_fU140 );
    sub_11624( iParam0->_fU52 );
    sub_893( "---nRightHolsterAttachmentEnabled: " );
    sub_11624( iParam0->_fU96 );
    sub_893( "---nRightHolsterAttachmentToggled: " );
    sub_11624( iParam0->_fU100 );
    sub_893( "---nLeftHolsterAttachmentEnabled: " );
    sub_11624( iParam0->_fU104 );
    sub_893( "---nLeftHolsterAttachmentToggled: " );
    sub_11624( iParam0->_fU108 );
    sub_893( "---nRifleHolsterAttachmentEnabled: " );
    sub_11624( iParam0->_fU112 );
    sub_893( "---nRifleHolsterAttachmentToggled: " );
    sub_11624( iParam0->_fU116 );
    sub_893( "---nRightHandAttachmentEnabled: " );
    sub_11624( iParam0->_fU120 );
    sub_893( "---nRightHandAttachmentToggled: " );
    sub_11624( iParam0->_fU124 );
    sub_893( "---nLeftHandAttachmentEnabled: " );
    sub_11624( iParam0->_fU128 );
    sub_893( "---nLeftHandAttachmentToggled: " );
    sub_11624( iParam0->_fU132 );
    sub_11624( l_U1 );
    sub_11624( 144 );
    return;
}

void sub_24480(unknown uParam0, unknown uParam1, unknown uParam2)
{
    return;
}

void sub_24503(unknown uParam0)
{
    return;
}

void sub_24738(boolean bParam0)
{
    if (bParam0)
    {
        ;
    }
    return;
}

void sub_25668(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 0 );
        SET_PED_VISIBLE( uParam0, 1 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 1 );
        FREEZE_PED_POSITION( uParam0, 0 );
        SET_PED_COLLISION( uParam0, 1 );
        SET_PED_PROOFS( uParam0, 0, 0, 0, 0, 0 );
    }
    return;
}

void sub_26297(int iParam0, unknown uParam1, unknown uParam2)
{
    if (iParam0->_fU68 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU68 = sub_11466( uParam1, (iParam0^) );
        if ((iParam0->_fU68) AND (uParam2))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU68;
}

void sub_26410(int iParam0, int iParam1)
{
    if ((sub_10729( iParam0 )) == 0)
    {
        sub_10795( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    return;
}

void sub_26604()
{
    sub_687( "GA", "P_JUNGLE_SETUP_FOR_GAMEPLAY start", 0 );
    sub_18025( 1 );
    sub_26667();
    sub_26969();
    sub_687( "GA", "P_JUNGLE_SETUP_FOR_GAMEPLAY end", 0 );
    return;
}

void sub_26667()
{
    sub_687( "GA", "P_JUNGLE_SETUP_WAREHOUSE_DOORS start", 0 );
    sub_10717( ref l_U672, 1 );
    sub_10717( ref l_U679, 1 );
    if (NOT (DOES_OBJECT_EXIST( l_U670 )))
    {
        l_U670 = sub_18491( g_U1052, l_U773, 0.00000000, 0.00000000, 180.00000000, 0, 0, 0 );
        CAMERA_CAN_TARGET_OBJECT( 1, l_U670 );
        SET_OBJECT_TARGETTABLE( l_U670, 1 );
    }
    if (NOT (DOES_OBJECT_EXIST( l_U671 )))
    {
        l_U671 = sub_18491( -832750542, l_U776, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
        SET_OBJECT_COLLISION( l_U671, 0 );
        FREEZE_OBJECT_POSITION( l_U671, 1 );
    }
    sub_687( "GA", "P_JUNGLE_SETUP_WAREHOUSE_DOORS end", 0 );
    return;
}

void sub_26969()
{
    sub_687( "GA", "P_JUNGLE_START_FIRST_LIGHTNING start", 0 );
    sub_14802( ref l_U780 );
    sub_14802( ref l_U789 );
    sub_687( "GA", "P_JUNGLE_START_FIRST_LIGHTNING end", 0 );
    return;
}

void sub_27267(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD( sub_5011() )))
    {
        SET_PLAYER_CONTROL( sub_5033(), 1, 0 );
        SET_PED_INVINCIBLE( sub_5011(), 0 );
        if (bParam0)
        {
            sub_27348();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

void sub_27348()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_5011() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND( sub_5011(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND( sub_5011(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_5011(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_5011(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

void sub_27752()
{
    unknown uVar2;

    sub_687( "CO", "P_INITIALIZE_IMAGEFX_MID_CP_01_A", 0 );
    l_U1031[0]._fU12 = 0;
    l_U1031[0]._fU16 = 0;
    l_U1031[0]._fU20 = 0;
    l_U1031[0]._fU24 = 0;
    l_U1031[0]._fU4 = "INTERLACE_GLITCH_FAST_01";
    l_U1031[0]._fU8 = 4;
    l_U1031[0]._fU16 = 700;
    l_U1031[0]._fU100 = 0;
    l_U1270 = 1;
    g_U1669 = 0;
    return;
}

void sub_27957()
{
    switch (l_U1270)
    {
        case 0: break;
        case 1:
        sub_28036( ref l_U1031 );
        break;
        case 2:
        sub_28036( ref l_U1058 );
        break;
        case 3:
        sub_28036( ref l_U1137 );
        break;
        case 4:
        sub_28036( ref l_U1190 );
        break;
        case 5:
        sub_28036( ref l_U1217 );
        break;
    }
    if (sub_26297( ref l_U556, sub_5011(), 0 ))
    {
        sub_28887();
    }
    if (sub_26297( ref l_U577, sub_5011(), 0 ))
    {
        sub_29206();
    }
    if (sub_26297( ref l_U598, sub_5011(), 0 ))
    {
        sub_29412();
    }
    if (sub_26297( ref l_U619, sub_5011(), 0 ))
    {
        sub_29596();
    }
    return;
}

void sub_28036(unknown uParam0)
{
    int I;
    int J;

    switch (g_U1669)
    {
        case 0:
        sub_687( "CO", "P_HANDLE_IMAGEFX", 0 );
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            sub_687( "CO", (uParam0^)[I]._fU4, 0 );
            if (NOT (uParam0^)[I]._fU100)
            {
                sub_687( "CO", "NOT FXCompleted", 0 );
                sub_1481( ref (uParam0^)[I]._fU28, (uParam0^)[I]._fU12, 1, 0 );
                sub_14802( ref (uParam0^)[I]._fU28 );
                if ((uParam0^)[I]._fU20 > 0)
                {
                    I += (uParam0^)[I]._fU20;
                }
            }
        }
        g_U1669 = 1;
        break;
        case 1:
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (sub_14922( ref (uParam0^)[I]._fU28 ))
            {
                (uParam0^)[I]._fU0 = PLAY_IMAGEFX( (uParam0^)[I]._fU4, (uParam0^)[I]._fU8, 0 );
                if ((uParam0^)[I]._fU16 > 0)
                {
                    sub_1481( ref (uParam0^)[I]._fU64, (uParam0^)[I]._fU16, 1, 0 );
                    sub_14802( ref (uParam0^)[I]._fU64 );
                }
                if ((uParam0^)[I]._fU20 > 0)
                {
                    for ( J = I + 1; J <= (I + (uParam0^)[I]._fU20); J++ )
                    {
                        (uParam0^)[J]._fU0 = PLAY_IMAGEFX( (uParam0^)[J]._fU4, (uParam0^)[J]._fU8, 0 );
                        if ((uParam0^)[J]._fU16 > 0)
                        {
                            sub_1481( ref (uParam0^)[J]._fU64, (uParam0^)[J]._fU16, 1, 0 );
                            sub_14802( ref (uParam0^)[J]._fU64 );
                        }
                    }
                    I += (uParam0^)[I]._fU20;
                }
            }
            if (sub_14922( ref (uParam0^)[I]._fU64 ))
            {
                STOP_IMAGEFX( (uParam0^)[I]._fU0, (uParam0^)[I]._fU24 );
                (uParam0^)[I]._fU100 = 1;
                if ((uParam0^)[I]._fU20 > 0)
                {
                    if ((uParam0^)[I]._fU20 == 1)
                    {
                        STOP_IMAGEFX( (uParam0^)[I + 1]._fU0, (uParam0^)[I + 1]._fU24 );
                        (uParam0^)[I + 1]._fU100 = 1;
                    }
                    else
                    {
                        for ( J = I + 1; J <= (uParam0^)[I]._fU20; J++ )
                        {
                            STOP_IMAGEFX( (uParam0^)[J]._fU0, (uParam0^)[J]._fU24 );
                            (uParam0^)[J]._fU100 = 1;
                        }
                    }
                    I += (uParam0^)[I]._fU20;
                }
            }
        }
        break;
    }
    return;
}

void sub_28887()
{
    int I;

    sub_687( "CO", "P_INITIALIZE_IMAGEFX_MID_CP_01_B", 0 );
    for ( I = 0; I <= 2; I++ )
    {
        l_U1058[I]._fU12 = 0;
        l_U1058[I]._fU16 = 0;
        l_U1058[I]._fU20 = 0;
        l_U1058[I]._fU24 = 0;
        l_U1058[I]._fU100 = 0;
    }
    l_U1058[0]._fU4 = "FLASH_WHITE_2";
    l_U1058[0]._fU8 = 4;
    l_U1058[0]._fU12 = 0;
    l_U1058[0]._fU20 = 1;
    l_U1058[0]._fU16 = 537;
    l_U1058[1]._fU4 = "GAMMA_SATURATION_COLOR_ZOOM_3";
    l_U1058[1]._fU8 = 4;
    l_U1058[1]._fU16 = 1000;
    l_U1270 = 2;
    g_U1669 = 0;
    return;
}

void sub_29206()
{
    sub_687( "CO", "P_INITIALIZE_IMAGEFX_MID_CP_01_C", 0 );
    l_U1137[0]._fU20 = 0;
    l_U1137[0]._fU24 = 0;
    l_U1137[0]._fU100 = 0;
    l_U1137[0]._fU4 = "GAMMA_SATURATION_COLOR_ZOOM";
    l_U1137[0]._fU8 = 4;
    l_U1137[0]._fU12 = 0;
    l_U1137[0]._fU16 = 800;
    l_U1270 = 3;
    g_U1669 = 0;
    return;
}

void sub_29412()
{
    sub_687( "CO", "P_INITIALIZE_IMAGEFX_MID_CP_01_D", 0 );
    l_U1190[0]._fU24 = 0;
    l_U1190[0]._fU100 = 0;
    l_U1190[0]._fU4 = "DOUBLE_IMAGE_MASK_R_FAST_HARD";
    l_U1190[0]._fU8 = 4;
    l_U1190[0]._fU12 = 0;
    l_U1270 = 4;
    g_U1669 = 0;
    return;
}

void sub_29596()
{
    sub_687( "CO", "P_INITIALIZE_IMAGEFX_MID_CP_01_E", 0 );
    l_U1217[0]._fU24 = 0;
    l_U1217[0]._fU100 = 0;
    l_U1217[0]._fU4 = "DOUBLE_MASK_INTERLACE_TWITCH";
    l_U1217[0]._fU8 = 4;
    l_U1217[0]._fU12 = 0;
    l_U1217[1]._fU24 = 0;
    l_U1217[1]._fU100 = 0;
    l_U1217[1]._fU4 = "DOUBLE_WIDE_INTERLACE_FLASH_07";
    l_U1217[1]._fU8 = 4;
    l_U1217[1]._fU12 = 1000;
    l_U1270 = 5;
    g_U1669 = 0;
    return;
}

int sub_30061(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    int iVar6;
    int iVar7;
    int iVar8;

    if ((IS_PED_DEAD( sub_5011() )) == 0)
    {
        if (iParam0->_fU0 == 1)
        {
            uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( sub_5011() )};
            iVar6 = 0;
            if (iParam0->_fU80 == 1)
            {
                if ((sub_11466( sub_5011(), iParam0->_fU116 )) == 1)
                {
                    if (iParam0->_fU300 == 1)
                    {
                        if (((IS_OBJECT_ON_SCREEN( iParam0->_fU312 )) == 1) AND ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1))
                        {
                            iVar6 = 1;
                        }
                    }
                    else
                    {
                        iVar6 = 1;
                    }
                }
            }
            else if ((iParam0->_fU308 == 1) AND (iParam0->_fU84 == 1))
            {
                if ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU312 ), 1 )) <= iParam0->_fU112)
                    {
                        if (iParam0->_fU300 == 1)
                        {
                            if ((IS_OBJECT_ON_SCREEN( iParam0->_fU312 )) == 1)
                            {
                                iVar6 = 1;
                            }
                        }
                        else
                        {
                            iVar6 = 1;
                        }
                    }
                }
            }
            else if (iParam0->_fU96 == 1)
            {
                if ((DOES_PED_EXIST( iParam0->_fU316 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU316 ), 1 )) <= iParam0->_fU112)
                    {
                        if (iParam0->_fU300 == 1)
                        {
                            if ((IS_PED_ON_SCREEN( iParam0->_fU316, 0 )) == 1)
                            {
                                iVar6 = 1;
                            }
                        }
                        else
                        {
                            iVar6 = 1;
                        }
                    }
                }
            }
            else if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, iParam0->_fU100, 1 )) <= iParam0->_fU112)
            {
                if (iParam0->_fU300 == 1)
                {
                    if (((IS_OBJECT_ON_SCREEN( iParam0->_fU312 )) == 1) AND ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1))
                    {
                        iVar6 = 1;
                    }
                }
                else
                {
                    iVar6 = 1;
                }
            };;;;
            iVar7 = 0;
            if (iParam0->_fU88 == 1)
            {
                if ((sub_11466( sub_5011(), iParam0->_fU216 )) == 1)
                {
                    iVar7 = 1;
                }
            }
            else if ((iParam0->_fU308 == 1) AND (iParam0->_fU92 == 1))
            {
                if ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU312 ), 1 )) <= iParam0->_fU212)
                    {
                        iVar7 = 1;
                    }
                }
            }
            else if (iParam0->_fU96 == 1)
            {
                if ((DOES_PED_EXIST( iParam0->_fU316 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU316 ), 1 )) <= iParam0->_fU212)
                    {
                        iVar7 = 1;
                    }
                }
            }
            else if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, iParam0->_fU200, 1 )) <= iParam0->_fU212)
            {
                iVar7 = 1;
            };;;;
            if (iVar6 == 1)
            {
                if ((iParam0->_fU4 != 3) AND (iParam0->_fU52 == 1))
                {
                    if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                    {
                        sub_30891( iParam0 );
                    }
                    iVar8 = 0;
                    if ((IS_WEAPON_PICKUP_VISIBLE() == 0) AND ((iParam0->_fU60 == 0) AND ((sub_30952( iParam0 )) == 1)))
                    {
                        SET_ACTION_CONSUMED( 0, 1 );
                        if (sub_31262() == 1)
                        {
                            iVar8 = 1;
                        }
                    }
                    if (iVar8 == 1)
                    {
                        if (iParam0->_fU332 == 0)
                        {
                            sub_31339( iParam0, 0 );
                            iParam0->_fU64 = 1;
                        }
                        if (iParam0->_fU68 == 1)
                        {
                            iParam0->_fU72 = 0;
                        }
                        return 1;
                    }
                    else if (iParam0->_fU8 != 2)
                    {
                        if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                        {
                            sub_4142( iParam0, 0 );
                            sub_31410( iParam0, 1 );
                        }
                        else if (iParam0->_fU320 == 1)
                        {
                            sub_4142( iParam0, 1 );
                        }
                        iParam0->_fU8 = 2;
                    }
                    if ((iParam0->_fU328 == 0) AND (iParam0->_fU324 == 1))
                    {
                        if ((IS_PED_DEAD( sub_5011() )) == 0)
                        {
                            SET_PED_FORCED_TO_WALK( sub_5011(), 1 );
                            iParam0->_fU328 = 1;
                        }
                    }
                }
            }
            else if (iVar7 == 1)
            {
                if (iParam0->_fU8 != 1)
                {
                    if ((iParam0->_fU4 != 3) AND (iParam0->_fU320 == 1))
                    {
                        sub_4142( iParam0, 1 );
                    }
                    if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                    {
                        sub_31410( iParam0, 0 );
                    }
                    if (iParam0->_fU96 == 1)
                    {
                        if (((IS_PED_DEAD( sub_5011() )) == 0) AND ((((IS_PED_DEAD( iParam0->_fU316 )) == 1) || ((IS_PED_DEAD( iParam0->_fU316 )) == 0)) AND ((DOES_PED_EXIST( iParam0->_fU316 )) == 1)))
                        {
                            TASK_LOOK_AT_PED( sub_5011(), iParam0->_fU316, -1, 0 );
                        }
                    }
                    else if ((IS_PED_DEAD( sub_5011() )) == 0)
                    {
                        TASK_LOOK_AT_COORD( sub_5011(), iParam0->_fU100, -1, 0 );
                    }
                    iParam0->_fU340 = 1;
                    if ((iParam0->_fU72 == 0) AND ((iParam0->_fU68 == 1) AND ((iParam0->_fU64 == 1) AND (iParam0->_fU8 == 2))))
                    {
                        iParam0->_fU72 = 1;
                    }
                    iParam0->_fU8 = 1;
                }
                if ((iParam0->_fU328 == 0) AND (iParam0->_fU324 == 1))
                {
                    if ((IS_PED_DEAD( sub_5011() )) == 0)
                    {
                        SET_PED_FORCED_TO_WALK( sub_5011(), 1 );
                        iParam0->_fU328 = 1;
                    }
                }
            }
            else if ((iParam0->_fU4 == 1) || (iParam0->_fU4 == 3))
            {
                ;
            }
            else if (iParam0->_fU8 != 0)
            {
                if (iParam0->_fU320 == 1)
                {
                    sub_4142( iParam0, 0 );
                }
            }
            if (iParam0->_fU8 == 2)
            {
                if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                {
                    sub_31410( iParam0, 0 );
                }
            }
            if (iParam0->_fU340)
            {
                if ((IS_PED_DEAD( sub_5011() )) == 0)
                {
                    TASK_CLEAR_LOOK_AT( sub_5011() );
                    iParam0->_fU340 = 0;
                }
            }
            if ((iParam0->_fU328 == 1) AND (iParam0->_fU324 == 1))
            {
                if ((IS_PED_DEAD( sub_5011() )) == 0)
                {
                    SET_PED_FORCED_TO_WALK( sub_5011(), 0 );
                    iParam0->_fU328 = 0;
                }
            }
            if (iParam0->_fU332 == 1)
            {
                sub_31410( iParam0, 0 );
            }
            iParam0->_fU8 = 0;;;
        }
    }
    return 0;
}

void sub_30891(int iParam0)
{
    if (iParam0->_fU60 == 1)
    {
        SET_INTERACTIONTEXT_AVAILABLE( 0 );
        iParam0->_fU56 = 0;
    }
    else if (iParam0->_fU56 == 1)
    {
        if ((sub_30952( iParam0 )) == 0)
        {
            SET_INTERACTIONTEXT_AVAILABLE( 0 );
            iParam0->_fU56 = 0;
        }
    }
    else if ((sub_30952( iParam0 )) == 1)
    {
        SET_INTERACTIONTEXT_AVAILABLE( 1 );
        iParam0->_fU56 = 1;
    };;;
    return;
}

int sub_30952(int iParam0)
{
    if (((IS_PED_DEAD( sub_5011() )) == 0) AND ((IS_PLAYER_DEAD( sub_5033() )) == 0))
    {
        if (((IS_PED_RELOADING( sub_5011() )) == 1) || (((IS_PED_GETTING_UP( sub_5011() )) == 1) || (((IS_PED_PICKING_UP_PICKUP( sub_5011() )) == 1) || (((IS_PED_IN_COVER( sub_5011() )) == 1) || (((IS_PED_DUCKING( sub_5011() )) == 1) || (IS_PLAYER_SHOOTDODGING() == 1))))))
        {
            return 0;
        }
        if (iParam0->_fU304 == 0)
        {
            if ((IS_MONOLOGUE_PLAYING() == 1) || ((IS_ANY_SPEECH_PLAYING( sub_5011() )) == 1))
            {
                return 0;
            }
        }
        return 1;
    }
    return 0;
}

int sub_31262()
{
    if ((IS_CONTROL_JUST_PRESSED( 0, 30 )) == 1)
    {
        return 1;
    }
    return 0;
}

void sub_31339(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        if ((iParam0->_fU4 == 1) AND (iParam0->_fU320 == 1))
        {
            sub_4142( iParam0, 1 );
        }
        iParam0->_fU0 = 1;
    }
    else
    {
        sub_4142( iParam0, 0 );
        sub_31410( iParam0, 0 );
        if ((IS_PED_DEAD( sub_5011() )) == 0)
        {
            TASK_CLEAR_LOOK_AT( sub_5011() );
            if ((iParam0->_fU328 == 1) AND (iParam0->_fU324 == 1))
            {
                SET_PED_FORCED_TO_WALK( sub_5011(), 0 );
                iParam0->_fU328 = 0;
            }
        }
        iParam0->_fU8 = 0;
        iParam0->_fU0 = 0;
    }
    return;
}

void sub_31410(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        SET_INTERACTIONTEXT_TEXT( iParam0 + 32 );
        SET_INTERACTIONTEXT_BUTTON( iParam0->_fU48 );
        if ((iParam0->_fU72 == 0) AND ((iParam0->_fU64 == 1) AND (iParam0->_fU68 == 1)))
        {
            SET_INTERACTIONTEXT_VISIBLE( 0 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 0 );
            SET_INTERACTIONTEXT_AVAILABLE( 0 );
            iParam0->_fU56 = 0;
        }
        else
        {
            SET_INTERACTIONTEXT_VISIBLE( 1 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 1 );
            SET_INTERACTIONTEXT_AVAILABLE( 1 );
            iParam0->_fU56 = 1;
        }
        sub_30891( iParam0 );
        if (iParam0->_fU332 == 1)
        {
            SET_INTERACTIONTEXT_PULSE( 1 );
            SET_INTERACTIONTEXT_PULSE_PERIOD( iParam0->_fU336 );
        }
    }
    else
    {
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        SET_INTERACTIONTEXT_BUTTON_VISIBLE( 0 );
    }
    return;
}

int sub_32612(unknown uParam0, boolean bParam1)
{
    switch (l_U274)
    {
        case 0:
        if (HAS_CUTSCENE_UNLOADED())
        {
            sub_687( "SBA", "PLAY_MIDSCENE_01A: state = eM01a_Setup", 0 );
            sub_21715( 1, 0, 0, 1 );
            sub_11173( ref l_U266, 1 );
            sub_1021( 2091847006, 1 );
            l_U274 = 1;
        }
        break;
        case 1:
        sub_687( "SBA", "PLAY_MIDSCENE_01A: state =  eM01a_PlayMidscene", 0 );
        if (sub_9317())
        {
            CUTSCENE_REGISTER_ISEQ( 2091847006 );
            ISEQ_REGISTER_ENTITY( 2091847006, "max", sub_5011(), 0 );
            CUTSCENE_REGISTER_PED_TELEPORT( sub_5011(), 50.58000000, -160.46000000, 3.62636400, 350.56370000 );
            REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( sub_5011(), 0, 0 ), "W_PI_PT92_Aa_H", 0 );
        }
        if (bParam1)
        {
            START_CUTSCENE_CAPTURE( ref l_U266 );
        }
        START_SEAMLESS_CUTSCENE();
        while (NOT HAS_CUTSCENE_FINISHED())
        {
            WAIT( 0 );
        }
        if (bParam1)
        {
            STOP_CUTSCENE_CAPTURE();
        }
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( 20.62314000, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( -6.14244600, 1065353216, 0 );
        sub_687( "SBA", "PLAY_MIDSCENE_01A: Going to eM01a_PlayBlendout", 0 );
        l_U274 = 2;
        break;
        case 2:
        if (ISEQ_QUERY_STATE( 2091847006, 6 ))
        {
            sub_687( "SBA", "PLAY_MIDSCENE_01A: Blend out done", 0 );
            sub_27267( 1, 1 );
            (uParam0^) = 0;
            l_U250 = 4;
            sub_687( "RJM", "PLAY_MIDSCENE_01A end", 0 );
            return 1;
        }
        break;
    }
    return 0;
}

void sub_33451()
{
    sub_687( "RJM", "PLAY_RUSTED_AREA_MONOLOGUE start", 0 );
    if (NOT (IS_PED_DEAD( sub_5011() )))
    {
        sub_33530( ref l_U660 );
        sub_33612( 0, sub_5011(), "MAX", ref l_U660, 2, 0 );
        sub_33612( 1, sub_5011(), "MAX", ref l_U660, 2, 0 );
        sub_33851( "SMAR_JEMB", ref l_U660, 7, 1 );
    }
    IS_SCRIPTEDFX_ENABLED();
    PLAY_IMAGEFX( "DOUBLE_MASK_INTLCE_TWTCH_INVRT", 4, 0 );
    sub_687( "RJM", "PLAY_RUSTED_AREA_MONOLOGUE end", 0 );
    return;
}

void sub_33530(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

void sub_33612(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

void sub_33851(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return sub_33875( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

void sub_33875(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return sub_33930( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

int sub_33930(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT (sub_33965( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
    sub_34459( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

int sub_33965(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

void sub_34459(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

int sub_34983()
{
    unknown uVar2;
    int iVar3;
    int iVar4;

    if (sub_9317())
    {
        uVar2 = GET_WEAPON_FROM_HAND( sub_5011(), 0, 0 );
        if (GET_DOES_WEAPON_EXIST( uVar2 ))
        {
            GET_AMMO_IN_CLIP( sub_5011(), GET_WEAPON_TYPE( uVar2 ), ref iVar3 );
            iVar4 = (GET_WEAPON_AMMO( uVar2 )) + iVar3;
            if (iVar4 == 0)
            {
                return 1;
            }
        }
    }
    return 0;
}

void sub_35114()
{
    if (NOT l_U686)
    {
        if (DOES_OBJECT_EXIST( l_U670 ))
        {
            if (l_U1030)
            {
                if (sub_11448( l_U999 ))
                {
                    if (NOT l_U1029)
                    {
                        sub_687( "RJM", "SET_PLAYER_CAN_USE_FREEFORM_STRIKE(TRUE)", 0 );
                        SET_PLAYER_CAN_USE_FREEFORM_STRIKE( 1 );
                        l_U1029 = 1;
                    }
                }
                else if (l_U1029)
                {
                    sub_687( "RJM", "SET_PLAYER_CAN_USE_FREEFORM_STRIKE(FALSE)", 0 );
                    SET_PLAYER_CAN_USE_FREEFORM_STRIKE( 0 );
                    l_U1029 = 0;
                }
            }
            if (HAS_OBJECT_BEEN_DAMAGED( l_U670 ))
            {
                sub_687( "RJM", "Lock was damaged, open the gates", 0 );
                PLAY_IMAGEFX( "FLASH_WHITE", 4, 0 );
                if (DOES_OBJECT_EXIST( l_U671 ))
                {
                    PLAY_OBJECT_ANIM( l_U671, "P_MA_DorHng_Aa_h", "ma_doors", -1, 0, 1 );
                }
                SET_PLAYER_CAN_USE_FREEFORM_STRIKE( 0 );
                CAMERA_CAN_TARGET_OBJECT( 0, l_U670 );
                SET_OBJECT_TARGETTABLE( l_U670, 0 );
                if (sub_35535( l_U640 ))
                {
                    sub_35701( ref l_U640, 0 );
                }
                sub_35793();
                l_U555 = 1;
                l_U686 = 1;
            }
            else
            {
                sub_30061( ref l_U687 );
            }
        }
    }
    return;
}

int sub_35535(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    if (NOT (sub_35548( uParam0 )))
    {
        return 0;
    }
    if ((g_U11[uParam0._fU4] == 2) || ((g_U11[uParam0._fU4] == 1) || (IS_SCRIPTED_CONVERSATION_ONGOING( uParam0._fU4 ))))
    {
        if (uParam0._fU8 == g_U6[uParam0._fU4])
        {
            return 1;
        }
    }
    return 0;
}

boolean sub_35548(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    int iVar12;

    if (uParam0._fU4 < 0)
    {
        return 0;
    }
    iVar12 = GET_CHECK_HASH_FROM_CONVERSATION_ID( uParam0._fU4 );
    return (uParam0._fU16 == iVar12) AND (iVar12 != 0);
}

void sub_35701(int iParam0, unknown uParam1)
{
    if (NOT (sub_35548( (iParam0^) )))
    {
        ;
    }
    else if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (iParam0->_fU8 == g_U6[iParam0->_fU4])
        {
            STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, uParam1, 0 );
        }
    }
    return;
}

void sub_35793()
{
    sub_687( "GA", "P_JUNGLE_OPEN_WAREHOUSE_DOORS start", 0 );
    sub_35862( ref l_U672, 0, 85 );
    sub_10717( ref l_U672, 0 );
    sub_10929( ref l_U672, 1, 1, 0.10000000 );
    sub_10929( ref l_U672, 1, 0, 0.40000000 );
    PLAY_SOUND_FROM_COORD( l_U779, "METAL_GATE_LARGE_OPEN_CREAK", l_U672._fU4 );
    sub_31339( ref l_U687, 0 );
    PLAY_IMAGEFX( "DOUBLE_IMAGE_INTERLACE_BURN_6", 4, 0 );
    sub_687( "GA", "P_JUNGLE_OPEN_WAREHOUSE_DOORS end", 0 );
    return;
}

void sub_35862(int iParam0, float fParam1, float fParam2)
{
    if ((sub_10729( iParam0 )) == 0)
    {
        sub_10795( iParam0 );
    }
    if (fParam1 > fParam2)
    {
        ;
    }
    else
    {
        DOOR_FIND_CLOSEST_SET_LIMIT_MIN( iParam0->_fU0, iParam0->_fU4, fParam1 );
        DOOR_FIND_CLOSEST_SET_LIMIT_MAX( iParam0->_fU0, iParam0->_fU4, fParam2 );
    }
    return;
}

void sub_36265(unknown uParam0, unknown uParam1)
{
    sub_687( "SBA", "P_SPEECH_PLAY_MAX_MONOLOGUE", "***" );
    if (sub_9317())
    {
        sub_33530( uParam1 );
        sub_33612( 0, sub_5011(), "MAX", uParam1, 2, 0 );
        sub_33612( 1, sub_5011(), "MAX", uParam1, 2, 0 );
        sub_33851( uParam0, uParam1, 8, 1 );
    }
    return;
}

void sub_36449()
{
    sub_687( "RJM", "PLAY_PADLOCK_MONOLOGUE start", 0 );
    if (NOT (IS_PED_DEAD( sub_5011() )))
    {
        sub_33530( ref l_U650 );
        sub_33612( 0, sub_5011(), "MAX", ref l_U650, 2, 0 );
        sub_33612( 1, sub_5011(), "MAX", ref l_U650, 2, 0 );
        sub_33851( "SMAR_JEMC", ref l_U650, 7, 1 );
    }
    sub_687( "RJM", "PLAY_PADLOCK_MONOLOGUE end", 0 );
    return;
}

void sub_36684()
{
    sub_687( "GA", "P_REMOVE_JUNGLE_ASSETS start", 0 );
    sub_16302( -832750542 );
    sub_16302( -75892828 );
    sub_16302( g_U1052 );
    sub_16302( g_U1029 );
    sub_16302( g_U1037 );
    sub_36797( "ma_doors" );
    RELEASE_SOUND_ID( l_U779 );
    sub_687( "GA", "P_REMOVE_JUNGLE_ASSETS end", 0 );
    return;
}

void sub_36797(unknown uParam0)
{
    REMOVE_ANIM_DICT( uParam0, 0 );
    return;
}

