void main()
{
    unknown uVar2;

    l_U0 = 0;
    l_U1 = 1;
    l_U2 = 0;
    l_U3 = 1.00000000;
    l_U4 = -5.00000000;
    l_U5 = 0;
    l_U6 = 0;
    l_U7 = 0;
    l_U11 = 42;
    l_U12 = 0;
    l_U13 = 0;
    l_U14 = 0;
    l_U15 = 0;
    l_U16 = 0;
    l_U17 = 90.00000000;
    l_U18 = {0.00000000, 0.00000000, 0.00000000};
    l_U21 = {0.00000000, 0.00000000, 0.00000000};
    l_U24 = 0;
    l_U25 = 0;
    l_U26 = 0;
    l_U27 = 0;
    l_U28 = 0;
    l_U29 = 0;
    l_U30 = nil;
    l_U31 = {0.00000000, 0.00000000, 0.00000000};
    l_U34 = 0;
    l_U35 = 0;
    l_U36 = 0;
    l_U57 = "PED_DEF";
    l_U99 = 1.00000000;
    l_U111 = 0;
    l_U152 = 0;
    l_U172 = "cm_bridgeanim";
    l_U219 = {-112.96800000, -6.11200000, -1.70000000};
    l_U222 = {0.00000000, 0.00000000, 0.00000000};
    l_U225 = 0;
    l_U226 = 0;
    l_U227 = 0;
    l_U228 = 0;
    l_U229 = {0, 0, 0};
    StrCopy( ref l_U232, "DUMMY", 32 );
    l_U240 = 1;
    l_U245 = 0;
    l_U246 = 0;
    l_U247 = 0;
    l_U250 = 0;
    l_U309 = 0;
    l_U310 = 0;
    l_U402 = {g_U971[2]._fU0};
    l_U405 = g_U971[2]._fU12;
    l_U406 = {g_U779[2]._fU0};
    l_U409 = g_U779[2]._fU12;
    l_U410 = 0;
    l_U411 = {-99.07800000, 28.53300000, -2.20000000};
    l_U414 = 65401;
    l_U415 = 0;
    l_U416 = 0;
    l_U417 = 0;
    l_U418 = 0;
    l_U419 = 0;
    l_U420 = 0;
    l_U421 = 0;
    l_U422 = 0;
    l_U437 = 0;
    l_U438 = 0;
    l_U439 = 0;
    l_U454 = 0;
    l_U455 = {-3.36788000, 100.65630000, 5.41662900};
    l_U458 = 0.00000000;
    l_U487 = {2.67700000, 91.27100000, 7.15000000};
    l_U490 = 90;
    l_U491 = {-0.55900000, 89.68300000, 7.11000000};
    l_U494 = 65491;
    l_U495 = 0;
    l_U497 = 0;
    l_U498 = {58.00000000, -58.68000000, 9.22992000};
    l_U501 = 182;
    l_U502 = {64.52800000, -68.19200000, 7.82600000};
    l_U505 = 96.93400000;
    l_U509 = {g_U779[9]._fU0};
    l_U512 = g_U779[9]._fU12;
    l_U513 = 1;
    l_U514 = 1000;
    l_U515 = 0.01000000;
    l_U516 = -15.50000000;
    l_U517 = 1;
    l_U518 = 0;
    l_U519 = {75.30000000, 65456, 4.32000000};
    l_U522 = 210;
    l_U523 = 0;
    l_U524 = {67.75000000, -107.75000000, 0.98000000};
    l_U527 = 270.00000000;
    l_U528 = 0;
    l_U529 = 0;
    l_U530 = 0;
    l_U531 = {g_U779[9]._fU0};
    l_U534 = g_U779[9]._fU12;
    l_U538 = 0;
    l_U539 = {g_U779[9]._fU0};
    l_U542 = g_U779[9]._fU12;
    l_U543 = 1;
    l_U544 = 1;
    l_U545 = 0;
    l_U546 = 0;
    l_U547 = {60.10000000, -110.65000000, 5.10000000};
    l_U550 = 196.00000000;
    l_U557 = 0;
    l_U617 = 0;
    l_U680 = 0;
    l_U681 = 0;
    l_U682 = 0;
    l_U683 = 0;
    l_U684 = 0;
    l_U685 = 0;
    l_U686 = 0;
    l_U687 = 0;
    l_U688 = 0;
    l_U689 = 0;
    l_U690 = 0;
    l_U691 = {67.07200000, -113.62400000, 0.98200000};
    l_U694 = {67.07200000, -113.72400000, 0.98200000};
    l_U697 = -15.80600000;
    l_U698 = 0;
    l_U699 = 0;
    l_U700 = 0;
    l_U701 = 0;
    l_U702 = {0, 0, 0};
    l_U705 = {0, 0, 0};
    l_U708 = 1.00000000;
    l_U709 = 0.00000000;
    l_U710 = -1;
    l_U711 = 0;
    l_U712 = 0;
    l_U713 = 0;
    l_U714 = 0;
    l_U715 = {89.07363000, -110.77990000, 6.43514300};
    l_U718 = 65446;
    l_U719 = 1;
    sub_1336( "SP", "Script s_nyc_iSequences is starting...", "###" );
    uVar2 = sub_1461( sub_1385(), 456708483, 200, 0, 1 );
    l_U415 = 0;
    l_U410 = 0;
    l_U454 = 0;
    l_U495 = 0;
    sub_1821();
    sub_2053();
    sub_7183();
    sub_7357( 1000 );
    while (true)
    {
        sub_7441();
        sub_11977();
        sub_14058();
        sub_33550();
        sub_34352();
        sub_36880();
        WAIT( 0 );
    }
    sub_1336( "SP", "Script s_nyc_iSequences is terminating...", "###" );
    return;
}

void sub_1336(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    return;
}

int sub_1385()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED( sub_1407() );
    }
    return 0;
}

void sub_1407()
{
    return GET_PLAYER_ID();
}

void sub_1461(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                }
            }
        }
    }
    else
    {
        sub_1767( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

void sub_1767(unknown uParam0)
{
    return;
}

void sub_1821()
{
    sub_1336( "SBA", "Assigning Cadaver Vars...", "***" );
    l_U662[0] = {77.59000000, -110.08000000, 2.02000000};
    l_U662[1] = {77.32000000, -104.83500000, 2.02000000};
    l_U662[2] = {64.59000000, -98.80000000, 2.02000000};
    l_U672[0] = 275.50000000;
    l_U672[1] = 180;
    l_U672[2] = 250;
    l_U676[0] = "Cadaver1";
    l_U676[1] = "Cadaver2";
    l_U676[2] = "Cadaver3";
    return;
}

void sub_2053()
{
    sub_1336( "RJM", "CREATE_RAG_WIDGETS for S_NYC iSequences", 0 );
    START_WIDGET_GROUP( "Grenadier on 2-Stair Hill" );
    ADD_WIDGET_BOOL( "Teleport player", ref l_U438 );
    ADD_WIDGET_BOOL( "Create Grenadier", ref l_U439 );
    ADD_WIDGET_BOOL( "Make Grenadier Shoot Once", ref l_U437 );
    STOP_WIDGET_GROUP();
    START_WIDGET_GROUP( "Interactive Sequence Helper" );
    START_WIDGET_GROUP( "08_01_BLENDOUT - Max and thug enemies" );
    sub_2373( ref l_U311, g_U971[1]._fU0, g_U971[1]._fU12, 0 );
    ADD_WIDGET_BOOL( "Use cover tasks for thugs", ref l_U616 );
    sub_2547( ref g_U971[1]._fU0, "08_01 Max Position", 0.00100000 );
    ADD_WIDGET_FLOAT_SLIDER( "08_01 Max Rotation", ref g_U971[1]._fU12, 65176, 360, 1 );
    sub_2547( ref g_U1303, "Ped 0 Position", 0.00100000 );
    ADD_WIDGET_FLOAT_SLIDER( "Ped 0 Rotation", ref g_U1306, 65176, 360, 1 );
    sub_2547( ref g_U1307, "Ped 1 Position", 0.00100000 );
    ADD_WIDGET_FLOAT_SLIDER( "Ped 1 Rotation", ref g_U1310, 65176, 360, 1 );
    sub_2547( ref g_U1311, "Ped 2 Position", 0.00100000 );
    ADD_WIDGET_FLOAT_SLIDER( "Ped 2 Rotation", ref g_U1314, 65176, 360, 1 );
    sub_2547( ref g_U1315, "Ped 3 Position", 0.00100000 );
    ADD_WIDGET_FLOAT_SLIDER( "Ped 3 Rotation", ref g_U1318, 65176, 360, 1 );
    STOP_WIDGET_GROUP();
    START_WIDGET_GROUP( "VIGNETTE 01 - Max & Passos in MPM" );
    sub_2373( ref l_U318, g_U971[2]._fU0, g_U971[2]._fU12, 0 );
    sub_2547( ref l_U402, "VIG_01 Max Position", 0.00100000 );
    ADD_WIDGET_FLOAT_SLIDER( "VIG_01 Max Rotation", ref l_U405, 65176, 360, 1 );
    sub_2547( ref l_U406, "VIG_01 Passos Position", 0.00100000 );
    ADD_WIDGET_FLOAT_SLIDER( "VIG_01 Passos Rotation", ref l_U409, 65176, 360, 1 );
    STOP_WIDGET_GROUP();
    START_WIDGET_GROUP( "VIGNETTE 02->08 - Passos' movement through 2-Stair Hill" );
    sub_2373( ref l_U325, -100.82880000, 22.56141000, -2.21717900, 325.71960000, 0 );
    ADD_WIDGET_BOOL( "ACTION01 - Send Passos to Stairs", ref l_U416 );
    ADD_WIDGET_BOOL( "ACTION02 - Send Passos to Upper Level", ref l_U417 );
    ADD_WIDGET_BOOL( "ACTION03 - Send Passos to Gate", ref l_U418 );
    ADD_WIDGET_BOOL( "ACTION04 - Prompt 1 at Gate", ref l_U419 );
    ADD_WIDGET_BOOL( "ACTION05 - Prompt 2 at Gate", ref l_U420 );
    ADD_WIDGET_BOOL( "ACTION06 - Prompt 3 at Gate", ref l_U421 );
    ADD_WIDGET_BOOL( "ACTION07 - Prompt 4 at Gate", ref l_U422 );
    sub_2547( ref l_U411, "VIG_02 Passos Position", 0.00100000 );
    ADD_WIDGET_FLOAT_SLIDER( "VIG_02 Passos Rotation", ref l_U414, 65176, 360, 1 );
    sub_2547( ref g_U1319, "VIG_07 Teleport Position", 0.00100000 );
    ADD_WIDGET_FLOAT_SLIDER( "VIG_07 Teleport Rotation", ref g_U1322, 65176, 360, 1 );
    sub_2547( ref g_U1323, "VIG_08 Teleport Position", 0.00100000 );
    ADD_WIDGET_FLOAT_SLIDER( "VIG_08 Teleport Rotation", ref g_U1326, 65176, 360, 1 );
    STOP_WIDGET_GROUP();
    START_WIDGET_GROUP( "VIGNETTE 09B - Enemy opens gate in Small Rotunda" );
    sub_2373( ref l_U332, -7.62661600, 110.43070000, 4.95109900, 209.51420000, 0 );
    sub_2547( ref l_U455, "VIG_09B Thug Position", 0.00100000 );
    ADD_WIDGET_FLOAT_SLIDER( "VIG_09B Thug Rotation", ref l_U458, 65176, 360, 1 );
    STOP_WIDGET_GROUP();
    START_WIDGET_GROUP( "VIGNETTE 10 - Two NPCs arguing in Small Rotunda" );
    sub_2373( ref l_U339, -3.16683300, 101.28430000, 5.41662900, 204.92850000, 0 );
    ADD_WIDGET_BOOL( "ACTION01 - Start guys arguing", ref l_U496 );
    sub_2547( ref l_U487, "VIG_10 Dude1 Position", 0.00100000 );
    ADD_WIDGET_FLOAT_SLIDER( "VIG_10 Dude1 Rotation", ref l_U490, 65176, 360, 1 );
    sub_2547( ref l_U491, "VIG_10 Dude2 Position", 0.00100000 );
    ADD_WIDGET_FLOAT_SLIDER( "VIG_10 Dude2 Rotation", ref l_U494, 65176, 360, 1 );
    STOP_WIDGET_GROUP();
    START_WIDGET_GROUP( "BLEND OUT 08_04b" );
    sub_2373( ref l_U346, 59.29900000, -63.67200000, 8.53516000, 233.12000000, 1 );
    sub_4644( "Passos Start Position", ref l_U509, ref l_U512 );
    ADD_WIDGET_FLOAT_SLIDER( "Gameplay cam heading", ref l_U515, -360.00000000, 360.00000000, 0.01000000 );
    ADD_WIDGET_FLOAT_SLIDER( "Gameplay cam pitch", ref l_U516, -360.00000000, 360.00000000, 0.01000000 );
    ADD_WIDGET_BOOL( "Use animated cam", ref l_U517 );
    ADD_WIDGET_INT_SLIDER( "Interp back time", ref l_U514, 0, 5000, 1 );
    ADD_WIDGET_INT_SLIDER( "Frames to end cam early", ref l_U513, 0, 5000, 1 );
    STOP_WIDGET_GROUP();
    START_WIDGET_GROUP( "VIGNETTE 20 & 20A: End Grave Dig" );
    sub_2373( ref l_U353, g_U971[8]._fU0, g_U971[8]._fU12, 1 );
    ADD_WIDGET_BOOL( "Passos Can Look", ref l_U507 );
    ADD_WIDGET_BOOL( "Stop Passos Look", ref l_U508 );
    ADD_WIDGET_BOOL( "Passos Walk Down Stairs", ref l_U506 );
    sub_4644( "Passos VIG20 Start Position", ref l_U498, ref l_U501 );
    sub_4644( "Passos VIG20A Start Position", ref l_U502, ref l_U505 );
    STOP_WIDGET_GROUP();
    START_WIDGET_GROUP( "VIGNETTE 20B: Outside Morgue" );
    sub_2373( ref l_U360, g_U971[8]._fU0, g_U971[8]._fU12, 1 );
    sub_4644( "Passos Start Position", ref l_U519, ref l_U522 );
    STOP_WIDGET_GROUP();
    START_WIDGET_GROUP( "VIGNETTE 20D: Outside Morgue" );
    sub_2373( ref l_U367, g_U971[8]._fU0, g_U971[8]._fU12, 1 );
    sub_4644( "Passos Start Position", ref l_U524, ref l_U527 );
    ADD_WIDGET_BOOL( "Use wounded model", ref l_U310 );
    ADD_WIDGET_BOOL( "Use normal model", ref l_U309 );
    STOP_WIDGET_GROUP();
    START_WIDGET_GROUP( "VIGNETTE 21: Outside Morgue" );
    sub_2373( ref l_U374, g_U971[9]._fU0, g_U971[9]._fU12, 1 );
    ADD_WIDGET_BOOL( "Play Passos VO (do first)", ref l_U535 );
    ADD_WIDGET_BOOL( "Passos Walks to Stairs", ref l_U537 );
    sub_4644( "Passos Start Position", ref l_U531, ref l_U534 );
    STOP_WIDGET_GROUP();
    START_WIDGET_GROUP( "VIGNETTE 22: Morgue Cover" );
    sub_2373( ref l_U381, 63.65004000, -107.22960000, 0.98242800, 270, 1 );
    ADD_WIDGET_BOOL( "Passos Can Shoot and Peek", ref l_U544 );
    ADD_WIDGET_BOOL( "Move to stairs", ref l_U545 );
    sub_4644( "Passos Start Position", ref l_U539, ref l_U542 );
    STOP_WIDGET_GROUP();
    START_WIDGET_GROUP( "Morgue Cadavers" );
    sub_2373( ref l_U388, 63.65004000, -107.22960000, 0.98242800, 270, 1 );
    sub_4644( "Cadaver 01 Start Position", ref l_U662[0], ref l_U672[0] );
    sub_4644( "Cadaver 02 Start Position", ref l_U662[1], ref l_U672[1] );
    sub_4644( "Cadaver 03 Start Position", ref l_U662[2], ref l_U672[2] );
    STOP_WIDGET_GROUP();
    START_WIDGET_GROUP( "VIGNETTE 23 - 24: Chapel" );
    sub_2373( ref l_U395, g_U971[10]._fU0, g_U971[10]._fU12, 1 );
    ADD_WIDGET_BOOL( "Transition to VIG24 - no shooting, allow speech", ref l_U551 );
    ADD_WIDGET_BOOL( "Speech01", ref l_U552 );
    ADD_WIDGET_BOOL( "Speech02", ref l_U553 );
    ADD_WIDGET_BOOL( "Speech03", ref l_U554 );
    ADD_WIDGET_BOOL( "Speech04", ref l_U555 );
    ADD_WIDGET_BOOL( "Speech05", ref l_U556 );
    sub_4644( "Passos Start Position", ref l_U547, ref l_U550 );
    STOP_WIDGET_GROUP();
    START_WIDGET_GROUP( "TV in Morgue Office" );
    START_WIDGET_GROUP( "Teleport and load" );
    ADD_WIDGET_BOOL( "Teleport to Old Morgue Office", ref l_U680 );
    ADD_WIDGET_FLOAT_SLIDER( "Player x on", ref l_U691._fU0, -360.00000000, 360.00000000, 1.00000000 );
    ADD_WIDGET_FLOAT_SLIDER( "Player y on", ref l_U691._fU4, -360.00000000, 360.00000000, 1.00000000 );
    ADD_WIDGET_FLOAT_SLIDER( "Player z on", ref l_U691._fU8, -360.00000000, 360.00000000, 1.00000000 );
    ADD_WIDGET_FLOAT_SLIDER( "Player x off", ref l_U694._fU0, -360.00000000, 360.00000000, 1.00000000 );
    ADD_WIDGET_FLOAT_SLIDER( "Player y off", ref l_U694._fU4, -360.00000000, 360.00000000, 1.00000000 );
    ADD_WIDGET_FLOAT_SLIDER( "Player z off", ref l_U694._fU8, -360.00000000, 360.00000000, 1.00000000 );
    ADD_WIDGET_FLOAT_SLIDER( "Player Heading", ref l_U697, -360.00000000, 360.00000000, 1.00000000 );
    ADD_WIDGET_BOOL( "Load Channel Changing", ref l_U686 );
    ADD_WIDGET_BOOL( "Load Turning On", ref l_U685 );
    ADD_WIDGET_BOOL( "Load Turning Off", ref l_U687 );
    STOP_WIDGET_GROUP();
    START_WIDGET_GROUP( "Start the ISEQ's" );
    ADD_WIDGET_BOOL( "START Channel Changing", ref l_U683 );
    ADD_WIDGET_BOOL( "START Turning On", ref l_U682 );
    ADD_WIDGET_BOOL( "START Turning Off", ref l_U684 );
    STOP_WIDGET_GROUP();
    START_WIDGET_GROUP( "Unloads" );
    ADD_WIDGET_BOOL( "UNLoad Channel Changing", ref l_U689 );
    ADD_WIDGET_BOOL( "UNLoad Turning On", ref l_U688 );
    ADD_WIDGET_BOOL( "UNLoad Turning Off", ref l_U690 );
    STOP_WIDGET_GROUP();
    STOP_WIDGET_GROUP();
    STOP_WIDGET_GROUP();
    return;
}

void sub_2373(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, boolean bParam5)
{
    iParam0->_fU0 = 0;
    iParam0->_fU4 = 0;
    iParam0->_fU8 = 0;
    iParam0->_fU12 = {uParam1};
    iParam0->_fU24 = uParam4;
    ADD_WIDGET_BOOL( "Teleport player", iParam0 + 0 );
    ADD_WIDGET_BOOL( "Start Sequence", iParam0 + 4 );
    ADD_WIDGET_BOOL( "Kill Sequence", iParam0 + 8 );
    if (bParam5)
    {
        sub_2547( iParam0 + 12, "Player Teleport Position", 1036831949 );
        ADD_WIDGET_FLOAT_SLIDER( "Player Teleport Heading", iParam0 + 24, 65176, 360, 0.50000000 );
    }
    return;
}

void sub_2547(int iParam0, unknown uParam1, unknown uParam2)
{
    START_WIDGET_GROUP( uParam1 );
    ADD_WIDGET_FLOAT_SLIDER( "x", iParam0 + 0, 60536, 5000, uParam2 );
    ADD_WIDGET_FLOAT_SLIDER( "y", iParam0 + 4, 60536, 5000, uParam2 );
    ADD_WIDGET_FLOAT_SLIDER( "z", iParam0 + 8, 60536, 5000, uParam2 );
    STOP_WIDGET_GROUP();
    return;
}

void sub_4644(unknown uParam0, unknown uParam1, unknown uParam2)
{
    START_WIDGET_GROUP( uParam0 );
    sub_2547( uParam1, "Ped Position", 1036831949 );
    ADD_WIDGET_FLOAT_SLIDER( "Ped Heading", uParam2, -360.00000000, 360.00000000, 1.00000000 );
    STOP_WIDGET_GROUP();
    return;
}

void sub_7183()
{
    START_WIDGET_GROUP( "New Bridge Rayfire Test" );
    ADD_WIDGET_BOOL( "Teleport Max", ref l_U227 );
    ADD_WIDGET_BOOL( "Create Bridge", ref l_U225 );
    ADD_WIDGET_BOOL( "Start Collapse", ref l_U226 );
    ADD_WIDGET_BOOL( "Kill Collapse", ref l_U228 );
    STOP_WIDGET_GROUP();
    return;
}

void sub_7357(unknown uParam0)
{
    if ((IS_SCREEN_FADING_IN() == 0) AND (IS_SCREEN_FADED_IN() == 0))
    {
        DO_SCREEN_FADE_IN( uParam0 );
        while (IS_SCREEN_FADED_IN() == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_7441()
{
    if (g_U1939)
    {
        g_U1939 = 0;
        sub_7473( g_U1352, 1 );
        sub_7473( g_U1353, 1 );
        sub_7473( g_U1354, 1 );
        sub_7473( g_U1355, 1 );
        sub_7473( g_U1356, 1 );
        sub_7473( g_U1357, 1 );
        sub_7473( g_U1358, 1 );
        sub_7473( g_U1359, 1 );
        sub_7473( g_U1360, 1 );
        sub_7473( g_U1361, 1 );
        sub_7473( g_U1362, 1 );
        sub_7473( g_U1363, 1 );
        START_WIDGET_GROUP( "Old Bridge Rayfire Test" );
        ADD_WIDGET_BOOL( "bCreateBridgeRayfire", ref g_U1942 );
        ADD_WIDGET_BOOL( "bStartBridgeCollapse", ref g_U1943 );
        ADD_WIDGET_BOOL( "bCreateBridgeRayfirePre", ref g_U1940 );
        ADD_WIDGET_BOOL( "bCreateBridgeRayfirePost", ref g_U1941 );
        ADD_WIDGET_BOOL( "bDoFullCollapseSequence", ref g_U1944 );
        ADD_WIDGET_BOOL( "bOpenBridgeGates", ref g_U1945 );
        ADD_WIDGET_BOOL( "bCleanDebris", ref g_U1946 );
        STOP_WIDGET_GROUP();
    }
    if (g_U1942)
    {
        g_U1942 = 0;
        sub_8060( 1 );
    }
    if (g_U1940)
    {
        g_U1940 = 0;
        sub_10083();
    }
    if (g_U1941)
    {
        g_U1941 = 0;
        sub_10409();
    }
    if (g_U1943)
    {
        g_U1943 = 0;
        sub_10939();
    }
    if (g_U1944)
    {
        g_U1944 = 0;
        sub_8060( 1 );
        sub_10939();
    }
    if (g_U1945)
    {
        g_U1945 = 0;
        sub_11671( ref g_U1417, 1, 1, 1065353216 );
        sub_11671( ref g_U1424, 0, 1, 1065353216 );
    }
    if (g_U1946)
    {
        g_U1946 = 0;
        sub_8179( g_U1796 );
        sub_8179( g_U1786 );
        sub_8179( g_U1787 );
        sub_8179( g_U1788 );
        sub_8179( g_U1789 );
        sub_8179( g_U1790 );
        sub_8179( g_U1791 );
        sub_8179( g_U1792 );
        sub_8179( g_U1793 );
        sub_8179( g_U1794 );
        sub_8179( g_U1795 );
        sub_8179( g_U1797 );
    }
    return;
}

void sub_7473(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
        sub_1767( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_8060(boolean bParam0)
{
    float fVar3;

    sub_1767( "[SP]### P_VAN_MPM_CREATE_BRIDGE_RAYFIRE ###" );
    fVar3 = 0.80000000;
    sub_1336( "[MSWW]", "Cleaning objects", "###" );
    if (bParam0)
    {
        sub_8179( g_U1796 );
    }
    sub_8179( g_U1786 );
    sub_8179( g_U1787 );
    sub_8179( g_U1788 );
    sub_8179( g_U1789 );
    sub_8179( g_U1790 );
    sub_8179( g_U1791 );
    sub_8179( g_U1792 );
    sub_8179( g_U1793 );
    sub_8179( g_U1794 );
    sub_8179( g_U1795 );
    sub_8179( g_U1797 );
    sub_1336( "[MSWW]", "Creating objects", "###" );
    g_U1786 = sub_8390( g_U1352, 65426, -6, -2, 0, 0, 0, 0, 1, 0 );
    g_U1787 = sub_8390( g_U1353, 65426, -6, -2, 0, 0, 0, 0, 1, 0 );
    g_U1788 = sub_8390( g_U1354, 65426, -6, -2, 0, 0, 0, 0, 1, 0 );
    g_U1789 = sub_8390( g_U1355, 65426, -6, -2, 0, 0, 0, 0, 1, 0 );
    g_U1790 = sub_8390( g_U1356, 65426, -6, -2, 0, 0, 0, 0, 1, 0 );
    g_U1791 = sub_8390( g_U1357, 65426, -6, -2, 0, 0, 0, 0, 1, 0 );
    g_U1792 = sub_8390( g_U1358, 65426, -6, -2, 0, 0, 0, 0, 1, 0 );
    g_U1793 = sub_8390( g_U1359, 65426, -6, -2, 0, 0, 0, 0, 1, 0 );
    g_U1794 = sub_8390( g_U1360, 65426, -6, -2, 0, 0, 0, 0, 1, 0 );
    g_U1795 = sub_8390( g_U1361, 65426, -6, -2, 0, 0, 0, 0, 1, 0 );
    sub_1336( "[MSWW]", "Freezing objects", "###" );
    if ((DOES_OBJECT_EXIST( g_U1786 )) == 1)
    {
        FREEZE_OBJECT_POSITION( g_U1786, 1 );
        PLAY_OBJECT_ANIM( g_U1786, "gate_anim_root01", ref g_U1196, 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( g_U1786, "gate_anim_root01", ref g_U1196, fVar3 );
    }
    if ((DOES_OBJECT_EXIST( g_U1787 )) == 1)
    {
        FREEZE_OBJECT_POSITION( g_U1787, 1 );
        PLAY_OBJECT_ANIM( g_U1787, "gate_anim_root02", ref g_U1196, 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( g_U1787, "gate_anim_root02", ref g_U1196, fVar3 );
    }
    if ((DOES_OBJECT_EXIST( g_U1788 )) == 1)
    {
        FREEZE_OBJECT_POSITION( g_U1788, 1 );
        PLAY_OBJECT_ANIM( g_U1788, "gate_anim_root03", ref g_U1196, 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( g_U1788, "gate_anim_root03", ref g_U1196, fVar3 );
    }
    if ((DOES_OBJECT_EXIST( g_U1789 )) == 1)
    {
        FREEZE_OBJECT_POSITION( g_U1789, 1 );
        PLAY_OBJECT_ANIM( g_U1789, "gate_anim_root04", ref g_U1196, 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( g_U1789, "gate_anim_root04", ref g_U1196, fVar3 );
    }
    if ((DOES_OBJECT_EXIST( g_U1790 )) == 1)
    {
        FREEZE_OBJECT_POSITION( g_U1790, 1 );
        PLAY_OBJECT_ANIM( g_U1790, "gate_anim_root05", ref g_U1196, 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( g_U1790, "gate_anim_root05", ref g_U1196, fVar3 );
    }
    if ((DOES_OBJECT_EXIST( g_U1791 )) == 1)
    {
        FREEZE_OBJECT_POSITION( g_U1791, 1 );
        PLAY_OBJECT_ANIM( g_U1791, "gate_anim_root06", ref g_U1196, 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( g_U1791, "gate_anim_root06", ref g_U1196, fVar3 );
    }
    if ((DOES_OBJECT_EXIST( g_U1792 )) == 1)
    {
        FREEZE_OBJECT_POSITION( g_U1792, 1 );
        PLAY_OBJECT_ANIM( g_U1792, "gate_anim_root07", ref g_U1196, 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( g_U1792, "gate_anim_root07", ref g_U1196, fVar3 );
    }
    if ((DOES_OBJECT_EXIST( g_U1793 )) == 1)
    {
        FREEZE_OBJECT_POSITION( g_U1793, 1 );
        PLAY_OBJECT_ANIM( g_U1793, "gate_anim_root08", ref g_U1196, 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( g_U1793, "gate_anim_root08", ref g_U1196, fVar3 );
    }
    if ((DOES_OBJECT_EXIST( g_U1794 )) == 1)
    {
        FREEZE_OBJECT_POSITION( g_U1794, 1 );
        PLAY_OBJECT_ANIM( g_U1794, "gate_anim_root09", ref g_U1196, 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( g_U1794, "gate_anim_root09", ref g_U1196, fVar3 );
    }
    if ((DOES_OBJECT_EXIST( g_U1795 )) == 1)
    {
        FREEZE_OBJECT_POSITION( g_U1795, 1 );
        PLAY_OBJECT_ANIM( g_U1795, "gate_anim_root10", ref g_U1196, 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( g_U1795, "gate_anim_root10", ref g_U1196, fVar3 );
    }
    return;
}

void sub_8179(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

void sub_8390(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
        sub_7473( uParam0, 1 );
    }
    Result = CREATE_OBJECT_NO_OFFSET( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

void sub_10083()
{
    sub_1767( "[GA] CREATE_BRIDGE_RAYFIRE_INTACT start" );
    sub_8179( g_U1796 );
    sub_8179( g_U1786 );
    sub_8179( g_U1787 );
    sub_8179( g_U1788 );
    sub_8179( g_U1789 );
    sub_8179( g_U1790 );
    sub_8179( g_U1791 );
    sub_8179( g_U1792 );
    sub_8179( g_U1793 );
    sub_8179( g_U1794 );
    sub_8179( g_U1795 );
    sub_8179( g_U1797 );
    sub_8179( g_U1798 );
    sub_8179( g_U1799 );
    g_U1796 = sub_8390( g_U1362, g_U1933, 0, 0, 0, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( g_U1796 ))
    {
        FREEZE_OBJECT_POSITION( g_U1796, 1 );
    }
    sub_1767( "[GA] CREATE_BRIDGE_RAYFIRE_INTACT end" );
    return;
}

void sub_10409()
{
    sub_1767( "[GA] CREATE_BRIDGE_RAYFIRE_DESTROYED start" );
    sub_8179( g_U1796 );
    sub_8179( g_U1786 );
    sub_8179( g_U1787 );
    sub_8179( g_U1788 );
    sub_8179( g_U1789 );
    sub_8179( g_U1790 );
    sub_8179( g_U1791 );
    sub_8179( g_U1792 );
    sub_8179( g_U1793 );
    sub_8179( g_U1794 );
    sub_8179( g_U1795 );
    sub_8179( g_U1797 );
    g_U1797 = sub_8390( g_U1363, 65426, -6, -2, 0, 0, 0, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( g_U1797 ))
    {
        FREEZE_OBJECT_POSITION( g_U1797, 1 );
    }
    sub_10656( ref g_U1417, 1 );
    sub_10656( ref g_U1424, 1 );
    sub_1767( "[GA] CREATE_BRIDGE_RAYFIRE_DESTROYED end" );
    return;
}

void sub_10656(int iParam0, int iParam1)
{
    int iVar4;
    float fVar5;

    if ((sub_10668( iParam0 )) == 0)
    {
        sub_10734( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
    }
    else
    {
        iVar4 = 0;
        fVar5 = 0.00000000;
        GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref iVar4, ref fVar5 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar5 );
    }
    return;
}

int sub_10668(int iParam0)
{
    int iVar3;

    iVar3 = DOES_OBJECT_OF_TYPE_EXIST_AT_COORDS( iParam0->_fU4, 1.00000000, iParam0->_fU0 );
    if (iVar3 == 1)
    {
        return 1;
    }
    return 0;
}

void sub_10734(unknown uParam0)
{
    (uParam0^) = {(uParam0^)};
    return;
}

void sub_10939()
{
    if (DOES_OBJECT_EXIST( g_U1786 ))
    {
        PLAY_OBJECT_ANIM( g_U1786, "gate_anim_root01", ref g_U1196, 0.00000000, 0, 1 );
    }
    if (DOES_OBJECT_EXIST( g_U1787 ))
    {
        PLAY_OBJECT_ANIM( g_U1787, "gate_anim_root02", ref g_U1196, 0.00000000, 0, 1 );
    }
    if (DOES_OBJECT_EXIST( g_U1788 ))
    {
        PLAY_OBJECT_ANIM( g_U1788, "gate_anim_root03", ref g_U1196, 0.00000000, 0, 1 );
    }
    if (DOES_OBJECT_EXIST( g_U1789 ))
    {
        PLAY_OBJECT_ANIM( g_U1789, "gate_anim_root04", ref g_U1196, 0.00000000, 0, 1 );
    }
    if (DOES_OBJECT_EXIST( g_U1790 ))
    {
        PLAY_OBJECT_ANIM( g_U1790, "gate_anim_root05", ref g_U1196, 0.00000000, 0, 1 );
    }
    if (DOES_OBJECT_EXIST( g_U1791 ))
    {
        PLAY_OBJECT_ANIM( g_U1791, "gate_anim_root06", ref g_U1196, 0.00000000, 0, 1 );
    }
    if (DOES_OBJECT_EXIST( g_U1792 ))
    {
        PLAY_OBJECT_ANIM( g_U1792, "gate_anim_root07", ref g_U1196, 0.00000000, 0, 1 );
    }
    if (DOES_OBJECT_EXIST( g_U1793 ))
    {
        PLAY_OBJECT_ANIM( g_U1793, "gate_anim_root08", ref g_U1196, 0.00000000, 0, 1 );
    }
    if (DOES_OBJECT_EXIST( g_U1794 ))
    {
        PLAY_OBJECT_ANIM( g_U1794, "gate_anim_root09", ref g_U1196, 0.00000000, 0, 1 );
    }
    if (DOES_OBJECT_EXIST( g_U1795 ))
    {
        PLAY_OBJECT_ANIM( g_U1795, "gate_anim_root10", ref g_U1196, 0.00000000, 0, 1 );
    }
    START_PARTICLE_FX_NON_LOOPED_AT_COORD( "NYCem_Bridge_Destruct_S", g_U1936, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
    return;
}

void sub_11671(int iParam0, int iParam1, int iParam2, unknown uParam3)
{
    float fVar6;

    if ((sub_10668( iParam0 )) == 0)
    {
        sub_10734( iParam0 );
    }
    fVar6 = 0.00000000;
    if (iParam1 == 1)
    {
        fVar6 = uParam3;
    }
    else
    {
        fVar6 = -uParam3;
    }
    if (iParam2 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, fVar6 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    return;
}

void sub_11977()
{
    if (l_U227)
    {
        l_U227 = 0;
        sub_12026( sub_1385(), -111.47800000, 4.87500000, -2.23998800, 0 );
    }
    if (l_U225)
    {
        l_U225 = 0;
        sub_12099();
    }
    if (l_U226)
    {
        l_U226 = 0;
        sub_13540();
    }
    if (l_U228)
    {
        l_U228 = 0;
        sub_12747( ref l_U173 );
        sub_12747( ref l_U189 );
        sub_12747( ref l_U196 );
        sub_12747( ref l_U203 );
    }
    return;
}

void sub_12026(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

void sub_12099()
{
    int I;

    sub_12109();
    sub_12747( ref l_U173 );
    sub_12747( ref l_U189 );
    sub_12747( ref l_U196 );
    sub_12747( ref l_U203 );
    I = 0;
    for ( I = 0; I < l_U173; I++ )
    {
        sub_7473( l_U173[I]._fU0, 1 );
    }
    I = 0;
    for ( I = 0; I < l_U189; I++ )
    {
        sub_7473( l_U189[I]._fU0, 1 );
    }
    I = 0;
    for ( I = 0; I < l_U196; I++ )
    {
        sub_7473( l_U196[I]._fU0, 1 );
    }
    I = 0;
    for ( I = 0; I < l_U203; I++ )
    {
        sub_7473( l_U203[I]._fU0, 1 );
    }
    I = 0;
    for ( I = 0; I < l_U173; I++ )
    {
        l_U173[I]._fU4 = sub_8390( l_U173[I]._fU0, l_U219, l_U222, 0, 1, 0 );
        if (DOES_OBJECT_EXIST( l_U173[I]._fU4 ))
        {
            FREEZE_OBJECT_POSITION( l_U173[I]._fU4, 1 );
        }
    }
    I = 0;
    for ( I = 0; I < l_U189; I++ )
    {
        l_U189[I]._fU4 = sub_8390( l_U189[I]._fU0, l_U219, l_U222, 0, 1, 0 );
        if (DOES_OBJECT_EXIST( l_U189[I]._fU4 ))
        {
            FREEZE_OBJECT_POSITION( l_U189[I]._fU4, 1 );
        }
    }
    I = 0;
    for ( I = 0; I < l_U196; I++ )
    {
        l_U196[I]._fU4 = sub_8390( l_U196[I]._fU0, l_U219, l_U222, 0, 1, 0 );
        if (DOES_OBJECT_EXIST( l_U196[I]._fU4 ))
        {
            FREEZE_OBJECT_POSITION( l_U196[I]._fU4, 1 );
        }
    }
    I = 0;
    for ( I = 0; I < l_U203; I++ )
    {
        l_U203[I]._fU4 = sub_8390( l_U203[I]._fU0, l_U219, l_U222, 0, 1, 0 );
        if (DOES_OBJECT_EXIST( l_U203[I]._fU4 ))
        {
            FREEZE_OBJECT_POSITION( l_U203[I]._fU4, 1 );
        }
    }
    return;
}

void sub_12109()
{
    l_U173[0]._fU0 = 842458859;
    l_U173[0]._fU8 = "RF_Brdg01_root01";
    l_U173[1]._fU0 = 541803284;
    l_U173[1]._fU8 = "RF_Brdg01_root02";
    l_U173[2]._fU0 = 1334976929;
    l_U173[2]._fU8 = "RF_Brdg01_root03";
    l_U173[3]._fU0 = 1145768723;
    l_U173[3]._fU8 = "RF_Brdg01_root04";
    l_U173[4]._fU0 = 2033480933;
    l_U173[4]._fU8 = "RF_Brdg01_root05";
    l_U189[0]._fU8 = "RF_Brdg02_root01";
    l_U189[0]._fU0 = 1491701600;
    l_U189[1]._fU8 = "RF_Brdg02_root02";
    l_U189[1]._fU0 = -2111839804;
    l_U196[0]._fU8 = "RF_Brdg03_root01";
    l_U196[0]._fU0 = -196946213;
    l_U196[1]._fU8 = "RF_Brdg03_root02";
    l_U196[1]._fU0 = -33494441;
    l_U203[0]._fU8 = "RF_Brdg04_root01";
    l_U203[0]._fU0 = -1569006886;
    l_U203[1]._fU8 = "RF_Brdg04_root02";
    l_U203[1]._fU0 = -1960039363;
    l_U203[2]._fU8 = "RF_Brdg04_root03";
    l_U203[2]._fU0 = 2110656897;
    l_U203[3]._fU8 = "RF_Brdg04_root04";
    l_U203[3]._fU0 = -390633642;
    l_U203[4]._fU8 = "RF_Brdg04_root05";
    l_U203[4]._fU0 = -684276651;
    return;
}

void sub_12747(unknown uParam0)
{
    int I;

    sub_1336( "BSW", "Cleaning a bridge seection", 0 );
    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_8179( (uParam0^)[I]._fU4 );
    }
    return;
}

void sub_13540()
{
    int I;

    I = 0;
    for ( I = 0; I < l_U173; I++ )
    {
        if (DOES_OBJECT_EXIST( l_U173[I]._fU4 ))
        {
            PLAY_OBJECT_ANIM( l_U173[I]._fU4, l_U173[I]._fU8, l_U172, 1000.00000000, 0, 1 );
        }
    }
    I = 0;
    for ( I = 0; I < l_U189; I++ )
    {
        if (DOES_OBJECT_EXIST( l_U189[I]._fU4 ))
        {
            PLAY_OBJECT_ANIM( l_U189[I]._fU4, l_U189[I]._fU8, l_U172, 1000.00000000, 0, 1 );
        }
    }
    I = 0;
    for ( I = 0; I < l_U196; I++ )
    {
        if (DOES_OBJECT_EXIST( l_U196[I]._fU4 ))
        {
            PLAY_OBJECT_ANIM( l_U196[I]._fU4, l_U196[I]._fU8, l_U172, 1000.00000000, 0, 1 );
        }
    }
    I = 0;
    for ( I = 0; I < l_U203; I++ )
    {
        if (DOES_OBJECT_EXIST( l_U203[I]._fU4 ))
        {
            PLAY_OBJECT_ANIM( l_U203[I]._fU4, l_U203[I]._fU8, l_U172, 1000.00000000, 0, 1 );
        }
    }
    START_PARTICLE_FX_NON_LOOPED_AT_COORD( "NYCem_Bridge_Destruct_S", g_U1936, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
    return;
}

void sub_14058()
{
    sub_14068();
    sub_16825();
    sub_20165();
    sub_20971();
    sub_21398();
    sub_22388();
    sub_23347();
    sub_24791();
    sub_26167();
    sub_28467();
    sub_29919();
    sub_30699();
    sub_31481();
    sub_32188();
    return;
}

void sub_14068()
{
    if (l_U325._fU0)
    {
        sub_14094( ref l_U325 );
    }
    if (l_U325._fU4)
    {
        sub_14426();
    }
    if (l_U325._fU8)
    {
        sub_16326();
        sub_16781( ref l_U325 );
    }
    return;
}

void sub_14094(int iParam0)
{
    sub_1336( "RJM", "ISEQUENCE_TELEPORT_PLAYER - teleporting player...", 0 );
    sub_14171( 1000 );
    if (sub_14249())
    {
        FREEZE_PED_POSITION( sub_1385(), 1 );
    }
    sub_12026( sub_1385(), iParam0->_fU12, iParam0->_fU24 );
    if (sub_14249())
    {
        FREEZE_PED_POSITION( sub_1385(), 0 );
    }
    sub_7357( 1000 );
    iParam0->_fU0 = 0;
    return;
}

void sub_14171(unknown uParam0)
{
    if ((IS_SCREEN_FADING_OUT() == 0) AND (IS_SCREEN_FADED_OUT() == 0))
    {
        DO_SCREEN_FADE_OUT( uParam0 );
        while (IS_SCREEN_FADED_OUT() == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

int sub_14249()
{
    if (sub_14264( sub_1385() ))
    {
        return 1;
    }
    return 0;
}

int sub_14264(unknown uParam0)
{
    if ((NOT (IS_PED_DEAD( uParam0 ))) AND (DOES_PED_EXIST( uParam0 )))
    {
        return 1;
    }
    return 0;
}

void sub_14426()
{
    switch (l_U415)
    {
        case 0:
        sub_14502( 1924315369, 1 );
        sub_14722( ref l_U295, l_U411, l_U414, 1265654828, 26, 6, 0, 0, 0 );
        sub_14834( l_U308 );
        l_U308 = sub_14912( ref l_U295 );
        if (sub_14264( l_U308 ))
        {
            ISEQ_REGISTER_ENTITY( 1924315369, "passos", l_U308, 0 );
            ISEQ_START( 1924315369 );
            sub_1336( "RJM", "UPDATE_PASSOS_TWO_STAIR_HILL_VIGS - Going to State 1", 0 );
            l_U415 = 1;
        }
        break;
        case 1:
        if (sub_14264( l_U308 ))
        {
            if (l_U416)
            {
                PED_SET_ACTION_INTENTION( l_U308, 47, 1000, 0, 0, 0 );
                sub_1336( "RJM", "UPDATE_PASSOS_TWO_STAIR_HILL_VIGS - Going to State 2", 0 );
                l_U415 = 2;
            }
        }
        break;
        case 2:
        if (sub_14264( l_U308 ))
        {
            if ((PED_GET_ACTION_INTENTION_STATUS( l_U308, 47 )) == 1)
            {
                l_U416 = 0;
                if (l_U417)
                {
                    sub_12026( l_U308, g_U1319, g_U1322 );
                    PED_SET_ACTION_INTENTION( l_U308, 48, 1000, 0, 0, 0 );
                    sub_1336( "RJM", "UPDATE_PASSOS_TWO_STAIR_HILL_VIGS - Going to State 3", 0 );
                    l_U415 = 3;
                }
            }
        }
        break;
        case 3:
        if (sub_14264( l_U308 ))
        {
            if ((PED_GET_ACTION_INTENTION_STATUS( l_U308, 48 )) == 1)
            {
                l_U417 = 0;
                if (l_U418)
                {
                    sub_12026( l_U308, g_U1323, g_U1326 );
                    PED_SET_ACTION_INTENTION( l_U308, 49, 1000, 0, 0, 0 );
                    sub_1336( "RJM", "UPDATE_PASSOS_TWO_STAIR_HILL_VIGS - Going to State 4", 0 );
                    l_U415 = 4;
                }
            }
        }
        break;
        case 4:
        if (sub_14264( l_U308 ))
        {
            if ((PED_GET_ACTION_INTENTION_STATUS( l_U308, 49 )) == 1)
            {
                l_U418 = 0;
                sub_1336( "RJM", "UPDATE_PASSOS_TWO_STAIR_HILL_VIGS - Going to State 5", 0 );
                l_U415 = 5;
            }
        }
        break;
        case 5: break;
    }
    return;
}

void sub_14502(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to load does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 0)
    {
        ISEQ_REQUEST( uParam0 );
        ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
        if (iParam1 == 1)
        {
            while ((ISEQ_QUERY_STATE( uParam0, 1 )) == 1)
            {
                WAIT( 0 );
            }
        }
    }
    return;
}

void sub_14722(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

void sub_14834(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

void sub_14912(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
        sub_7473( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
    sub_15391( iParam0->_fU40 );
    sub_15471( iParam0->_fU40 );
    return iParam0->_fU40;
}

void sub_15391(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

void sub_15471(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

void sub_16326()
{
    ISEQ_UNREGISTER_ENTITY( 1924315369, "passos" );
    sub_16363( 1924315369, 1 );
    sub_14834( l_U308 );
    sub_16577( g_U1332 );
    l_U416 = 0;
    l_U417 = 0;
    l_U418 = 0;
    l_U419 = 0;
    l_U420 = 0;
    l_U421 = 0;
    l_U422 = 0;
    l_U325._fU4 = 0;
    l_U415 = 0;
    return;
}

void sub_16363(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to terminate does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 1)
    {
        ISEQ_TERMINATE( uParam0 );
    }
    ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
    if (iParam1 == 1)
    {
        while ((ISEQ_IS_LOADED( uParam0 )) == 1)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_16577(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 1)
    {
        SET_MODEL_AS_NO_LONGER_NEEDED( uParam0 );
    }
    else
    {
        sub_1767( "[SP]### ERROR! (UnloadModel) Trying to unload a model that isn't in the img! ###" );
    }
    return;
}

void sub_16781(int iParam0)
{
    iParam0->_fU0 = 0;
    iParam0->_fU4 = 0;
    iParam0->_fU8 = 0;
    return;
}

void sub_16825()
{
    if (l_U311._fU0)
    {
        sub_14094( ref l_U311 );
    }
    if (l_U311._fU4)
    {
        sub_16868();
    }
    if (l_U311._fU8)
    {
        sub_19946();
        sub_16781( ref l_U311 );
    }
    return;
}

void sub_16868()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;

    switch (l_U557)
    {
        case 0:
        sub_7473( g_U1334, 1 );
        sub_14502( 2111514372, 1 );
        sub_14722( ref l_U563[0], -64.72000000, -88.49000000, 8.18000000, -166.33000000, 2046816868, 7, 3, 2, 0, 0 );
        sub_14722( ref l_U563[1], -67.32000000, -90.80000000, 8.06000000, -131.62000000, 2132016071, 7, 3, 2, 0, 0 );
        sub_14722( ref l_U563[2], -67.47000000, -95.29000000, 8.34000000, -131.62000000, 1465169239, 7, 3, 2, 0, 0 );
        sub_14722( ref l_U563[3], -70.49000000, -91.80000000, 7.87000000, -131.62000000, 130636593, 7, 3, 2, 0, 0 );
        sub_17158( ref l_U563, ref l_U558, ref uVar2, -862236369, 1.00000000, ref g_U1212, 0, 0, 25000, 2, 0, 25000, 0 );
        sub_18939( ref l_U558, 1 );
        WAIT( 10 );
        if (sub_14264( l_U558[0] ))
        {
            sub_1336( "bsw", "teleporting and registering guy 0", 0 );
            sub_19120( g_U1303, g_U1306 );
            sub_12026( l_U558[0], g_U1303, g_U1306 );
            ISEQ_REGISTER_ENTITY( 2111514372, "gmed", l_U558[0], 0 );
        }
        if (sub_14264( l_U558[1] ))
        {
            sub_1336( "bsw", "teleporting and registering guy 1", 0 );
            sub_19120( g_U1307, g_U1310 );
            sub_12026( l_U558[1], g_U1307, g_U1310 );
            ISEQ_REGISTER_ENTITY( 2111514372, "gmed1", l_U558[1], 0 );
        }
        if (sub_14264( l_U558[2] ))
        {
            sub_1336( "bsw", "teleporting and registering guy 2", 0 );
            sub_19120( g_U1311, g_U1314 );
            sub_12026( l_U558[2], g_U1311, g_U1314 );
            ISEQ_REGISTER_ENTITY( 2111514372, "gmed2", l_U558[2], 0 );
        }
        if (sub_14264( l_U558[3] ))
        {
            sub_1336( "bsw", "teleporting and registering guy 3", 0 );
            sub_19120( g_U1315, g_U1318 );
            sub_12026( l_U558[3], g_U1315, g_U1318 );
            ISEQ_REGISTER_ENTITY( 2111514372, "gmed3", l_U558[3], 0 );
        }
        if (sub_14249())
        {
            sub_12026( sub_1385(), g_U971[0]._fU0, g_U971[0]._fU12 );
            ISEQ_REGISTER_ENTITY( 2111514372, "max", sub_1385(), 0 );
        }
        ISEQ_START( 2111514372 );
        l_U557 = 1;
        break;
        case 1:
        l_U557 = 2;
        break;
        case 2:
        if ((ISEQ_QUERY_ENTITY_STATE( 2111514372, "gmed", 6 )) || (ISEQ_QUERY_ENTITY_STATE( 2111514372, "max", 6 )))
        {
            sub_1336( "RJM", "UPDATE_VIG01 - Going to State 2", 0 );
            if (l_U616)
            {
                TASK_COMBAT_SNAP_TO_COVER( l_U558[3], "GenCover", "25806C4F_9DBD6CB1_Corner1", 0 );
                TASK_COMBAT_SNAP_TO_COVER( l_U558[1], "GenCover", "25806C4F_E269ABE5_Corner1", 0 );
            }
            l_U557 = 3;
        }
        break;
        case 3: break;
    }
    return;
}

void sub_17158(unknown uParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5, boolean bParam6, unknown uParam7, unknown uParam8, unknown uParam9, int iParam10, unknown uParam11, unknown uParam12)
{
    int I;
    unknown uVar16;

    if ((uParam0^) != (uParam1^))
    {
        SCRIPT_ASSERT( "PED_ARRAY_INITIALIZE - Array sizes don't match!!", 0 );
        return;
    }
    sub_17247( uParam2, uParam4, 0 );
    if (IS_STRING_NULL( uParam12 ))
    {
        uParam12 = l_U57;
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_14834( (uParam1^)[I] );
        (uParam1^)[I] = sub_14912( ref (uParam0^)[I] );
        if (sub_14264( (uParam1^)[I] ))
        {
            SET_PED_AI_TEMPLATE( (uParam1^)[I], uParam5 );
            SET_PED_ALERTNESS( (uParam1^)[I], uParam9 );
            SET_PED_ALLOWED_TO_SURRENDER( (uParam1^)[I], 0 );
            sub_17572( (uParam1^)[I], uParam2 );
            if (iParam3 != -1569615261)
            {
                uVar16 = sub_1461( (uParam1^)[I], iParam3, uParam8, 0, 0 );
            }
            if (iParam10 != 0)
            {
                sub_17895( (uParam1^)[I], iParam10, 0, uParam11, 0 );
            }
            if (bParam6)
            {
                sub_18244( (uParam1^)[I], iParam3 );
            }
            switch (uParam7)
            {
                case 0: break;
                case 1:
                ENABLE_WEAPON_ATTACHMENT( uVar16, 13, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar16, 13, 1 );
                break;
                case 2:
                ENABLE_WEAPON_ATTACHMENT( uVar16, 14, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar16, 14, 1 );
                break;
                case 3:
                ENABLE_WEAPON_ATTACHMENT( uVar16, 12, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar16, 12, 1 );
                break;
            }
        }
    }
    sub_18832( uParam1, uParam12 );
    return;
}

void sub_17247(int iParam0, unknown uParam1, boolean bParam2)
{
    iParam0->_fU4 = uParam1;
    iParam0->_fU0 = CREATE_GROUP( 3, 1 );
    if (bParam2)
    {
        while (NOT (DOES_GROUP_EXIST( iParam0->_fU0 )))
        {
            WAIT( 0 );
        }
    }
    SET_GROUP_RATIO_FIRING_AT_VISIBLE( iParam0->_fU0, iParam0->_fU4 );
    SET_GROUP_RATIO_FIRING_AT_INVISIBLE( iParam0->_fU0, iParam0->_fU4 );
    if (iParam0->_fU8)
    {
        SET_GROUP_FORMATION( iParam0->_fU0, iParam0->_fU12 );
        SET_GROUP_FORMATION_SPACING( iParam0->_fU0, iParam0->_fU16 );
        SET_GROUP_FORMATION_MAX_MOVE_SPEED( iParam0->_fU0, iParam0->_fU20 );
    }
    return;
}

void sub_17572(unknown uParam0, int iParam1)
{
    int iVar4;
    unknown uVar5;

    if ((DOES_GROUP_EXIST( iParam1->_fU0 )) == 0)
    {
        sub_1767( "[SP]### Warning!!! Group does not exist. Creating new group specified attributes. ###" );
        if (iParam1->_fU4 > 0)
        {
            sub_17247( iParam1, iParam1->_fU4, 0 );
        }
        else
        {
            sub_17247( iParam1, 1056964608, 0 );
        }
    }
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        GET_GROUP_SIZE( iParam1->_fU0, ref iVar4, ref uVar5 );
        if (iVar4 == 0)
        {
            SET_PED_AS_GROUP_LEADER( uParam0, iParam1->_fU0 );
        }
        else
        {
            SET_PED_AS_GROUP_MEMBER( uParam0, iParam1->_fU0 );
        }
        SET_PED_NEVER_LEAVES_GROUP( uParam0, 1 );
    }
    return;
}

void sub_17895(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                }
            }
        }
    }
    else
    {
        sub_1767( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

void sub_18244(unknown uParam0, unknown uParam1)
{
    switch (uParam1)
    {
        case -1569615261:
        case 406496141:
        case -862236369:
        case 456708483:
        case -1464892298:
        case 68019059:
        case -612753081:
        case -820634585:
        SET_PED_COMBAT_RANGE_MAX( uParam0, 10.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 1.00000000 );
        break;
        case 434544317:
        case 1845102363:
        case -168327769:
        case -184942895:
        case 514118749:
        case 1964270085:
        case -691403429:
        case 1478009203:
        case -1404433099:
        case 1194438308:
        SET_PED_COMBAT_RANGE( uParam0, 1 );
        SET_PED_COMBAT_RANGE_MAX( uParam0, 20.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 1.00000000 );
        break;
        case -1013714740:
        case -1074756423:
        case 1308526797:
        case 840671040:
        case 57534114:
        case 724901397:
        case 1992962408:
        SET_PED_COMBAT_RANGE( uParam0, 2 );
        SET_PED_COMBAT_RANGE_MAX( uParam0, 30.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 1.00000000 );
        break;
        case 1224272620:
        case 10648147:
        case 377623895:
        case 319712764:
        case -110877124:
        case -1659006841:
        SET_PED_COMBAT_RANGE( uParam0, 3 );
        SET_PED_COMBAT_RANGE_MAX( uParam0, 50.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 5.00000000 );
        break;
    }
    return;
}

void sub_18832(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

void sub_18939(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_18973( ref (uParam0^)[I], uParam1 );
    }
    return;
}

void sub_18973(unknown uParam0, unknown uParam1)
{
    if (sub_14264( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), uParam1 );
    }
    return;
}

void sub_19120(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return;
}

void sub_19946()
{
    ISEQ_UNREGISTER_ENTITY( 2111514372, "max" );
    ISEQ_UNREGISTER_ENTITY( 2111514372, "gmed" );
    ISEQ_UNREGISTER_ENTITY( 2111514372, "gmed1" );
    ISEQ_UNREGISTER_ENTITY( 2111514372, "gmed2" );
    ISEQ_UNREGISTER_ENTITY( 2111514372, "gmed3" );
    sub_16363( 2111514372, 1 );
    sub_20068( ref l_U558 );
    l_U311._fU4 = 0;
    l_U557 = 0;
    return;
}

void sub_20068(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_14834( (uParam0^)[I] );
    }
    return;
}

void sub_20165()
{
    if (l_U318._fU0)
    {
        sub_14094( ref l_U318 );
    }
    if (l_U318._fU4)
    {
        sub_20208();
    }
    if (l_U318._fU8)
    {
        sub_20826();
        sub_16781( ref l_U318 );
    }
    return;
}

void sub_20208()
{
    switch (l_U410)
    {
        case 0:
        sub_7473( g_U1332, 1 );
        sub_14502( 1394393399, 1 );
        sub_14722( ref l_U295, l_U406, l_U409, 1265654828, 26, 6, 0, 0, 0 );
        sub_14834( l_U308 );
        l_U308 = sub_14912( ref l_U295 );
        if (sub_14264( l_U308 ))
        {
            sub_1336( "RJM", "UPDATE_VIG01 - Registering Passos", 0 );
            ISEQ_REGISTER_ENTITY( 1394393399, "cem_vig01_pas", l_U308, 0 );
        }
        if (sub_14249())
        {
            sub_1336( "RJM", "UPDATE_VIG01 - Registering Max", 0 );
            sub_12026( sub_1385(), l_U402, l_U405 );
            ISEQ_REGISTER_ENTITY( 1394393399, "cem_vig01_max", sub_1385(), 0 );
        }
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( -3.52320300, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( 0.10396900, 1065353216, 0 );
        SET_ADRENALINE_AMT( 1.00000000 );
        ACTIVATE_BULLET_TIME( 0, 1065353216, 1 );
        ISEQ_START( 1394393399 );
        sub_1336( "RJM", "UPDATE_VIG01 - Going to State 1", 0 );
        l_U410 = 1;
        break;
        case 1:
        if ((ISEQ_QUERY_ENTITY_STATE( 1394393399, "cem_vig01_pas", 6 )) || (ISEQ_QUERY_ENTITY_STATE( 1394393399, "cem_vig01_max", 6 )))
        {
            DEACTIVATE_BULLET_TIME( 0, 0 );
            sub_1336( "RJM", "UPDATE_VIG01 - Going to State 2", 0 );
            l_U410 = 2;
        }
        break;
        case 2: break;
    }
    return;
}

void sub_20826()
{
    ISEQ_UNREGISTER_ENTITY( 1394393399, "cem_vig01_max" );
    ISEQ_UNREGISTER_ENTITY( 1394393399, "cem_vig01_pas" );
    sub_16363( 1394393399, 1 );
    sub_14834( l_U308 );
    sub_16577( g_U1332 );
    DEACTIVATE_BULLET_TIME( 0, 0 );
    l_U318._fU4 = 0;
    l_U410 = 0;
    return;
}

void sub_20971()
{
    unknown uVar2;

    if (l_U438)
    {
        sub_21024( -105.49470000, 37.14449000, -1.69075200, 327.28910000, -42.37378000, 1.52032300 );
        SET_PED_INVINCIBLE( sub_1385(), 1 );
        l_U438 = 0;
    }
    if (l_U439)
    {
        sub_7473( g_U1337, 1 );
        sub_14722( ref l_U423, -83.54012000, 45.66506000, 2.64469500, 115.36630000, 1849005128, 26, 6, 2, 0, 0 );
        sub_14834( l_U436 );
        l_U436 = sub_14912( ref l_U423 );
        sub_1461( l_U436, -1659006841, 25000, 0, 0 );
        SET_PED_INVINCIBLE( l_U436, 1 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U436, 1 );
        REGISTER_TARGET( l_U436, sub_1385() );
        l_U439 = 0;
    }
    if (l_U437)
    {
        if (NOT (IS_PED_DEAD( sub_1385() )))
        {
            OPEN_SEQUENCE_TASK( ref uVar2 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_SHOOT_AT_PED( 0, sub_1385(), -1, 1566631136, 0, 0, 0 );
            CLOSE_SEQUENCE_TASK( uVar2 );
        }
        if (NOT (IS_PED_DEAD( l_U436 )))
        {
            TASK_PERFORM_SEQUENCE( l_U436, uVar2 );
        }
        CLEAR_SEQUENCE_TASK( uVar2 );
        l_U437 = 0;
    }
    return;
}

void sub_21024(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    unknown uVar8;

    uVar8 = sub_1385();
    sub_12026( uVar8, uParam0, uParam3 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( uParam4, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( uParam5, 1065353216, 0 );
    return;
}

void sub_21398()
{
    if (l_U332._fU0)
    {
        sub_14094( ref l_U332 );
    }
    if (l_U332._fU4)
    {
        sub_21441();
    }
    if (l_U332._fU8)
    {
        sub_22240();
        sub_16781( ref l_U332 );
    }
    return;
}

void sub_21441()
{
    switch (l_U454)
    {
        case 0:
        sub_7473( -1100720042, 1 );
        sub_14502( 1618183678, 1 );
        sub_10656( ref g_U1487, 0 );
        sub_21516( ref g_U1487, 1 );
        sub_14722( ref l_U440, l_U455, l_U458, 919324660, 7, 3, 2, 0, 0 );
        sub_21697( ref l_U440, ref l_U453, -862236369, ref g_U1212, 0, 25000, 2, 0, 25000 );
        sub_18973( ref l_U453, 1 );
        if (sub_14264( l_U453 ))
        {
            ISEQ_REGISTER_ENTITY( 1618183678, "thug", l_U453, 0 );
        }
        if (DOES_OBJECT_EXIST( DOOR_FIND_CLOSEST( g_U1487._fU0, g_U1487._fU4 ) ))
        {
            sub_1336( "RJM", "Registering door with anim.", 0 );
            SET_OBJECT_COLLISION( DOOR_FIND_CLOSEST( g_U1487._fU0, g_U1487._fU4 ), 0 );
            ISEQ_REGISTER_ENTITY( 1618183678, "gate", DOOR_FIND_CLOSEST( g_U1487._fU0, g_U1487._fU4 ), 1 );
        }
        ISEQ_START( 1618183678 );
        sub_1336( "RJM", "UPDATE_VIG09B - Going to State 1", 0 );
        l_U454 = 1;
        break;
        case 1: break;
    }
    return;
}

void sub_21516(int iParam0, int iParam1)
{
    if ((sub_10668( iParam0 )) == 0)
    {
        sub_10734( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    return;
}

void sub_21697(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, int iParam7, unknown uParam8)
{
    unknown uVar11;

    sub_14834( (uParam1^) );
    (uParam1^) = sub_14912( uParam0 );
    if (sub_14264( (uParam1^) ))
    {
        uVar11 = sub_1461( (uParam1^), uParam2, uParam5, 0, 1 );
        if (iParam7 != 0)
        {
            sub_17895( (uParam1^), iParam7, 0, uParam8, 0 );
        }
        SET_PED_AI_TEMPLATE( (uParam1^), uParam3 );
        SET_PED_ALERTNESS( (uParam1^), uParam6 );
        switch (uParam4)
        {
            case 0: break;
            case 1:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 13, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 13, 1 );
            break;
            case 2:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 14, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 14, 1 );
            break;
            case 3:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 12, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 12, 1 );
            break;
        }
    }
    return;
}

void sub_22240()
{
    ISEQ_UNREGISTER_ENTITY( 1618183678, "thug" );
    ISEQ_UNREGISTER_ENTITY( 1618183678, "gate" );
    sub_16363( 1618183678, 1 );
    sub_14834( l_U453 );
    sub_16577( -1100720042 );
    SET_OBJECT_COLLISION( DOOR_FIND_CLOSEST( g_U1487._fU0, g_U1487._fU4 ), 1 );
    l_U332._fU4 = 0;
    l_U454 = 0;
    return;
}

void sub_22388()
{
    if (l_U339._fU0)
    {
        sub_14094( ref l_U339 );
    }
    if (l_U339._fU4)
    {
        sub_22431();
    }
    if (l_U339._fU8)
    {
        sub_23218();
        sub_16781( ref l_U339 );
    }
    return;
}

void sub_22431()
{
    switch (l_U495)
    {
        case 0:
        sub_7473( -1100720042, 1 );
        sub_14502( 534141915, 1 );
        sub_14722( ref l_U459, l_U487, l_U490, -1546371009, 7, 3, 2, 0, 0 );
        sub_14722( ref l_U473, l_U491, l_U494, 1968476214, 7, 3, 2, 0, 0 );
        sub_21697( ref l_U459, ref l_U472, -862236369, ref g_U1212, 0, 25000, 2, 0, 25000 );
        sub_18973( ref l_U472, 1 );
        if (sub_14264( l_U472 ))
        {
            SET_PED_COLLISION( l_U472, 0 );
            ISEQ_REGISTER_ENTITY( 534141915, "gmed", l_U472, 0 );
        }
        sub_21697( ref l_U473, ref l_U486, -862236369, ref g_U1212, 0, 25000, 2, 0, 25000 );
        sub_18973( ref l_U486, 1 );
        if (sub_14264( l_U486 ))
        {
            ISEQ_REGISTER_ENTITY( 534141915, "gmed1", l_U486, 0 );
        }
        ISEQ_START( 534141915 );
        sub_1336( "RJM", "UPDATE_VIG10 - Going to State 1", 0 );
        l_U495 = 1;
        break;
        case 1:
        if (l_U496)
        {
            l_U496 = 0;
            PED_SET_ACTION_INTENTION( l_U472, 47, 1000, 0, 0, 0 );
            PED_SET_ACTION_INTENTION( l_U486, 47, 1000, 0, 0, 0 );
            sub_1336( "RJM", "UPDATE_VIG10 - Going to State 2", 0 );
            l_U495 = 2;
        }
        break;
        case 2:
        if ((PED_GET_ACTION_INTENTION_STATUS( l_U472, 58 )) == 1)
        {
            SET_PED_COLLISION( l_U472, 1 );
            sub_1336( "RJM", "UPDATE_VIG10 - Going to State 3", 0 );
            l_U495 = 3;
        }
        break;
        case 3:
        if ((ISEQ_QUERY_ENTITY_STATE( 534141915, "gmed1", 6 )) AND (ISEQ_QUERY_ENTITY_STATE( 534141915, "gmed", 6 )))
        {
            sub_18973( ref l_U472, 0 );
            sub_18973( ref l_U486, 0 );
            PED_ACTION_TREE_PLAY_NODE( l_U472, ref g_U1281 );
            PED_ACTION_TREE_PLAY_NODE( l_U486, ref g_U1281 );
            sub_1336( "RJM", "UPDATE_VIG10 - Going to State 4", 0 );
            l_U495 = 4;
        }
        break;
        case 4: break;
    }
    return;
}

void sub_23218()
{
    ISEQ_UNREGISTER_ENTITY( 534141915, "gmed" );
    ISEQ_UNREGISTER_ENTITY( 534141915, "gmed1" );
    sub_16363( 534141915, 1 );
    sub_14834( l_U472 );
    sub_14834( l_U486 );
    sub_16577( -1100720042 );
    l_U339._fU4 = 0;
    l_U495 = 0;
    return;
}

void sub_23347()
{
    if (l_U346._fU0)
    {
        sub_14094( ref l_U346 );
    }
    if (l_U346._fU4)
    {
        if (sub_23390())
        {
            l_U346._fU4 = 0;
        }
    }
    if (l_U346._fU8)
    {
        sub_24627();
        sub_16781( ref l_U346 );
    }
    return;
}

void sub_23390()
{
    int Result;

    Result = 0;
    switch (l_U617)
    {
        case 0:
        sub_23443( 1, 0, 0, 1 );
        sub_14502( -1101879058, 1 );
        sub_7473( g_U1332, 1 );
        sub_14722( ref l_U295, l_U509, l_U512, 1265654828, 26, 6, 0, 0, 0 );
        sub_14834( l_U308 );
        l_U308 = sub_14912( ref l_U295 );
        sub_1461( l_U308, -691403429, 25000, 0, 0 );
        sub_23703( ref l_U308 );
        CLEAR_PED_TASKS( l_U308 );
        sub_12026( l_U308, l_U509, l_U512 );
        sub_12026( sub_1385(), l_U346._fU12, l_U346._fU24 );
        ISEQ_REGISTER_ENTITY( -1101879058, "max", sub_1385(), 0 );
        ISEQ_REGISTER_ENTITY( -1101879058, "passos", l_U308, 0 );
        ISEQ_START( -1101879058 );
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( l_U515, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( l_U516, 1065353216, 0 );
        if (l_U517)
        {
            CAMERA_PLAY_ANIMATED( "LEVEL_S_CEM_CP_08", "B_OUT_08_04B_CEM_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
        }
        l_U617 = 1;
        break;
        case 1:
        if ((CAMERA_ANIMATED_CURRENT_TIME() + l_U513) >= (CAMERA_ANIMATED_LENGTH( "LEVEL_S_CEM_CP_08", "B_OUT_08_04B_CEM_CAM" )))
        {
            CAMERA_ANIMATED_STOP( l_U514, 1 );
            sub_24363( 1, 1 );
            sub_24627();
            Result = 1;
            l_U617 = 0;
        }
        break;
        case 2: break;
    }
    return Result;
}

void sub_23443(int iParam0, int iParam1, unknown uParam2, boolean bParam3)
{
    END_POSTFX_BLENDER( 12, 0 );
    if (bParam3)
    {
        STOP_ALL_IMAGEFX( 0 );
    }
    SET_WIDESCREEN_BORDERS( 1, 500 );
    DISPLAY_HUD( 0 );
    if (iParam0 == 1)
    {
        if (NOT (IS_PED_DEAD( sub_1385() )))
        {
            SET_PLAYER_CONTROL( sub_1407(), 0, uParam2 );
            SET_PED_DUCKING( sub_1385(), 0 );
            if (iParam1 == 1)
            {
                CLEAR_PED_TASKS_IMMEDIATELY( sub_1385() );
            }
            SET_PED_INVINCIBLE( sub_1385(), 1 );
        }
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    return;
}

void sub_23703(unknown uParam0)
{
    sub_1336( "SBA", "P_SETUP_PASSOS_GENERAL_ATTRIBUTES", "***" );
    if (sub_14264( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), 1 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^), 1 );
        SET_PED_VALIDATE_BULLET_CAM_HIT( (uParam0^), 0 );
        SET_AI_SHOULD_ALWAYS_MISS_PED( (uParam0^), 1 );
        SET_CAN_AI_KICK_THROUGH_CORPSES( (uParam0^), 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_AI_TEMPLATE( (uParam0^), "AIT_NORMAL" );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( (uParam0^), 1 );
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^), 1 );
        SET_PED_GORE( (uParam0^), 0 );
        SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( (uParam0^), 0 );
        SET_PED_PROOFS( (uParam0^), 0, 1, 1, 1, 1 );
        SET_PED_ALLOWED_TO_SURRENDER( (uParam0^), 0 );
        SET_PED_CAN_AVOID_DEATH_ZONES( (uParam0^), 0 );
        SET_PED_STAND_GROUND_ON_PLAYER_IMPACT( (uParam0^), 1 );
        SET_PED_CAN_PUSH_PLAYER( (uParam0^), 1 );
        SET_PED_RESIST_TO_OBJECT_COLLISION( (uParam0^), 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_CAN_BE_TARGETTED( (uParam0^), 0 );
        SET_PED_CONSUMING_AMMO( (uParam0^), 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^), 1 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^), 1 );
    }
    return;
}

void sub_24363(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD( sub_1385() )))
    {
        SET_PLAYER_CONTROL( sub_1407(), 1, 0 );
        SET_PED_INVINCIBLE( sub_1385(), 0 );
        if (bParam0)
        {
            sub_24444();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

void sub_24444()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_1385() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND( sub_1385(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND( sub_1385(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_1385(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_1385(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

void sub_24627()
{
    ISEQ_UNREGISTER_ENTITY( -1101879058, "max" );
    ISEQ_UNREGISTER_ENTITY( -1101879058, "passos" );
    sub_16363( -1101879058, 1 );
    sub_14834( l_U308 );
    sub_16577( g_U1332 );
    return;
}

void sub_24791()
{
    if (l_U353._fU0)
    {
        sub_14094( ref l_U353 );
    }
    if (l_U353._fU4)
    {
        sub_24834();
    }
    if (l_U353._fU8)
    {
        sub_25992();
        sub_16781( ref l_U353 );
    }
    return;
}

void sub_24834()
{
    int iVar2;

    switch (l_U497)
    {
        case 0:
        sub_14502( 247804313, 1 );
        sub_7473( g_U1332, 1 );
        sub_14722( ref l_U295, l_U498, l_U501, 1265654828, 26, 6, 0, 0, 0 );
        sub_14834( l_U308 );
        l_U308 = sub_14912( ref l_U295 );
        sub_1461( l_U308, -691403429, 25000, 0, 0 );
        sub_23703( ref l_U308 );
        if (sub_14264( l_U308 ))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U308, 1 );
            ISEQ_REGISTER_ENTITY( 247804313, "passos", l_U308, 0 );
            ISEQ_START( 247804313 );
            sub_1336( "SBA", "UPDATE_PASSOS_VIG20 - Setup done: Going to State eCIS_PLAYING", 0 );
            l_U497 = 2;
        }
        break;
        case 2:
        if (((IS_PED_DEAD( l_U308 )) == 0) AND ((DOES_PED_EXIST( l_U308 )) == 1))
        {
            if (HAS_BULLET_IMPACTED_IN_AREA( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( l_U308 ), 4.00000000, ref iVar2 ))
            {
                if (iVar2 == sub_1385())
                {
                    sub_1336( "SBA", "UPDATE_PASSOS_VIG20 - Max Shot near Passos", 0 );
                    PED_SET_ACTION_INTENTION( l_U308, 58, 1500, 0, 0, 0 );
                }
            }
        }
        if (l_U507)
        {
            if (sub_14264( l_U308 ))
            {
                sub_1336( "SBA", "UPDATE_PASSOS_VIG20 - Passos can look", 0 );
                PED_SET_ACTION_INTENTION( l_U308, 56, -1, 0, 0, 0 );
                l_U507 = 0;
            }
        }
        if (l_U508)
        {
            if (sub_14264( l_U308 ))
            {
                sub_1336( "SBA", "UPDATE_PASSOS_VIG20 - Passos cannot look", 0 );
                PED_FINISH_ACTION_INTENTION( l_U308, 56 );
                l_U508 = 0;
            }
        }
        if (l_U506)
        {
            sub_1336( "SBA", "UPDATE_PASSOS_VIG20 - Teleport Passos", 0 );
            sub_12026( l_U308, l_U502, l_U505 );
            l_U506 = 0;
            sub_1336( "SBA", "UPDATE_PASSOS_VIG20 - Going to eCIS_WAITING_TO_PLAY", 0 );
            l_U497 = 1;
        }
        break;
        case 1:
        if (sub_14264( l_U308 ))
        {
            SET_PED_SYNC_POINT( l_U308, l_U502, l_U505 );
            PED_SET_ACTION_INTENTION( l_U308, 47, 1000, 0, 0, 0 );
            sub_1336( "SBA", "UPDATE_PASSOS_VIG20 - Going to eCIS_CHECKS", 0 );
            l_U497 = 3;
        }
        break;
        case 3:
        if (((IS_PED_DEAD( l_U308 )) == 0) AND ((DOES_PED_EXIST( l_U308 )) == 1))
        {
            if (HAS_BULLET_IMPACTED_IN_AREA( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( l_U308 ), 4.00000000, ref iVar2 ))
            {
                if (iVar2 == sub_1385())
                {
                    sub_1336( "SBA", "UPDATE_PASSOS_VIG20 - Max Shot near Passos", 0 );
                    PED_SET_ACTION_INTENTION( l_U308, 58, 1500, 0, 0, 0 );
                }
            }
        }
        break;
    }
    return;
}

void sub_25992()
{
    sub_1336( "SBA", "CLEAN_PASSOS_VIG20", "***" );
    if (sub_14264( l_U308 ))
    {
        PED_FINISH_ACTION_INTENTION( l_U308, 56 );
    }
    ISEQ_UNREGISTER_ENTITY( 247804313, "passos" );
    sub_16363( 247804313, 1 );
    sub_14834( l_U308 );
    sub_16577( g_U1332 );
    l_U353._fU4 = 0;
    l_U506 = 0;
    l_U497 = 0;
    return;
}

void sub_26167()
{
    if (l_U360._fU0)
    {
        sub_14094( ref l_U360 );
    }
    if (l_U360._fU4)
    {
        sub_26210();
    }
    if (l_U360._fU8)
    {
        sub_28327();
        sub_16781( ref l_U360 );
    }
    return;
}

void sub_26210()
{
    int iVar2;

    switch (l_U518)
    {
        case 0:
        sub_14502( 99074045, 1 );
        sub_7473( g_U1332, 1 );
        sub_14722( ref l_U295, l_U519, l_U522, 1265654828, 26, 6, 0, 0, 0 );
        sub_14834( l_U308 );
        l_U308 = sub_14912( ref l_U295 );
        sub_1461( l_U308, -691403429, 25000, 0, 0 );
        sub_23703( ref l_U308 );
        CLEAR_PED_TASKS( l_U308 );
        sub_12026( l_U308, l_U519, l_U522 );
        SET_PED_DEFAULT_AIM_AT_PED( l_U308, sub_1385() );
        sub_1336( "SBA", "UPDATE_PASSOS_VIG20B - Setup done: Going to State eCIS_WAITING_TO_PLAY", 0 );
        l_U518 = 1;
        break;
        case 1:
        if (sub_14264( l_U308 ))
        {
            sub_12026( l_U308, l_U519, l_U522 );
            ISEQ_REGISTER_ENTITY( 99074045, "passos", l_U308, 0 );
            ISEQ_START( 99074045 );
            sub_1336( "SBA", "UPDATE_PASSOS_VIG20B - Setup done: Going to State eCIS_PLAYING", 0 );
            l_U518 = 2;
        }
        break;
        case 2:
        if (((IS_PED_DEAD( l_U308 )) == 0) AND ((DOES_PED_EXIST( l_U308 )) == 1))
        {
            if (HAS_BULLET_IMPACTED_IN_AREA( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( l_U308 ), 4.00000000, ref iVar2 ))
            {
                if (iVar2 == sub_1385())
                {
                    sub_1336( "SBA", "UPDATE_PASSOS_VIG20B - Max Shot near Passos", 0 );
                    PED_SET_ACTION_INTENTION( l_U308, 58, 1500, 0, 0, 0 );
                }
            }
        }
        if (NOT l_U528)
        {
            if (NOT ((PED_GET_ACTION_INTENTION_STATUS( l_U308, 52 )) == 3))
            {
                if ((IS_PLAYER_GUN_RAISED( sub_1407() )) AND (IS_PED_IN_CROSSHAIR_CYLINDER_OFFSET( l_U308, 0.40000000, 1.00000000, 0.00000000, 0.00000000, -0.20000000, 12.00000000, 1 )))
                {
                    sub_1336( "SBA", "UPDATE_PASSOS_VIG20B - Max is aiming at Passos", 0 );
                    sub_26993( l_U308 );
                    PED_SET_ACTION_INTENTION( l_U308, 52, 1000, 0, 0, 0 );
                    l_U528 = 1;
                }
            }
        }
        else if (NOT (IS_PED_IN_CROSSHAIR_CYLINDER_OFFSET( l_U308, 0.40000000, 1.00000000, 0.00000000, 0.00000000, -0.20000000, 12.00000000, 1 )))
        {
            sub_1336( "SBA", "UPDATE_PASSOS_VIG20B - Max is NOT aiming at Passos", 0 );
            l_U528 = 0;
        }
        break;
    }
    return;
}

void sub_26993(unknown uParam0)
{
    if ((NOT (IS_PED_DEAD( uParam0 ))) AND (NOT (IS_PED_DEAD( sub_1385() ))))
    {
        sub_27036( ref l_U37 );
        sub_27118( 1, uParam0, "PASSOS", ref l_U37, 2, 0 );
        sub_27118( 0, sub_1385(), "MAX", ref l_U37, 2, 0 );
        sub_27358( "SCMT_LPPAH", ref l_U37, 8, 1 );
    }
    return;
}

void sub_27036(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

void sub_27118(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

void sub_27358(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return sub_27382( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

void sub_27382(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return sub_27437( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

int sub_27437(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT (sub_27472( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
    sub_27966( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

int sub_27472(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

void sub_27966(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

void sub_28327()
{
    sub_1336( "SBA", "CLEAN_PASSOS_VIG20B", "***" );
    ISEQ_UNREGISTER_ENTITY( 99074045, "passos" );
    sub_16363( 99074045, 1 );
    sub_14834( l_U308 );
    sub_16577( g_U1332 );
    l_U360._fU4 = 0;
    l_U518 = 0;
    return;
}

void sub_28467()
{
    if (l_U367._fU0)
    {
        sub_14094( ref l_U367 );
    }
    if (l_U367._fU4)
    {
        sub_28510();
    }
    if (l_U367._fU8)
    {
        sub_29600();
        sub_16781( ref l_U367 );
    }
    return;
}

void sub_28510()
{
    int iVar2;

    switch (l_U523)
    {
        case 0:
        sub_14502( 557479586, 1 );
        sub_7473( g_U1332, 1 );
        sub_14722( ref l_U295, l_U524, l_U527, 1265654828, 26, 6, 0, 0, 0 );
        sub_14834( l_U308 );
        l_U308 = sub_14912( ref l_U295 );
        sub_1461( l_U308, -691403429, 25000, 0, 0 );
        sub_23703( ref l_U308 );
        CLEAR_PED_TASKS_IMMEDIATELY( l_U308 );
        if ((sub_14249()) AND (NOT (IS_PED_DEAD( l_U308 ))))
        {
            CLEAR_PED_DEFAULT_AIM( l_U308 );
            SET_PED_DEFAULT_AIM_AT_PED( l_U308, sub_1385() );
        }
        sub_1336( "SBA", "UPDATE_PASSOS_VIG20D - Setup done: Going to State eCIS_WAITING_TO_PLAY", 0 );
        l_U523 = 1;
        break;
        case 1:
        if (sub_14264( l_U308 ))
        {
            sub_12026( l_U308, l_U524, l_U527 );
            sub_28869( ref l_U308, g_U1180 );
            ISEQ_REGISTER_ENTITY( 557479586, "passos", l_U308, 0 );
            ISEQ_START( 557479586 );
            sub_1336( "SBA", "UPDATE_PASSOS_VIG20D - Setup done: Going to State eCIS_PLAYING", 0 );
            l_U523 = 2;
        }
        break;
        case 2:
        if ((sub_14249()) AND (sub_14264( l_U308 )))
        {
            if ((l_U309) || (l_U310))
            {
                if (l_U310)
                {
                    SET_PERSISTENT_PED_VARIATION_ENUM( l_U308, -1492315292 );
                }
                else
                {
                    SET_PERSISTENT_PED_VARIATION_ENUM( l_U308, 1265654828 );
                }
                l_U310 = 0;
                l_U309 = 0;
            }
            if (HAS_BULLET_IMPACTED_IN_AREA( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( l_U308 ), 4.00000000, ref iVar2 ))
            {
                if (iVar2 == sub_1385())
                {
                    sub_1336( "SBA", "UPDATE_PASSOS_VIG20D - Max Shot near Passos", 0 );
                    PED_SET_ACTION_INTENTION( l_U308, 58, 1500, 0, 0, 0 );
                }
            }
            if (NOT l_U528)
            {
                if (NOT ((PED_GET_ACTION_INTENTION_STATUS( l_U308, 52 )) == 3))
                {
                    if ((IS_PLAYER_GUN_RAISED( sub_1407() )) AND (IS_PED_IN_CROSSHAIR_CYLINDER_OFFSET( l_U308, 0.40000000, 1.00000000, 0.00000000, 0.00000000, -0.20000000, 12.00000000, 1 )))
                    {
                        sub_1336( "SBA", "UPDATE_PASSOS_VIG20D - Max is aiming at Passos", 0 );
                        PED_SET_ACTION_INTENTION( l_U308, 52, 1000, 0, 0, 0 );
                        l_U528 = 1;
                    }
                }
            }
            else if (NOT (IS_PED_IN_CROSSHAIR_CYLINDER_OFFSET( l_U308, 0.40000000, 1.00000000, 0.00000000, 0.00000000, -0.20000000, 12.00000000, 1 )))
            {
                sub_1336( "SBA", "UPDATE_PASSOS_VIG20D - Max is NOT aiming at Passos", 0 );
                l_U528 = 0;
            }
        }
        break;
    }
    return;
}

void sub_28869(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    if (sub_14264( (uParam0^) ))
    {
        SET_ROOM_FOR_PED_BY_NAME( (uParam0^), ref uParam1 );
    }
    return;
}

void sub_29600()
{
    sub_1336( "SBA", "CLEAN_PASSOS_VIG20D", "***" );
    sub_29654( l_U308 );
    ISEQ_UNREGISTER_ENTITY( 557479586, "passos" );
    sub_16363( 557479586, 1 );
    sub_14834( l_U308 );
    sub_16577( g_U1332 );
    l_U367._fU4 = 0;
    l_U523 = 0;
    return;
}

void sub_29654(unknown uParam0)
{
    if (sub_14264( uParam0 ))
    {
        PED_FINISH_ACTION_INTENTION( uParam0, 47 );
        PED_FINISH_ACTION_INTENTION( uParam0, 48 );
        PED_FINISH_ACTION_INTENTION( uParam0, 49 );
        PED_FINISH_ACTION_INTENTION( uParam0, 50 );
        PED_FINISH_ACTION_INTENTION( uParam0, 51 );
        PED_FINISH_ACTION_INTENTION( uParam0, 52 );
        PED_FINISH_ACTION_INTENTION( uParam0, 53 );
        PED_FINISH_ACTION_INTENTION( uParam0, 54 );
        PED_FINISH_ACTION_INTENTION( uParam0, 55 );
        PED_FINISH_ACTION_INTENTION( uParam0, 56 );
        PED_FINISH_ACTION_INTENTION( uParam0, 57 );
        PED_FINISH_ACTION_INTENTION( uParam0, 58 );
    }
    return;
}

void sub_29919()
{
    if (l_U374._fU0)
    {
        sub_14094( ref l_U374 );
    }
    if (l_U374._fU4)
    {
        sub_29962();
    }
    if (l_U374._fU8)
    {
        sub_30542();
        sub_16781( ref l_U374 );
    }
    return;
}

void sub_29962()
{
    switch (l_U530)
    {
        case 0:
        sub_7473( g_U1332, 1 );
        sub_14502( 1664211565, 1 );
        l_U535 = 0;
        l_U536 = 0;
        sub_14722( ref l_U295, l_U531, l_U534, 1265654828, 26, 6, 0, 0, 0 );
        sub_14834( l_U308 );
        l_U308 = sub_14912( ref l_U295 );
        sub_1461( l_U308, 434544317, 25000, 0, 0 );
        sub_23703( ref l_U308 );
        if (sub_14264( l_U308 ))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U308, 1 );
            ISEQ_REGISTER_ENTITY( 1664211565, "passos", l_U308, 0 );
            ISEQ_START( 1664211565 );
            sub_1336( "SBA", "UPDATE_PASSOS_VIG21 - Setup done: Going to State eCIS_PLAYING", 0 );
            l_U530 = 2;
        }
        break;
        case 2:
        if (l_U535)
        {
            if (sub_14264( l_U308 ))
            {
                PED_SET_ACTION_INTENTION( l_U308, 37, 1000, 0, 0, 0 );
                sub_1336( "SBA", "UPDATE_PASSOS_VIG21: playing Passos' VO line", 0 );
                l_U535 = 0;
                l_U536 = 1;
            }
        }
        if ((l_U537) AND (l_U536))
        {
            if (sub_14264( l_U308 ))
            {
                PED_SET_ACTION_INTENTION( l_U308, 47, 1200, 0, 0, 0 );
                sub_1336( "SBA", "UPDATE_PASSOS_VIG21: Passos walking", 0 );
                l_U537 = 0;
            }
        }
        break;
        case -1: break;
    }
    return;
}

void sub_30542()
{
    sub_1336( "SBA", "CLEAN_PASSOS_VIG21", "***" );
    ISEQ_UNREGISTER_ENTITY( 1664211565, "passos" );
    sub_16363( 1664211565, 1 );
    sub_14834( l_U308 );
    sub_16577( g_U1332 );
    l_U537 = 0;
    l_U374._fU4 = 0;
    l_U530 = 0;
    l_U536 = 0;
    l_U535 = 0;
    return;
}

void sub_30699()
{
    if (l_U381._fU0)
    {
        sub_14094( ref l_U381 );
    }
    if (l_U381._fU4)
    {
        sub_30742();
    }
    if (l_U381._fU8)
    {
        sub_31342();
        sub_16781( ref l_U381 );
    }
    return;
}

void sub_30742()
{
    switch (l_U538)
    {
        case 0:
        sub_7473( g_U1332, 1 );
        sub_14502( 722135588, 1 );
        sub_14722( ref l_U295, l_U539, l_U542, 1265654828, 26, 6, 0, 0, 0 );
        sub_14834( l_U308 );
        l_U308 = sub_14912( ref l_U295 );
        sub_1461( l_U308, 434544317, 25000, 0, 0 );
        sub_23703( ref l_U308 );
        if (sub_14264( l_U308 ))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U308, 1 );
            ISEQ_REGISTER_ENTITY( 722135588, "passos", l_U308, 0 );
            ISEQ_START( 722135588 );
            sub_1336( "SBA", "UPDATE_PASSOS_VIG22 - Setup done: Going to State eCIS_PLAYING", 0 );
            l_U538 = 2;
        }
        break;
        case 2:
        if (sub_14264( l_U308 ))
        {
            if (l_U543)
            {
                if (NOT l_U544)
                {
                    sub_1336( "SBA", "UPDATE_PASSOS_VIG22 - Stop Passos from shooting and peeking", 0 );
                    PED_SET_ACTION_INTENTION( l_U308, 58, -1, 0, 0, 0 );
                    l_U543 = 0;
                }
            }
            else if (l_U544)
            {
                sub_1336( "SBA", "UPDATE_PASSOS_VIG22 - Passos can shoot and peek", 0 );
                PED_FINISH_ACTION_INTENTION( l_U308, 58 );
                l_U543 = 1;
            }
            if (l_U545)
            {
                PED_SET_ACTION_INTENTION( l_U308, 47, 1500, 0, 0, 0 );
                l_U545 = 0;
            }
        }
        break;
    }
    return;
}

void sub_31342()
{
    sub_1336( "SBA", "CLEAN_PASSOS_VIG22", "***" );
    ISEQ_UNREGISTER_ENTITY( 722135588, "passos" );
    sub_16363( 722135588, 1 );
    sub_14834( l_U308 );
    sub_16577( g_U1332 );
    l_U381._fU4 = 0;
    l_U538 = 0;
    return;
}

void sub_31481()
{
    if (l_U388._fU0)
    {
        sub_14094( ref l_U388 );
    }
    if (l_U388._fU4)
    {
        sub_31524();
    }
    if (l_U388._fU8)
    {
        sub_32030();
        sub_16781( ref l_U388 );
    }
    return;
}

void sub_31524()
{
    int I;

    sub_1336( "SBA", "P_RUN_CADAVERS", "***" );
    sub_7473( -1612743506, 1 );
    sub_14502( 529069709, 1 );
    sub_14722( ref l_U618[0], l_U662[0], l_U672[0], 934016064, 7, 3, 2, 0, 0 );
    sub_14722( ref l_U618[1], l_U662[1], l_U672[1], 1861557540, 7, 3, 2, 0, 0 );
    sub_14722( ref l_U618[2], l_U662[2], l_U672[2], -1771592279, 7, 3, 2, 0, 0 );
    for ( I = 0; I <= 2; I++ )
    {
        sub_14834( l_U658[I] );
        l_U658[I] = sub_14912( ref l_U618[I] );
        SET_ROOM_FOR_PED_BY_NAME( l_U658[I], ref g_U1188 );
        FREEZE_PED_POSITION( l_U658[I], 1 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U658[I], 1 );
        SET_PED_CAN_BE_TARGETTED( l_U658[I], 0 );
        SET_PED_AIM_LOCKONABLE( l_U658[I], 0 );
        SET_PED_INVINCIBLE( l_U658[I], 1 );
        SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( l_U658[I], 0 );
        SET_PED_STAND_GROUND_ON_PLAYER_IMPACT( l_U658[I], 1 );
        STOP_PED_SPEAKING( l_U658[I], 1 );
        SET_PED_CAN_BE_MELEED( l_U658[I], 0 );
        ISEQ_REGISTER_ENTITY( 529069709, l_U676[I], l_U658[I], 0 );
    }
    sub_18832( ref l_U658, "Cadaver" );
    ISEQ_START( 529069709 );
    l_U388._fU4 = 0;
    return;
}

void sub_32030()
{
    int I;

    sub_1336( "SBA", "CLEAN_MORGUE_CADAVERS", "***" );
    for ( I = 0; I <= 2; I++ )
    {
        ISEQ_UNREGISTER_ENTITY( 529069709, l_U676[I] );
    }
    sub_16363( 722135588, 1 );
    sub_20068( ref l_U658 );
    sub_16577( -1612743506 );
    l_U388._fU4 = 0;
    return;
}

void sub_32188()
{
    if (l_U395._fU0)
    {
        sub_14094( ref l_U395 );
    }
    if (l_U395._fU4)
    {
        sub_32231();
    }
    if (l_U395._fU8)
    {
        sub_33361();
        sub_16781( ref l_U395 );
    }
    return;
}

void sub_32231()
{
    switch (l_U546)
    {
        case 0:
        sub_14502( 457935336, 1 );
        l_U551 = 0;
        l_U552 = 0;
        l_U553 = 0;
        l_U554 = 0;
        l_U555 = 0;
        l_U556 = 0;
        sub_14722( ref l_U295, l_U547, l_U550, 1265654828, 26, 6, 0, 0, 0 );
        sub_14834( l_U308 );
        l_U308 = sub_14912( ref l_U295 );
        sub_28869( ref l_U308, g_U1188 );
        sub_1461( l_U308, -691403429, 25000, 0, 0 );
        sub_23703( ref l_U308 );
        if (sub_14264( l_U308 ))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U308, 1 );
            ISEQ_REGISTER_ENTITY( 457935336, "passos", l_U308, 0 );
            ISEQ_START( 457935336 );
            PED_SET_ACTION_INTENTION( l_U308, 56, -1, 0, 0, 0 );
            sub_1336( "SBA", "UPDATE_PASSOS_CHAPEL_VIGS - Setup done: Going to State 1", 0 );
            l_U546 = 1;
        }
        break;
        case 1:
        if (l_U551)
        {
            if (sub_14264( l_U308 ))
            {
                PED_FINISH_ACTION_INTENTION( l_U308, 56 );
                sub_1336( "SBA", "UPDATE_PASSOS_CHAPEL_VIGS - VIG24: Going to State 2", 0 );
                l_U546 = 2;
            }
        }
        break;
        case 2:
        if (NOT l_U551)
        {
            if (sub_14264( l_U308 ))
            {
                PED_SET_ACTION_INTENTION( l_U308, 56, -1, 0, 0, 0 );
                sub_1336( "SBA", "UPDATE_PASSOS_CHAPEL_VIGS - VIG23: Returning to State 1", 0 );
                l_U546 = 1;
            }
        }
        else if (l_U552)
        {
            sub_1336( "SBA", "UPDATE_PASSOS_CHAPEL_VIGS - Playing speech 1", 0 );
            PED_SET_ACTION_INTENTION( l_U308, 37, 1500, 0, 0, 0 );
            l_U552 = 0;
        }
        if (l_U553)
        {
            sub_1336( "SBA", "UPDATE_PASSOS_CHAPEL_VIGS - Playing speech 2", 0 );
            PED_SET_ACTION_INTENTION( l_U308, 38, 1500, 0, 0, 0 );
            l_U553 = 0;
        }
        if (l_U554)
        {
            sub_1336( "SBA", "UPDATE_PASSOS_CHAPEL_VIGS - Playing speech 3", 0 );
            PED_SET_ACTION_INTENTION( l_U308, 39, 1500, 0, 0, 0 );
            l_U554 = 0;
        }
        if (l_U555)
        {
            sub_1336( "SBA", "UPDATE_PASSOS_CHAPEL_VIGS - Playing speech 4", 0 );
            PED_SET_ACTION_INTENTION( l_U308, 40, 1500, 0, 0, 0 );
            l_U555 = 0;
        }
        if (l_U556)
        {
            sub_1336( "SBA", "UPDATE_PASSOS_CHAPEL_VIGS - Playing speech 5", 0 );
            PED_SET_ACTION_INTENTION( l_U308, 41, 1500, 0, 0, 0 );
            l_U556 = 0;
        }
        break;
    }
    return;
}

void sub_33361()
{
    sub_1336( "SBA", "CLEAN_PASSOS_CHAPEL_VIGS", "***" );
    ISEQ_UNREGISTER_ENTITY( 457935336, "passos" );
    sub_16363( 457935336, 1 );
    sub_14834( l_U308 );
    sub_16577( g_U1332 );
    l_U551 = 0;
    l_U395._fU4 = 0;
    l_U546 = 0;
    l_U552 = 0;
    l_U553 = 0;
    l_U554 = 0;
    l_U555 = 0;
    l_U556 = 0;
    return;
}

void sub_33550()
{
    if (l_U698 == 0)
    {
        START_WIDGET_GROUP( "OF_lens_debris" );
        ADD_WIDGET_BOOL( "Start OF_lens_debris", ref l_U699 );
        ADD_WIDGET_BOOL( "Kill OF_lens_debris", ref l_U700 );
        ADD_WIDGET_BOOL( "Update Evo", ref l_U701 );
        ADD_WIDGET_FLOAT_SLIDER( "Evo value", ref l_U709, 0, 100, 0.10000000 );
        ADD_WIDGET_FLOAT_SLIDER( "Scale", ref l_U708, 0, 1000, 0.10000000 );
        ADD_WIDGET_FLOAT_SLIDER( "Position x", ref l_U702._fU0, 64536, 1000, 0.10000000 );
        ADD_WIDGET_FLOAT_SLIDER( "Position y", ref l_U702._fU4, 64536, 1000, 0.10000000 );
        ADD_WIDGET_FLOAT_SLIDER( "Position z", ref l_U702._fU8, 64536, 1000, 0.10000000 );
        ADD_WIDGET_FLOAT_SLIDER( "Rotation x", ref l_U705._fU0, 64536, 1000, 0.10000000 );
        ADD_WIDGET_FLOAT_SLIDER( "Rotation y", ref l_U705._fU4, 64536, 1000, 0.10000000 );
        ADD_WIDGET_FLOAT_SLIDER( "Rotation z", ref l_U705._fU8, 64536, 1000, 0.10000000 );
        STOP_WIDGET_GROUP();
        l_U698 = 1;
    }
    if (l_U699)
    {
        sub_1336( "SBA", "Starting OF_lens_debris", "###" );
        STOP_PARTICLE_FX_LOOPED( l_U710 );
        l_U710 = START_PARTICLE_FX_LOOPED_AT_COORD( "CEM_lens_Leaves_S", l_U702, l_U705, l_U708 );
        sub_34129( l_U710 );
        SET_PARTICLE_FX_LOOPED_EVOLUTION( l_U710, "smoke", l_U709 );
        l_U699 = 0;
    }
    if (l_U701)
    {
        sub_1336( "SBA", "Setting evo of CEM_lens_Leaves_S", "###" );
        SET_PARTICLE_FX_LOOPED_EVOLUTION( l_U710, "smoke", l_U709 );
        l_U701 = 0;
    }
    if (l_U700)
    {
        sub_1336( "SBA", "Killing CEM_lens_Leaves_S", "###" );
        STOP_PARTICLE_FX_LOOPED( l_U710 );
        l_U700 = 0;
    }
    return;
}

void sub_34129(unknown uParam0)
{
    return;
}

void sub_34352()
{
    unknown uVar2;

    if (NOT l_U711)
    {
        START_WIDGET_GROUP( "S_CEM_PIANO" );
        ADD_WIDGET_BOOL( "Teleport Player to S_CEM_PIANO", ref l_U712 );
        ADD_WIDGET_BOOL( "Start S_CEM_PIANO", ref l_U713 );
        ADD_WIDGET_BOOL( "Kill S_CEM_PIANO", ref l_U714 );
        sub_2547( ref l_U715, "Camera position", 1036831949 );
        ADD_WIDGET_FLOAT_SLIDER( "Camera rotation", ref l_U718, 65176, 360, 1 );
        STOP_WIDGET_GROUP();
        l_U711 = 1;
    }
    if (l_U712)
    {
        uVar2 = GET_INTERIOR_AT_COORDS( 89.98800000, -110.67600000, 4.99900000 );
        SET_INTERIOR_ACTIVE( uVar2, 1, 0 );
        LOAD_SCENE_FOR_ROOM_BY_KEY( uVar2, GET_HASH_KEY( ref g_U1188 ) );
        sub_12026( sub_1385(), 89.98800000, -110.67600000, 4.99900000, -120.61500000 );
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( 0.00000000, 1065353216, 0 );
        l_U712 = 0;
    }
    if (l_U713)
    {
        sub_16363( 1381054646, 1 );
        sub_23443( 1, 0, 0, 1 );
        sub_14502( 1381054646, 1 );
        ISEQ_REGISTER_ENTITY( 1381054646, "Max", sub_1385(), 0 );
        sub_12026( sub_1385(), 89.98800000, -110.67600000, 4.99900000, -120.61500000 );
        ISEQ_START( 1381054646 );
        sub_34844( ref l_U720, 1, 1 );
        sub_36110( l_U720, 0 );
        sub_36209( 1 );
        CAMERA_PLAY_ANIMATED( "LEVEL_S_CEM_CP_10", "VIG_25_CEM_MAX_PLAY_PIANO_FWD_CAM", 1, l_U715, l_U718, 0, 0 );
        sub_29654( sub_1385() );
        SET_PED_DEFAULT_AIM_AHEAD( sub_1385() );
        l_U719 = 0;
        l_U713 = 0;
    }
    if (((PED_GET_ACTION_INTENTION_STATUS( sub_1385(), 47 )) == 3) AND (NOT l_U719))
    {
        sub_36110( l_U720, 1 );
        PED_FINISH_ACTION_INTENTION( sub_1385(), 47 );
        sub_1336( "BSW", "Starting input gait", 0 );
        SIMULATE_PLAYER_INPUT_GAIT( sub_1407(), 2, 500, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( -1.01848400, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( -6.90496900, 1065353216, 0 );
        CLEAR_PED_DEFAULT_AIM( sub_1385() );
        CAMERA_ANIMATED_STOP( 0, 0 );
        sub_24363( 1, 1 );
        l_U719 = 1;
    }
    if (l_U714)
    {
        sub_16363( 1381054646, 1 );
        l_U714 = 0;
    }
    return;
}

void sub_34844(int iParam0, int iParam1, unknown uParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;

    sub_34856( iParam0 );
    if ((IS_PED_DEAD( sub_1385() )) == 0)
    {
        uVar5 = GET_WEAPON_FROM_HAND( sub_1385(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
        {
            if ((sub_35035( uVar5 )) == 1)
            {
                ref iParam0->_fU0->_fU0 = uVar5;
                ref iParam0->_fU0->_fU4 = GET_WEAPON_TYPE( uVar5 );
            }
            else if ((sub_35263( uVar5 )) == 1)
            {
                ref iParam0->_fU24->_fU0 = uVar5;
                ref iParam0->_fU24->_fU4 = GET_WEAPON_TYPE( uVar5 );
            }
        }
        uVar6 = GET_WEAPON_FROM_HAND( sub_1385(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar6 )) == 1)
        {
            ref iParam0->_fU12->_fU0 = uVar6;
            ref iParam0->_fU12->_fU4 = GET_WEAPON_TYPE( uVar6 );
        }
        uVar7 = GET_WEAPON_FROM_HOLSTER( sub_1385(), 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
        {
            ref iParam0->_fU36->_fU0 = uVar7;
            ref iParam0->_fU36->_fU4 = GET_WEAPON_TYPE( uVar7 );
        }
        uVar8 = GET_WEAPON_FROM_HOLSTER( sub_1385(), 1 );
        if ((GET_DOES_WEAPON_EXIST( uVar8 )) == 1)
        {
            ref iParam0->_fU48->_fU0 = uVar8;
            ref iParam0->_fU48->_fU4 = GET_WEAPON_TYPE( uVar8 );
        }
        uVar9 = GET_WEAPON_FROM_HOLSTER( sub_1385(), 2 );
        if ((GET_DOES_WEAPON_EXIST( uVar9 )) == 1)
        {
            ref iParam0->_fU60->_fU0 = uVar9;
            ref iParam0->_fU60->_fU4 = GET_WEAPON_TYPE( uVar9 );
        }
    }
    if (iParam1 == 0)
    {
        if ((IS_PED_DEAD( sub_1385() )) == 0)
        {
            uVar10 = GET_WEAPON_FROM_HAND( sub_1385(), 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar10 )) == 1)
            {
                SELECT_WEAPON_TO_HAND( sub_1385(), 0, 0, uParam2 );
            }
            uVar11 = GET_WEAPON_FROM_HAND( sub_1385(), 1, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar11 )) == 1)
            {
                SELECT_WEAPON_TO_HAND( sub_1385(), 0, 1, uParam2 );
            }
        }
    }
    else if (iParam1 == 1)
    {
        if ((IS_PED_DEAD( sub_1385() )) == 0)
        {
            uVar12 = GET_WEAPON_FROM_HAND( sub_1385(), 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar12 )) == 1)
            {
                if ((sub_35263( uVar12 )) == 1)
                {
                    SELECT_WEAPON_TO_HAND( sub_1385(), 0, 0, uParam2 );
                }
            }
            uVar13 = GET_WEAPON_FROM_HAND( sub_1385(), 1, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar13 )) == 1)
            {
                SELECT_WEAPON_TO_HAND( sub_1385(), 0, 1, uParam2 );
            }
        }
    }
    return;
}

void sub_34856(int iParam0)
{
    ref iParam0->_fU0->_fU0 = 0;
    ref iParam0->_fU0->_fU4 = 0;
    ref iParam0->_fU12->_fU0 = 0;
    ref iParam0->_fU12->_fU4 = 0;
    ref iParam0->_fU24->_fU0 = 0;
    ref iParam0->_fU24->_fU4 = 0;
    ref iParam0->_fU36->_fU0 = 0;
    ref iParam0->_fU36->_fU4 = 0;
    ref iParam0->_fU48->_fU0 = 0;
    ref iParam0->_fU48->_fU4 = 0;
    ref iParam0->_fU60->_fU0 = 0;
    ref iParam0->_fU60->_fU4 = 0;
    return;
}

int sub_35035(unknown uParam0)
{
    int iVar3;

    if ((GET_DOES_WEAPON_EXIST( uParam0 )) == 1)
    {
        iVar3 = GET_WEAPON_TYPE( uParam0 );
        if ((iVar3 == 1194438308) || ((iVar3 == -76667461) || ((iVar3 == -1404433099) || ((iVar3 == 1131969637) || ((iVar3 == -691403429) || ((iVar3 == 1845102363) || ((iVar3 == 150541352) || ((iVar3 == -820634585) || ((iVar3 == -612753081) || ((iVar3 == 811797242) || ((iVar3 == 68019059) || ((iVar3 == -1464892298) || ((iVar3 == 456708483) || ((iVar3 == -862236369) || (iVar3 == 406496141)))))))))))))))
        {
            return 1;
        }
    }
    return 0;
}

int sub_35263(unknown uParam0)
{
    int iVar3;

    if ((GET_DOES_WEAPON_EXIST( uParam0 )) == 1)
    {
        iVar3 = GET_WEAPON_TYPE( uParam0 );
        if ((iVar3 == -2075384407) || ((iVar3 == 10648147) || ((iVar3 == 1224272620) || ((iVar3 == 1478009203) || ((iVar3 == 1964270085) || ((iVar3 == -110877124) || ((iVar3 == 427207702) || ((iVar3 == 319712764) || ((iVar3 == 514118749) || ((iVar3 == -184942895) || ((iVar3 == -168327769) || ((iVar3 == 434544317) || ((iVar3 == -1659006841) || ((iVar3 == 930042831) || ((iVar3 == 1001413062) || ((iVar3 == 377623895) || ((iVar3 == -1312131151) || ((iVar3 == -1787162676) || ((iVar3 == 724901397) || ((iVar3 == 57534114) || ((iVar3 == 840671040) || ((iVar3 == 1308526797) || ((iVar3 == -1074756423) || ((iVar3 == 1992962408) || (iVar3 == -1013714740)))))))))))))))))))))))))
        {
            return 1;
        }
    }
    return 0;
}

void sub_36110(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18)
{
    unknown uVar21;
    unknown uVar22;

    uVar21 = uParam0._fU24._fU0;
    if ((GET_DOES_WEAPON_EXIST( uVar21 )) == 1)
    {
        SET_WEAPON_VISIBLE( uVar21, uParam18 );
    }
    uVar22 = uParam0._fU60._fU0;
    if ((GET_DOES_WEAPON_EXIST( uVar22 )) == 1)
    {
        SET_WEAPON_VISIBLE( uVar22, uParam18 );
    }
    return;
}

void sub_36209(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_1385() )) == 0)
    {
        iVar3 = 0;
        uVar4 = GET_WEAPON_FROM_HAND( sub_1385(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar4 )) == 0)
        {
            iVar3 = 1;
        }
        if (((sub_35035( uVar4 )) == 0) AND ((GET_DOES_WEAPON_EXIST( uVar4 )) == 1))
        {
            iVar3 = 1;
        }
        if (iVar3 == 1)
        {
            uVar5 = sub_36314();
            if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
            {
                SELECT_WEAPON_TO_HAND( sub_1385(), uVar5, 0, uParam0 );
            }
        }
    }
    return;
}

int sub_36314()
{
    unknown Result;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_1385() )) == 0)
    {
        Result = GET_WEAPON_FROM_HAND( sub_1385(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( Result )) == 1)
        {
            if ((sub_35035( Result )) == 1)
            {
                return Result;
            }
        }
        uVar3 = GET_WEAPON_FROM_HAND( sub_1385(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            return uVar3;
        }
        uVar4 = GET_WEAPON_FROM_HOLSTER( sub_1385(), 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar4 )) == 1)
        {
            return uVar4;
        }
        uVar5 = GET_WEAPON_FROM_HOLSTER( sub_1385(), 1 );
        if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
        {
            return uVar5;
        }
    }
    return 0;
}

void sub_36880()
{
    unknown uVar2;

    if (l_U680 == 1)
    {
        LOAD_SCENE( 67.07246000, -113.32380000, 0.98245400 );
        uVar2 = GET_INTERIOR_AT_COORDS( 67.07246000, -113.32380000, 0.98245400 );
        SET_INTERIOR_ACTIVE( uVar2, 1, 0 );
        LOAD_SCENE_FOR_ROOM_BY_KEY( uVar2, GET_HASH_KEY( ref g_U1188 ) );
        sub_12026( sub_1385(), l_U691, l_U697 );
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( 9.15265900, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( -9.50000000, 1065353216, 0 );
        l_U680 = 0;
    }
    if (l_U685 == 1)
    {
        sub_14502( -2026953275, 1 );
        if (NOT (IS_PED_DEAD( sub_1385() )))
        {
            ISEQ_REGISTER_ENTITY( -2026953275, "MAX", sub_1385(), 0 );
        }
        l_U685 = 0;
    }
    if (l_U687 == 1)
    {
        sub_14502( 1837218119, 1 );
        if (NOT (IS_PED_DEAD( sub_1385() )))
        {
            ISEQ_REGISTER_ENTITY( 1837218119, "MAX", sub_1385(), 0 );
        }
        l_U687 = 0;
    }
    if (l_U686 == 1)
    {
        sub_14502( 544525950, 1 );
        if (NOT (IS_PED_DEAD( sub_1385() )))
        {
            ISEQ_REGISTER_ENTITY( 544525950, "MAX", sub_1385(), 0 );
        }
        l_U686 = 0;
    }
    if (l_U682 == 1)
    {
        ISEQ_START( -2026953275 );
        l_U682 = 0;
    }
    if (l_U684 == 1)
    {
        sub_12026( sub_1385(), l_U694, l_U697 );
        ISEQ_START( 1837218119 );
        l_U684 = 0;
    }
    if (l_U683 == 1)
    {
        ISEQ_START( 544525950 );
        l_U683 = 0;
    }
    if (l_U688 == 1)
    {
        if (NOT (IS_PED_DEAD( sub_1385() )))
        {
            ISEQ_UNREGISTER_ENTITY( -2026953275, "MAX" );
            ISEQ_TERMINATE( -2026953275 );
        }
        l_U688 = 0;
    }
    if (l_U690 == 1)
    {
        if (NOT (IS_PED_DEAD( sub_1385() )))
        {
            ISEQ_UNREGISTER_ENTITY( 1837218119, "MAX" );
            ISEQ_TERMINATE( 1837218119 );
        }
        l_U690 = 0;
    }
    if (l_U689 == 1)
    {
        if (NOT (IS_PED_DEAD( sub_1385() )))
        {
            ISEQ_UNREGISTER_ENTITY( 544525950, "MAX" );
            ISEQ_TERMINATE( 544525950 );
        }
        l_U689 = 0;
    }
    return;
}

