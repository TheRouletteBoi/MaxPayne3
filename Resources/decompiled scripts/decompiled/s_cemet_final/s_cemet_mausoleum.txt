void main()
{
    l_U0 = 0;
    l_U1 = 1;
    l_U2 = 0;
    l_U3 = 1.00000000;
    l_U4 = -5.00000000;
    l_U5 = 0;
    l_U6 = 0;
    l_U7 = 0;
    l_U11 = 42;
    l_U12 = 0;
    l_U13 = 0;
    l_U14 = 0;
    l_U15 = 0;
    l_U16 = 0;
    l_U17 = 90.00000000;
    l_U18 = {0.00000000, 0.00000000, 0.00000000};
    l_U21 = {0.00000000, 0.00000000, 0.00000000};
    l_U24 = 0;
    l_U25 = 0;
    l_U26 = 0;
    l_U27 = 0;
    l_U28 = 0;
    l_U29 = 0;
    l_U30 = nil;
    l_U31 = {0.00000000, 0.00000000, 0.00000000};
    l_U34 = 0;
    l_U35 = 0;
    l_U36 = 0;
    l_U37 = 1;
    l_U38 = 144;
    l_U39 = -1;
    l_U40 = {64536, 64536, 64536};
    l_U43 = "PED_DEF";
    l_U85 = 1.00000000;
    l_U97 = 0;
    l_U138 = 0;
    l_U179 = 0;
    l_U180 = 0;
    l_U181 = 1500;
    l_U191 = 1;
    l_U192 = 0;
    l_U193 = 1;
    l_U194 = 0;
    l_U195 = "MID_05b_CEM_concat";
    l_U196 = "B_OUT_MID_05B_CEM_PISTOL_MAX_CAM";
    l_U197 = "LEVEL_S_CEM_CP_07";
    l_U258 = 0;
    l_U259 = 0;
    l_U260 = 0;
    l_U265 = {74.03244000, -24.25470000, 13.40380000};
    l_U268 = {75.86367000, -24.07293000, 13.40470000};
    l_U271 = {77.11188000, -24.07834000, 13.40467000};
    l_U274 = 0;
    l_U533 = 1500;
    l_U563 = 750;
    l_U564 = {59.64539000, -41.37035000, 11.99505000};
    l_U567 = {93.05108000, -45.73995000, 10.41126000};
    l_U570 = 0;
    l_U571 = 0;
    l_U635 = 6000;
    l_U636 = 6000;
    l_U637 = 750;
    l_U638 = 1000;
    l_U652 = 0;
    l_U653 = 0;
    l_U654 = 0;
    l_U655 = 0;
    l_U656 = 0;
    l_U657 = 0;
    l_U658 = 1;
    l_U659 = 0;
    l_U660 = nil;
    l_U661 = 0;
    l_U866 = 0;
    l_U867 = 0;
    l_U868 = 0;
    l_U869 = 0;
    l_U870 = 4;
    l_U1032 = 500;
    l_U1033 = 800;
    l_U1034 = 0;
    l_U1035 = 0;
    l_U1036 = 0;
    l_U1037 = 0;
    l_U1038 = 0;
    sub_771( "[GA] s_cemet_mausoleum script started." );
    while (NOT IS_EXITFLAG_SET())
    {
        if (g_U1777)
        {
            SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        }
        if (g_U826 == 7)
        {
            sub_838();
        }
        sub_1548();
        sub_15798();
        sub_41678();
        WAIT( 0 );
    }
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    sub_4360();
    sub_42146();
    sub_42423( 7 );
    sub_771( "[GA] s_cemet_mausoleum script ended." );
    RESET_PED_MODEL_LOD_DISTANCES( g_U1346 );
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "s_cemet_mausoleum" );
    SET_EXITFLAG_RESPONSE();
    return;
}

void sub_771(unknown uParam0)
{
    return;
}

void sub_838()
{
    if (l_U193 != l_U191)
    {
        sub_904( "TEH", "playing music:changed CUR FLAG", 0 );
        sub_958( l_U191 );
        sub_958( l_U192 );
        l_U193 = l_U191;
    }
    else if (l_U194 != l_U192)
    {
        sub_904( "TEH", "playing music:changed NEW FLAG", 0 );
        sub_958( l_U191 );
        sub_958( l_U192 );
        l_U194 = l_U192;
    }
    switch (l_U191)
    {
        case 1:
        sub_904( "TEH", "playing music: CEMETERY_SONG_01 CEMETERY_SONG_03_6 ", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "CEMETERY_SONG_03", "CEMETERY_SONG_03_6", "", 0, 8000, 5000, -1082130432, 0 );
        l_U191 = 3;
        break;
        case 2:
        sub_904( "TEH", "playing music: CEMETERY_SONG_03 CEMETERY_SONG_03_6 ", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "CEMETERY_SONG_03", "CEMETERY_SONG_03_6", "", 0, 8000, 5000, -1082130432, 0 );
        l_U191 = 3;
        break;
        case 3:
        if (l_U192 == 3)
        {
            AUDIO_MUSIC_FORCE_TRACK( "CEMETERY_SONG_03", "CEMETERY_SONG_03_2_6", "", 0, 8000, 5000, -1082130432, 0 );
            l_U191 = 4;
        }
        break;
        case 4:
        if (l_U192 == 4)
        {
            AUDIO_MUSIC_SUSPEND( 6000 );
            l_U191 = 5;
        }
        break;
    }
    return;
}

void sub_904(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    return;
}

void sub_958(unknown uParam0)
{
    return;
}

void sub_1548()
{
    if ((l_U866 <= 8) AND (g_U826 == 7))
    {
        if (l_U871 == 0)
        {
            if ((IS_PED_DEAD( sub_1590() )) == 1)
            {
                sub_904( "SBA", "P_HANDLE_CHECKPOINTS: player is dead, setting eFailure = STATE_FAIL_WAITING", "***" );
                l_U871 = 2;
            }
            else if (sub_1776())
            {
                sub_904( "SBA", "HANDLE_CHECKPOINTS - Restart, setting eFailure = STATE_FAIL_WAITING", 0 );
                l_U871 = 2;
            }
            else if ((NOT IS_LAST_MAN_STANDING_ACTIVE()) AND (IS_PED_DEAD( g_U824 )))
            {
                SET_PED_GORE( g_U824, 1 );
                SET_PED_GORE_FROM_PLAYER( g_U824, 1 );
                SET_PED_GORE_FROM_NPC( g_U824, 0 );
                sub_904( "SBA", "P_HANDLE_CHECKPOINTS: Passos killed, setting eFailure = STATE_FAIL_DEATH_CAM_PASSOS", "***" );
                l_U871 = 1;
            };;;
        }
        sub_2477();
    }
    return;
}

int sub_1590()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED( sub_1612() );
    }
    return 0;
}

void sub_1612()
{
    return GET_PLAYER_ID();
}

int sub_1776()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U37 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD( sub_1590() )))
        {
            SET_PED_FORCED_TO_WALK( sub_1590(), 0 );
            SET_PLAYER_FORCED_AIM( sub_1612(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE( sub_1612(), 1 );
            if ((IS_PED_VISIBLE( sub_1590() )) == 0)
            {
                SET_PED_VISIBLE( sub_1590(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

void sub_2477()
{
    switch (l_U871)
    {
        case 0: break;
        case 1:
        if (sub_2560())
        {
            SET_PED_INVINCIBLE( sub_1590(), 1 );
        }
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
        l_U871 = 2;
        sub_904( "CCB", "eFailure - STATE_FAIL_WAITING", 0 );
        break;
        case 2:
        if (sub_2723())
        {
            l_U871 = 3;
        }
        else if ((sub_2763( 0 )) == 1)
        {
            l_U871 = 3;
        }
        break;
        case 3:
        if (NOT (IS_PED_DEAD( sub_1590() )))
        {
            sub_904( "CCB", "Deactivating bullettime...", 0 );
            DO_SCREEN_FADE_OUT( 0 );
            DEACTIVATE_BULLET_TIME( 1, 0 );
            END_POSTFX_BLENDER( 3, 0 );
            l_U871 = 4;
            sub_904( "CCB", "eFailure - STATE_FAIL_CLEANUP", 0 );
        }
        break;
        case 4:
        if (NOT (IS_PLAYER_DEAD( sub_1612() )))
        {
            if (NOT (IS_PED_DEAD( sub_1590() )))
            {
                SET_PLAYER_CONTROL( sub_1612(), 0, 0 );
            }
        }
        DO_SCREEN_FADE_OUT( 0 );
        DESTROY_ALL_CAMS();
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        AUDIO_MUSIC_SUSPEND( 500 );
        sub_904( "CCB", "Destroying Passos...", 0 );
        sub_4360();
        l_U871 = 5;
        sub_904( "CCB", "eFailure - STATE_FAIL_RESTORE", 0 );
        break;
        case 5:
        if (NOT IS_BULLET_CAMERA_TO_GAMEPLAY_ALLOWED())
        {
            ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
        }
        l_U871 = 6;
        sub_904( "CCB", "eFailure - STATE_FAIL_RESTART", 0 );
        break;
        case 6:
        if (GET_NUMBER_OF_STREAMING_REQUESTS() == 0)
        {
            sub_904( "CCB", "eFailure - STATE_FAIL_IDLE", 0 );
            sub_5273( ref l_U830, g_U1178 );
            l_U866 = 3;
            sub_9307( 1 );
            sub_10051();
            sub_14665( 7 );
            sub_15087();
            if (sub_2560())
            {
                SET_PED_INVINCIBLE( sub_1590(), 0 );
                SET_PLAYER_CONTROL( sub_1612(), 1, 0 );
            }
            l_U191 = 2;
            l_U871 = 0;
            sub_904( "CCB", "eCheckpoint - STATE_CHECKPOINT_INIT", 0 );
        }
        else
        {
            sub_904( "CCB", "Waiting for stream requests...", 0 );
        }
        break;
    }
    return;
}

int sub_2560()
{
    if (sub_2575( sub_1590() ))
    {
        return 1;
    }
    return 0;
}

int sub_2575(unknown uParam0)
{
    if ((NOT (IS_PED_DEAD( uParam0 ))) AND (DOES_PED_EXIST( uParam0 )))
    {
        return 1;
    }
    return 0;
}

void sub_2723()
{
    return g_U648;
}

int sub_2763(int iParam0)
{
    iParam0 = 1;
    switch (l_U180)
    {
        case 0:
        if (NOT (sub_2824( ref l_U182 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_1590() )))
            {
                l_U181 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
            sub_2934( ref l_U182, l_U181, 1, 1 );
            sub_3070( ref l_U182 );
        }
        if (sub_3190( ref l_U182 ))
        {
            sub_904( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_1590() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD( sub_1612() )))
            {
                SET_PLAYER_CONTROL( sub_1612(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U180 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U180 = 2;
            }
            else
            {
                l_U180 = 3;
            }
        }
        break;
        case 2:
        sub_904( "NS", "Player will QUIT", 0 );
        sub_3677();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
        sub_904( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        sub_3677();
        return 1;
        break;
    }
    return 0;
}

int sub_2824(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

void sub_2934(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

void sub_3070(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

int sub_3190(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

void sub_3677()
{
    sub_904( "NS", "P_PostFailRetryCleanup", 0 );
    sub_3727( ref l_U182 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD( sub_1612() )))
    {
        SET_PLAYER_CONTROL( sub_1612(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U179 = 0;
    l_U179 = l_U179;
    l_U180 = 0;
    return;
}

void sub_3727(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

void sub_4360()
{
    int I;

    sub_771( "MF]] s_cemet_mausoleum - START: P_CLEANUP_ALL" );
    sub_771( "CLEANING EDISON..." );
    ISEQ_UNREGISTER_ENTITY( 1571095687, "passos" );
    sub_4476( 1571095687, 0 );
    ISEQ_UNREGISTER_ENTITY( -1769846479, "vig_18_snip" );
    sub_4476( -1769846479, 0 );
    ISEQ_UNREGISTER_ENTITY( 856401726, "max" );
    sub_4476( 856401726, 0 );
    sub_771( "Cleaning Sniper..." );
    sub_4772( l_U534 );
    sub_4772( l_U549 );
    sub_4861( l_U436 );
    for ( I = 0; I < 3; I++ )
    {
        sub_4772( l_U300[I] );
    }
    I = 0;
    for ( I = 0; I < 3; I++ )
    {
        sub_4772( l_U350[I] );
    }
    I = 0;
    for ( I = 0; I < 2; I++ )
    {
        sub_4772( l_U400[I] );
    }
    sub_771( "MF]] s_cemet_mausoleum - END: P_CLEANUP_ALL" );
    return;
}

void sub_4476(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to terminate does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 1)
    {
        ISEQ_TERMINATE( uParam0 );
    }
    ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
    if (iParam1 == 1)
    {
        while ((ISEQ_IS_LOADED( uParam0 )) == 1)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_4772(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

void sub_4861(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

void sub_5273(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

    sub_904( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U37)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
    sub_5459( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
        sub_6536( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 = sub_6828( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
        sub_7175( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 = sub_6828( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
        sub_7175( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 = sub_6828( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
        sub_7175( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 = sub_7460( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
        sub_7175( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 = sub_7460( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
        sub_7175( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U37 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if ((sub_7955( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
    sub_8116( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING( sub_1590(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U37)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U37 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
    sub_904( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

void sub_5459(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 = sub_5491( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

int sub_5491(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

void sub_6536(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

void sub_6828(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                }
            }
        }
    }
    else
    {
        sub_771( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

void sub_7175(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

void sub_7460(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                }
            }
        }
    }
    else
    {
        sub_771( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

int sub_7955(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

void sub_8116(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 = sub_5491( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
    sub_8188( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

void sub_8188(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

void sub_9307(unknown uParam0)
{
    sub_771( "[GA] P_LOAD_ASSETS_MAUSOLEUM start" );
    sub_9366( g_U1345, uParam0 );
    sub_9366( g_U1343, uParam0 );
    sub_9366( g_U1365, uParam0 );
    sub_9366( g_U1332, uParam0 );
    sub_9366( g_U1344, uParam0 );
    sub_9586( 1571095687, uParam0 );
    sub_9586( -1769846479, uParam0 );
    sub_9586( 856401726, uParam0 );
    sub_9822( "FACE_PASNYB", 0, uParam0 );
    sub_9937( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act", uParam0 );
    sub_771( "[GA] P_LOAD_ASSETS_MAUSOLEUM end" );
    return;
}

void sub_9366(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
        sub_771( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_9586(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to load does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 0)
    {
        ISEQ_REQUEST( uParam0 );
        ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
        if (iParam1 == 1)
        {
            while ((ISEQ_QUERY_STATE( uParam0, 1 )) == 1)
            {
                WAIT( 0 );
            }
        }
    }
    return;
}

void sub_9822(unknown uParam0, unknown uParam1, int iParam2)
{
    REQUEST_ANIM_DICT( uParam0, uParam1 );
    "[doubled result, dropped if not asigned]";
    if (iParam2 == 1)
    {
        while ((HAS_ANIM_DICT_LOADED( uParam0, uParam1 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_9937(unknown uParam0, int iParam1)
{
    ACTION_TREE_LOAD( uParam0 );
    if (iParam1 == 1)
    {
        while ((IS_ACTION_TREE_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_10051()
{
    sub_10061();
    sub_12479();
    SET_PED_MODEL_LOD_DISTANCES( g_U1346, 25.00000000, 60.00000000 );
    sub_12929();
    return;
}

void sub_10061()
{
    sub_771( "MF]] s_cemet_mausoleum - START: P_SET_STATIC_GAMEPLAY_DATA" );
    sub_10204( ref l_U279, "TRIG_DUMMY_PASSOS", 1000, 1000, 1000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_10204( ref l_U438, "TRIG_SNIP_START_SNIPER", 69.99000000, 23.55000000, 5.29000000, 17.39000000, 2.76000000, 3.00000000, 0.00000000, 0.00000000, 48.50000000, 1 );
    sub_10204( ref l_U788, "TRIG_INSIDE_MAUS", 75.55647000, -30.00000000, 12.00000000, 8.00000000, 8.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_10518( ref l_U437, "TETH_MAUS_REINFORCEMENTS", 75.21795000, -11.50000000, 5.93611000, 45.00000000, 40.00000000, 15.15000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_10607( ref l_U639, g_U779[7]._fU0, g_U779[7]._fU12, 1265654828, 26, 6, 0, 0, 0 );
    sub_10607( ref l_U304[0], 73.74314000, -32.18577000, 14.78373000, 64.00000000, 54173644, 7, 3, 2, 0, 0 );
    sub_10607( ref l_U304[1], 75.62276000, -32.38958000, 14.78373000, 36.00000000, -1239286651, 7, 3, 2, 0, 0 );
    sub_10607( ref l_U304[2], 77.08444000, -31.56110000, 14.78373000, 64.00000000, -1255945465, 7, 3, 2, 0, 0 );
    sub_10607( ref l_U354[0], 73.74314000, -32.18577000, 14.78373000, 64.00000000, -525205231, 7, 3, 2, 0, 0 );
    sub_10607( ref l_U354[1], 75.62276000, -32.38958000, 14.78373000, 64.00000000, 315805814, 7, 3, 2, 0, 0 );
    sub_10607( ref l_U354[2], 77.08444000, -31.56110000, 14.78373000, 64.00000000, -1255945465, 7, 3, 2, 0, 0 );
    sub_10607( ref l_U403[0], 73.74314000, -32.18577000, 14.78373000, 64.00000000, -525205231, 7, 3, 2, 0, 0 );
    sub_10607( ref l_U403[1], 75.62276000, -32.38958000, 14.78373000, 64.00000000, 315805814, 7, 3, 2, 0, 0 );
    sub_10607( ref l_U535, g_U1327, 0.00000000, 1317602165, 7, 3, 2, 0, 0 );
    sub_10204( ref l_U809, "TRIG_STAIRS_TRIGGER_CUT", 75.42070000, -18.50000000, 9.19462500, 4.00000000, 2.00000000, 10.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_10204( ref l_U725, "TRIG_SNIPER_IS_BLIND", 75.49915000, -20.36987000, 9.00000000, 50.00000000, 15.00000000, 20.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_10204( ref l_U767, "TRIG_MAUS_LEFT_POCKET", 93.01730000, -20.36987000, 0.00000000, 45.00000000, 15.00000000, 15.00000000, 0.00000000, 0.00000000, 50.00000000, 1 );
    sub_10204( ref l_U746, "TRIG_MAUS_RIGHT_POCKET", 58.69214000, -20.36987000, 0.00000000, 45.00000000, 15.00000000, 15.00000000, 0.00000000, 0.00000000, -50.00000000, 1 );
    sub_10204( ref l_U662, "TRIG_FIRST_REINF", 75.21795000, -7.00000000, 5.93611000, 45.00000000, 30.00000000, 15.15000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_10204( ref l_U683, "TRIG_SECOND_REINF", 75.21795000, -9.00000000, 5.00000000, 55.00000000, 10.00000000, 15.15000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_10204( ref l_U704, "TRIG_THIRD_REINF", 75.21795000, -14.00000000, 5.00000000, 55.00000000, 10.00000000, 15.15000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_11662( ref l_U550, 0, 0, 0, 0.00000000, 1409225310, 26, 6, 0, 0, 0 );
    l_U459[0] = {75.73000000, -28.07000000, 14.47000000};
    l_U459[1] = {79.15015000, 2.25600900, 7.06740200};
    l_U459[3] = {0.00000000, 0.00000000, 0.00000000};
    l_U472[0] = {91.84882000, -4.64446800, 6.91547200};
    l_U485[0] = 90.00418000;
    l_U490[0] = 67.65453000;
    l_U495[0] = 4.90459400;
    l_U500[0] = "Mauslm";
    l_U505[0] = "Corner_Position33";
    l_U472[1] = {64.60101000, -12.76675000, 8.49071400};
    l_U485[1] = 190.68650000;
    l_U490[1] = -60.21798000;
    l_U495[1] = -0.36842100;
    l_U500[1] = "Mauslm";
    l_U505[1] = "Corner_Position65";
    l_U459[2] = {71.73480000, 2.26085000, 6.21716900};
    l_U472[2] = {80.86501000, 2.35328700, 6.23984100};
    l_U485[2] = 275.00000000;
    l_U490[2] = -90.41844000;
    l_U495[2] = 4.79855500;
    l_U500[2] = "GenCover";
    l_U505[2] = "E7C5870E_D680D911_Corner1";
    l_U472[3] = {70.08930000, 2.31896600, 6.03393800};
    l_U485[3] = 79.04593000;
    l_U490[3] = 65.32457000;
    l_U495[3] = -5.15695700;
    l_U500[3] = "GenCover";
    l_U505[3] = "E7C5870E_563BB90C_Corner2";
    l_U510[0] = {61.68470000, 4.10453400, 6.55972100};
    l_U510[1] = {71.71085000, 2.08841600, 6.22545100};
    l_U510[2] = {74.77747000, 15.77679000, 5.25821400};
    l_U510[3] = {92.24802000, -3.11759000, 6.79447300};
    sub_771( "MF]] s_cemet_mausoleum - END: P_SET_STATIC_GAMEPLAY_DATA" );
    return;
}

void sub_10204(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    StrCopy( ref iParam0->_fU0, uParam1, 64 );
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = {uParam2};
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 1, iParam0 + 0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

void sub_10518(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 2, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

void sub_10607(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

void sub_11662(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU12 = uParam4;
    iParam0->_fU16 = uParam5;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU48 = uParam10;
    return;
}

void sub_12479()
{
    sub_771( "MF]] s_cemet_mausoleum - START: P_INITIALIZE_SCRIPT_DATA" );
    l_U867 = 0;
    l_U868 = 0;
    l_U869 = 0;
    l_U870 = 4;
    l_U274 = 0;
    l_U258 = 0;
    l_U570 = 0;
    l_U571 = 0;
    l_U652 = 0;
    l_U653 = 0;
    l_U654 = 0;
    l_U655 = 0;
    l_U656 = 0;
    l_U657 = 0;
    l_U658 = 0;
    l_U659 = 0;
    l_U661 = 0;
    l_U523 = 0;
    sub_3727( ref l_U572 );
    sub_3727( ref l_U581 );
    sub_3727( ref l_U590 );
    sub_3727( ref l_U599 );
    sub_3727( ref l_U608 );
    sub_3727( ref l_U617 );
    sub_12725( "SCMTAUD" );
    sub_771( "MF]] s_cemet_mausoleum - END: P_INITIALIZE_SCRIPT_DATA" );
    return;
}

void sub_12725(unknown uParam0)
{
    StrCopy( ref g_U157._fU0, uParam0, 16 );
    sub_12745();
    return;
}

void sub_12745()
{
    int I;

    for ( I = 0; I <= 8; I++ )
    {
        g_U157._fU16[I]._fU0 = nil;
        g_U157._fU16[I]._fU4 = 0;
        g_U157._fU92[I] = 0;
    }
    return;
}

void sub_12929()
{
    sub_12939();
    sub_14345();
    l_U436 = sub_14426( g_U1365, 75.54100000, -27.60000000, 20.86700000, 0.00000000, 0.00000000, 0.00000000, 0, 1, 0 );
    return;
}

void sub_12939()
{
    sub_904( "TEH", "s_cemet_mausoleum - START: P_SNIP_SPAWN_SNIPER", "***" );
    sub_4772( l_U534 );
    l_U534 = sub_13029( ref l_U535 );
    if (sub_2575( l_U534 ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U534, 1 );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( l_U534, 1 );
        sub_13727( 0 );
        sub_13850( l_U534, g_U1327, 0.00000000 );
        l_U548 = sub_7460( l_U534, 1224272620, 25000, 0, 1 );
        ENABLE_WEAPON_ATTACHMENT( l_U548, 13, 1 );
        SET_LASER_SIGHT_ATTACHMENT( l_U548, -938171172 );
        TOGGLE_WEAPON_ATTACHMENT( l_U548, 13, 1 );
        SET_PED_CONSUMING_AMMO( l_U534, 0 );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( l_U534, 1 );
        SET_PED_ACCURACY( l_U534, 31186664 );
        sub_14029( ref l_U534, sub_1590() );
    }
    else
    {
        sub_904( "TEH", "s_cemet_mausoleum - P_SNIP_SPAWN_SNIPER Sniper not created correctly", "***" );
        SCRIPT_ASSERT( "s_cemet_mausoleum - P_SNIP_SPAWN_SNIPER Sniper not created correctly", 0 );
    }
    sub_771( "MF]] s_cemet_mausoleum - END: P_SNIP_SPAWN_SNIPER" );
    return;
}

void sub_13029(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
        sub_9366( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
    sub_13508( iParam0->_fU40 );
    sub_13588( iParam0->_fU40 );
    return iParam0->_fU40;
}

void sub_13508(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

void sub_13588(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

void sub_13727(boolean bParam0)
{
    if (NOT (IS_PED_DEAD( l_U534 )))
    {
        SET_PED_GORE( l_U534, bParam0 );
        SET_PED_INVINCIBLE( l_U534, NOT bParam0 );
        SET_PED_AS_ONE_SHOT_KILL( l_U534, bParam0 );
        SET_PED_CAN_BE_TARGETTED( l_U534, bParam0 );
        SET_PED_AIM_LOCKONABLE( l_U534, bParam0 );
    }
    return;
}

void sub_13850(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

void sub_14029(unknown uParam0, unknown uParam1)
{
    if ((NOT (IS_PED_DEAD( (uParam0^) ))) AND (NOT (IS_PED_DEAD( uParam1 ))))
    {
        CLEAR_LOCKED_TARGET( (uParam0^) );
        REGISTER_TARGET( (uParam0^), uParam1 );
        SET_LOCKED_TARGET( (uParam0^), uParam1 );
    }
    return;
}

void sub_14345()
{
    sub_4772( l_U549 );
    l_U549 = sub_13029( ref l_U550 );
    return;
}

void sub_14426(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
        sub_9366( uParam0, 1 );
    }
    Result = CREATE_OBJECT( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

void sub_14665(unknown uParam0)
{
    sub_771( "[SP]### P_SETUP_WEATHER_TIMEOFDAY ###" );
    SET_WEATHER_TYPE_NOW_PERSIST( "SNOW_LIGHT" );
    switch (uParam0)
    {
        case 0:
        case 1:
        case 2:
        case 20:
        case 21:
        FREEZE_TIME_OF_DAY( 18, 0 );
        break;
        case 3:
        case 22:
        FREEZE_TIME_OF_DAY( 19, 0 );
        break;
        case 4:
        case 5:
        case 6:
        case 23:
        case 24:
        case 25:
        FREEZE_TIME_OF_DAY( 20, 0 );
        break;
        case 7:
        case 26:
        FREEZE_TIME_OF_DAY( 21, 0 );
        break;
        case 8:
        case 9:
        case 10:
        case 27:
        case 28:
        case 29:
        FREEZE_TIME_OF_DAY( 22, 0 );
        break;
        default:
        sub_904( "RJM", "Setting Weather/TOD for a checkpoint that doesn't really matter", 0 );
        FREEZE_TIME_OF_DAY( 18, 0 );
        break;
    }
    return;
}

void sub_15087()
{
    sub_904( "TEH", "P_SNIP_SETUP_PASSOS", "***" );
    sub_4772( g_U824 );
    g_U824 = sub_13029( ref l_U639 );
    if (sub_2575( g_U824 ))
    {
        sub_15179( ref g_U824 );
        SET_PED_PROOFS( g_U824, 0, 1, 0, 1, 1 );
        sub_7460( g_U824, -862236369, 25000, 0, 0 );
        SET_PED_DEFAULT_AIM_AT_PED( g_U824, l_U534 );
        PED_FINISH_ACTION_INTENTION( g_U824, 47 );
        PED_FINISH_ACTION_INTENTION( g_U824, 48 );
        PED_FINISH_ACTION_INTENTION( g_U824, 49 );
        PED_FINISH_ACTION_INTENTION( g_U824, 50 );
    }
    return;
}

void sub_15179(unknown uParam0)
{
    sub_904( "SBA", "P_SETUP_PASSOS_GENERAL_ATTRIBUTES", "***" );
    if (sub_2575( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), 1 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^), 1 );
        SET_PED_VALIDATE_BULLET_CAM_HIT( (uParam0^), 0 );
        SET_AI_SHOULD_ALWAYS_MISS_PED( (uParam0^), 1 );
        SET_CAN_AI_KICK_THROUGH_CORPSES( (uParam0^), 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_AI_TEMPLATE( (uParam0^), "AIT_NORMAL" );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( (uParam0^), 1 );
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^), 1 );
        SET_PED_GORE( (uParam0^), 0 );
        SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( (uParam0^), 0 );
        SET_PED_PROOFS( (uParam0^), 0, 1, 1, 1, 1 );
        SET_PED_ALLOWED_TO_SURRENDER( (uParam0^), 0 );
        SET_PED_CAN_AVOID_DEATH_ZONES( (uParam0^), 0 );
        SET_PED_STAND_GROUND_ON_PLAYER_IMPACT( (uParam0^), 1 );
        SET_PED_CAN_PUSH_PLAYER( (uParam0^), 1 );
        SET_PED_RESIST_TO_OBJECT_COLLISION( (uParam0^), 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_CAN_BE_TARGETTED( (uParam0^), 0 );
        SET_PED_CONSUMING_AMMO( (uParam0^), 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^), 1 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^), 1 );
    }
    return;
}

void sub_15798()
{
    int iVar2;

    if (l_U871 == 0)
    {
        switch (l_U866)
        {
            case 0:
            sub_904( "bsw", "P_HANDLE_GAMEPLAY_EVENTS - MAUSOLEUM_REQUEST_ASSETS", 0 );
            if (g_U825 != 7)
            {
                iVar2 = 0;
                sub_15991( l_U195, 0 );
            }
            else
            {
                g_U1231 = 1;
                iVar2 = 1;
            }
            sub_16254( 7 );
            sub_9307( iVar2 );
            l_U866 = 1;
            break;
            case 1:
            if (g_U1231)
            {
                if (g_U825 != 7)
                {
                    sub_904( "bsw", "P_HANDLE_GAMEPLAY_EVENTS -Force Loading assets ", 0 );
                    sub_9307( 1 );
                }
                sub_904( "bsw", "P_HANDLE_GAMEPLAY_EVENTS - MAUSOLEUM_PRELOAD - bStartMausoleumScript triggered", 0 );
                sub_10051();
                sub_16888( 0 );
                if (g_U825 != 7)
                {
                    sub_904( "bsw", "P_HANDLE_GAMEPLAY_EVENTS - preload going to mid_05b", 0 );
                    l_U866 = 2;
                }
                else
                {
                    sub_15087();
                    sub_14665( 7 );
                    sub_904( "bsw", "P_HANDLE_GAMEPLAY_EVENTS - preload going straight to blendout", 0 );
                    if (NOT (IS_PED_DEAD( g_U1178 )))
                    {
                        if (NOT (sub_17165( ref l_U830 )))
                        {
                            sub_7460( g_U1178, sub_17356( 7 ), 200, 0, 1 );
                        }
                    }
                    sub_16888( 1 );
                    l_U866 = 3;
                }
                g_U1991[5] = 1;
            }
            break;
            case 2:
            sub_15991( l_U195, 1 );
            sub_17442( g_U824, l_U534, l_U549 );
            sub_20133( 1, 0, 0 );
            sub_16888( 1 );
            l_U866 = 3;
            case 3:
            sub_904( "bsw", "P_HANDLE_GAMEPLAY_EVENTS - MAUSOLEUM_CHECKPOINT", 0 );
            if ((ISEQ_QUERY_STATE( 1571095687, 3 )) == 0)
            {
                sub_904( "bsw", "P_HANDLE_GAMEPLAY_EVENTS - starting passos via script", 0 );
                sub_9586( 1571095687, 1 );
                ISEQ_REGISTER_ENTITY( 1571095687, "passos", g_U824, 0 );
                ISEQ_START( 1571095687 );
            }
            SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
            g_U826 = 7;
            if (NOT l_U830._fU0)
            {
                sub_21628( ref l_U830, g_U826, sub_1590(), g_U971[7]._fU0, g_U971[7]._fU12, g_U971[7]._fU16, g_U971[7]._fU20, 0 );
            }
            sub_4772( l_U549 );
            sub_21105( g_U1344 );
            sub_9366( g_U1346, 0 );
            l_U866 = 4;
            case 4:
            if (sub_25270())
            {
                sub_904( "bsw", "P_HANDLE_GAMEPLAY_EVENTS - going to start fight", 0 );
                l_U866 = 6;
            }
            break;
            case 6:
            sub_904( "TEH", "Time to do first thing", "---" );
            g_U1767 = 1;
            l_U191 = 1;
            sub_26389( ref g_U1536, 0 );
            sub_26389( ref g_U1543, 0 );
            l_U866 = 7;
            break;
            case 7:
            sub_26611();
            sub_40275();
            if ((l_U870 > 4) AND ((sub_30079( ref l_U300 )) == 2))
            {
                l_U192 = 3;
            }
            if (l_U264 == 0)
            {
                l_U192 = 4;
            }
            if ((l_U264 == 0) AND (NOT (IS_BULLET_CAMERA_RUNNING( 0 ))))
            {
                if (sub_2575( l_U534 ))
                {
                    sub_904( "BSW", "Sniper is still alive, but advancing script", 0 );
                    sub_34510( 1 );
                }
                else
                {
                    DO_SCREEN_FADE_OUT( 400 );
                }
                sub_41139( 0 );
                l_U866 = 8;
            }
            break;
            case 8:
            if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
            {
                l_U866 = 9;
            }
            break;
            case 9:
            g_U1991[7] = 1;
            break;
        }
        sub_41291( ref l_U534, 21.00000000 );
        sub_41497( ref l_U300, -10, 1, 1 );
        sub_41497( ref l_U350, -10, 1, 1 );
        sub_41497( ref l_U400, -10, 1, 1 );
    }
    return;
}

void sub_15991(unknown uParam0, int iParam1)
{
    if (HAS_CUTSCENE_LOADED())
    {
        if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
        {
            SCRIPT_ASSERT( "Another cutscene is already loaded.  You can only load one cutscene into memory.  Your current cutscene will not load into memory.", 0 );
        }
    }
    if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
    {
        PRE_STREAM_SEAMLESS_CUTSCENE( uParam0 );
        if (iParam1 == 1)
        {
            while ((CUTSCENE_IS_LOADED( uParam0 )) == 0)
            {
                WAIT( 0 );
            }
        }
    }
    return;
}

void sub_16254(unknown uParam0)
{
    sub_16270( -862236369, 1 );
    switch (uParam0)
    {
        case 0:
        case 1:
        sub_16270( 434544317, 1 );
        sub_16270( -691403429, 1 );
        break;
        case 2: break;
        case 3:
        sub_16270( -691403429, 1 );
        sub_16270( 930042831, 1 );
        break;
        case 4:
        case 5:
        sub_16270( 434544317, 1 );
        sub_16270( -691403429, 1 );
        break;
        case 6:
        sub_16270( 434544317, 1 );
        sub_16270( -691403429, 1 );
        break;
        case 7:
        sub_16270( 434544317, 1 );
        sub_16270( -691403429, 1 );
        sub_16270( 1224272620, 1 );
        break;
        case 8:
        sub_16270( 434544317, 1 );
        sub_16270( -691403429, 1 );
        break;
        case 9:
        sub_16270( 434544317, 1 );
        sub_16270( -691403429, 1 );
        break;
        case 10:
        sub_16270( 434544317, 1 );
        sub_16270( -184942895, 1 );
        sub_16270( -691403429, 1 );
        break;
    }
    return;
}

void sub_16270(unknown uParam0, boolean bParam1)
{
    REQUEST_WEAPON( uParam0 );
    if (bParam1)
    {
        while ((HAS_WEAPON_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_16888(unknown uParam0)
{
    sub_904( "bsw", "TOGGLE_SNIPER_BLOCKER_VISIBILITY", 0 );
    SET_OBJECT_VISIBLE( l_U436, uParam0 );
    return;
}

int sub_17165(unknown uParam0)
{
    sub_904( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U37 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U38 );
            sub_5273( uParam0, sub_1590() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

int sub_17356(unknown uParam0)
{
    return -862236369;
}

void sub_17442(unknown uParam0, unknown uParam1, unknown uParam2)
{
    sub_904( "RJM", "REGISTER_PEDS_MID_05b_CEM - start", 0 );
    if (sub_2560())
    {
        sub_904( "RJM", "Registering player with mid_05b", 0 );
        sub_17562( ref l_U198, 1, 1 );
        sub_18828( l_U198, 0 );
        sub_18933( l_U198, 0 );
        sub_18991( 1 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( sub_19096(), "W_PI_Clt1911_Aa_H", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( sub_1590(), g_U971[7]._fU0, g_U971[7]._fU12 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( sub_1590(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
        CUTSCENE_REGISTER_SET_PLAYER_IN_COVER( "GenCover", "E7C5870E_47334F5_Corner2", 1, 0 );
        CUTSCENE_SET_COVER_CAMERA_DIRECTION( g_U971[7]._fU16, g_U971[7]._fU20 );
        ISEQ_REGISTER_ENTITY( 856401726, "max", sub_1590(), 0 );
    }
    if (sub_2575( uParam0 ))
    {
        sub_904( "RJM", "Registering piMID_05b_CEMPassos with MID_05b_CEM_concat", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( uParam0, "PASS_NY_H", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( uParam0, g_U779[7]._fU0, g_U779[7]._fU12 );
        ISEQ_REGISTER_ENTITY( 1571095687, "passos", g_U824, 0 );
    }
    if (sub_2575( uParam1 ))
    {
        sub_904( "RJM", "Registering piMID_05b_CEMSniper with MID_05b_CEM_concat", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( uParam1, "G_NY_C_Snip_A", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( uParam1, 0, 0 ), "W_SR_M82_Aa_h", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( uParam1, g_U1327, 0.00000000 );
        ISEQ_REGISTER_ENTITY( -1769846479, "vig_18_snip", uParam1, 0 );
    }
    if (sub_2575( uParam2 ))
    {
        sub_904( "RJM", "Registering piMID_05b_CEMWarden with MID_05b_CEM_concat", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( uParam2, "Fun1_civ_Ward_fat", 0 );
    }
    REGISTER_HIDE_ENTITY_AT_POSITION( g_U1522._fU0, g_U1522._fU4 );
    REGISTER_HIDE_ENTITY_AT_POSITION( g_U1529._fU0, g_U1529._fU4 );
    sub_904( "RJM", "REGISTER_PEDS_MID_05b_CEM - end", 0 );
    return;
}

void sub_17562(int iParam0, int iParam1, unknown uParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;

    sub_17574( iParam0 );
    if ((IS_PED_DEAD( sub_1590() )) == 0)
    {
        uVar5 = GET_WEAPON_FROM_HAND( sub_1590(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
        {
            if ((sub_17753( uVar5 )) == 1)
            {
                ref iParam0->_fU0->_fU0 = uVar5;
                ref iParam0->_fU0->_fU4 = GET_WEAPON_TYPE( uVar5 );
            }
            else if ((sub_17981( uVar5 )) == 1)
            {
                ref iParam0->_fU24->_fU0 = uVar5;
                ref iParam0->_fU24->_fU4 = GET_WEAPON_TYPE( uVar5 );
            }
        }
        uVar6 = GET_WEAPON_FROM_HAND( sub_1590(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar6 )) == 1)
        {
            ref iParam0->_fU12->_fU0 = uVar6;
            ref iParam0->_fU12->_fU4 = GET_WEAPON_TYPE( uVar6 );
        }
        uVar7 = GET_WEAPON_FROM_HOLSTER( sub_1590(), 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
        {
            ref iParam0->_fU36->_fU0 = uVar7;
            ref iParam0->_fU36->_fU4 = GET_WEAPON_TYPE( uVar7 );
        }
        uVar8 = GET_WEAPON_FROM_HOLSTER( sub_1590(), 1 );
        if ((GET_DOES_WEAPON_EXIST( uVar8 )) == 1)
        {
            ref iParam0->_fU48->_fU0 = uVar8;
            ref iParam0->_fU48->_fU4 = GET_WEAPON_TYPE( uVar8 );
        }
        uVar9 = GET_WEAPON_FROM_HOLSTER( sub_1590(), 2 );
        if ((GET_DOES_WEAPON_EXIST( uVar9 )) == 1)
        {
            ref iParam0->_fU60->_fU0 = uVar9;
            ref iParam0->_fU60->_fU4 = GET_WEAPON_TYPE( uVar9 );
        }
    }
    if (iParam1 == 0)
    {
        if ((IS_PED_DEAD( sub_1590() )) == 0)
        {
            uVar10 = GET_WEAPON_FROM_HAND( sub_1590(), 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar10 )) == 1)
            {
                SELECT_WEAPON_TO_HAND( sub_1590(), 0, 0, uParam2 );
            }
            uVar11 = GET_WEAPON_FROM_HAND( sub_1590(), 1, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar11 )) == 1)
            {
                SELECT_WEAPON_TO_HAND( sub_1590(), 0, 1, uParam2 );
            }
        }
    }
    else if (iParam1 == 1)
    {
        if ((IS_PED_DEAD( sub_1590() )) == 0)
        {
            uVar12 = GET_WEAPON_FROM_HAND( sub_1590(), 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar12 )) == 1)
            {
                if ((sub_17981( uVar12 )) == 1)
                {
                    SELECT_WEAPON_TO_HAND( sub_1590(), 0, 0, uParam2 );
                }
            }
            uVar13 = GET_WEAPON_FROM_HAND( sub_1590(), 1, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar13 )) == 1)
            {
                SELECT_WEAPON_TO_HAND( sub_1590(), 0, 1, uParam2 );
            }
        }
    }
    return;
}

void sub_17574(int iParam0)
{
    ref iParam0->_fU0->_fU0 = 0;
    ref iParam0->_fU0->_fU4 = 0;
    ref iParam0->_fU12->_fU0 = 0;
    ref iParam0->_fU12->_fU4 = 0;
    ref iParam0->_fU24->_fU0 = 0;
    ref iParam0->_fU24->_fU4 = 0;
    ref iParam0->_fU36->_fU0 = 0;
    ref iParam0->_fU36->_fU4 = 0;
    ref iParam0->_fU48->_fU0 = 0;
    ref iParam0->_fU48->_fU4 = 0;
    ref iParam0->_fU60->_fU0 = 0;
    ref iParam0->_fU60->_fU4 = 0;
    return;
}

int sub_17753(unknown uParam0)
{
    int iVar3;

    if ((GET_DOES_WEAPON_EXIST( uParam0 )) == 1)
    {
        iVar3 = GET_WEAPON_TYPE( uParam0 );
        if ((iVar3 == 1194438308) || ((iVar3 == -76667461) || ((iVar3 == -1404433099) || ((iVar3 == 1131969637) || ((iVar3 == -691403429) || ((iVar3 == 1845102363) || ((iVar3 == 150541352) || ((iVar3 == -820634585) || ((iVar3 == -612753081) || ((iVar3 == 811797242) || ((iVar3 == 68019059) || ((iVar3 == -1464892298) || ((iVar3 == 456708483) || ((iVar3 == -862236369) || (iVar3 == 406496141)))))))))))))))
        {
            return 1;
        }
    }
    return 0;
}

int sub_17981(unknown uParam0)
{
    int iVar3;

    if ((GET_DOES_WEAPON_EXIST( uParam0 )) == 1)
    {
        iVar3 = GET_WEAPON_TYPE( uParam0 );
        if ((iVar3 == -2075384407) || ((iVar3 == 10648147) || ((iVar3 == 1224272620) || ((iVar3 == 1478009203) || ((iVar3 == 1964270085) || ((iVar3 == -110877124) || ((iVar3 == 427207702) || ((iVar3 == 319712764) || ((iVar3 == 514118749) || ((iVar3 == -184942895) || ((iVar3 == -168327769) || ((iVar3 == 434544317) || ((iVar3 == -1659006841) || ((iVar3 == 930042831) || ((iVar3 == 1001413062) || ((iVar3 == 377623895) || ((iVar3 == -1312131151) || ((iVar3 == -1787162676) || ((iVar3 == 724901397) || ((iVar3 == 57534114) || ((iVar3 == 840671040) || ((iVar3 == 1308526797) || ((iVar3 == -1074756423) || ((iVar3 == 1992962408) || (iVar3 == -1013714740)))))))))))))))))))))))))
        {
            return 1;
        }
    }
    return 0;
}

void sub_18828(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18)
{
    unknown uVar21;
    unknown uVar22;

    uVar21 = uParam0._fU24._fU0;
    if ((GET_DOES_WEAPON_EXIST( uVar21 )) == 1)
    {
        SET_WEAPON_VISIBLE( uVar21, uParam18 );
    }
    uVar22 = uParam0._fU60._fU0;
    if ((GET_DOES_WEAPON_EXIST( uVar22 )) == 1)
    {
        SET_WEAPON_VISIBLE( uVar22, uParam18 );
    }
    return;
}

void sub_18933(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18)
{
    unknown uVar21;

    uVar21 = uParam0._fU12._fU0;
    if ((GET_DOES_WEAPON_EXIST( uVar21 )) == 1)
    {
        SET_WEAPON_VISIBLE( uVar21, uParam18 );
    }
    return;
}

void sub_18991(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_1590() )) == 0)
    {
        iVar3 = 0;
        uVar4 = GET_WEAPON_FROM_HAND( sub_1590(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar4 )) == 0)
        {
            iVar3 = 1;
        }
        if (((sub_17753( uVar4 )) == 0) AND ((GET_DOES_WEAPON_EXIST( uVar4 )) == 1))
        {
            iVar3 = 1;
        }
        if (iVar3 == 1)
        {
            uVar5 = sub_19096();
            if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
            {
                SELECT_WEAPON_TO_HAND( sub_1590(), uVar5, 0, uParam0 );
            }
        }
    }
    return;
}

int sub_19096()
{
    unknown Result;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_1590() )) == 0)
    {
        Result = GET_WEAPON_FROM_HAND( sub_1590(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( Result )) == 1)
        {
            if ((sub_17753( Result )) == 1)
            {
                return Result;
            }
        }
        uVar3 = GET_WEAPON_FROM_HAND( sub_1590(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            return uVar3;
        }
        uVar4 = GET_WEAPON_FROM_HOLSTER( sub_1590(), 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar4 )) == 1)
        {
            return uVar4;
        }
        uVar5 = GET_WEAPON_FROM_HOLSTER( sub_1590(), 1 );
        if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
        {
            return uVar5;
        }
    }
    return 0;
}

int sub_20133(boolean bParam0, int iParam1, unknown uParam2)
{
    int iVar5;

    sub_904( "RJM", "PLAY_CUTSCENE_MID_05b_CEM start", 0 );
    iVar5 = 0;
    if (IS_STRING_NULL( uParam2 ))
    {
        uParam2 = l_U195;
    }
    sub_20217( 1, 0, 0, 1 );
    if (NOT bParam0)
    {
        sub_20384();
        sub_15991( uParam2, 1 );
        sub_20443();
        sub_17442( l_U216, l_U230, l_U244 );
    }
    else
    {
        sub_9586( -1769846479, 1 );
        sub_9586( 856401726, 1 );
        CUTSCENE_REGISTER_ISEQ( 856401726 );
        CUTSCENE_REGISTER_ISEQ( 1571095687 );
        CUTSCENE_REGISTER_ISEQ( -1769846479 );
    }
    CUTSCENE_DISABLE_FADE_IN_GAME_AT_END( 1 );
    if (iParam1 == 1)
    {
        START_CUTSCENE_CAPTURE( uParam2 );
    }
    START_SEAMLESS_CUTSCENE();
    WAIT( 0 );
    if (bParam0)
    {
        sub_904( "bsw", "setting ALLOW_BULLET_CAMERA_TO_GAMEPLAY to TRUE  during mid05b", 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
        sub_14665( 7 );
    }
    while (NOT HAS_CUTSCENE_FINISHED())
    {
        WAIT( 0 );
    }
    sub_18828( l_U198, 1 );
    sub_18933( l_U198, 1 );
    if (bParam0)
    {
        CAMERA_PLAY_ANIMATED( l_U197, l_U196, 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
    }
    STOP_CUTSCENE_CAPTURE();
    if (NOT bParam0)
    {
        sub_21042();
        sub_21090();
    }
    CUTSCENE_DISABLE_FADE_IN_GAME_AT_END( 0 );
    sub_904( "RJM", "PLAY_CUTSCENE_MID_05b_CEM end", 0 );
    return 1;
}

void sub_20217(int iParam0, int iParam1, unknown uParam2, boolean bParam3)
{
    END_POSTFX_BLENDER( 12, 0 );
    if (bParam3)
    {
        STOP_ALL_IMAGEFX( 0 );
    }
    SET_WIDESCREEN_BORDERS( 1, 500 );
    DISPLAY_HUD( 0 );
    if (iParam0 == 1)
    {
        if (NOT (IS_PED_DEAD( sub_1590() )))
        {
            SET_PLAYER_CONTROL( sub_1612(), 0, uParam2 );
            SET_PED_DUCKING( sub_1590(), 0 );
            if (iParam1 == 1)
            {
                CLEAR_PED_TASKS_IMMEDIATELY( sub_1590() );
            }
            SET_PED_INVINCIBLE( sub_1590(), 1 );
        }
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    return;
}

void sub_20384()
{
    sub_9366( g_U1332, 1 );
    sub_9366( g_U1344, 1 );
    sub_9366( g_U1343, 1 );
    return;
}

void sub_20443()
{
    sub_904( "RJM", "CREATE_MID_05b_CEM_PEDS_AND_OBJECTS - start", 0 );
    sub_10607( ref l_U217, 0, 0, 0, 0.00000000, 1265654828, 26, 6, 0, 0, 0 );
    l_U216 = sub_13029( ref l_U217 );
    sub_10607( ref l_U231, 0, 0, 0, 0.00000000, -1127141388, 26, 6, 0, 0, 0 );
    sub_11662( ref l_U245, 0, 0, 0, 0.00000000, 1409225310, 26, 6, 0, 0, 0 );
    l_U230 = sub_13029( ref l_U231 );
    l_U244 = sub_13029( ref l_U245 );
    sub_904( "RJM", "CREATE_MID_05b_CEM_PEDS_AND_OBJECTS - end", 0 );
    return;
}

void sub_21042()
{
    sub_4772( l_U216 );
    sub_4772( l_U230 );
    sub_4772( l_U244 );
    return;
}

void sub_21090()
{
    sub_21105( g_U1332 );
    sub_21105( g_U1344 );
    sub_21105( g_U1343 );
    return;
}

void sub_21105(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 1)
    {
        SET_MODEL_AS_NO_LONGER_NEEDED( uParam0 );
    }
    else
    {
        sub_771( "[SP]### ERROR! (UnloadModel) Trying to unload a model that isn't in the img! ###" );
    }
    return;
}

void sub_21628(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

    sub_904( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
        sub_904( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
        sub_8116( iParam1 );
        sub_21887( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
            sub_22338( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
            sub_22338( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_22570( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
            sub_22338( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_22570( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_22570( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
            sub_22338( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_22570( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_22570( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_22570( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
            sub_22338( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_22570( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_22570( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_22570( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if (sub_22570( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
            sub_24128( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U38, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
    sub_904( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

void sub_21887(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 = sub_5491( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
        sub_904( "TEH", "Ending context", 0 );
        sub_904( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

void sub_22338(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

void sub_22570(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

void sub_24128(int iParam0)
{
    sub_771( "CHECKPOINT DATA" );
    sub_24167( iParam0->_fU4 );
    sub_24190( iParam0->_fU16 );
    sub_24190( iParam0->_fU20 );
    sub_24190( iParam0->_fU24 );
    sub_958( iParam0->_fU28 );
    sub_958( iParam0->_fU56 );
    sub_958( iParam0->_fU60 );
    sub_958( iParam0->_fU64 );
    sub_958( iParam0->_fU68 );
    sub_958( iParam0->_fU72 );
    sub_958( iParam0->_fU76 );
    sub_958( iParam0->_fU80 );
    sub_958( iParam0->_fU84 );
    sub_958( iParam0->_fU88 );
    sub_958( iParam0->_fU92 );
    sub_24190( iParam0->_fU32 );
    sub_958( iParam0->_fU36 );
    sub_958( iParam0->_fU40 );
    sub_958( iParam0->_fU44 );
    sub_24190( iParam0->_fU136 );
    sub_24425( iParam0->_fU140 );
    sub_958( iParam0->_fU52 );
    sub_771( "---nRightHolsterAttachmentEnabled: " );
    sub_958( iParam0->_fU96 );
    sub_771( "---nRightHolsterAttachmentToggled: " );
    sub_958( iParam0->_fU100 );
    sub_771( "---nLeftHolsterAttachmentEnabled: " );
    sub_958( iParam0->_fU104 );
    sub_771( "---nLeftHolsterAttachmentToggled: " );
    sub_958( iParam0->_fU108 );
    sub_771( "---nRifleHolsterAttachmentEnabled: " );
    sub_958( iParam0->_fU112 );
    sub_771( "---nRifleHolsterAttachmentToggled: " );
    sub_958( iParam0->_fU116 );
    sub_771( "---nRightHandAttachmentEnabled: " );
    sub_958( iParam0->_fU120 );
    sub_771( "---nRightHandAttachmentToggled: " );
    sub_958( iParam0->_fU124 );
    sub_771( "---nLeftHandAttachmentEnabled: " );
    sub_958( iParam0->_fU128 );
    sub_771( "---nLeftHandAttachmentToggled: " );
    sub_958( iParam0->_fU132 );
    sub_958( l_U38 );
    sub_958( 144 );
    return;
}

void sub_24167(unknown uParam0, unknown uParam1, unknown uParam2)
{
    return;
}

void sub_24190(unknown uParam0)
{
    return;
}

void sub_24425(boolean bParam0)
{
    if (bParam0)
    {
        ;
    }
    return;
}

void sub_25270()
{
    int Result;

    Result = 0;
    switch (l_U867)
    {
        case 0:
        sub_20217( 1, 0, 0, 1 );
        sub_904( "bsw", "HANDLE_MID_05B_BLENDOUT - BLENDOUT_START", 0 );
        if ((ISEQ_QUERY_STATE( 856401726, 3 )) == 0)
        {
            CAMERA_PLAY_ANIMATED( l_U197, l_U196, 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
            sub_904( "bsw", "starting HANDLE_MID_05B_BLENDOUT WITHOUT the cutscene", 0 );
            sub_9586( 856401726, 1 );
            sub_13850( sub_1590(), g_U971[7]._fU0, g_U971[7]._fU12 );
            ISEQ_REGISTER_ENTITY( 856401726, "max", sub_1590(), 0 );
            ISEQ_START( 856401726 );
            SNAP_PLAYER_TO_COVERPOINT( sub_1612(), "GenCover", "E7C5870E_47334F5_Corner2", 0 );
            SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U971[7]._fU16, 1065353216, 0 );
            SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U971[7]._fU20, 1065353216, 0 );
        }
        if ((ISEQ_QUERY_STATE( -1769846479, 3 )) == 0)
        {
            sub_13850( l_U534, g_U1327, 0.00000000 );
            ISEQ_REGISTER_ENTITY( -1769846479, "vig_18_snip", l_U534, 0 );
            ISEQ_START( -1769846479 );
        }
        DO_SCREEN_FADE_IN( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
        l_U867 = 1;
        break;
        case 1:
        if (CAMERA_ANIMATED_CURRENT_TIME() >= ((CAMERA_ANIMATED_LENGTH( l_U197, l_U196 )) - 750))
        {
            SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U971[7]._fU16, 1065353216, 0 );
            SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U971[7]._fU20, 1065353216, 0 );
            CAMERA_FREEZE_FRAME( 1, 750, 0, 0 );
            sub_904( "bsw", "HANDLE_MID_05B_BLENDOUT - blendout cam finished", 0 );
            l_U867 = 2;
        }
        break;
        case 2:
        Result = 1;
        sub_25973( 1, 1 );
        break;
    }
    return Result;
}

void sub_25973(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD( sub_1590() )))
    {
        SET_PLAYER_CONTROL( sub_1612(), 1, 0 );
        SET_PED_INVINCIBLE( sub_1590(), 0 );
        if (bParam0)
        {
            sub_26054();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

void sub_26054()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_1590() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND( sub_1590(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND( sub_1590(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_1590(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_1590(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

void sub_26389(int iParam0, int iParam1)
{
    int iVar4;
    float fVar5;

    if ((sub_26401( iParam0 )) == 0)
    {
        sub_26467( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
    }
    else
    {
        iVar4 = 0;
        fVar5 = 0.00000000;
        GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref iVar4, ref fVar5 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar5 );
    }
    return;
}

int sub_26401(int iParam0)
{
    int iVar3;

    iVar3 = DOES_OBJECT_OF_TYPE_EXIST_AT_COORDS( iParam0->_fU4, 1.00000000, iParam0->_fU0 );
    if (iVar3 == 1)
    {
        return 1;
    }
    return 0;
}

void sub_26467(unknown uParam0)
{
    (uParam0^) = {(uParam0^)};
    return;
}

void sub_26611()
{
    if (l_U260)
    {
        l_U869 = 3;
    }
    sub_26637();
    if (sub_26911( ref l_U662, 0 ))
    {
        sub_904( "BSW", "MAUS_SNIPER_HANDLER - spawning reinforcements A", "---" );
        sub_27124();
        sub_28187();
        l_U274 = 0;
        sub_28716( "SCMT_PSTFG", ref l_U962 );
        if (l_U870 < 6)
        {
            l_U870 = 6;
        }
    }
    if (sub_26911( ref l_U683, 0 ))
    {
        sub_904( "BSW", "MAUS_SNIPER_HANDLER - spawning reinforcements B", "---" );
        sub_29995();
        sub_30597();
        sub_28716( "SCMT_PSMFG", ref l_U972 );
        l_U274 = 0;
    }
    if (sub_26911( ref l_U704, 0 ))
    {
        sub_904( "BSW", "MAUS_SNIPER_HANDLER - spawning reinforcements C", "---" );
        sub_31320();
        sub_31857();
    }
    if (sub_3190( ref l_U626 ))
    {
        sub_32304();
    }
    if (sub_32835( l_U788 ))
    {
        sub_904( "BSW", "Uh oh hit safety trigger at Maus door", 0 );
        sub_28716( "SCMT_PSNUTS", ref l_U982 );
        sub_26389( ref g_U1536, 1 );
        sub_26389( ref g_U1543, 1 );
        sub_32966();
    }
    switch (l_U869)
    {
        case 0:
        sub_904( "TEH", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_STARTUP", "---" );
        sub_33658( "SCMT_MPCVA", ref l_U892 );
        sub_2934( ref l_U524, l_U533, 1, 0 );
        sub_3070( ref l_U524 );
        l_U869 = 1;
        break;
        case 1:
        if (NOT (sub_33852( l_U892 )))
        {
            sub_904( "SBA", "MAUS_SNIPER_HANDLER - opening dialog over", "---" );
            sub_2934( ref l_U617, 750, 1, 0 );
            sub_3070( ref l_U617 );
            l_U869 = 4;
        }
        break;
        case 4:
        if ((sub_34118()) AND (sub_3190( ref l_U617 )))
        {
            sub_34213();
            sub_34510( 1 );
        }
        if (NOT sub_34729())
        {
            if (NOT l_U570)
            {
                sub_2934( ref l_U590, sub_34832(), 1, 0 );
                sub_3070( ref l_U590 );
                sub_904( "TEH", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_FIRST_COVER - Max is not safe, going to MAUS_SNIPER_AIMING", "---" );
                l_U869 = 2;
            }
            else
            {
                sub_2934( ref l_U572, l_U635, 1, 0 );
                sub_3070( ref l_U572 );
                sub_904( "TEH", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_FIRST_COVER - Passos is covering, going to MAUS_SNIPER_FIRST_RUN", "---" );
                l_U870 = 5;
                l_U869 = 5;
            }
        }
        else if (sub_35458())
        {
            sub_904( "TEH", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_FIRST_COVER - never left cover, time to reset", "---" );
            l_U869 = 2;
        }
        break;
        case 5:
        if ((IS_PED_SHOOTING( sub_1590() )) || ((sub_3190( ref l_U572 )) || (sub_32835( l_U662 ))))
        {
            sub_2934( ref l_U590, sub_34832(), 1, 0 );
            sub_3070( ref l_U590 );
            sub_34510( 0 );
            sub_904( "BSW", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_FIRST_RUN - times up (or trigger volume), going to MAUS_SNIPER_AIMING", "---" );
            l_U869 = 2;
        }
        break;
        case 6:
        if ((l_U263 == 0) AND (NOT l_U274))
        {
            l_U274 = 1;
            sub_33658( "SCMT_PAFWC", ref l_U902 );
        }
        if (sub_34118())
        {
            if (sub_3190( ref l_U617 ))
            {
                sub_34213();
                sub_34510( 1 );
            }
        }
        if (NOT sub_34729())
        {
            if (NOT l_U570)
            {
                sub_2934( ref l_U590, sub_34832(), 1, 0 );
                sub_3070( ref l_U590 );
                sub_904( "TEH", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_SECOND_COVER - Max is not safe, going to MAUS_SNIPER_AIMING", "---" );
                l_U869 = 2;
            }
            else
            {
                sub_904( "TEH", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_SECOND_COVER - Passos is covering, going to MAUS_SNIPER_SECOND_RUN", "---" );
                l_U869 = 7;
            }
        }
        else if (sub_35458())
        {
            sub_904( "TEH", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_SECOND_COVER - never left cover, time to reset", "---" );
            l_U869 = 2;
        }
        break;
        case 7:
        l_U870 = 7;
        if ((sub_35458()) || (sub_32835( l_U683 )))
        {
            sub_2934( ref l_U590, sub_34832(), 1, 0 );
            sub_3070( ref l_U590 );
            sub_34510( 0 );
            sub_904( "BSW", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_SECOND_RUN - times up (or trigger volume), going to MAUS_SNIPER_AIMING", "---" );
            l_U869 = 2;
        }
        break;
        case 8:
        l_U870 = 8;
        if (sub_34118())
        {
            if (sub_3190( ref l_U617 ))
            {
                sub_34213();
                sub_34510( 1 );
            }
        }
        if ((l_U263 == 0) AND (NOT l_U274))
        {
            l_U274 = 1;
            sub_33658( "SCMT_PATSW", ref l_U912 );
        }
        if (NOT sub_34729())
        {
            if (NOT l_U570)
            {
                sub_2934( ref l_U590, sub_34832(), 1, 0 );
                sub_3070( ref l_U590 );
                sub_904( "TEH", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_FINAL_COVER - Max is not safe, going to MAUS_SNIPER_AIMING", "---" );
                l_U869 = 2;
            }
            else
            {
                sub_904( "TEH", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_FINAL_COVER - Passos is covering, going to MAUS_SNIPER_FINAL_RUN", "---" );
                l_U869 = 9;
            }
        }
        else if (sub_35458())
        {
            sub_904( "TEH", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_FINAL_COVER - never left cover, time to reset", "---" );
            l_U869 = 2;
        }
        break;
        case 9:
        if ((sub_32835( l_U725 )) || (sub_35458()))
        {
            sub_2934( ref l_U590, sub_34832(), 1, 0 );
            sub_3070( ref l_U590 );
            if (sub_32835( l_U725 ))
            {
                sub_37087( 1 );
            }
            sub_34510( 0 );
            sub_904( "BSW", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_FINAL_RUN - times up (or trigger volume), going to MAUS_SNIPER_AIMING", "---" );
            l_U869 = 2;
        }
        break;
        case 3:
        if ((NOT l_U260) AND (NOT sub_37408()))
        {
            sub_13727( 0 );
            sub_37487( ref l_U599 );
            sub_34269( l_U534 );
            PED_SET_ACTION_INTENTION( l_U534, 49, 1000, 0.00000000, 0.00000000, 0.00000000 );
            PED_SET_ACTION_INTENTION( l_U534, 50, 1000, 0.00000000, 0.00000000, 0.00000000 );
            CLEAR_PED_DEFAULT_AIM( l_U534 );
            sub_904( "BSW", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_VULNERABLE - no longer in vulnerable trigger, going back to MAUS_SNIPER_FINAL_RUN", "---" );
            l_U869 = 8;
        }
        else
        {
            sub_37087( 0 );
        }
        if (sub_37408())
        {
            sub_13727( 1 );
            if ((l_U263 == 0) AND ((NOT (IS_PED_DEAD( l_U534 ))) AND ((NOT (IS_BULLET_CAMERA_RUNNING( 0 ))) AND ((NOT (sub_2824( ref l_U599 ))) AND (IS_PED_SHOOTING( sub_1590() ))))))
            {
                sub_34269( l_U534 );
                if (sub_32835( l_U746 ))
                {
                    sub_904( "BSW", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_VULNERABLE - turning to the right pocket", 0 );
                    PED_SET_ACTION_INTENTION( l_U534, 48, 1000, 0.00000000, 0.00000000, 0.00000000 );
                }
                else
                {
                    sub_904( "BSW", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_VULNERABLE - turning to the left pocket", 0 );
                    PED_SET_ACTION_INTENTION( l_U534, 47, 1000, 0.00000000, 0.00000000, 0.00000000 );
                }
                sub_2934( ref l_U599, l_U637 + 2000, 1, 0 );
                sub_3070( ref l_U599 );
            }
        }
        else
        {
            sub_13727( 0 );
        }
        if ((((PED_GET_ACTION_INTENTION_STATUS( l_U534, 48 )) == 1) || ((PED_GET_ACTION_INTENTION_STATUS( l_U534, 47 )) == 1)) AND ((NOT (IS_PED_DEAD( l_U534 ))) AND (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))))
        {
            l_U869 = 11;
        }
        break;
        case 2:
        if (sub_37408())
        {
            sub_34510( 0 );
            sub_904( "BSW", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_AIMING - in vulnerable trigger, going to MAUS_SNIPER_VULNERABLE", "---" );
            l_U869 = 3;
        }
        if ((sub_38366()) || (sub_34729()))
        {
            sub_2934( ref l_U617, sub_38494(), 1, 0 );
            sub_3070( ref l_U617 );
            sub_34510( 0 );
            if (l_U870 <= 5)
            {
                l_U869 = 4;
            }
            else if ((l_U870 < 7) AND (l_U870 > 5))
            {
                l_U869 = 6;
            }
            else if (sub_32835( l_U683 ))
            {
                l_U869 = 8;
            }
            else
            {
                l_U869 = 6;
            };;;
            sub_904( "TEH", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_AIMING - Max reached safety, going to: ", "---" );
            sub_958( l_U869 );
        }
        else if (sub_3190( ref l_U590 ))
        {
            sub_904( "TEH", "MAUS_SNIPER_HANDLER - MAUS_SNIPER_AIMING - going to MAUS_SNIPER_SHOOTING", "---" );
            l_U869 = 10;
        }
        break;
        case 10:
        sub_38995();
        sub_2934( ref l_U590, 800, 1, 0 );
        sub_3070( ref l_U590 );
        l_U869 = 2;
        break;
        case 11:
        if (sub_39175())
        {
            l_U869 = 13;
        }
        break;
        case 13: break;
    }
    return;
}

void sub_26637()
{
    int iVar2;

    if (PED_ANIM_EVENT( g_U824, -1531652494 ))
    {
        iVar2 = GET_RANDOM_INT_IN_RANGE( 0, 2 );
        if (iVar2 > 0)
        {
            sub_904( "bsw", "HANDLE_PASSOS_SQUIBS firing squib", 0 );
            START_PARTICLE_FX_NON_LOOPED_AT_COORD( "Mtl_BulImp_CalLrg_PThk", sub_26762(), 0.00000000, 0.00000000, 0.00000000, 1.30000000 );
        }
    }
    return;
}

void sub_26762()
{
    vector[3] vVar2;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;

    array(ref vVar2, 3);
    vVar2[0] = {76.00788000, -27.76487000, 21.93517000};
    vVar2[1] = {75.00833000, -27.31062000, 21.01213000};
    vVar2[2] = {75.57276000, -27.28473000, 20.67283000};
    uVar12 = GET_RANDOM_INT_IN_RANGE( 0, 2 );
    return vVar2[uVar12];
}

void sub_26911(int iParam0, unknown uParam1)
{
    if (iParam0->_fU64 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU64 = sub_26953( sub_1590(), (iParam0^) );
        if ((iParam0->_fU64) AND (uParam1))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU64;
}

int sub_26953(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, ref uParam1._fU0 );
    }
    return 0;
}

void sub_27124()
{
    unknown uVar2;
    int I;

    sub_904( "TEH", "CREATE_REINFORCEMENTS_A", "***" );
    sub_27187( ref l_U344, 1.00000000, 0 );
    for ( I = 0; I < 3; I++ )
    {
        sub_4772( l_U300[I] );
        l_U300[I] = sub_13029( ref l_U304[I] );
        SET_PED_ALERTNESS( l_U300[I], 3 );
        if (NOT (IS_PED_DEAD( l_U300[I] )))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U300[I], 1 );
            SET_PED_CAN_AVOID_DEATH_ZONES( l_U300[I], 0 );
            if (I == 1)
            {
                uVar2 = sub_7460( l_U300[I], -691403429, 25000, 0, 0 );
            }
            else
            {
                uVar2 = sub_7460( l_U300[I], 434544317, 25000, 0, 0 );
            }
            SET_PED_AI_TEMPLATE( l_U300[I], ref g_U1220 );
            if (NOT (IS_PED_DEAD( sub_1590() )))
            {
                sub_14029( ref l_U300[I], g_U1178 );
            }
            SET_PED_FLAG_BLOCK_WOUNDED_MOVEMENT( l_U300[I], 1 );
            sub_27633( ref l_U437, l_U300[I], 1 );
            sub_27717( l_U300[I], ref l_U344 );
        }
        else
        {
            sub_904( "TEH", "P_SETUP_MAUS_REINFORCEMENTS sometings gone wrong", "***" );
        }
    }
    l_U653 = 1;
    sub_28085( ref l_U300, "MAUS_REINA" );
    return;
}

void sub_27187(int iParam0, unknown uParam1, boolean bParam2)
{
    iParam0->_fU4 = uParam1;
    iParam0->_fU0 = CREATE_GROUP( 3, 1 );
    if (bParam2)
    {
        while (NOT (DOES_GROUP_EXIST( iParam0->_fU0 )))
        {
            WAIT( 0 );
        }
    }
    SET_GROUP_RATIO_FIRING_AT_VISIBLE( iParam0->_fU0, iParam0->_fU4 );
    SET_GROUP_RATIO_FIRING_AT_INVISIBLE( iParam0->_fU0, iParam0->_fU4 );
    if (iParam0->_fU8)
    {
        SET_GROUP_FORMATION( iParam0->_fU0, iParam0->_fU12 );
        SET_GROUP_FORMATION_SPACING( iParam0->_fU0, iParam0->_fU16 );
        SET_GROUP_FORMATION_MAX_MOVE_SPEED( iParam0->_fU0, iParam0->_fU20 );
    }
    return;
}

void sub_27633(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_TETHERING_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_TETHERING_OPTION( uParam1, uParam2 );
    }
    return;
}

void sub_27717(unknown uParam0, int iParam1)
{
    int iVar4;
    unknown uVar5;

    if ((DOES_GROUP_EXIST( iParam1->_fU0 )) == 0)
    {
        sub_771( "[SP]### Warning!!! Group does not exist. Creating new group specified attributes. ###" );
        if (iParam1->_fU4 > 0)
        {
            sub_27187( iParam1, iParam1->_fU4, 0 );
        }
        else
        {
            sub_27187( iParam1, 1056964608, 0 );
        }
    }
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        GET_GROUP_SIZE( iParam1->_fU0, ref iVar4, ref uVar5 );
        if (iVar4 == 0)
        {
            SET_PED_AS_GROUP_LEADER( uParam0, iParam1->_fU0 );
        }
        else
        {
            SET_PED_AS_GROUP_MEMBER( uParam0, iParam1->_fU0 );
        }
        SET_PED_NEVER_LEAVES_GROUP( uParam0, 1 );
    }
    return;
}

void sub_28085(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

void sub_28187()
{
    unknown uVar2;

    sub_904( "BSW", "TASK_REINFORCEMENTS_A", "***" );
    if ((NOT (IS_PED_DEAD( sub_1590() ))) AND (NOT (IS_PED_DEAD( l_U300[0] ))))
    {
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( 0, l_U265, 3, 20000, 1048576000, 0, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        TASK_COMBAT_PED( 0, sub_1590() );
        CLOSE_SEQUENCE_TASK( uVar2 );
        CLEAR_PED_TASKS( l_U300[0] );
        TASK_PERFORM_SEQUENCE( l_U300[0], uVar2 );
        CLEAR_SEQUENCE_TASK( uVar2 );
    }
    if ((NOT (IS_PED_DEAD( sub_1590() ))) AND (NOT (IS_PED_DEAD( l_U300[1] ))))
    {
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( 0, l_U268, 3, 20000, 1048576000, 0, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        CLOSE_SEQUENCE_TASK( uVar2 );
        CLEAR_PED_TASKS( l_U300[1] );
        TASK_PERFORM_SEQUENCE( l_U300[1], uVar2 );
        CLEAR_SEQUENCE_TASK( uVar2 );
    }
    if ((NOT (IS_PED_DEAD( sub_1590() ))) AND (NOT (IS_PED_DEAD( l_U300[2] ))))
    {
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( 0, l_U271, 3, 20000, 1048576000, 0, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        CLOSE_SEQUENCE_TASK( uVar2 );
        CLEAR_PED_TASKS( l_U300[2] );
        sub_904( "BSW", "TASK_REINFORCEMENTS_a tasking reinfa-2", 0 );
        TASK_PERFORM_SEQUENCE( l_U300[2], uVar2 );
        CLEAR_SEQUENCE_TASK( uVar2 );
    }
    return;
}

void sub_28716(unknown uParam0, unknown uParam1)
{
    sub_904( "SBA", "P_PLAY_DIAL_PASSOS", "***" );
    if (sub_2575( g_U824 ))
    {
        if (NOT (IS_PED_DEAD( sub_1590() )))
        {
            sub_28799( uParam1 );
            sub_28882( 1, g_U824, "PASSOS", uParam1, 2, 0 );
            sub_28882( 0, sub_1590(), "MAX", uParam1, 2, 0 );
            sub_29107( uParam0, uParam1, 8, 1 );
        }
    }
    return;
}

void sub_28799(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

void sub_28882(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

void sub_29107(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return sub_29131( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

void sub_29131(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return sub_29186( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

int sub_29186(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT (sub_29221( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
    sub_29715( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

int sub_29221(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

void sub_29715(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

void sub_29995()
{
    unknown uVar2;
    int I;

    sub_904( "TEH", "CREATE_REINFORCEMENTS_B", "***" );
    sub_27187( ref l_U394, 1.00000000, 0 );
    for ( I = 0; I < 3; I++ )
    {
        if (((sub_30079( ref l_U300 )) + I) < 4)
        {
            sub_4772( l_U350[I] );
            l_U350[I] = sub_13029( ref l_U354[I] );
            if (NOT (IS_PED_DEAD( l_U350[I] )))
            {
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U350[I], 1 );
                SET_PED_CAN_AVOID_DEATH_ZONES( l_U350[I], 0 );
                if (I == 0)
                {
                    uVar2 = sub_7460( l_U350[I], -691403429, 25000, 0, 0 );
                }
                else if (I == 1)
                {
                    uVar2 = sub_7460( l_U350[I], -691403429, 25000, 0, 0 );
                }
                else
                {
                    uVar2 = sub_7460( l_U350[I], -862236369, 25000, 0, 0 );
                }
                SET_PED_FLAG_BLOCK_WOUNDED_MOVEMENT( l_U350[I], 1 );
                sub_27633( ref l_U437, l_U350[I], 1 );
                SET_PED_AI_TEMPLATE( l_U350[I], ref g_U1220 );
                if (NOT (IS_PED_DEAD( g_U1178 )))
                {
                    sub_14029( ref l_U350[I], g_U1178 );
                }
                sub_27717( l_U350[I], ref l_U394 );
            }
            else
            {
                sub_904( "TEH", "P_SETUP_MAUS_REINFORCEMENTS sometings gone wrong", "***" );
            }
        }
    }
    l_U654 = 1;
    sub_28085( ref l_U350, "MAUS_REINB" );
    return;
}

void sub_30079(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result++;
        }
    }
    return Result;
}

void sub_30597()
{
    unknown uVar2;

    sub_904( "BSW", "TASK_REINFORCEMENTS_B start", 0 );
    if ((NOT (IS_PED_DEAD( sub_1590() ))) AND (NOT (IS_PED_DEAD( l_U350[0] ))))
    {
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( 0, l_U265, 3, 20000, 1048576000, 0, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        TASK_COMBAT_PED( 0, sub_1590() );
        CLOSE_SEQUENCE_TASK( uVar2 );
        CLEAR_PED_TASKS( l_U350[0] );
        sub_904( "BSW", "TASK_REINFORCEMENTS_B tasking reinfC-0", 0 );
        TASK_PERFORM_SEQUENCE( l_U350[0], uVar2 );
        CLEAR_SEQUENCE_TASK( uVar2 );
    }
    if ((NOT (IS_PED_DEAD( sub_1590() ))) AND (NOT (IS_PED_DEAD( l_U350[1] ))))
    {
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( 0, l_U268, 3, 20000, 1048576000, 0, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        CLOSE_SEQUENCE_TASK( uVar2 );
        CLEAR_PED_TASKS( l_U350[1] );
        sub_904( "BSW", "TASK_REINFORCEMENTS_B tasking reinfC-1", 0 );
        TASK_PERFORM_SEQUENCE( l_U350[1], uVar2 );
        CLEAR_SEQUENCE_TASK( uVar2 );
    }
    if ((NOT (IS_PED_DEAD( sub_1590() ))) AND (NOT (IS_PED_DEAD( l_U350[2] ))))
    {
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( 0, l_U271, 3, 20000, 1048576000, 0, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        CLOSE_SEQUENCE_TASK( uVar2 );
        CLEAR_PED_TASKS( l_U350[2] );
        sub_904( "BSW", "TASK_REINFORCEMENTS_B tasking reinfC-2", 0 );
        TASK_PERFORM_SEQUENCE( l_U350[2], uVar2 );
        CLEAR_SEQUENCE_TASK( uVar2 );
    }
    return;
}

void sub_31320()
{
    unknown uVar2;
    int I;

    sub_904( "TEH", "CREATE_REINFORCEMENTS_C", "***" );
    sub_27187( ref l_U430, 1.00000000, 0 );
    for ( I = 0; I < 2; I++ )
    {
        if ((((sub_30079( ref l_U300 )) + (sub_30079( ref l_U350 ))) + I) < 4)
        {
            sub_4772( l_U400[I] );
            l_U400[I] = sub_13029( ref l_U403[I] );
            if (NOT (IS_PED_DEAD( l_U400[I] )))
            {
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U400[I], 1 );
                SET_PED_CAN_AVOID_DEATH_ZONES( l_U400[I], 0 );
                if (I == 0)
                {
                    uVar2 = sub_7460( l_U400[I], -691403429, 25000, 0, 0 );
                }
                else if (I == 1)
                {
                    uVar2 = sub_7460( l_U400[I], -691403429, 25000, 0, 0 );
                }
                else
                {
                    uVar2 = sub_7460( l_U400[I], -862236369, 25000, 0, 0 );
                }
                SET_PED_FLAG_BLOCK_WOUNDED_MOVEMENT( l_U400[I], 1 );
                sub_27633( ref l_U437, l_U400[I], 1 );
                SET_PED_AI_TEMPLATE( l_U400[I], ref g_U1220 );
                if (NOT (IS_PED_DEAD( g_U1178 )))
                {
                    sub_14029( ref l_U400[I], g_U1178 );
                }
                sub_27717( l_U400[I], ref l_U430 );
            }
            else
            {
                sub_904( "TEH", "P_SETUP_MAUS_REINFORCEMENTS sometings gone wrong", "***" );
            }
        }
    }
    l_U655 = 1;
    sub_28085( ref l_U400, "MAUS_REINC" );
    return;
}

void sub_31857()
{
    unknown uVar2;

    sub_904( "BSW", "TASK_REINFORCEMENTS_C start", 0 );
    if ((NOT (IS_PED_DEAD( sub_1590() ))) AND (NOT (IS_PED_DEAD( l_U400[0] ))))
    {
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( 0, l_U265, 3, 20000, 1048576000, 0, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        TASK_COMBAT_PED( 0, sub_1590() );
        CLOSE_SEQUENCE_TASK( uVar2 );
        CLEAR_PED_TASKS( l_U400[0] );
        sub_904( "BSW", "TASK_REINFORCEMENTS_C tasking reinfC-0", 0 );
        TASK_PERFORM_SEQUENCE( l_U400[0], uVar2 );
        CLEAR_SEQUENCE_TASK( uVar2 );
    }
    if ((NOT (IS_PED_DEAD( sub_1590() ))) AND (NOT (IS_PED_DEAD( l_U400[1] ))))
    {
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( 0, l_U268, 3, 20000, 1048576000, 0, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        CLOSE_SEQUENCE_TASK( uVar2 );
        CLEAR_PED_TASKS( l_U400[1] );
        sub_904( "BSW", "TASK_REINFORCEMENTS_C tasking reinfC-1", 0 );
        TASK_PERFORM_SEQUENCE( l_U400[1], uVar2 );
        CLEAR_SEQUENCE_TASK( uVar2 );
    }
    return;
}

void sub_32304()
{
    if (l_U656)
    {
        sub_28716( "SCMT_PGMEC", ref l_U952 );
    }
    else
    {
        sub_32351();
    }
    if (sub_2575( l_U534 ))
    {
        CLEAR_PED_TASKS_IMMEDIATELY( l_U534 );
        TASK_AIM_GUN_AT_PED( l_U534, g_U824, -1, 0 );
        sub_14029( ref l_U534, g_U824 );
    }
    return;
}

void sub_32351()
{
    if (l_U869 == 4)
    {
        sub_904( "SBA", "P_PLAY_COVER_FIRE_VO: First Time", "---" );
        sub_28716( "SCMT_PSSHT", ref l_U922 );
    }
    else if (l_U869 == 6)
    {
        sub_904( "SBA", "P_PLAY_COVER_FIRE_VO: Second Time", "---" );
        sub_28716( "SCMT_FPSST", ref l_U932 );
    }
    else if (l_U869 == 8)
    {
        sub_904( "SBA", "P_PLAY_COVER_FIRE_VO: Final Time", "---" );
        sub_28716( "SCMT_PLDMC", ref l_U942 );
    }
    else
    {
        sub_904( "SBA", "P_PLAY_COVER_FIRE_VO: ERROR! we're playing some VO, but how did we get here?", "---" );
        sub_28716( "SCMT_PGMEC", ref l_U952 );
    };;;
    return;
}

void sub_32835(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20)
{
    return sub_26953( sub_1590(), uParam0 );
}

void sub_32966()
{
    int I;

    I = 0;
    for ( I = 0; I < 3; I++ )
    {
        if (sub_2575( l_U300[I] ))
        {
            if (sub_26953( l_U300[I], l_U788 ))
            {
                sub_904( "BSW", "Killed a A ped that was stuck in the Maus", 0 );
                sub_33100( l_U300[I] );
            }
        }
    }
    I = 0;
    for ( I = 0; I < 3; I++ )
    {
        if (sub_2575( l_U350[I] ))
        {
            if (sub_26953( l_U350[I], l_U788 ))
            {
                sub_904( "BSW", "Killed a B ped that was stuck in the Maus", 0 );
                sub_33100( l_U350[I] );
            }
        }
    }
    I = 0;
    for ( I = 0; I < 2; I++ )
    {
        if (sub_2575( l_U400[I] ))
        {
            if (sub_26953( l_U400[I], l_U788 ))
            {
                sub_904( "BSW", "Killed a C ped that was stuck in the Maus", 0 );
                sub_33100( l_U400[I] );
            }
        }
    }
    return;
}

void sub_33100(unknown uParam0)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        STOP_PED_SPEAKING( uParam0, 1 );
        SET_PED_HEALTH( uParam0, 0, 0 );
        SET_PED_CORPSE( uParam0, 0 );
    }
    return;
}

void sub_33658(unknown uParam0, unknown uParam1)
{
    sub_904( "SBA", "P_DIAL_PASSOS_MAX", "***" );
    if (sub_2575( g_U824 ))
    {
        if (NOT (IS_PED_DEAD( sub_1590() )))
        {
            sub_28799( uParam1 );
            sub_28882( 1, g_U824, "PASSOS", uParam1, 2, 0 );
            sub_28882( 2, sub_1590(), "MAX", uParam1, 2, 0 );
            sub_29107( uParam0, uParam1, 8, 1 );
        }
    }
    return;
}

int sub_33852(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    if (NOT (sub_33865( uParam0 )))
    {
        return 0;
    }
    if ((g_U11[uParam0._fU4] == 2) || ((g_U11[uParam0._fU4] == 1) || (IS_SCRIPTED_CONVERSATION_ONGOING( uParam0._fU4 ))))
    {
        if (uParam0._fU8 == g_U6[uParam0._fU4])
        {
            return 1;
        }
    }
    return 0;
}

boolean sub_33865(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    int iVar12;

    if (uParam0._fU4 < 0)
    {
        return 0;
    }
    iVar12 = GET_CHECK_HASH_FROM_CONVERSATION_ID( uParam0._fU4 );
    return (uParam0._fU16 == iVar12) AND (iVar12 != 0);
}

int sub_34118()
{
    if (NOT sub_34128())
    {
        return 1;
    }
    return 0;
}

void sub_34128()
{
    int Result;
    int I;

    Result = 0;
    for ( I = 0; I <= 3; I++ )
    {
        Result = (IS_SCRIPTED_CONVERSATION_ONGOING( I )) || (Result);
    }
    return Result;
}

void sub_34213()
{
    sub_904( "bsw", "MAKE_PASSOS_FIRE_AT_SNIPER", 0 );
    sub_34269( g_U824 );
    PED_SET_ACTION_INTENTION( g_U824, 47, 1000, 0.00000000, 0.00000000, 0.00000000 );
    sub_2934( ref l_U626, l_U638, 1, 0 );
    sub_3070( ref l_U626 );
    return;
}

void sub_34269(unknown uParam0)
{
    if (sub_2575( uParam0 ))
    {
        PED_FINISH_ACTION_INTENTION( uParam0, 47 );
        PED_FINISH_ACTION_INTENTION( uParam0, 48 );
        PED_FINISH_ACTION_INTENTION( uParam0, 49 );
        PED_FINISH_ACTION_INTENTION( uParam0, 50 );
        PED_FINISH_ACTION_INTENTION( uParam0, 51 );
        PED_FINISH_ACTION_INTENTION( uParam0, 52 );
        PED_FINISH_ACTION_INTENTION( uParam0, 53 );
        PED_FINISH_ACTION_INTENTION( uParam0, 54 );
        PED_FINISH_ACTION_INTENTION( uParam0, 55 );
        PED_FINISH_ACTION_INTENTION( uParam0, 56 );
        PED_FINISH_ACTION_INTENTION( uParam0, 57 );
        PED_FINISH_ACTION_INTENTION( uParam0, 58 );
    }
    return;
}

void sub_34510(boolean bParam0)
{
    if (bParam0)
    {
        sub_904( "TEH", "TOGGLE_SNIPER_HIDING - sniper is hiding", 0 );
        sub_2934( ref l_U581, l_U636, 1, 0 );
        sub_3070( ref l_U581 );
    }
    else
    {
        CLEAR_PED_TASKS_IMMEDIATELY( l_U534 );
        TASK_AIM_GUN_AT_PED( l_U534, sub_1590(), -1, 0 );
        sub_14029( ref l_U534, sub_1590() );
        sub_904( "TEH", "TOGGLE_SNIPER_HIDING - sniper is NOT hiding", 0 );
    }
    l_U570 = bParam0;
    return;
}

int sub_34729()
{
    if ((NOT (IS_PED_DEAD( l_U534 ))) AND (sub_2560()))
    {
        if ((IS_PLAYER_DOING_MELEE_GRAPPLE( sub_1612() )) || (IS_PED_LOS_CLEAR_TO_TARGET_PED( l_U534, sub_1590() )))
        {
            return 0;
        }
    }
    return 1;
}

void sub_34832()
{
    int iVar2;
    int iVar3;
    int Result;

    iVar2 = 5000;
    iVar3 = 1500;
    Result = 5500;
    if ((NOT (IS_PED_DEAD( l_U534 ))) AND (sub_2560()))
    {
        if (l_U656)
        {
            sub_904( "BSW", "MAUS_SNIPER_GET_HIDING_TIME player was just protected", 0 );
            l_U656 = 0;
            return Result;
        }
        else if ((IS_TARGET_IN_VALID_COVER_FROM_PED( l_U534, sub_1590() )) AND (IS_CONTROL_PRESSED( 0, 6 )))
        {
            sub_904( "BSW", "MAUS_SNIPER_GET_HIDING_TIME player is aiming but in cover", 0 );
            return iVar2;
        }
    }
    sub_904( "BSW", "MAUS_SNIPER_GET_HIDING_TIME player is out of cover", 0 );
    return iVar3;
}

boolean sub_35458()
{
    return (IS_PED_SHOOTING( sub_1590() )) || (sub_3190( ref l_U581 ));
}

void sub_37087(unknown uParam0)
{
    int iVar3;

    if ((uParam0) || (sub_3190( ref l_U524 )))
    {
        iVar3 = GET_RANDOM_INT_IN_RANGE( 0, 3 );
        if (iVar3 == l_U523)
        {
            iVar3++;
            if (iVar3 >= 4)
            {
                iVar3 = 0;
            }
        }
        l_U523 = iVar3;
        if (sub_2575( l_U534 ))
        {
            CLEAR_PED_TASKS_IMMEDIATELY( l_U534 );
            SET_PED_DEFAULT_AIM_AT_COORD( l_U534, l_U510[l_U523] );
            TASK_AIM_GUN_AT_COORD( l_U534, l_U510[l_U523], -1, 0 );
        }
        sub_3727( ref l_U524 );
        sub_3070( ref l_U524 );
    }
    return;
}

int sub_37408()
{
    if ((sub_32835( l_U767 )) || (sub_32835( l_U746 )))
    {
        return 1;
        break;
    }
    return 0;
}

void sub_37487(int iParam0)
{
    iParam0->_fU20 = 0;
    iParam0->_fU16 = 0;
    return;
}

int sub_38366()
{
    if (sub_2560())
    {
        if ((IS_PLAYER_DOING_MELEE_GRAPPLE( sub_1612() )) || (IS_LAST_MAN_STANDING_ACTIVE()))
        {
            sub_904( "BSW", "DOES_MAX_NEED_PROTECTION - yes he does!", 0 );
            l_U656 = 1;
            return 1;
        }
    }
    return 0;
}

void sub_38494()
{
    int iVar2;
    int Result;

    iVar2 = 6000;
    Result = 0;
    if (sub_38366())
    {
        sub_904( "BSW", "MAUS_SNIPER_GET_PASSOS_COVER_FIRE_DELAY - 0", 0 );
        return Result;
        break;
    }
    sub_904( "BSW", "MAUS_SNIPER_GET_PASSOS_COVER_FIRE_DELAY - 6000", 0 );
    return iVar2;
}

void sub_38995()
{
    sub_904( "BSW", "MAUS_SNIPER_ATTACK shoot at max", 0 );
    if ((NOT (IS_PED_DEAD( l_U534 ))) AND (sub_2560()))
    {
        TASK_SHOOT_AT_PED( l_U534, sub_1590(), -1, 1566631136, 1, 0, 0 );
        sub_904( "CR", "TASK_SHOOT_AT_PED(", 0 );
    }
    return;
}

void sub_39175()
{
    int Result;

    Result = 0;
    switch (l_U868)
    {
        case 0:
        sub_20217( 1, 0, 0, 1 );
        sub_2934( ref l_U1023, l_U1032, 1, 0 );
        sub_3070( ref l_U1023 );
        if (NOT (IS_PED_DEAD( l_U534 )))
        {
            CLEAR_PED_TASKS_IMMEDIATELY( l_U534 );
            SET_PED_PERFECT_ACCURACY_OVERRIDE( l_U534, 1 );
            TASK_AIM_GUN_AT_PED( l_U534, sub_1590(), -1, 1 );
        }
        if (sub_32835( l_U746 ))
        {
            sub_39381( ref l_U992, 75.04000000, -28.30000000, 22.21000000, -32.75000000, 0.00000000, 57.24000000, 45, l_U1033 );
        }
        else
        {
            sub_39381( ref l_U992, 76.00784000, -28.48675000, 22.80702000, -35.89833000, 0.00001300, -57.17677000, 45, l_U1033 );
        }
        sub_39648( ref l_U992 );
        if (NOT (IS_PED_DEAD( l_U534 )))
        {
            if ((PED_GET_ACTION_INTENTION_STATUS( l_U534, 47 )) == 1)
            {
                sub_13850( sub_1590(), 90.52000000, -16.66351000, 8.97345500, 135.91740000 );
                sub_904( "BSW", "sniper finished his turn to left pocket", 0 );
            }
            else if ((PED_GET_ACTION_INTENTION_STATUS( l_U534, 48 )) == 1)
            {
                sub_13850( sub_1590(), 57.21862000, -17.97205000, 9.47439100, 238.28530000 );
                sub_904( "BSW", "sniper finished his turn to right pocket", 0 );
            }
            else
            {
                sub_904( "BSW", "sniper turn cam finished", 0 );
            }
        }
        l_U868 = 1;
        break;
        case 1:
        if ((NOT l_U571) AND (sub_3190( ref l_U1023 )))
        {
            sub_38995();
            l_U571 = 1;
        }
        if (sub_40062( ref l_U992, 1 ))
        {
            sub_33100( sub_1590() );
            l_U868 = 2;
        }
        break;
        case 2:
        sub_25973( 1, 1 );
        Result = 1;
        break;
    }
    return Result;
}

void sub_39381(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    iParam0->_fU4 = {uParam4};
    iParam0->_fU16 = {uParam1};
    iParam0->_fU28 = uParam7;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    iParam0->_fU84 = uParam8;
    iParam0->_fU88 = 0;
    iParam0->_fU92 = 0;
    iParam0->_fU40 = 0;
    iParam0->_fU44 = 0;
    iParam0->_fU100 = 1;
    iParam0->_fU104 = 1;
    iParam0->_fU96 = 0;
    sub_2934( iParam0 + 48, uParam8, 1, 0 );
    iParam0->_fU0 = CREATE_CAM_WITH_PARAMS( ref g_U763, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 1 );
    SET_CAM_PARAMS( iParam0->_fU0, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 0, 1, 1 );
    return;
}

void sub_39648(int iParam0)
{
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    SET_CAM_ACTIVE( iParam0->_fU0, 1 );
    RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    sub_3070( iParam0 + 48 );
    iParam0->_fU32 = 1;
    iParam0->_fU40 = 1;
    return;
}

int sub_40062(int iParam0, boolean bParam1)
{
    if (bParam1 == 1)
    {
        if (NOT iParam0->_fU44)
        {
            if ((ref iParam0->_fU48->_fU16) || (sub_3190( iParam0 + 48 )))
            {
                iParam0->_fU44 = 1;
                iParam0->_fU36 = 1;
                return 1;
            }
        }
    }
    if (NOT bParam1)
    {
        if ((ref iParam0->_fU48->_fU16) || (sub_3190( iParam0 + 48 )))
        {
            iParam0->_fU36 = 1;
            return 1;
        }
    }
    return 0;
}

void sub_40275()
{
    l_U263 = ((sub_30079( ref l_U300 )) + (sub_30079( ref l_U350 ))) + (sub_30079( ref l_U400 ));
    l_U264 = l_U263;
    if (NOT (IS_PED_DEAD( l_U534 )))
    {
        l_U264++;
    }
    if ((l_U655) AND ((l_U654) AND ((l_U653) AND ((NOT l_U658) AND (l_U264 == 1)))))
    {
        sub_40396();
    }
    if ((NOT IS_LAST_MAN_STANDING_ACTIVE()) AND ((l_U659) AND (IS_BULLET_CAMERA_RUNNING( 0 ))))
    {
        sub_16888( 0 );
    }
    if ((l_U264 == 0) || (IS_BULLET_CAMERA_RUNNING( 0 )))
    {
        ;
    }
    return;
}

void sub_40396()
{
    l_U660 = sub_40410( ref l_U300 );
    if (l_U660 == nil)
    {
        l_U660 = sub_40410( ref l_U350 );
        if (l_U660 == nil)
        {
            l_U660 = sub_40410( ref l_U400 );
            if (l_U660 == nil)
            {
                if ((NOT (IS_PED_DEAD( l_U534 ))) AND (sub_2575( l_U534 )))
                {
                    l_U660 = l_U534;
                    SET_PED_CAN_TRIGGER_BULLET_CAM( l_U534, 1 );
                    l_U659 = 1;
                    l_U657 = 1;
                }
                else
                {
                    SCRIPT_ASSERT( "No last target found!!!!", 0 );
                }
            }
            else
            {
                SET_PED_CAN_TRIGGER_BULLET_CAM( l_U660, 1 );
                l_U657 = 1;
            }
        }
        else
        {
            SET_PED_CAN_TRIGGER_BULLET_CAM( l_U660, 1 );
            l_U657 = 1;
        }
    }
    else
    {
        SET_PED_CAN_TRIGGER_BULLET_CAM( l_U660, 1 );
        l_U657 = 1;
    }
    if (l_U657)
    {
        l_U658 = 1;
        SET_PED_ONLY_DAMAGED_BY_PLAYER( l_U660, 1 );
        sub_904( "bsw", "setting ALLOW_BULLET_CAMERA_TO_GAMEPLAY to FALSE for last maus ped", 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 0 );
    }
    return;
}

void sub_40410(unknown uParam0)
{
    int I;

    if ((sub_30079( uParam0 )) == 1)
    {
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
            {
                if (NOT (GET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I] )))
                {
                    SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I], 1 );
                    return (uParam0^)[I];
                }
            }
        }
    }
    return nil;
}

void sub_41139(unknown uParam0)
{
    int I;

    for ( I = 0; I <= 3; I++ )
    {
        if (IS_SCRIPTED_CONVERSATION_ONGOING( I ))
        {
            if ((g_U1[I] <= 8) AND (g_U1[I] >= 4))
            {
                STOP_SCRIPTED_CONVERSATION( I, uParam0, 0 );
            }
        }
    }
    return;
}

void sub_41291(unknown uParam0, float fParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;

    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( (uParam0^) )};
        if (uVar4._fU8 < fParam1)
        {
            sub_41397( "A ped has been killed by P_PED_HEIGHT_SAFETY_CHECK", 0, 0 );
            SET_PED_HEALTH( (uParam0^), 0, 0 );
        }
    }
    return;
}

void sub_41397(unknown uParam0, string sParam1, string sParam2)
{
    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "ML";
    }
    if (IS_STRING_NULL( sParam1 ))
    {
        sParam1 = "---";
    }
    sub_904( sParam2, uParam0, sParam1 );
    return;
}

void sub_41497(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_41534( (uParam0^)[I], uParam1, uParam2, uParam3 );
    }
    return;
}

void sub_41534(unknown uParam0, float fParam1, int iParam2, boolean bParam3)
{
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;

    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        uVar6 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        if (uVar6._fU8 < fParam1)
        {
            if (iParam2 == 1)
            {
                SET_PED_HEALTH( uParam0, 0, 0 );
            }
            if (bParam3)
            {
                sub_4772( uParam0 );
            }
        }
    }
    return;
}

void sub_41678()
{
    if (NOT l_U1034)
    {
        START_WIDGET_GROUP( "Dialogue Test" );
        ADD_WIDGET_BOOL( "Test it", ref l_U1036 );
        STOP_WIDGET_GROUP();
        START_WIDGET_GROUP( "Post FX Test" );
        ADD_WIDGET_BOOL( "On", ref l_U1037 );
        ADD_WIDGET_BOOL( "Off", ref l_U1038 );
        STOP_WIDGET_GROUP();
        START_WIDGET_GROUP( "Cheat and beat this checkpoint" );
        ADD_WIDGET_BOOL( "bDebugCheatToWin", ref l_U259 );
        STOP_WIDGET_GROUP();
        START_WIDGET_GROUP( "Sniper scan test" );
        ADD_WIDGET_BOOL( "Force scan on", ref l_U260 );
        STOP_WIDGET_GROUP();
        l_U1034 = 1;
    }
    if (l_U259)
    {
        l_U866 = 9;
        l_U259 = 0;
    }
    if (l_U1038)
    {
        l_U1038 = 0;
    }
    if (l_U1036)
    {
        sub_12725( "MAXAUD" );
        sub_28799( ref l_U1039 );
        sub_28882( 0, g_U1178, "MAX", ref l_U1039, 2, 0 );
        sub_28882( 1, g_U1178, "MAX", ref l_U1039, 2, 0 );
        sub_29107( "HAS_PILLS", ref l_U1039, 8, 1 );
        l_U1036 = 0;
    }
    return;
}

void sub_42146()
{
    sub_771( "[GA] P_UNLOAD_ASSETS_MAUSOLEUM start" );
    sub_21105( g_U1346 );
    sub_21105( g_U1345 );
    sub_21105( g_U1343 );
    sub_21105( g_U1332 );
    sub_21105( g_U1344 );
    sub_21105( g_U1365 );
    sub_42274( "FACE_PASNYB" );
    sub_42344( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act" );
    sub_771( "[GA] P_UNLOAD_ASSETS_MAUSOLEUM end" );
    return;
}

void sub_42274(unknown uParam0)
{
    REMOVE_ANIM_DICT( uParam0, 0 );
    return;
}

void sub_42344(unknown uParam0)
{
    ACTION_TREE_UNLOAD( uParam0 );
    return;
}

void sub_42423(unknown uParam0)
{
    switch (uParam0)
    {
        case 0:
        case 1: break;
        case 2: break;
        case 3: break;
        case 4:
        case 5: break;
        case 6: break;
        case 7:
        sub_42560( 1224272620 );
        break;
        case 8: break;
        case 9:
        sub_16270( 434544317, 1 );
        sub_16270( -691403429, 1 );
        break;
        case 10:
        sub_42560( -184942895 );
        break;
    }
    return;
}

void sub_42560(unknown uParam0)
{
    SET_WEAPON_AS_NO_LONGER_NEEDED( uParam0 );
    return;
}

