void main()
{
    l_U0 = 1;
    l_U1 = 144;
    l_U2 = 0;
    l_U3 = 1;
    l_U4 = 0;
    l_U5 = 1.00000000;
    l_U6 = -5.00000000;
    l_U7 = 0;
    l_U8 = 0;
    l_U9 = 0;
    l_U13 = 42;
    l_U14 = 0;
    l_U15 = 0;
    l_U16 = 0;
    l_U17 = 0;
    l_U18 = 0;
    l_U19 = 90.00000000;
    l_U20 = {0.00000000, 0.00000000, 0.00000000};
    l_U23 = {0.00000000, 0.00000000, 0.00000000};
    l_U26 = 0;
    l_U27 = 0;
    l_U28 = 0;
    l_U29 = 0;
    l_U30 = 0;
    l_U31 = 0;
    l_U32 = nil;
    l_U33 = {0.00000000, 0.00000000, 0.00000000};
    l_U36 = 0;
    l_U37 = 0;
    l_U38 = 0;
    l_U40 = 0;
    l_U41 = 0;
    l_U42 = 1500;
    StrCopy( ref l_U52, "DEFAULT_SCRIPTED_CAMERA", 32 );
    StrCopy( ref l_U60, "DEFAULT_SPLINE_CAMERA", 32 );
    l_U68 = 0;
    l_U69 = 0;
    l_U70 = 0;
    l_U71 = 0;
    l_U73 = 0;
    l_U75 = 20250.00000000;
    l_U750 = 1300;
    l_U2154 = 0;
    l_U2155 = 4000;
    l_U2156 = 5000;
    l_U2158 = "10_04_BUS_RAIL";
    sub_432( "CCB", "Script busdepot_railshooter.sc is starting...", 0 );
    sub_481();
    while (NOT IS_EXITFLAG_SET())
    {
        sub_664();
        sub_11682();
        WAIT( 0 );
    }
    sub_3161( 0 );
    sub_126096();
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "busdepot_railshooter" );
    SET_EXITFLAG_RESPONSE();
    sub_432( "CCB", "Script busdepot_railshooter.sc is terminating...", 0 );
    return;
}

void sub_432(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    return;
}

void sub_481()
{
    START_WIDGET_GROUP( "IMAGE FX" );
    ADD_WIDGET_FLOAT_SLIDER( "fCONST_RailWallScrapeStartFX", ref l_U75, 0, 30000.00000000, 1000.00000000 );
    ADD_WIDGET_INT_SLIDER( "iRAILSMASHFXTIMER", ref l_U750, 0, 20000, 1000 );
    ADD_WIDGET_INT_SLIDER( "Start 3 FX", ref l_U2156, 0, 20000, 1000 );
    STOP_WIDGET_GROUP();
    return;
}

void sub_664()
{
    if (g_U764 == 10)
    {
        if (sub_686())
        {
            l_U143 = 1;
        }
        if ((l_U143 == 1) || (IS_PED_DEAD( sub_958() )))
        {
            if (l_U143 == 0)
            {
                while ((sub_1223( 1 )) == 0)
                {
                    WAIT( 0 );
                }
                while (IS_PED_DEAD( sub_958() ))
                {
                    WAIT( 0 );
                }
                if (NOT (IS_PLAYER_DEAD( sub_980() )))
                {
                    SET_PLAYER_CONTROL( sub_980(), 0, 0 );
                }
            }
            l_U143 = 0;
            if (IS_SCREEN_FADED_IN())
            {
                sub_432( "CCB", "FADING OUT!!!", 0 );
                DO_SCREEN_FADE_OUT( 0 );
            }
            sub_432( "CCB", "Incrementing the checkpoint restart counter:", 0 );
            g_U2875[10]++;
            sub_432( "CCB", "Suspending music...", 0 );
            AUDIO_MUSIC_SUSPEND( 500 );
            sub_2796();
            sub_2965( "BUS_BUSPLOSION_SCRIPTED_FAIL_FX" );
            DESTROY_ALL_CAMS();
            RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
            sub_3161( 1 );
            sub_4701();
            g_U764 = 10;
            sub_7421( ref l_U76, sub_958() );
            WAIT( 100 );
            sub_11485( sub_958(), g_U2339[10], g_U2466[10] );
            SET_CAM_SIDE_LEFT( 0 );
            SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U2509[10], 1065353216, 0 );
            SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U2552[10], 1065353216, 0 );
            RENDER_SCRIPT_CAMS( 0, 0, 0, 0 );
            DESTROY_ALL_CAMS();
            WAIT( 100 );
            sub_432( "CCB", "eCheckpoint - STATE_MIDSCENE_INIT", 0 );
            l_U145 = 0;
        }
    }
    return;
}

int sub_686()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U0 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD( sub_958() )))
        {
            SET_PED_FORCED_TO_WALK( sub_958(), 0 );
            SET_PLAYER_FORCED_AIM( sub_980(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE( sub_980(), 1 );
            if ((IS_PED_VISIBLE( sub_958() )) == 0)
            {
                SET_PED_VISIBLE( sub_958(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

int sub_958()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED( sub_980() );
    }
    return 0;
}

void sub_980()
{
    return GET_PLAYER_ID();
}

int sub_1223(int iParam0)
{
    iParam0 = 1;
    switch (l_U41)
    {
        case 0:
        if (NOT (sub_1284( ref l_U43 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_958() )))
            {
                l_U42 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
            sub_1394( ref l_U43, l_U42, 1, 1 );
            sub_1530( ref l_U43 );
        }
        if (sub_1650( ref l_U43 ))
        {
            sub_432( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_958() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD( sub_980() )))
            {
                SET_PLAYER_CONTROL( sub_980(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U41 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U41 = 2;
            }
            else
            {
                l_U41 = 3;
            }
        }
        break;
        case 2:
        sub_432( "NS", "Player will QUIT", 0 );
        sub_2137();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
        sub_432( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        sub_2137();
        return 1;
        break;
    }
    return 0;
}

int sub_1284(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

void sub_1394(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

void sub_1530(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

int sub_1650(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

void sub_2137()
{
    sub_432( "NS", "P_PostFailRetryCleanup", 0 );
    sub_2187( ref l_U43 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD( sub_980() )))
    {
        SET_PLAYER_CONTROL( sub_980(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U40 = 0;
    l_U40 = l_U40;
    l_U41 = 0;
    return;
}

void sub_2187(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

void sub_2796()
{
    sub_432( "SP", "P_SETUP_PLAYER_RELATIONSHIPS", 0 );
    if ((IS_PED_DEAD( sub_958() )) == 0)
    {
        SET_PED_RELATIONSHIP( sub_958(), 0, 1 );
        SET_PED_RELATIONSHIP( sub_958(), 0, 2 );
        SET_PED_RELATIONSHIP( sub_958(), 0, 6 );
        SET_PED_RELATIONSHIP( sub_958(), 0, 7 );
    }
    return;
}

void sub_2965(unknown uParam0)
{
    sub_432( "CO", "P_IMAGEFX_STOP_BULLETCAM:  Cameras Deleted", 0 );
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    sub_3048( ref l_U74 );
    l_U73 = 1;
    return;
}

void sub_3048(unknown uParam0)
{
    if ((DOES_CAM_EXIST( (uParam0^) )) == 1)
    {
        if ((IS_CAM_ACTIVE( (uParam0^) )) == 1)
        {
            SET_CAM_ACTIVE( (uParam0^), 0 );
        }
        DESTROY_CAM( (uParam0^) );
    }
    (uParam0^) = nil;
    return;
}

void sub_3161(boolean bParam0)
{
    sub_432( "CCB", "P_CLEANUP_ALL", 0 );
    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        if (IS_PED_ATTACHED_TO_ANY_VEHICLE( sub_958() ))
        {
            sub_432( "CCB", "Detaching the player.", 0 );
            DETACH_PED( sub_958(), 1 );
        }
        if (NOT (IS_PLAYER_DEAD( sub_980() )))
        {
            SET_PLAYER_FORCED_AIM( sub_980(), 0, 0 );
        }
    }
    if (NOT (IS_PED_DEAD( g_U2595 )))
    {
        if (IS_PED_ATTACHED_TO_ANY_VEHICLE( g_U2595 ))
        {
            sub_432( "CCB", "Detaching Gio.", 0 );
            DETACH_PED( g_U2595, 1 );
        }
    }
    if (bParam0)
    {
        sub_3404( g_U2595 );
        TOGGLE_DISPLAY_AMMO( 1 );
    }
    sub_3404( l_U286 );
    sub_3500( ref l_U246 );
    sub_3500( ref l_U251 );
    sub_3500( ref l_U262 );
    sub_3500( ref l_U267 );
    sub_3500( ref l_U271 );
    sub_3500( ref l_U275 );
    sub_3608( g_U2918 );
    sub_3666( ref l_U287 );
    sub_3608( l_U290 );
    sub_3608( l_U296 );
    sub_3666( ref l_U291 );
    sub_3666( ref l_U297 );
    SET_ALL_VEHICLES_HIGH_LOD( 0 );
    sub_3774( ref l_U302 );
    sub_3774( ref l_U307 );
    sub_3774( ref l_U310 );
    sub_3888( ref l_U680 );
    sub_3888( ref l_U684 );
    sub_3888( ref l_U688 );
    sub_3888( ref l_U696 );
    sub_3888( ref l_U713 );
    SET_CAMERA_OVERRIDE( "", "", 0, 1, 1 );
    SET_RAIL_RELATIVE_DIR( 0, 0 );
    SET_PLAYER_COMBAT_TIMER_MODE( 0 );
    SET_HIGH_RAGDOLL_LOD_LIMIT_TO_DEFAULT();
    RESET_PED_MODEL_LOD_DISTANCES( g_U2105 );
    CAMERA_USE_HANDY_CAM( 0, 1065353216, 0 );
    if (IS_ANIMATED_CAMERA_PLAYING())
    {
        sub_432( "CCB", "Stopping animated camera!!!", 0 );
        CAMERA_ANIMATED_STOP( 3000, 0 );
    }
    STOP_SCRIPT_STREAM( 0 );
    STOP_SCRIPT_STREAM( 1 );
    STOP_SCRIPT_STREAM( 2 );
    sub_4161( ref g_U1704 );
    ENABLE_AUDIO_MISSION_FLAG( 2, 0 );
    SET_USING_ALT_HEALTH( 0 );
    HUD_SET_PLAYER_HEALTH_TEXTURE( "mp3_hud_health_airport" );
    ENABLE_HIT_DETECTION( 1 );
    ENABLE_LAST_MAN_STANDING( 1 );
    SET_INSTANT_FIRE_FORCED( 0 );
    ALLOW_BULLET_CAMERA_CHEAT( 1 );
    if (CUTSCENE_IS_LOADED( "10_03_bus" ))
    {
        sub_432( "CCB", "Unloading 10_03_bus cutscene...", 0 );
        CLEAR_NAMED_CUTSCENE( "10_03_bus" );
    }
    sub_4469( ref l_U1583 );
    sub_4469( ref l_U1773 );
    sub_4469( ref l_U1882 );
    sub_4549();
    return;
}

void sub_3404(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

void sub_3500(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_3404( (uParam0^)[I] );
    }
    return;
}

void sub_3608(unknown uParam0)
{
    if (IS_VEHICLE_DEAD( uParam0 ))
    {
        ;
    }
    if (DOES_VEHICLE_EXIST( uParam0 ))
    {
        DELETE_VEHICLE( ref uParam0 );
    }
    return;
}

void sub_3666(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_3608( (uParam0^)[I] );
    }
    return;
}

void sub_3774(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_3807( (uParam0^)[I] );
    }
    return;
}

void sub_3807(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

void sub_3888(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (DOES_CAM_EXIST( (uParam0^)[I] ))
        {
            DESTROY_CAM( (uParam0^)[I] );
        }
    }
    return;
}

void sub_4161(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        StrCopy( ref (uParam0^)[I]._fU0, "", 32 );
        (uParam0^)[I]._fU32 = 0;
        sub_4222( ref (uParam0^)[I]._fU36 );
    }
    return;
}

void sub_4222(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        (uParam0^)[I] = nil;
    }
    return;
}

void sub_4469(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        STOP_IMAGEFX( (uParam0^)[I]._fU0, 0 );
    }
    return;
}

void sub_4549()
{
    sub_432( "CCB", "P_STOP_SP_CHALLENGES", 0 );
    sub_432( "CCB", "Stopping the Bus_Depot_Railshooter context...", 0 );
    END_CONTEXT( "Bus_Depot_Railshooter" );
    return;
}

void sub_4701()
{
    if (sub_4720( g_U2099, ref g_U910 ))
    {
        sub_4817( g_U2099, ref g_U910 );
    }
    if (sub_4720( -1221193536, ref g_U910 ))
    {
        sub_4817( -1221193536, ref g_U910 );
    }
    if (sub_5220( 230339392, ref g_U1272 ))
    {
        sub_432( "CCB", "Terminating the S_BUS_VIG_16 ISS.", 0 );
        ISEQ_UNREGISTER_ENTITY( 230339392, "vig16_player" );
        ISEQ_UNREGISTER_ENTITY( 230339392, "vig16_female" );
        ISEQ_TERMINATE( 230339392 );
        sub_5527( 230339392, ref g_U1272 );
    }
    if (sub_5220( 2022386640, ref g_U1272 ))
    {
        sub_432( "CCB", "Terminating the S_BUS_MID_11 ISS.", 0 );
        ISEQ_UNREGISTER_ENTITY( 2022386640, "mid11_player" );
        ISEQ_UNREGISTER_ENTITY( 2022386640, "mid11_female" );
        ISEQ_TERMINATE( 2022386640 );
        sub_5527( 2022386640, ref g_U1272 );
    }
    if (sub_5220( -384669200, ref g_U1272 ))
    {
        sub_432( "CCB", "Terminating the S_BUS_VIG_19 ISS.", 0 );
        ISEQ_UNREGISTER_ENTITY( -384669200, "vig19_player" );
        ISEQ_UNREGISTER_ENTITY( -384669200, "vig19_female" );
        ISEQ_UNREGISTER_ENTITY( -384669200, "vig19_enemy" );
        ISEQ_TERMINATE( -384669200 );
        sub_5527( -384669200, ref g_U1272 );
    }
    if (sub_5220( 1783795551, ref g_U1272 ))
    {
        sub_432( "CCB", "Terminating the S_BUS_MID_12 ISS.", 0 );
        ISEQ_UNREGISTER_ENTITY( 1783795551, "mid12_player" );
        ISEQ_UNREGISTER_ENTITY( 1783795551, "mid12_female" );
        ISEQ_TERMINATE( 1783795551 );
        sub_5527( 1783795551, ref g_U1272 );
    }
    if (sub_5220( 123250951, ref g_U1272 ))
    {
        sub_432( "CCB", "Terminating the S_BUS_10_04 ISS.", 0 );
        ISEQ_UNREGISTER_ENTITY( 123250951, "10_04_player" );
        ISEQ_UNREGISTER_ENTITY( 123250951, "10_04_female" );
        ISEQ_TERMINATE( 123250951 );
        sub_5527( 123250951, ref g_U1272 );
    }
    if (sub_6372( g_U2330, ref g_U1474 ))
    {
        sub_432( "CCB", "Removing the gnRailshooterBusPart1 vehicle recording.", 0 );
        sub_6537( g_U2330, ref g_U1474 );
    }
    if (sub_6372( g_U2331, ref g_U1474 ))
    {
        sub_432( "CCB", "Removing the gnRailshooterBusPart2 vehicle recording.", 0 );
        sub_6537( g_U2331, ref g_U1474 );
    }
    if (sub_6372( g_U2332, ref g_U1474 ))
    {
        sub_432( "CCB", "Removing the gnRailshooterBusPart2b vehicle recording.", 0 );
        sub_6537( g_U2332, ref g_U1474 );
    }
    if (sub_6372( g_U2333, ref g_U1474 ))
    {
        sub_432( "CCB", "Removing the gnRailshooterBusPart3 vehicle recording.", 0 );
        sub_6537( g_U2333, ref g_U1474 );
    }
    if (sub_6372( g_U2333, ref g_U1474 ))
    {
        sub_432( "CCB", "Removing the gnRailshooterBusPart3 vehicle recording.", 0 );
        sub_6537( g_U2333, ref g_U1474 );
    }
    if (sub_6372( g_U2334, ref g_U1474 ))
    {
        sub_432( "CCB", "Removing the gnRailshooterBusCrash1 vehicle recording.", 0 );
        sub_6537( g_U2334, ref g_U1474 );
    }
    if (sub_6372( g_U2335, ref g_U1474 ))
    {
        sub_432( "CCB", "Removing the gnRailshooterBusCrash2 vehicle recording.", 0 );
        sub_6537( g_U2335, ref g_U1474 );
    }
    if (sub_6372( g_U2338, ref g_U1474 ))
    {
        sub_432( "CCB", "Removing the iHeliRecordingPath vehicle recording.", 0 );
        sub_6537( g_U2338, ref g_U1474 );
    }
    return;
}

int sub_4720(int iParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I]._fU4 == 3)
        {
            if ((uParam1^)[I]._fU0 == iParam0)
            {
                return 1;
            }
        }
    }
    return 0;
}

void sub_4817(int iParam0, unknown uParam1)
{
    int I;
    int iVar5;

    if (IS_MODEL_IN_CDIMAGE( iParam0 ))
    {
        for ( I = 0; I <= ((uParam1^) - 1); I++ )
        {
            if (((uParam1^)[I]._fU4 == 1) || (((uParam1^)[I]._fU4 == 2) || ((uParam1^)[I]._fU4 == 3)))
            {
                if ((uParam1^)[I]._fU0 == iParam0)
                {
                    iVar5 = sub_4929( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU8 );
                    if (iVar5 == -1)
                    {
                        (uParam1^)[I]._fU4 = 4;
                        return;
                    }
                    else
                    {
                        return;
                    }
                }
            }
        }
    }
    else
    {
        SCRIPT_ASSERT( "The asset is NOT in the image!!!", 0 );
    }
    return;
}

int sub_4929(int iParam0, unknown uParam1)
{
    int I;
    int Result;

    Result = -1;
    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I] == nil)
        {
            ;
        }
        else if ((uParam1^)[I] == iParam0)
        {
            (uParam1^)[I] = nil;
        }
        else if (IS_THREAD_ACTIVE( (uParam1^)[I] ))
        {
            Result = I;
        }
        else
        {
            (uParam1^)[I] = nil;
        };;;
    }
    if (NOT (Result == -1))
    {
        return Result;
    }
    return -1;
}

int sub_5220(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    int I;

    if (ISEQ_DOES_EXIST( iParam0 ))
    {
        for ( I = 0; I <= ((uParam1^) - 1); I++ )
        {
            if ((uParam1^)[I]._fU4 == 3)
            {
                if ((uParam1^)[I]._fU0 == iParam0)
                {
                    ISEQ_GET_NAME( 32, ref uVar4, (uParam1^)[I]._fU0 );
                    return 1;
                }
            }
        }
    }
    else
    {
        SCRIPT_ASSERT( "The eTempAssetName ISEQ is NOT valid!!!", 0 );
    }
    return 0;
}

void sub_5527(int iParam0, unknown uParam1)
{
    int I;
    int iVar5;

    if (ISEQ_DOES_EXIST( iParam0 ))
    {
        for ( I = 0; I <= ((uParam1^) - 1); I++ )
        {
            if (((uParam1^)[I]._fU4 == 1) || (((uParam1^)[I]._fU4 == 2) || ((uParam1^)[I]._fU4 == 3)))
            {
                if ((uParam1^)[I]._fU0 == iParam0)
                {
                    iVar5 = sub_4929( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU8 );
                    if (iVar5 == -1)
                    {
                        (uParam1^)[I]._fU4 = 4;
                        return;
                    }
                    else
                    {
                        return;
                    }
                }
            }
        }
    }
    else
    {
        SCRIPT_ASSERT( "The eTempAssetName ISEQ is NOT valid!!!", 0 );
    }
    return;
}

int sub_6372(int iParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I]._fU4 == 3)
        {
            if ((uParam1^)[I]._fU0 == iParam0)
            {
                return 1;
            }
        }
    }
    return 0;
}

void sub_6537(int iParam0, unknown uParam1)
{
    int I;
    int iVar5;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if (((uParam1^)[I]._fU4 == 1) || (((uParam1^)[I]._fU4 == 2) || ((uParam1^)[I]._fU4 == 3)))
        {
            if ((uParam1^)[I]._fU0 == iParam0)
            {
                iVar5 = sub_4929( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU8 );
                if (iVar5 == -1)
                {
                    (uParam1^)[I]._fU4 = 4;
                    return;
                }
                else
                {
                    return;
                }
            }
        }
    }
    return;
}

void sub_7421(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

    sub_432( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U0)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
    sub_7605( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
        sub_8682( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 = sub_8974( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
        sub_9334( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 = sub_8974( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
        sub_9334( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 = sub_8974( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
        sub_9334( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 = sub_9619( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
        sub_9334( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 = sub_9619( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
        sub_9334( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U0 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if ((sub_10112( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
    sub_10273( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING( sub_958(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U0)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U0 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
    sub_432( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

void sub_7605(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 = sub_7637( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

int sub_7637(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

void sub_8682(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

void sub_8974(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                }
            }
        }
    }
    else
    {
        sub_9290( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

void sub_9290(unknown uParam0)
{
    return;
}

void sub_9334(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

void sub_9619(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                }
            }
        }
    }
    else
    {
        sub_9290( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

int sub_10112(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

void sub_10273(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 = sub_7637( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
    sub_10345( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

void sub_10345(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

void sub_11485(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

void sub_11682()
{
    if ((l_U145 < 18) AND (l_U145 > 1))
    {
        sub_11712();
        sub_12000();
        sub_19631();
    }
    if ((l_U145 < 19) AND (l_U145 > 2))
    {
        sub_24241();
        sub_25111();
        sub_26083();
        sub_27851();
        sub_29357();
        sub_30206();
        sub_31057();
        sub_31610();
        sub_33096();
        sub_33475();
        sub_33881();
        sub_34611();
        sub_38051();
        sub_42128();
        sub_43165();
    }
    if ((l_U145 < 19) AND (l_U145 > 9))
    {
        sub_44284();
        if (l_U112)
        {
            sub_45158();
            if (((l_U733 / 6500.00000000) < 0.35000000) AND (NOT l_U114))
            {
                sub_432( "GA", "Starting Railshooter Bus engine smoking.", 0 );
                sub_44975();
                l_U114 = 1;
            }
        }
        sub_45830();
        if (l_U172 == 11)
        {
            sub_46022();
        }
        sub_48532();
    }
    switch (l_U145)
    {
        case 0:
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
            sub_432( "CCB", "Activating the Railshooter script...", 0 );
            g_U2871 = 1;
        }
        sub_51369();
        sub_55754();
        sub_56872();
        sub_432( "CCB", "eCheckpoint - STATE_CHECKPOINT_PRELOAD", 0 );
        l_U145 = 1;
        break;
        case 1:
        if (sub_59181())
        {
            if ((g_U2875[10] > 0) || (g_U763 == 10))
            {
                sub_432( "CCB", "eCheckpoint - STATE_CHECKPOINT_SETUP", 0 );
                l_U145 = 3;
            }
            else
            {
                sub_432( "CCB", "eCheckpoint - STATE_CHECKPOINT_LOAD", 0 );
                l_U145 = 2;
            }
        }
        break;
        case 2:
        if (g_U2871)
        {
            if (l_U163 > 2)
            {
                if (sub_66241())
                {
                    sub_432( "CCB", "eCheckpoint - STATE_CHECKPOINT_SETUP", 0 );
                    l_U145 = 3;
                }
            }
        }
        break;
        case 3:
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
            sub_12737();
            sub_432( "CCB", "eCheckpoint - STATE_CHECKPOINT_POSTSTREAM", 0 );
            l_U145 = 5;
        }
        else if (l_U163 >= 7)
        {
            sub_432( "CCB", "The cutscene was skipped...", 0 );
            sub_432( "CCB", "eCheckpoint - STATE_CHECKPOINT_POSTSTREAM", 0 );
            l_U145 = 5;
        }
        else
        {
            sub_432( "CCB", "eCheckpoint - STATE_CHECKPOINT_INTRO_CUTSCENE_10_03_BUS", 0 );
            l_U145 = 8;
        }
        break;
        case 5:
        if (GET_NUMBER_OF_STREAMING_REQUESTS() == 0)
        {
            if (NOT (IS_PED_DEAD( sub_958() )))
            {
                sub_432( "CCB", "eCheckpoint - STATE_CHECKPOINT_IN", 0 );
                l_U145 = 6;
            }
        }
        else
        {
            sub_432( "CCB", "Waiting for stream requests...", 0 );
        }
        break;
        case 6:
        sub_432( "CCB", "eCheckpoint - STATE_CHECKPOINT_10_03_BUS_BLENDOUT", 0 );
        l_U145 = 10;
        break;
        case 8:
        if (l_U163 >= 7)
        {
            sub_432( "CCB", "The cutscene is finished...", 0 );
            sub_432( "CCB", "eCheckpoint - STATE_CHECKPOINT_10_03_BUS_BLENDOUT", 0 );
            l_U145 = 10;
        }
        break;
        case 10:
        if (l_U164 >= 39)
        {
            sub_67185();
            l_U437._fU12 = 500;
            sub_2187( ref l_U437 );
            sub_1530( ref l_U437 );
            sub_432( "CCB", "eCheckpoint - STATE_CHECKPOINT_RAILSHOOTER_01", 0 );
            l_U145 = 11;
        }
        break;
        case 11:
        sub_71556();
        sub_72532();
        sub_77665();
        if (NOT l_U117[0])
        {
            if (l_U166 < 6)
            {
                if (l_U153 >= 3)
                {
                    if ((sub_43751( ref l_U246 )) == 0)
                    {
                        if (l_U154 >= 3)
                        {
                            if ((sub_43751( ref l_U251 )) == 0)
                            {
                                if (l_U155 >= 3)
                                {
                                    if ((sub_43751( ref l_U262 )) == 0)
                                    {
                                        l_U117[0] = 1;
                                        sub_432( "CCB", "All the RAILSHOOTER1 enemy peds were killed by the player...", 0 );
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        if (NOT l_U142)
        {
            if (sub_1650( ref l_U437 ))
            {
                l_U142 = 1;
                sub_432( "CCB", "Disabling the camera aim override...", 0 );
                CAMERA_AIM_OVERRIDE( 0 );
                RESET_FORCED_AIM_INTENTION_DIRECTION();
                RESET_FORCED_FORWARD_DIRECTION();
                if (NOT (IS_PED_DEAD( sub_958() )))
                {
                    CLEAR_PED_TASKS( sub_958() );
                    CLEAR_PED_DEFAULT_AIM( sub_958() );
                }
            }
        }
        if ((sub_34812( g_U2918, g_U2330, 5950.00000000 )) AND (NOT l_U123))
        {
            l_U123 = 1;
            sub_86674();
        }
        if ((IS_EXPLOSION_IN_SPHERE( -1, l_U1570[2], 2.00000000 )) AND (NOT l_U126))
        {
            sub_432( "GA", "Left Fuel Pump Exploded.", 0 );
            l_U126 = 1;
            sub_86674();
        }
        if ((IS_EXPLOSION_IN_SPHERE( -1, l_U1570[3], 3.00000000 )) AND (NOT l_U125))
        {
            sub_432( "GA", "Right Fuel Pump Exploded.", 0 );
            l_U125 = 1;
            sub_86674();
        }
        if ((sub_34812( g_U2918, g_U2330, 6300.00000000 )) AND (NOT l_U138))
        {
            l_U138 = 1;
            sub_87063();
        }
        if ((sub_34812( g_U2918, g_U2330, 13000.00000000 )) AND (NOT l_U139))
        {
            if (l_U155 == 3)
            {
                l_U139 = 1;
                sub_89060();
            }
        }
        if ((sub_34812( g_U2918, g_U2330, 6050.00000000 )) AND (NOT l_U124))
        {
            l_U124 = 1;
            SHAKE_GAMEPLAY_CAM( "MEDIUM_EXPLOSION_SHAKE", 0.35000000 );
            SET_PAD_SHAKE( 0, l_U473._fU12, 128 );
            sub_2187( ref l_U473 );
            sub_1530( ref l_U473 );
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                SET_VEHICLE_EXTRA( g_U2918, 4, 1 );
                SET_VEHICLE_EXTRA( g_U2918, 3, 1 );
                SET_VEHICLE_EXTRA( g_U2918, 8, 0 );
                SET_VEHICLE_EXTRA( g_U2918, 9, 1 );
            }
        }
        if (NOT l_U127)
        {
            if (HAS_SOMETHING_EXPLODED_IN_AREA( l_U1570[2], 3.00000000 ))
            {
                l_U127 = 1;
                sub_90070();
                if (NOT l_U129)
                {
                    sub_90215();
                    l_U129 = 1;
                }
            }
        }
        if (NOT l_U128)
        {
            if (HAS_SOMETHING_EXPLODED_IN_AREA( l_U1570[3], 3.00000000 ))
            {
                sub_90411();
                l_U128 = 1;
                if (NOT l_U130)
                {
                    sub_90563();
                    l_U130 = 1;
                }
            }
        }
        if (NOT l_U131)
        {
            if (DOES_VEHICLE_EXIST( g_U2918 ))
            {
                if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                {
                    if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U2918 ))
                    {
                        if (sub_34812( g_U2918, g_U2330, 9000.00000000 ))
                        {
                            l_U131 = 1;
                            sub_432( "CCB", "Adjusting the playback speed to:", 0 );
                            SET_PLAYBACK_SPEED( g_U2918, 0.41000000 );
                        }
                    }
                }
            }
        }
        if (NOT l_U132)
        {
            if (DOES_VEHICLE_EXIST( g_U2918 ))
            {
                if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                {
                    if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U2918 ))
                    {
                        if (sub_34812( g_U2918, g_U2330, 13000.00000000 ))
                        {
                            l_U132 = 1;
                            sub_432( "CCB", "Re-setting the playback speed to:", 0 );
                            SET_PLAYBACK_SPEED( g_U2918, 0.65000000 );
                        }
                    }
                }
            }
        }
        break;
        case 12:
        sub_91045();
        sub_96327();
        sub_98729();
        if (l_U117[0])
        {
            if (NOT l_U117[1])
            {
                if (l_U167 < 6)
                {
                    if (l_U156 >= 3)
                    {
                        if ((sub_43751( ref l_U267 )) == 0)
                        {
                            l_U117[1] = 1;
                            sub_432( "CCB", "All the RAILSHOOTER2A enemy peds were killed by the player...", 0 );
                        }
                    }
                }
            }
            else if (NOT l_U117[2])
            {
                if (l_U168 < 7)
                {
                    if (l_U157 >= 3)
                    {
                        if ((sub_43751( ref l_U271 )) == 0)
                        {
                            l_U117[2] = 1;
                            sub_432( "CCB", "All the RAILSHOOTER2B enemy peds were killed by the player...", 0 );
                        }
                    }
                }
            }
        }
        if ((l_U168 >= 39) || (l_U168 < 6))
        {
            if ((l_U167 >= 39) || (l_U167 < 6))
            {
                if (NOT l_U142)
                {
                    if (sub_1650( ref l_U437 ))
                    {
                        l_U142 = 1;
                        sub_432( "CCB", "Disabling the camera aim override...", 0 );
                        CAMERA_AIM_OVERRIDE( 0 );
                        RESET_FORCED_AIM_INTENTION_DIRECTION();
                        RESET_FORCED_FORWARD_DIRECTION();
                        if (NOT (IS_PED_DEAD( sub_958() )))
                        {
                            CLEAR_PED_TASKS( sub_958() );
                            CLEAR_PED_DEFAULT_AIM( sub_958() );
                        }
                    }
                }
            }
        }
        break;
        case 13:
        sub_108941();
        if ((l_U117[2]) AND ((l_U117[1]) AND (l_U117[0])))
        {
            if (NOT l_U141)
            {
                if (sub_125301( ref l_U275 ))
                {
                    l_U141 = 1;
                    sub_432( "CCB", "The bullet camera was assigned...", 0 );
                    l_U144 = 1;
                }
            }
        }
        else if (NOT l_U141)
        {
            l_U141 = 1;
            sub_432( "CCB", "No bullet cam!!! The player didn't kill all the enemies in the previous RAILSHOOTER checkpoints...", 0 );
        }
        if (NOT l_U142)
        {
            if (sub_1650( ref l_U437 ))
            {
                l_U142 = 1;
                sub_432( "CCB", "Disabling the camera aim override...", 0 );
                CAMERA_AIM_OVERRIDE( 0 );
                RESET_FORCED_AIM_INTENTION_DIRECTION();
                RESET_FORCED_FORWARD_DIRECTION();
                if (NOT (IS_PED_DEAD( sub_958() )))
                {
                    CLEAR_PED_TASKS( sub_958() );
                    CLEAR_PED_DEFAULT_AIM( sub_958() );
                }
            }
        }
        if ((sub_34812( g_U2918, g_U2333, 11500.00000000 )) AND (NOT l_U140))
        {
            sub_432( "GA", "Setting player bus to gameplay speed.", 0 );
            SET_PLAYBACK_SPEED( g_U2918, 1.25000000 );
            l_U140 = 1;
        }
        if (NOT l_U113)
        {
            if (IS_BULLET_CAMERA_ACTIVE())
            {
                sub_432( "CCB", "The Terminal bulletcam is active...", 0 );
                l_U113 = 1;
            }
        }
        break;
        case 18: break;
        case 19: break;
    }
    return;
}

void sub_11712()
{
    if (g_U764 == 9)
    {
        if ((g_U2872) || (IS_PED_DEAD( sub_958() )))
        {
            if (g_U2872)
            {
                sub_432( "CCB", "The player triggered the fail... Unloading MCE_BUSRAILSHOOTER01 script!!!", 0 );
            }
            else
            {
                sub_432( "CCB", "The player is dead... Unloading MCE_BUSRAILSHOOTER01 script!!!", 0 );
            }
            sub_11944( ref g_U765[10] );
            SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        }
    }
    return;
}

void sub_11944(int iParam0)
{
    iParam0->_fU36 = 0;
    iParam0->_fU40 = 0;
    return;
}

void sub_12000()
{
    if ((l_U163 < 7) AND (l_U163 > 3))
    {
        ;
    }
    switch (l_U163)
    {
        case 0:
        if (g_U2871)
        {
            if ((g_U2875[10] > 0) || (g_U763 == 10))
            {
                sub_432( "CCB", "e10_03_BusCutscene - STATE_CUTSCENE_COMPLETE", 0 );
                l_U163 = 7;
            }
            else if ((NOT (CUTSCENE_NAMED_IS_LOADING( "10_03_bus" ))) AND (NOT (CUTSCENE_IS_LOADED( "10_03_bus" ))))
            {
                sub_432( "CCB", "Loading the 10_03_bus cutscene...", 0 );
                PRE_STREAM_SEAMLESS_CUTSCENE( "10_03_bus" );
            }
            sub_432( "CCB", "e10_03_BusCutscene - STATE_CUTSCENE_PRELOAD", 0 );
            l_U163 = 1;;
        }
        break;
        case 1:
        if (CUTSCENE_IS_LOADED( "10_03_bus" ))
        {
            if (NOT (IS_PED_DEAD( sub_958() )))
            {
                if (NOT (IS_PED_DEAD( g_U2595 )))
                {
                    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                    {
                        if (sub_12474( "LEVEL_S_BUS_RS", ref g_U1369 ))
                        {
                            if (sub_12474( "FACE_GIOBUS", ref g_U1369 ))
                            {
                                if (sub_12605( ref g_U2008, ref g_U1535 ))
                                {
                                    if (sub_12605( ref g_U2024, ref g_U1535 ))
                                    {
                                        if (sub_6372( g_U2330, ref g_U1474 ))
                                        {
                                            sub_12737();
                                            sub_432( "CCB", "e10_03_BusCutscene - STATE_CUTSCENE_IN", 0 );
                                            l_U163 = 2;
                                        }
                                    }
                                }
                            }
                        }
                    }
                    else
                    {
                        sub_432( "CCB", "Waiting for viRailBus vehicle to be created...", 0 );
                    }
                }
                else
                {
                    sub_432( "CCB", "Waiting for piGiovanna ped to be created...", 0 );
                }
            }
        }
        else
        {
            sub_432( "CCB", "Waiting for the 10_03_bus cutscene to load...", 0 );
        }
        break;
        case 2:
        if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
        {
            sub_17259( 1, 0, 0, 1 );
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                sub_432( "CCB", "Registering the viRailBus vehicle.", 0 );
                REGISTER_VEHICLE_PRE_SEAMLESS_CUTSCENE( g_U2918, "bus_rs", 0 );
                if (NOT (IS_PED_DEAD( sub_958() )))
                {
                    FREEZE_PED_POSITION( sub_958(), 0 );
                    sub_432( "CCB", "Registering the player attachment to viRailBus vehicle.", 0 );
                    CUTSCENE_REGISTER_PED_ATTACH_TO_VEHICLE( sub_958(), g_U2918, 0, 1.30000000, 5.73400000, 1.06000000, 270.00000000, 0.00000000, 1, 0 );
                    if (GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HAND( sub_958(), 0, 0 ) ))
                    {
                        sub_432( "CCB", "Registering the player's weapon.", 0 );
                        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( sub_958(), 0, 0 ), "W_SB_M10_Aa_H", 0 );
                    }
                    else
                    {
                        sub_432( "CCB", "The player's WEAPONHAND_RIGHT weapon is NOT valid!!!", 0 );
                    }
                    if (sub_12605( ref g_U2008, ref g_U1535 ))
                    {
                        sub_432( "CCB", "Registering the action tree.", 0 );
                        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( sub_958(), "/Global/BUS_RAILSHOOTER/BUS_RAILSHOOTER_INTRO/PLAYER_INTRO_ANIM" );
                    }
                    else
                    {
                        sub_432( "CCB", "The s_bus_railshooter action tree is NOT loaded!!!", 0 );
                    }
                }
                if (NOT (IS_PED_DEAD( g_U2595 )))
                {
                    FREEZE_PED_POSITION( g_U2595, 0 );
                    sub_432( "CCB", "Registering the piGiovanna ped.", 0 );
                    REGISTER_PED_PRE_SEAMLESS_CUTSCENE( g_U2595, "Giov_Bus", 0 );
                    CUTSCENE_REGISTER_PED_TELEPORT( g_U2595, l_U751._fU0, l_U751._fU12 );
                    sub_432( "CCB", "Registering the piGiovanna ped attachment to viRailBus vehicle.", 0 );
                    CUTSCENE_REGISTER_PED_ATTACH_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1276, l_U1223, 0.00000000, 1, 0 );
                    if (sub_12605( ref g_U2024, ref g_U1535 ))
                    {
                        sub_432( "CCB", "Registering the piGiovanna ped to the action tree.", 0 );
                        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_17_OFELIABUS/EVENT_01_FUEL_DEPOT_TIMELINE/01_Driving" );
                    }
                    else
                    {
                        sub_432( "CCB", "The txtRailOfeliaBus action tree is NOT loaded!!!", 0 );
                    }
                }
            }
            if (DOES_OBJECT_EXIST( DOOR_FIND_CLOSEST( g_U2316._fU0, g_U2316._fU4 ) ))
            {
                sub_432( "CCB", "Registering the left door.", 0 );
                REGISTER_OBJECT_PRE_SEAMLESS_CUTSCENE( DOOR_FIND_CLOSEST( g_U2316._fU0, g_U2316._fU4 ), "cs_DorMet_L", 0 );
            }
            else
            {
                sub_432( "CCB", "The left door is NOT valid!!!", 0 );
            }
            if (DOES_OBJECT_EXIST( DOOR_FIND_CLOSEST( g_U2323._fU0, g_U2323._fU4 ) ))
            {
                sub_432( "CCB", "Registering the right door.", 0 );
                REGISTER_OBJECT_PRE_SEAMLESS_CUTSCENE( DOOR_FIND_CLOSEST( g_U2323._fU0, g_U2323._fU4 ), "cs_DorMet_R", 0 );
            }
            else
            {
                sub_432( "CCB", "The right door is NOT valid!!!", 0 );
            }
            REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_CRAC_SOLD_OF", 1901166384 );
            REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_CRAC_SOLD_OF^1", -1946189981 );
            REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_CRAC_SOLD_OF^2", -354890253 );
            REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_CRAC_SOLD_OF^3", -1164059530 );
            REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_CRAC_SOLD_OF^4", 187757786 );
            CUTSCENE_DISABLE_FADE_IN_GAME_AT_END( 1 );
            CUTSCENE_ENABLE_SKIP( 0 );
            START_SEAMLESS_CUTSCENE();
            if (IS_SCREEN_FADED_OUT())
            {
                sub_432( "CCB", "FADING IN!!!", 0 );
                DO_SCREEN_FADE_IN( 500 );
            }
            sub_432( "CCB", "e10_03_BusCutscene - STATE_CUTSCENE_FADEIN", 0 );
            l_U163 = 3;
        }
        else
        {
            sub_432( "CCB", "Waiting for the bullet cam to finish...", 0 );
        }
        break;
        case 3:
        if (IS_SCREEN_FADED_IN())
        {
            sub_432( "CCB", "Enabling ALLOW_BULLET_CAMERA_TO_GAMEPLAY...", 0 );
            ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
            DEACTIVATE_BULLET_TIME( 1, 0 );
            g_U2627 = 1;
            sub_432( "CCB", "e10_03_BusCutscene - STATE_CUTSCENE_IDLE", 0 );
            l_U163 = 4;
        }
        break;
        case 4:
        if (HAS_CUTSCENE_FINISHED())
        {
            sub_432( "CCB", "The cutscene is finished...", 0 );
            if (NOT (IS_PED_DEAD( g_U2595 )))
            {
                sub_432( "CCB", "Disabling gore on the piGiovanna ped.", 0 );
                SET_PED_GORE( g_U2595, 0 );
            }
            sub_432( "CCB", "e10_03_BusCutscene - STATE_CUTSCENE_COMPLETE", 0 );
            l_U163 = 7;
        }
        else
        {
            sub_432( "CCB", "Waiting for cutscene:", 0 );
        }
        break;
        case 7: break;
    }
    return;
}

int sub_12474(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I]._fU32 == 3)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[I]._fU0, uParam0 ))
            {
                return 1;
            }
        }
    }
    return 0;
}

int sub_12605(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I]._fU64 == 3)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[I]._fU0, uParam0 ))
            {
                return 1;
            }
        }
    }
    return 0;
}

void sub_12737()
{
    sub_432( "CCB", "P_SETUP_GAMEPLAY", 0 );
    sub_12778();
    sub_12935();
    sub_13643();
    sub_15135();
    sub_15511();
    SET_SILHOUETTE_ACTIVE( 0 );
    SET_INSTANT_FIRE_FORCED( 1 );
    ALLOW_BULLET_CAMERA_CHEAT( 0 );
    SET_USING_ALT_HEALTH( 1 );
    HUD_SET_PLAYER_HEALTH_TEXTURE( "mp3_hud_health_bus" );
    SET_PLAYER_ALT_HEALTH( 6500.00000000 );
    SET_PLAYER_ALT_MAX_HEALTH( 6500.00000000 );
    SET_PED_MODEL_LOD_DISTANCES( g_U2105, 10.00000000, 80.00000000 );
    if ((g_U2875[10] > 0) || (g_U763 == 10))
    {
        sub_15972();
    }
    if (NOT (IS_PLAYER_DEAD( sub_980() )))
    {
        SET_PLAYER_FORCED_AIM( sub_980(), 0, 0 );
    }
    if ((g_U2875[10] > 0) || (g_U763 == 10))
    {
        sub_432( "CCB", "Setting player combat timer mode to CTT_RAIL_SHOOTER.", 0 );
        SET_PLAYER_COMBAT_TIMER_MODE( 1 );
        sub_432( "CCB", "Setting rail relative direction to CAM_RAIL_DIRECTION_RIGHT.", 0 );
        SET_CAMERA_OVERRIDE( "RAIL_BUS_CAMERA_AIM", "RAIL_BUS_CAMERA_AIM", 0, 1, 1 );
        SET_RAIL_RELATIVE_DIR( 2, 0 );
        SET_PLAYER_COMBAT_TIMER_MODE( 1 );
    }
    sub_16634( g_U2918, g_U2330, 0.65000000, 0.00000000 );
    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
    {
        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U2918 ))
        {
            sub_432( "CCB", "Pausing the vehicle recording.", 0 );
            PAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
        }
    }
    return;
}

void sub_12778()
{
    sub_432( "CCB", "P_SETUP_WEATHER_AND_TOD", 0 );
    sub_432( "CCB", "Setting time of day to 7:00 AM. The weather is CLOUDY.", 0 );
    RELEASE_TIME_OF_DAY();
    SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
    FREEZE_TIME_OF_DAY( 7, 0 );
    return;
}

void sub_12935()
{
    sub_432( "CCB", "P_SETUP_PLAYER", 0 );
    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        if ((sub_12996( ref l_U76 )) == 0)
        {
            ;
        }
        sub_432( "CCB", "Removing all player weapons...", 0 );
        REMOVE_ALL_PED_WEAPONS( sub_958() );
        sub_432( "CCB", "Giving player specialized MAC10.", 0 );
        sub_9619( sub_958(), g_U2860, 25000, 0, 0 );
        if (GET_PAYNEKILLER_AMT() < 5)
        {
            sub_432( "CCB", "Giving the player 5 painkillers.", 0 );
            SET_PAYNEKILLER_AMT( 5 );
        }
        sub_432( "CCB", "Setting adrenaline to 0.0", 0 );
        SET_ADRENALINE_AMT( 0.00000000 );
        SET_PED_HEALTH( sub_958(), GET_PED_MAX_HEALTH( sub_958() ), 0 );
        if (NOT (IS_PLAYER_DEAD( sub_980() )))
        {
            SET_PLAYER_CAN_USE_SHOOTDODGE( sub_980(), 0 );
        }
        ENABLE_LAST_MAN_STANDING( 0 );
        ENABLE_HIT_DETECTION( 0 );
        ENABLE_PLAYERHEALTH( 1 );
        ENABLE_BULLETTIMEMETER( 1 );
        if (NOT (IS_PLAYER_DEAD( sub_980() )))
        {
            if (NOT (IS_PED_DEAD( sub_958() )))
            {
                SET_PLAYER_FORCED_AIM( sub_980(), 0, 0 );
                SET_PLAYER_CAN_CANCEL_SHOOTDODGE( 1 );
                SET_PED_CONSUMING_AMMO( sub_958(), 1 );
                DEACTIVATE_BULLET_TIME( 0, 0 );
                DEACTIVATE_BULLET_TIME( 1, 0 );
                DEACTIVATE_BULLET_TIME( 0, 1 );
                DEACTIVATE_BULLET_TIME( 1, 1 );
                SET_CAMERA_OVERRIDE( "", "", 0, 1, 1 );
            }
        }
    }
    return;
}

int sub_12996(unknown uParam0)
{
    sub_432( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U0 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U1 );
            sub_7421( uParam0, sub_958() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

void sub_13643()
{
    sub_432( "CCB", "P_SETUP_GIOVANNA", 0 );
    if (NOT (DOES_PED_EXIST( g_U2595 )))
    {
        sub_432( "CCB", "Creating the piGiovanna ped.", 0 );
        g_U2595 = sub_13749( ref l_U751 );
    }
    else
    {
        sub_432( "CCB", "The piGiovanna ped was already created!!!", 0 );
    }
    if (NOT (IS_PED_DEAD( g_U2595 )))
    {
        SET_PED_NAME_DEBUG( g_U2595, "piGiovanna" );
        sub_432( "CCB", "Setting the piGiovanna ped invincible.", 0 );
        SET_PED_INVINCIBLE( g_U2595, 1 );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( g_U2595, 1 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( g_U2595, 0 );
        SET_AI_SHOULD_ALWAYS_MISS_PED( g_U2595, 1 );
        SET_PED_CAN_BE_TARGETTED( g_U2595, 0 );
        SET_PED_HEALTH( g_U2595, GET_PED_MAX_HEALTH( g_U2595 ), 0 );
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
            sub_432( "CCB", "Resetting gore on the piGiovanna ped.", 0 );
            SET_PED_GORE( g_U2595, 1 );
            RESET_PED_GORE( g_U2595 );
        }
        else
        {
            sub_432( "CCB", "Setting up the blood and gore on the piGiovanna ped.", 0 );
            SET_PED_GORE( g_U2595, 1 );
            sub_15002( g_U2595 );
        }
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
    }
    return;
}

void sub_13749(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
        sub_13919( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
    sub_14388( iParam0->_fU40 );
    sub_14468( iParam0->_fU40 );
    return iParam0->_fU40;
}

void sub_13919(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
        sub_9290( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_14388(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

void sub_14468(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

void sub_15002(unknown uParam0)
{
    sub_432( "SP", "P_SETUP_GIO_BLOOD_DECALS", 0 );
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        BLOOD_DECAL_ON_PED_BONE( uParam0, 0.00000000, 0.10000000, 0.00000000, 3229, 7 );
    }
    return;
}

void sub_15135()
{
    sub_432( "CCB", "P_SPAWN_RAIL_BUS", 0 );
    if (NOT (DOES_VEHICLE_EXIST( g_U2918 )))
    {
        g_U2918 = sub_15219( 1572429640, l_U1263[0], l_U1218[0], 0, 0, 0 );
    }
    else
    {
        sub_432( "CCB", "The viRailBus vehicle was already created.", 0 );
    }
    return;
}

void sub_15219(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, int iParam5, unknown uParam6, unknown uParam7)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a vehicle with MUST BE PRELOADED!!!!", 0 );
        sub_13919( uParam0, 1 );
    }
    Result = CREATE_VEHICLE( uParam0, uParam1, uParam4, uParam6, uParam7 );
    if (iParam5 == 1)
    {
        while ((DOES_VEHICLE_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    if (DOES_VEHICLE_EXIST( Result ))
    {
        SET_PETROLTANK_BURN_RATE( Result, 125.00000000 );
    }
    return Result;
}

void sub_15511()
{
    sub_432( "CCB", "P_SETUP_RAIL_BUS start", 0 );
    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
    {
        sub_432( "CCB", "Configuring the bus setup...", 0 );
        SET_VEHICLE_ON_GROUND_PROPERLY( g_U2918 );
        SET_VEHICLE_ENGINE_ON( g_U2918, 1, 0 );
        ENABLE_AUDIO_MISSION_FLAG( 2, 1 );
        SET_VEHICLE_AS_MISSION_VEHICLE( g_U2918 );
        SET_VEHICLE_EXTRA( g_U2918, 2, 1 );
        SET_VEHICLE_EXTRA( g_U2918, 6, 1 );
        SET_VEHICLE_EXTRA( g_U2918, 7, 0 );
        SET_VEHICLE_EXTRA( g_U2918, 4, 0 );
        SET_VEHICLE_EXTRA( g_U2918, 3, 1 );
        SET_VEHICLE_EXTRA( g_U2918, 8, 1 );
        SET_VEHICLE_EXTRA( g_U2918, 9, 1 );
        SET_VEHICLE_LIGHTS( g_U2918, 1 );
    }
    else
    {
        sub_432( "CCB", "The viRailBus vehicle is NOT valid!!!", 0 );
    }
    return;
}

void sub_15972()
{
    sub_432( "CCB", "P_SETUP_RAIL_BUS_ATTACH", 0 );
    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        if (NOT (IS_PED_DEAD( g_U2595 )))
        {
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                sub_432( "CCB", "Unfreezing the player's position.", 0 );
                FREEZE_PED_POSITION( sub_958(), 0 );
                sub_432( "CCB", "Attaching the player.", 0 );
                DETACH_PED( sub_958(), 1 );
                ATTACH_PED_TO_VEHICLE( sub_958(), g_U2918, 0, l_U1273, l_U1222, 0.00000000, 1, 0, 0, 1 );
                SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                sub_432( "CCB", "Attaching Gio.", 0 );
                DETACH_PED( g_U2595, 1 );
                ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1276, l_U1223, 0.00000000, 1, 0, 0, 1 );
            }
        }
    }
    return;
}

void sub_16634(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    if (NOT (IS_VEHICLE_DEAD( uParam0 )))
    {
        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( uParam0 ))
        {
            sub_432( "CCB", "Stopping the vehicle recording.", 0 );
            STOP_PLAYBACK_RECORDED_VEHICLE( uParam0 );
        }
        if (HAS_VEHICLE_RECORDING_BEEN_LOADED( uParam1 ))
        {
            sub_432( "CCB", "Starting the vehicle recording.", 0 );
            START_PLAYBACK_RECORDED_VEHICLE( uParam0, uParam1 );
            SET_PLAYBACK_SPEED( uParam0, uParam2 );
            SKIP_TIME_IN_PLAYBACK_RECORDED_VEHICLE( uParam0, uParam3 );
        }
        else
        {
            SCRIPT_ASSERT( "The vehicle recording is NOT loaded!!!", 0 );
        }
    }
    return;
}

void sub_17259(int iParam0, int iParam1, unknown uParam2, boolean bParam3)
{
    END_POSTFX_BLENDER( 12, 0 );
    if (bParam3)
    {
        STOP_ALL_IMAGEFX( 0 );
    }
    SET_WIDESCREEN_BORDERS( 1, 500 );
    DISPLAY_HUD( 0 );
    if (iParam0 == 1)
    {
        if (NOT (IS_PED_DEAD( sub_958() )))
        {
            SET_PLAYER_CONTROL( sub_980(), 0, uParam2 );
            SET_PED_DUCKING( sub_958(), 0 );
            if (iParam1 == 1)
            {
                CLEAR_PED_TASKS_IMMEDIATELY( sub_958() );
            }
            SET_PED_INVINCIBLE( sub_958(), 1 );
        }
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    return;
}

void sub_19631()
{
    if ((l_U164 < 38) AND (l_U164 > 3))
    {
        ;
    }
    switch (l_U164)
    {
        case 0:
        sub_1394( ref l_U437, 0, 1, 0 );
        sub_1530( ref l_U437 );
        sub_432( "CCB", "e10_03_BusBlendOut - STATE_MIDSCENE_PRELOAD", 0 );
        l_U164 = 1;
        break;
        case 1:
        if (l_U163 >= 3)
        {
            if (IS_ANIMATED_CAMERA_PLAYING())
            {
                sub_432( "CCB", "Stopping animated camera!!!", 0 );
                CAMERA_ANIMATED_STOP( 3000, 0 );
            }
            sub_432( "CCB", "e10_03_BusBlendOut - STATE_MIDSCENE_START", 0 );
            l_U164 = 2;
        }
        break;
        case 2:
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
            if (l_U145 >= 6)
            {
                if (l_U153 >= 3)
                {
                    sub_17259( 1, 0, 0, 1 );
                    if (NOT (IS_PED_DEAD( g_U2595 )))
                    {
                        sub_15002( g_U2595 );
                        sub_432( "CCB", "Disabling gore on the piGiovanna ped.", 0 );
                        SET_PED_GORE( g_U2595, 0 );
                        if (sub_12605( ref g_U2024, ref g_U1535 ))
                        {
                            sub_432( "CCB", "Setting the animation node for Gio to EVENT_01_FUEL_DEPOT_TIMELINE/01_Driving.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_17_OFELIABUS/EVENT_01_FUEL_DEPOT_TIMELINE/01_Driving" );
                        }
                        else
                        {
                            sub_432( "CCB", "The txtRailOfeliaBus action tree is NOT loaded!!!", 0 );
                        }
                    }
                    if (NOT (IS_PED_DEAD( sub_958() )))
                    {
                        if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                        {
                            sub_432( "CCB", "Attaching the player.", 0 );
                            DETACH_PED( sub_958(), 1 );
                            ATTACH_PED_TO_VEHICLE( sub_958(), g_U2918, 0, l_U1273, l_U1222, 0.00000000, 1, 0, 0, 1 );
                            SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                        }
                        if (sub_12605( ref g_U2008, ref g_U1535 ))
                        {
                            sub_432( "CCB", "Setting the animation node for the player to PLAYER_INTRO_ANIM.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( sub_958(), "/Global/BUS_RAILSHOOTER/BUS_RAILSHOOTER_INTRO/PLAYER_INTRO_ANIM" );
                        }
                        else
                        {
                            sub_432( "CCB", "The s_bus_railshooter action tree is NOT loaded!!!", 0 );
                        }
                    }
                    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                    {
                        CAMERA_PLAY_ANIMATED_ATTACHED_VEHICLE_RELATIVE( "LEVEL_S_BUS_RS", "10_03_BUS_BLEND_OUT_CAM", g_U2918, 0, 0 );
                    }
                    sub_20854();
                    sub_16634( g_U2918, g_U2330, 0.65000000, 0.00000000 );
                    sub_432( "CCB", "Playing SBUS_RS_A script stream...", 0 );
                    sub_21801( "SBUS_RS_A", ref g_U1704 );
                    if ((IS_SCREEN_FADED_OUT()) || (IS_DEATH_PANEL_WIPE_ALLOWED()))
                    {
                        sub_432( "CCB", "FADING IN!!!", 0 );
                        sub_432( "CCB", "FADING IN - DEATH PANEL WIPE ALLOWED!!!", 0 );
                        START_PANEL_WIPE( 300, 6 );
                        DO_SCREEN_FADE_IN( 250 );
                    }
                    l_U446._fU12 = 2580;
                    sub_2187( ref l_U446 );
                    sub_1530( ref l_U446 );
                    sub_432( "CCB", "e10_03_BusBlendOut - STATE_MIDSCENE_FADEIN", 0 );
                    l_U164 = 4;
                }
                else
                {
                    sub_432( "CCB", "Waiting for peds to finish spawning...", 0 );
                }
            }
            else
            {
                sub_432( "CCB", "Waiting for setup to finish...", 0 );
            }
        }
        else if (HAS_CUTSCENE_FINISHED())
        {
            if (l_U145 >= 6)
            {
                if (l_U153 >= 3)
                {
                    sub_17259( 1, 0, 0, 1 );
                    if (NOT (IS_PED_DEAD( sub_958() )))
                    {
                        PED_FINISH_ACTION_INTENTION( sub_958(), 47 );
                    }
                    if (NOT (IS_PED_DEAD( sub_958() )))
                    {
                        sub_432( "CCB", "Attaching the player.", 0 );
                        SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                    }
                    sub_20854();
                    sub_16634( g_U2918, g_U2330, 0.65000000, 0.00000000 );
                    sub_432( "CCB", "Playing SBUS_RS_A script stream...", 0 );
                    sub_21801( "SBUS_RS_A", ref g_U1704 );
                    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                    {
                        CAMERA_PLAY_ANIMATED_ATTACHED_VEHICLE_RELATIVE( "LEVEL_S_BUS_RS", "10_03_BUS_BLEND_OUT_CAM", g_U2918, 0, 0 );
                    }
                    if (IS_SCREEN_FADED_OUT())
                    {
                        sub_432( "CCB", "FADING IN!!!", 0 );
                        DO_SCREEN_FADE_IN( 500 );
                    }
                    l_U446._fU12 = 2579;
                    sub_2187( ref l_U446 );
                    sub_1530( ref l_U446 );
                    sub_432( "CCB", "e10_03_BusBlendOut - STATE_MIDSCENE_FADEIN", 0 );
                    l_U164 = 4;
                }
                else
                {
                    sub_432( "CCB", "Waiting for peds to finish spawning...", 0 );
                }
            }
            else
            {
                sub_432( "CCB", "Waiting for setup to finish...", 0 );
            }
        }
        break;
        case 4:
        if (IS_SCREEN_FADED_IN())
        {
            sub_432( "CCB", "The animated camera length is:", 0 );
            sub_432( "CCB", "Setting rail relative direction to CAM_RAIL_DIRECTION_RIGHT.", 0 );
            SET_CAMERA_OVERRIDE( "RAIL_BUS_CAMERA_AIM", "RAIL_BUS_CAMERA_AIM", 0, 1, 1 );
            SET_RAIL_RELATIVE_DIR( 2, 0 );
            SET_PLAYER_COMBAT_TIMER_MODE( 1 );
            if (NOT (IS_PED_DEAD( sub_958() )))
            {
                SET_PLAYER_FORCED_AIM( sub_980(), 1, 1 );
                SET_PED_DEFAULT_AIM_AT_COORD( sub_958(), -51.30000000, 132.29000000, 1.14000000 );
                TASK_AIM_GUN_AT_COORD( sub_958(), -51.30000000, 132.29000000, 1.14000000, -1, 1 );
            }
            sub_432( "CCB", "e10_03_BusBlendOut - STATE_MIDSCENE_01", 0 );
            l_U164 = 6;
        }
        break;
        case 6:
        if (sub_1650( ref l_U446 ))
        {
            sub_432( "CCB", "Enabling the camera aim override...", 0 );
            CAMERA_AIM_OVERRIDE( 1 );
            SET_FORCED_AIM_INTENTION_DIRECTION( 0.65707700, 0.75369800, -0.01373400 );
            SET_FORCED_FORWARD_DIRECTION( 0.82878000, -0.55957500, 0.00000000 );
            sub_432( "CCB", "e10_03_BusBlendOut - STATE_MIDSCENE_02", 0 );
            l_U164 = 7;
        }
        else
        {
            sub_432( "CCB", "The animated camera current time:", 0 );
        }
        break;
        case 7:
        sub_432( "CCB", "The animated camera current time:", 0 );
        sub_23732();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            sub_432( "CCB", "Stopping animated camera!!!", 0 );
            CAMERA_ANIMATED_STOP( 400, 1 );
        }
        l_U446._fU12 = 400;
        sub_2187( ref l_U446 );
        sub_1530( ref l_U446 );
        sub_432( "CCB", "e10_03_BusBlendOut - STATE_MIDSCENE_03", 0 );
        l_U164 = 8;
        break;
        case 8:
        if (sub_1650( ref l_U446 ))
        {
            l_U142 = 0;
            sub_1394( ref l_U437, 150, 1, 0 );
            sub_1530( ref l_U437 );
            sub_432( "CCB", "e10_03_BusBlendOut - STATE_MIDSCENE_COMPLETE", 0 );
            l_U164 = 39;
        }
        break;
        case 39: break;
    }
    return;
}

void sub_20854()
{
    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        sub_432( "CCB", "P_START_RAIL_BUSSTART_VCPF", 0 );
        if (NOT (IS_PED_DEAD( l_U246[0] )))
        {
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 3000 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -52.00000000, 135.13000000, 0.30000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U246[0], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U246[1] )))
        {
            REGISTER_TARGET( l_U246[1], sub_958() );
            SET_LOCKED_TARGET( l_U246[1], sub_958() );
            SET_PED_FORCE_KNEEL_AND_FIRE( l_U246[1], 1 );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 3900 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -52.42000000, 149.08000000, 0.30000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U246[1], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U246[2] )))
        {
            REGISTER_TARGET( l_U246[2], sub_958() );
            SET_LOCKED_TARGET( l_U246[2], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 4100 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -52.04000000, 152.11000000, 0.30000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U246[2], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U246[3] )))
        {
            REGISTER_TARGET( l_U246[3], sub_958() );
            SET_LOCKED_TARGET( l_U246[3], sub_958() );
            SET_PED_FORCE_KNEEL_AND_FIRE( l_U246[3], 1 );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 4200 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -51.50000000, 156.06000000, 0.30000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U246[3], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
    }
    return;
}

void sub_21801(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 = -1;
    if (sub_21818( uParam0, uParam1 ))
    {
        iVar4 = sub_21917( uParam0, uParam1 );
        if (NOT (iVar4 == -1))
        {
            PLAY_SCRIPT_STREAM_FRONTEND( iVar4 );
        }
        else
        {
            SCRIPT_ASSERT( "Attempting to play a SCRIPT_STREAM asset slot that is NOT valid!!!", 0 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Attempting to play a SCRIPT_STREAM asset that is NOT loaded!!!", 0 );
    }
    return;
}

int sub_21818(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I]._fU32 == 3)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[I]._fU0, uParam0 ))
            {
                return 1;
            }
        }
    }
    return 0;
}

int sub_21917(unknown uParam0, unknown uParam1)
{
    int Result;

    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
        {
            return Result;
        }
    }
    return -1;
}

void sub_23732()
{
    sub_432( "CCB", "P_START_CAMERA", 0 );
    sub_432( "CCB", "P_START_CAMERA fuel section...", 0 );
    sub_23831( 0, 0, 0, 87.00000000, -3.00000000, 0 );
    return;
}

void sub_23831(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, float fParam4, unknown uParam5)
{
    SET_CAM_SIDE_LEFT( uParam2 );
    if (fParam4 != -1E8)
    {
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( uParam3, 1065353216, 0 );
    }
    if (fParam4 != -1E8)
    {
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( fParam4, 1065353216, 0 );
    }
    RENDER_SCRIPT_CAMS( 0, uParam1, uParam0, uParam5 );
    return;
}

void sub_24241()
{
    switch (l_U151)
    {
        case 0:
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
            sub_24310();
            sub_432( "CCB", "eFuelVehicleSpawn - STATE_SPAWN_COMPLETE", 0 );
            l_U151 = 3;
        }
        else
        {
            l_U719 = 0;
            sub_432( "CCB", "eFuelVehicleSpawn - STATE_SPAWN_IDLE", 0 );
            l_U151 = 1;
        }
        break;
        case 1:
        if (l_U719 < 2)
        {
            sub_432( "CCB", "Spawning viRailFuelVehicles:", 0 );
            l_U287[l_U719] = sub_15219( 1572429640, l_U1563[l_U719], l_U1260[l_U719], 0, 0, 0 );
            sub_24426( ref l_U287, l_U719 );
            l_U719++;
        }
        else
        {
            sub_432( "CCB", "eFuelVehicleSpawn - STATE_SPAWN_COMPLETE", 0 );
            l_U151 = 3;
        }
        break;
        case 3: break;
    }
    return;
}

void sub_24310()
{
    int I;

    sub_432( "CCB", "P_SPAWN_RAIL_FUEL_VEHICLES", 0 );
    for ( I = 0; I <= (l_U287 - 1); I++ )
    {
        l_U287[I] = sub_15219( 1572429640, l_U1563[I], l_U1260[I], 0, 0, 0 );
        sub_24426( ref l_U287, I );
    }
    return;
}

void sub_24426(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_VEHICLE_DEAD( (uParam0^)[uParam1] )))
    {
        SET_VEHICLE_ON_GROUND_PROPERLY( (uParam0^)[uParam1] );
        SET_VEHICLE_FREEZE_AFTER_BLOWING_UP( (uParam0^)[uParam1], 1 );
        SET_VEHICLE_CAN_BE_DAMAGED( (uParam0^)[uParam1], 1 );
        SET_VEHICLE_CAN_BE_VISIBLY_DAMAGED( (uParam0^)[uParam1], 1 );
        SET_VEHICLE_PROOFS( (uParam0^)[uParam1], 0, 1, 1, 0, 0 );
        SET_VEHICLE_ENGINE_HEALTH( (uParam0^)[uParam1], 600.00000000 );
        SET_VEHICLE_PETROL_TANK_HEALTH( (uParam0^)[uParam1], 600.00000000 );
        SET_VEHICLE_EXTRA( (uParam0^)[uParam1], 1, 0 );
        SET_VEHICLE_EXTRA( (uParam0^)[uParam1], 2, 0 );
        SET_VEHICLE_EXTRA( (uParam0^)[uParam1], 3, 0 );
        SET_VEHICLE_EXTRA( (uParam0^)[uParam1], 5, 0 );
        SET_VEHICLE_EXTRA( (uParam0^)[uParam1], 6, 1 );
        SET_VEHICLE_EXTRA( (uParam0^)[uParam1], 7, 0 );
        SET_VEHICLE_EXTRA( (uParam0^)[uParam1], 8, 1 );
        SET_VEHICLE_EXTRA( (uParam0^)[uParam1], 9, 1 );
        SET_VEHICLE_DIRT_LEVEL( (uParam0^)[uParam1], 4.00000000 );
        SET_VEHICLE_LIGHTS( (uParam0^)[uParam1], 1 );
    }
    return;
}

void sub_25111()
{
    switch (l_U152)
    {
        case 0:
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
            sub_25180();
            sub_432( "CCB", "eFuelPropSpawn - STATE_SPAWN_COMPLETE", 0 );
            l_U152 = 3;
        }
        else if (l_U151 == 3)
        {
            l_U720 = 0;
            sub_432( "CCB", "eFuelPropSpawn - STATE_SPAWN_IDLE", 0 );
            l_U152 = 1;
        }
        break;
        case 1:
        if (l_U720 < 4)
        {
            sub_432( "CCB", "Spawning oiFuelProp:", 0 );
            l_U302[l_U720] = sub_25283( l_U182[l_U720], l_U1570[l_U720], 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
            if (DOES_OBJECT_EXIST( l_U302[l_U720] ))
            {
                FREEZE_OBJECT_POSITION( l_U302[l_U720], 1 );
                if (l_U720 >= 2)
                {
                    SET_OBJECT_ONLY_DAMAGED_BY_PLAYER( l_U302[l_U720], 1 );
                    SET_OBJECT_TARGETTABLE( l_U302[l_U720], 1 );
                }
            }
            l_U720++;
        }
        else
        {
            sub_432( "CCB", "eFuelPropSpawn - STATE_SPAWN_COMPLETE", 0 );
            l_U152 = 3;
        }
        break;
        case 3: break;
    }
    return;
}

void sub_25180()
{
    int I;

    sub_432( "CCB", "P_SPAWN_RAIL_FUEL_PROPS", 0 );
    for ( I = 0; I <= (l_U302 - 1); I++ )
    {
        l_U302[I] = sub_25283( l_U182[I], l_U1570[I], 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
        if (DOES_OBJECT_EXIST( l_U302[I] ))
        {
            FREEZE_OBJECT_POSITION( l_U302[I], 1 );
            if (I >= 2)
            {
                SET_OBJECT_ONLY_DAMAGED_BY_PLAYER( l_U302[I], 1 );
                SET_OBJECT_TARGETTABLE( l_U302[I], 1 );
                SET_OBJECT_PROOFS( l_U302[I], 1, 1, 1, 1, 1 );
                SET_OBJECT_INVINCIBLE( l_U302[I], 1 );
            }
        }
    }
    return;
}

void sub_25283(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
        sub_13919( uParam0, 1 );
    }
    Result = CREATE_OBJECT_NO_OFFSET( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

void sub_26083()
{
    switch (l_U153)
    {
        case 0:
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
            sub_26160();
            sub_432( "CCB", "eBusStartSpawn - STATE_SPAWN_COMPLETE", 0 );
            l_U153 = 3;
        }
        else if (l_U152 == 3)
        {
            l_U721 = 0;
            sub_432( "CCB", "eBusStartSpawn - STATE_SPAWN_IDLE", 0 );
            l_U153 = 1;
        }
        break;
        case 1:
        if (l_U721 < 4)
        {
            sub_432( "CCB", "Spawning piRailVCPFBusStart_:", 0 );
            l_U246[l_U721] = sub_13749( ref l_U764[l_U721] );
            sub_26251( ref l_U246, l_U721 );
            l_U721++;
        }
        else
        {
            sub_432( "CCB", "eBusStartSpawn - STATE_SPAWN_SETUP", 0 );
            l_U153 = 2;
        }
        break;
        case 2:
        sub_27328( ref l_U246, "piRailVCPFBusStart" );
        sub_432( "CCB", "eBusStartSpawn - STATE_SPAWN_COMPLETE", 0 );
        l_U153 = 3;
        break;
        case 3: break;
    }
    return;
}

void sub_26160()
{
    int I;

    sub_432( "CCB", "P_SPAWN_RAIL_BUSSTART_VCPF", 0 );
    for ( I = 0; I <= 3; I++ )
    {
        l_U246[I] = sub_13749( ref l_U764[I] );
        sub_26251( ref l_U246, I );
    }
    sub_27328( ref l_U246, "piRailVCPFBusStart" );
    return;
}

void sub_26251(unknown uParam0, int iParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^)[iParam1] )))
    {
        if (iParam1 == 0)
        {
            sub_432( "CCB", "Setting up aigRailVCPFBusStart AI group.", 0 );
            sub_26355( ref l_U204, 1056964608, 0 );
        }
        sub_26538( (uParam0^)[iParam1], ref l_U204 );
        sub_26813( ref (uParam0^)[iParam1], ref g_U2080, 10, 30 );
        if (iParam1 == 0)
        {
            sub_9619( (uParam0^)[iParam1], g_U2856, 25000, 0, 0 );
            SET_PED_COMPONENT_VARIATION( (uParam0^)[iParam1], 2, 0, 0, 0 );
        }
        else if (iParam1 == 1)
        {
            sub_9619( (uParam0^)[iParam1], g_U2856, 25000, 0, 0 );
        }
        else if (iParam1 == 2)
        {
            sub_9619( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        }
        else if (iParam1 == 3)
        {
            sub_9619( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
            SET_PED_COMPONENT_VARIATION( (uParam0^)[iParam1], 2, 0, 0, 0 );
        };;;;
        if (iParam1 == 0)
        {
            SET_PED_ALERTNESS( (uParam0^)[iParam1], 1 );
            SET_PED_EMOTION_STATE( (uParam0^)[iParam1], 1 );
        }
        else
        {
            SET_PED_ALERTNESS( (uParam0^)[iParam1], 3 );
            SET_PED_EMOTION_STATE( (uParam0^)[iParam1], 1 );
        }
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^)[iParam1], 1 );
        SET_PED_ACCURACY( (uParam0^)[iParam1], 31186664 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 256, 0 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 1, 0 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^)[iParam1], 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^)[iParam1], 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^)[iParam1], 1 );
        TASK_STAND_STILL( (uParam0^)[iParam1], -1 );
    }
    return;
}

void sub_26355(int iParam0, unknown uParam1, boolean bParam2)
{
    iParam0->_fU4 = uParam1;
    iParam0->_fU0 = CREATE_GROUP( 3, 1 );
    if (bParam2)
    {
        while (NOT (DOES_GROUP_EXIST( iParam0->_fU0 )))
        {
            WAIT( 0 );
        }
    }
    SET_GROUP_RATIO_FIRING_AT_VISIBLE( iParam0->_fU0, iParam0->_fU4 );
    SET_GROUP_RATIO_FIRING_AT_INVISIBLE( iParam0->_fU0, iParam0->_fU4 );
    if (iParam0->_fU8)
    {
        SET_GROUP_FORMATION( iParam0->_fU0, iParam0->_fU12 );
        SET_GROUP_FORMATION_SPACING( iParam0->_fU0, iParam0->_fU16 );
        SET_GROUP_FORMATION_MAX_MOVE_SPEED( iParam0->_fU0, iParam0->_fU20 );
    }
    return;
}

void sub_26538(unknown uParam0, int iParam1)
{
    int iVar4;
    unknown uVar5;

    if ((DOES_GROUP_EXIST( iParam1->_fU0 )) == 0)
    {
        sub_9290( "[SP]### Warning!!! Group does not exist. Creating new group specified attributes. ###" );
        if (iParam1->_fU4 > 0)
        {
            sub_26355( iParam1, iParam1->_fU4, 0 );
        }
        else
        {
            sub_26355( iParam1, 1056964608, 0 );
        }
    }
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        GET_GROUP_SIZE( iParam1->_fU0, ref iVar4, ref uVar5 );
        if (iVar4 == 0)
        {
            SET_PED_AS_GROUP_LEADER( uParam0, iParam1->_fU0 );
        }
        else
        {
            SET_PED_AS_GROUP_MEMBER( uParam0, iParam1->_fU0 );
        }
        SET_PED_NEVER_LEAVES_GROUP( uParam0, 1 );
    }
    return;
}

void sub_26813(unknown uParam0, unknown uParam1, float fParam2, float fParam3)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        SET_PED_AI_TEMPLATE( (uParam0^), uParam1 );
        if (fParam2 > -1)
        {
            SET_PED_COMBAT_RANGE_MIN( (uParam0^), fParam2 );
        }
        if (fParam3 > -1)
        {
            SET_PED_COMBAT_RANGE_MAX( (uParam0^), fParam3 );
        }
    }
    return;
}

void sub_27328(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

void sub_27851()
{
    switch (l_U154)
    {
        case 0:
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
            sub_27928();
            sub_432( "CCB", "eFuelSpawn - STATE_SPAWN_COMPLETE", 0 );
            l_U154 = 3;
        }
        else if (l_U153 == 3)
        {
            l_U722 = 0;
            sub_432( "CCB", "eFuelSpawn - STATE_SPAWN_IDLE", 0 );
            l_U154 = 1;
        }
        break;
        case 1:
        if (l_U722 < 10)
        {
            sub_432( "CCB", "Spawning piRailVCPFFuel_:", 0 );
            l_U251[l_U722] = sub_13749( ref l_U817[l_U722] );
            sub_28015( ref l_U251, l_U722 );
            l_U722++;
        }
        else
        {
            sub_432( "CCB", "eFuelSpawn - STATE_SPAWN_SETUP", 0 );
            l_U154 = 2;
        }
        break;
        case 2:
        sub_27328( ref l_U251, "piRailVCPFFuel" );
        sub_432( "CCB", "eFuelSpawn - STATE_SPAWN_COMPLETE", 0 );
        l_U154 = 3;
        break;
        case 3: break;
    }
    return;
}

void sub_27928()
{
    int I;

    sub_432( "CCB", "P_SPAWN_RAIL_FUEL_VCPF", 0 );
    for ( I = 0; I <= 9; I++ )
    {
        l_U251[I] = sub_13749( ref l_U817[I] );
        sub_28015( ref l_U251, I );
    }
    sub_27328( ref l_U251, "piRailVCPFFuel" );
    return;
}

void sub_28015(unknown uParam0, int iParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^)[iParam1] )))
    {
        if (iParam1 == 0)
        {
            sub_432( "CCB", "Setting up aigRailVCPFFuel AI group.", 0 );
            sub_26355( ref l_U210, 0.25000000, 0 );
        }
        sub_26538( (uParam0^)[iParam1], ref l_U210 );
        sub_26813( ref (uParam0^)[iParam1], ref g_U2072, 6.00000000, 65.00000000 );
        sub_28173( ref l_U1212, (uParam0^)[iParam1], 3 );
        sub_28256( ref l_U1216, (uParam0^)[iParam1], 5 );
        sub_28256( ref l_U1217, (uParam0^)[iParam1], 5 );
        if (iParam1 == 0)
        {
            sub_9619( (uParam0^)[iParam1], g_U2855, 25000, 0, 0 );
        }
        else if (iParam1 == 1)
        {
            sub_9619( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        }
        else if (iParam1 == 2)
        {
            sub_9619( (uParam0^)[iParam1], g_U2855, 25000, 0, 0 );
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 0, 1, 0, 255 );
        }
        else if (iParam1 == 3)
        {
            sub_9619( (uParam0^)[iParam1], g_U2855, 25000, 0, 0 );
        }
        else if (iParam1 == 4)
        {
            sub_9619( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        }
        else if (iParam1 == 5)
        {
            sub_9619( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 0, 0, 0, 255 );
        }
        else if (iParam1 == 6)
        {
            sub_9619( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
        }
        else if (iParam1 == 7)
        {
            sub_9619( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        }
        else if (iParam1 == 8)
        {
            sub_9619( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        }
        else if (iParam1 == 9)
        {
            sub_9619( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        };;;;;;;;;;
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^)[iParam1], 1 );
        SET_PED_EMOTION_STATE( (uParam0^)[iParam1], 1 );
        SET_PED_ALERTNESS( (uParam0^)[iParam1], 2 );
        SET_PED_ACCURACY( (uParam0^)[iParam1], 31186664 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 256, 0 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 1, 0 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^)[iParam1], 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^)[iParam1], 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^)[iParam1], 1 );
        TASK_STAND_STILL( (uParam0^)[iParam1], -1 );
    }
    return;
}

void sub_28173(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_TETHERING_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_TETHERING_OPTION( uParam1, uParam2 );
    }
    return;
}

void sub_28256(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_FLEEZONE_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_FLEEZONE_OPTION( uParam1, uParam2 );
    }
    return;
}

void sub_29357()
{
    switch (l_U156)
    {
        case 0:
        if (l_U166 >= 6)
        {
            l_U724 = 0;
            sub_432( "CCB", "eTunnelSpawn - STATE_SPAWN_IDLE", 0 );
            l_U156 = 1;
        }
        break;
        case 1:
        if (l_U724 < 3)
        {
            sub_432( "CCB", "Spawning piRailVCPFTunnel_:", 0 );
            l_U267[l_U724] = sub_13749( ref l_U1001[l_U724] );
            sub_29577( ref l_U267, l_U724 );
            l_U724++;
        }
        else
        {
            sub_432( "CCB", "eTunnelSpawn - STATE_SPAWN_SETUP", 0 );
            l_U156 = 2;
        }
        break;
        case 2:
        sub_27328( ref l_U267, "piRailVCPFTunnel" );
        sub_432( "CCB", "eTunnelSpawn - STATE_SPAWN_COMPLETE", 0 );
        l_U156 = 3;
        break;
        case 3: break;
    }
    return;
}

void sub_29577(unknown uParam0, int iParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^)[iParam1] )))
    {
        if (iParam1 == 0)
        {
            sub_432( "CCB", "Setting up aigRailVCPFTunnel AI group.", 0 );
            sub_26355( ref l_U222, 1056964608, 0 );
        }
        sub_26538( (uParam0^)[iParam1], ref l_U222 );
        sub_26813( ref (uParam0^)[iParam1], ref g_U2088, -1.00000000, -1.00000000 );
        SET_ROOM_FOR_PED_BY_NAME( (uParam0^)[iParam1], "Room_tunnel01" );
        if (iParam1 == 0)
        {
            sub_9619( (uParam0^)[iParam1], g_U2856, 25000, 0, 0 );
        }
        else if (iParam1 == 1)
        {
            sub_9619( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        }
        else if (iParam1 == 2)
        {
            sub_9619( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        };;;
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^)[iParam1], 1 );
        SET_PED_EMOTION_STATE( (uParam0^)[iParam1], 1 );
        SET_PED_ALERTNESS( (uParam0^)[iParam1], 2 );
        SET_PED_ACCURACY( (uParam0^)[iParam1], 31186664 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 256, 0 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 1, 0 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^)[iParam1], 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^)[iParam1], 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^)[iParam1], 1 );
        TASK_STAND_STILL( (uParam0^)[iParam1], -1 );
    }
    return;
}

void sub_30206()
{
    switch (l_U157)
    {
        case 0:
        if (l_U166 >= 6)
        {
            if (l_U156 >= 3)
            {
                l_U725 = 0;
                sub_432( "CCB", "eTunnelExitSpawn - STATE_SPAWN_IDLE", 0 );
                l_U157 = 1;
            }
        }
        break;
        case 1:
        if (l_U725 < 3)
        {
            sub_432( "CCB", "Spawning psRailVCPFTunnelExit:", 0 );
            l_U271[l_U725] = sub_13749( ref l_U1041[l_U725] );
            sub_30445( ref l_U271, l_U725 );
            l_U725++;
        }
        else
        {
            sub_432( "CCB", "eTunnelExitSpawn - STATE_SPAWN_SETUP", 0 );
            l_U157 = 2;
        }
        break;
        case 2:
        sub_27328( ref l_U271, "piRailVCPFTunnelExit" );
        sub_432( "CCB", "eTunnelExitSpawn - STATE_SPAWN_COMPLETE", 0 );
        l_U157 = 3;
        break;
        case 3: break;
    }
    return;
}

void sub_30445(unknown uParam0, int iParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^)[iParam1] )))
    {
        sub_26813( ref (uParam0^)[iParam1], ref g_U2088, -1.00000000, -1.00000000 );
        if (iParam1 == 0)
        {
            sub_9619( (uParam0^)[iParam1], g_U2861, 25000, 0, 0 );
            SET_PED_INVINCIBLE( (uParam0^)[iParam1], 1 );
            SET_PED_PROOFS( (uParam0^)[iParam1], 1, 1, 1, 1, 1 );
            SET_PED_CAN_RAGDOLL( (uParam0^)[iParam1], 0 );
            SET_PED_PERFECT_ACCURACY_OVERRIDE( (uParam0^)[iParam1], 1 );
        }
        else if (iParam1 == 1)
        {
            sub_9619( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
            SET_PED_COMBAT_MOVEMENT( (uParam0^)[iParam1], 0 );
        }
        else if (iParam1 == 2)
        {
            sub_9619( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
            SET_PED_COMBAT_MOVEMENT( (uParam0^)[iParam1], 0 );
        };;;
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^)[iParam1], 1 );
        SET_PED_EMOTION_STATE( (uParam0^)[iParam1], 1 );
        SET_PED_ALERTNESS( (uParam0^)[iParam1], 2 );
        SET_PED_ACCURACY( (uParam0^)[iParam1], 31186664 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 256, 0 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 1, 0 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^)[iParam1], 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^)[iParam1], 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^)[iParam1], 1 );
        TASK_STAND_STILL( (uParam0^)[iParam1], -1 );
    }
    return;
}

void sub_31057()
{
    switch (l_U159)
    {
        case 0:
        if (l_U166 >= 9)
        {
            l_U727 = 0;
            sub_432( "CCB", "eVehicleTunnelSpawn - STATE_SPAWN_IDLE", 0 );
            l_U159 = 1;
        }
        break;
        case 1:
        if (l_U727 < 4)
        {
            sub_432( "CCB", "Spawning viRailTunnelVehicles:", 0 );
            l_U291[l_U727] = sub_15219( l_U194[l_U727], l_U1279[l_U727], l_U1224[l_U727], 0, 0, 0 );
            sub_31308( ref l_U291, l_U727 );
            l_U727++;
        }
        else
        {
            sub_432( "CCB", "eVehicleTunnelSpawn - STATE_SPAWN_COMPLETE", 0 );
            l_U159 = 3;
        }
        break;
        case 3: break;
    }
    return;
}

void sub_31308(unknown uParam0, int iParam1)
{
    if (NOT (IS_VEHICLE_DEAD( (uParam0^)[iParam1] )))
    {
        SET_VEHICLE_ON_GROUND_PROPERLY( (uParam0^)[iParam1] );
        SET_VEHICLE_FREEZE_AFTER_BLOWING_UP( (uParam0^)[iParam1], 1 );
        SET_VEHICLE_CAN_BE_DAMAGED( (uParam0^)[iParam1], 1 );
        SET_VEHICLE_CAN_BE_VISIBLY_DAMAGED( (uParam0^)[iParam1], 1 );
        SET_VEHICLE_PROOFS( (uParam0^)[iParam1], 0, 1, 1, 0, 0 );
        if (iParam1 == 0)
        {
            SET_VEHICLE_DOOR_OPEN( (uParam0^)[iParam1], 5 );
        }
        else if (iParam1 == 1)
        {
            SET_VEHICLE_DOOR_OPEN( (uParam0^)[iParam1], 0 );
            SET_VEHICLE_DOOR_OPEN( (uParam0^)[iParam1], 1 );
        }
        SET_VEHICLE_DIRT_LEVEL( (uParam0^)[iParam1], 4.00000000 );
    }
    return;
}

void sub_31610()
{
    switch (l_U158)
    {
        case 0:
        if (l_U168 >= 6)
        {
            l_U726 = 0;
            sub_432( "CCB", "eTerminalSpawn - STATE_SPAWN_IDLE", 0 );
            l_U158 = 1;
        }
        break;
        case 1:
        if (l_U726 < 10)
        {
            sub_432( "CCB", "Spawning psRailVCPFTerminal:", 0 );
            l_U275[l_U726] = sub_13749( ref l_U1081[l_U726] );
            sub_31833( ref l_U275, l_U726 );
            l_U726++;
        }
        else
        {
            sub_432( "CCB", "eTerminalSpawn - STATE_SPAWN_SETUP", 0 );
            l_U158 = 2;
        }
        break;
        case 2:
        sub_27328( ref l_U275, "piRailVCPFTerminal" );
        sub_432( "CCB", "eTerminalSpawn - STATE_SPAWN_COMPLETE", 0 );
        l_U158 = 3;
        break;
        case 3: break;
    }
    return;
}

void sub_31833(unknown uParam0, int iParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^)[iParam1] )))
    {
        if (iParam1 == 0)
        {
            sub_432( "CCB", "Setting up aigRailVCPFTerminalFirst AI groups.", 0 );
            sub_26355( ref l_U228, 0.10000000, 0 );
        }
        else if (iParam1 == 4)
        {
            sub_432( "CCB", "Setting up aigRailVCPFTerminalMid AI groups.", 0 );
            sub_26355( ref l_U234, 0.10000000, 0 );
        }
        else if (iParam1 == 8)
        {
            sub_432( "CCB", "Setting up aigRailVCPFTerminalLast AI groups.", 0 );
            sub_26355( ref l_U240, 0.10000000, 0 );
        };;;
        if (iParam1 >= 8)
        {
            sub_26538( (uParam0^)[iParam1], ref l_U240 );
            sub_28173( ref l_U1215, (uParam0^)[iParam1], 1 );
        }
        else if ((iParam1 <= 7) AND (iParam1 >= 4))
        {
            sub_26538( (uParam0^)[iParam1], ref l_U234 );
            sub_28173( ref l_U1214, (uParam0^)[iParam1], 1 );
        }
        else
        {
            sub_26538( (uParam0^)[iParam1], ref l_U228 );
            sub_28173( ref l_U1213, (uParam0^)[iParam1], 1 );
        }
        if (iParam1 == 0)
        {
            sub_9619( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 0, 0, 0, 255 );
        }
        else if (iParam1 == 1)
        {
            sub_9619( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
        }
        else if (iParam1 == 2)
        {
            sub_9619( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
        }
        else if (iParam1 == 3)
        {
            sub_9619( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        }
        else if (iParam1 == 4)
        {
            sub_9619( (uParam0^)[iParam1], g_U2855, 25000, 0, 0 );
        }
        else if (iParam1 == 5)
        {
            sub_9619( (uParam0^)[iParam1], g_U2856, 25000, 0, 0 );
        }
        else if (iParam1 == 6)
        {
            sub_9619( (uParam0^)[iParam1], g_U2856, 25000, 0, 0 );
        }
        else if (iParam1 == 7)
        {
            sub_9619( (uParam0^)[iParam1], g_U2855, 25000, 0, 0 );
        }
        else if (iParam1 == 8)
        {
            sub_9619( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 0, 0, 0, 255 );
        }
        else if (iParam1 == 9)
        {
            sub_9619( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        };;;;;;;;;;
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^)[iParam1], 1 );
        if (iParam1 == 0)
        {
            SET_PED_EMOTION_STATE( (uParam0^)[iParam1], 1 );
            SET_PED_ALERTNESS( (uParam0^)[iParam1], 3 );
        }
        else
        {
            SET_PED_EMOTION_STATE( (uParam0^)[iParam1], 1 );
            SET_PED_ALERTNESS( (uParam0^)[iParam1], 2 );
        }
        SET_PED_ACCURACY( (uParam0^)[iParam1], 31186664 );
        SET_PED_SEEING_RANGE( (uParam0^)[iParam1], 150.00000000, 75 );
        SET_PED_HEARING_RANGE( (uParam0^)[iParam1], 150.00000000 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 256, 0 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 1, 0 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^)[iParam1], 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^)[iParam1], 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^)[iParam1], 1 );
        TASK_STAND_STILL( (uParam0^)[iParam1], -1 );
    }
    return;
}

void sub_33096()
{
    switch (l_U160)
    {
        case 0:
        if (l_U145 >= 12)
        {
            l_U728 = 0;
            sub_432( "CCB", "eTerminalPropSpawn - STATE_SPAWN_IDLE", 0 );
            l_U160 = 1;
        }
        break;
        case 1:
        if (l_U728 < 2)
        {
            sub_432( "CCB", "Spawning oiTerminalProp:", 0 );
            l_U307[l_U728] = sub_25283( l_U173[l_U728], l_U1501[l_U728], 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
            if (DOES_OBJECT_EXIST( l_U307[l_U728] ))
            {
                FREEZE_OBJECT_POSITION( l_U307[l_U728], 1 );
            }
            l_U728++;
        }
        else
        {
            sub_432( "CCB", "eTerminalPropSpawn - STATE_SPAWN_COMPLETE", 0 );
            l_U160 = 3;
        }
        break;
        case 3: break;
    }
    return;
}

void sub_33475()
{
    switch (l_U161)
    {
        case 0:
        if (l_U145 >= 12)
        {
            if (l_U160 >= 3)
            {
                if (l_U168 >= 13)
                {
                    l_U729 = 0;
                    sub_432( "CCB", "eEndCrashPropSpawn - STATE_SPAWN_IDLE", 0 );
                    l_U161 = 1;
                }
            }
        }
        break;
        case 1:
        if (l_U729 < 6)
        {
            sub_432( "CCB", "Spawning oiEndCrashProp:", 0 );
            l_U310[l_U729] = sub_25283( l_U187[l_U729], l_U1508[l_U729], 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
            if (DOES_OBJECT_EXIST( l_U310[l_U729] ))
            {
                FREEZE_OBJECT_POSITION( l_U310[l_U729], 1 );
            }
            l_U729++;
        }
        else
        {
            sub_432( "CCB", "eEndCrashPropSpawn - STATE_MIDSCENE_COMPLETE", 0 );
            l_U161 = 3;
        }
        break;
        case 3: break;
    }
    return;
}

void sub_33881()
{
    switch (l_U162)
    {
        case 0:
        if (l_U145 >= 12)
        {
            if (l_U161 >= 3)
            {
                if (l_U168 >= 13)
                {
                    if (sub_4720( -1221193536, ref g_U910 ))
                    {
                        l_U730 = 0;
                        sub_432( "CCB", "eParkedVehicleSpawn - STATE_SPAWN_IDLE", 0 );
                        l_U162 = 1;
                    }
                }
            }
        }
        break;
        case 1:
        if (l_U730 < 4)
        {
            sub_432( "CCB", "Spawning viRailParkedCars:", 0 );
            l_U297[l_U730] = sub_15219( l_U199[l_U730], l_U1292[l_U730], l_U1229[l_U730], 0, 0, 0 );
            sub_34171( ref l_U297, l_U730 );
            l_U730++;
        }
        else
        {
            sub_432( "CCB", "eParkedVehicleSpawn - STATE_SPAWN_COMPLETE", 0 );
            l_U162 = 3;
        }
        break;
        case 3: break;
    }
    return;
}

void sub_34171(unknown uParam0, int iParam1)
{
    if (NOT (IS_VEHICLE_DEAD( (uParam0^)[iParam1] )))
    {
        SET_VEHICLE_ON_GROUND_PROPERLY( (uParam0^)[iParam1] );
        SET_VEHICLE_FREEZE_AFTER_BLOWING_UP( (uParam0^)[iParam1], 1 );
        SET_VEHICLE_CAN_BE_DAMAGED( (uParam0^)[iParam1], 0 );
        SET_VEHICLE_CAN_BE_VISIBLY_DAMAGED( (uParam0^)[iParam1], 0 );
        SET_VEHICLE_PROOFS( (uParam0^)[iParam1], 0, 1, 1, 0, 0 );
        SET_VEHICLE_ENGINE_HEALTH( (uParam0^)[iParam1], 600.00000000 );
        SET_VEHICLE_PETROL_TANK_HEALTH( (uParam0^)[iParam1], 300.00000000 );
        SET_VEHICLE_DIRT_LEVEL( (uParam0^)[iParam1], 4.00000000 );
        if (iParam1 == 0)
        {
            SET_VEHICLE_COLOUR_COMBINATION( (uParam0^)[iParam1], 0 );
        }
        else if (iParam1 == 1)
        {
            SET_VEHICLE_COLOUR_COMBINATION( (uParam0^)[iParam1], 0 );
        }
        else if (iParam1 == 2)
        {
            SET_VEHICLE_COLOUR_COMBINATION( (uParam0^)[iParam1], 0 );
            sub_432( "CCB", "Setting vehicle extra 1...", 0 );
            SET_VEHICLE_EXTRA( (uParam0^)[iParam1], 1, 0 );
        }
        else if (iParam1 == 3)
        {
            SET_VEHICLE_COLOUR_COMBINATION( (uParam0^)[iParam1], 0 );
        };;;;
    }
    return;
}

void sub_34611()
{
    switch (l_U146)
    {
        case 0:
        if (l_U145 >= 11)
        {
            sub_432( "CCB", "eAudioStreamState - STATE_AUDIO_01", 0 );
            l_U146 = 1;
        }
        break;
        case 1:
        if (l_U172 >= 12)
        {
            if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
            {
                if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                {
                    if (NOT (sub_34812( g_U2918, g_U2331, 6700.00000000 )))
                    {
                        sub_432( "CCB", "Stopping SBUS_RS_A script stream...", 0 );
                        sub_34973( "SBUS_RS_A", ref g_U1704 );
                        sub_35141( "SBUS_RS_A", ref g_U1704 );
                        sub_35326( "SBUS_RS_D", ref g_U1704 );
                        sub_432( "CCB", "Playing SBUS_RS_B script stream...", 0 );
                        sub_21801( "SBUS_RS_B", ref g_U1704 );
                        sub_432( "CCB", "eAudioStreamState - STATE_AUDIO_02", 0 );
                        l_U146 = 2;
                    }
                    else
                    {
                        sub_432( "CCB", "Stopping SBUS_RS_A script stream...", 0 );
                        sub_34973( "SBUS_RS_A", ref g_U1704 );
                        sub_35141( "SBUS_RS_A", ref g_U1704 );
                        sub_35326( "SBUS_RS_D", ref g_U1704 );
                        sub_432( "CCB", "eAudioStreamStatei - STATE_AUDIO_02", 0 );
                        l_U146 = 2;
                    }
                }
            }
        }
        break;
        case 2:
        if (l_U168 >= 6)
        {
            sub_432( "CCB", "Stopping SBUS_RS_B script stream...", 0 );
            sub_34973( "SBUS_RS_B", ref g_U1704 );
            sub_35141( "SBUS_RS_B", ref g_U1704 );
            sub_432( "CCB", "Playing SBUS_RS_C script stream...", 0 );
            sub_21801( "SBUS_RS_C", ref g_U1704 );
            if ((sub_37078( ref g_U1704 )) == 1)
            {
                sub_432( "CCB", "The SBUS_RS_D script stream is loaded.", 0 );
            }
            else
            {
                sub_432( "CCB", "The SBUS_RS_D script stream is NOT loaded!!!", 0 );
            }
            sub_432( "CCB", "eAudioStreamState - STATE_AUDIO_03", 0 );
            l_U146 = 3;
        }
        break;
        case 3:
        if (l_U169 >= 5)
        {
            if (l_U113)
            {
                if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
                {
                    sub_432( "CCB", "Stopping SBUS_RS_C script stream...", 0 );
                    sub_34973( "SBUS_RS_C", ref g_U1704 );
                    sub_35141( "SBUS_RS_C", ref g_U1704 );
                    sub_21801( "SBUS_RS_D", ref g_U1704 );
                    sub_35326( "SBUS_RS_E", ref g_U1704 );
                    sub_432( "CCB", "eAudioStreamState - STATE_AUDIO_04", 0 );
                    l_U146 = 4;
                }
            }
            else if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
            {
                if (sub_34812( g_U2918, g_U2333, 28541.75000000 ))
                {
                    sub_432( "CCB", "Stopping SBUS_RS_C script stream...", 0 );
                    sub_34973( "SBUS_RS_C", ref g_U1704 );
                    sub_35141( "SBUS_RS_C", ref g_U1704 );
                    sub_21801( "SBUS_RS_D", ref g_U1704 );
                    sub_35326( "SBUS_RS_E", ref g_U1704 );
                    sub_432( "CCB", "eAudioStreamState - STATE_AUDIO_04", 0 );
                    l_U146 = 4;
                }
            }
        }
        break;
        case 4:
        if (l_U169 >= 29)
        {
            sub_432( "CCB", "Stopping SBUS_RS_D script stream...", 0 );
            sub_34973( "SBUS_RS_D", ref g_U1704 );
            sub_35141( "SBUS_RS_D", ref g_U1704 );
            sub_21801( "SBUS_RS_E", ref g_U1704 );
            sub_432( "CCB", "eAudioStreamState - STATE_AUDIO_COMPLETE", 0 );
            l_U146 = 26;
        }
        break;
        case 26: break;
    }
    return;
}

void sub_34812(unknown uParam0, int iParam1, float fParam2)
{
    int Result;

    Result = 0;
    if (NOT (IS_VEHICLE_DEAD( uParam0 )))
    {
        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( uParam0 ))
        {
            if ((GET_CURRENT_PLAYBACK_NUMBER_FOR_VEHICLE( uParam0 )) == iParam1)
            {
                if ((GET_TIME_POSITION_IN_RECORDING( uParam0 )) >= fParam2)
                {
                    Result = 1;
                }
            }
        }
    }
    return Result;
}

void sub_34973(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 = -1;
    if (sub_21818( uParam0, uParam1 ))
    {
        iVar4 = sub_21917( uParam0, uParam1 );
        if (NOT (iVar4 == -1))
        {
            STOP_SCRIPT_STREAM( iVar4 );
        }
        else
        {
            SCRIPT_ASSERT( "Attempting to stop a SCRIPT_STREAM asset slot that is NOT valid!!!", 0 );
        }
    }
    return;
}

void sub_35141(unknown uParam0, unknown uParam1)
{
    int I;
    int iVar5;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if (((uParam1^)[I]._fU32 == 1) || (((uParam1^)[I]._fU32 == 2) || ((uParam1^)[I]._fU32 == 3)))
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[I]._fU0, uParam0 ))
            {
                iVar5 = sub_4929( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU36 );
                if (iVar5 == -1)
                {
                    (uParam1^)[I]._fU32 = 4;
                    return;
                }
                else
                {
                    return;
                }
            }
        }
    }
    return;
}

void sub_35326(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 = sub_35347( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
    if (iVar4 >= 0)
    {
        StrCopy( ref (uParam1^)[iVar4]._fU0, uParam0, 32 );
        (uParam1^)[iVar4]._fU32 = 1;
        sub_35488( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
    }
    return;
}

int sub_35347(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU32 == 1)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The SCRIPT_STREAM asset is currently being requested!!!", 0 );
                sub_35488( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU32 == 2)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The SCRIPT_STREAM asset is already loading!!!", 0 );
                sub_35488( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU32 == 3)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                if (Result <= 2)
                {
                    if ((GET_SCRIPT_STREAM_STATE( uParam0, Result )) == 2)
                    {
                        sub_35488( Result, uParam1, uParam2 );
                        return -1;
                    }
                    else
                    {
                        SCRIPT_ASSERT( "The SCRIPT_STREAM asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                        StrCopy( ref (uParam1^)[Result]._fU0, "", 32 );
                        (uParam1^)[Result]._fU32 = 0;
                        sub_4222( ref (uParam1^)[Result]._fU36 );
                        return Result;
                    }
                }
                else
                {
                    sub_35488( Result, uParam1, uParam2 );
                    return -1;
                }
            }
        }
        else if ((uParam1^)[Result]._fU32 == 4)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The SCRIPT_STREAM asset is currently being removed!!!", 0 );
                sub_35488( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU32 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (Result <= 2)
        {
            if ((GET_SCRIPT_STREAM_STATE( uParam0, iVar6 )) == 2)
            {
                StrCopy( ref (uParam1^)[iVar6]._fU0, uParam0, 32 );
                (uParam1^)[iVar6]._fU32 = 3;
                sub_35488( iVar6, uParam1, uParam2 );
                return -1;
            }
            else
            {
                return iVar6;
            }
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The SCRIPT_STREAM - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_35488(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_35510( uParam2, ref (uParam1^)[uParam0]._fU36 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU36[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The SCRIPT_STREAM asset thread indices are NOT available!!!", 0 );
    }
    return;
}

int sub_35510(int iParam0, unknown uParam1)
{
    int I;
    int Result;

    Result = -1;
    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I] == nil)
        {
            Result = I;
        }
        else if (IS_THREAD_ACTIVE( (uParam1^)[I] ))
        {
            if ((uParam1^)[I] == iParam0)
            {
                (uParam1^)[I] = nil;
                Result = I;
            }
        }
        else
        {
            (uParam1^)[I] = nil;
            Result = I;
        }
    }
    if (NOT (Result == -1))
    {
        return Result;
    }
    SCRIPT_ASSERT( "There are no THREADID indices available for insert!!!", 0 );
    return -1;
}

int sub_37078(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU32 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU32 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU32 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

void sub_38051()
{
    switch (l_U147)
    {
        case 0:
        l_U455._fU12 = 0;
        sub_2187( ref l_U455 );
        sub_1530( ref l_U455 );
        sub_432( "CCB", "eSpeech - STATE_AUDIO_01", 0 );
        l_U147 = 1;
        break;
        case 1:
        if (sub_34812( g_U2918, g_U2330, 5600.00000000 ))
        {
            sub_432( "CCB", "Playing sss_RSBA speech.", 0 );
            sub_38369( ref l_U317 );
            sub_38860( "SBUS_RSBA", ref l_U317, 7, 1 );
            sub_432( "CCB", "eSpeech - STATE_AUDIO_02", 0 );
            l_U147 = 2;
        }
        break;
        case 2:
        if (NOT (sub_39696( l_U317 )))
        {
            if (sub_34812( g_U2918, g_U2330, 14250.00000000 ))
            {
                sub_432( "CCB", "Playing SBUS_RSBB speech.", 0 );
                sub_38369( ref l_U327 );
                sub_38860( "SBUS_RSBB", ref l_U327, 7, 1 );
                sub_432( "CCB", "eSpeech - STATE_AUDIO_03", 0 );
                l_U147 = 3;
            }
        }
        break;
        case 3:
        if (NOT (sub_39696( l_U327 )))
        {
            if (sub_34812( g_U2918, g_U2330, 19500.00000000 ))
            {
                sub_432( "CCB", "Playing SBUS_RSBC speech.", 0 );
                sub_38369( ref l_U337 );
                sub_38860( "SBUS_RSBC", ref l_U337, 7, 1 );
                sub_2187( ref l_U741 );
                sub_1394( ref l_U741, l_U750, 1, 0 );
                sub_1530( ref l_U741 );
                sub_432( "CCB", "eSpeech - STATE_AUDIO_04", 0 );
                l_U147 = 4;
            }
        }
        break;
        case 4:
        if (sub_1650( ref l_U741 ))
        {
            PLAY_IMAGEFX( "FLASH_WHITE", 4, 1 );
        }
        if (l_U166 >= 10)
        {
            l_U455._fU12 = 220;
            sub_2187( ref l_U455 );
            sub_1530( ref l_U455 );
            sub_432( "CCB", "eSpeech - STATE_AUDIO_05", 0 );
            l_U147 = 5;
        }
        break;
        case 5:
        if (sub_1650( ref l_U455 ))
        {
            sub_432( "CCB", "eSpeech - STATE_AUDIO_06", 0 );
            l_U147 = 6;
        }
        break;
        case 6:
        if (NOT (sub_39696( l_U337 )))
        {
            sub_432( "CCB", "Playing SBUS_RSBD speech.", 0 );
            sub_38369( ref l_U347 );
            sub_38860( "SBUS_RSBD", ref l_U347, 7, 1 );
            sub_432( "CCB", "eSpeech - STATE_AUDIO_07", 0 );
            l_U147 = 7;
        }
        break;
        case 7:
        if (l_U167 >= 8)
        {
            l_U455._fU12 = 50;
            sub_2187( ref l_U455 );
            sub_1530( ref l_U455 );
            sub_432( "CCB", "eSpeech - STATE_AUDIO_08", 0 );
            l_U147 = 8;
        }
        break;
        case 8:
        if (sub_1650( ref l_U455 ))
        {
            sub_40646( ref l_U347, 0 );
            sub_432( "CCB", "Playing SBUS_RSBE speech.", 0 );
            sub_38369( ref l_U357 );
            sub_38860( "SBUS_RSBE", ref l_U357, 7, 1 );
            sub_432( "CCB", "eSpeech - STATE_AUDIO_09", 0 );
            l_U147 = 9;
        }
        break;
        case 9:
        if (l_U168 >= 7)
        {
            if (NOT (sub_39696( l_U357 )))
            {
                sub_432( "CCB", "Playing SBUS_RSGA speech.", 0 );
                sub_38369( ref l_U397 );
                sub_38860( "SBUS_RSGA", ref l_U397, 7, 1 );
                l_U455._fU12 = 2830;
                sub_2187( ref l_U455 );
                sub_1530( ref l_U455 );
                sub_432( "CCB", "eSpeech - STATE_AUDIO_10", 0 );
                l_U147 = 10;
            }
        }
        break;
        case 10:
        if (NOT (sub_39696( l_U397 )))
        {
            if (sub_1650( ref l_U455 ))
            {
                sub_432( "CCB", "Playing SBUS_RSGD speech.", 0 );
                sub_38369( ref l_U407 );
                sub_38860( "SBUS_RSGD", ref l_U407, 7, 1 );
                sub_432( "CCB", "eSpeech - STATE_AUDIO_11", 0 );
                l_U147 = 11;
            }
        }
        break;
        case 11:
        if (l_U168 >= 10)
        {
            l_U455._fU12 = 2500;
            sub_2187( ref l_U455 );
            sub_1530( ref l_U455 );
            sub_432( "CCB", "eTerminalDialogue - STATE_AUDIO_12", 0 );
            l_U147 = 12;
        }
        break;
        case 12:
        if (NOT (sub_39696( l_U407 )))
        {
            if (sub_1650( ref l_U455 ))
            {
                sub_432( "CCB", "Playing SBUS_RSME speech.", 0 );
                sub_38369( ref l_U417 );
                sub_38860( "SBUS_RSME", ref l_U417, 7, 1 );
                sub_432( "CCB", "eTerminalDialogue - STATE_AUDIO_13", 0 );
                l_U147 = 13;
            }
        }
        break;
        case 13:
        if (l_U168 >= 12)
        {
            l_U455._fU12 = 1650;
            sub_2187( ref l_U455 );
            sub_1530( ref l_U455 );
            sub_432( "CCB", "eTerminalDialogue - STATE_AUDIO_14", 0 );
            l_U147 = 14;
        }
        break;
        case 14:
        if (NOT (sub_39696( l_U417 )))
        {
            if (sub_1650( ref l_U455 ))
            {
                sub_432( "CCB", "Playing SBUS_RSGE speech.", 0 );
                sub_38369( ref l_U427 );
                sub_38860( "SBUS_RSGE", ref l_U427, 7, 1 );
                sub_432( "CCB", "eSpeech - STATE_AUDIO_15", 0 );
                l_U147 = 15;
            }
        }
        break;
        case 15:
        if (l_U169 >= 9)
        {
            if (NOT (sub_39696( l_U427 )))
            {
                sub_432( "CCB", "Playing SBUS_RSBF speech.", 0 );
                sub_38369( ref l_U367 );
                sub_38860( "SBUS_RSBF", ref l_U367, 7, 1 );
                sub_432( "CCB", "eSpeech - STATE_AUDIO_16", 0 );
                l_U147 = 16;
            }
        }
        break;
        case 16:
        if (l_U169 >= 22)
        {
            l_U455._fU12 = 850;
            sub_2187( ref l_U455 );
            sub_1530( ref l_U455 );
            sub_432( "CCB", "eSpeech - STATE_AUDIO_17", 0 );
            l_U147 = 17;
        }
        break;
        case 17:
        if (NOT (sub_39696( l_U367 )))
        {
            if (sub_1650( ref l_U455 ))
            {
                sub_432( "CCB", "Playing SBUS_RSBG speech.", 0 );
                sub_38369( ref l_U377 );
                sub_38860( "SBUS_RSBG", ref l_U377, 7, 1 );
                sub_432( "CCB", "eSpeech - STATE_AUDIO_COMPLETE", 0 );
                l_U147 = 26;
            }
        }
        break;
        case 26: break;
    }
    return;
}

void sub_38369(unknown uParam0)
{
    sub_38381( uParam0 );
    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        sub_432( "CCB", "Adding PLAYER_PED_ID ped for script speech.", 0 );
        sub_38537( 0, sub_958(), "MAX", uParam0, 2, 0 );
    }
    if (NOT (IS_PED_DEAD( g_U2595 )))
    {
        sub_432( "CCB", "Adding piGiovanna ped for script speech.", 0 );
        sub_38537( 1, g_U2595, "GIOVANNA", uParam0, 2, 0 );
    }
    return;
}

void sub_38381(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

void sub_38537(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

void sub_38860(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return sub_38884( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

void sub_38884(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return sub_38939( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

int sub_38939(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT (sub_38974( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
    sub_39468( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

int sub_38974(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

void sub_39468(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

int sub_39696(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    if (NOT (sub_39709( uParam0 )))
    {
        return 0;
    }
    if ((g_U11[uParam0._fU4] == 2) || ((g_U11[uParam0._fU4] == 1) || (IS_SCRIPTED_CONVERSATION_ONGOING( uParam0._fU4 ))))
    {
        if (uParam0._fU8 == g_U6[uParam0._fU4])
        {
            return 1;
        }
    }
    return 0;
}

boolean sub_39709(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    int iVar12;

    if (uParam0._fU4 < 0)
    {
        return 0;
    }
    iVar12 = GET_CHECK_HASH_FROM_CONVERSATION_ID( uParam0._fU4 );
    return (uParam0._fU16 == iVar12) AND (iVar12 != 0);
}

void sub_40646(int iParam0, unknown uParam1)
{
    if (NOT (sub_39709( (iParam0^) )))
    {
        ;
    }
    else if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (iParam0->_fU8 == g_U6[iParam0->_fU4])
        {
            STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, uParam1, 0 );
        }
    }
    return;
}

void sub_42128()
{
    switch (l_U148)
    {
        case 0:
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
            sub_432( "CCB", "Suspending music...", 0 );
            AUDIO_MUSIC_SUSPEND( 0 );
        }
        l_U653._fU12 = 0;
        sub_2187( ref l_U653 );
        sub_1530( ref l_U653 );
        sub_432( "CCB", "eMusic - STATE_AUDIO_01", 0 );
        l_U148 = 1;
        break;
        case 1:
        if ((g_U2875[10] > 0) || (g_U763 == 10))
        {
            if (l_U145 >= 9)
            {
                sub_432( "CCB", "Starting BUSDEPOT_ACTION_SONG_03 music track with BUSDEPOT_03_6 mood.", 0 );
                AUDIO_MUSIC_FORCE_TRACK( "BUSDEPOT_ACTION_SONG_03", "BUSDEPOT_03_6", 0, 0, -1, -1, -1082130432, 0 );
                sub_432( "CCB", "eMusic - STATE_AUDIO_02", 0 );
                l_U148 = 2;
            }
        }
        else if (l_U145 >= 8)
        {
            if (GET_CUTSCENE_TIME_MS() >= 45800)
            {
                sub_432( "CCB", "Starting BUSDEPOT_ACTION_SONG_03 music track with BUSDEPOT_03_6 mood.", 0 );
                AUDIO_MUSIC_FORCE_TRACK( "BUSDEPOT_ACTION_SONG_03", "BUSDEPOT_03_6", "", 0.00000000, 4000, 1000, -1082130432, 0 );
                sub_432( "CCB", "eMusic - STATE_AUDIO_02", 0 );
                l_U148 = 2;
            }
            else if (HAS_CUTSCENE_FINISHED())
            {
                sub_432( "CCB", "The cutscene was skipped...", 0 );
                sub_432( "CCB", "Starting BUSDEPOT_ACTION_SONG_03 music track with BUSDEPOT_03_6  mood.", 0 );
                AUDIO_MUSIC_FORCE_TRACK( "BUSDEPOT_ACTION_SONG_03", "BUSDEPOT_03_6 ", 0, 0, -1, -1, -1082130432, 0 );
                sub_432( "CCB", "eMusic - STATE_AUDIO_02", 0 );
                l_U148 = 2;
            }
        }
        break;
        case 2:
        if (l_U145 >= 13)
        {
            if (l_U169 >= 30)
            {
                sub_432( "CCB", "Suspending music...", 0 );
                AUDIO_MUSIC_SUSPEND( 500 );
                sub_432( "CCB", "eMusic - STATE_AUDIO_COMPLETE", 0 );
                l_U148 = 26;
            }
        }
        break;
        case 26: break;
    }
    return;
}

void sub_43165()
{
    switch (l_U739)
    {
        case 0:
        sub_432( "CCB", "eNiceShooting - STATE_CHALLENGE_IDLE", 0 );
        l_U739 = 1;
        break;
        case 1:
        if ((l_U128) || (l_U127))
        {
            sub_432( "CCB", "A fuel pump has been shot...", 0 );
            SCRIPT_VAR_HASH_SET_INT( 1945554388, 1 );
            sub_432( "CCB", "eNiceShooting - STATE_CHALLENGE_COMPLETE", 0 );
            l_U739 = 2;
        }
        break;
        case 2: break;
    }
    if ((l_U172 <= 13) AND (l_U172 >= 10))
    {
        switch (l_U738)
        {
            case 0:
            sub_432( "CCB", "eBestForLast - STATE_CHALLENGE_IDLE", 0 );
            l_U738 = 1;
            break;
            case 1:
            if (IS_PED_DEAD( l_U271[0] ))
            {
                if ((NOT (IS_PED_DEAD( l_U271[2] ))) || (NOT (IS_PED_DEAD( l_U271[1] ))))
                {
                    sub_432( "CCB", "The player shot the piRailVCPFTunnelExit RPG ped before killing all other peds...", 0 );
                    sub_432( "CCB", "eBestForLast - STATE_CHALLENGE_COMPLETE", 0 );
                    l_U738 = 2;
                }
            }
            if ((sub_43751( ref l_U271 )) == 0)
            {
                sub_432( "CCB", "All the piRailVCPFTunnelExit peds are dead...", 0 );
                SCRIPT_VAR_HASH_SET_INT( 1153287169, 1 );
                sub_432( "CCB", "eBestForLast - STATE_CHALLENGE_COMPLETE", 0 );
                l_U738 = 2;
            }
            break;
            case 2: break;
        }
    }
    switch (l_U740)
    {
        case 0:
        sub_432( "CCB", "eTroubleHadCome - STATE_CHALLENGE_IDLE", 0 );
        l_U740 = 1;
        break;
        case 1:
        if (l_U158 >= 3)
        {
            if (l_U144)
            {
                if ((sub_43751( ref l_U275 )) == 0)
                {
                    sub_432( "CCB", "The player killed all the enemies...", 0 );
                    SCRIPT_VAR_HASH_SET_INT( 1889626308, 1 );
                    sub_432( "CCB", "eTroubleHadCome - STATE_CHALLENGE_COMPLETE", 0 );
                    l_U740 = 2;
                }
            }
        }
        break;
        case 2: break;
    }
    return;
}

void sub_43751(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result++;
        }
    }
    return Result;
}

void sub_44284()
{
    if (NOT l_U116)
    {
        if (sub_44305())
        {
            l_U116 = 1;
            sub_432( "CCB", "Enabling Bus Depot Railshooter Invincibility...", 0 );
            sub_44427();
            sub_44584( "Bus Invincibility ON", 3000 );
        }
    }
    else if (sub_44305())
    {
        l_U116 = 0;
        sub_432( "CCB", "Disabling Bus Depot Railshooter Invincibility...", 0 );
        if ((l_U165 >= 39) || (l_U165 < 6))
        {
            if ((l_U166 >= 39) || (l_U166 < 6))
            {
                if ((l_U167 >= 39) || (l_U167 < 6))
                {
                    if ((l_U172 >= 13) || (l_U172 < 11))
                    {
                        if ((l_U170 >= 39) || (l_U170 < 6))
                        {
                            if ((l_U168 >= 39) || (l_U168 < 6))
                            {
                                if ((l_U169 >= 39) || (l_U169 < 6))
                                {
                                    sub_44859();
                                }
                            }
                        }
                    }
                }
            }
        }
        sub_44584( "Bus Invincibility OFF", 3000 );
    }
    return;
}

int sub_44305()
{
    if ((IS_MARKETING_KEYBOARD_KEY_JUST_PRESSED( 49 )) || (IS_KEYBOARD_KEY_JUST_PRESSED( 49 )))
    {
        return 1;
    }
    return 0;
}

void sub_44427()
{
    sub_432( "CCB", "P_RAIL_BUS_DAMAGE_METER_OFF start", 0 );
    l_U112 = 0;
    if (NOT l_U116)
    {
        if (NOT (IS_PED_DEAD( sub_958() )))
        {
            SET_PED_PROOFS( sub_958(), 0, 0, 0, 0, 0 );
            SET_PED_GORE( sub_958(), 1 );
        }
    }
    return;
}

void sub_44584(unknown uParam0, unknown uParam1)
{
    PRINT_STRING_WITH_LITERAL_STRING( "STRING", uParam0, uParam1, 1 );
    return;
}

void sub_44859()
{
    if (NOT l_U116)
    {
        sub_432( "CCB", "P_RAIL_BUS_DAMAGE_METER_ON", 0 );
        l_U112 = 1;
        if (NOT (IS_PED_DEAD( sub_958() )))
        {
            SET_PED_PROOFS( sub_958(), 1, 1, 1, 1, 1 );
            SET_PED_GORE( sub_958(), 0 );
        }
        sub_44975();
    }
    return;
}

void sub_44975()
{
    float fVar2;

    sub_432( "CCB", "P_RAIL_BUS_APPLY_DAMAGE_EFFECTS", 0 );
    fVar2 = l_U733 / 6500.00000000;
    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
    {
        if (fVar2 < 0.35000000)
        {
            SET_VEHICLE_ENGINE_HEALTH( g_U2918, 100.00000000 );
        }
    }
    return;
}

void sub_45158()
{
    if ((TIMERA() - l_U717) > l_U716)
    {
        l_U733 -= (sub_45207( ref l_U246, 0, -1082130432 )) * 54.00000000;
        l_U733 -= (sub_45207( ref l_U251, 0, -1082130432 )) * 54.00000000;
        l_U733 -= (sub_45207( ref l_U262, 0, -1082130432 )) * 54.00000000;
        l_U733 -= (sub_45207( ref l_U267, 0, -1082130432 )) * 54.00000000;
        l_U733 -= (sub_45207( ref l_U271, 0, -1082130432 )) * 54.00000000;
        l_U733 -= (sub_45207( ref l_U275, 0, -1082130432 )) * 54.00000000;
        SET_PLAYER_ALT_HEALTH( l_U733 );
        l_U717 = TIMERA();
    }
    return;
}

void sub_45207(unknown uParam0, boolean bParam1, float fParam2)
{
    int iVar5;
    int Result;
    int I;
    int iVar8;

    Result = 0;
    iVar8 = (uParam0^) - 1;
    for ( I = 0; I <= iVar8; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            iVar5 = 1;
            if (bParam1)
            {
                if ((IS_SPHERE_VISIBLE( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( (uParam0^)[I] ), 1.00000000, 0 )) == 0)
                {
                    iVar5 = 0;
                }
            }
            if (fParam2 > 0.00000000)
            {
                if ((sub_45335( sub_958(), (uParam0^)[I], 1 )) > fParam2)
                {
                    iVar5 = 0;
                }
            }
            if ((iVar5) AND (IS_PED_SHOOTING( (uParam0^)[I] )))
            {
                Result++;
            }
        }
    }
    return Result;
}

void sub_45335(unknown uParam0, unknown uParam1, boolean bParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;

    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        uVar5 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
    }
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        uVar8 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    }
    if (bParam2)
    {
        return VDIST( uVar5, uVar8 );
        break;
    }
    return VDIST( uVar5._fU0, uVar5._fU4, 0, uVar8._fU0, uVar8._fU4, 0 );
}

void sub_45830()
{
    if (DOES_VEHICLE_EXIST( g_U2918 ))
    {
        if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
        {
            if (NOT l_U115)
            {
                if ((GET_VEHICLE_HEALTH( g_U2918 )) <= 1000)
                {
                    SET_VEHICLE_HEALTH( g_U2918, 3000 );
                }
                if ((GET_VEHICLE_ENGINE_HEALTH( g_U2918 )) <= 1000.00000000)
                {
                    SET_VEHICLE_ENGINE_HEALTH( g_U2918, 3000.00000000 );
                }
                if ((GET_VEHICLE_PETROL_TANK_HEALTH( g_U2918 )) <= 1000.00000000)
                {
                    SET_VEHICLE_PETROL_TANK_HEALTH( g_U2918, 3000.00000000 );
                }
            }
        }
    }
    return;
}

void sub_46022()
{
    if (l_U170 == 5)
    {
        if (NOT (IS_PED_DEAD( sub_958() )))
        {
            if (NOT (IS_PED_DEAD( l_U271[0] )))
            {
                if ((sub_34812( g_U2918, g_U2331, 8000.00000000 )) || (HAS_SOMETHING_EXPLODED_IN_AREA( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( sub_958() ), 3.00000000 )))
                {
                    SET_BULLET_CAM_PREF( sub_958(), "MISS_DEATH_FALL_01A", "", "", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
                    sub_432( "GA", "The rocket killed the player.", 0 );
                    l_U135 = 1;
                    SHAKE_CAM( l_U713[0], "LARGE_EXPLOSION_SHAKE", 0.50000000 );
                    SHAKE_CAM( l_U713[1], "LARGE_EXPLOSION_SHAKE", 0.75000000 );
                    SET_PAD_SHAKE( 0, 2500, 64 );
                    sub_46333();
                    STOP_SCRIPT_STREAM( 0 );
                    STOP_SCRIPT_STREAM( 1 );
                    STOP_SCRIPT_STREAM( 2 );
                    sub_4161( ref g_U1704 );
                    sub_432( "CCB", "Suspending music...", 0 );
                    AUDIO_MUSIC_SUSPEND( 500 );
                    START_POSTFX_BLENDER( 3 );
                    if (NOT (IS_PED_DEAD( sub_958() )))
                    {
                        DETACH_PED( sub_958(), 1 );
                    }
                    if (NOT (IS_PED_DEAD( g_U2595 )))
                    {
                        DETACH_PED( g_U2595, 1 );
                    }
                    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                    {
                        SET_VEHICLE_FREEZE_AFTER_BLOWING_UP( g_U2918, 1 );
                        STOP_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
                        EXPLODE_VEHICLE( g_U2918, 1, 0 );
                    }
                    if (NOT (IS_PED_DEAD( l_U271[0] )))
                    {
                        CLEAR_PED_TASKS( l_U271[0] );
                        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U271[0], 0 );
                    }
                    l_U635._fU12 = 750;
                    sub_2187( ref l_U635 );
                    sub_1530( ref l_U635 );
                    sub_432( "CCB", "eRocketEventFail - STATE_MIDSCENE_POST_MIDSCENE", 0 );
                    l_U170 = 36;
                }
            }
        }
    }
    switch (l_U170)
    {
        case 0:
        if ((NOT l_U135) AND (l_U134))
        {
            if (NOT l_U121)
            {
                if (NOT IS_BULLET_CAMERA_ACTIVE())
                {
                    if (sub_34812( g_U2918, g_U2331, 6700.00000000 ))
                    {
                        l_U121 = 1;
                        sub_46982( ref l_U713[0], 168.39000000, 88.81000000, 0.30000000, 4.85000000, 0.00000000, 62.70000000, 45.00000000 );
                        sub_46982( ref l_U713[1], 148.85000000, 92.58000000, 0.57000000, 10.65000000, 0.00000000, 60.44000000, 45.00000000 );
                        sub_432( "CCB", "eCheckpoint - STATE_CHECKPOINT_FAIL", 0 );
                        l_U145 = 18;
                        sub_432( "CCB", "eRocketEventFail - STATE_MIDSCENE_IN", 0 );
                        l_U170 = 3;
                    }
                }
            }
        }
        break;
        case 3:
        ENABLE_CROSSHAIR( 0 );
        SET_ALL_VEHICLES_HIGH_LOD( 1 );
        sub_17259( 1, 0, 0, 0 );
        sub_47263( ref l_U713[0] );
        ACTIVATE_BULLET_TIME( 0, 1065353216, 1 );
        l_U635._fU12 = 250;
        sub_2187( ref l_U635 );
        sub_1530( ref l_U635 );
        sub_432( "CCB", "eRocketEventFail - STATE_MIDSCENE_01", 0 );
        l_U170 = 6;
        break;
        case 6:
        if (sub_1650( ref l_U635 ))
        {
            if (NOT (IS_PED_DEAD( sub_958() )))
            {
                if (NOT (IS_PED_DEAD( l_U271[0] )))
                {
                    REGISTER_TARGET( l_U271[0], sub_958() );
                    SET_LOCKED_TARGET( l_U271[0], sub_958() );
                    sub_432( "CCB", "Tasking the rocket enemy to shoot at the player.", 0 );
                    CLEAR_PED_TASKS( l_U271[0] );
                    CLEAR_PED_TASKS_IMMEDIATELY( l_U271[0] );
                    OPEN_SEQUENCE_TASK( ref l_U736 );
                    TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
                    TASK_AIM_GUN_AT_COORD( 0, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( sub_958() ), 150, 1 );
                    TASK_SHOOT_AT_COORD( 0, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( sub_958() ), -1, 1566631136, 1, 1 );
                    CLOSE_SEQUENCE_TASK( l_U736 );
                    TASK_PERFORM_SEQUENCE( l_U271[0], l_U736 );
                    CLEAR_SEQUENCE_TASK( l_U736 );
                }
            }
            l_U635._fU12 = 250;
            sub_2187( ref l_U635 );
            sub_1530( ref l_U635 );
            sub_432( "CCB", "eRocketEventFail - STATE_MIDSCENE_02", 0 );
            l_U170 = 7;
        }
        break;
        case 7:
        if (sub_1650( ref l_U635 ))
        {
            sub_47847( ref l_U713[0], ref l_U713[1], 2200, 1, 1 );
            l_U635._fU12 = 2000;
            sub_2187( ref l_U635 );
            sub_1530( ref l_U635 );
            sub_432( "CCB", "eRocketEventFail - STATE_MIDSCENE_IDLE", 0 );
            l_U170 = 5;
        }
        break;
        case 5: break;
        case 36:
        if (sub_1650( ref l_U635 ))
        {
            sub_48021();
            if (NOT (IS_PED_DEAD( sub_958() )))
            {
                SET_PED_HEALTH( sub_958(), 0, 0 );
            }
            if (NOT (IS_PED_DEAD( g_U2595 )))
            {
                SET_PED_HEALTH( g_U2595, 0, 0 );
            }
            sub_432( "CCB", "eRocketEventFail - STATE_MIDSCENE_COMPLETE", 0 );
            l_U170 = 39;
        }
        break;
        case 39: break;
    }
    return;
}

void sub_46333()
{
    sub_432( "CCB", "P_RAIL_STOP_ROCKET_EVENT", 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    DISPLAY_HUD( 1 );
    SET_INSTANT_FIRE_FORCED( 1 );
    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        SET_PED_CONSUMING_AMMO( sub_958(), 1 );
    }
    return;
}

void sub_46982(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    (uParam0^) = CREATE_CAM_WITH_PARAMS( "DEFAULT_SCRIPTED_CAMERA", uParam1, uParam4, uParam7, 1 );
    SET_CAM_PARAMS( (uParam0^), uParam1, uParam4, uParam7, 0, 1, 1 );
    return;
}

void sub_47263(unknown uParam0)
{
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    SET_CAM_ACTIVE( (uParam0^), 1 );
    RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    return;
}

void sub_47847(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    SET_CAM_ACTIVE_WITH_INTERP( (uParam1^), (uParam0^), uParam2, uParam3, uParam4 );
    RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    return;
}

void sub_48021()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;

    sub_432( "CCB", "P_START_RAIL_ALL_ENEMIES_RUN_AT_BUS", 0 );
    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        uVar2 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( sub_958() )};
    }
    else
    {
        uVar2 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_DEAD_PED_COORDS( sub_958() )};
    }
    sub_48141( ref l_U246, uVar2 );
    sub_48141( ref l_U251, uVar2 );
    sub_48141( ref l_U262, uVar2 );
    sub_48141( ref l_U267, uVar2 );
    sub_48141( ref l_U271, uVar2 );
    sub_48141( ref l_U275, uVar2 );
    return;
}

void sub_48141(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            if (NOT (IS_PED_DEAD( sub_958() )))
            {
                TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, uParam1, sub_958(), 3, 0, 1.50000000, 2.00000000, 1, 0 );
            }
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( (uParam0^)[I], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
    }
    return;
}

void sub_48532()
{
    if ((l_U171 < 38) AND (l_U171 > 3))
    {
        ;
    }
    switch (l_U171)
    {
        case 0:
        if ((l_U165 >= 39) || (l_U165 < 6))
        {
            if ((l_U166 >= 39) || (l_U166 < 6))
            {
                if ((l_U167 >= 39) || (l_U167 < 6))
                {
                    if ((l_U172 >= 13) || (l_U172 < 11))
                    {
                        if ((l_U170 >= 39) || (l_U170 < 6))
                        {
                            if ((l_U168 >= 39) || (l_U168 < 6))
                            {
                                if ((l_U169 >= 39) || (l_U169 < 6))
                                {
                                    if (l_U733 <= 0.00000000)
                                    {
                                        if (l_U145 == 11)
                                        {
                                            l_U718 = 1;
                                        }
                                        else if (l_U145 == 12)
                                        {
                                            l_U718 = 2;
                                        }
                                        else if (l_U145 == 13)
                                        {
                                            l_U718 = 3;
                                        };;;
                                        if (l_U145 == 13)
                                        {
                                            sub_432( "CCB", "Destroying the ciEndCrashShot cameras.", 0 );
                                            sub_3888( ref l_U696 );
                                        }
                                        if (NOT (IS_PED_DEAD( l_U271[0] )))
                                        {
                                            sub_432( "CCB", "Set piRailVCPFTunnelExit_0 ped to invincible.", 0 );
                                            SET_PED_INVINCIBLE( l_U271[0], 1 );
                                            SET_PED_CAN_RAGDOLL( l_U271[0], 0 );
                                            SET_PED_AS_ONE_SHOT_KILL( l_U271[0], 0 );
                                        }
                                        sub_46982( ref l_U713[0], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                                        if (DOES_CAM_EXIST( l_U713[0] ))
                                        {
                                            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                                            {
                                                ATTACH_CAM_TO_VEHICLE( l_U713[0], g_U2918, 1.19000000, 4.07000000, 2.14000000, 1 );
                                                POINT_CAM_AT_VEHICLE( l_U713[0], g_U2918, 0.00000000, 7.81000000, 1.37000000, 1 );
                                            }
                                        }
                                        sub_17259( 1, 0, 0, 1 );
                                        sub_432( "CCB", "Disabling the HUD.", 0 );
                                        sub_44427();
                                        DISPLAY_HUD( 0 );
                                        sub_47263( ref l_U713[0] );
                                        sub_432( "CCB", "Playing SBUS_RSGD speech.", 0 );
                                        sub_38369( ref l_U387 );
                                        sub_38860( "SBUS_RSGD", ref l_U387, 7, 1 );
                                        l_U635._fU12 = 1499;
                                        sub_2187( ref l_U635 );
                                        sub_1530( ref l_U635 );
                                        sub_432( "CCB", "eCheckpoint - STATE_CHECKPOINT_FAIL", 0 );
                                        l_U145 = 18;
                                        sub_432( "CCB", "eRailshooterFail - STATE_MIDSCENE_01", 0 );
                                        l_U171 = 6;
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        break;
        case 6:
        if (sub_1650( ref l_U635 ))
        {
            if (l_U718 == 1)
            {
                if (sub_34812( g_U2918, g_U2330, 15600 ))
                {
                    if (sub_34812( g_U2918, g_U2330, 20500.00000000 ))
                    {
                        sub_432( "CCB", "The bus is inside the tunnel.", 0 );
                        sub_46982( ref l_U713[1], 15.92000000, 150.23000000, 1.85000000, -1.19000000, 0.00000000, -123.73000000, 45.00000000 );
                    }
                    else
                    {
                        sub_432( "CCB", "The bus is in fuel depot 2nd half.", 0 );
                        sub_46982( ref l_U713[1], 23.56000000, 132.39000000, 2.11000000, -3.49000000, 0.00000000, -5.88000000, 45.00000000 );
                    }
                }
                else
                {
                    sub_432( "CCB", "The bus is in fuel depot 1st half.", 0 );
                    sub_46982( ref l_U713[1], -26.04000000, 177.46000000, 2.04000000, -2.67000000, 0.00000000, -73.29000000, 45.00000000 );
                }
            }
            else if (l_U718 == 2)
            {
                if (sub_34812( g_U2918, g_U2331, 5000 ))
                {
                    sub_432( "CCB", "The bus is in tunnel second half.", 0 );
                    sub_46982( ref l_U713[1], 172.39000000, 82.28000000, 1.48000000, -2.40000000, 0.00000000, 62.81000000, 45.00000000 );
                }
                else if (sub_34812( g_U2918, g_U2332, 0 ))
                {
                    sub_432( "CCB", "The bus is in tunnel second half.", 0 );
                    sub_46982( ref l_U713[1], 172.39000000, 82.28000000, 1.48000000, -2.40000000, 0.00000000, 62.81000000, 45.00000000 );
                }
                else
                {
                    sub_432( "CCB", "The bus is in tunnel first half.", 0 );
                    sub_46982( ref l_U713[1], 121.07000000, 86.62000000, 0.02000000, -2.08000000, 0.00000000, 36.33000000, 45.00000000 );
                }
            }
            else if (l_U718 == 3)
            {
                if (sub_34812( g_U2918, g_U2333, 17000 ))
                {
                    sub_432( "CCB", "The bus is in terminal 2nd half.", 0 );
                    sub_46982( ref l_U713[1], 201.43000000, -25.68000000, 1.67000000, 1.37000000, 0.00000000, -14.55000000, 45.00000000 );
                }
                else
                {
                    sub_432( "CCB", "The bus is in terminal 1st half.", 0 );
                    sub_46982( ref l_U713[1], 200.13000000, 24.77000000, 1.74000000, -1.99000000, 0.00000000, -11.30000000, 45.00000000 );
                }
            };;;
            sub_432( "CCB", "eRailshooterFail - STATE_MIDSCENE_02", 0 );
            l_U171 = 7;
        }
        break;
        case 7:
        sub_47263( ref l_U713[1] );
        l_U635._fU12 = 750;
        sub_2187( ref l_U635 );
        sub_1530( ref l_U635 );
        sub_432( "CCB", "eRailshooterFail - STATE_MIDSCENE_03", 0 );
        l_U171 = 8;
        break;
        case 8:
        if (sub_1650( ref l_U635 ))
        {
            STOP_SCRIPT_STREAM( 0 );
            STOP_SCRIPT_STREAM( 1 );
            STOP_SCRIPT_STREAM( 2 );
            sub_4161( ref g_U1704 );
            AUDIO_MUSIC_SUSPEND( 500 );
            START_POSTFX_BLENDER( 3 );
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                SET_VEHICLE_FREEZE_AFTER_BLOWING_UP( g_U2918, 1 );
                STOP_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
                EXPLODE_VEHICLE( g_U2918, 1, 0 );
            }
            SHAKE_CAM( l_U713[1], "LARGE_EXPLOSION_SHAKE", 0.75000000 );
            SET_PAD_SHAKE( 0, 2500, 64 );
            sub_48021();
            if (NOT (IS_PED_DEAD( sub_958() )))
            {
                SET_PED_HEALTH( sub_958(), 0, 0 );
            }
            if (NOT (IS_PED_DEAD( g_U2595 )))
            {
                SET_PED_HEALTH( g_U2595, 0, 0 );
            }
            l_U635._fU12 = 2000;
            sub_2187( ref l_U635 );
            sub_1530( ref l_U635 );
            sub_432( "CCB", "eRailshooterFail - STATE_MIDSCENE_04", 0 );
            l_U171 = 9;
        }
        break;
        case 9:
        if (((IS_BULLET_CAMERA_SCENE_ACTIVE( l_U39 )) == 0) AND (sub_1650( ref l_U635 )))
        {
            sub_432( "CCB", "eRailshooterFail - STATE_MIDSCENE_POST_MIDSCENE", 0 );
            l_U171 = 36;
        }
        break;
        case 36:
        sub_432( "CCB", "eRailshooterFail - STATE_MIDSCENE_COMPLETE", 0 );
        l_U171 = 39;
        break;
        case 39: break;
    }
    return;
}

void sub_51369()
{
    sub_432( "CCB", "P_INITIALIZE_SCRIPT_DATA", 0 );
    sub_51418();
    sub_51727();
    sub_52028();
    l_U145 = 0;
    l_U149 = 0;
    l_U150 = 0;
    l_U146 = 0;
    l_U147 = 0;
    l_U148 = 0;
    l_U151 = 0;
    l_U152 = 0;
    l_U153 = 0;
    l_U154 = 0;
    l_U155 = 0;
    l_U156 = 0;
    l_U157 = 0;
    l_U158 = 0;
    l_U159 = 0;
    l_U160 = 0;
    l_U161 = 0;
    l_U162 = 0;
    l_U733 = 6500.00000000;
    g_U2874 = 0;
    l_U112 = 0;
    l_U114 = 0;
    l_U113 = 0;
    l_U115 = 0;
    l_U116 = 0;
    l_U121 = 0;
    l_U123 = 0;
    l_U125 = 0;
    l_U126 = 0;
    l_U127 = 0;
    l_U128 = 0;
    l_U129 = 0;
    l_U130 = 0;
    l_U138 = 0;
    l_U143 = 0;
    l_U139 = 0;
    l_U124 = 0;
    l_U127 = 0;
    l_U131 = 0;
    l_U132 = 0;
    l_U133 = 0;
    l_U134 = 0;
    l_U135 = 0;
    l_U140 = 0;
    l_U141 = 0;
    l_U122 = 0;
    l_U142 = 0;
    l_U136 = 0;
    l_U137 = 0;
    sub_52594( ref l_U117 );
    l_U716 = 60;
    l_U717 = 0;
    l_U723 = 0;
    l_U724 = 0;
    l_U725 = 0;
    l_U726 = 0;
    l_U719 = 0;
    l_U721 = 0;
    l_U722 = 0;
    l_U720 = 0;
    l_U727 = 0;
    l_U728 = 0;
    l_U729 = 0;
    l_U730 = 0;
    sub_1394( ref l_U455, 0, 1, 0 );
    sub_1530( ref l_U455 );
    sub_1394( ref l_U464, 1000, 1, 0 );
    sub_1394( ref l_U473, 1000, 1, 0 );
    sub_1394( ref l_U482, 750, 1, 0 );
    sub_1394( ref l_U644, 0, 1, 0 );
    sub_1530( ref l_U644 );
    l_U1263[0] = {-72.68000000, 108.64000000, 0.40000000};
    l_U1263[1] = {72.20000000, 142.99000000, -1.10000000};
    l_U1263[2] = {205.58000000, 97.00000000, 0.40000000};
    l_U1218[0] = 312.00000000;
    l_U1218[1] = 230.00000000;
    l_U1218[2] = 181.00000000;
    l_U1563[0] = {-66.60000000, 160.97000000, 0.07000000};
    l_U1260[0] = 310.00000000;
    l_U1563[1] = {-27.00000000, 171.00000000, 0.40000000};
    l_U1260[1] = 42.50000000;
    l_U1326 = {248.36000000, -2.82000000, 0.40000000};
    l_U1247 = 135.00000000;
    l_U1570[0] = {-11.87500000, 174.89200000, 0.01400000};
    l_U1570[1] = {-11.87500000, 174.89200000, 0.01400000};
    l_U1570[2] = {-7.20000000, 174.86000000, 0.30000000};
    l_U1570[3] = {-16.55000000, 174.86000000, 0.30000000};
    l_U1273 = {1.30000000, 5.73400000, 1.06000000};
    l_U1222 = 270.00000000;
    l_U1276 = {-0.80000000, 5.45000000, 1.60000000};
    l_U1223 = 0.00000000;
    l_U1323 = {118.22000000, 102.18000000, 0.72000000};
    l_U1501[0] = {178.00000000, 91.00000000, 1.00000000};
    l_U1501[1] = {196.89000000, -21.84000000, 0.00000000};
    l_U1508[0] = {192.68000000, -68.46000000, 0.00000000};
    l_U1508[1] = {192.68000000, -68.46000000, 0.00000000};
    l_U1508[2] = {197.00000000, -78.00000000, 6.00000000};
    l_U1508[3] = {187.00000000, -78.00000000, -1.00000000};
    l_U1508[4] = {197.00000000, -78.00000000, 4.00000000};
    l_U1508[5] = {194.00000000, -78.00000000, 8.00000000};
    l_U164 = 0;
    sub_1394( ref l_U437, 0, 1, 0 );
    sub_1530( ref l_U437 );
    l_U165 = 0;
    sub_1394( ref l_U518, 0, 1, 0 );
    sub_1530( ref l_U518 );
    l_U1305 = {3.00000000, 3.75000000, 1.60000000};
    l_U1308 = {-0.10000000, 7.00000000, 0.65000000};
    l_U1311 = {1.23000000, 5.57000000, 1.06000000};
    l_U1314 = {-0.84000000, 5.51000000, 1.60000000};
    l_U166 = 0;
    sub_1394( ref l_U527, 0, 1, 0 );
    sub_1530( ref l_U527 );
    sub_1394( ref l_U536, 2200, 1, 0 );
    sub_1530( ref l_U536 );
    l_U1359 = {0.39000000, 5.58000000, 1.40000000};
    l_U1234 = 0.00000000;
    l_U1335 = {1.40000000, 5.57000000, 1.08000000};
    l_U1338 = {-0.87000000, 5.54000000, 1.60000000};
    l_U1235 = -1.25000000;
    l_U1341 = {-0.87000000, 5.54000000, 1.60000000};
    l_U1236 = -1.25000000;
    l_U1344 = {-0.50000000, 3.00000000, 1.50000000};
    l_U1347 = {0.00000000, 8.00000000, 2.00000000};
    l_U1350 = {-1.70000000, 5.90000000, 1.70000000};
    l_U1353 = {5.00000000, 7.00000000, 1.00000000};
    l_U1356 = {1.70000000, 6.40000000, 1.48000000};
    l_U1320 = {0.00000000, 6.83000000, 1.96000000};
    l_U167 = 0;
    sub_1394( ref l_U554, 0, 1, 0 );
    sub_1530( ref l_U554 );
    sub_2187( ref l_U545 );
    l_U1362 = {0.30000000, 5.62000000, 1.43000000};
    l_U1237 = 0.00000000;
    l_U1365 = {-0.77000000, 5.49000000, 1.61000000};
    l_U1238 = 0.00000000;
    l_U1386 = {166.27000000, 90.50000000, 0.01000000};
    l_U1242 = 85.00000000;
    l_U1368 = {0.00000000, 12.00000000, 1.25000000};
    l_U1371 = {0.00000000, 5.00000000, 1.50000000};
    l_U1239 = 31.00000000;
    l_U1374 = {163.18000000, 90.89000000, 0.63000000};
    l_U1377 = {4.56000000, 0.00000000, -99.76000000};
    l_U1380 = {160.60000000, 88.35000000, 0.76000000};
    l_U1383 = {0.14000000, 0.00000000, -36.72000000};
    l_U1240 = 45.00000000;
    l_U1241 = 30.00000000;
    l_U731 = 3;
    l_U732 = 3;
    l_U172 = 0;
    sub_1394( ref l_U563, 700, 1, 0 );
    l_U168 = 0;
    sub_1394( ref l_U572, 0, 1, 0 );
    sub_1530( ref l_U572 );
    sub_2187( ref l_U491 );
    sub_2187( ref l_U500 );
    sub_2187( ref l_U509 );
    l_U1424 = {0.05000000, 5.63000000, 1.42000000};
    l_U1243 = 0.00000000;
    l_U1427 = {0.63000000, 5.53000000, 1.43000000};
    l_U1244 = 0.00000000;
    l_U1430 = {-0.83000000, 5.47000000, 1.60000000};
    l_U1245 = 0.00000000;
    l_U1433 = {-0.82000000, 5.49000000, 1.60000000};
    l_U1246 = 0.00000000;
    l_U1392[0] = {-0.24000000, 5.42000000, 1.69000000};
    l_U1408[0] = {-1.56000000, 6.58000000, 1.57000000};
    l_U1392[1] = {-0.24000000, 5.22000000, 1.69000000};
    l_U1408[1] = {-0.41000000, 7.26000000, 1.97000000};
    l_U1392[2] = {1.70000000, 8.70000000, 1.30000000};
    l_U1408[2] = {-5.00000000, 0.00000000, 2.00000000};
    l_U1392[3] = {0.50000000, 10.50000000, 0.75000000};
    l_U1408[3] = {0.00000000, 5.00000000, 1.75000000};
    l_U1392[4] = {1.00000000, 3.80000000, 1.50000000};
    l_U1408[4] = {-0.70000000, 6.58000000, 1.50000000};
    l_U1317 = {175.55000000, 91.14000000, 0.81000000};
    l_U734 = 0.80000000;
    l_U735 = 11000.00000000;
    l_U169 = 0;
    sub_1394( ref l_U626, 0, 1, 0 );
    sub_1530( ref l_U626 );
    sub_2187( ref l_U581 );
    sub_2187( ref l_U590 );
    sub_2187( ref l_U599 );
    sub_2187( ref l_U608 );
    sub_2187( ref l_U617 );
    l_U1527 = {1.00000000, 5.64000000, 1.44000000};
    l_U1248 = 0.00000000;
    l_U1530 = {-0.78000000, 5.45000000, 1.60000000};
    l_U1249 = 1.00000000;
    l_U1533 = {0.70000000, 5.70000000, 1.41000000};
    l_U1250 = 0.00000000;
    l_U1536 = {-0.77000000, 5.45000000, 1.60000000};
    l_U1251 = 1.00000000;
    l_U1539 = {0.40000000, 5.40000000, 1.42000000};
    l_U1252 = 90.00000000;
    l_U1542 = {-0.77000000, 5.45000000, 1.60000000};
    l_U1253 = 1.00000000;
    l_U1545 = {0.00000000, 5.76000000, 1.44000000};
    l_U1254 = 90.00000000;
    l_U1548 = {-0.74000000, 5.45000000, 1.60000000};
    l_U1255 = 1.00000000;
    l_U1551 = {-0.10000000, 5.76000000, 1.44000000};
    l_U1256 = 89.00000000;
    l_U1554 = {-0.74000000, 5.45000000, 1.60000000};
    l_U1257 = 1.00000000;
    l_U1557 = {0.40000000, 5.40000000, 1.44000000};
    l_U1258 = 90.00000000;
    l_U1560 = {-0.77000000, 5.45000000, 1.60000000};
    l_U1259 = 1.00000000;
    l_U1498 = {217.75000000, -63.57000000, 32.62000000};
    l_U1389 = {-1.65000000, 6.50000000, 1.30000000};
    l_U1329 = {192.32000000, -77.45000000, 1.07000000};
    l_U1332 = {192.68000000, -68.46000000, 0.00000000};
    l_U1436[0] = {-2.00000000, 9.00000000, 1.10000000};
    l_U1467[0] = {0.75000000, 5.18000000, 1.75000000};
    l_U1436[1] = {-0.24000000, 5.42000000, 1.69000000};
    l_U1467[1] = {-1.56000000, 6.58000000, 1.57000000};
    l_U1436[2] = {-0.32000000, 6.77000000, 1.71000000};
    l_U1467[2] = {-0.85000000, 5.18000000, 1.92000000};
    l_U1436[3] = {-0.32000000, 6.77000000, 1.71000000};
    l_U1467[3] = {1.68000000, 5.51000000, 1.16000000};
    l_U1436[4] = {0.57000000, 4.21000000, 1.49000000};
    l_U1467[4] = {0.10000000, 6.28000000, 0.72000000};
    l_U1436[5] = {0.57000000, 4.21000000, 1.49000000};
    l_U1467[5] = {0.10000000, 6.28000000, 1.59000000};
    l_U1436[6] = {-0.50000000, 6.50000000, 1.70000000};
    l_U1467[6] = {-0.75000000, 0.00000000, 1.70000000};
    l_U1436[7] = {0.04000000, 4.40000000, 1.45000000};
    l_U1467[7] = {-0.93000000, 6.79000000, 2.10000000};
    l_U1436[8] = {0.39000000, 4.40000000, 1.45000000};
    l_U1467[8] = {-0.03000000, 6.79000000, 2.10000000};
    l_U1436[9] = {0.39000000, 4.15000000, 0.89000000};
    l_U1467[9] = {0.86000000, 6.28000000, 0.87000000};
    l_U170 = 0;
    sub_1394( ref l_U635, 0, 1, 0 );
    sub_1530( ref l_U635 );
    l_U171 = 0;
    l_U718 = 0;
    return;
}

void sub_51418()
{
    sub_432( "CCB", "P_SETUP_PROP_ARRAY - Setting up the prop request array.", 0 );
    l_U176[0] = g_U2128;
    l_U176[1] = g_U2143;
    l_U176[2] = g_U2144;
    l_U176[3] = g_U2145;
    l_U176[4] = g_U2146;
    l_U182[0] = g_U2143;
    l_U182[1] = g_U2145;
    l_U182[2] = g_U2128;
    l_U182[3] = g_U2128;
    l_U173[0] = g_U2151;
    l_U173[1] = g_U2134;
    l_U187[0] = g_U2136;
    l_U187[1] = g_U2137;
    l_U187[2] = g_U2138;
    l_U187[3] = g_U2139;
    l_U187[4] = g_U2140;
    l_U187[5] = g_U2141;
    return;
}

void sub_51727()
{
    sub_432( "CCB", "P_SETUP_RAIL_TUNNEL_CAR_VARS - Setting up the vehicle request array.", 0 );
    l_U1279[0] = {179.35000000, 96.56000000, 0.80000000};
    l_U1224[0] = 327.00000000;
    l_U194[0] = -764000169;
    l_U1279[1] = {167.50000000, 83.00000000, 0.50000000};
    l_U1224[1] = 35.00000000;
    l_U194[1] = -1522400210;
    l_U1279[2] = {166.34000000, 98.78000000, 0.50000000};
    l_U1224[2] = 236.00000000;
    l_U194[2] = -1522400210;
    l_U1279[3] = {161.23400000, 81.30000000, 0.50000000};
    l_U1224[3] = 151.00000000;
    l_U194[3] = -1522400210;
    return;
}

void sub_52028()
{
    sub_432( "SP", "P_SETUP_RAIL_PARKED_CAR_VARS", 0 );
    l_U1292[0] = {186.20000000, -57.39000000, 0.50000000};
    l_U1229[0] = 275.00000000;
    l_U199[0] = -1425703854;
    l_U1292[1] = {187.00000000, -50.57000000, 0.50000000};
    l_U1229[1] = 85.00000000;
    l_U199[1] = -1522400210;
    l_U1292[2] = {199.59000000, -57.28000000, 0.50000000};
    l_U1229[2] = 70.00000000;
    l_U199[2] = -1221193536;
    l_U1292[3] = {199.69000000, -52.18000000, 0.50000000};
    l_U1229[3] = 260.00000000;
    l_U199[3] = -764000169;
    return;
}

void sub_52594(unknown uParam0)
{
    int I;

    sub_432( "CCB", "P_RESET_BOOL_ARRAY", 0 );
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        (uParam0^)[I] = 0;
    }
    return;
}

void sub_55754()
{
    sub_432( "CCB", "P_INITIALIZE_SP_CHALLENGES", 0 );
    l_U738 = 0;
    if (NOT (SCRIPT_VAR_HASH_EXISTS( 1153287169 )))
    {
        sub_432( "CCB", "Creating the BestForLast script variable...", 0 );
        SCRIPT_VAR_HASH_ADD_INT( 1153287169 );
        if (SCRIPT_VAR_HASH_EXISTS( 1153287169 ))
        {
            sub_432( "CCB", "The BestForLast script variable was successfully created...", 0 );
        }
        else
        {
            sub_432( "CCB", "The BestForLast script variable is NOT valid!!!", 0 );
        }
    }
    else
    {
        sub_432( "CCB", "The BestForLast script variable was already created...", 0 );
        SCRIPT_VAR_HASH_SET_INT( 1153287169, 0 );
    }
    l_U739 = 0;
    if (NOT (SCRIPT_VAR_HASH_EXISTS( 1945554388 )))
    {
        sub_432( "CCB", "Creating the FuelTanksExploded script variable...", 0 );
        SCRIPT_VAR_HASH_ADD_INT( 1945554388 );
        if (SCRIPT_VAR_HASH_EXISTS( 1945554388 ))
        {
            sub_432( "CCB", "The FuelTanksExploded script variable was successfully created...", 0 );
        }
        else
        {
            sub_432( "CCB", "The FuelTanksExploded script variable is NOT valid!!!", 0 );
        }
    }
    else
    {
        sub_432( "CCB", "The FuelTanksExploded script variable was already created...", 0 );
        SCRIPT_VAR_HASH_SET_INT( 1945554388, 0 );
    }
    l_U740 = 0;
    l_U144 = 0;
    if (NOT (SCRIPT_VAR_HASH_EXISTS( 1889626308 )))
    {
        sub_432( "CCB", "Creating the TroubleHadCome script variable...", 0 );
        SCRIPT_VAR_HASH_ADD_INT( 1889626308 );
        if (SCRIPT_VAR_HASH_EXISTS( 1889626308 ))
        {
            sub_432( "CCB", "The TroubleHadCome script variable was successfully created...", 0 );
        }
        else
        {
            sub_432( "CCB", "The TroubleHadCome script variable is NOT valid!!!", 0 );
        }
    }
    else
    {
        sub_432( "CCB", "The TroubleHadCome script variable was already created...", 0 );
        SCRIPT_VAR_HASH_SET_INT( 1889626308, 0 );
    }
    return;
}

void sub_56872()
{
    sub_432( "CCB", "P_SETUP_STATIC_DATA", 0 );
    sub_56952( ref l_U751, -72.72000000, 105.86000000, 0.00100000, -48.00000000, -1257669444, 5, 2, 0, 0, 1 );
    sub_56952( ref l_U764[0], -49.42000000, 135.33000000, 0.55000000, 99.00000000, -1856339173, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U764[1], -50.29000000, 156.55000000, 0.55000000, 148.43000000, 1177889556, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U764[2], -47.49000000, 154.86000000, 0.35000000, 82.01000000, -684971413, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U764[3], -45.49000000, 153.98000000, 0.35000000, 88.83000000, 1429109657, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U817[0], -18.39000000, 170.91000000, 0.10000000, 40.00000000, -1489714533, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U817[1], -17.80000000, 168.85000000, 0.30000000, 40.00000000, -1943434354, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U817[2], -14.47000000, 168.96000000, 0.10000000, 76.00000000, -366823623, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U817[3], -11.90000000, 169.55000000, 0.30000000, 37.00000000, 1901166384, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U817[4], -6.90000000, 171.02000000, 0.10000000, 56.00000000, -1946189981, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U817[5], -1.49000000, 167.60000000, 0.30000000, 90.00000000, -1856339173, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U817[6], 12.41000000, 162.79000000, 0.30000000, -25.00000000, 130503050, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U817[7], 16.35000000, 161.31000000, 0.30000000, 0.00000000, -354890253, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U817[8], 11.67000000, 160.35000000, 0.10000000, 0.00000000, -684971413, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U817[9], 16.93000000, 151.20000000, 0.10000000, 0.00000000, 1901166384, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U948[0], 24.33000000, 137.41000000, 0.27000000, 0.00000000, 335735410, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U948[1], 23.10000000, 137.33000000, 0.10000000, 0.00000000, 1900580661, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U948[2], 17.92000000, 130.81000000, 0.10000000, 0.00000000, -1489714533, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U948[3], 19.89000000, 133.08000000, 0.22000000, 0.00000000, 1177889556, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U1001[0], 98.91000000, 104.87000000, -1.62000000, -9.00000000, 1177889556, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U1001[1], 104.53000000, 94.96000000, -1.34000000, 23.00000000, 1901166384, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U1001[2], 104.14000000, 91.98000000, 0.27000000, 28.00000000, 346475646, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U1041[0], 166.27000000, 90.50000000, 0.01000000, 85.00000000, 1900580661, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U1041[1], 171.23000000, 93.33000000, 0.10000000, 76.00000000, -684971413, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U1041[2], 168.08000000, 86.85000000, 0.10000000, 64.00000000, -351725869, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U1081[0], 191.37000000, 50.03000000, 0.39000000, -64.00000000, -1943434354, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U1081[1], 198.33000000, 25.90000000, 1.52000000, -13.00000000, -1946189981, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U1081[2], 198.37000000, 19.78000000, 5.72000000, -32.00000000, 335735410, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U1081[3], 197.95000000, 16.19000000, 7.03000000, -22.00000000, -1856339173, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U1081[4], 212.58000000, 21.67000000, 0.54000000, -7.00000000, -366823623, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U1081[5], 192.57000000, 18.56000000, 0.30000000, -124.00000000, 130503050, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U1081[6], 189.29000000, 13.26000000, 0.10000000, -89.00000000, 1177889556, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U1081[7], 188.16000000, 11.56000000, 0.20000000, -78.00000000, -354890253, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U1081[8], 195.63000000, -21.60000000, 0.54000000, -44.00000000, -684971413, 7, 3, 2, 0, 0 );
    sub_56952( ref l_U1081[9], 193.08000000, -23.50000000, 0.50000000, -74.00000000, -351725869, 7, 3, 2, 0, 0 );
    sub_58584( ref l_U1212, "TETHER_RAIL_FUEL", -11.64000000, 181.31000000, -0.25000000, 23.00000000, 8.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_58584( ref l_U1213, "TETHER_RAIL_TERMINAL_FIRST", 199.76000000, 41.11000000, -0.57000000, 3.25000000, 25.27000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_58584( ref l_U1214, "TETHER_RAIL_TERMINAL_MID", 199.76000000, 15.98000000, -0.57000000, 3.25000000, 19.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_58584( ref l_U1215, "TETHER_RAIL_TERMINAL_LAST", 199.76000000, -1.68000000, -0.57000000, 3.25000000, 12.80000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_58970( ref l_U1216, "RAIL_FUEL_FLEE_ZONE_LEFT", 11.67000000, 157.02000000, -0.25000000, 23.00000000, 8.00000000, 4.00000000, 0.00000000, 0.00000000, -45.00000000, 1 );
    sub_58970( ref l_U1217, "RAIL_FUEL_FLEE_ZONE_RIGHT", -32.34000000, 159.98000000, -0.25000000, 23.00000000, 8.00000000, 4.00000000, 0.00000000, 0.00000000, 45.00000000, 1 );
    return;
}

void sub_56952(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

void sub_58584(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 2, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

void sub_58970(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 3, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

int sub_59181()
{
    switch (l_U150)
    {
        case 0:
        sub_59227();
        sub_432( "CCB", "ePreLoadAsset - STATE_LOAD_LOADING", 0 );
        l_U150 = 1;
        break;
        case 1:
        if (sub_64995( ref g_U910, ref g_U1211, ref g_U1272, ref g_U1369, ref g_U1474, ref g_U1535, ref g_U1704, ref g_U1757 ))
        {
            sub_15135();
            sub_432( "CCB", "ePreLoadAsset - STATE_LOAD_COMPLETE", 0 );
            l_U150 = 11;
        }
        break;
        case 11:
        return 1;
        break;
    }
    return 0;
}

void sub_59227()
{
    sub_432( "CCB", "P_PRELOAD_CHECKPOINT_ASSETS", 0 );
    sub_59288( -1204387800, ref g_U910 );
    sub_59288( 1572429640, ref g_U910 );
    sub_60391( g_U2860, ref g_U1211 );
    sub_61350( "LEVEL_S_BUS_RS", ref g_U1369 );
    sub_61350( "FACE_GIOBUS", ref g_U1369 );
    sub_62356( ref g_U2008, ref g_U1535 );
    sub_62356( ref g_U2024, ref g_U1535 );
    sub_63363( g_U2330, ref g_U1474 );
    if ((g_U2875[10] > 0) || (g_U763 == 10))
    {
        sub_64360();
    }
    return;
}

void sub_59288(unknown uParam0, unknown uParam1)
{
    int iVar4;

    if (IS_MODEL_IN_CDIMAGE( uParam0 ))
    {
        iVar4 = sub_59323( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
        if (iVar4 >= 0)
        {
            (uParam1^)[iVar4]._fU0 = uParam0;
            (uParam1^)[iVar4]._fU4 = 1;
            sub_59454( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
        }
    }
    else
    {
        SCRIPT_ASSERT( "The asset is NOT in the image!!!", 0 );
    }
    return;
}

int sub_59323(int iParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU4 == 1)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The MODEL_NAME asset is currently being requested!!!", 0 );
                sub_59454( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 2)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The MODEL_NAME asset is already loading!!!", 0 );
                sub_59454( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 3)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                if (HAS_MODEL_LOADED( iParam0 ))
                {
                    sub_59454( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    SCRIPT_ASSERT( "The MODEL_NAME asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    (uParam1^)[Result]._fU0 = 0;
                    (uParam1^)[Result]._fU4 = 0;
                    sub_4222( ref (uParam1^)[Result]._fU8 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU4 == 4)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The MODEL_NAME asset is currently being removed!!!", 0 );
                sub_59454( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (HAS_MODEL_LOADED( iParam0 ))
        {
            SCRIPT_ASSERT( "The MODEL_NAME is already loaded, but the asset status flag was not set!!!", 0 );
            (uParam1^)[iVar6]._fU0 = iParam0;
            (uParam1^)[iVar6]._fU4 = 3;
            sub_59454( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The MODEL_NAMES - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_59454(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_35510( uParam2, ref (uParam1^)[uParam0]._fU8 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU8[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The MODEL_NAME asset thread indices are NOT available!!!", 0 );
    }
    return;
}

void sub_60391(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 = sub_60412( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
    if (iVar4 >= 0)
    {
        (uParam1^)[iVar4]._fU0 = uParam0;
        (uParam1^)[iVar4]._fU4 = 1;
        sub_60544( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
    }
    return;
}

int sub_60412(int iParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU4 == 1)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The WEAPON_TYPE asset is currently being requested!!!", 0 );
                sub_60544( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 2)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The WEAPON_TYPE asset is already loading!!!", 0 );
                sub_60544( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 3)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                if (HAS_WEAPON_LOADED( iParam0 ))
                {
                    sub_60544( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    SCRIPT_ASSERT( "The WEAPON_TYPE asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    (uParam1^)[Result]._fU0 = 0;
                    (uParam1^)[Result]._fU4 = 0;
                    sub_4222( ref (uParam1^)[Result]._fU8 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU4 == 4)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The WEAPON_TYPE asset is currently being removed!!!", 0 );
                sub_60544( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (HAS_WEAPON_LOADED( iParam0 ))
        {
            (uParam1^)[iVar6]._fU0 = iParam0;
            (uParam1^)[iVar6]._fU4 = 3;
            sub_60544( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The WEAPON_TYPE - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_60544(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_35510( uParam2, ref (uParam1^)[uParam0]._fU8 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU8[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The WEAPON_TYPE asset thread indices are NOT available!!!", 0 );
    }
    return;
}

void sub_61350(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 = sub_61371( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
    if (iVar4 >= 0)
    {
        StrCopy( ref (uParam1^)[iVar4]._fU0, uParam0, 32 );
        (uParam1^)[iVar4]._fU32 = 1;
        sub_61508( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
    }
    return;
}

int sub_61371(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU32 == 1)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The ANIM_DICT asset is currently being requested!!!", 0 );
                sub_61508( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU32 == 2)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The ANIM_DICT asset is already loading!!!", 0 );
                sub_61508( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU32 == 3)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                if (HAS_ANIM_DICT_LOADED( uParam0, 0 ))
                {
                    sub_61508( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    SCRIPT_ASSERT( "The ANIM_DICT asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    StrCopy( ref (uParam1^)[Result]._fU0, "", 32 );
                    (uParam1^)[Result]._fU32 = 0;
                    sub_4222( ref (uParam1^)[Result]._fU36 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU32 == 4)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The ANIM_DICT asset is currently being removed!!!", 0 );
                sub_61508( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU32 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (HAS_ANIM_DICT_LOADED( uParam0, 0 ))
        {
            StrCopy( ref (uParam1^)[iVar6]._fU0, uParam0, 32 );
            (uParam1^)[iVar6]._fU32 = 1;
            sub_61508( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The ANIM_DICT - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_61508(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_35510( uParam2, ref (uParam1^)[uParam0]._fU36 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU36[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The ANIM_DICT asset thread indices are NOT available!!!", 0 );
    }
    return;
}

void sub_62356(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 = sub_62377( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
    if (iVar4 >= 0)
    {
        StrCopy( ref (uParam1^)[iVar4]._fU0, uParam0, 64 );
        (uParam1^)[iVar4]._fU64 = 1;
        sub_62516( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
    }
    return;
}

int sub_62377(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU64 == 1)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The ACTION_TREE asset is currently being requested!!!", 0 );
                sub_62516( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU64 == 2)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The ACTION_TREE asset is already loading!!!", 0 );
                sub_62516( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU64 == 3)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                if (IS_ACTION_TREE_LOADED( uParam0 ))
                {
                    sub_62516( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    SCRIPT_ASSERT( "The ACTION_TREE asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    StrCopy( ref (uParam1^)[Result]._fU0, "", 64 );
                    (uParam1^)[Result]._fU64 = 0;
                    sub_4222( ref (uParam1^)[Result]._fU68 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU64 == 4)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The ACTION_TREE asset is currently being removed!!!", 0 );
                sub_62516( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU64 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (IS_ACTION_TREE_LOADED( uParam0 ))
        {
            StrCopy( ref (uParam1^)[iVar6]._fU0, uParam0, 64 );
            (uParam1^)[iVar6]._fU64 = 3;
            sub_62516( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The ACTION_TREE - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_62516(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_35510( uParam2, ref (uParam1^)[uParam0]._fU68 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU68[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The ACTION_TREE asset thread indices are NOT available!!!", 0 );
    }
    return;
}

void sub_63363(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 = sub_63384( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
    if (iVar4 >= 0)
    {
        (uParam1^)[iVar4]._fU0 = uParam0;
        (uParam1^)[iVar4]._fU4 = 1;
        sub_63522( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
    }
    return;
}

int sub_63384(int iParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU4 == 1)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The VEHICLE_RECORDING asset is currently being requested!!!", 0 );
                sub_63522( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 2)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The VEHICLE_RECORDING asset is already loading!!!", 0 );
                sub_63522( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 3)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                if (HAS_VEHICLE_RECORDING_BEEN_LOADED( iParam0 ))
                {
                    sub_63522( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    SCRIPT_ASSERT( "The VEHICLE_RECORDING asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    (uParam1^)[Result]._fU0 = -1;
                    (uParam1^)[Result]._fU4 = 0;
                    sub_4222( ref (uParam1^)[Result]._fU8 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU4 == 4)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The VEHICLE_RECORDING asset is currently being removed!!!", 0 );
                sub_63522( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (HAS_VEHICLE_RECORDING_BEEN_LOADED( iParam0 ))
        {
            (uParam1^)[iVar6]._fU0 = iParam0;
            (uParam1^)[iVar6]._fU4 = 3;
            sub_63522( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The VEHICLE_RECORDING - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_63522(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_35510( uParam2, ref (uParam1^)[uParam0]._fU8 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU8[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The VEHICLE_RECORDING asset thread indices are NOT available!!!", 0 );
    }
    return;
}

void sub_64360()
{
    sub_432( "CCB", "P_LOAD_CHECKPOINT_ASSETS", 0 );
    sub_59288( g_U2105, ref g_U910 );
    sub_59288( -1522400210, ref g_U910 );
    sub_59288( -764000169, ref g_U910 );
    sub_59288( -1425703854, ref g_U910 );
    sub_59288( g_U2128, ref g_U910 );
    sub_59288( g_U2143, ref g_U910 );
    sub_59288( g_U2144, ref g_U910 );
    sub_59288( g_U2145, ref g_U910 );
    sub_59288( g_U2146, ref g_U910 );
    sub_59288( g_U2151, ref g_U910 );
    sub_59288( g_U2134, ref g_U910 );
    sub_59288( g_U2136, ref g_U910 );
    sub_59288( g_U2137, ref g_U910 );
    sub_59288( g_U2138, ref g_U910 );
    sub_59288( g_U2139, ref g_U910 );
    sub_59288( g_U2140, ref g_U910 );
    sub_59288( g_U2141, ref g_U910 );
    sub_60391( g_U2854, ref g_U1211 );
    sub_60391( g_U2856, ref g_U1211 );
    sub_60391( g_U2855, ref g_U1211 );
    sub_60391( g_U2857, ref g_U1211 );
    sub_60391( g_U2861, ref g_U1211 );
    sub_61350( ref g_U1896, ref g_U1369 );
    sub_64730();
    return;
}

void sub_64730()
{
    sub_432( "CCB", "P_LOAD_AUDIO_ASSETS", 0 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
    STOP_SCRIPT_STREAM( 0 );
    STOP_SCRIPT_STREAM( 1 );
    STOP_SCRIPT_STREAM( 2 );
    sub_4161( ref g_U1704 );
    sub_35326( "SBUS_RS_A", ref g_U1704 );
    sub_35326( "SBUS_RS_B", ref g_U1704 );
    sub_35326( "SBUS_RS_C", ref g_U1704 );
    return;
}

int sub_64995(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    if (sub_65007( uParam0 ))
    {
        if (sub_65130( uParam1 ))
        {
            if (sub_65253( uParam2 ))
            {
                if (sub_65446( uParam3 ))
                {
                    if (sub_65575( uParam4 ))
                    {
                        if (sub_65698( uParam5 ))
                        {
                            if (sub_37078( uParam6 ))
                            {
                                if (sub_65839( uParam7 ))
                                {
                                    return 1;
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    return 0;
}

int sub_65007(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU4 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

int sub_65130(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU4 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

int sub_65253(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU4 == 1)
        {
            ISEQ_GET_NAME( 32, ref uVar3, (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 2)
        {
            ISEQ_GET_NAME( 32, ref uVar3, (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 4)
        {
            ISEQ_GET_NAME( 32, ref uVar3, (uParam0^)[I]._fU0 );
            return 0;
        };;;
    }
    return 1;
}

int sub_65446(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU32 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU32 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU32 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

int sub_65575(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU4 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

int sub_65698(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU64 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU64 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU64 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

int sub_65839(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU64 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU64 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU64 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

int sub_66241()
{
    switch (l_U149)
    {
        case 0:
        sub_64360();
        sub_432( "CCB", "eLoadAsset - STATE_LOAD_01", 0 );
        l_U149 = 2;
        break;
        case 2:
        if (sub_64995( ref g_U910, ref g_U1211, ref g_U1272, ref g_U1369, ref g_U1474, ref g_U1535, ref g_U1704, ref g_U1757 ))
        {
            sub_432( "CCB", "eLoadAsset - STATE_LOAD_COMPLETE", 0 );
            l_U149 = 11;
        }
        break;
        case 11:
        return 1;
        break;
    }
    return 0;
}

void sub_67185()
{
    sub_432( "CCB", "P_START_GAMEPLAY", 0 );
    sub_67228( 1, 1 );
    sub_44859();
    TOGGLE_DISPLAY_AMMO( 0 );
    CAMERA_USE_HANDY_CAM( 1, 8.00000000, 0 );
    g_U764 = 10;
    sub_432( "CCB", "The mceCurrentCheckpoint is:", 0 );
    if (g_U2875[10] == 0)
    {
        sub_432( "CCB", "Saving MCE_BUSRAILSHOOTER01 checkpoint data.", 0 );
        sub_67690( ref l_U76, g_U764, sub_958(), g_U2339[10], g_U2466[10], g_U2509[10], g_U2552[10], 0 );
    }
    sub_71304();
    return;
}

void sub_67228(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        SET_PLAYER_CONTROL( sub_980(), 1, 0 );
        SET_PED_INVINCIBLE( sub_958(), 0 );
        if (bParam0)
        {
            sub_67309();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

void sub_67309()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_958() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND( sub_958(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND( sub_958(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_958(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_958(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

void sub_67690(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

    sub_432( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
        sub_432( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
        sub_10273( iParam1 );
        sub_67949( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
            sub_68400( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
            sub_68400( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_68632( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
            sub_68400( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_68632( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_68632( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
            sub_68400( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_68632( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_68632( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_68632( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
            sub_68400( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_68632( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_68632( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_68632( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if (sub_68632( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
            sub_70190( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U1, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
    sub_432( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

void sub_67949(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 = sub_7637( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
        sub_432( "TEH", "Ending context", 0 );
        sub_432( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

void sub_68400(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

void sub_68632(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

void sub_70190(int iParam0)
{
    sub_9290( "CHECKPOINT DATA" );
    sub_70229( iParam0->_fU4 );
    sub_70252( iParam0->_fU16 );
    sub_70252( iParam0->_fU20 );
    sub_70252( iParam0->_fU24 );
    sub_70295( iParam0->_fU28 );
    sub_70295( iParam0->_fU56 );
    sub_70295( iParam0->_fU60 );
    sub_70295( iParam0->_fU64 );
    sub_70295( iParam0->_fU68 );
    sub_70295( iParam0->_fU72 );
    sub_70295( iParam0->_fU76 );
    sub_70295( iParam0->_fU80 );
    sub_70295( iParam0->_fU84 );
    sub_70295( iParam0->_fU88 );
    sub_70295( iParam0->_fU92 );
    sub_70252( iParam0->_fU32 );
    sub_70295( iParam0->_fU36 );
    sub_70295( iParam0->_fU40 );
    sub_70295( iParam0->_fU44 );
    sub_70252( iParam0->_fU136 );
    sub_70500( iParam0->_fU140 );
    sub_70295( iParam0->_fU52 );
    sub_9290( "---nRightHolsterAttachmentEnabled: " );
    sub_70295( iParam0->_fU96 );
    sub_9290( "---nRightHolsterAttachmentToggled: " );
    sub_70295( iParam0->_fU100 );
    sub_9290( "---nLeftHolsterAttachmentEnabled: " );
    sub_70295( iParam0->_fU104 );
    sub_9290( "---nLeftHolsterAttachmentToggled: " );
    sub_70295( iParam0->_fU108 );
    sub_9290( "---nRifleHolsterAttachmentEnabled: " );
    sub_70295( iParam0->_fU112 );
    sub_9290( "---nRifleHolsterAttachmentToggled: " );
    sub_70295( iParam0->_fU116 );
    sub_9290( "---nRightHandAttachmentEnabled: " );
    sub_70295( iParam0->_fU120 );
    sub_9290( "---nRightHandAttachmentToggled: " );
    sub_70295( iParam0->_fU124 );
    sub_9290( "---nLeftHandAttachmentEnabled: " );
    sub_70295( iParam0->_fU128 );
    sub_9290( "---nLeftHandAttachmentToggled: " );
    sub_70295( iParam0->_fU132 );
    sub_70295( l_U1 );
    sub_70295( 144 );
    return;
}

void sub_70229(unknown uParam0, unknown uParam1, unknown uParam2)
{
    return;
}

void sub_70252(unknown uParam0)
{
    return;
}

void sub_70295(unknown uParam0)
{
    return;
}

void sub_70500(boolean bParam0)
{
    if (bParam0)
    {
        ;
    }
    return;
}

void sub_71304()
{
    sub_432( "CCB", "P_START_SP_CHALLENGES", 0 );
    sub_432( "CCB", "Starting the Bus_Depot_Railshooter context...", 0 );
    START_CONTEXT( "Bus_Depot_Railshooter" );
    return;
}

void sub_71556()
{
    switch (l_U155)
    {
        case 0:
        if (sub_34812( g_U2918, g_U2330, 13000.00000000 ))
        {
            l_U723 = 0;
            sub_432( "CCB", "eTunnelEntranceSpawn - STATE_SPAWN_IDLE", 0 );
            l_U155 = 1;
        }
        break;
        case 1:
        if (l_U723 < 4)
        {
            sub_432( "CCB", "Spawning piRailVCPFTunnelEntrance_:", 0 );
            l_U262[l_U723] = sub_13749( ref l_U948[l_U723] );
            sub_71805( ref l_U262, l_U723 );
            l_U723++;
        }
        else
        {
            sub_432( "CCB", "eTunnelEntranceSpawn - STATE_SPAWN_SETUP", 0 );
            l_U155 = 2;
        }
        break;
        case 2:
        sub_27328( ref l_U262, "piRailVCPFTunnelEntrance" );
        sub_432( "CCB", "eTunnelEntranceSpawn - STATE_SPAWN_COMPLETE", 0 );
        l_U155 = 3;
        break;
        case 3: break;
    }
    return;
}

void sub_71805(unknown uParam0, int iParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^)[iParam1] )))
    {
        if (iParam1 == 0)
        {
            sub_432( "CCB", "Setting up aigRailVCPFTunnelEntrance AI group.", 0 );
            sub_26355( ref l_U216, 1056964608, 0 );
        }
        sub_26538( (uParam0^)[iParam1], ref l_U216 );
        sub_26813( ref (uParam0^)[iParam1], ref g_U2080, 5.00000000, 10.00000000 );
        if (iParam1 == 0)
        {
            sub_9619( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        }
        else if (iParam1 == 1)
        {
            sub_9619( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 0, 1, 0, 255 );
        }
        else if (iParam1 == 2)
        {
            sub_9619( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
        }
        else if (iParam1 == 3)
        {
            sub_9619( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
        };;;;
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^)[iParam1], 1 );
        SET_PED_EMOTION_STATE( (uParam0^)[iParam1], 1 );
        SET_PED_ALERTNESS( (uParam0^)[iParam1], 2 );
        SET_PED_ACCURACY( (uParam0^)[iParam1], 31186664 );
        SET_PED_SEEING_RANGE( (uParam0^)[iParam1], 120.00000000, 75 );
        SET_PED_HEARING_RANGE( (uParam0^)[iParam1], 120.00000000 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 256, 0 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 1, 0 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^)[iParam1], 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^)[iParam1], 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^)[iParam1], 1 );
        TASK_STAND_STILL( (uParam0^)[iParam1], -1 );
    }
    return;
}

void sub_72532()
{
    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        if (NOT (IS_PED_DEAD( g_U2595 )))
        {
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                switch (l_U165)
                {
                    case 0:
                    if (sub_34812( g_U2918, g_U2330, 4000 ))
                    {
                        sub_432( "CCB", "eRailBusVig16 - STATE_MIDSCENE_INIT", 0 );
                        if (NOT (sub_5220( 230339392, ref g_U1272 )))
                        {
                            sub_72767( 230339392, ref g_U1272 );
                        }
                        if (NOT (sub_6372( g_U2330, ref g_U1474 )))
                        {
                            sub_432( "CCB", "Loading the gnRailshooterBusPart1 vehicle recording.", 0 );
                            sub_63363( g_U2330, ref g_U1474 );
                        }
                        sub_432( "CCB", "eRailBusVig16 - STATE_MIDSCENE_PRELOAD", 0 );
                        l_U165 = 1;
                    }
                    break;
                    case 1:
                    if (sub_5220( 230339392, ref g_U1272 ))
                    {
                        if (IS_ANIMATED_CAMERA_PLAYING())
                        {
                            sub_432( "CCB", "Stopping animated camera!!!", 0 );
                            CAMERA_ANIMATED_STOP( 3000, 0 );
                        }
                        if (sub_5220( 230339392, ref g_U1272 ))
                        {
                            sub_432( "CCB", "Registering the S_BUS_VIG_16 ISS", 0 );
                            ISEQ_REGISTER_ENTITY( 230339392, "vig16_player", sub_958(), 0 );
                            ISEQ_REGISTER_ENTITY( 230339392, "vig16_female", g_U2595, 0 );
                        }
                        else
                        {
                            sub_432( "CCB", "The S_BUS_VIG_16 ISS entities could NOT be registered!!!", 0 );
                        }
                        sub_432( "CCB", "eRailBusVig16 - STATE_MIDSCENE_IDLE", 0 );
                        l_U165 = 5;
                    }
                    else
                    {
                        sub_432( "CCB", "Waiting for S_BUS_VIG_16 ISS Animation to load...", 0 );
                    }
                    break;
                    case 5:
                    if (sub_34812( g_U2918, g_U2330, 6775.00000000 ))
                    {
                        if (sub_5220( 230339392, ref g_U1272 ))
                        {
                            if (NOT (ISEQ_QUERY_STATE( 230339392, 3 )))
                            {
                                sub_432( "CCB", "Starting the S_BUS_VIG_16 ISS", 0 );
                                ISEQ_START( 230339392 );
                            }
                        }
                        else
                        {
                            sub_432( "CCB", "The S_BUS_VIG_16 ISS is NOT loaded!!!", 0 );
                        }
                        sub_432( "CCB", "eRailBusVig16 - STATE_MIDSCENE_01", 0 );
                        l_U165 = 6;
                    }
                    break;
                    case 6:
                    sub_44427();
                    sub_17259( 1, 0, 0, 1 );
                    TASK_CLEAR_LOOK_AT( sub_958() );
                    DETACH_PED( sub_958(), 1 );
                    ATTACH_PED_TO_VEHICLE( sub_958(), g_U2918, 0, l_U1311, l_U1222, 0.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1314, l_U1223, 0.00000000, 0, 0, 0, 1 );
                    sub_432( "CCB", "The animated camera length is:", 0 );
                    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                    {
                        CAMERA_PLAY_ANIMATED_ATTACHED_VEHICLE_RELATIVE( "LEVEL_S_BUS_CP_06", "VIG_16_BUS_GIO_DRIVE2_CAM", g_U2918, 0, 0 );
                    }
                    SET_CAMERA_OVERRIDE( "RAIL_BUS_CAMERA_AIM", "RAIL_BUS_CAMERA_AIM", 0, 1, 1 );
                    SET_RAIL_RELATIVE_DIR( 2, 0 );
                    l_U518._fU12 = 1409;
                    sub_2187( ref l_U518 );
                    sub_1530( ref l_U518 );
                    sub_75897();
                    sub_432( "CCB", "eRailBusVig16 - STATE_MIDSCENE_02", 0 );
                    l_U165 = 7;
                    break;
                    case 7:
                    if (sub_1650( ref l_U518 ))
                    {
                        if (ISEQ_QUERY_STATE( 230339392, 3 ))
                        {
                            sub_432( "CCB", "Terminating the S_BUS_VIG_16 ISS.", 0 );
                            ISEQ_UNREGISTER_ENTITY( 230339392, "vig16_player" );
                            ISEQ_UNREGISTER_ENTITY( 230339392, "vig16_female" );
                            ISEQ_TERMINATE( 230339392 );
                            sub_5527( 230339392, ref g_U1272 );
                        }
                        if (sub_12605( ref g_U2008, ref g_U1535 ))
                        {
                            sub_432( "CCB", "Setting the animation node for the player to BUS_RAILSHOOTER_STANCE_RIGHT.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( sub_958(), "/Global/BUS_RAILSHOOTER/BUS_RAILSHOOTER_STANCE_RIGHT" );
                        }
                        else
                        {
                            sub_432( "CCB", "The s_bus_railshooter action tree is NOT loaded!!!", 0 );
                        }
                        if (sub_12605( ref g_U2024, ref g_U1535 ))
                        {
                            sub_432( "CCB", "Setting the animation node for Gio to EVENT_01_FUEL_DEPOT_TIMELINE/04_Turn_right.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_17_OFELIABUS/EVENT_01_FUEL_DEPOT_TIMELINE/04_Turn_right" );
                        }
                        else
                        {
                            sub_432( "CCB", "The txtRailOfeliaBus action tree is NOT loaded!!!", 0 );
                        }
                        sub_432( "CCB", "eRailBusVig16 - STATE_MIDSCENE_POST_MIDSCENE", 0 );
                        l_U165 = 36;
                    }
                    else
                    {
                        sub_432( "CCB", "The animated camera current time:", 0 );
                    }
                    break;
                    case 36:
                    sub_432( "CCB", "Attaching the player.", 0 );
                    DETACH_PED( sub_958(), 1 );
                    ATTACH_PED_TO_VEHICLE( sub_958(), g_U2918, 0, l_U1273, l_U1222, 0.00000000, 1, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                    sub_432( "CCB", "Attaching Gio.", 0 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1276, l_U1223, 0.00000000, 1, 0, 0, 1 );
                    sub_23831( 0, 0, 0, 0.00000000, -5.00000000, 0 );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                        sub_432( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                    sub_67228( 1, 1 );
                    if (NOT (IS_PLAYER_DEAD( sub_980() )))
                    {
                        SET_PLAYER_FORCED_AIM( sub_980(), 1, 1 );
                    }
                    sub_44859();
                    TOGGLE_DISPLAY_AMMO( 0 );
                    l_U142 = 0;
                    sub_432( "CCB", "Enabling the camera aim override...", 0 );
                    CAMERA_AIM_OVERRIDE( 1 );
                    sub_1394( ref l_U437, 250, 1, 0 );
                    sub_1530( ref l_U437 );
                    sub_432( "SP", "Setting fuel pumps as damagable...", 0 );
                    if ((DOES_OBJECT_EXIST( l_U302[2] )) == 1)
                    {
                        SET_OBJECT_PROOFS( l_U302[2], 0, 0, 0, 0, 0 );
                        SET_OBJECT_INVINCIBLE( l_U302[2], 0 );
                    }
                    if ((DOES_OBJECT_EXIST( l_U302[3] )) == 1)
                    {
                        SET_OBJECT_PROOFS( l_U302[3], 0, 0, 0, 0, 0 );
                        SET_OBJECT_INVINCIBLE( l_U302[3], 0 );
                    }
                    sub_432( "CCB", "eRailBusVig16 - STATE_MIDSCENE_COMPLETE", 0 );
                    l_U165 = 39;
                    break;
                    case 39: break;
                }
            }
            else
            {
                sub_432( "CCB", "The viRailBus vehicle is NOT valid!!!", 0 );
            }
        }
        else
        {
            sub_432( "CCB", "The piGiovanna ped is NOT valid!!!", 0 );
        }
    }
    else
    {
        sub_432( "CCB", "The PLAYER_PED_ID ped is NOT valid!!!", 0 );
    }
    return;
}

void sub_72767(unknown uParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    int iVar12;

    if (ISEQ_DOES_EXIST( uParam0 ))
    {
        iVar12 = sub_72802( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
        if (iVar12 >= 0)
        {
            ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
            (uParam1^)[iVar12]._fU0 = uParam0;
            (uParam1^)[iVar12]._fU4 = 1;
            sub_72954( iVar12, uParam1, GET_ID_OF_THIS_THREAD() );
        }
    }
    else
    {
        SCRIPT_ASSERT( "[CCB] ### The eTempAssetName ISEQ is NOT valid!!! ###", 0 );
    }
    return;
}

int sub_72802(int iParam0, unknown uParam1, unknown uParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    int Result;
    int iVar14;

    iVar14 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU4 == 1)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The ISEQ asset is currently being requested!!!", 0 );
                sub_72954( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 2)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The ISEQ asset is already loading!!!", 0 );
                sub_72954( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 3)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                if ((uParam1^)[Result]._fU0 != 0)
                {
                    if ((ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 3 )) || (ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 2 )))
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        sub_72954( Result, uParam1, uParam2 );
                        return -1;
                    }
                    else if (ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 1 ))
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        SCRIPT_ASSERT( "The ISEQ asset is currently loading!!!", 0 );
                        sub_72954( Result, uParam1, uParam2 );
                        return -1;
                    }
                    else if (ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 6 ))
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        SCRIPT_ASSERT( "The ISEQ status is LOADED but the asset is already TERMINATED!!!", 0 );
                        (uParam1^)[Result]._fU0 = 0;
                        (uParam1^)[Result]._fU4 = 0;
                        return Result;
                    }
                    else if ((ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 5 )) || (ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 4 )))
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        SCRIPT_ASSERT( "The ISEQ status is LOADED but the asset is already interrupted or shutting down!!!", 0 );
                        (uParam1^)[Result]._fU0 = 0;
                        (uParam1^)[Result]._fU4 = 0;
                        sub_4222( ref (uParam1^)[Result]._fU8 );
                        return Result;
                    }
                    else
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        SCRIPT_ASSERT( "The ISEQ asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                        (uParam1^)[Result]._fU0 = 0;
                        (uParam1^)[Result]._fU4 = 0;
                        sub_4222( ref (uParam1^)[Result]._fU8 );
                        return Result;
                    };;;;
                }
                else
                {
                    SCRIPT_ASSERT( "Trying to update the state of a DUMMY_SEQUENCE!!!", 0 );
                }
            }
        }
        else if ((uParam1^)[Result]._fU4 == 4)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The ISEQ asset is currently being removed!!!", 0 );
                sub_72954( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 0)
        {
            iVar14 = Result;
        };;;;;
    }
    if (NOT (iVar14 == -1))
    {
        if (iParam0 != 0)
        {
            if ((ISEQ_QUERY_STATE( (uParam1^)[iVar14]._fU0, 3 )) || (ISEQ_QUERY_STATE( (uParam1^)[iVar14]._fU0, 2 )))
            {
                ISEQ_GET_NAME( 32, ref uVar5, iParam0 );
                SCRIPT_ASSERT( "The ISEQ asset is already loaded, but the asset status flag was not set!!!", 0 );
                (uParam1^)[iVar14]._fU0 = iParam0;
                (uParam1^)[iVar14]._fU4 = 3;
                sub_72954( iVar14, uParam1, uParam2 );
                return -1;
            }
            else
            {
                return iVar14;
            }
        }
        else
        {
            SCRIPT_ASSERT( "Trying to check if index is available for a DUMMY_SEQUENCE!!!", 0 );
        }
    }
    SCRIPT_ASSERT( "The ISEQ - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_72954(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_35510( uParam2, ref (uParam1^)[uParam0]._fU8 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU8[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The ISEQ asset thread indices are NOT available!!!", 0 );
    }
    return;
}

void sub_75897()
{
    PLAY_IMAGEFX( "FLICKER_VIBRATE_INTERLACE_01", 4, 0 );
    PLAY_IMAGEFX( "FLASH_WHITE", 4, 0 );
    return;
}

void sub_77665()
{
    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        if (NOT (IS_PED_DEAD( g_U2595 )))
        {
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                if ((l_U166 < 37) AND (l_U166 > 4))
                {
                    sub_77755( ref l_U1583 );
                    if (l_U166 >= 8)
                    {
                        if (sub_1650( ref l_U536 ))
                        {
                            sub_432( "CCB", "Stopping Wall Scrape PFX.", 0 );
                            REMOVE_PARTICLE_FX_FROM_VEHICLE( g_U2918 );
                        }
                    }
                    if (l_U166 >= 5)
                    {
                        if (NOT l_U137)
                        {
                            if (sub_34812( g_U2918, g_U2330, 20000 ))
                            {
                                l_U137 = 1;
                                sub_432( "CCB", "Locking player control...", 0 );
                                sub_17259( 1, 0, 0, 0 );
                            }
                        }
                    }
                }
                switch (l_U166)
                {
                    case 0:
                    if (sub_34812( g_U2918, g_U2330, 18000 ))
                    {
                        sub_432( "CCB", "eRailBusMid11 - STATE_MIDSCENE_INIT", 0 );
                        if (NOT (sub_5220( 2022386640, ref g_U1272 )))
                        {
                            sub_432( "CCB", "Loading the S_BUS_MID_11 ISS.", 0 );
                            sub_72767( 2022386640, ref g_U1272 );
                        }
                        if (NOT (sub_6372( g_U2331, ref g_U1474 )))
                        {
                            sub_432( "CCB", "Loading the gnRailshooterBusPart2 vehicle recording.", 0 );
                            sub_63363( g_U2331, ref g_U1474 );
                        }
                        sub_432( "CCB", "eRailBusMid11 - STATE_MIDSCENE_PRELOAD", 0 );
                        l_U166 = 1;
                    }
                    break;
                    case 1:
                    if (sub_5220( 2022386640, ref g_U1272 ))
                    {
                        sub_46982( ref l_U680[0], 67.16638000, 140.63390000, -1.01562300, 13.46547000, -0.00002500, 88.77900000, 45.00000000 );
                        sub_46982( ref l_U680[1], 67.31000000, 140.64000000, -0.97000000, 11.46000000, 0.90000000, 85.69000000, 27.24000000 );
                        sub_46982( ref l_U680[2], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 40.00000000 );
                        ATTACH_CAM_TO_VEHICLE( l_U680[2], g_U2918, l_U1350, 1 );
                        POINT_CAM_AT_VEHICLE( l_U680[2], g_U2918, l_U1353, 1 );
                        if (IS_ANIMATED_CAMERA_PLAYING())
                        {
                            sub_432( "CCB", "Stopping animated camera!!!", 0 );
                            CAMERA_ANIMATED_STOP( 3000, 0 );
                        }
                        if (sub_5220( 2022386640, ref g_U1272 ))
                        {
                            sub_432( "CCB", "Registering the S_BUS_MID_11 ISS", 0 );
                            ISEQ_REGISTER_ENTITY( 2022386640, "mid11_player", sub_958(), 0 );
                            ISEQ_REGISTER_ENTITY( 2022386640, "mid11_female", g_U2595, 0 );
                        }
                        else
                        {
                            sub_432( "CCB", "The S_BUS_MID_11 ISS is NOT loaded!!!", 0 );
                        }
                        sub_432( "CCB", "eRailBusMid11 - STATE_MIDSCENE_IDLE", 0 );
                        l_U166 = 5;
                    }
                    else
                    {
                        sub_432( "CCB", "Waiting for S_BUS_VIG_16 ISS Animation to load...", 0 );
                    }
                    break;
                    case 5:
                    if (sub_34812( g_U2918, g_U2330, l_U75 ))
                    {
                        sub_79739();
                    }
                    if (sub_34812( g_U2918, g_U2330, 20500.00000000 ))
                    {
                        if (sub_5220( 2022386640, ref g_U1272 ))
                        {
                            if (NOT (ISEQ_QUERY_STATE( 2022386640, 3 )))
                            {
                                sub_432( "CCB", "Starting the S_BUS_MID_11 ISS", 0 );
                                ISEQ_START( 2022386640 );
                            }
                        }
                        else
                        {
                            sub_432( "CCB", "The S_BUS_MID_11 ISS is NOT loaded!!!", 0 );
                        }
                        sub_432( "CCB", "eRailBusMid11 - STATE_MIDSCENE_01", 0 );
                        l_U166 = 6;
                    }
                    break;
                    case 6:
                    sub_44427();
                    TASK_CLEAR_LOOK_AT( sub_958() );
                    DETACH_PED( sub_958(), 1 );
                    ATTACH_PED_TO_VEHICLE( sub_958(), g_U2918, 0, l_U1335, l_U1222, 90.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1338, l_U1235, 0.00000000, 0, 0, 0, 1 );
                    sub_432( "CCB", "The animated camera length is:", 0 );
                    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                    {
                        CAMERA_PLAY_ANIMATED_ATTACHED_VEHICLE_RELATIVE( "LEVEL_S_BUS_CP_06", "BUSRIDE_1_CAM", g_U2918, 0, 0 );
                    }
                    l_U527._fU12 = 1139;
                    sub_2187( ref l_U527 );
                    sub_1530( ref l_U527 );
                    sub_3500( ref l_U246 );
                    sub_3500( ref l_U251 );
                    sub_3500( ref l_U262 );
                    sub_3774( ref l_U302 );
                    sub_3666( ref l_U287 );
                    sub_4817( g_U2128, ref g_U910 );
                    sub_4817( g_U2143, ref g_U910 );
                    sub_4817( g_U2144, ref g_U910 );
                    sub_4817( g_U2145, ref g_U910 );
                    sub_4817( g_U2146, ref g_U910 );
                    sub_432( "CCB", "eRailBusMid11 - STATE_MIDSCENE_02", 0 );
                    l_U166 = 7;
                    break;
                    case 7:
                    if (sub_1650( ref l_U527 ))
                    {
                        sub_16634( g_U2918, g_U2330, 0.65000000, 21400.00000000 );
                        sub_432( "CCB", "The animated camera current time:", 0 );
                        sub_432( "CCB", "eRailBusMid11 - STATE_MIDSCENE_03", 0 );
                        l_U166 = 8;
                    }
                    else
                    {
                        sub_432( "CCB", "The animated camera current time:", 0 );
                    }
                    break;
                    case 8:
                    sub_432( "GA", "Playing PFX BusDepot_Bus_WallScrape_S", 0 );
                    START_PARTICLE_FX_LOOPED_ON_VEHICLE( "BusDepot_Bus_WallScrape_S", g_U2918, l_U1356, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
                    SET_VEHICLE_EXTRA( g_U2918, 3, 1 );
                    SET_VEHICLE_EXTRA( g_U2918, 4, 1 );
                    SET_VEHICLE_EXTRA( g_U2918, 8, 1 );
                    SET_VEHICLE_EXTRA( g_U2918, 9, 0 );
                    sub_432( "CCB", "Particle FX - BusDepot_Windshield_S", 0 );
                    START_PARTICLE_FX_NON_LOOPED_ON_VEHICLE( "BusDepot_Windshield_S", g_U2918, l_U1320, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
                    sub_432( "CCB", "The animated camera current time:", 0 );
                    sub_47263( ref l_U680[0] );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                        sub_432( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                    sub_432( "CCB", "Starting camera shake 0.", 0 );
                    SHAKE_CAM( l_U680[0], "LARGE_EXPLOSION_SHAKE", 1.50000000 );
                    SET_PAD_SHAKE( 0, 2500, 64 );
                    l_U536._fU12 = 2200;
                    sub_2187( ref l_U536 );
                    sub_1530( ref l_U536 );
                    l_U527._fU12 = 150;
                    sub_2187( ref l_U527 );
                    sub_1530( ref l_U527 );
                    sub_432( "CCB", "eRailBusMid11 - STATE_MIDSCENE_04", 0 );
                    l_U166 = 9;
                    break;
                    case 9:
                    if (sub_1650( ref l_U527 ))
                    {
                        sub_47847( ref l_U680[0], ref l_U680[1], 750, 1, 1 );
                        sub_432( "CCB", "Starting camera shake 1.", 0 );
                        SHAKE_CAM( l_U680[1], "HAND_SHAKE", 3.00000000 );
                        l_U527._fU12 = 850;
                        sub_2187( ref l_U527 );
                        sub_1530( ref l_U527 );
                        sub_432( "CCB", "eRailBusMid11 - STATE_MIDSCENE_05", 0 );
                        l_U166 = 10;
                    }
                    break;
                    case 10:
                    if (sub_1650( ref l_U527 ))
                    {
                        sub_47263( ref l_U680[1] );
                        l_U527._fU12 = 700;
                        sub_2187( ref l_U527 );
                        sub_1530( ref l_U527 );
                        sub_432( "CCB", "eRailBusMid11 - STATE_MIDSCENE_06", 0 );
                        l_U166 = 11;
                    }
                    break;
                    case 11:
                    if (sub_1650( ref l_U527 ))
                    {
                        DETACH_PED( sub_958(), 1 );
                        ATTACH_PED_TO_VEHICLE( sub_958(), g_U2918, 0, l_U1359 - (vector( 0.10000000, 0.00000000, 0.00000000)), l_U1234, 0.00000000, 0, 0, 0, 1 );
                        SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                        DETACH_PED( g_U2595, 1 );
                        ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1341, l_U1236, 0.00000000, 0, 0, 0, 1 );
                        if (sub_5220( 2022386640, ref g_U1272 ))
                        {
                            sub_432( "CCB", "Setting the animation node for the player to S_BUS_MID_11/SEQ_START/MAX/PART_02_MAX/PART2_ANIM_MAX.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( sub_958(), "/Global/S_BUS_MID_11/SEQ_START/MAX/PART_02_MAX/PART2_ANIM_MAX" );
                            sub_432( "CCB", "Setting the animation node for Giovanna to S_BUS_MID_11/SEQ_START/GIO/PART_02_GIO/PART2_ANIM_GIO.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_MID_11/SEQ_START/GIO/PART_02_GIO/PART2_ANIM_GIO" );
                        }
                        else
                        {
                            sub_432( "CCB", "The S_BUS_MID_11 ISS is NOT loaded!!!", 0 );
                        }
                        l_U527._fU12 = 200;
                        sub_2187( ref l_U527 );
                        sub_1530( ref l_U527 );
                        sub_432( "CCB", "eRailBusMid11 - STATE_MIDSCENE_07", 0 );
                        l_U166 = 12;
                    }
                    break;
                    case 12:
                    if (sub_1650( ref l_U527 ))
                    {
                        sub_432( "CCB", "Stopping shake cam 0...", 0 );
                        STOP_CAM_SHAKING( l_U680[0], 0 );
                        sub_432( "CCB", "Stopping shake cam 1...", 0 );
                        STOP_CAM_SHAKING( l_U680[1], 0 );
                        sub_47263( ref l_U680[2] );
                        sub_432( "CCB", "Starting camera shake 2.", 0 );
                        SHAKE_CAM( l_U680[2], "HAND_SHAKE", 3.00000000 );
                        if (NOT (IS_PLAYER_DEAD( sub_980() )))
                        {
                            SET_PLAYER_FORCED_AIM( sub_980(), 1, 0 );
                            SET_PED_DEFAULT_AIM_AT_COORD( sub_958(), 109.54000000, 98.61000000, -1.61000000 );
                            TASK_AIM_GUN_AT_COORD( sub_958(), 109.54000000, 98.61000000, -1.61000000, -1, 1 );
                        }
                        SET_CAMERA_OVERRIDE( "RIFLE_AIM_CAMERA_BUS_FRONT", "RIFLE_AIM_CAMERA_BUS_FRONT_AIM", 0, 1, 1 );
                        SET_RAIL_RELATIVE_DIR( 3, 0 );
                        l_U527._fU12 = 1399;
                        sub_2187( ref l_U527 );
                        sub_1530( ref l_U527 );
                        sub_432( "CCB", "eRailBusMid11 - STATE_MIDSCENE_08", 0 );
                        l_U166 = 13;
                    }
                    break;
                    case 13:
                    if (sub_1650( ref l_U527 ))
                    {
                        if (ISEQ_QUERY_STATE( 2022386640, 3 ))
                        {
                            sub_432( "CCB", "Terminating the S_BUS_MID_11 ISS.", 0 );
                            ISEQ_UNREGISTER_ENTITY( 2022386640, "mid11_player" );
                            ISEQ_UNREGISTER_ENTITY( 2022386640, "mid11_female" );
                            ISEQ_TERMINATE( 2022386640 );
                            sub_5527( 2022386640, ref g_U1272 );
                        }
                        if (sub_12605( ref g_U2008, ref g_U1535 ))
                        {
                            sub_432( "CCB", "Setting the node to BUS_RAILSHOOTER_STANCE_FRONT.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( sub_958(), "/Global/BUS_RAILSHOOTER/BUS_RAILSHOOTER_STANCE_FRONT" );
                        }
                        else
                        {
                            sub_432( "CCB", "The s_bus_railshooter action tree is NOT loaded!!!", 0 );
                        }
                        if (sub_12605( ref g_U2024, ref g_U1535 ))
                        {
                            sub_432( "CCB", "Setting Gio's ISS node to S_BUS_17_OFELIABUS/EVENT_02_TUNNEL_TIMELINE/04_Driving", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_17_OFELIABUS/EVENT_02_TUNNEL_TIMELINE/04_Driving" );
                        }
                        else
                        {
                            sub_432( "CCB", "The txtRailOfeliaBus action tree is NOT loaded!!!", 0 );
                        }
                        sub_16634( g_U2918, g_U2331, 0.63000000, 1500.00000000 );
                        sub_432( "CCB", "Enabling the camera aim override...", 0 );
                        CAMERA_AIM_OVERRIDE( 1 );
                        SET_FORCED_AIM_INTENTION_DIRECTION( 0.62271500, -0.78112200, -0.04553500 );
                        SET_FORCED_FORWARD_DIRECTION( 0.72233100, -0.69154700, 0.00000000 );
                        sub_432( "CCB", "eRailBusMid11 - STATE_MIDSCENE_POST_MIDSCENE", 0 );
                        l_U166 = 36;
                    }
                    break;
                    case 36:
                    sub_432( "CCB", "Attaching the player.", 0 );
                    DETACH_PED( sub_958(), 1 );
                    ATTACH_PED_TO_VEHICLE( sub_958(), g_U2918, 0, l_U1359, l_U1234, 0.00000000, 1, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                    sub_432( "CCB", "Attaching Gio.", 0 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1276, l_U1223, 0, 1, 0, 0, 1 );
                    sub_432( "CO", "GAMMA_ZOOM_1", 0 );
                    PLAY_IMAGEFX( "GAMMA_ZOOM_1", 4, 1 );
                    sub_84552();
                    sub_85185();
                    l_U142 = 0;
                    sub_1394( ref l_U437, 250, 1, 0 );
                    sub_1530( ref l_U437 );
                    sub_23831( 0, 0, 0, -8.25000000, -3.00000000, 0 );
                    sub_67228( 1, 1 );
                    sub_44859();
                    TOGGLE_DISPLAY_AMMO( 0 );
                    sub_432( "CCB", "Stopping shake cam 2...", 0 );
                    STOP_CAM_SHAKING( l_U680[2], 0 );
                    sub_3888( ref l_U680 );
                    if (sub_6372( g_U2330, ref g_U1474 ))
                    {
                        sub_432( "CCB", "Unloading the gnRailshooterBusPart1 vehicle recording.", 0 );
                        sub_6537( g_U2330, ref g_U1474 );
                    }
                    sub_432( "CCB", "eCheckpoint - STATE_CHECKPOINT_RAILSHOOTER_02", 0 );
                    l_U145 = 12;
                    sub_432( "CCB", "eRailBusMid11 - STATE_MIDSCENE_COMPLETE", 0 );
                    l_U166 = 39;
                    break;
                    case 39: break;
                }
            }
            else
            {
                sub_432( "CCB", "The viRailBus vehicle is NOT valid!!!", 0 );
            }
        }
        else
        {
            sub_432( "CCB", "The piGiovanna ped is NOT valid!!!", 0 );
        }
    }
    else
    {
        sub_432( "CCB", "The PLAYER_PED_ID ped is NOT valid!!!", 0 );
    }
    return;
}

void sub_77755(unknown uParam0)
{
    int I;
    int J;

    switch (l_U72)
    {
        case 0:
        sub_432( "CO", "P_HANDLE_IMAGEFX", 0 );
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (uParam0^)[I]._fU32)
            {
                sub_1394( ref (uParam0^)[I]._fU36, (uParam0^)[I]._fU12, 1, 0 );
                sub_1530( ref (uParam0^)[I]._fU36 );
                if ((uParam0^)[I]._fU20 > 0)
                {
                    I += (uParam0^)[I]._fU20;
                }
            }
        }
        l_U72 = 1;
        break;
        case 1:
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (sub_1650( ref (uParam0^)[I]._fU36 ))
            {
                (uParam0^)[I]._fU0 = PLAY_IMAGEFX( (uParam0^)[I]._fU4, (uParam0^)[I]._fU8, (uParam0^)[I]._fU28 );
                if ((uParam0^)[I]._fU16 > 0)
                {
                    sub_1394( ref (uParam0^)[I]._fU72, (uParam0^)[I]._fU16, 1, 0 );
                    sub_1530( ref (uParam0^)[I]._fU72 );
                }
                if ((uParam0^)[I]._fU20 > 0)
                {
                    for ( J = I + 1; J <= (I + (uParam0^)[I]._fU20); J++ )
                    {
                        (uParam0^)[J]._fU0 = PLAY_IMAGEFX( (uParam0^)[J]._fU4, (uParam0^)[J]._fU8, (uParam0^)[I]._fU28 );
                        if ((uParam0^)[J]._fU16 > 0)
                        {
                            sub_1394( ref (uParam0^)[J]._fU72, (uParam0^)[J]._fU16, 1, 0 );
                            sub_1530( ref (uParam0^)[J]._fU72 );
                        }
                    }
                    I += (uParam0^)[I]._fU20;
                }
            }
            if (sub_1650( ref (uParam0^)[I]._fU72 ))
            {
                STOP_IMAGEFX( (uParam0^)[I]._fU0, (uParam0^)[I]._fU24 );
                (uParam0^)[I]._fU32 = 1;
                if ((uParam0^)[I]._fU20 > 0)
                {
                    if ((uParam0^)[I]._fU20 == 1)
                    {
                        STOP_IMAGEFX( (uParam0^)[I + 1]._fU0, (uParam0^)[I + 1]._fU24 );
                        (uParam0^)[I + 1]._fU32 = 1;
                    }
                    else
                    {
                        for ( J = I + 1; J <= (uParam0^)[I]._fU20; J++ )
                        {
                            STOP_IMAGEFX( (uParam0^)[J]._fU0, (uParam0^)[J]._fU24 );
                            (uParam0^)[J]._fU32 = 1;
                        }
                    }
                    I += (uParam0^)[I]._fU20;
                }
            }
        }
        break;
    }
    return;
}

void sub_79739()
{
    sub_432( "CCB", "P_INITIALIZE_IMAGEFX_VIG_18_BUS", 0 );
    sub_79799( ref l_U1583 );
    l_U1583[0]._fU4 = "GAMMA_ZOOM_1";
    l_U1583[0]._fU12 = 0;
    l_U1583[0]._fU20 = 1;
    l_U1583[0]._fU8 = 4;
    l_U1583[0]._fU32 = 0;
    l_U1583[1]._fU4 = "FLASH_WHITE";
    l_U1583[1]._fU12 = 0;
    l_U1583[1]._fU8 = 4;
    l_U1583[1]._fU32 = 0;
    l_U1583[2]._fU4 = "FLASH_WHITE";
    l_U1583[2]._fU12 = 700;
    l_U1583[2]._fU8 = 4;
    l_U1583[2]._fU32 = 0;
    l_U1583[3]._fU4 = "GAMMA_ZOOM_1";
    l_U1583[3]._fU12 = 1000;
    l_U1583[3]._fU8 = 4;
    l_U1583[3]._fU32 = 0;
    l_U1583[4]._fU4 = "TRIPLE_MOVE_RIGHT_COLOR_SPLIT6";
    l_U1583[4]._fU12 = 1800;
    l_U1583[4]._fU16 = 700;
    l_U1583[4]._fU24 = 1;
    l_U1583[4]._fU8 = 4;
    l_U1583[4]._fU32 = 0;
    l_U1583[5]._fU4 = "INTERLACE_LIGHT";
    l_U1583[5]._fU12 = 2500;
    l_U1583[5]._fU8 = 4;
    l_U1583[5]._fU32 = 0;
    l_U1583[6]._fU4 = "TRIPLE_MOVE_RIGHT_COLOR_SPLIT5";
    l_U1583[6]._fU12 = 2750;
    l_U1583[6]._fU8 = 4;
    l_U1583[6]._fU32 = 0;
    l_U72 = 0;
    return;
}

void sub_79799(unknown uParam0)
{
    int I;

    sub_432( "CO", "P_INIT_IMAGEFX", 0 );
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        (uParam0^)[I]._fU4 = "";
        (uParam0^)[I]._fU12 = 0;
        (uParam0^)[I]._fU16 = 0;
        (uParam0^)[I]._fU20 = 0;
        (uParam0^)[I]._fU24 = 0;
        (uParam0^)[I]._fU28 = 0;
        (uParam0^)[I]._fU32 = 1;
    }
    return;
}

void sub_84552()
{
    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        sub_432( "CCB", "P_START_RAIL_TUNNEL_VCPF", 0 );
        if (NOT (IS_PED_DEAD( l_U267[0] )))
        {
            REGISTER_TARGET( l_U267[0], sub_958() );
            SET_LOCKED_TARGET( l_U267[0], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 101.13000000, 107.23000000, -1.70000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U267[0], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U267[1] )))
        {
            REGISTER_TARGET( l_U267[1], sub_958() );
            SET_LOCKED_TARGET( l_U267[1], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 110.49000000, 104.55000000, -1.70000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U267[1], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U267[2] )))
        {
            REGISTER_TARGET( l_U267[2], sub_958() );
            SET_LOCKED_TARGET( l_U267[2], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 108.12000000, 101.21000000, -1.70000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U267[2], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
    }
    return;
}

void sub_85185()
{
    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        sub_432( "CCB", "P_START_RAIL_TUNNEL_EXIT_VCPF start", 0 );
        if (NOT (IS_PED_DEAD( l_U271[0] )))
        {
            REGISTER_TARGET( l_U271[0], sub_958() );
            SET_LOCKED_TARGET( l_U271[0], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U736 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_TURN_PED_TO_FACE_COORD( 0, l_U1323, 1, 1085905306 );
            TASK_AIM_GUN_AT_COORD( 0, l_U1323, 1000, 1 );
            TASK_SHOOT_AT_COORD( 0, l_U1323, -1, 1566631136, 1, 1 );
            TASK_AIM_GUN_AT_PED( 0, sub_958(), -1, 0 );
            CLOSE_SEQUENCE_TASK( l_U736 );
            TASK_PERFORM_SEQUENCE( l_U271[0], l_U736 );
            CLEAR_SEQUENCE_TASK( l_U736 );
        }
        if (NOT (IS_PED_DEAD( l_U271[1] )))
        {
            REGISTER_TARGET( l_U271[1], sub_958() );
            SET_LOCKED_TARGET( l_U271[1], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U271[1], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U271[2] )))
        {
            REGISTER_TARGET( l_U271[2], sub_958() );
            SET_LOCKED_TARGET( l_U271[2], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U271[2], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
    }
    return;
}

void sub_86674()
{
    sub_432( "GA", "P_RAIL_SMALL_COLLISION_START start", 0 );
    SHAKE_GAMEPLAY_CAM( "SMALL_EXPLOSION_SHAKE", 0.30000000 );
    SET_PAD_SHAKE( 0, l_U464._fU12, 64 );
    sub_2187( ref l_U464 );
    sub_1530( ref l_U464 );
    sub_432( "GA", "P_RAIL_SMALL_COLLISION_START end", 0 );
    return;
}

void sub_87063()
{
    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        sub_432( "CCB", "P_START_RAIL_FUEL_VCPF", 0 );
        if (NOT (IS_PED_DEAD( l_U251[0] )))
        {
            REGISTER_TARGET( l_U251[0], sub_958() );
            SET_LOCKED_TARGET( l_U251[0], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_FOLLOW_NAV_MESH_TO_COORD( 0, -32.87000000, 184.39000000, 0.10000000, 3, -1, 1048576000, 0, 0 );
            TASK_SHOOT_AT_PED( 0, sub_958(), 2000, 0, 0, 0, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[0], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U251[1] )))
        {
            REGISTER_TARGET( l_U251[1], sub_958() );
            SET_LOCKED_TARGET( l_U251[1], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -28.03000000, 179.11000000, 0.10000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[1], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U251[2] )))
        {
            REGISTER_TARGET( l_U251[2], sub_958() );
            SET_LOCKED_TARGET( l_U251[2], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -23.07000000, 184.74000000, 0.10000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[2], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U251[3] )))
        {
            REGISTER_TARGET( l_U251[3], sub_958() );
            SET_LOCKED_TARGET( l_U251[3], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -14.84000000, 181.82000000, 0.10000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[3], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U251[4] )))
        {
            REGISTER_TARGET( l_U251[4], sub_958() );
            SET_LOCKED_TARGET( l_U251[4], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -10.81000000, 181.07000000, 0.10000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[4], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U251[5] )))
        {
            REGISTER_TARGET( l_U251[5], sub_958() );
            SET_LOCKED_TARGET( l_U251[5], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -9.87000000, 176.19000000, 0.30000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[5], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U251[6] )))
        {
            REGISTER_TARGET( l_U251[6], sub_958() );
            SET_LOCKED_TARGET( l_U251[6], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -19.51000000, 177.41000000, 0.10000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[6], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U251[7] )))
        {
            REGISTER_TARGET( l_U251[7], sub_958() );
            SET_LOCKED_TARGET( l_U251[7], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -18.63000000, 181.38000000, 0.10000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[7], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U251[8] )))
        {
            REGISTER_TARGET( l_U251[8], sub_958() );
            SET_LOCKED_TARGET( l_U251[8], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -21.86000000, 180.23000000, 0.10000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[8], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U251[9] )))
        {
            REGISTER_TARGET( l_U251[9], sub_958() );
            SET_LOCKED_TARGET( l_U251[9], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -5.96000000, 180.70000000, 0.10000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U251[9], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
    }
    return;
}

void sub_89060()
{
    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        sub_432( "CCB", "P_START_RAIL_TUNNEL_ENTRANCE_VCPF", 0 );
        if (NOT (IS_PED_DEAD( l_U262[0] )))
        {
            REGISTER_TARGET( l_U262[0], sub_958() );
            SET_LOCKED_TARGET( l_U262[0], sub_958() );
            SET_PED_PATH_CAN_AVOID_DYNAMIC_OBJECTS( l_U262[0], 0 );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U262[0], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U262[1] )))
        {
            REGISTER_TARGET( l_U262[1], sub_958() );
            SET_LOCKED_TARGET( l_U262[1], sub_958() );
            SET_PED_PATH_CAN_AVOID_DYNAMIC_OBJECTS( l_U262[1], 0 );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U262[1], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U262[2] )))
        {
            REGISTER_TARGET( l_U262[2], sub_958() );
            SET_LOCKED_TARGET( l_U262[2], sub_958() );
            SET_PED_PATH_CAN_AVOID_DYNAMIC_OBJECTS( l_U262[2], 0 );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_FOLLOW_NAV_MESH_TO_COORD( 0, 26.73000000, 140.57000000, 0.10000000, 3, -1, 1048576000, 0, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U262[2], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U262[3] )))
        {
            REGISTER_TARGET( l_U262[3], sub_958() );
            SET_LOCKED_TARGET( l_U262[3], sub_958() );
            SET_PED_PATH_CAN_AVOID_DYNAMIC_OBJECTS( l_U262[3], 0 );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_FOLLOW_NAV_MESH_TO_COORD( 0, 23.80000000, 142.12000000, 0.10000000, 3, -1, 1048576000, 0, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U262[3], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
    }
    return;
}

void sub_90070()
{
    sub_432( "ML", "P_FUEL_PUMP_LEFT_EXPLODE", 0 );
    SET_PAD_SHAKE( 0, 500, 256 );
    SHAKE_GAMEPLAY_CAM( "SMALL_EXPLOSION_SHAKE", 0.20000000 );
    SHAKE_GAMEPLAY_CAM( "VIBRATE_SHAKE", 0.40000000 );
    return;
}

void sub_90215()
{
    sub_432( "CCB", "P_SWAP_FUEL_PUMP_ISLAND", 0 );
    sub_3807( l_U302[0] );
    l_U302[0] = sub_25283( l_U176[2], l_U1570[0], 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U302[0] ))
    {
        FREEZE_OBJECT_POSITION( l_U302[0], 1 );
    }
    return;
}

void sub_90411()
{
    sub_432( "ML", "P_FUEL_PUMP_RIGHT_EXPLODE", 0 );
    SET_PAD_SHAKE( 0, 500, 256 );
    SHAKE_GAMEPLAY_CAM( "SMALL_EXPLOSION_SHAKE", 0.20000000 );
    SHAKE_GAMEPLAY_CAM( "VIBRATE_SHAKE", 0.40000000 );
    return;
}

void sub_90563()
{
    sub_432( "CCB", "P_SWAP_FUEL_PUMP_ISLAND2", 0 );
    sub_3807( l_U302[1] );
    l_U302[1] = sub_25283( l_U176[4], l_U1570[1], 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U302[1] ))
    {
        FREEZE_OBJECT_POSITION( l_U302[1], 1 );
    }
    return;
}

void sub_91045()
{
    unknown uVar2;

    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        if (NOT (IS_PED_DEAD( g_U2595 )))
        {
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                if ((l_U167 < 37) AND (l_U167 > 4))
                {
                    sub_77755( ref l_U1773 );
                }
                switch (l_U167)
                {
                    case 0:
                    if (sub_34812( g_U2918, g_U2331, 2190.00000000 ))
                    {
                        sub_432( "CCB", "eRailBusVig19 - STATE_MIDSCENE_INIT", 0 );
                        if (NOT (sub_5220( -384669200, ref g_U1272 )))
                        {
                            sub_432( "CCB", "Loading the S_BUS_VIG_19 ISS.", 0 );
                            sub_72767( -384669200, ref g_U1272 );
                        }
                        if (NOT (sub_6372( g_U2331, ref g_U1474 )))
                        {
                            sub_432( "CCB", "Loading the gnRailshooterBusPart2 vehicle recording.", 0 );
                            sub_63363( g_U2331, ref g_U1474 );
                        }
                        sub_432( "CCB", "eRailBusVig19 - STATE_MIDSCENE_PRELOAD", 0 );
                        l_U167 = 1;
                    }
                    break;
                    case 1:
                    if (sub_5220( -384669200, ref g_U1272 ))
                    {
                        if (NOT (IS_PED_DEAD( l_U271[0] )))
                        {
                            if (IS_ANIMATED_CAMERA_PLAYING())
                            {
                                sub_432( "CCB", "Stopping animated camera!!!", 0 );
                                CAMERA_ANIMATED_STOP( 3000, 0 );
                            }
                            sub_46982( ref l_U684[0], l_U1374, l_U1377, l_U1240 );
                            sub_46982( ref l_U684[1], l_U1380, l_U1383, l_U1241 );
                            sub_46982( ref l_U684[2], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, l_U1239 );
                            ATTACH_CAM_TO_VEHICLE( l_U684[2], g_U2918, l_U1368, 1 );
                            POINT_CAM_AT_VEHICLE( l_U684[2], g_U2918, l_U1371, 1 );
                            if (sub_5220( -384669200, ref g_U1272 ))
                            {
                                sub_432( "CCB", "Registering the PLAYER ped to the S_BUS_VIG_19 ISEQ...", 0 );
                                ISEQ_REGISTER_ENTITY( -384669200, "vig19_player", sub_958(), 0 );
                                sub_432( "CCB", "Registering the piGiovanna ped to the S_BUS_VIG_19 ISEQ...", 0 );
                                ISEQ_REGISTER_ENTITY( -384669200, "vig19_female", g_U2595, 0 );
                                if (NOT (IS_PED_DEAD( l_U271[0] )))
                                {
                                    sub_432( "CCB", "Registering the piRailVCPFTunnelExit_0 ped to the S_BUS_VIG_19 ISEQ...", 0 );
                                    ISEQ_REGISTER_ENTITY( -384669200, "vig19_enemy", l_U271[0], 0 );
                                }
                                else
                                {
                                    sub_432( "CCB", "The piRailVCPFTunnelExit_0 ped is NOT valid!!!", 0 );
                                }
                            }
                            sub_432( "CCB", "eRailBusVig19 - STATE_MIDSCENE_IDLE", 0 );
                            l_U167 = 5;
                        }
                        else
                        {
                            sub_432( "CCB", "The piRailVCPFTunnelExit_0 ped is NOT valid!!!", 0 );
                        }
                    }
                    else
                    {
                        sub_432( "CCB", "Waiting for S_BUS_VIG_19 ISS Animation to load...", 0 );
                    }
                    break;
                    case 5:
                    if (sub_34812( g_U2918, g_U2331, 4765.00000000 ))
                    {
                        if (NOT (ISEQ_QUERY_STATE( -384669200, 3 )))
                        {
                            sub_432( "CCB", "Starting the S_BUS_VIG_19 ISS", 0 );
                            ISEQ_START( -384669200 );
                        }
                        sub_16634( g_U2918, g_U2331, 0.63000000, 3900.00000000 );
                        sub_432( "CCB", "eRailBusVig19 - STATE_MIDSCENE_01", 0 );
                        l_U167 = 6;
                    }
                    break;
                    case 6:
                    sub_44427();
                    sub_17259( 1, 0, 0, 1 );
                    sub_92637();
                    TASK_CLEAR_LOOK_AT( sub_958() );
                    DETACH_PED( sub_958(), 1 );
                    ATTACH_PED_TO_VEHICLE( sub_958(), g_U2918, 0, l_U1362, l_U1237, 0.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1365, l_U1238, 0.00000000, 0, 0, 0, 1 );
                    if (DOES_PED_EXIST( l_U271[0] ))
                    {
                        if (NOT (IS_PED_DEAD( l_U271[0] )))
                        {
                            sub_11485( l_U271[0], l_U1386, l_U1242 );
                        }
                    }
                    if (DOES_PED_EXIST( l_U271[1] ))
                    {
                        if (NOT (IS_PED_DEAD( l_U271[1] )))
                        {
                            TASK_SHOOT_AT_COORD( l_U271[1], 126.21000000, 104.04000000, 0.00000000, 4000, 0, 0, 0 );
                        }
                    }
                    if (DOES_PED_EXIST( l_U271[2] ))
                    {
                        if (NOT (IS_PED_DEAD( l_U271[2] )))
                        {
                            TASK_SHOOT_AT_COORD( l_U271[2], 125.15000000, 97.44000000, 0.00000000, 4000, 0, 0, 0 );
                        }
                    }
                    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                    {
                        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U2918 ))
                        {
                            sub_432( "CCB", "Pausing the viRailBus vehicle recording.", 0 );
                            PAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
                        }
                    }
                    sub_3500( ref l_U267 );
                    sub_47847( ref l_U684[0], ref l_U684[1], 2250, l_U731, l_U732 );
                    l_U554._fU12 = 1749;
                    sub_2187( ref l_U554 );
                    sub_1530( ref l_U554 );
                    sub_432( "CCB", "eRailBusVig19 - STATE_MIDSCENE_02", 0 );
                    l_U167 = 7;
                    break;
                    case 7:
                    if (sub_1650( ref l_U554 ))
                    {
                        if (sub_5220( -384669200, ref g_U1272 ))
                        {
                            sub_432( "CCB", "Setting the Max's node to S_BUS_VIG_19/SEQ_START/MAX/MAX_ANIM.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( sub_958(), "/Global/S_BUS_VIG_19/SEQ_START/MAX/MAX_ANIM" );
                            sub_432( "CCB", "Setting Gio's ISS node to S_BUS_VIG_19/SEQ_START/GIOVANNA/GIOVANNA_ANIM", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_VIG_19/SEQ_START/GIOVANNA/GIOVANNA_ANIM" );
                        }
                        else
                        {
                            sub_432( "CCB", "The S_BUS_VIG_19 ISS is NOT loaded!!!", 0 );
                        }
                        sub_432( "CCB", "eRailBusVig19 - STATE_MIDSCENE_03", 0 );
                        l_U167 = 8;
                    }
                    break;
                    case 8:
                    if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U2918 ))
                    {
                        sub_432( "CCB", "The vehicle recording is stopped.", 0 );
                    }
                    if (sub_6372( g_U2331, ref g_U1474 ))
                    {
                        sub_432( "CCB", "Resuming the vehicle recording.", 0 );
                        UNPAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
                    }
                    if (NOT (IS_PLAYER_DEAD( sub_980() )))
                    {
                        SET_PLAYER_FORCED_AIM( sub_980(), 1, 0 );
                        SET_PED_DEFAULT_AIM_AT_COORD( sub_958(), 166.27000000, 90.50000000, 0.01000000 );
                        TASK_AIM_GUN_AT_COORD( sub_958(), 166.27000000, 90.50000000, 0.01000000, -1, 1 );
                    }
                    SET_CAMERA_OVERRIDE( "RIFLE_AIM_CAMERA_BUS_FRONT", "RIFLE_AIM_CAMERA_BUS_FRONT_AIM", 0, 1, 1 );
                    SET_RAIL_RELATIVE_DIR( 3, 0 );
                    if (NOT (IS_PED_DEAD( l_U271[0] )))
                    {
                        OPEN_SEQUENCE_TASK( ref uVar2 );
                        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
                        if (NOT (IS_PED_DEAD( sub_958() )))
                        {
                            TASK_AIM_GUN_AT_PED( 0, sub_958(), -1, 1 );
                        }
                        CLOSE_SEQUENCE_TASK( uVar2 );
                        TASK_PERFORM_SEQUENCE( l_U271[0], uVar2 );
                        CLEAR_SEQUENCE_TASK( uVar2 );
                    }
                    if (NOT (IS_PED_DEAD( l_U271[1] )))
                    {
                        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U271[1], 0 );
                        TASK_COMBAT_PED( l_U271[1], sub_958() );
                    }
                    if (NOT (IS_PED_DEAD( l_U271[2] )))
                    {
                        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U271[2], 0 );
                        TASK_COMBAT_PED( l_U271[2], sub_958() );
                    }
                    sub_432( "CCB", "The animated camera length is:", 0 );
                    if (NOT (IS_PED_DEAD( sub_958() )))
                    {
                        CAMERA_PLAY_ANIMATED_ATTACHED_PED_RELATIVE( "LEVEL_S_BUS_CP_06", "VIG_19_BUS_MAX_GIO_SEE_CP_CAM", sub_958(), 0, 0 );
                    }
                    l_U554._fU12 = 2129;
                    sub_2187( ref l_U554 );
                    sub_1530( ref l_U554 );
                    sub_432( "CCB", "eRailBusVig19 - STATE_MIDSCENE_04", 0 );
                    l_U167 = 9;
                    break;
                    case 9:
                    if (sub_1650( ref l_U554 ))
                    {
                        if (ISEQ_QUERY_STATE( -384669200, 3 ))
                        {
                            sub_432( "CCB", "Terminating the S_BUS_VIG_19 ISS.", 0 );
                            ISEQ_UNREGISTER_ENTITY( -384669200, "vig19_player" );
                            ISEQ_UNREGISTER_ENTITY( -384669200, "vig19_female" );
                            ISEQ_UNREGISTER_ENTITY( -384669200, "vig19_enemy" );
                            ISEQ_TERMINATE( -384669200 );
                            sub_5527( -384669200, ref g_U1272 );
                        }
                        if (NOT (IS_PED_DEAD( sub_958() )))
                        {
                            if (sub_12605( ref g_U2008, ref g_U1535 ))
                            {
                                sub_432( "CCB", "Setting the node to BUS_RAILSHOOTER_STANCE_FRONT.", 0 );
                                PED_ACTION_TREE_PLAY_NODE( sub_958(), "/Global/BUS_RAILSHOOTER/BUS_RAILSHOOTER_STANCE_FRONT" );
                            }
                            else
                            {
                                sub_432( "CCB", "The s_bus_railshooter action tree is NOT loaded!!!", 0 );
                            }
                        }
                        if (sub_12605( ref g_U2024, ref g_U1535 ))
                        {
                            sub_432( "CCB", "Setting Gio's ISS node to S_BUS_17_OFELIABUS/EVENT_02_TUNNEL_TIMELINE/04_Driving", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_17_OFELIABUS/EVENT_02_TUNNEL_TIMELINE/04_Driving" );
                        }
                        else
                        {
                            sub_432( "CCB", "The txtRailOfeliaBus action tree is NOT loaded!!!", 0 );
                        }
                        sub_16634( g_U2918, g_U2331, 0.63000000, 5430.00000000 );
                        sub_432( "CCB", "Enabling the camera aim override...", 0 );
                        CAMERA_AIM_OVERRIDE( 1 );
                        SET_FORCED_AIM_INTENTION_DIRECTION( 0.97115200, -0.23367800, -0.04752300 );
                        SET_FORCED_FORWARD_DIRECTION( 0.85915100, -0.51172200, 0.00000000 );
                        sub_432( "CCB", "eRailBusVig19 - STATE_MIDSCENE_POST_MIDSCENE", 0 );
                        l_U167 = 36;
                    }
                    else
                    {
                        sub_432( "CCB", "The animated camera current time:", 0 );
                    }
                    break;
                    case 36:
                    sub_432( "CCB", "Attaching the player.", 0 );
                    DETACH_PED( sub_958(), 1 );
                    ATTACH_PED_TO_VEHICLE( sub_958(), g_U2918, 0, l_U1359, l_U1234, 0.00000000, 1, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                    sub_432( "CCB", "Attaching Gio.", 0 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1276, l_U1223, 0, 1, 0, 0, 1 );
                    if (((IS_PED_DEAD( l_U271[0] )) == 0) AND ((DOES_PED_EXIST( l_U271[0] )) == 1))
                    {
                        sub_11485( l_U271[0], l_U1386, l_U1242 );
                    }
                    STOP_CAM_SHAKING( l_U684[2], 0 );
                    sub_23831( 0, 0, 0, 18.00000000, -5.00000000, 0 );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                        sub_432( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                    SET_WIDESCREEN_BORDERS( 0, 500 );
                    if (NOT (IS_PED_DEAD( sub_958() )))
                    {
                        SET_PLAYER_CONTROL( sub_980(), 1, 0 );
                        sub_67309();
                    }
                    PULSE_CROSSHAIR( 1 );
                    DESTROY_ALL_CAMS();
                    TOGGLE_DISPLAY_AMMO( 0 );
                    l_U142 = 0;
                    sub_1394( ref l_U437, 250, 1, 0 );
                    sub_1530( ref l_U437 );
                    sub_3888( ref l_U684 );
                    sub_432( "CCB", "eRailBusVig19 - STATE_MIDSCENE_COMPLETE", 0 );
                    l_U167 = 39;
                    break;
                    case 39: break;
                }
            }
            else
            {
                sub_432( "CCB", "The viRailBus vehicle is NOT valid!!!", 0 );
            }
        }
        else
        {
            sub_432( "CCB", "The piGiovanna ped is NOT valid!!!", 0 );
        }
    }
    else
    {
        sub_432( "CCB", "The PLAYER_PED_ID ped is NOT valid!!!", 0 );
    }
    return;
}

void sub_92637()
{
    sub_432( "CCB", "P_INITIALIZE_IMAGEFX_VIG_19_BUS", 0 );
    sub_79799( ref l_U1773 );
    l_U1773[0]._fU4 = "DOUBLE_TINT_BLUE_FLASH";
    l_U1773[0]._fU12 = 0;
    l_U1773[0]._fU8 = 4;
    l_U1773[0]._fU32 = 0;
    l_U1773[1]._fU4 = "TRIPLE_IMAGE_BLUR_DOWN_LEFT";
    l_U1773[1]._fU12 = 450;
    l_U1773[1]._fU16 = 1150;
    l_U1773[1]._fU24 = 1;
    l_U1773[1]._fU8 = 4;
    l_U1773[1]._fU32 = 0;
    l_U72 = 0;
    return;
}

void sub_96327()
{
    if (NOT l_U133)
    {
        if (IS_EXPLOSION_IN_SPHERE( 2, l_U1323, 20.00000000 ))
        {
            l_U133 = 1;
            sub_432( "CCB", "Rocket has exploded...", 0 );
            sub_86674();
            sub_1530( ref l_U563 );
        }
    }
    if (l_U172 >= 11)
    {
        if (NOT l_U136)
        {
            if ((IS_BULLET_CAMERA_ACTIVE()) || (IS_BULLET_CAMERA_RUNNING( 0 )))
            {
                if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                {
                    l_U136 = 1;
                    sub_432( "CCB", "Pausing the player's bus during bullet cam on rocket ped.", 0 );
                    PAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
                }
            }
        }
        if (sub_1650( ref l_U671 ))
        {
            sub_432( "CCB", "Shooting stray rocket...", 0 );
            SHOOT_SINGLE_BULLET_BETWEEN_COORDS( 165.41000000, 91.13000000, 0.91000000, 165.21000000, 98.84000000, 0.85000000, 100, 0, g_U2861, 0 );
            sub_1394( ref l_U662, 400, 1, 0 );
            sub_1530( ref l_U662 );
        }
        if (sub_1650( ref l_U662 ))
        {
            if (NOT (IS_VEHICLE_DEAD( l_U291[2] )))
            {
                sub_432( "CCB", "Exploding the viRailTunnelVehicles_2 vehicle...", 0 );
                EXPLODE_VEHICLE( l_U291[2], 1, 0 );
                SHAKE_GAMEPLAY_CAM( "SMALL_EXPLOSION_SHAKE", 0.30000000 );
                SET_PAD_SHAKE( 0, l_U464._fU12, 64 );
            }
        }
    }
    switch (l_U172)
    {
        case 0:
        sub_432( "CCB", "eRocketEvent - STATE_EVENT_IN", 0 );
        l_U172 = 7;
        break;
        case 7:
        if (l_U167 == 39)
        {
            sub_1394( ref l_U545, 600, 1, 0 );
            sub_1530( ref l_U545 );
            sub_432( "CCB", "eRocketEvent - STATE_EVENT_01", 0 );
            l_U172 = 10;
        }
        break;
        case 10:
        if (sub_1650( ref l_U545 ))
        {
            if (NOT (IS_PED_DEAD( l_U271[0] )))
            {
                l_U134 = 1;
                sub_44427();
                sub_97133();
                sub_35326( "SBUS_RS_C", ref g_U1704 );
                sub_432( "CCB", "eRocketEvent - STATE_EVENT_02", 0 );
                l_U172 = 11;
            }
            else
            {
                sub_432( "CCB", "The piRailVCPFTunnelExit_0 ped is dead.", 0 );
                l_U135 = 1;
                l_U121 = 0;
                sub_432( "CCB", "eRocketEvent - STATE_EVENT_COMPLETE", 0 );
                l_U172 = 44;
            }
        }
        break;
        case 11:
        if ((NOT l_U135) AND (l_U134))
        {
            if (IS_PED_DEAD( l_U271[0] ))
            {
                sub_432( "CCB", "The piRailVCPFTunnelExit_0 ped is dead.", 0 );
                l_U135 = 1;
                l_U121 = 0;
                sub_432( "CCB", "eRocketEvent - STATE_EVENT_COMPLETE", 0 );
                l_U172 = 44;
            }
            else if (IS_BULLET_CAMERA_RUNNING( 0 ))
            {
                sub_432( "CCB", "The bulletcam was started...", 0 );
                sub_432( "CCB", "eRocketEvent - STATE_EVENT_03", 0 );
                l_U172 = 12;
            }
        }
        break;
        case 12:
        if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
        {
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                if (sub_34812( g_U2918, g_U2331, 6700.00000000 ))
                {
                    sub_46333();
                    if (NOT (IS_PLAYER_DEAD( sub_980() )))
                    {
                        SET_PLAYER_FORCED_AIM( sub_980(), 0, 0 );
                    }
                    sub_1394( ref l_U671, 125, 1, 0 );
                    sub_1530( ref l_U671 );
                    sub_432( "CCB", "eRocketEvent - STATE_EVENT_COMPLETE", 0 );
                    l_U172 = 44;
                }
                else
                {
                    sub_46333();
                    sub_432( "CCB", "UN-Pausing the player's bus after bullet cam on rocket ped.", 0 );
                    UNPAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
                    sub_23831( 0, 0, 0, -859915232, -859915232, 0 );
                    if (NOT (IS_PLAYER_DEAD( sub_980() )))
                    {
                        SET_PLAYER_CONTROL( sub_980(), 1, 0 );
                    }
                    DISPLAY_HUD( 1 );
                    sub_67309();
                    sub_44859();
                    sub_1394( ref l_U671, 125, 1, 0 );
                    sub_1530( ref l_U671 );
                    sub_432( "CCB", "eRocketEvent - STATE_EVENT_04", 0 );
                    l_U172 = 13;
                }
            }
        }
        else
        {
            sub_432( "CCB", "Waiting for the bulletcam to finish...", 0 );
        }
        break;
        case 13:
        if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
        {
            if (sub_34812( g_U2918, g_U2331, 7400.00000000 ))
            {
                sub_432( "CCB", "eRocketEvent - STATE_EVENT_COMPLETE", 0 );
                l_U172 = 44;
            }
        }
        break;
        case 44: break;
    }
    return;
}

void sub_97133()
{
    sub_432( "CCB", "P_RAIL_START_ROCKET_EVENT", 0 );
    ACTIVATE_BULLET_TIME( 0, 0.40000000, 1 );
    DISPLAY_HUD( 0 );
    ENABLE_CROSSHAIR( 1 );
    SET_INSTANT_FIRE_FORCED( 0 );
    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        CLEAR_PED_DEFAULT_AIM( sub_958() );
        SET_PED_CONSUMING_AMMO( sub_958(), 0 );
    }
    if (((IS_PED_DEAD( l_U271[0] )) == 0) AND ((DOES_PED_EXIST( l_U271[0] )) == 1))
    {
        sub_432( "CCB", "Setting the ped to one shot kill...", 0 );
        SET_PED_INVINCIBLE( l_U271[0], 0 );
        SET_PED_PROOFS( l_U271[0], 0, 0, 0, 0, 0 );
        SET_PED_CAN_RAGDOLL( l_U271[0], 1 );
        SET_PED_AS_ONE_SHOT_KILL( l_U271[0], 1 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( l_U271[0], 1 );
        SET_BULLET_CAM_PREF( l_U271[0], "RIF_CUSTOM_01_BUS_RS", "RIF_CUSTOM_01_BUS_RS", "RIF_CUSTOM_01_BUS_RS", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
    }
    if (DOES_VEHICLE_EXIST( g_U2918 ))
    {
        if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
        {
            if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U2918 ))
            {
                sub_432( "CCB", "Re-setting the playback speed to:", 0 );
                SET_PLAYBACK_SPEED( g_U2918, 0.63000000 );
            }
        }
    }
    return;
}

void sub_98729()
{
    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        if (NOT (IS_PED_DEAD( g_U2595 )))
        {
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                if ((l_U168 < 37) AND (l_U168 > 4))
                {
                    sub_77755( ref l_U1882 );
                    if (l_U168 >= 6)
                    {
                        if (sub_1650( ref l_U491 ))
                        {
                            SHAKE_CAM( l_U688[2], "SMALL_EXPLOSION_SHAKE", 0.35000000 );
                            SET_PAD_SHAKE( 0, 500, 64 );
                        }
                        if (sub_1650( ref l_U500 ))
                        {
                            sub_432( "GA", "Crash Island shake start.", 0 );
                            SHAKE_CAM( l_U688[3], "MEDIUM_EXPLOSION_SHAKE", 0.40000000 );
                            SET_PAD_SHAKE( 0, l_U500._fU12, 128 );
                            sub_1394( ref l_U509, 1200, 1, 0 );
                            sub_1530( ref l_U509 );
                            sub_432( "CCB", "Particle FX - BusDepot_RailShtr_BusShack_S", 0 );
                            START_PARTICLE_FX_NON_LOOPED_AT_COORD( "BusDepot_RailShtr_BusShack_S", l_U1317, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
                        }
                        if (sub_1650( ref l_U509 ))
                        {
                            sub_432( "GA", "Crash Island shake end.", 0 );
                            STOP_CAM_SHAKING( l_U688[4], 0 );
                        }
                    }
                }
                switch (l_U168)
                {
                    case 0:
                    if (l_U134)
                    {
                        sub_432( "CCB", "eRailBusMid12 - STATE_MIDSCENE_INIT", 0 );
                        if (NOT (sub_5220( 1783795551, ref g_U1272 )))
                        {
                            sub_432( "CCB", "Loading the S_BUS_MID_12 ISS.", 0 );
                            sub_72767( 1783795551, ref g_U1272 );
                        }
                        if (NOT (sub_6372( g_U2332, ref g_U1474 )))
                        {
                            sub_432( "CCB", "Loading the gnRailshooterBusPart2b vehicle recording.", 0 );
                            sub_63363( g_U2332, ref g_U1474 );
                        }
                        if (NOT (sub_6372( g_U2333, ref g_U1474 )))
                        {
                            sub_432( "CCB", "Loading the gnRailshooterBusPart3 vehicle recording.", 0 );
                            sub_63363( g_U2333, ref g_U1474 );
                        }
                        sub_432( "CCB", "eRailBusMid12 - STATE_MIDSCENE_PRELOAD", 0 );
                        l_U168 = 1;
                    }
                    break;
                    case 1:
                    if (sub_5220( 1783795551, ref g_U1272 ))
                    {
                        sub_46982( ref l_U688[0], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                        ATTACH_CAM_TO_VEHICLE( l_U688[0], g_U2918, l_U1392[0], 1 );
                        POINT_CAM_AT_VEHICLE( l_U688[0], g_U2918, l_U1408[0], 1 );
                        sub_46982( ref l_U688[1], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                        ATTACH_CAM_TO_VEHICLE( l_U688[1], g_U2918, l_U1392[1], 1 );
                        POINT_CAM_AT_VEHICLE( l_U688[1], g_U2918, l_U1408[1], 1 );
                        sub_46982( ref l_U688[2], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 40.55000000 );
                        ATTACH_CAM_TO_VEHICLE( l_U688[2], g_U2918, l_U1392[2], 1 );
                        POINT_CAM_AT_VEHICLE( l_U688[2], g_U2918, l_U1408[2], 1 );
                        sub_46982( ref l_U688[3], 187.33140000, 89.85388000, 1.64205600, -1.21612400, -0.00074300, 82.12757000, 45.00000000 );
                        sub_46982( ref l_U688[4], 193.79270000, 89.26176000, 1.77945800, -1.19987900, -0.00074300, 81.66016000, 45.00000000 );
                        sub_46982( ref l_U688[5], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                        ATTACH_CAM_TO_VEHICLE( l_U688[5], g_U2918, l_U1392[3], 1 );
                        POINT_CAM_AT_VEHICLE( l_U688[5], g_U2918, l_U1408[3], 1 );
                        sub_46982( ref l_U688[6], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                        ATTACH_CAM_TO_VEHICLE( l_U688[6], g_U2918, l_U1392[4], 1 );
                        POINT_CAM_AT_VEHICLE( l_U688[6], g_U2918, l_U1408[4], 1 );
                        if (IS_ANIMATED_CAMERA_PLAYING())
                        {
                            sub_432( "CCB", "Stopping animated camera!!!", 0 );
                            CAMERA_ANIMATED_STOP( 3000, 0 );
                        }
                        sub_432( "CCB", "eRailBusMid12 - STATE_MIDSCENE_IDLE", 0 );
                        l_U168 = 5;
                    }
                    else
                    {
                        sub_432( "CCB", "Waiting for S_BUS_MID_12 ISS Animation to load...", 0 );
                    }
                    break;
                    case 5:
                    if (l_U172 == 12)
                    {
                        if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
                        {
                            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                            {
                                if (sub_34812( g_U2918, g_U2331, 6700.00000000 ))
                                {
                                    if (sub_5220( 1783795551, ref g_U1272 ))
                                    {
                                        sub_432( "CCB", "Setting Max's node to S_BUS_MID_12/SEQ_START/MAX/PART1_ANIM.", 0 );
                                        PED_ACTION_TREE_PLAY_NODE( sub_958(), "/Global/S_BUS_MID_12/SEQ_START/MAX/PART1_ANIM" );
                                        sub_432( "CCB", "Setting Gio's ISS node to S_BUS_MID_12/SEQ_START/GIO/PART1_ANIM", 0 );
                                        PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_MID_12/SEQ_START/GIO/PART1_ANIM" );
                                    }
                                    else
                                    {
                                        sub_432( "CCB", "The S_BUS_MID_12 ISS is NOT loaded!!!", 0 );
                                    }
                                    sub_16634( g_U2918, g_U2332, 1.00000000, 1350.00000000 );
                                    sub_432( "CCB", "eRailBusMid12 - STATE_MIDSCENE_01", 0 );
                                    l_U168 = 6;
                                }
                            }
                        }
                    }
                    else if (l_U172 == 44)
                    {
                        if (sub_5220( 1783795551, ref g_U1272 ))
                        {
                            sub_432( "CCB", "Setting Max's node to S_BUS_MID_12/SEQ_START/MAX/PART1_ANIM.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( sub_958(), "/Global/S_BUS_MID_12/SEQ_START/MAX/PART1_ANIM" );
                            sub_432( "CCB", "Setting Gio's ISS node to S_BUS_MID_12/SEQ_START/GIO/PART1_ANIM", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_MID_12/SEQ_START/GIO/PART1_ANIM" );
                        }
                        else
                        {
                            sub_432( "CCB", "The S_BUS_MID_12 ISS is NOT loaded!!!", 0 );
                        }
                        sub_16634( g_U2918, g_U2332, 1.00000000, 1350.00000000 );
                        sub_101498();
                        sub_432( "CCB", "eRailBusMid12 - STATE_MIDSCENE_01", 0 );
                        l_U168 = 6;
                    }
                    break;
                    case 6:
                    l_U135 = 1;
                    if (NOT (IS_PLAYER_DEAD( sub_980() )))
                    {
                        sub_432( "CCB", "Disabling forced aim mode...", 0 );
                        SET_PLAYER_FORCED_AIM( sub_980(), 0, 0 );
                    }
                    SET_VEHICLE_EXTRA( g_U2918, 3, 1 );
                    SET_VEHICLE_EXTRA( g_U2918, 8, 1 );
                    SET_VEHICLE_EXTRA( g_U2918, 9, 0 );
                    sub_44427();
                    sub_17259( 1, 0, 0, 1 );
                    DETACH_PED( sub_958(), 1 );
                    ATTACH_PED_TO_VEHICLE( sub_958(), g_U2918, 0, l_U1424, l_U1243, 0.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1430, l_U1245, 0.00000000, 0, 0, 0, 1 );
                    if (DOES_PED_EXIST( l_U271[1] ))
                    {
                        if (NOT (IS_PED_DEAD( l_U271[1] )))
                        {
                            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U271[1], 1 );
                            TASK_FOLLOW_NAV_MESH_TO_COORD( l_U271[1], 173.11000000, 99.28000000, 0.10000000, 3, -1, 1048576000, 0, 0 );
                        }
                    }
                    if (DOES_PED_EXIST( l_U271[2] ))
                    {
                        if (NOT (IS_PED_DEAD( l_U271[2] )))
                        {
                            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U271[2], 1 );
                            TASK_FOLLOW_NAV_MESH_TO_COORD( l_U271[2], 159.45000000, 77.21000000, 0.10000000, 3, -1, 1048576000, 0, 0 );
                        }
                    }
                    sub_432( "CCB", "The animated camera length is:", 0 );
                    if (NOT (IS_PED_DEAD( sub_958() )))
                    {
                        CAMERA_PLAY_ANIMATED_ATTACHED_PED_RELATIVE( "LEVEL_S_BUS_CP_06", "BUSRIDE_3_CAM", sub_958(), 0, 0 );
                    }
                    sub_1394( ref l_U491, 1, 1, 0 );
                    sub_1530( ref l_U491 );
                    if (sub_6372( g_U2331, ref g_U1474 ))
                    {
                        sub_432( "CCB", "Unloading the gnRailshooterBusPart2 vehicle recording.", 0 );
                        sub_6537( g_U2331, ref g_U1474 );
                    }
                    l_U572._fU12 = 2330;
                    sub_2187( ref l_U572 );
                    sub_1530( ref l_U572 );
                    sub_432( "CCB", "eRailBusMid12 - STATE_MIDSCENE_02", 0 );
                    l_U168 = 7;
                    break;
                    case 7:
                    if (sub_1650( ref l_U572 ))
                    {
                        sub_3500( ref l_U271 );
                        sub_1394( ref l_U491, 700, 1, 0 );
                        sub_1530( ref l_U491 );
                        l_U572._fU12 = 999;
                        sub_2187( ref l_U572 );
                        sub_1530( ref l_U572 );
                        sub_432( "CCB", "eRailBusMid12 - STATE_MIDSCENE_03", 0 );
                        l_U168 = 8;
                    }
                    else
                    {
                        sub_432( "CCB", "The animated camera current time:", 0 );
                    }
                    break;
                    case 8:
                    if (sub_1650( ref l_U572 ))
                    {
                        if (DOES_OBJECT_EXIST( l_U307[0] ))
                        {
                            PLAY_OBJECT_ANIM( l_U307[0], "P_AN_BUSISL_AA_H", ref g_U1896, 1000.00000000, 0, 1 );
                        }
                        sub_432( "CCB", "eRailBusMid12 - STATE_MIDSCENE_04", 0 );
                        l_U168 = 9;
                    }
                    else
                    {
                        sub_432( "CCB", "The animated camera current time:", 0 );
                    }
                    break;
                    case 9:
                    STOP_CAM_SHAKING( l_U688[2], 0 );
                    sub_47847( ref l_U688[3], ref l_U688[4], 3000, 1, 1 );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                        sub_432( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                    sub_1394( ref l_U500, 500, 1, 0 );
                    sub_1530( ref l_U500 );
                    l_U572._fU12 = 2999;
                    sub_2187( ref l_U572 );
                    sub_1530( ref l_U572 );
                    sub_432( "CCB", "eRailBusMid12 - STATE_MIDSCENE_05", 0 );
                    l_U168 = 10;
                    break;
                    case 10:
                    if (sub_1650( ref l_U572 ))
                    {
                        if (sub_5220( 1783795551, ref g_U1272 ))
                        {
                            sub_432( "CCB", "Setting Max's node to S_BUS_MID_12/SEQ_START/MAX/PART2_ANIM.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( sub_958(), "/Global/S_BUS_MID_12/SEQ_START/MAX/PART2_ANIM" );
                            sub_432( "CCB", "Setting Gio's ISS node to S_BUS_MID_12/SEQ_START/GIO/PART2_ANIM", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_MID_12/SEQ_START/GIO/PART2_ANIM" );
                        }
                        else
                        {
                            sub_432( "CCB", "The S_BUS_MID_12 ISS is NOT loaded!!!", 0 );
                        }
                        sub_16634( g_U2918, g_U2332, 1.00000000, 6300.00000000 );
                        sub_432( "CCB", "eRailBusMid12 - STATE_MIDSCENE_06", 0 );
                        l_U168 = 11;
                    }
                    break;
                    case 11:
                    sub_432( "CCB", "Attaching the player.", 0 );
                    DETACH_PED( sub_958(), 1 );
                    ATTACH_PED_TO_VEHICLE( sub_958(), g_U2918, 0, l_U1427, l_U1244, 0.00000000, 1, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                    sub_432( "CCB", "Attaching Gio.", 0 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1433, l_U1246, 0, 1, 0, 0, 1 );
                    sub_432( "CCB", "The animated camera length is:", 0 );
                    if (NOT (IS_PED_DEAD( sub_958() )))
                    {
                        CAMERA_PLAY_ANIMATED_ATTACHED_PED_RELATIVE( "LEVEL_S_BUS_CP_06", "BUSRIDE_4_CAM", sub_958(), 0, 0 );
                    }
                    l_U572._fU12 = 1650;
                    sub_2187( ref l_U572 );
                    sub_1530( ref l_U572 );
                    sub_432( "CCB", "eRailBusMid12 - STATE_MIDSCENE_07", 0 );
                    l_U168 = 12;
                    break;
                    case 12:
                    if (sub_1650( ref l_U572 ))
                    {
                        sub_104183();
                        l_U572._fU12 = 1649;
                        sub_2187( ref l_U572 );
                        sub_1530( ref l_U572 );
                        if (NOT (IS_PLAYER_DEAD( sub_980() )))
                        {
                            SET_PLAYER_FORCED_AIM( sub_980(), 1, 1 );
                        }
                        SET_CAMERA_OVERRIDE( "RAIL_BUS_CAMERA_AIM", "RAIL_BUS_CAMERA_AIM", 0, 1, 1 );
                        SET_RAIL_RELATIVE_DIR( 2, 0 );
                        SET_PLAYER_COMBAT_TIMER_MODE( 1 );
                        sub_1394( ref l_U437, 500, 1, 0 );
                        sub_1530( ref l_U437 );
                        sub_59288( -1221193536, ref g_U910 );
                        sub_432( "CCB", "eRailBusMid12 - STATE_MIDSCENE_08", 0 );
                        l_U168 = 13;
                    }
                    else
                    {
                        sub_432( "CCB", "The animated camera current time:", 0 );
                    }
                    break;
                    case 13:
                    if (sub_1650( ref l_U572 ))
                    {
                        if (ISEQ_QUERY_STATE( 1783795551, 3 ))
                        {
                            sub_432( "CCB", "Terminating the S_BUS_MID_12 ISS.", 0 );
                            ISEQ_UNREGISTER_ENTITY( 1783795551, "mid12_player" );
                            ISEQ_UNREGISTER_ENTITY( 1783795551, "mid12_female" );
                            ISEQ_TERMINATE( 1783795551 );
                            sub_5527( 1783795551, ref g_U1272 );
                        }
                        if (sub_12605( ref g_U2008, ref g_U1535 ))
                        {
                            sub_432( "CCB", "Setting the animation node for the player to BUS_RAILSHOOTER_STANCE_RIGHT.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( sub_958(), "/Global/BUS_RAILSHOOTER/BUS_RAILSHOOTER_STANCE_RIGHT" );
                        }
                        else
                        {
                            sub_432( "CCB", "The s_bus_railshooter action tree is NOT loaded!!!", 0 );
                        }
                        if (sub_12605( ref g_U2024, ref g_U1535 ))
                        {
                            sub_432( "CCB", "Setting the animation node for Gio to EVENT_04_TERMINAL_TIMELINE/01_Driving.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_17_OFELIABUS/EVENT_04_TERMINAL_TIMELINE/01_Driving" );
                        }
                        else
                        {
                            sub_432( "CCB", "The txtRailOfeliaBus action tree is NOT loaded!!!", 0 );
                        }
                        sub_16634( g_U2918, g_U2333, 3.00000000, 3000.00000000 );
                        sub_432( "CCB", "Enabling the camera aim override...", 0 );
                        CAMERA_AIM_OVERRIDE( 1 );
                        SET_FORCED_AIM_INTENTION_DIRECTION( -0.01959000, -0.99971400, 0.01373500 );
                        SET_FORCED_FORWARD_DIRECTION( -0.99971700, -0.02380300, 0.00000000 );
                        sub_432( "CCB", "eRailBusMid12 - STATE_MIDSCENE_POST_MIDSCENE", 0 );
                        l_U168 = 36;
                    }
                    else
                    {
                        sub_432( "CCB", "The animated camera current time:", 0 );
                    }
                    break;
                    case 36:
                    sub_432( "CCB", "STATE_MIDSCENE_POST_MIDSCENE start.", 0 );
                    sub_432( "CCB", "Attaching the player.", 0 );
                    DETACH_PED( sub_958(), 1 );
                    ATTACH_PED_TO_VEHICLE( sub_958(), g_U2918, 0, l_U1273, l_U1222, 0.00000000, 1, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                    sub_432( "CCB", "Attaching Gio.", 0 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1276, l_U1223, 0, 1, 0, 0, 1 );
                    sub_105765();
                    SET_GENERATE_BULLET_SHELLS( 0 );
                    SET_HIGH_RAGDOLL_LOD_LIMIT( 1 );
                    sub_23831( 0, 0, 0, 88.00000000, 0.00000000, 0 );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                        sub_432( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                    sub_67228( 1, 1 );
                    sub_44859();
                    TOGGLE_DISPLAY_AMMO( 0 );
                    sub_3666( ref l_U291 );
                    sub_3807( l_U307[0] );
                    sub_3888( ref l_U688 );
                    if (sub_6372( g_U2332, ref g_U1474 ))
                    {
                        sub_432( "CCB", "Unloading the gnRailshooterBusPart2b vehicle recording.", 0 );
                        sub_6537( g_U2332, ref g_U1474 );
                    }
                    l_U142 = 0;
                    sub_1394( ref l_U437, 250, 1, 0 );
                    sub_1530( ref l_U437 );
                    sub_432( "CCB", "eCheckpoint - STATE_CHECKPOINT_RAILSHOOTER_03", 0 );
                    l_U145 = 13;
                    sub_432( "CCB", "eRailBusMid12 - STATE_MIDSCENE_COMPLETE", 0 );
                    l_U168 = 39;
                    break;
                    case 39:
                    sub_432( "CCB", "eRailBusMid12 - STATE_MIDSCENE_COMPLETE - START", 0 );
                    break;
                }
            }
            else
            {
                sub_432( "CCB", "The viRailBus vehicle is NOT valid!!!", 0 );
            }
        }
        else
        {
            sub_432( "CCB", "The piGiovanna ped is NOT valid!!!", 0 );
        }
    }
    else
    {
        sub_432( "CCB", "The PLAYER_PED_ID ped is NOT valid!!!", 0 );
    }
    return;
}

void sub_101498()
{
    sub_432( "CCB", "P_INITIALIZE_IMAGEFX_MID_12_BUS", 0 );
    sub_79799( ref l_U1882 );
    l_U1882[0]._fU4 = "TRIPLE_MOVE_RIGHT_COLOR_SPLIT5";
    l_U1882[0]._fU12 = 0;
    l_U1882[0]._fU8 = 4;
    l_U1882[0]._fU32 = 0;
    l_U1882[1]._fU4 = "TRIPLE_MOVE_RIGHT_COLOR_SPLIT6";
    l_U1882[1]._fU12 = 2200;
    l_U1882[1]._fU8 = 4;
    l_U1882[1]._fU32 = 0;
    l_U1882[2]._fU4 = "TRIPLE_INTERLACE_HOLD";
    l_U1882[2]._fU12 = 3100;
    l_U1882[2]._fU8 = 4;
    l_U1882[2]._fU32 = 0;
    l_U1882[3]._fU4 = "GAMMA_SATURATION_COLOR_ZOOM_3";
    l_U1882[3]._fU12 = 6500;
    l_U1882[3]._fU8 = 4;
    l_U1882[3]._fU32 = 0;
    l_U72 = 0;
    return;
}

void sub_104183()
{
    sub_432( "CCB", "P_SPAWN_RAIL_BUS_HIT", 0 );
    l_U290 = sub_15219( 1572429640, l_U1326, l_U1247, 0, 0, 0 );
    if (NOT (IS_VEHICLE_DEAD( l_U290 )))
    {
        SET_VEHICLE_EXTRA( l_U290, 3, 0 );
        SET_VEHICLE_EXTRA( l_U290, 8, 1 );
        SET_VEHICLE_EXTRA( l_U290, 9, 1 );
    }
    return;
}

void sub_105765()
{
    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        sub_432( "CCB", "P_START_RAIL_TERMINAL_VCPF", 0 );
        if (NOT (IS_PED_DEAD( l_U275[0] )))
        {
            REGISTER_TARGET( l_U275[0], sub_958() );
            SET_LOCKED_TARGET( l_U275[0], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 500 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 199.66000000, 52.83000000, 0.35000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[0], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U275[1] )))
        {
            REGISTER_TARGET( l_U275[1], sub_958() );
            SET_LOCKED_TARGET( l_U275[1], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 200.53000000, 44.21000000, 0.35000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[1], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U275[2] )))
        {
            REGISTER_TARGET( l_U275[2], sub_958() );
            SET_LOCKED_TARGET( l_U275[2], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 1000 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 200.01000000, 38.35000000, 0.35000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[2], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U275[3] )))
        {
            REGISTER_TARGET( l_U275[3], sub_958() );
            SET_LOCKED_TARGET( l_U275[3], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 1000 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 200.15000000, 33.20000000, 0.35000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[3], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U275[4] )))
        {
            REGISTER_TARGET( l_U275[4], sub_958() );
            SET_LOCKED_TARGET( l_U275[4], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 1000 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 200.76000000, 21.72000000, 0.35000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[4], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U275[5] )))
        {
            REGISTER_TARGET( l_U275[5], sub_958() );
            SET_LOCKED_TARGET( l_U275[5], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 5500 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 199.46000000, 20.66000000, 0.35000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[5], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U275[6] )))
        {
            REGISTER_TARGET( l_U275[6], sub_958() );
            SET_LOCKED_TARGET( l_U275[6], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 5500 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 200.44000000, 14.06000000, 0.35000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[6], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U275[7] )))
        {
            REGISTER_TARGET( l_U275[7], sub_958() );
            SET_LOCKED_TARGET( l_U275[7], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 5500 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 199.08000000, 11.70000000, 0.35000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[7], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U275[8] )))
        {
            REGISTER_TARGET( l_U275[8], sub_958() );
            SET_LOCKED_TARGET( l_U275[8], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 6000 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 200.11000000, -1.28000000, 0.35000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[8], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
        if (NOT (IS_PED_DEAD( l_U275[9] )))
        {
            REGISTER_TARGET( l_U275[9], sub_958() );
            SET_LOCKED_TARGET( l_U275[9], sub_958() );
            OPEN_SEQUENCE_TASK( ref l_U737 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_STAND_STILL( 0, 6500 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 199.60000000, -5.08000000, 0.35000000, sub_958(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_958() );
            CLOSE_SEQUENCE_TASK( l_U737 );
            TASK_PERFORM_SEQUENCE( l_U275[9], l_U737 );
            CLEAR_SEQUENCE_TASK( l_U737 );
        }
    }
    return;
}

void sub_108941()
{
    if (NOT (IS_PED_DEAD( sub_958() )))
    {
        if (NOT (IS_PED_DEAD( g_U2595 )))
        {
            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
            {
                if ((l_U169 < 37) AND (l_U169 > 4))
                {
                    sub_77755( ref l_U1991 );
                    if (sub_34812( l_U290, g_U2335, 6900.00000000 ))
                    {
                        if (DOES_VEHICLE_EXIST( l_U290 ))
                        {
                            if (NOT (IS_VEHICLE_DEAD( l_U290 )))
                            {
                                if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( l_U290 ))
                                {
                                    sub_432( "CCB", "Stop the path of the bus hit.", 0 );
                                    STOP_PLAYBACK_RECORDED_VEHICLE( l_U290 );
                                }
                            }
                        }
                    }
                    if (DOES_VEHICLE_EXIST( l_U290 ))
                    {
                        if (NOT (IS_VEHICLE_DEAD( l_U290 )))
                        {
                            if ((sub_1650( ref l_U581 )) == 1)
                            {
                                sub_432( "GA", "Starting PFX BusDepot_BusesCollide_S", 0 );
                                START_PARTICLE_FX_LOOPED_ON_VEHICLE( "BusDepot_BusesCollide_S", l_U290, l_U1389, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
                                SHAKE_CAM( l_U696[3], "SMALL_EXPLOSION_SHAKE", 0.35000000 );
                                SHAKE_CAM( l_U696[6], "SMALL_EXPLOSION_SHAKE", 0.35000000 );
                                SET_PAD_SHAKE( 0, l_U590._fU12, 64 );
                                sub_1530( ref l_U590 );
                            }
                            if ((sub_1650( ref l_U590 )) == 1)
                            {
                                sub_432( "GA", "Stoping PFX on the hitting bus.", 0 );
                                REMOVE_PARTICLE_FX_FROM_VEHICLE( l_U290 );
                                STOP_CAM_SHAKING( l_U696[3], 0 );
                                STOP_CAM_SHAKING( l_U696[6], 0 );
                            }
                        }
                    }
                    if (sub_1650( ref l_U599 ))
                    {
                        sub_432( "GA", "Playing Crash Building PFX.", 0 );
                        START_PARTICLE_FX_NON_LOOPED_AT_COORD( "BusDepot_RailShtr_Crash_S", l_U1329, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
                        if (DOES_OBJECT_EXIST( l_U310[2] ))
                        {
                            PLAY_OBJECT_ANIM( l_U310[2], "p_bd_wallsmh_ba", ref g_U1896, 1000.00000000, 0, 1 );
                        }
                        if (DOES_OBJECT_EXIST( l_U310[3] ))
                        {
                            PLAY_OBJECT_ANIM( l_U310[3], "p_bd_walsmh_bb_h", ref g_U1896, 1000.00000000, 0, 1 );
                        }
                        if (DOES_OBJECT_EXIST( l_U310[4] ))
                        {
                            PLAY_OBJECT_ANIM( l_U310[4], "p_bd_walsmh_bc_h", ref g_U1896, 1000.00000000, 0, 1 );
                        }
                        if (DOES_OBJECT_EXIST( l_U310[5] ))
                        {
                            PLAY_OBJECT_ANIM( l_U310[5], "p_bd_winsmh_aa_h", ref g_U1896, 1000.00000000, 0, 1 );
                        }
                        SHAKE_CAM( l_U696[14], "MEDIUM_EXPLOSION_SHAKE", 0.30000000 );
                        SET_PAD_SHAKE( 0, l_U608._fU12, 128 );
                        sub_1394( ref l_U608, 300, 1, 0 );
                        sub_1530( ref l_U608 );
                        if (DOES_VEHICLE_EXIST( g_U2918 ))
                        {
                            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                            {
                                SET_VEHICLE_ENGINE_ON( g_U2918, 0, 0 );
                            }
                        }
                    }
                    if (sub_1650( ref l_U617 ))
                    {
                        sub_432( "GA", "Play Wall Crash Animation.", 0 );
                        START_PARTICLE_FX_NON_LOOPED_AT_COORD( "BusDepot_WallSmash_S", l_U1332, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
                        if (DOES_OBJECT_EXIST( l_U310[0] ))
                        {
                            PLAY_OBJECT_ANIM( l_U310[0], "p_bd_walsmh_aa_h", ref g_U1896, 1000.00000000, 0, 1 );
                        }
                        if (DOES_OBJECT_EXIST( l_U310[1] ))
                        {
                            PLAY_OBJECT_ANIM( l_U310[1], "p_bd_walsmh_ab_h", ref g_U1896, 1000.00000000, 0, 1 );
                        }
                        sub_1394( ref l_U599, 500, 1, 0 );
                        sub_1530( ref l_U599 );
                        SET_VEHICLE_ENGINE_ON( g_U2918, 0, 1 );
                        SHAKE_CAM( l_U696[14], "SMALL_EXPLOSION_SHAKE", 0.20000000 );
                        sub_1394( ref l_U608, 150, 1, 0 );
                        sub_1530( ref l_U608 );
                        SET_PAD_SHAKE( 0, l_U608._fU12, 64 );
                    }
                    if (sub_1650( ref l_U608 ))
                    {
                        sub_432( "GA", "Stopping camera shake.", 0 );
                        STOP_CAM_SHAKING( l_U696[14], 0 );
                    }
                }
                switch (l_U169)
                {
                    case 0:
                    if (sub_34812( g_U2918, g_U2333, 4500 ))
                    {
                        sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_INIT", 0 );
                        if (NOT (sub_5220( 123250951, ref g_U1272 )))
                        {
                            sub_432( "CCB", "Loading the S_BUS_10_04 ISS.", 0 );
                            sub_72767( 123250951, ref g_U1272 );
                        }
                        if (NOT (sub_6372( g_U2333, ref g_U1474 )))
                        {
                            sub_432( "CCB", "Loading the gnRailshooterBusPart3 vehicle recording.", 0 );
                            sub_63363( g_U2333, ref g_U1474 );
                        }
                        if (NOT (sub_6372( g_U2334, ref g_U1474 )))
                        {
                            sub_432( "CCB", "Loading the gnRailshooterBusCrash1 vehicle recording.", 0 );
                            sub_63363( g_U2334, ref g_U1474 );
                        }
                        if (NOT (sub_6372( g_U2335, ref g_U1474 )))
                        {
                            sub_432( "CCB", "Loading the gnRailshooterBusCrash2 vehicle recording.", 0 );
                            sub_63363( g_U2335, ref g_U1474 );
                        }
                        if (NOT (sub_6372( g_U2338, ref g_U1474 )))
                        {
                            sub_432( "CCB", "Loading the iHeliRecordingPath vehicle recording.", 0 );
                            sub_63363( g_U2338, ref g_U1474 );
                        }
                        sub_59288( g_U2099, ref g_U910 );
                        if (IS_ANIMATED_CAMERA_PLAYING())
                        {
                            sub_432( "CCB", "Stopping animated camera!!!", 0 );
                            CAMERA_ANIMATED_STOP( 3000, 0 );
                        }
                        sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_PRELOAD", 0 );
                        l_U169 = 1;
                    }
                    break;
                    case 1:
                    if (sub_5220( 123250951, ref g_U1272 ))
                    {
                        if (sub_4720( g_U2099, ref g_U910 ))
                        {
                            if (sub_6372( g_U2338, ref g_U1474 ))
                            {
                                sub_432( "CCB", "The mnHelicopter model has loaded.", 0 );
                                sub_46982( ref l_U696[0], 196.94000000, -9.00000000, 8.96000000, 14.23000000, 0.25000000, -146.20000000, 45.00000000 );
                                sub_46982( ref l_U696[1], 196.83000000, -8.82000000, 8.91000000, 27.15000000, 0.02000000, -144.73000000, 28.45000000 );
                                sub_46982( ref l_U696[2], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                                ATTACH_CAM_TO_VEHICLE( l_U696[2], g_U2918, l_U1436[1], 1 );
                                POINT_CAM_AT_VEHICLE( l_U696[2], g_U2918, l_U1467[1], 1 );
                                sub_46982( ref l_U696[3], 211.47140000, -23.78708000, 0.79759100, 11.52332000, -0.00422000, 29.87679000, 45.00000000 );
                                sub_46982( ref l_U696[4], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                                ATTACH_CAM_TO_VEHICLE( l_U696[4], g_U2918, l_U1436[2], 1 );
                                POINT_CAM_AT_VEHICLE( l_U696[4], g_U2918, l_U1467[2], 1 );
                                sub_46982( ref l_U696[5], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                                ATTACH_CAM_TO_VEHICLE( l_U696[5], g_U2918, l_U1436[3], 1 );
                                POINT_CAM_AT_VEHICLE( l_U696[5], g_U2918, l_U1467[3], 1 );
                                sub_46982( ref l_U696[6], 211.46140000, -23.79282000, 0.79759000, 8.12430700, -0.00422000, 123.98170000, 45.00000000 );
                                sub_46982( ref l_U696[7], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                                ATTACH_CAM_TO_VEHICLE( l_U696[7], g_U2918, l_U1436[4], 1 );
                                POINT_CAM_AT_VEHICLE( l_U696[7], g_U2918, l_U1467[4], 1 );
                                sub_46982( ref l_U696[8], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                                ATTACH_CAM_TO_VEHICLE( l_U696[8], g_U2918, l_U1436[5], 1 );
                                POINT_CAM_AT_VEHICLE( l_U696[8], g_U2918, l_U1467[5], 1 );
                                sub_46982( ref l_U696[9], 211.46140000, -23.79282000, 0.79759000, 8.12430700, -0.00422000, 123.98170000, 45.00000000 );
                                sub_46982( ref l_U696[10], 186.35350000, -57.84871000, 8.53294200, -22.39921000, -0.00424300, -45.64660000, 45.00000000 );
                                sub_46982( ref l_U696[11], 186.35350000, -57.84871000, 8.53294200, -28.16312000, -0.00424300, -157.12840000, 45.00000000 );
                                sub_46982( ref l_U696[12], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                                ATTACH_CAM_TO_VEHICLE( l_U696[12], g_U2918, l_U1436[6], 1 );
                                POINT_CAM_AT_VEHICLE( l_U696[12], g_U2918, l_U1467[6], 1 );
                                sub_46982( ref l_U696[13], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
                                ATTACH_CAM_TO_VEHICLE( l_U696[13], g_U2918, l_U1436[7], 1 );
                                POINT_CAM_AT_VEHICLE( l_U696[13], g_U2918, l_U1467[7], 1 );
                                sub_46982( ref l_U696[14], 186.35350000, -57.84871000, 8.53294200, -28.16312000, -0.00424300, -157.12840000, 45.00000000 );
                                if (sub_5220( 123250951, ref g_U1272 ))
                                {
                                    sub_432( "CCB", "Registering the S_BUS_10_04 ISS", 0 );
                                    ISEQ_REGISTER_ENTITY( 123250951, "10_04_player", sub_958(), 0 );
                                    ISEQ_REGISTER_ENTITY( 123250951, "10_04_female", g_U2595, 0 );
                                }
                                sub_112862();
                                if (IS_ANIMATED_CAMERA_PLAYING())
                                {
                                    sub_432( "CCB", "Stopping animated camera!!!", 0 );
                                    CAMERA_ANIMATED_STOP( 3000, 0 );
                                }
                                sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_IDLE", 0 );
                                l_U169 = 5;
                            }
                            else
                            {
                                sub_432( "CCB", "Waiting for the iHeliRecordingPath vehicle recording to load...", 0 );
                            }
                        }
                        else
                        {
                            sub_432( "CCB", "Waiting for the mnHelicopter model to load...", 0 );
                        }
                    }
                    else
                    {
                        sub_432( "CCB", "Waiting for S_BUS_10_04 ISS Animation to load...", 0 );
                    }
                    break;
                    case 5:
                    if (l_U113)
                    {
                        if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
                        {
                            sub_432( "CCB", "The bulletcam is finished.", 0 );
                            sub_113957();
                            sub_114175();
                            if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                            {
                                if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U2918 ))
                                {
                                    sub_432( "CCB", "The viRailBus vehicle playback is pausing...", 0 );
                                    PAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
                                }
                            }
                            sub_44427();
                            sub_17259( 1, 0, 0, 1 );
                            sub_47263( ref l_U696[0] );
                            SHAKE_CAM( l_U696[0], "HAND_SHAKE", 3.00000000 );
                            sub_3500( ref l_U275 );
                            sub_3774( ref l_U307 );
                            l_U626._fU12 = 250;
                            sub_2187( ref l_U626 );
                            sub_1530( ref l_U626 );
                            sub_114612();
                            sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_02", 0 );
                            l_U169 = 7;
                        }
                    }
                    else if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
                    {
                        if (sub_34812( g_U2918, g_U2333, 28541.75000000 ))
                        {
                            sub_113957();
                            sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_01", 0 );
                            l_U169 = 6;
                        }
                    }
                    break;
                    case 6:
                    sub_114175();
                    sub_114612();
                    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                    {
                        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U2918 ))
                        {
                            sub_432( "CCB", "The viRailBus vehicle playback is pausing...", 0 );
                            PAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
                        }
                    }
                    sub_44427();
                    sub_17259( 1, 0, 0, 1 );
                    sub_47263( ref l_U696[0] );
                    SHAKE_CAM( l_U696[0], "HAND_SHAKE", 3.00000000 );
                    sub_3500( ref l_U275 );
                    l_U626._fU12 = 250;
                    sub_2187( ref l_U626 );
                    sub_1530( ref l_U626 );
                    sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_02", 0 );
                    l_U169 = 7;
                    break;
                    case 7:
                    if (sub_1650( ref l_U626 ))
                    {
                        sub_47847( ref l_U696[0], ref l_U696[1], 750, 1, 1 );
                        SHAKE_CAM( l_U696[1], "WOBBLY_SHAKE", 0.10000000 );
                        l_U626._fU12 = 1649;
                        sub_2187( ref l_U626 );
                        sub_1530( ref l_U626 );
                        sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_03", 0 );
                        l_U169 = 8;
                    }
                    break;
                    case 8:
                    if (sub_1650( ref l_U626 ))
                    {
                        if (NOT (ISEQ_QUERY_STATE( 123250951, 3 )))
                        {
                            sub_432( "CCB", "Starting the S_BUS_10_04 ISS", 0 );
                            ISEQ_START( 123250951 );
                        }
                        sub_16634( g_U2918, g_U2335, 1.00000000, 4000.00000000 - 1000 );
                        sub_16634( l_U290, g_U2334, 1.00000000, 4000.00000000 );
                        sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_04", 0 );
                        l_U169 = 9;
                    }
                    break;
                    case 9:
                    DETACH_PED( sub_958(), 1 );
                    ATTACH_PED_TO_VEHICLE( sub_958(), g_U2918, 0, l_U1527, l_U1248, 0.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1530, l_U1249, 0.00000000, 0, 0, 0, 1 );
                    if (NOT (IS_VEHICLE_DEAD( l_U290 )))
                    {
                        PAUSE_PLAYBACK_RECORDED_VEHICLE( l_U290 );
                    }
                    sub_432( "CCB", "The animated camera length is:", 0 );
                    if (NOT (IS_PED_DEAD( sub_958() )))
                    {
                        CAMERA_PLAY_ANIMATED_ATTACHED_PED_RELATIVE( "LEVEL_S_BUS_CP_06", "10_04_bs_p1_concat_1_CAM", sub_958(), 0, 0 );
                    }
                    STOP_CAM_SHAKING( l_U696[0], 1 );
                    STOP_CAM_SHAKING( l_U696[1], 1 );
                    if (DOES_VEHICLE_EXIST( l_U296 ))
                    {
                        if (NOT (IS_VEHICLE_DEAD( l_U296 )))
                        {
                            sub_432( "CCB", "Destroying the viHeli vehicle model.", 0 );
                            sub_3404( l_U286 );
                            sub_3608( l_U296 );
                            sub_432( "CCB", "Unloading the viHeli vehicle model.", 0 );
                            sub_4817( g_U2099, ref g_U910 );
                        }
                    }
                    if (sub_6372( g_U2333, ref g_U1474 ))
                    {
                        sub_432( "CCB", "Unloading the gnRailshooterBusPart3 vehicle recording.", 0 );
                        sub_6537( g_U2333, ref g_U1474 );
                    }
                    if (sub_6372( g_U2338, ref g_U1474 ))
                    {
                        sub_432( "CCB", "Unloading the iHeliRecordingPath vehicle recording.", 0 );
                        sub_6537( g_U2338, ref g_U1474 );
                    }
                    l_U626._fU12 = 1859;
                    sub_2187( ref l_U626 );
                    sub_1530( ref l_U626 );
                    sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_05", 0 );
                    l_U169 = 10;
                    break;
                    case 10:
                    if (sub_1650( ref l_U626 ))
                    {
                        if (sub_5220( 123250951, ref g_U1272 ))
                        {
                            sub_432( "CCB", "Setting Max's node to S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART2.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( sub_958(), "/Global/S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART2" );
                            sub_432( "CCB", "Setting Gio's ISS node to S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART2", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART2" );
                        }
                        else
                        {
                            sub_432( "CCB", "The S_BUS_10_04 ISS is NOT loaded!!!", 0 );
                        }
                        sub_16634( g_U2918, g_U2335, 1.00000000, 5200.00000000 - 1000 );
                        sub_16634( l_U290, g_U2334, 1.00000000, 4000.00000000 );
                        sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_06", 0 );
                        l_U169 = 11;
                    }
                    else
                    {
                        sub_432( "CCB", "The animated camera current time:", 0 );
                    }
                    break;
                    case 11:
                    sub_47263( ref l_U696[2] );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                        sub_432( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                    l_U626._fU12 = 959;
                    sub_2187( ref l_U626 );
                    sub_1530( ref l_U626 );
                    sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_07", 0 );
                    l_U169 = 12;
                    break;
                    case 12:
                    if (sub_1650( ref l_U626 ))
                    {
                        sub_16634( g_U2918, g_U2335, 1.00000000, 5200.00000000 );
                        sub_16634( l_U290, g_U2334, 1.00000000, 5300.00000000 );
                        sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_08", 0 );
                        l_U169 = 13;
                    }
                    break;
                    case 13:
                    sub_432( "CCB", "The animated camera length is:", 0 );
                    CAMERA_PLAY_ANIMATED( "LEVEL_S_BUS_CP_06", "10_04_BUS_CAMS_SH04_cam", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
                    sub_1394( ref l_U581, 400, 1, 0 );
                    sub_1394( ref l_U590, 600, 1, 0 );
                    sub_1530( ref l_U581 );
                    l_U626._fU12 = 1249;
                    sub_2187( ref l_U626 );
                    sub_1530( ref l_U626 );
                    sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_09", 0 );
                    l_U169 = 14;
                    break;
                    case 14:
                    if (sub_1650( ref l_U626 ))
                    {
                        if (sub_5220( 123250951, ref g_U1272 ))
                        {
                            sub_432( "CCB", "Setting Max's node to S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART3.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( sub_958(), "/Global/S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART3" );
                            sub_432( "CCB", "Setting Gio's ISS node to S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART3", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART3" );
                        }
                        else
                        {
                            sub_432( "CCB", "The S_BUS_10_04 ISS is NOT loaded!!!", 0 );
                        }
                        sub_16634( g_U2918, g_U2335, 1.00000000, 5500.00000000 );
                        sub_16634( l_U290, g_U2334, 1.00000000, 5650.00000000 );
                        sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_10", 0 );
                        l_U169 = 15;
                    }
                    else
                    {
                        sub_432( "CCB", "The animated camera current time:", 0 );
                    }
                    break;
                    case 15:
                    DETACH_PED( sub_958(), 1 );
                    ATTACH_PED_TO_VEHICLE( sub_958(), g_U2918, 0, l_U1533, l_U1250, 0.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1536, l_U1251, 0.00000000, 0, 0, 0, 1 );
                    sub_47847( ref l_U696[4], ref l_U696[5], 690, 1, 1 );
                    SHAKE_CAM( l_U696[4], "SMALL_EXPLOSION_SHAKE", 0.35000000 );
                    SHAKE_CAM( l_U696[5], "MEDIUM_EXPLOSION_SHAKE", 0.35000000 );
                    SET_PAD_SHAKE( 0, 1000, 64 );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                        sub_432( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                    l_U626._fU12 = 689;
                    sub_2187( ref l_U626 );
                    sub_1530( ref l_U626 );
                    sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_11", 0 );
                    l_U169 = 16;
                    break;
                    case 16:
                    if (sub_1650( ref l_U626 ))
                    {
                        sub_16634( g_U2918, g_U2335, 1.00000000, 6200.00000000 );
                        sub_16634( l_U290, g_U2334, 1.00000000, 6300.00000000 );
                        sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_12", 0 );
                        l_U169 = 17;
                    }
                    break;
                    case 17:
                    STOP_CAM_SHAKING( l_U696[4], 0 );
                    STOP_CAM_SHAKING( l_U696[5], 0 );
                    sub_432( "CCB", "The animated camera length is:", 0 );
                    CAMERA_PLAY_ANIMATED( "LEVEL_S_BUS_CP_06", "10_04_BUS_CAMS_SH06_cam", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
                    l_U626._fU12 = 1499;
                    sub_2187( ref l_U626 );
                    sub_1530( ref l_U626 );
                    sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_13", 0 );
                    l_U169 = 18;
                    break;
                    case 18:
                    if (sub_1650( ref l_U626 ))
                    {
                        if (sub_5220( 123250951, ref g_U1272 ))
                        {
                            sub_432( "CCB", "Setting Max's node to S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART4.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( sub_958(), "/Global/S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART4" );
                            sub_432( "CCB", "Setting Gio's ISS node to S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART4", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART4" );
                        }
                        else
                        {
                            sub_432( "CCB", "The S_BUS_10_04 ISS is NOT loaded!!!", 0 );
                        }
                        sub_16634( g_U2918, g_U2335, 1.00000000, 6750.00000000 );
                        sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_14", 0 );
                        l_U169 = 19;
                    }
                    else
                    {
                        sub_432( "CCB", "The animated camera current time:", 0 );
                    }
                    break;
                    case 19:
                    DETACH_PED( sub_958(), 1 );
                    ATTACH_PED_TO_VEHICLE( sub_958(), g_U2918, 0, l_U1539, l_U1252, 0.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1542, l_U1253, 0.00000000, 0, 0, 0, 1 );
                    if (NOT (IS_VEHICLE_DEAD( l_U290 )))
                    {
                        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( l_U290 ))
                        {
                            sub_432( "CCB", "The viRailBusHit vehicle playback is pausing...", 0 );
                            PAUSE_PLAYBACK_RECORDED_VEHICLE( l_U290 );
                        }
                    }
                    sub_47847( ref l_U696[7], ref l_U696[8], 720, 1, 1 );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                        sub_432( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                    l_U626._fU12 = 719;
                    sub_2187( ref l_U626 );
                    sub_1530( ref l_U626 );
                    sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_14", 0 );
                    sub_120027();
                    PLAY_IMAGEFX( "FLICKER_VIBRATE_ZOOM_01", 4, 1 );
                    sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_15", 0 );
                    l_U169 = 20;
                    break;
                    case 20:
                    if (sub_1650( ref l_U626 ))
                    {
                        sub_16634( g_U2918, g_U2335, 1.00000000, 7500.00000000 );
                        sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_16", 0 );
                        l_U169 = 21;
                    }
                    break;
                    case 21:
                    sub_432( "CCB", "The animated camera length is:", 0 );
                    CAMERA_PLAY_ANIMATED( "LEVEL_S_BUS_CP_06", "10_04_BUS_SH08+SH09_cams", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
                    PLAY_IMAGEFX( "FLICKER_VIBRATE_INTERLACE_01", 4, 1 );
                    l_U626._fU12 = 500;
                    sub_2187( ref l_U626 );
                    sub_1530( ref l_U626 );
                    sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_17", 0 );
                    l_U169 = 22;
                    break;
                    case 22:
                    if (sub_1650( ref l_U626 ))
                    {
                        l_U626._fU12 = 500;
                        sub_2187( ref l_U626 );
                        sub_1530( ref l_U626 );
                        sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_18", 0 );
                        l_U169 = 23;
                    }
                    else
                    {
                        sub_432( "CCB", "The animated camera current time:", 0 );
                    }
                    break;
                    case 23:
                    if (sub_1650( ref l_U626 ))
                    {
                        PLAY_IMAGEFX( "FLICKER_VIBRATE_INTERLACE_01", 4, 1 );
                        l_U626._fU12 = 499;
                        sub_2187( ref l_U626 );
                        sub_1530( ref l_U626 );
                        sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_19", 0 );
                        l_U169 = 24;
                    }
                    else
                    {
                        sub_432( "CCB", "The animated camera current time:", 0 );
                    }
                    break;
                    case 24:
                    if (sub_1650( ref l_U626 ))
                    {
                        if (sub_5220( 123250951, ref g_U1272 ))
                        {
                            sub_432( "CCB", "Setting Max's node to S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART5.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( sub_958(), "/Global/S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART5" );
                            sub_432( "CCB", "Setting Gio's ISS node to S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART5", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART5" );
                        }
                        else
                        {
                            sub_432( "CCB", "The S_BUS_10_04 ISS is NOT loaded!!!", 0 );
                        }
                        sub_16634( g_U2918, g_U2335, 1.00000000, 8000.00000000 );
                        sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_20", 0 );
                        l_U169 = 25;
                    }
                    else
                    {
                        sub_432( "CCB", "The animated camera current time:", 0 );
                    }
                    break;
                    case 25:
                    DETACH_PED( sub_958(), 1 );
                    ATTACH_PED_TO_VEHICLE( sub_958(), g_U2918, 0, l_U1545, l_U1254, 0.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1548, l_U1255, 0.00000000, 0, 0, 0, 1 );
                    sub_47263( ref l_U696[12] );
                    SHAKE_CAM( l_U696[12], "SMALL_EXPLOSION_SHAKE", 0.35000000 );
                    SET_PAD_SHAKE( 0, 1000, 64 );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                        sub_432( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                    l_U626._fU12 = 569;
                    sub_2187( ref l_U626 );
                    sub_1530( ref l_U626 );
                    sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_21", 0 );
                    l_U169 = 26;
                    break;
                    case 26:
                    if (sub_1650( ref l_U626 ))
                    {
                        if (sub_5220( 123250951, ref g_U1272 ))
                        {
                            sub_432( "CCB", "Setting Max's node to S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART6.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( sub_958(), "/Global/S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART6" );
                            sub_432( "CCB", "Setting Gio's ISS node to S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART6", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART6" );
                        }
                        else
                        {
                            sub_432( "CCB", "The S_BUS_10_04 ISS is NOT loaded!!!", 0 );
                        }
                        sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_22", 0 );
                        l_U169 = 27;
                    }
                    break;
                    case 27:
                    DETACH_PED( sub_958(), 1 );
                    ATTACH_PED_TO_VEHICLE( sub_958(), g_U2918, 0, l_U1551, l_U1256, 0.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1554, l_U1257, 0.00000000, 0, 0, 0, 1 );
                    sub_47263( ref l_U696[13] );
                    SHAKE_CAM( l_U696[13], "SMALL_EXPLOSION_SHAKE", 0.35000000 );
                    SET_PAD_SHAKE( 0, 1000, 64 );
                    l_U626._fU12 = 599;
                    sub_2187( ref l_U626 );
                    sub_1530( ref l_U626 );
                    sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_23", 0 );
                    l_U169 = 28;
                    break;
                    case 28:
                    if (sub_1650( ref l_U626 ))
                    {
                        sub_16634( g_U2918, g_U2335, 1.00000000, 9350.00000000 );
                        sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_24", 0 );
                        l_U169 = 29;
                    }
                    break;
                    case 29:
                    sub_432( "CCB", "The animated camera length is:", 0 );
                    CAMERA_PLAY_ANIMATED( "LEVEL_S_BUS_CP_06", "10_04_BUS_CAMS_SH12_SH13_cam", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
                    sub_1394( ref l_U617, 150, 1, 0 );
                    sub_1530( ref l_U617 );
                    l_U626._fU12 = 1249;
                    sub_2187( ref l_U626 );
                    sub_1530( ref l_U626 );
                    sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_25", 0 );
                    l_U169 = 30;
                    break;
                    case 30:
                    if (sub_1650( ref l_U626 ))
                    {
                        if (sub_5220( 123250951, ref g_U1272 ))
                        {
                            sub_432( "CCB", "Setting Max's node to S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART7.", 0 );
                            PED_ACTION_TREE_PLAY_NODE( sub_958(), "/Global/S_BUS_10_04/SEQ_START/PLAYER/PLAYER_PART7" );
                            sub_432( "CCB", "Setting Gio's ISS node to S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART7", 0 );
                            PED_ACTION_TREE_PLAY_NODE( g_U2595, "/Global/S_BUS_10_04/SEQ_START/FEMALE/FEMALE_PART7" );
                        }
                        else
                        {
                            sub_432( "CCB", "The S_BUS_10_04 ISS is NOT loaded!!!", 0 );
                        }
                        sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_26", 0 );
                        l_U169 = 31;
                    }
                    else
                    {
                        sub_432( "CCB", "The animated camera current time:", 0 );
                    }
                    break;
                    case 31:
                    sub_432( "CCB", "Enable standoff loading...", 0 );
                    sub_123573( ref g_U765[11] );
                    DETACH_PED( sub_958(), 1 );
                    ATTACH_PED_TO_VEHICLE( sub_958(), g_U2918, 0, l_U1557, l_U1258, 0.00000000, 0, 0, 0, 1 );
                    SET_IK_ATTACH_TARGET_VEH( sub_958(), g_U2918, "chassis" );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
                    DETACH_PED( g_U2595, 1 );
                    ATTACH_PED_TO_VEHICLE( g_U2595, g_U2918, 0, l_U1560, l_U1259, 0.00000000, 0, 0, 0, 1 );
                    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
                    {
                        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( g_U2918 ))
                        {
                            sub_432( "CCB", "The viRailBus vehicle playback is pausing...", 0 );
                            PAUSE_PLAYBACK_RECORDED_VEHICLE( g_U2918 );
                        }
                    }
                    sub_3608( l_U290 );
                    l_U626._fU12 = 1050;
                    sub_2187( ref l_U626 );
                    sub_1530( ref l_U626 );
                    sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_OUT", 0 );
                    l_U169 = 38;
                    break;
                    case 38:
                    if (sub_1650( ref l_U626 ))
                    {
                        if (NOT IS_SCREEN_FADED_OUT())
                        {
                            SET_FADE_MUTE_OVERRIDE( 1 );
                            sub_432( "CCB", "Fading out for start of cutscene.", 0 );
                            DO_SCREEN_FADE_OUT( 900 );
                            sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_FADEOUT", 0 );
                            l_U169 = 37;
                        }
                    }
                    else
                    {
                        sub_432( "CCB", "The animated camera current time:", 0 );
                    }
                    break;
                    case 37:
                    if ((NOT IS_SCREEN_FADING_OUT()) AND (IS_SCREEN_FADED_OUT()))
                    {
                        if (ISEQ_QUERY_STATE( 123250951, 3 ))
                        {
                            sub_432( "CCB", "Terminating the S_BUS_10_04 ISS.", 0 );
                            ISEQ_UNREGISTER_ENTITY( 123250951, "10_04_player" );
                            ISEQ_UNREGISTER_ENTITY( 123250951, "10_04_female" );
                            ISEQ_TERMINATE( 123250951 );
                            sub_5527( 123250951, ref g_U1272 );
                        }
                        if (NOT (IS_PLAYER_DEAD( sub_980() )))
                        {
                            if (NOT (IS_PED_DEAD( sub_958() )))
                            {
                                sub_432( "CCB", "Detaching the player ped...", 0 );
                                DETACH_PED( sub_958(), 1 );
                                sub_432( "CCB", "Teleporting the player ped...", 0 );
                                sub_11485( sub_958(), g_U2339[11], g_U2466[11] );
                            }
                        }
                        sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_POST_MIDSCENE", 0 );
                        l_U169 = 36;
                    }
                    else
                    {
                        sub_432( "CCB", "Waiting for screen to fade out...", 0 );
                    }
                    break;
                    case 36:
                    SET_CAM_SIDE_LEFT( 0 );
                    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0, 1065353216, 0 );
                    SET_GAMEPLAY_CAM_RELATIVE_PITCH( 0, 1065353216, 0 );
                    RENDER_SCRIPT_CAMS( 0, 0, 0, 0 );
                    sub_3888( ref l_U696 );
                    DESTROY_CAM( l_U2157 );
                    if (IS_ANIMATED_CAMERA_PLAYING())
                    {
                        sub_432( "CCB", "Stopping animated camera!!!", 0 );
                        CAMERA_ANIMATED_STOP( 0, 0 );
                    }
                    BULLET_CAMERA_PRELOAD_TEXT_BINK( l_U2158, 0 );
                    if (sub_6372( g_U2334, ref g_U1474 ))
                    {
                        sub_432( "CCB", "Unloading the gnRailshooterBusCrash1 vehicle recording.", 0 );
                        sub_6537( g_U2334, ref g_U1474 );
                    }
                    if (sub_6372( g_U2335, ref g_U1474 ))
                    {
                        sub_432( "CCB", "Unloading the gnRailshooterBusCrash2 vehicle recording.", 0 );
                        sub_6537( g_U2335, ref g_U1474 );
                    }
                    sub_3404( g_U2595 );
                    if (NOT l_U122)
                    {
                        g_U2873 = 1;
                    }
                    SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
                    sub_432( "CCB", "eEndCrashEvent - STATE_MIDSCENE_COMPLETE", 0 );
                    l_U169 = 39;
                    break;
                    case 39: break;
                }
            }
            else
            {
                sub_432( "CCB", "The viRailBus vehicle is NOT valid!!!", 0 );
            }
        }
        else
        {
            sub_432( "CCB", "The piGiovanna ped is NOT valid!!!", 0 );
        }
    }
    else
    {
        sub_432( "CCB", "The PLAYER_PED_ID ped is NOT valid!!!", 0 );
    }
    return;
}

void sub_112862()
{
    sub_432( "MF", "P_RAIL_PASSOS_HELICOPTER_SPAWN - START", 0 );
    sub_432( "MF", "Creating Passos' Helicopter...", 0 );
    l_U296 = sub_15219( g_U2099, l_U1498, 0.00000000, 0, 0, 0 );
    if (DOES_VEHICLE_EXIST( l_U296 ))
    {
        if (NOT (IS_VEHICLE_DEAD( l_U296 )))
        {
            sub_432( "CCB", "The viHeli vehicle was successfully created.", 0 );
            sub_432( "CCB", "Silencing the viHeli vehicle...", 0 );
            SILENCE_VEHICLE( l_U296, 1 );
            SET_VEHICLE_VISIBLE( l_U296, 0 );
            l_U286 = CREATE_PED_INSIDE_VEHICLE( l_U296, 26, g_U2105, -1, 0, 0 );
            if (NOT (IS_PED_DEAD( l_U286 )))
            {
                SET_PED_VISIBLE( l_U286, 0 );
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U286, 1 );
            }
            else
            {
                SCRIPT_ASSERT( "Could not create pilot for Passos Helicopter!", 0 );
            }
            FREEZE_VEHICLE_POSITION( l_U296, 1 );
            SET_VEHICLE_CAN_BE_DAMAGED( l_U296, 0 );
            SET_VEHICLE_PROOFS( l_U296, 1, 1, 1, 1, 1 );
            SET_VEHICLE_HEALTH( l_U296, 100 );
            SET_VEHICLE_PETROL_TANK_HEALTH( l_U296, 100.00000000 );
            SET_VEHICLE_ENGINE_ON( l_U296, 1, 1 );
        }
        else
        {
            sub_432( "CCB", "The viHeli vehicle is NOT valid!!!", 0 );
        }
    }
    else
    {
        sub_432( "CCB", "The viHeli vehicle is NOT valid!!!", 0 );
    }
    sub_432( "MF", "P_RAIL_PASSOS_HELICOPTER_SPAWN - END", 0 );
    return;
}

void sub_113957()
{
    sub_432( "MF", "P_RAIL_PASSOS_HELICOPTER_MOVE - START", 0 );
    if (NOT (IS_VEHICLE_DEAD( l_U296 )))
    {
        SET_VEHICLE_VISIBLE( l_U296, 1 );
        if (NOT (IS_PED_DEAD( l_U286 )))
        {
            SET_PED_VISIBLE( l_U286, 1 );
        }
        FREEZE_VEHICLE_POSITION( l_U296, 0 );
        sub_16634( l_U296, g_U2338, l_U734, l_U735 );
    }
    sub_432( "MF", "P_RAIL_PASSOS_HELICOPTER_MOVE - END", 0 );
    return;
}

void sub_114175()
{
    sub_432( "CCB", "P_RAIL_START_CRASH_BUSES", 0 );
    if (NOT (DOES_VEHICLE_EXIST( l_U290 )))
    {
        sub_104183();
    }
    if (NOT (IS_VEHICLE_DEAD( l_U290 )))
    {
        SET_VEHICLE_LIGHTS( l_U290, 1 );
    }
    if (NOT (IS_VEHICLE_DEAD( g_U2918 )))
    {
        SET_VEHICLE_ENGINE_ON( g_U2918, 1, 0 );
        SET_VEHICLE_LIGHTS( g_U2918, 1 );
        SET_VEHICLE_EXTRA( g_U2918, 3, 1 );
        SET_VEHICLE_EXTRA( g_U2918, 8, 1 );
        SET_VEHICLE_EXTRA( g_U2918, 9, 0 );
        SET_VEHICLE_EXTRA( g_U2918, 6, 0 );
        SET_VEHICLE_EXTRA( g_U2918, 7, 1 );
    }
    return;
}

void sub_114612()
{
    sub_432( "CCB", "P_INITIALIZE_IMAGEFX_MID_12_BUS", 0 );
    sub_79799( ref l_U1991 );
    l_U1991[0]._fU4 = "TRIPLE_INTERLACE_HOLD";
    l_U1991[0]._fU12 = l_U2154;
    l_U1991[0]._fU8 = 4;
    l_U1991[0]._fU32 = 0;
    l_U1991[1]._fU4 = "TRIPLE_MOVE_RIGHT_COLOR_SPLIT5";
    l_U1991[1]._fU12 = l_U2155;
    l_U1991[1]._fU8 = 4;
    l_U1991[1]._fU32 = 0;
    l_U1991[2]._fU4 = "GAMMA_SATURATION_COLOR_ZOOM_X";
    l_U1991[2]._fU12 = l_U2156;
    l_U1991[2]._fU8 = 4;
    l_U1991[2]._fU32 = 0;
    l_U1991[3]._fU4 = "BLUR_ZOOM_LIGHT_FAST";
    l_U1991[3]._fU12 = l_U2156 + 1000;
    l_U1991[3]._fU20 = 1;
    l_U1991[3]._fU8 = 4;
    l_U1991[3]._fU32 = 0;
    l_U1991[5]._fU4 = "FLICKER_VIBRATE_INTERLACE_01";
    l_U1991[5]._fU12 = l_U2156 + 2000;
    l_U1991[5]._fU8 = 4;
    l_U1991[5]._fU32 = 0;
    l_U72 = 0;
    return;
}

void sub_120027()
{
    sub_432( "CO", "P_START_IMAGEFX_10_04_BULLETCAM", 0 );
    BULLET_CAMERA_PRELOAD_TEXT_BINK( l_U2158, 1 );
    sub_3048( ref l_U2157 );
    l_U2157 = CREATE_CAM( "DEFAULT_BULLET_CAMERA", 1 );
    SETUP_BULLET_CAMERA_SCENE( l_U2157, l_U2158, 200.36000000, -30.00000000, 0.00000000, 185.82000000, -65.94000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, "", "" );
    SET_CAM_ACTIVE( l_U2157, 1 );
    return;
}

void sub_123573(int iParam0)
{
    iParam0->_fU36 = 1;
    return;
}

int sub_125301(unknown uParam0)
{
    int I;

    if ((sub_43751( uParam0 )) == 1)
    {
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
            {
                sub_432( "CCB", "Disabling one shot kill on ped:", 0 );
                SET_PED_AS_ONE_SHOT_KILL( (uParam0^)[I], 0 );
                if (NOT (GET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I] )))
                {
                    sub_432( "CCB", "Enabling bullet cam on ped:", 0 );
                    SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I], 1 );
                }
                return 1;
            }
        }
    }
    return 0;
}

void sub_126096()
{
    sub_432( "CCB", "P_UNLOAD_ASSETS", 0 );
    sub_4817( g_U2105, ref g_U910 );
    sub_4817( g_U2099, ref g_U910 );
    sub_4817( g_U2128, ref g_U910 );
    sub_4817( g_U2143, ref g_U910 );
    sub_4817( g_U2144, ref g_U910 );
    sub_4817( g_U2145, ref g_U910 );
    sub_4817( g_U2146, ref g_U910 );
    sub_4817( g_U2151, ref g_U910 );
    sub_4817( g_U2134, ref g_U910 );
    sub_4817( g_U2136, ref g_U910 );
    sub_4817( g_U2137, ref g_U910 );
    sub_4817( g_U2138, ref g_U910 );
    sub_4817( g_U2139, ref g_U910 );
    sub_4817( g_U2140, ref g_U910 );
    sub_4817( g_U2141, ref g_U910 );
    sub_126355( g_U2860, ref g_U1211 );
    sub_126355( g_U2861, ref g_U1211 );
    sub_126531( ref g_U1896, ref g_U1369 );
    sub_126531( "LEVEL_S_BUS_RS", ref g_U1369 );
    sub_126531( "FACE_GIOBUS", ref g_U1369 );
    sub_6537( g_U2330, ref g_U1474 );
    sub_6537( g_U2331, ref g_U1474 );
    sub_6537( g_U2332, ref g_U1474 );
    sub_6537( g_U2333, ref g_U1474 );
    sub_6537( g_U2333, ref g_U1474 );
    sub_6537( g_U2334, ref g_U1474 );
    sub_6537( g_U2335, ref g_U1474 );
    sub_6537( g_U2338, ref g_U1474 );
    sub_126869( ref g_U2008, ref g_U1535 );
    sub_126869( ref g_U2024, ref g_U1535 );
    return;
}

void sub_126355(int iParam0, unknown uParam1)
{
    int I;
    int iVar5;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if (((uParam1^)[I]._fU4 == 1) || (((uParam1^)[I]._fU4 == 2) || ((uParam1^)[I]._fU4 == 3)))
        {
            if ((uParam1^)[I]._fU0 == iParam0)
            {
                iVar5 = sub_4929( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU8 );
                if (iVar5 == -1)
                {
                    (uParam1^)[I]._fU4 = 4;
                    return;
                }
                else
                {
                    return;
                }
            }
        }
    }
    return;
}

void sub_126531(unknown uParam0, unknown uParam1)
{
    int I;
    int iVar5;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if (((uParam1^)[I]._fU32 == 1) || (((uParam1^)[I]._fU32 == 2) || ((uParam1^)[I]._fU32 == 3)))
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[I]._fU0, uParam0 ))
            {
                iVar5 = sub_4929( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU36 );
                if (iVar5 == -1)
                {
                    (uParam1^)[I]._fU32 = 4;
                    return;
                }
                else
                {
                    return;
                }
            }
        }
    }
    return;
}

void sub_126869(unknown uParam0, unknown uParam1)
{
    int I;
    int iVar5;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if (((uParam1^)[I]._fU64 == 1) || (((uParam1^)[I]._fU64 == 2) || ((uParam1^)[I]._fU64 == 3)))
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[I]._fU0, uParam0 ))
            {
                iVar5 = sub_4929( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU68 );
                if (iVar5 == -1)
                {
                    (uParam1^)[I]._fU64 = 4;
                    return;
                }
                else
                {
                    return;
                }
            }
        }
    }
    return;
}

