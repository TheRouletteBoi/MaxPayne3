void main()
{
    l_U0 = 1;
    l_U1 = 144;
    l_U3 = 0;
    l_U4 = 0;
    l_U5 = 1500;
    StrCopy( ref l_U15, "DEFAULT_SCRIPTED_CAMERA", 32 );
    StrCopy( ref l_U23, "DEFAULT_SPLINE_CAMERA", 32 );
    l_U31 = 0;
    l_U32 = 0;
    l_U33 = 0;
    l_U34 = 0;
    sub_168( "CCB", "Script busdepot_term_fight.sc is starting...", 0 );
    while (NOT IS_EXITFLAG_SET())
    {
        sub_230();
        WAIT( 0 );
    }
    sub_69851( 0 );
    sub_72248();
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "busdepot_term_fight" );
    SET_EXITFLAG_RESPONSE();
    sub_168( "CCB", "Script busdepot_term_fight.sc is terminating...", 0 );
    return;
}

void sub_168(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    return;
}

void sub_230()
{
    if ((l_U114 < 12) AND (l_U114 > 8))
    {
        if (l_U123 > 3)
        {
            sub_272();
        }
    }
    if ((l_U114 < 14) AND (l_U114 > 3))
    {
        sub_5530();
        sub_5684();
        sub_6198();
        sub_9410();
        sub_11239();
        sub_12288();
        sub_14112();
        sub_21356();
        sub_21823();
        sub_23325();
    }
    if ((l_U114 < 14) AND (l_U114 > 11))
    {
        sub_24525();
    }
    if (sub_31293())
    {
        if ((IS_PED_DEAD( sub_1047() )) == 0)
        {
            PED_ACTION_TREE_PLAY_NODE( sub_1047(), "Global/Player/PlayerRoot/PLAYER_INITIALIZE_LOCO" );
        }
        l_U114 = 15;
        l_U576 = 4;
    }
    switch (l_U114)
    {
        case 0:
        sub_31935();
        sub_33312();
        sub_33716();
        if ((g_U2875[11] > 0) || (g_U763 == 11))
        {
            sub_168( "CCB", "Skipping pre-load...", 0 );
            g_U2873 = 1;
            if ((IS_SCREEN_FADING_IN()) || (IS_SCREEN_FADED_IN()))
            {
                sub_168( "CCB", "FADING OUT!!!", 0 );
                DO_SCREEN_FADE_OUT( 0 );
            }
            sub_168( "CCB", "eCheckpoint - STATE_CHECKPOINT_LOAD", 0 );
            l_U114 = 2;
        }
        else
        {
            sub_168( "CCB", "eCheckpoint - STATE_CHECKPOINT_PRELOAD", 0 );
            l_U114 = 1;
        }
        break;
        case 1:
        if (sub_35486())
        {
            sub_168( "CCB", "eCheckpoint - STATE_CHECKPOINT_LOAD", 0 );
            l_U114 = 2;
        }
        break;
        case 2:
        if (g_U2873)
        {
            if (sub_35930())
            {
                sub_168( "CCB", "eCheckpoint - STATE_CHECKPOINT_SETUP", 0 );
                l_U114 = 3;
            }
        }
        break;
        case 3:
        sub_43890();
        if ((g_U2875[11] > 0) || (g_U763 == 11))
        {
            l_U131 = GET_REAL_GAME_TIMER() + 0;
            sub_168( "CCB", "eCheckpoint - STATE_CHECKPOINT_POSTSTREAM", 0 );
            l_U114 = 5;
        }
        else
        {
            sub_168( "CCB", "eCheckpoint - STATE_CHECKPOINT_INTRO_CUTSCENE_10_04", 0 );
            l_U114 = 8;
        }
        break;
        case 5:
        if (GET_NUMBER_OF_STREAMING_REQUESTS() == 0)
        {
            if (GET_REAL_GAME_TIMER() >= l_U131)
            {
                if ((g_U2875[11] > 0) || (g_U763 == 11))
                {
                    sub_168( "CCB", "eIntroCutscene - STATE_CUTSCENE_COMPLETE", 0 );
                    l_U123 = 7;
                    sub_168( "CCB", "eCheckpoint - STATE_CHECKPOINT_MIDSCENE", 0 );
                    l_U114 = 9;
                }
                else
                {
                    sub_168( "CCB", "eCheckpoint - STATE_CHECKPOINT_INTRO_CUTSCENE_10_04", 0 );
                    l_U114 = 8;
                }
            }
        }
        else
        {
            sub_168( "CCB", "Waiting for stream requests...", 0 );
        }
        break;
        case 8:
        if (l_U123 >= 4)
        {
            sub_49738();
        }
        if (sub_53708())
        {
            CLEAR_NAMED_CUTSCENE( "10_04_BUS_CONCAT" );
            sub_168( "CCB", "eCheckpoint - STATE_CHECKPOINT_MIDSCENE", 0 );
            l_U114 = 9;
        }
        break;
        case 9:
        if (sub_49738())
        {
            sub_168( "CCB", "eCheckpoint - STATE_CHECKPOINT_START", 0 );
            l_U114 = 10;
        }
        break;
        case 10:
        sub_55767();
        sub_168( "CCB", "eCheckpoint - STATE_CHECKPOINT_STANDOFF", 0 );
        l_U114 = 11;
        break;
        case 11:
        sub_60449();
        sub_60641( ref l_U141 );
        sub_60945( ref l_U141, 0.40000000, 1.00000000, g_U2339[11], 200.00000000, ref l_U634, ref l_U74, ref l_U93, ref l_U138, 17000 );
        sub_61964();
        sub_65384();
        if (l_U72 == 0)
        {
            if ((IS_LAST_MAN_STANDING_ACTIVE() == 0) AND ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0))
            {
                if ((sub_11022( ref l_U141 )) <= 1)
                {
                    sub_168( "CCB", "Assigning bulletcam to last living piStandoffVCPF ped.", 0 );
                    l_U161 = sub_66198( ref l_U141 );
                    if (IS_LAST_MAN_STAND_ANIMATED_RECOVERY_BEING_HELD() == 0)
                    {
                        HOLD_LAST_MAN_STAND_ANIMATED_RECOVERY( 1 );
                    }
                    if (((IS_PED_DEAD( l_U161 )) == 0) AND ((DOES_PED_EXIST( l_U161 )) == 1))
                    {
                        SET_BULLET_CAM_PREF( l_U161, "PIST_COMIC_BUS_01", "PIST_COMIC_BUS_01", "PIST_COMIC_BUS_01", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
                    }
                    sub_168( "CCB", "Enabling the bullet camera tracking until grounded...", 0 );
                    BULLET_CAMERA_TRACK_UNTIL_GROUNDED( 1 );
                    if (IS_BULLET_CAMERA_TO_GAMEPLAY_ALLOWED() == 1)
                    {
                        sub_168( "CCB", "Disabling ALLOW_BULLET_CAMERA_TO_GAMEPLAY...", 0 );
                        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 0 );
                    }
                    l_U72 = 1;
                }
            }
        }
        if (NOT l_U73)
        {
            if ((sub_11022( ref l_U141 )) <= 8)
            {
                l_U73 = 1;
                sub_168( "CCB", "Resizing piStandoffVCPF ped combat range.", 0 );
                sub_66733( ref l_U141, 12.00000000, 20.00000000 );
            }
        }
        if (l_U120 >= 3)
        {
            if (l_U72)
            {
                if ((sub_11022( ref l_U141 )) == 0)
                {
                    sub_168( "CCB", "All enemies are dead... Bulletcam was set...", 0 );
                    sub_168( "CCB", "Deactivating camera pointing...", 0 );
                    CAMERA_POINT_AT_GRENADE( 0 );
                    CAMERA_CLEAR_POINT_AT_TARGET();
                    sub_168( "CCB", "eCheckpoint - STATE_CHECKPOINT_OUTRO_CUTSCENE_10_05", 0 );
                    l_U114 = 12;
                }
            }
            else if ((sub_11022( ref l_U141 )) == 0)
            {
                sub_168( "CCB", "All enemies are dead... The Bulletcam was never assigned!!!", 0 );
                sub_168( "CCB", "Deactivating camera pointing...", 0 );
                CAMERA_POINT_AT_GRENADE( 0 );
                CAMERA_CLEAR_POINT_AT_TARGET();
                sub_168( "CCB", "eCheckpoint - STATE_CHECKPOINT_OUTRO_CUTSCENE_10_05", 0 );
                l_U114 = 12;
            }
        }
        break;
        case 12: break;
        case 14:
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        sub_168( "CCB", "eCheckpoint - STATE_CHECKPOINT_COMPLETE", 0 );
        l_U114 = 16;
        break;
        case 15:
        switch (l_U576)
        {
            case 0: break;
            case 1:
            if (IS_DEATH_PANEL_WIPE_ALLOWED())
            {
                l_U576 = 2;
            }
            else if (sub_67473())
            {
                l_U576 = 2;
                sub_168( "CCB", "eFailure - STATE_FAIL_QUIT_RETRY", 0 );
            }
            break;
            case 2:
            if (sub_68561( 0 ))
            {
                l_U576 = 3;
                sub_168( "CCB", "eFailure - STATE_FAIL_WAITING", 0 );
            }
            break;
            case 3:
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) || ((IS_SCREEN_FADING_IN()) || (IS_SCREEN_FADED_OUT())))
            {
                if (NOT IS_LAST_MAN_STANDING_ACTIVE())
                {
                    if (NOT (IS_PED_DEAD( sub_1047() )))
                    {
                        sub_168( "CCB", "Deactivating bullettime...", 0 );
                        DEACTIVATE_BULLET_TIME( 0, 0 );
                        END_POSTFX_BLENDER( 3, 0 );
                        l_U576 = 4;
                        sub_168( "CCB", "eFailure - STATE_FAIL_CLEANUP", 0 );
                    }
                    else
                    {
                        sub_168( "CCB", "Waiting for the Player ped to be valid...", 0 );
                    }
                }
                else
                {
                    sub_168( "CCB", "Waiting for the last man standing...", 0 );
                }
            }
            else
            {
                sub_168( "CCB", "Waiting for the screen to fade out...", 0 );
            }
            break;
            case 4:
            if (NOT (IS_PLAYER_DEAD( sub_1069() )))
            {
                if (NOT (IS_PED_DEAD( sub_1047() )))
                {
                    SET_PLAYER_CONTROL( sub_1069(), 0, 0 );
                }
            }
            DO_SCREEN_FADE_OUT( 0 );
            DESTROY_ALL_CAMS();
            RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
            AUDIO_MUSIC_SUSPEND( 500 );
            HOLD_LAST_MAN_STAND_ANIMATED_RECOVERY( 0 );
            sub_69851( 1 );
            sub_168( "CCB", "Incrementing the checkpoint restart counter:", 0 );
            g_U2875[11]++;
            l_U576 = 5;
            sub_168( "CCB", "eFailure - STATE_FAIL_RESTORE", 0 );
            break;
            case 5:
            if (l_U35._fU0)
            {
                sub_44836( ref l_U35, sub_1047() );
            }
            sub_71841();
            l_U576 = 6;
            sub_168( "CCB", "eFailure - STATE_FAIL_RESTART", 0 );
            break;
            case 6:
            if (GET_NUMBER_OF_STREAMING_REQUESTS() == 0)
            {
                sub_168( "CCB", "eFailure - STATE_FAIL_IDLE", 0 );
                l_U576 = 0;
                sub_168( "CCB", "eCheckpoint - STATE_CHECKPOINT_INIT", 0 );
                l_U114 = 0;
            }
            else
            {
                sub_168( "CCB", "Waiting for stream requests...", 0 );
            }
            break;
        }
        break;
        case 16:
        HOLD_LAST_MAN_STAND_ANIMATED_RECOVERY( 0 );
        break;
    }
    return;
}

void sub_272()
{
    if (NOT (IS_PED_DEAD( l_U141[1] )))
    {
        switch (l_U127)
        {
            case 0:
            sub_386( ref l_U467, 0, 1, 0 );
            sub_522( ref l_U467 );
            sub_168( "CCB", "eStandoffVCPF_1 - STATE_EVENT_PRELOAD", 0 );
            l_U127 = 1;
            break;
            case 1:
            if (sub_731( "Vehicle/Vehicle_Car.act", ref g_U1535 ))
            {
                sub_168( "CCB", "eStandoffVCPF_1 - STATE_EVENT_START", 0 );
                l_U127 = 6;
            }
            else
            {
                sub_168( "CCB", "Waiting for the txtActVIG21 action tree to load...", 0 );
            }
            break;
            case 6:
            if ((g_U2875[11] > 0) || (g_U763 == 11))
            {
                if (l_U125 >= 4)
                {
                    sub_992();
                    sub_1582();
                    l_U467._fU12 = 375;
                    sub_3778( ref l_U467 );
                    sub_522( ref l_U467 );
                    sub_168( "CCB", "eStandoffVCPF_1 - STATE_EVENT_IN", 0 );
                    l_U127 = 7;
                }
            }
            else if ((HAS_CUTSCENE_FINISHED()) || (GET_CUTSCENE_TIME_MS() >= 59634))
            {
                sub_992();
                sub_1582();
                l_U467._fU12 = 375;
                sub_3778( ref l_U467 );
                sub_522( ref l_U467 );
                sub_168( "CCB", "eStandoffVCPF_1 - STATE_EVENT_IN", 0 );
                l_U127 = 7;
            }
            break;
            case 7:
            if (sub_4082( ref l_U467 ))
            {
                sub_168( "CCB", "Tasking the piStandoffVCPF_1 ped to get out.", 0 );
                if (NOT (IS_PED_DEAD( l_U141[1] )))
                {
                    OPEN_SEQUENCE_TASK( ref l_U466 );
                    TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
                    if (NOT (IS_VEHICLE_DEAD( l_U452[5] )))
                    {
                        TASK_LEAVE_VEHICLE_DONT_CLOSE_DOOR( 0, l_U452[5] );
                    }
                    TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
                    TASK_COMBAT_PED( 0, sub_1047() );
                    CLOSE_SEQUENCE_TASK( l_U466 );
                    TASK_PERFORM_SEQUENCE( l_U141[1], l_U466 );
                    CLEAR_SEQUENCE_TASK( l_U466 );
                }
                l_U467._fU12 = 4860;
                sub_3778( ref l_U467 );
                sub_522( ref l_U467 );
                sub_168( "CCB", "eStandoffVCPF_1 - STATE_EVENT_01", 0 );
                l_U127 = 10;
            }
            break;
            case 10:
            if (sub_4082( ref l_U467 ))
            {
                sub_168( "CCB", "Tasking the piStandoffVCPF_1 ped to throw grenade.", 0 );
                OPEN_SEQUENCE_TASK( ref l_U466 );
                TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
                TASK_AIM_GUN_AT_COORD( 0, l_U619, 1000, 0 );
                TASK_SHOOT_AT_COORD( 0, l_U619, -1, 1566631136, 0, 0 );
                CLOSE_SEQUENCE_TASK( l_U466 );
                TASK_PERFORM_SEQUENCE( l_U141[1], l_U466 );
                CLEAR_SEQUENCE_TASK( l_U466 );
                sub_168( "CCB", "eStandoffVCPF_1 - STATE_EVENT_02", 0 );
                l_U127 = 11;
            }
            break;
            case 11:
            if (NOT (IS_PED_DEAD( l_U141[1] )))
            {
                l_U465 = GET_WEAPON_FROM_HAND( l_U141[1], 0, 0 );
                if (GET_DOES_WEAPON_EXIST( l_U465 ))
                {
                    if ((GET_WEAPON_TYPE( l_U465 )) == g_U2863)
                    {
                        sub_168( "CCB", "The piStandoffVCPF_1 ped has the grenade...", 0 );
                        CAMERA_POINT_AT_GRENADE( 1 );
                        sub_168( "CCB", "eStandoffVCPF_1 - STATE_EVENT_03", 0 );
                        l_U127 = 12;
                    }
                }
            }
            break;
            case 12:
            if (NOT (IS_PED_DEAD( l_U141[1] )))
            {
                if (IS_PED_SHOOTING( l_U141[1] ))
                {
                    sub_168( "CCB", "The piStandoffVCPF_1 ped is shooting...", 0 );
                    OPEN_SEQUENCE_TASK( ref l_U466 );
                    TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
                    TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 199.52000000, -41.55000000, 0.30000000, sub_1047(), 3, 0, 1056964608, 0, 1, 0 );
                    TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
                    TASK_COMBAT_PED( 0, sub_1047() );
                    CLOSE_SEQUENCE_TASK( l_U466 );
                    TASK_PERFORM_SEQUENCE( l_U141[1], l_U466 );
                    CLEAR_SEQUENCE_TASK( l_U466 );
                    sub_386( ref l_U485, 1300, 1, 0 );
                    sub_522( ref l_U485 );
                    sub_386( ref l_U494, 15000, 1, 0 );
                    sub_522( ref l_U494 );
                    l_U71 = 0;
                    l_U137++;
                    sub_168( "CCB", "The grenade is being thrown by ped:", 0 );
                    sub_168( "CCB", "eGrenadeEvent - STATE_GRENADE_IN_AIR", 0 );
                    l_U575 = 3;
                    sub_168( "CCB", "eStandoffVCPF_1 - STATE_EVENT_COMPLETE", 0 );
                    l_U127 = 44;
                }
            }
            break;
            case 44: break;
        }
    }
    else
    {
        sub_168( "CCB", "The piStandoffVCPF_1 ped is dead!!!", 0 );
    }
    return;
}

void sub_386(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

void sub_522(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

int sub_731(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I]._fU64 == 3)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[I]._fU0, uParam0 ))
            {
                return 1;
            }
        }
    }
    return 0;
}

void sub_992()
{
    sub_168( "CCB", "P_START_STANDOFF_VCPF_BLENDOUT", 0 );
    if (NOT (IS_PED_DEAD( sub_1047() )))
    {
        if (NOT (IS_PED_DEAD( l_U141[0] )))
        {
            OPEN_SEQUENCE_TASK( ref l_U466 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            if (NOT (IS_VEHICLE_DEAD( l_U452[5] )))
            {
                TASK_LEAVE_VEHICLE_DONT_CLOSE_DOOR( 0, l_U452[5] );
                TASK_LEAVE_VEHICLE_IMMEDIATELY( 0, l_U452[5] );
            }
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_1047() );
            CLOSE_SEQUENCE_TASK( l_U466 );
            TASK_PERFORM_SEQUENCE( l_U141[0], l_U466 );
            CLEAR_SEQUENCE_TASK( l_U466 );
        }
        if (NOT (IS_PED_DEAD( l_U141[2] )))
        {
            OPEN_SEQUENCE_TASK( ref l_U466 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            if (NOT (IS_VEHICLE_DEAD( l_U452[5] )))
            {
                TASK_LEAVE_VEHICLE_DONT_CLOSE_DOOR( 0, l_U452[5] );
            }
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_1047() );
            CLOSE_SEQUENCE_TASK( l_U466 );
            TASK_PERFORM_SEQUENCE( l_U141[2], l_U466 );
            CLEAR_SEQUENCE_TASK( l_U466 );
        }
        if (NOT (IS_PED_DEAD( l_U141[3] )))
        {
            OPEN_SEQUENCE_TASK( ref l_U466 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            if (NOT (IS_VEHICLE_DEAD( l_U452[5] )))
            {
                TASK_LEAVE_VEHICLE_DONT_CLOSE_DOOR( 0, l_U452[5] );
            }
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_1047() );
            CLOSE_SEQUENCE_TASK( l_U466 );
            TASK_PERFORM_SEQUENCE( l_U141[3], l_U466 );
            CLEAR_SEQUENCE_TASK( l_U466 );
        }
    }
    return;
}

int sub_1047()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED( sub_1069() );
    }
    return 0;
}

void sub_1069()
{
    return GET_PLAYER_ID();
}

void sub_1582()
{
    sub_168( "CCB", "P_START_STANDOFF_VCPF", 0 );
    if (NOT (IS_PED_DEAD( sub_1047() )))
    {
        if (NOT (IS_PED_DEAD( l_U141[4] )))
        {
            sub_1675( l_U141[4] );
            OPEN_SEQUENCE_TASK( ref l_U466 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 176.98000000, -27.68000000, 0.30000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_1047() );
            CLOSE_SEQUENCE_TASK( l_U466 );
            TASK_PERFORM_SEQUENCE( l_U141[4], l_U466 );
            CLEAR_SEQUENCE_TASK( l_U466 );
        }
        if (NOT (IS_PED_DEAD( l_U141[5] )))
        {
            sub_1675( l_U141[5] );
            OPEN_SEQUENCE_TASK( ref l_U466 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 168.50000000, -23.89000000, 0.30000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_1047() );
            CLOSE_SEQUENCE_TASK( l_U466 );
            TASK_PERFORM_SEQUENCE( l_U141[5], l_U466 );
            CLEAR_SEQUENCE_TASK( l_U466 );
        }
        if (NOT (IS_PED_DEAD( l_U141[6] )))
        {
            sub_1675( l_U141[6] );
            OPEN_SEQUENCE_TASK( ref l_U466 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 176.18000000, -25.59000000, 0.30000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_1047() );
            CLOSE_SEQUENCE_TASK( l_U466 );
            TASK_PERFORM_SEQUENCE( l_U141[6], l_U466 );
            CLEAR_SEQUENCE_TASK( l_U466 );
        }
        if (NOT (IS_PED_DEAD( l_U141[7] )))
        {
            sub_1675( l_U141[7] );
            OPEN_SEQUENCE_TASK( ref l_U466 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 212.31000000, -15.28000000, 0.10000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 213.54000000, -23.22000000, 0.10000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 208.74000000, -33.22000000, 0.10000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_1047() );
            CLOSE_SEQUENCE_TASK( l_U466 );
            TASK_PERFORM_SEQUENCE( l_U141[7], l_U466 );
            CLEAR_SEQUENCE_TASK( l_U466 );
        }
        if (NOT (IS_PED_DEAD( l_U141[8] )))
        {
            sub_1675( l_U141[8] );
            OPEN_SEQUENCE_TASK( ref l_U466 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 209.67000000, -15.28000000, 0.10000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 212.10000000, -30.67000000, 0.10000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 210.34000000, -33.22000000, 0.10000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_1047() );
            CLOSE_SEQUENCE_TASK( l_U466 );
            TASK_PERFORM_SEQUENCE( l_U141[8], l_U466 );
            CLEAR_SEQUENCE_TASK( l_U466 );
        }
        if (NOT (IS_PED_DEAD( l_U141[9] )))
        {
            sub_1675( l_U141[9] );
            OPEN_SEQUENCE_TASK( ref l_U466 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 211.51000000, -14.25000000, 0.10000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 214.40000000, -26.09000000, 0.10000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 211.31000000, -32.26000000, 0.10000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_1047() );
            CLOSE_SEQUENCE_TASK( l_U466 );
            TASK_PERFORM_SEQUENCE( l_U141[9], l_U466 );
            CLEAR_SEQUENCE_TASK( l_U466 );
        }
        if (NOT (IS_PED_DEAD( l_U141[10] )))
        {
            sub_1675( l_U141[10] );
            OPEN_SEQUENCE_TASK( ref l_U466 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 211.03000000, -15.28000000, 0.10000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 214.87000000, -33.22000000, 0.10000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_1047() );
            CLOSE_SEQUENCE_TASK( l_U466 );
            TASK_PERFORM_SEQUENCE( l_U141[10], l_U466 );
            CLEAR_SEQUENCE_TASK( l_U466 );
        }
        if (NOT (IS_PED_DEAD( l_U141[11] )))
        {
            sub_1675( l_U141[11] );
            OPEN_SEQUENCE_TASK( ref l_U466 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 177.31000000, 30.06000000, 0.30000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 176.98000000, -27.68000000, 0.30000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_1047() );
            CLOSE_SEQUENCE_TASK( l_U466 );
            TASK_PERFORM_SEQUENCE( l_U141[11], l_U466 );
            CLEAR_SEQUENCE_TASK( l_U466 );
        }
        if (NOT (IS_PED_DEAD( l_U141[12] )))
        {
            sub_1675( l_U141[12] );
            OPEN_SEQUENCE_TASK( ref l_U466 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 140.10000000, -15.43000000, 0.30000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 149.05000000, -24.78000000, 0.30000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 176.98000000, -27.68000000, 0.30000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_1047() );
            CLOSE_SEQUENCE_TASK( l_U466 );
            TASK_PERFORM_SEQUENCE( l_U141[12], l_U466 );
            CLEAR_SEQUENCE_TASK( l_U466 );
        }
        if (NOT (IS_PED_DEAD( l_U141[13] )))
        {
            sub_1675( l_U141[13] );
            OPEN_SEQUENCE_TASK( ref l_U466 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 140.10000000, -4.60000000, 0.30000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 176.18000000, -25.59000000, 0.30000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_1047() );
            CLOSE_SEQUENCE_TASK( l_U466 );
            TASK_PERFORM_SEQUENCE( l_U141[13], l_U466 );
            CLEAR_SEQUENCE_TASK( l_U466 );
        }
    }
    return;
}

void sub_1675(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 0 );
        SET_PED_VISIBLE( uParam0, 1 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 1 );
        FREEZE_PED_POSITION( uParam0, 0 );
        SET_PED_COLLISION( uParam0, 1 );
        SET_PED_PROOFS( uParam0, 0, 0, 0, 0, 0 );
    }
    return;
}

void sub_3778(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

int sub_4082(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

void sub_5530()
{
    if (l_U114 > 10)
    {
        if (IS_PED_DEAD( sub_1047() ))
        {
            sub_168( "CCB", "eCheckpoint - STATE_CHECKPOINT_FAIL", 0 );
            l_U114 = 15;
            l_U576 = 1;
            sub_168( "CCB", "eFailure - STATE_FAIL_MIDSCENE", 0 );
        }
    }
    return;
}

void sub_5684()
{
    switch (l_U117)
    {
        case 0:
        if (NOT (REQUEST_SCRIPT_AUDIO_BANK( "SCRIPT_MISSION\S_BUSDEP_RS_STANDOFF" )))
        {
            sub_168( "CCB", "Requesting S_BUSDEP_RS_STANDOFF mission audio bank...", 0 );
        }
        else
        {
            sub_168( "CCB", "The S_BUSDEP_RS_STANDOFF mission audio bank was already requested!!!", 0 );
        }
        sub_168( "CCB", "eAudioStreamState - STATE_AUDIO_01", 0 );
        l_U117 = 1;
        break;
        case 1:
        if (REQUEST_SCRIPT_AUDIO_BANK( "SCRIPT_MISSION\S_BUSDEP_RS_STANDOFF" ))
        {
            sub_168( "CCB", "The S_BUSDEP_RS_STANDOFF mission audio bank was loaded...", 0 );
            sub_168( "CCB", "eAudioStreamState - STATE_AUDIO_COMPLETE", 0 );
            l_U117 = 26;
        }
        break;
        case 26: break;
    }
    return;
}

void sub_6198()
{
    if ((l_U118 < 26) AND (l_U118 > 0))
    {
        ;
    }
    switch (l_U118)
    {
        case 0:
        sub_386( ref l_U548, 1000, 1, 0 );
        sub_522( ref l_U548 );
        sub_168( "CCB", "eSpeech - STATE_AUDIO_01", 0 );
        l_U118 = 1;
        break;
        case 1:
        if (l_U114 >= 9)
        {
            if (l_U125 >= 6)
            {
                if (IS_SCREEN_FADED_IN())
                {
                    sub_168( "CCB", "Playing the SBUS_TFCA speech...", 0 );
                    sub_6495( ref l_U703 );
                    if (NOT (IS_PED_DEAD( l_U141[1] )))
                    {
                        sub_168( "CCB", "Adding piStandoffVCPF_1 ped for script speech.", 0 );
                        sub_6672( 1, l_U141[1], "M10_CP_55_Avg", ref l_U703, 2, 0 );
                    }
                    sub_6888( "SBUS_TFCA", ref l_U703, 7, 1 );
                    sub_168( "CCB", "eSpeech - STATE_AUDIO_02", 0 );
                    l_U118 = 2;
                }
            }
        }
        break;
        case 2:
        if (NOT (sub_7724( l_U703 )))
        {
            l_U548._fU12 = 15000;
            sub_3778( ref l_U548 );
            sub_522( ref l_U548 );
            sub_168( "CCB", "eSpeech - STATE_AUDIO_03", 0 );
            l_U118 = 3;
        }
        break;
        case 3:
        if (sub_4082( ref l_U548 ))
        {
            sub_168( "CCB", "Playing the SBUS_TFCB speech...", 0 );
            sub_6495( ref l_U713 );
            if (NOT (IS_PED_DEAD( l_U141[4] )))
            {
                sub_168( "CCB", "Adding piStandoffVCPF_4 ped for script speech.", 0 );
                sub_6672( 1, l_U141[4], "M10_CP_53_Mus", ref l_U713, 2, 0 );
            }
            sub_6888( "SBUS_TFCB", ref l_U713, 7, 1 );
            sub_168( "CCB", "eSpeech - STATE_AUDIO_04", 0 );
            l_U118 = 4;
        }
        break;
        case 4:
        if (NOT (sub_7724( l_U713 )))
        {
            l_U548._fU12 = 15000;
            sub_3778( ref l_U548 );
            sub_522( ref l_U548 );
            sub_168( "CCB", "eSpeech - STATE_AUDIO_05", 0 );
            l_U118 = 5;
        }
        break;
        case 5:
        if (sub_4082( ref l_U548 ))
        {
            sub_168( "CCB", "Playing the SBUS_TFCD speech...", 0 );
            sub_6495( ref l_U723 );
            if (NOT (IS_PED_DEAD( l_U141[11] )))
            {
                sub_168( "CCB", "Adding piStandoffVCPF_11 ped for script speech.", 0 );
                sub_6672( 1, l_U141[11], "M10_CP_56_Avg", ref l_U723, 2, 0 );
            }
            sub_6888( "SBUS_TFCD", ref l_U723, 7, 1 );
            sub_168( "CCB", "eSpeech - STATE_AUDIO_06", 0 );
            l_U118 = 6;
        }
        break;
        case 6:
        if (NOT (sub_7724( l_U723 )))
        {
            l_U548._fU12 = 15000;
            sub_3778( ref l_U548 );
            sub_522( ref l_U548 );
            sub_168( "CCB", "eSpeech - STATE_AUDIO_07", 0 );
            l_U118 = 7;
        }
        break;
        case 7:
        if (sub_4082( ref l_U548 ))
        {
            sub_168( "CCB", "Playing the SBUS_TFCE speech...", 0 );
            sub_6495( ref l_U733 );
            if (NOT (IS_PED_DEAD( l_U141[12] )))
            {
                sub_168( "CCB", "Adding piStandoffVCPF_12 ped for script speech.", 0 );
                sub_6672( 1, l_U141[12], "M10_CP_57_Mus", ref l_U733, 2, 0 );
            }
            sub_6888( "SBUS_TFCE", ref l_U733, 7, 1 );
            sub_168( "CCB", "eSpeech - STATE_AUDIO_08", 0 );
            l_U118 = 8;
        }
        break;
        case 8:
        if (NOT (sub_7724( l_U733 )))
        {
            l_U548._fU12 = 15000;
            sub_3778( ref l_U548 );
            sub_522( ref l_U548 );
            sub_168( "CCB", "eSpeech - STATE_AUDIO_09", 0 );
            l_U118 = 9;
        }
        break;
        case 9:
        if (sub_4082( ref l_U548 ))
        {
            sub_168( "CCB", "Playing the SBUS_TFCF speech...", 0 );
            sub_6495( ref l_U743 );
            if (NOT (IS_PED_DEAD( l_U141[13] )))
            {
                sub_168( "CCB", "Adding piStandoffVCPF_13 ped for script speech.", 0 );
                sub_6672( 1, l_U141[13], "M10_CP_58_Avg", ref l_U743, 2, 0 );
            }
            sub_6888( "SBUS_TFCF", ref l_U743, 7, 1 );
            sub_168( "CCB", "eSpeech - STATE_AUDIO_10", 0 );
            l_U118 = 10;
        }
        break;
        case 10:
        if (NOT (sub_7724( l_U743 )))
        {
            l_U548._fU12 = 15000;
            sub_3778( ref l_U548 );
            sub_522( ref l_U548 );
            sub_168( "CCB", "eSpeech - STATE_AUDIO_COMPLETE", 0 );
            l_U118 = 26;
        }
        break;
        case 26: break;
    }
    return;
}

void sub_6495(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

void sub_6672(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

void sub_6888(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return sub_6912( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

void sub_6912(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return sub_6967( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

int sub_6967(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT (sub_7002( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
    sub_7496( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

int sub_7002(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

void sub_7496(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

int sub_7724(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    if (NOT (sub_7737( uParam0 )))
    {
        return 0;
    }
    if ((g_U11[uParam0._fU4] == 2) || ((g_U11[uParam0._fU4] == 1) || (IS_SCRIPTED_CONVERSATION_ONGOING( uParam0._fU4 ))))
    {
        if (uParam0._fU8 == g_U6[uParam0._fU4])
        {
            return 1;
        }
    }
    return 0;
}

boolean sub_7737(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    int iVar12;

    if (uParam0._fU4 < 0)
    {
        return 0;
    }
    iVar12 = GET_CHECK_HASH_FROM_CONVERSATION_ID( uParam0._fU4 );
    return (uParam0._fU16 == iVar12) AND (iVar12 != 0);
}

void sub_9410()
{
    switch (l_U119)
    {
        case 0:
        l_U539._fU12 = 0;
        sub_3778( ref l_U539 );
        sub_522( ref l_U539 );
        sub_168( "CCB", "eMusic - STATE_AUDIO_01", 0 );
        l_U119 = 1;
        break;
        case 1:
        if ((g_U2875[11] > 0) || (g_U763 == 11))
        {
            sub_168( "CCB", "Suspending music...", 0 );
            AUDIO_MUSIC_SUSPEND( 500 );
            sub_168( "CCB", "eMusic - STATE_AUDIO_03", 0 );
            l_U119 = 3;
        }
        else if (l_U114 >= 8)
        {
            if (l_U123 >= 4)
            {
                if (GET_CUTSCENE_TIME_MS() >= 41100)
                {
                    sub_168( "CCB", "Starting BUSDEPOT_ACTION_SONG_03 music track with BUSDEPOT_03_2 mood.", 0 );
                    AUDIO_MUSIC_FORCE_TRACK( "BUSDEPOT_ACTION_SONG_03", "BUSDEPOT_03_2", "", 0.00000000, 7000, 5000, -1082130432, 0 );
                    sub_168( "CCB", "eMusic - STATE_AUDIO_02", 0 );
                    l_U119 = 2;
                }
                else if (HAS_CUTSCENE_FINISHED())
                {
                    sub_168( "CCB", "The cutscene was skipped...", 0 );
                    l_U539._fU12 = 0;
                    sub_3778( ref l_U539 );
                    sub_522( ref l_U539 );
                    sub_168( "CCB", "eMusic - STATE_AUDIO_03", 0 );
                    l_U119 = 3;
                }
            }
        }
        break;
        case 2:
        if (GET_CUTSCENE_TIME_MS() >= 58650)
        {
            sub_168( "CCB", "Starting BUSDEPOT_ACTION_SONG_03 music track with BUSDEPOT_03_2_3_4 mood.", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "BUSDEPOT_ACTION_SONG_03", "BUSDEPOT_03_2_3_4", "", 0.00000000, 6000, 5000, -1082130432, 0 );
            l_U539._fU12 = 0;
            sub_3778( ref l_U539 );
            sub_522( ref l_U539 );
            sub_168( "CCB", "eMusic - STATE_AUDIO_03", 0 );
            l_U119 = 3;
        }
        else if (HAS_CUTSCENE_FINISHED())
        {
            sub_168( "CCB", "The cutscene was skipped...", 0 );
            l_U539._fU12 = 0;
            sub_3778( ref l_U539 );
            sub_522( ref l_U539 );
            sub_168( "CCB", "eMusic - STATE_AUDIO_03", 0 );
            l_U119 = 3;
        }
        break;
        case 3:
        if (l_U114 >= 10)
        {
            sub_168( "CCB", "Starting BUSDEPOT_ACTION_SONG_03 music track with BUSDEPOT_03_2_3_4 mood.", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "BUSDEPOT_ACTION_SONG_03", "BUSDEPOT_03_2_3_4", 0, 0, -1, -1, -1082130432, 0 );
            sub_168( "CCB", "eMusic - STATE_AUDIO_04", 0 );
            l_U119 = 4;
        }
        break;
        case 4:
        if (l_U114 >= 11)
        {
            if (l_U120 >= 3)
            {
                if ((sub_10675( ref l_U141 )) >= 5)
                {
                    sub_168( "CCB", "Starting BUSDEPOT_ACTION_SONG_03 music track with BUSDEPOT_03_2_3_4_5 mood.", 0 );
                    AUDIO_MUSIC_FORCE_TRACK( "BUSDEPOT_ACTION_SONG_03", "BUSDEPOT_03_2_3_4_5", "", 0.00000000, 5000, 8000, -1082130432, 0 );
                    sub_168( "CCB", "eMusic - STATE_AUDIO_05", 0 );
                    l_U119 = 5;
                }
            }
        }
        break;
        case 5:
        if (l_U114 >= 11)
        {
            if (l_U120 >= 3)
            {
                if (((NOT IS_LAST_MAN_STANDING_ACTIVE()) AND (IS_BULLET_CAMERA_RUNNING( 0 ))) || ((sub_11022( ref l_U141 )) == 0))
                {
                    sub_168( "CCB", "Suspending music...", 0 );
                    AUDIO_MUSIC_SUSPEND( 500 );
                    sub_168( "CCB", "eMusic - STATE_AUDIO_COMPLETE", 0 );
                    l_U119 = 26;
                }
            }
        }
        break;
        case 26: break;
    }
    return;
}

void sub_10675(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            if (IS_PED_DEAD( (uParam0^)[I] ))
            {
                Result++;
            }
        }
    }
    return Result;
}

void sub_11022(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result++;
        }
    }
    return Result;
}

void sub_11239()
{
    switch (l_U122)
    {
        case 0:
        if (l_U114 >= 3)
        {
            l_U134 = 0;
            if ((g_U2875[11] > 0) || (g_U763 == 11))
            {
                sub_168( "CCB", "eSpawnProps - STATE_SPAWN_SETUP", 0 );
                l_U122 = 2;
            }
            else
            {
                sub_168( "CCB", "eSpawnProps - STATE_SPAWN_IDLE", 0 );
                l_U122 = 1;
            }
        }
        break;
        case 1:
        if (l_U134 < 2)
        {
            sub_168( "CCB", "Spawning oiProps_:", 0 );
            l_U432[l_U134] = sub_11533( l_U449[l_U134], l_U602[l_U134], l_U609[l_U134], 0, 0, 0 );
            sub_11944( ref l_U432, l_U134 );
            l_U134++;
        }
        else
        {
            sub_168( "CCB", "eSpawnProps - STATE_SPAWN_SETUP", 0 );
            l_U122 = 2;
        }
        break;
        case 2:
        if (l_U114 >= 10)
        {
            sub_168( "CCB", "eSpawnProps - STATE_SPAWN_COMPLETE", 0 );
            l_U122 = 3;
        }
        break;
        case 3: break;
    }
    return;
}

void sub_11533(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
        sub_11643( uParam0, 1 );
    }
    Result = CREATE_OBJECT_NO_OFFSET( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

void sub_11643(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
        sub_11748( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_11748(unknown uParam0)
{
    return;
}

void sub_11944(unknown uParam0, int iParam1)
{
    if (DOES_OBJECT_EXIST( (uParam0^)[iParam1] ))
    {
        FREEZE_OBJECT_POSITION( (uParam0^)[iParam1], 1 );
        if (iParam1 == 1)
        {
            sub_168( "CCB", "Hiding the oiStandoffProps_1 object.", 0 );
            SET_OBJECT_VISIBLE( l_U432[1], 0 );
        }
    }
    else
    {
        sub_168( "CCB", "The oiTempProp object is NOT valid!!!", 0 );
    }
    return;
}

void sub_12288()
{
    switch (l_U121)
    {
        case 0:
        if (l_U114 >= 3)
        {
            if (l_U122 >= 2)
            {
                l_U133 = 0;
                if ((g_U2875[11] > 0) || (g_U763 == 11))
                {
                    sub_168( "CCB", "eSpawnVehicles - STATE_SPAWN_SETUP", 0 );
                    l_U121 = 2;
                }
                else
                {
                    sub_168( "CCB", "eSpawnVehicles - STATE_SPAWN_IDLE", 0 );
                    l_U121 = 1;
                }
            }
        }
        break;
        case 1:
        sub_12514();
        sub_168( "CCB", "eSpawnVehicles - STATE_SPAWN_SETUP", 0 );
        l_U121 = 2;
        break;
        case 2:
        if (l_U114 >= 10)
        {
            sub_168( "CCB", "eSpawnVehicles - STATE_SPAWN_COMPLETE", 0 );
            l_U121 = 3;
        }
        break;
        case 3: break;
    }
    return;
}

void sub_12514()
{
    int I;

    sub_168( "CCB", "P_SPAWN_VEHICLES", 0 );
    for ( I = 0; I <= (l_U452 - 1); I++ )
    {
        sub_168( "CCB", "Spawning viStandoffVehicles:", 0 );
        if (NOT (DOES_VEHICLE_EXIST( l_U452[I] )))
        {
            l_U452[I] = sub_12669( l_U440[I], l_U577[I], l_U625[I], 0, 0, 0 );
            sub_12901( ref l_U452, I );
        }
        else
        {
            sub_168( "CCB", "The viStandoffVehicles vehicle was already created.", 0 );
        }
    }
    sub_168( "CCB", "Enabling all vehicles to high LOD...", 0 );
    SET_ALL_VEHICLES_HIGH_LOD( 1 );
    return;
}

void sub_12669(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, int iParam5, unknown uParam6, unknown uParam7)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a vehicle with MUST BE PRELOADED!!!!", 0 );
        sub_11643( uParam0, 1 );
    }
    Result = CREATE_VEHICLE( uParam0, uParam1, uParam4, uParam6, uParam7 );
    if (iParam5 == 1)
    {
        while ((DOES_VEHICLE_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    if (DOES_VEHICLE_EXIST( Result ))
    {
        SET_PETROLTANK_BURN_RATE( Result, 125.00000000 );
    }
    return Result;
}

void sub_12901(unknown uParam0, int iParam1)
{
    if (NOT (IS_VEHICLE_DEAD( (uParam0^)[iParam1] )))
    {
        SET_VEHICLE_ON_GROUND_PROPERLY( (uParam0^)[iParam1] );
        SET_VEHICLE_FREEZE_AFTER_BLOWING_UP( (uParam0^)[iParam1], 1 );
        SET_VEHICLE_CAN_BE_DAMAGED( (uParam0^)[iParam1], 1 );
        SET_VEHICLE_PROOFS( (uParam0^)[iParam1], 0, 0, 1, 0, 0 );
        if (iParam1 == 0)
        {
            SET_VEHICLE_ENGINE_HEALTH( (uParam0^)[iParam1], 400 );
            SET_VEHICLE_PETROL_TANK_HEALTH( (uParam0^)[iParam1], 200 );
        }
        else
        {
            SET_VEHICLE_ENGINE_HEALTH( (uParam0^)[iParam1], 500.00000000 );
            SET_VEHICLE_PETROL_TANK_HEALTH( (uParam0^)[iParam1], 200.00000000 );
        }
        sub_168( "CCB", "The vehicle's engine health is:", 0 );
        sub_168( "CCB", "The vehicle's petrol tank health is:", 0 );
        SET_VEHICLE_LIGHTS( (uParam0^)[iParam1], 1 );
        SET_VEHICLE_DIRT_LEVEL( (uParam0^)[iParam1], 4.00000000 );
        if (iParam1 == 0)
        {
            l_U136 = START_PARTICLE_FX_LOOPED_ON_VEHICLE( "Veh_Rad_Steam_S", (uParam0^)[iParam1], 0.00000000, 5.75000000, 1.00000000, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
        }
        else if ((iParam1 == 7) || ((iParam1 == 6) || (iParam1 == 3)))
        {
            sub_168( "CCB", "Setting vehicle extra 1...", 0 );
            SET_VEHICLE_EXTRA( (uParam0^)[iParam1], 1, 0 );
        }
        if (iParam1 == 0)
        {
            SET_VEHICLE_COLOUR_COMBINATION( (uParam0^)[iParam1], 0 );
        }
        else if (iParam1 == 1)
        {
            SET_VEHICLE_COLOUR_COMBINATION( (uParam0^)[iParam1], 0 );
        }
        else if (iParam1 == 2)
        {
            SET_VEHICLE_COLOUR_COMBINATION( (uParam0^)[iParam1], 0 );
        }
        else if (iParam1 == 3)
        {
            SET_VEHICLE_COLOUR_COMBINATION( (uParam0^)[iParam1], 0 );
        }
        else if (iParam1 == 4)
        {
            SET_VEHICLE_COLOUR_COMBINATION( (uParam0^)[iParam1], 0 );
        }
        else if (iParam1 == 5)
        {
            FREEZE_VEHICLE_POSITION( (uParam0^)[iParam1], 1 );
            SET_VEHICLE_VISIBLE( (uParam0^)[iParam1], 0 );
            SET_VEHICLE_ENGINE_ON( (uParam0^)[iParam1], 1, 1 );
            SET_VEHICLE_COLOUR_COMBINATION( (uParam0^)[iParam1], 0 );
            SET_VEHICLE_EXTRA( (uParam0^)[iParam1], 1, 1 );
            SET_VEHICLE_EXTRA( (uParam0^)[iParam1], 2, 1 );
            SET_VEHICLE_EXTRA( (uParam0^)[iParam1], 3, 0 );
            SET_VEHICLE_EXTRA( (uParam0^)[iParam1], 4, 1 );
            SET_VEHICLE_EXTRA( (uParam0^)[iParam1], 5, 1 );
            SET_VEHICLE_EXTRA( (uParam0^)[iParam1], 6, 1 );
            SET_VEHICLE_EXTRA( (uParam0^)[iParam1], 7, 1 );
            SET_VEHICLE_EXTRA( (uParam0^)[iParam1], 8, 1 );
        }
        else if (iParam1 == 6)
        {
            SET_VEHICLE_COLOUR_COMBINATION( (uParam0^)[iParam1], 1 );
            SET_VEHICLE_VISIBLE( (uParam0^)[iParam1], 0 );
        }
        else if (iParam1 == 7)
        {
            SET_VEHICLE_COLOUR_COMBINATION( (uParam0^)[iParam1], 2 );
            SET_VEHICLE_VISIBLE( (uParam0^)[iParam1], 0 );
        };;;;;;;;
    }
    return;
}

void sub_14112()
{
    switch (l_U120)
    {
        case 0:
        if (l_U114 >= 3)
        {
            if (l_U121 >= 2)
            {
                l_U132 = 0;
                if ((g_U2875[11] > 0) || (g_U763 == 11))
                {
                    sub_168( "CCB", "eSpawnStandoffVCPF - STATE_SPAWN_SETUP", 0 );
                    l_U120 = 2;
                }
                else
                {
                    sub_168( "CCB", "eSpawnStandoffVCPF - STATE_SPAWN_IDLE", 0 );
                    l_U120 = 1;
                }
            }
        }
        break;
        case 1:
        if (sub_14355( g_U2106, ref g_U910 ))
        {
            sub_14443();
            sub_168( "CCB", "eSpawnStandoffVCPF - STATE_SPAWN_SETUP", 0 );
            l_U120 = 2;
        }
        break;
        case 2:
        if (l_U114 >= 10)
        {
            sub_168( "CCB", "eSpawnStandoffVCPF - STATE_SPAWN_COMPLETE", 0 );
            l_U120 = 3;
        }
        break;
        case 3: break;
    }
    return;
}

int sub_14355(int iParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I]._fU4 == 3)
        {
            if ((uParam1^)[I]._fU0 == iParam0)
            {
                return 1;
            }
        }
    }
    return 0;
}

void sub_14443()
{
    int I;

    sub_168( "CCB", "P_SPAWN_STANDOFF_VCPF", 0 );
    for ( I = 0; I <= (l_U141 - 1); I++ )
    {
        if (NOT (DOES_PED_EXIST( l_U141[I] )))
        {
            sub_168( "CCB", "Spawning piStandoffVCPF_:", 0 );
            if (I == 0)
            {
                if (NOT (IS_VEHICLE_DEAD( l_U452[5] )))
                {
                    l_U141[I] = sub_14680( ref l_U164[I], l_U452[5], -1, 0, "/Global/VehicleCar/Driver/JEEP_JASRE_BUS/DRIVER_ANIMS/DRIVER" );
                }
                else
                {
                    sub_168( "CCB", "The viStandoffVehicles_5 vehicle is NOT valid!!!", 0 );
                }
            }
            else if (I == 1)
            {
                if (NOT (IS_VEHICLE_DEAD( l_U452[5] )))
                {
                    l_U141[I] = sub_14680( ref l_U164[I], l_U452[5], 2, 0, "/Global/VehicleCar/Passenger_BackRight/JEEP_JASRE_BUS/PASSENGER_ANIMS/PASSENGER" );
                }
                else
                {
                    sub_168( "CCB", "The viStandoffVehicles_5 vehicle is NOT valid!!!", 0 );
                }
            }
            else if (I == 2)
            {
                if (NOT (IS_VEHICLE_DEAD( l_U452[5] )))
                {
                    l_U141[I] = sub_14680( ref l_U164[I], l_U452[5], 0, 0, "/Global/VehicleCar/Passenger_FrontRight/JEEP_JASRE_BUS/PASSENGER_ANIMS/PASSENGER" );
                }
                else
                {
                    sub_168( "CCB", "The viStandoffVehicles_5 vehicle is NOT valid!!!", 0 );
                }
            }
            else if (I == 3)
            {
                if (NOT (IS_VEHICLE_DEAD( l_U452[5] )))
                {
                    l_U141[I] = sub_14680( ref l_U164[I], l_U452[5], 1, 0, "/Global/VehicleCar/Passenger_BackLeft/JEEP_JASRE_BUS/PASSENGER_ANIMS/PASSENGER" );
                }
                else
                {
                    sub_168( "CCB", "The viStandoffVehicles_5 vehicle is NOT valid!!!", 0 );
                }
            }
            else if (I == 14)
            {
                if (NOT (IS_VEHICLE_DEAD( l_U452[6] )))
                {
                    l_U141[I] = sub_14680( ref l_U164[I], l_U452[6], -1, 0, "/Global/VehicleCar/Driver/CAR_GENSEDAN/DRIVER_ANIMS/DRIVER" );
                }
                else
                {
                    sub_168( "CCB", "The viStandoffVehicles_6 vehicle is NOT valid!!!", 0 );
                }
            }
            else if (I == 15)
            {
                if (NOT (IS_VEHICLE_DEAD( l_U452[6] )))
                {
                    l_U141[I] = sub_14680( ref l_U164[I], l_U452[6], 0, 0, "/Global/VehicleCar/Passenger_FrontRight/CAR_GENSEDAN/PASSENGER_ANIMS/PASSENGER" );
                }
                else
                {
                    sub_168( "CCB", "The viStandoffVehicles_6 vehicle is NOT valid!!!", 0 );
                }
            }
            else if (I == 16)
            {
                if (NOT (IS_VEHICLE_DEAD( l_U452[7] )))
                {
                    l_U141[I] = sub_14680( ref l_U164[I], l_U452[7], -1, 0, "/Global/VehicleCar/Driver/CAR_GENSEDAN/DRIVER_ANIMS/DRIVER" );
                }
                else
                {
                    sub_168( "CCB", "The viStandoffVehicles_7 vehicle is NOT valid!!!", 0 );
                }
            }
            else if (I == 17)
            {
                if (NOT (IS_VEHICLE_DEAD( l_U452[7] )))
                {
                    l_U141[I] = sub_14680( ref l_U164[I], l_U452[7], 0, 0, "/Global/VehicleCar/Passenger_FrontRight/CAR_GENSEDAN/PASSENGER_ANIMS/PASSENGER" );
                }
                else
                {
                    sub_168( "CCB", "The viStandoffVehicles_7 vehicle is NOT valid!!!", 0 );
                }
            }
            else
            {
                l_U141[I] = sub_16855( ref l_U164[I] );
            };;;;;;;;
            sub_17381( ref l_U141, I );
        }
        else
        {
            sub_168( "CCB", "The piStandoffVCPF ped was already created.", 0 );
        }
    }
    sub_21076( ref l_U141, "piStandoffVCPF" );
    SET_PED_MODEL_LOD_DISTANCES( g_U2106, 10.00000000, 80.00000000 );
    return;
}

void sub_14680(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4)
{
    if ((HAS_MODEL_LOADED( iParam0->_fU16 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
        sub_11643( iParam0->_fU16, 1 );
    }
    if (((IS_VEHICLE_DEAD( uParam1 )) == 0) AND ((DOES_VEHICLE_EXIST( uParam1 )) == 1))
    {
        iParam0->_fU40 = CREATE_PED_INSIDE_VEHICLE( uParam1, iParam0->_fU24, iParam0->_fU16, uParam2, uParam4, iParam0->_fU48 );
    }
    else
    {
        SCRIPT_ASSERT( "The vehicle your trying to create a ped inside of is not valid!!!", 0 );
    }
    if (iParam3 == 1)
    {
        while ((DOES_PED_EXIST( iParam0->_fU40 )) == 0)
        {
            WAIT( 0 );
        }
    }
    sub_14994( iParam0->_fU40 );
    sub_15074( iParam0->_fU40 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        iParam0->_fU44 = 1;
    }
    return iParam0->_fU40;
}

void sub_14994(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

void sub_15074(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

void sub_16855(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
        sub_11643( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
    sub_14994( iParam0->_fU40 );
    sub_15074( iParam0->_fU40 );
    return iParam0->_fU40;
}

void sub_17381(unknown uParam0, int iParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^)[iParam1] )))
    {
        if (iParam1 == 0)
        {
            sub_168( "CCB", "Setting up aigStandoffVCPF AI group.", 0 );
            sub_17481( ref l_U425, 1056964608, 0 );
            SET_GROUP_GRENADE_PARAMS( l_U425._fU0, 8000 );
            SET_GROUP_RATIO_FIRING_AT_VISIBLE( l_U425._fU0, 0.80000000 );
            SET_GROUP_RATIO_FIRING_AT_INVISIBLE( l_U425._fU0, 0.70000000 );
            SET_GROUP_FORMATION_SPACING( l_U425._fU0, 3.00000000 );
        }
        sub_17738( (uParam0^)[iParam1], ref l_U425 );
        sub_18019( ref (uParam0^)[iParam1], ref g_U2088, 3.00000000, 40.00000000 );
        if (iParam1 == 0)
        {
            sub_168( "CCB", "Giving wtLevelRifle weapon to ped.", 0 );
            sub_18184( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
        }
        else if (iParam1 == 1)
        {
            sub_168( "CCB", "Giving wtLevelRifle weapon to ped.", 0 );
            sub_18586( (uParam0^)[iParam1], g_U2857, 2, 25000, 0 );
            sub_168( "CCB", "Giving wtTermGrenade weapon to ped.", 0 );
            l_U465 = sub_18184( (uParam0^)[iParam1], g_U2863, 25000, 0, 0 );
            if (GET_DOES_WEAPON_EXIST( l_U465 ))
            {
                sub_168( "CCB", "The wiGrenade weapon was given to the ped.", 0 );
            }
            else
            {
                sub_168( "CCB", "The wiGrenade weapon is NOT valid!!!", 0 );
            }
            sub_168( "CCB", "Setting the piStandoffVCPF_1 ped to NOT lockonable...", 0 );
            SET_PED_AIM_LOCKONABLE( (uParam0^)[iParam1], 0 );
        }
        else if (iParam1 == 2)
        {
            sub_168( "CCB", "Giving wtLevelRifle weapon to ped.", 0 );
            sub_18184( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
        }
        else if (iParam1 == 3)
        {
            sub_168( "CCB", "Giving wtLevelRifle weapon to ped.", 0 );
            sub_18184( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
        }
        else if ((iParam1 == 17) || ((iParam1 == 14) || ((iParam1 == 13) || ((iParam1 == 10) || ((iParam1 == 7) || (iParam1 == 4))))))
        {
            sub_168( "CCB", "Giving wtLevelPistol weapon to ped.", 0 );
            sub_18184( (uParam0^)[iParam1], g_U2854, 25000, 0, 0 );
        }
        else if ((iParam1 == 11) || ((iParam1 == 8) || (iParam1 == 5)))
        {
            sub_168( "CCB", "Giving wtLevelRifle weapon to ped.", 0 );
            sub_18184( (uParam0^)[iParam1], g_U2857, 25000, 0, 0 );
        }
        else if ((iParam1 == 15) || ((iParam1 == 16) || ((iParam1 == 12) || ((iParam1 == 9) || (iParam1 == 6)))))
        {
            sub_168( "CCB", "Giving wtLevelSMG weapon to ped.", 0 );
            sub_18184( (uParam0^)[iParam1], g_U2855, 25000, 0, 0 );
        };;;;;;;
        if (iParam1 == 0)
        {
            sub_168( "CCB", "Assigning ped to tebParkingRight tetherbox.", 0 );
            sub_19771( ref l_U754, (uParam0^)[iParam1], 3 );
        }
        else if (iParam1 == 2)
        {
            sub_168( "CCB", "Assigning ped to tebParkingLeft tetherbox.", 0 );
            sub_19771( ref l_U753, (uParam0^)[iParam1], 3 );
        }
        else if (iParam1 == 3)
        {
            sub_168( "CCB", "Assigning ped to tebParkingLeft tetherbox.", 0 );
            sub_19771( ref l_U753, (uParam0^)[iParam1], 3 );
        }
        else
        {
            sub_168( "CCB", "Assigning ped to tebCombat tetherbox.", 0 );
            sub_19771( ref l_U755, (uParam0^)[iParam1], 3 );
        };;;
        if (iParam1 == 2)
        {
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 2, 0, 0, 255 );
        }
        else if (iParam1 == 4)
        {
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 0, 2, 0, 255 );
        }
        else if (iParam1 == 5)
        {
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 0, 0, 0, 255 );
        }
        else if (iParam1 == 8)
        {
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 0, 0, 1, 255 );
        }
        else if (iParam1 == 10)
        {
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 0, 1, 0, 255 );
        }
        else if (iParam1 == 11)
        {
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 0, 0, 0, 255 );
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 2, 0, 0, 255 );
        }
        else if (iParam1 == 13)
        {
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 0, 0, 0, 255 );
            SET_PED_PROP_INDEX( (uParam0^)[iParam1], 2, 0, 0, 255 );
        }
        else if (iParam1 == 14)
        {
            ;
        }
        else if (iParam1 == 15)
        {
            ;
        }
        else if (iParam1 == 16)
        {
            ;
        }
        else if (iParam1 == 17)
        {
            ;
        };;;;;;;;;;;
        if ((iParam1 == 17) || ((iParam1 == 16) || ((iParam1 == 15) || ((iParam1 == 7) || (iParam1 == 4)))))
        {
            SET_PED_FLAG_COMBAT_LEADER( (uParam0^)[iParam1], 1 );
        }
        SET_PED_COMBAT_MOVEMENT( (uParam0^)[iParam1], 3 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[iParam1], 256, 0 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^)[iParam1], 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^)[iParam1], 0 );
        SET_PED_EMOTION_STATE( (uParam0^)[iParam1], 1 );
        if (NOT (IS_PED_DEAD( sub_1047() )))
        {
            REGISTER_TARGET( (uParam0^)[iParam1], sub_1047() );
        }
        if (iParam1 == 1)
        {
            if (GET_DOES_WEAPON_EXIST( l_U465 ))
            {
                sub_168( "CCB", "The piStandoffVCPF_1 ped has the wiGrenade weapon...", 0 );
            }
            else
            {
                sub_168( "CCB", "The wiGrenade weapon does NOT exist!!!", 0 );
            }
        }
        if ((iParam1 == 17) || ((iParam1 == 16) || ((iParam1 == 15) || (iParam1 == 14))))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^)[iParam1], 1 );
        }
        else
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^)[iParam1], 1 );
            TASK_STAND_STILL( (uParam0^)[iParam1], -1 );
        }
        if ((iParam1 == 17) || ((iParam1 == 16) || ((iParam1 == 15) || ((iParam1 == 14) || ((iParam1 == 3) || ((iParam1 == 2) || ((iParam1 == 1) || (iParam1 == 0))))))))
        {
            SET_PED_VISIBLE( (uParam0^)[iParam1], 0 );
        }
        else
        {
            sub_20876( (uParam0^)[iParam1] );
        }
    }
    return;
}

void sub_17481(int iParam0, unknown uParam1, boolean bParam2)
{
    iParam0->_fU4 = uParam1;
    iParam0->_fU0 = CREATE_GROUP( 3, 1 );
    if (bParam2)
    {
        while (NOT (DOES_GROUP_EXIST( iParam0->_fU0 )))
        {
            WAIT( 0 );
        }
    }
    SET_GROUP_RATIO_FIRING_AT_VISIBLE( iParam0->_fU0, iParam0->_fU4 );
    SET_GROUP_RATIO_FIRING_AT_INVISIBLE( iParam0->_fU0, iParam0->_fU4 );
    if (iParam0->_fU8)
    {
        SET_GROUP_FORMATION( iParam0->_fU0, iParam0->_fU12 );
        SET_GROUP_FORMATION_SPACING( iParam0->_fU0, iParam0->_fU16 );
        SET_GROUP_FORMATION_MAX_MOVE_SPEED( iParam0->_fU0, iParam0->_fU20 );
    }
    return;
}

void sub_17738(unknown uParam0, int iParam1)
{
    int iVar4;
    unknown uVar5;

    if ((DOES_GROUP_EXIST( iParam1->_fU0 )) == 0)
    {
        sub_11748( "[SP]### Warning!!! Group does not exist. Creating new group specified attributes. ###" );
        if (iParam1->_fU4 > 0)
        {
            sub_17481( iParam1, iParam1->_fU4, 0 );
        }
        else
        {
            sub_17481( iParam1, 1056964608, 0 );
        }
    }
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        GET_GROUP_SIZE( iParam1->_fU0, ref iVar4, ref uVar5 );
        if (iVar4 == 0)
        {
            SET_PED_AS_GROUP_LEADER( uParam0, iParam1->_fU0 );
        }
        else
        {
            SET_PED_AS_GROUP_MEMBER( uParam0, iParam1->_fU0 );
        }
        SET_PED_NEVER_LEAVES_GROUP( uParam0, 1 );
    }
    return;
}

void sub_18019(unknown uParam0, unknown uParam1, float fParam2, float fParam3)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        SET_PED_AI_TEMPLATE( (uParam0^), uParam1 );
        if (fParam2 > -1)
        {
            SET_PED_COMBAT_RANGE_MIN( (uParam0^), fParam2 );
        }
        if (fParam3 > -1)
        {
            SET_PED_COMBAT_RANGE_MAX( (uParam0^), fParam3 );
        }
    }
    return;
}

void sub_18184(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                }
            }
        }
    }
    else
    {
        sub_11748( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

void sub_18586(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                }
            }
        }
    }
    else
    {
        sub_11748( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

void sub_19771(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_TETHERING_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_TETHERING_OPTION( uParam1, uParam2 );
    }
    return;
}

void sub_20876(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 1 );
        SET_PED_VISIBLE( uParam0, 0 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 0 );
        FREEZE_PED_POSITION( uParam0, 1 );
        SET_PED_COLLISION( uParam0, 0 );
        SET_PED_PROOFS( uParam0, 1, 1, 1, 1, 1 );
    }
    return;
}

void sub_21076(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

void sub_21356()
{
    switch (l_U777)
    {
        case 0:
        sub_168( "CCB", "ePartII - STATE_CHALLENGE_IDLE", 0 );
        l_U777 = 1;
        break;
        case 1:
        if (l_U114 >= 11)
        {
            if (l_U114 == 12)
            {
                if (SCRIPT_VAR_HASH_EXISTS( 1701971384 ))
                {
                    SCRIPT_VAR_HASH_SET_INT( 1701971384, 1 );
                }
                else
                {
                    sub_168( "CCB", "The OldPainless script variable is NOT valid!!!", 0 );
                }
                if (NOT (HAS_ACHIEVEMENT_BEEN_PASSED( 13 )))
                {
                    sub_168( "CCB", "Giving the player the SP_PART_II_COMPLETE achievement.", 0 );
                    GIVE_ACHIEVEMENT_TO_PLAYER( 13 );
                }
                else
                {
                    sub_168( "CCB", "The player already has the SP_PART_II_COMPLETE achievement.", 0 );
                }
                sub_168( "CCB", "ePartII - STATE_CHALLENGE_COMPLETE", 0 );
                l_U777 = 2;
            }
        }
        break;
        case 2: break;
    }
    return;
}

void sub_21823()
{
    switch (l_U129)
    {
        case 0:
        sub_386( ref l_U557, 0, 1, 0 );
        sub_522( ref l_U557 );
        sub_168( "CCB", "eVCPFVehicle1 - STATE_EVENT_PRELOAD", 0 );
        l_U129 = 1;
        break;
        case 1:
        if (l_U120 >= 2)
        {
            if (sub_21994( 300, ref g_U1474 ))
            {
                sub_168( "CCB", "eVCPFVehicle1 - STATE_EVENT_START", 0 );
                l_U129 = 6;
            }
        }
        break;
        case 6:
        if ((g_U2875[11] > 0) || (g_U763 == 11))
        {
            if (l_U125 >= 4)
            {
                sub_22197( l_U452[6], 300, 1.25000000, 5859.00000000 );
                sub_168( "CCB", "The vehicle1 vehicle recording duration is:", 0 );
                sub_168( "CCB", "eVCPFVehicle1 - STATE_EVENT_IN", 0 );
                l_U129 = 7;
            }
        }
        else if (l_U123 >= 4)
        {
            if ((HAS_CUTSCENE_FINISHED()) || (GET_CUTSCENE_TIME_MS() >= 59634))
            {
                sub_22197( l_U452[6], 300, 1.25000000, 5859.00000000 );
                sub_168( "CCB", "eVCPFVehicle1 - STATE_EVENT_IN", 0 );
                l_U129 = 7;
            }
        }
        break;
        case 7:
        if (NOT (IS_VEHICLE_DEAD( l_U452[6] )))
        {
            SET_VEHICLE_VISIBLE( l_U452[6], 1 );
        }
        sub_386( ref l_U557, 6000, 1, 0 );
        sub_522( ref l_U557 );
        sub_168( "CCB", "eVCPFVehicle1 - STATE_EVENT_01", 0 );
        l_U129 = 10;
        break;
        case 10:
        if (sub_4082( ref l_U557 ))
        {
            sub_22810();
            sub_168( "CCB", "eVCPFVehicle1 - STATE_EVENT_COMPLETE", 0 );
            l_U129 = 44;
        }
        break;
        case 44: break;
    }
    return;
}

int sub_21994(int iParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I]._fU4 == 3)
        {
            if ((uParam1^)[I]._fU0 == iParam0)
            {
                return 1;
            }
        }
    }
    return 0;
}

void sub_22197(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    if (NOT (IS_VEHICLE_DEAD( uParam0 )))
    {
        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( uParam0 ))
        {
            sub_168( "CCB", "Stopping the vehicle recording.", 0 );
            STOP_PLAYBACK_RECORDED_VEHICLE( uParam0 );
        }
        if (HAS_VEHICLE_RECORDING_BEEN_LOADED( uParam1 ))
        {
            sub_168( "CCB", "Starting the vehicle recording.", 0 );
            START_PLAYBACK_RECORDED_VEHICLE( uParam0, uParam1 );
            SET_PLAYBACK_SPEED( uParam0, uParam2 );
            SKIP_TIME_IN_PLAYBACK_RECORDED_VEHICLE( uParam0, uParam3 );
        }
        else
        {
            SCRIPT_ASSERT( "The vehicle recording is NOT loaded!!!", 0 );
        }
    }
    return;
}

void sub_22810()
{
    if (NOT (IS_PED_DEAD( sub_1047() )))
    {
        sub_168( "CCB", "P_START_VCPF_VEHICLE1", 0 );
        if (NOT (IS_PED_DEAD( l_U141[14] )))
        {
            OPEN_SEQUENCE_TASK( ref l_U466 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            if (NOT (IS_VEHICLE_DEAD( l_U452[6] )))
            {
                TASK_LEAVE_VEHICLE_IMMEDIATELY( 0, l_U452[6] );
            }
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 208.22000000, -48.47000000, 0.88000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_1047() );
            CLOSE_SEQUENCE_TASK( l_U466 );
            TASK_PERFORM_SEQUENCE( l_U141[14], l_U466 );
            CLEAR_SEQUENCE_TASK( l_U466 );
        }
        if (NOT (IS_PED_DEAD( l_U141[15] )))
        {
            OPEN_SEQUENCE_TASK( ref l_U466 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            if (NOT (IS_VEHICLE_DEAD( l_U452[6] )))
            {
                TASK_LEAVE_VEHICLE_IMMEDIATELY( 0, l_U452[6] );
            }
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 184.60000000, -44.85000000, 0.02000000, sub_1047(), 3, 0, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_1047() );
            CLOSE_SEQUENCE_TASK( l_U466 );
            TASK_PERFORM_SEQUENCE( l_U141[15], l_U466 );
            CLEAR_SEQUENCE_TASK( l_U466 );
        }
    }
    return;
}

void sub_23325()
{
    switch (l_U130)
    {
        case 0:
        sub_386( ref l_U566, 0, 1, 0 );
        sub_522( ref l_U566 );
        sub_168( "CCB", "eVCPFVehicle2 - STATE_EVENT_PRELOAD", 0 );
        l_U130 = 1;
        break;
        case 1:
        if (l_U120 >= 2)
        {
            if (sub_21994( 301, ref g_U1474 ))
            {
                sub_168( "CCB", "eVCPFVehicle2 - STATE_EVENT_START", 0 );
                l_U130 = 6;
            }
        }
        break;
        case 6:
        if ((g_U2875[11] > 0) || (g_U763 == 11))
        {
            if (l_U125 >= 4)
            {
                sub_22197( l_U452[7], 301, 1.25000000, 5859.00000000 );
                sub_168( "CCB", "The vehicle2 vehicle recording duration is:", 0 );
                sub_168( "CCB", "eVCPFVehicle2 - STATE_EVENT_IN", 0 );
                l_U130 = 7;
            }
        }
        else if (l_U123 >= 4)
        {
            if ((HAS_CUTSCENE_FINISHED()) || (GET_CUTSCENE_TIME_MS() >= 59634))
            {
                sub_22197( l_U452[7], 301, 1.25000000, 5859.00000000 );
                sub_168( "CCB", "eVCPFVehicle2 - STATE_EVENT_IN", 0 );
                l_U130 = 7;
            }
        }
        break;
        case 7:
        if (NOT (IS_VEHICLE_DEAD( l_U452[7] )))
        {
            SET_VEHICLE_VISIBLE( l_U452[7], 1 );
        }
        sub_386( ref l_U566, 7000, 1, 0 );
        sub_522( ref l_U566 );
        sub_168( "CCB", "eVCPFVehicle2 - STATE_EVENT_01", 0 );
        l_U130 = 10;
        break;
        case 10:
        if (sub_4082( ref l_U566 ))
        {
            sub_23990();
            sub_168( "CCB", "eVCPFVehicle2 - STATE_EVENT_COMPLETE", 0 );
            l_U130 = 44;
        }
        break;
        case 44: break;
    }
    return;
}

void sub_23990()
{
    if (NOT (IS_PED_DEAD( sub_1047() )))
    {
        sub_168( "CCB", "P_START_VCPF_VEHICLE2", 0 );
        if (NOT (IS_PED_DEAD( l_U141[16] )))
        {
            OPEN_SEQUENCE_TASK( ref l_U466 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            if (NOT (IS_VEHICLE_DEAD( l_U452[7] )))
            {
                TASK_LEAVE_VEHICLE_IMMEDIATELY( 0, l_U452[7] );
            }
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 188.79000000, -45.86000000, 0.02000000, sub_1047(), 3, 0, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_1047() );
            CLOSE_SEQUENCE_TASK( l_U466 );
            TASK_PERFORM_SEQUENCE( l_U141[16], l_U466 );
            CLEAR_SEQUENCE_TASK( l_U466 );
        }
        if (NOT (IS_PED_DEAD( l_U141[17] )))
        {
            OPEN_SEQUENCE_TASK( ref l_U466 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            if (NOT (IS_VEHICLE_DEAD( l_U452[7] )))
            {
                TASK_LEAVE_VEHICLE_IMMEDIATELY( 0, l_U452[7] );
            }
            TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 201.66000000, -41.70000000, 0.02000000, sub_1047(), 3, 0, 1056964608, 0, 1, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            TASK_COMBAT_PED( 0, sub_1047() );
            CLOSE_SEQUENCE_TASK( l_U466 );
            TASK_PERFORM_SEQUENCE( l_U141[17], l_U466 );
            CLEAR_SEQUENCE_TASK( l_U466 );
        }
    }
    return;
}

void sub_24525()
{
    if ((l_U124 < 7) AND (l_U124 > 3))
    {
        ;
    }
    switch (l_U124)
    {
        case 0:
        if (NOT (CUTSCENE_IS_LOADED( "10_05_BUS_concat" )))
        {
            sub_168( "CCB", "The 10_05_BUS_concat cutscene is NOT loaded!!!", 0 );
            PRE_STREAM_SEAMLESS_CUTSCENE( "10_05_BUS_concat" );
        }
        else
        {
            sub_168( "CCB", "The 10_05_BUS_concat cutscene is already loaded.", 0 );
        }
        sub_24811( 1979959192, ref g_U910 );
        sub_24811( 1686109657, ref g_U910 );
        sub_24811( 1049690760, ref g_U910 );
        sub_24811( 967235939, ref g_U910 );
        sub_24811( -866409927, ref g_U910 );
        sub_24811( -560118084, ref g_U910 );
        sub_24811( 819522354, ref g_U910 );
        sub_168( "CCB", "eOutroCutscene - STATE_CUTSCENE_PRELOAD", 0 );
        l_U124 = 1;
        break;
        case 1:
        if (CUTSCENE_IS_LOADED( "10_05_BUS_concat" ))
        {
            if (sub_14355( 1686109657, ref g_U910 ))
            {
                if (sub_14355( 1049690760, ref g_U910 ))
                {
                    if (sub_14355( 967235939, ref g_U910 ))
                    {
                        if (sub_14355( -866409927, ref g_U910 ))
                        {
                            if (sub_14355( -560118084, ref g_U910 ))
                            {
                                if (sub_14355( 819522354, ref g_U910 ))
                                {
                                    if (NOT (DOES_VEHICLE_EXIST( l_U462 )))
                                    {
                                        l_U462 = sub_12669( 1979959192, 157.07400000, -36.80900000, 1.00000000, 275.01960000, 0, 0, 0 );
                                        if (NOT (IS_VEHICLE_DEAD( l_U462 )))
                                        {
                                            SET_VEHICLE_ON_GROUND_PROPERLY( l_U462 );
                                            SET_VEHICLE_PROOFS( l_U462, 1, 1, 1, 1, 1 );
                                            SET_VEHICLE_CAN_BE_DAMAGED( l_U462, 0 );
                                            SET_VEHICLE_LIGHTS( l_U462, 1 );
                                            SET_VEHICLE_DIRT_LEVEL( l_U462, 4.00000000 );
                                            SET_VEHICLE_COLOUR_COMBINATION( l_U462, 0 );
                                            SET_VEHICLE_EXTRA( l_U462, 1, 0 );
                                        }
                                    }
                                    else
                                    {
                                        sub_168( "CCB", "The viCutsceneVehicle vehicle was already created.", 0 );
                                    }
                                    if (NOT (DOES_VEHICLE_EXIST( l_U461 )))
                                    {
                                        l_U461 = sub_12669( 1049690760, 177.02100000, -103.03200000, 21.42510000, 2.81000000, 0, 0, 0 );
                                    }
                                    else
                                    {
                                        sub_168( "CCB", "The viCutsceneHeli vehicle was already created.", 0 );
                                    }
                                    if (NOT (IS_VEHICLE_DEAD( l_U461 )))
                                    {
                                        FREEZE_VEHICLE_POSITION( l_U461, 1 );
                                        SET_VEHICLE_ENGINE_ON( l_U461, 1, 1 );
                                        SET_HELI_BLADES_FULL_SPEED( l_U461 );
                                        SET_VEHICLE_DOOR_OPEN( l_U461, 3 );
                                        SET_VEHICLE_DOOR_OPEN( l_U461, 2 );
                                        if (NOT (DOES_PED_EXIST( l_U163 )))
                                        {
                                            l_U163 = sub_14680( ref l_U412, l_U461, -1, 0, 0 );
                                        }
                                        else
                                        {
                                            sub_168( "CCB", "The piCutsceneHeliPilot ped was already created.", 0 );
                                        }
                                        if (NOT (IS_PED_DEAD( l_U163 )))
                                        {
                                            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U163, 1 );
                                        }
                                    }
                                    sub_168( "CCB", "eOutroCutscene - STATE_CUTSCENE_IN", 0 );
                                    l_U124 = 2;
                                }
                            }
                        }
                    }
                }
            }
        }
        else
        {
            sub_168( "CCB", "Waiting for the 10_05_BUS_concat cutscene to load...", 0 );
        }
        break;
        case 2:
        if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
        {
            sub_168( "CCB", "Unlocking bus depot for arcade mode...", 0 );
            SET_HIGHEST_ARCADE_LEVEL_UNLOCKED( 13 );
            if (IS_ARCADE_MODE_ACTIVE())
            {
                sub_168( "CCB", "Arcade mode is active...", 0 );
                DISPLAY_ARCADE_MODE_LEVEL_END( "s_pana" );
                sub_168( "CCB", "eCheckpoint - STATE_CHECKPOINT_OUT", 0 );
                l_U114 = 14;
            }
            else
            {
                sub_27380( 1, 0, 0, 1 );
                if (NOT (IS_PED_DEAD( sub_1047() )))
                {
                    sub_168( "CCB", "Registering the Player ped to the cutscene...", 0 );
                    REGISTER_PED_PRE_SEAMLESS_CUTSCENE( sub_1047(), "player", 0 );
                    if (GET_DOES_WEAPON_EXIST( l_U464 ))
                    {
                        sub_168( "CCB", "Registering the Player ped's weapon...", 0 );
                        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( l_U464, "W_AR_97LC_Aa_H", 1 );
                    }
                    else
                    {
                        sub_168( "CCB", "The wiPlayerRight weapon is NOT valid!!!", 0 );
                    }
                }
                if (NOT (IS_VEHICLE_DEAD( l_U461 )))
                {
                    sub_168( "CCB", "Registering the viCutsceneHeli vehicle to the cutscene...", 0 );
                    REGISTER_VEHICLE_PRE_SEAMLESS_CUTSCENE( l_U461, "heli_Luxury", 1 );
                }
                if (NOT (IS_VEHICLE_DEAD( l_U462 )))
                {
                    sub_168( "CCB", "Registering the viCutsceneVehicle vehicle to the cutscene...", 0 );
                    CUTSCENE_REGISTER_VEHICLE_COPY( l_U462, "CAR_DETECTIVE" );
                }
                else
                {
                    sub_168( "CCB", "The viCutsceneVehicle vehicle is NOT valid!!!", 0 );
                }
                CUTSCENE_DISABLE_FADE_IN_GAME_AT_END( 1 );
                CUTSCENE_ENABLE_SKIP( 0 );
                CUTSCENE_REGISTER_SWITCH_TO_LEVEL_NAME( "s_pana" );
                AUD_ENABLE_PRE_BINK_SHUTDOWN( 1 );
                DISABLE_FADE_BETWEEN_SP_LEVELS();
                START_SEAMLESS_CUTSCENE();
                if (IS_SCREEN_FADED_OUT())
                {
                    sub_168( "CCB", "FADING IN!!!", 0 );
                    DO_SCREEN_FADE_IN( 500 );
                }
                sub_168( "CCB", "eOutroCutscene - STATE_CUTSCENE_FADEIN", 0 );
                l_U124 = 3;
            }
        }
        break;
        case 3:
        if (IS_SCREEN_FADED_IN())
        {
            sub_168( "CCB", "Enabling ALLOW_BULLET_CAMERA_TO_GAMEPLAY...", 0 );
            ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
            sub_28353( g_U2595 );
            sub_28436( -1204387800, ref g_U910 );
            sub_28806( g_U2863, ref g_U1211 );
            sub_28968( ref g_U1968, ref g_U1369 );
            sub_28968( ref g_U1944, ref g_U1369 );
            sub_29158( ref g_U2040, ref g_U1535 );
            sub_29158( "Vehicle/Vehicle_Car.act", ref g_U1535 );
            sub_29371( -1501041926, ref g_U1272 );
            if (NOT (IS_PLAYER_DEAD( sub_1069() )))
            {
                SET_PLAYER_LOCKED_IN_COVER( sub_1069(), 0 );
            }
            if (DOES_OBJECT_EXIST( l_U431 ))
            {
                sub_168( "CCB", "Hiding the objStandoffBus object.", 0 );
                SET_OBJECT_VISIBLE( l_U431, 0 );
            }
            if (DOES_OBJECT_EXIST( l_U432[1] ))
            {
                sub_168( "CCB", "Hiding the oiStandoffProps_1 object.", 0 );
                SET_OBJECT_VISIBLE( l_U432[1], 0 );
            }
            sub_29790();
            sub_168( "CCB", "eOutroCutscene - STATE_CUTSCENE_IDLE", 0 );
            l_U124 = 4;
        }
        break;
        case 4:
        if (NOT l_U113)
        {
            if (GET_CUTSCENE_TIME_MS() >= 41218)
            {
                sub_168( "CCB", "Cleaning up assets during cutscene...", 0 );
                l_U113 = 1;
                sub_30359( ref l_U141 );
                sub_28436( g_U2106, ref g_U910 );
                sub_28353( l_U163 );
                sub_28436( 1686109657, ref g_U910 );
                sub_30459( ref l_U452 );
                sub_30493( l_U461 );
                sub_30581( l_U431 );
                sub_28436( 89470519, ref g_U910 );
                sub_28436( 1049690760, ref g_U910 );
                sub_28436( 1572429640, ref g_U910 );
                sub_28436( -1522400210, ref g_U910 );
                sub_28436( -764000169, ref g_U910 );
                sub_28436( -1221193536, ref g_U910 );
                sub_28436( -1425703854, ref g_U910 );
                sub_28436( -1053689591, ref g_U910 );
                sub_28806( g_U2862, ref g_U1211 );
                sub_28806( g_U2863, ref g_U1211 );
                sub_28806( g_U2854, ref g_U1211 );
                sub_28806( g_U2856, ref g_U1211 );
                sub_28806( g_U2855, ref g_U1211 );
                sub_28806( g_U2857, ref g_U1211 );
                sub_28968( ref g_U1968, ref g_U1369 );
                sub_28968( ref g_U1944, ref g_U1369 );
                sub_28968( "veh@car_gensedan", ref g_U1369 );
                sub_29158( ref g_U2040, ref g_U1535 );
                sub_29158( "Vehicle/Vehicle_Car.act", ref g_U1535 );
                sub_29371( -1501041926, ref g_U1272 );
                sub_30940( 300, ref g_U1474 );
                sub_30940( 301, ref g_U1474 );
            }
        }
        if (HAS_CUTSCENE_FINISHED())
        {
            sub_168( "CCB", "eCheckpoint - STATE_CHECKPOINT_OUT", 0 );
            l_U114 = 14;
            sub_168( "CCB", "eOutroCutscene - STATE_CUTSCENE_COMPLETE", 0 );
            l_U124 = 7;
        }
        else
        {
            sub_168( "CCB", "Waiting for cutscene:", 0 );
        }
        break;
        case 7: break;
    }
    return;
}

void sub_24811(unknown uParam0, unknown uParam1)
{
    int iVar4;

    if (IS_MODEL_IN_CDIMAGE( uParam0 ))
    {
        iVar4 = sub_24846( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
        if (iVar4 >= 0)
        {
            (uParam1^)[iVar4]._fU0 = uParam0;
            (uParam1^)[iVar4]._fU4 = 1;
            sub_24977( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
        }
    }
    else
    {
        SCRIPT_ASSERT( "The asset is NOT in the image!!!", 0 );
    }
    return;
}

int sub_24846(int iParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU4 == 1)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The MODEL_NAME asset is currently being requested!!!", 0 );
                sub_24977( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 2)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The MODEL_NAME asset is already loading!!!", 0 );
                sub_24977( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 3)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                if (HAS_MODEL_LOADED( iParam0 ))
                {
                    sub_24977( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    SCRIPT_ASSERT( "The MODEL_NAME asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    (uParam1^)[Result]._fU0 = 0;
                    (uParam1^)[Result]._fU4 = 0;
                    sub_25625( ref (uParam1^)[Result]._fU8 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU4 == 4)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The MODEL_NAME asset is currently being removed!!!", 0 );
                sub_24977( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (HAS_MODEL_LOADED( iParam0 ))
        {
            SCRIPT_ASSERT( "The MODEL_NAME is already loaded, but the asset status flag was not set!!!", 0 );
            (uParam1^)[iVar6]._fU0 = iParam0;
            (uParam1^)[iVar6]._fU4 = 3;
            sub_24977( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The MODEL_NAMES - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_24977(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_24997( uParam2, ref (uParam1^)[uParam0]._fU8 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU8[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The MODEL_NAME asset thread indices are NOT available!!!", 0 );
    }
    return;
}

int sub_24997(int iParam0, unknown uParam1)
{
    int I;
    int Result;

    Result = -1;
    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I] == nil)
        {
            Result = I;
        }
        else if (IS_THREAD_ACTIVE( (uParam1^)[I] ))
        {
            if ((uParam1^)[I] == iParam0)
            {
                (uParam1^)[I] = nil;
                Result = I;
            }
        }
        else
        {
            (uParam1^)[I] = nil;
            Result = I;
        }
    }
    if (NOT (Result == -1))
    {
        return Result;
    }
    SCRIPT_ASSERT( "There are no THREADID indices available for insert!!!", 0 );
    return -1;
}

void sub_25625(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        (uParam0^)[I] = nil;
    }
    return;
}

void sub_27380(int iParam0, int iParam1, unknown uParam2, boolean bParam3)
{
    END_POSTFX_BLENDER( 12, 0 );
    if (bParam3)
    {
        STOP_ALL_IMAGEFX( 0 );
    }
    SET_WIDESCREEN_BORDERS( 1, 500 );
    DISPLAY_HUD( 0 );
    if (iParam0 == 1)
    {
        if (NOT (IS_PED_DEAD( sub_1047() )))
        {
            SET_PLAYER_CONTROL( sub_1069(), 0, uParam2 );
            SET_PED_DUCKING( sub_1047(), 0 );
            if (iParam1 == 1)
            {
                CLEAR_PED_TASKS_IMMEDIATELY( sub_1047() );
            }
            SET_PED_INVINCIBLE( sub_1047(), 1 );
        }
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    return;
}

void sub_28353(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

void sub_28436(int iParam0, unknown uParam1)
{
    int I;
    int iVar5;

    if (IS_MODEL_IN_CDIMAGE( iParam0 ))
    {
        for ( I = 0; I <= ((uParam1^) - 1); I++ )
        {
            if (((uParam1^)[I]._fU4 == 1) || (((uParam1^)[I]._fU4 == 2) || ((uParam1^)[I]._fU4 == 3)))
            {
                if ((uParam1^)[I]._fU0 == iParam0)
                {
                    iVar5 = sub_28548( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU8 );
                    if (iVar5 == -1)
                    {
                        (uParam1^)[I]._fU4 = 4;
                        return;
                    }
                    else
                    {
                        return;
                    }
                }
            }
        }
    }
    else
    {
        SCRIPT_ASSERT( "The asset is NOT in the image!!!", 0 );
    }
    return;
}

int sub_28548(int iParam0, unknown uParam1)
{
    int I;
    int Result;

    Result = -1;
    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if ((uParam1^)[I] == nil)
        {
            ;
        }
        else if ((uParam1^)[I] == iParam0)
        {
            (uParam1^)[I] = nil;
        }
        else if (IS_THREAD_ACTIVE( (uParam1^)[I] ))
        {
            Result = I;
        }
        else
        {
            (uParam1^)[I] = nil;
        };;;
    }
    if (NOT (Result == -1))
    {
        return Result;
    }
    return -1;
}

void sub_28806(int iParam0, unknown uParam1)
{
    int I;
    int iVar5;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if (((uParam1^)[I]._fU4 == 1) || (((uParam1^)[I]._fU4 == 2) || ((uParam1^)[I]._fU4 == 3)))
        {
            if ((uParam1^)[I]._fU0 == iParam0)
            {
                iVar5 = sub_28548( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU8 );
                if (iVar5 == -1)
                {
                    (uParam1^)[I]._fU4 = 4;
                    return;
                }
                else
                {
                    return;
                }
            }
        }
    }
    return;
}

void sub_28968(unknown uParam0, unknown uParam1)
{
    int I;
    int iVar5;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if (((uParam1^)[I]._fU32 == 1) || (((uParam1^)[I]._fU32 == 2) || ((uParam1^)[I]._fU32 == 3)))
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[I]._fU0, uParam0 ))
            {
                iVar5 = sub_28548( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU36 );
                if (iVar5 == -1)
                {
                    (uParam1^)[I]._fU32 = 4;
                    return;
                }
                else
                {
                    return;
                }
            }
        }
    }
    return;
}

void sub_29158(unknown uParam0, unknown uParam1)
{
    int I;
    int iVar5;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if (((uParam1^)[I]._fU64 == 1) || (((uParam1^)[I]._fU64 == 2) || ((uParam1^)[I]._fU64 == 3)))
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[I]._fU0, uParam0 ))
            {
                iVar5 = sub_28548( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU68 );
                if (iVar5 == -1)
                {
                    (uParam1^)[I]._fU64 = 4;
                    return;
                }
                else
                {
                    return;
                }
            }
        }
    }
    return;
}

void sub_29371(int iParam0, unknown uParam1)
{
    int I;
    int iVar5;

    if (ISEQ_DOES_EXIST( iParam0 ))
    {
        for ( I = 0; I <= ((uParam1^) - 1); I++ )
        {
            if (((uParam1^)[I]._fU4 == 1) || (((uParam1^)[I]._fU4 == 2) || ((uParam1^)[I]._fU4 == 3)))
            {
                if ((uParam1^)[I]._fU0 == iParam0)
                {
                    iVar5 = sub_28548( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU8 );
                    if (iVar5 == -1)
                    {
                        (uParam1^)[I]._fU4 = 4;
                        return;
                    }
                    else
                    {
                        return;
                    }
                }
            }
        }
    }
    else
    {
        SCRIPT_ASSERT( "The eTempAssetName ISEQ is NOT valid!!!", 0 );
    }
    return;
}

void sub_29790()
{
    int I;

    for ( I = 0; I <= (l_U435 - 1); I++ )
    {
        if (NOT (DOES_OBJECT_EXIST( l_U435[I] )))
        {
            sub_168( "CCB", "Spawning oi10_05Props object...", 0 );
            if (I == 0)
            {
                l_U435[I] = sub_11533( 967235939, 192.00000000, -68.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
            }
            else if (I == 1)
            {
                l_U435[I] = sub_11533( -866409927, 192.00000000, -68.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
            }
            else if (I == 2)
            {
                l_U435[I] = sub_11533( -560118084, 192.00000000, -68.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
            }
            else if (I == 3)
            {
                l_U435[I] = sub_11533( 819522354, 192.00000000, -68.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
            };;;;
        }
        if (DOES_OBJECT_EXIST( l_U435[I] ))
        {
            FREEZE_OBJECT_POSITION( l_U435[I], 1 );
        }
    }
    return;
}

void sub_30359(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_28353( (uParam0^)[I] );
    }
    return;
}

void sub_30459(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_30493( (uParam0^)[I] );
    }
    return;
}

void sub_30493(unknown uParam0)
{
    if (IS_VEHICLE_DEAD( uParam0 ))
    {
        ;
    }
    if (DOES_VEHICLE_EXIST( uParam0 ))
    {
        DELETE_VEHICLE( ref uParam0 );
    }
    return;
}

void sub_30581(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

void sub_30940(int iParam0, unknown uParam1)
{
    int I;
    int iVar5;

    for ( I = 0; I <= ((uParam1^) - 1); I++ )
    {
        if (((uParam1^)[I]._fU4 == 1) || (((uParam1^)[I]._fU4 == 2) || ((uParam1^)[I]._fU4 == 3)))
        {
            if ((uParam1^)[I]._fU0 == iParam0)
            {
                iVar5 = sub_28548( GET_ID_OF_THIS_THREAD(), ref (uParam1^)[I]._fU8 );
                if (iVar5 == -1)
                {
                    (uParam1^)[I]._fU4 = 4;
                    return;
                }
                else
                {
                    return;
                }
            }
        }
    }
    return;
}

int sub_31293()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U0 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD( sub_1047() )))
        {
            SET_PED_FORCED_TO_WALK( sub_1047(), 0 );
            SET_PLAYER_FORCED_AIM( sub_1069(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE( sub_1069(), 1 );
            if ((IS_PED_VISIBLE( sub_1047() )) == 0)
            {
                SET_PED_VISIBLE( sub_1047(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

void sub_31935()
{
    sub_168( "CCB", "P_INITIALIZE_SCRIPT_DATA", 0 );
    sub_31984();
    sub_32448();
    l_U115 = 0;
    l_U116 = 0;
    l_U117 = 0;
    l_U118 = 0;
    l_U119 = 0;
    l_U131 = 0;
    l_U120 = 0;
    l_U132 = 0;
    l_U127 = 0;
    l_U129 = 0;
    l_U130 = 0;
    l_U128 = 0;
    l_U72 = 0;
    l_U138 = 0;
    sub_32614( ref l_U634 );
    sub_32712( ref l_U74 );
    sub_32712( ref l_U93 );
    sub_28353( l_U161 );
    sub_28353( l_U162 );
    l_U575 = 0;
    l_U71 = 0;
    sub_28353( l_U160 );
    l_U137 = 0;
    l_U139 = 0;
    l_U140 = 0;
    sub_386( ref l_U494, 0, 1, 0 );
    sub_522( ref l_U494 );
    sub_386( ref l_U485, 0, 1, 0 );
    sub_522( ref l_U485 );
    sub_386( ref l_U512, 0, 1, 0 );
    sub_522( ref l_U512 );
    l_U123 = 0;
    l_U112 = 0;
    l_U125 = 0;
    sub_386( ref l_U476, 0, 1, 0 );
    sub_522( ref l_U476 );
    l_U124 = 0;
    l_U113 = 0;
    l_U576 = 0;
    l_U126 = 0;
    sub_386( ref l_U521, 0, 1, 0 );
    sub_522( ref l_U521 );
    l_U121 = 0;
    l_U133 = 0;
    l_U122 = 0;
    l_U134 = 0;
    l_U602[0] = {196.89000000, -21.84000000, 0.00000000};
    l_U609[0] = {0.00000000, 0.00000000, 0.00000000};
    l_U602[1] = {191.93600000, -73.20200000, -0.65000000};
    l_U609[1] = {0.00000000, -5.24100000, 79.18300000};
    l_U616 = {194.28000000, -45.09000000, 0.10000000};
    l_U619 = {192.66000000, -75.30000000, 7.27000000};
    l_U622 = {193.12000000, -66.83000000, 3.44000000};
    l_U689[0] = {192.32000000, -72.67000000, 1.56000000};
    l_U696[0] = {193.30000000, -66.38000000, 1.51000000};
    l_U689[1] = {193.70000000, -70.67000000, 2.28000000};
    l_U696[1] = {193.09000000, -66.55000000, 1.99000000};
    return;
}

void sub_31984()
{
    sub_168( "CCB", "P_SETUP_VEHICLES_ARRAY", 0 );
    l_U577[0] = {202.50000000, -27.00000000, 0.10000000};
    l_U625[0] = 59.00000000;
    l_U440[0] = 1572429640;
    l_U577[1] = {186.20000000, -57.39000000, 0.50000000};
    l_U625[1] = 275.00000000;
    l_U440[1] = -1425703854;
    l_U577[2] = {187.00000000, -50.57000000, 0.50000000};
    l_U625[2] = 85.00000000;
    l_U440[2] = -1522400210;
    l_U577[3] = {199.59000000, -57.28000000, 0.50000000};
    l_U625[3] = 70.00000000;
    l_U440[3] = -1221193536;
    l_U577[4] = {199.69000000, -52.18000000, 0.50000000};
    l_U625[4] = 260.00000000;
    l_U440[4] = -764000169;
    l_U577[5] = {198.78600000, -44.85900000, 0.80100000};
    l_U625[5] = -140.21100000;
    l_U440[5] = -1053689591;
    l_U577[6] = {188.53000000, -42.33000000, 0.50000000};
    l_U625[6] = 235.00000000;
    l_U440[6] = -1221193536;
    l_U577[7] = {197.34000000, -37.34000000, 0.50000000};
    l_U625[7] = 130.00000000;
    l_U440[7] = -1221193536;
    return;
}

void sub_32448()
{
    sub_168( "CCB", "P_SETUP_PROPS_ARRAY", 0 );
    l_U449[0] = g_U2135;
    l_U449[1] = -634417735;
    return;
}

void sub_32614(unknown uParam0)
{
    int I;

    sub_168( "CCB", "P_RESET_VECTOR_ARRAY", 0 );
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        (uParam0^)[I] = {0, 0, 0};
    }
    return;
}

void sub_32712(unknown uParam0)
{
    int I;

    sub_168( "CCB", "P_RESET_BOOL_ARRAY", 0 );
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        (uParam0^)[I] = 0;
    }
    return;
}

void sub_33312()
{
    sub_168( "CCB", "P_INITIALIZE_SP_CHALLENGES", 0 );
    l_U777 = 0;
    l_U778 = 0;
    if (NOT (SCRIPT_VAR_HASH_EXISTS( 1701971384 )))
    {
        sub_168( "CCB", "Creating the OldPainless script variable...", 0 );
        SCRIPT_VAR_HASH_ADD_INT( 1701971384 );
        if (SCRIPT_VAR_HASH_EXISTS( 1701971384 ))
        {
            sub_168( "CCB", "The OldPainless script variable was successfully created...", 0 );
        }
        else
        {
            sub_168( "CCB", "The OldPainless script variable is NOT valid!!!", 0 );
        }
    }
    else
    {
        sub_168( "CCB", "The OldPainless script variable was already created...", 0 );
        SCRIPT_VAR_HASH_SET_INT( 1701971384, 0 );
    }
    return;
}

void sub_33716()
{
    sub_168( "CCB", "P_SETUP_STATIC_DATA", 0 );
    sub_33796( ref l_U399, -72.72000000, 105.86000000, 0.00100000, -48.00000000, -430179550, 5, 2, 0, 0, 1 );
    sub_33796( ref l_U164[0], 185.08000000, -54.02000000, 0.10000000, 180.00000000, -1489714533, 7, 3, 2, 0, 0 );
    sub_33796( ref l_U164[1], 194.28000000, -38.00000000, 0.10000000, 180.00000000, -1943434354, 7, 3, 2, 0, 0 );
    sub_33796( ref l_U164[2], 202.00000000, -55.73000000, 0.10000000, 180.00000000, 1758818191, 7, 3, 2, 0, 0 );
    sub_33796( ref l_U164[3], 200.08000000, -54.44000000, 0.10000000, 180.00000000, 1900580661, 7, 3, 2, 0, 0 );
    sub_33796( ref l_U164[4], 177.10000000, -20.27000000, 0.30000000, -178.00000000, -1856339173, 7, 3, 2, 0, 0 );
    sub_33796( ref l_U164[5], 139.61000000, -0.21000000, 0.30000000, 177.00000000, 1177889556, 7, 3, 2, 0, 0 );
    sub_33796( ref l_U164[6], 178.54000000, 23.38000000, 0.30000000, 152.00000000, -1164059530, 7, 3, 2, 0, 0 );
    sub_33796( ref l_U164[7], 204.73000000, 32.52000000, 0.30000000, 175.00000000, -1236728156, 7, 3, 2, 0, 0 );
    sub_33796( ref l_U164[8], 207.06000000, 51.36000000, 0.10000000, 173.00000000, -684971413, 7, 3, 2, 0, 0 );
    sub_33796( ref l_U164[9], 209.88000000, 59.77000000, 0.10000000, 167.00000000, 1900580661, 7, 3, 2, 0, 0 );
    sub_33796( ref l_U164[10], 209.36000000, 81.26000000, 0.10000000, 178.00000000, 187757786, 7, 3, 2, 0, 0 );
    sub_33796( ref l_U164[11], 171.65000000, 83.28000000, 0.30000000, -127.00000000, 130503050, 7, 3, 2, 0, 0 );
    sub_33796( ref l_U164[12], 157.12000000, 71.43000000, 0.30000000, 175.00000000, -1489714533, 7, 3, 2, 0, 0 );
    sub_33796( ref l_U164[13], 141.34000000, 57.12000000, 0.30000000, 175.00000000, 1758818191, 7, 3, 2, 0, 0 );
    sub_33796( ref l_U164[14], 223.55000000, -41.71000000, 0.30000000, 125.00000000, 1429109657, 7, 3, 2, 0, 0 );
    sub_33796( ref l_U164[15], 184.41000000, -28.60000000, 0.10000000, -180.00000000, -366823623, 7, 3, 2, 0, 0 );
    sub_33796( ref l_U164[16], 187.67000000, -30.94000000, 0.10000000, -180.00000000, 1901166384, 7, 3, 2, 0, 0 );
    sub_33796( ref l_U164[17], 200.40000000, -32.25000000, 0.10000000, 180.00000000, -1946189981, 7, 3, 2, 0, 0 );
    sub_34708( ref l_U412, 209.57000000, -26.09000000, 1.01000000, 0.00000000, 1686109657, 7, 3, 2, 0, 0 );
    sub_34875( ref l_U753, "TETHER_PARKING_LEFT", 197.79000000, -53.07000000, -0.50000000, 15.00000000, 15.00000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_34875( ref l_U754, "TETHER_PARKING_RIGHT", 185.98000000, -53.03000000, -0.50000000, 15.00000000, 15.00000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_34875( ref l_U755, "TETHER_COMBAT", 191.89000000, -47.15000000, -0.50000000, 27.00000000, 27.00000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_35152( ref l_U756, "TETHER_KILL_ZONE", 187.91000000, -74.87000000, 0.00000000, 50.82000000, 20.02000000, 5.85000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    return;
}

void sub_33796(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

void sub_34708(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU12 = uParam4;
    iParam0->_fU16 = uParam5;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU48 = uParam10;
    return;
}

void sub_34875(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 2, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

void sub_35152(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    StrCopy( ref iParam0->_fU0, uParam1, 64 );
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = {uParam2};
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 1, iParam0 + 0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

int sub_35486()
{
    switch (l_U115)
    {
        case 0:
        if (NOT (CUTSCENE_IS_LOADED( "10_04_BUS_CONCAT" )))
        {
            sub_168( "CCB", "Loading the 10_04_BUS_CONCAT cutscene...", 0 );
            PRE_STREAM_SEAMLESS_CUTSCENE( "10_04_BUS_CONCAT" );
        }
        else
        {
            sub_168( "CCB", "The 10_04_BUS_CONCAT cutscene is already loaded!!!", 0 );
        }
        sub_168( "CCB", "ePreLoadAsset - STATE_LOAD_LOADING", 0 );
        l_U115 = 1;
        break;
        case 1:
        sub_168( "CCB", "ePreLoadAsset - STATE_LOAD_COMPLETE", 0 );
        l_U115 = 11;
        break;
        case 11:
        return 1;
        break;
    }
    return 0;
}

int sub_35930()
{
    switch (l_U116)
    {
        case 0:
        sub_35976();
        sub_168( "CCB", "eLoadAsset - STATE_LOAD_01", 0 );
        l_U116 = 2;
        break;
        case 2:
        if (sub_42641( ref g_U910, ref g_U1211, ref g_U1272, ref g_U1369, ref g_U1474, ref g_U1535, ref g_U1704, ref g_U1757 ))
        {
            sub_168( "CCB", "eLoadAsset - STATE_LOAD_COMPLETE", 0 );
            l_U116 = 11;
        }
        break;
        case 11:
        return 1;
        break;
    }
    return 0;
}

void sub_35976()
{
    sub_168( "CCB", "P_LOAD_ASSETS", 0 );
    if ((g_U2875[11] > 0) || (g_U763 == 11))
    {
        ;
    }
    else if (NOT (CUTSCENE_IS_LOADED( "10_04_BUS_CONCAT" )))
    {
        sub_168( "CCB", "Loading the 10_04_BUS_CONCAT cutscene...", 0 );
        PRE_STREAM_SEAMLESS_CUTSCENE( "10_04_BUS_CONCAT" );
    }
    else
    {
        sub_168( "CCB", "The 10_04_BUS_CONCAT cutscene is already loaded!!!", 0 );
    }
    sub_24811( -1204387800, ref g_U910 );
    sub_24811( g_U2106, ref g_U910 );
    sub_24811( 1572429640, ref g_U910 );
    sub_24811( -1522400210, ref g_U910 );
    sub_24811( -764000169, ref g_U910 );
    sub_24811( -1221193536, ref g_U910 );
    sub_24811( -1425703854, ref g_U910 );
    sub_24811( 89470519, ref g_U910 );
    sub_24811( -634417735, ref g_U910 );
    sub_24811( g_U2135, ref g_U910 );
    sub_24811( -1053689591, ref g_U910 );
    sub_36388( g_U2854, ref g_U1211 );
    sub_36388( g_U2856, ref g_U1211 );
    sub_36388( g_U2855, ref g_U1211 );
    sub_36388( g_U2857, ref g_U1211 );
    sub_36388( g_U2862, ref g_U1211 );
    sub_36388( g_U2863, ref g_U1211 );
    sub_37404( ref g_U1968, ref g_U1369 );
    sub_37404( ref g_U1944, ref g_U1369 );
    sub_37404( "veh@car_gensedan", ref g_U1369 );
    sub_38428( ref g_U2040, ref g_U1535 );
    sub_38428( "Vehicle/Vehicle_Car.act", ref g_U1535 );
    sub_39457( -1501041926, ref g_U1272 );
    sub_41386( 300, ref g_U1474 );
    sub_41386( 301, ref g_U1474 );
    sub_42372();
    return;
}

void sub_36388(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 = sub_36409( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
    if (iVar4 >= 0)
    {
        (uParam1^)[iVar4]._fU0 = uParam0;
        (uParam1^)[iVar4]._fU4 = 1;
        sub_36541( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
    }
    return;
}

int sub_36409(int iParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU4 == 1)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The WEAPON_TYPE asset is currently being requested!!!", 0 );
                sub_36541( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 2)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The WEAPON_TYPE asset is already loading!!!", 0 );
                sub_36541( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 3)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                if (HAS_WEAPON_LOADED( iParam0 ))
                {
                    sub_36541( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    SCRIPT_ASSERT( "The WEAPON_TYPE asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    (uParam1^)[Result]._fU0 = 0;
                    (uParam1^)[Result]._fU4 = 0;
                    sub_25625( ref (uParam1^)[Result]._fU8 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU4 == 4)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The WEAPON_TYPE asset is currently being removed!!!", 0 );
                sub_36541( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (HAS_WEAPON_LOADED( iParam0 ))
        {
            (uParam1^)[iVar6]._fU0 = iParam0;
            (uParam1^)[iVar6]._fU4 = 3;
            sub_36541( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The WEAPON_TYPE - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_36541(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_24997( uParam2, ref (uParam1^)[uParam0]._fU8 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU8[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The WEAPON_TYPE asset thread indices are NOT available!!!", 0 );
    }
    return;
}

void sub_37404(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 = sub_37425( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
    if (iVar4 >= 0)
    {
        StrCopy( ref (uParam1^)[iVar4]._fU0, uParam0, 32 );
        (uParam1^)[iVar4]._fU32 = 1;
        sub_37562( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
    }
    return;
}

int sub_37425(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU32 == 1)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The ANIM_DICT asset is currently being requested!!!", 0 );
                sub_37562( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU32 == 2)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The ANIM_DICT asset is already loading!!!", 0 );
                sub_37562( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU32 == 3)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                if (HAS_ANIM_DICT_LOADED( uParam0, 0 ))
                {
                    sub_37562( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    SCRIPT_ASSERT( "The ANIM_DICT asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    StrCopy( ref (uParam1^)[Result]._fU0, "", 32 );
                    (uParam1^)[Result]._fU32 = 0;
                    sub_25625( ref (uParam1^)[Result]._fU36 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU32 == 4)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The ANIM_DICT asset is currently being removed!!!", 0 );
                sub_37562( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU32 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (HAS_ANIM_DICT_LOADED( uParam0, 0 ))
        {
            StrCopy( ref (uParam1^)[iVar6]._fU0, uParam0, 32 );
            (uParam1^)[iVar6]._fU32 = 1;
            sub_37562( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The ANIM_DICT - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_37562(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_24997( uParam2, ref (uParam1^)[uParam0]._fU36 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU36[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The ANIM_DICT asset thread indices are NOT available!!!", 0 );
    }
    return;
}

void sub_38428(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 = sub_38449( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
    if (iVar4 >= 0)
    {
        StrCopy( ref (uParam1^)[iVar4]._fU0, uParam0, 64 );
        (uParam1^)[iVar4]._fU64 = 1;
        sub_38588( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
    }
    return;
}

int sub_38449(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU64 == 1)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The ACTION_TREE asset is currently being requested!!!", 0 );
                sub_38588( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU64 == 2)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The ACTION_TREE asset is already loading!!!", 0 );
                sub_38588( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU64 == 3)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                if (IS_ACTION_TREE_LOADED( uParam0 ))
                {
                    sub_38588( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    SCRIPT_ASSERT( "The ACTION_TREE asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    StrCopy( ref (uParam1^)[Result]._fU0, "", 64 );
                    (uParam1^)[Result]._fU64 = 0;
                    sub_25625( ref (uParam1^)[Result]._fU68 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU64 == 4)
        {
            if (ARE_STRINGS_EQUAL( ref (uParam1^)[Result]._fU0, uParam0 ))
            {
                SCRIPT_ASSERT( "The ACTION_TREE asset is currently being removed!!!", 0 );
                sub_38588( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU64 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (IS_ACTION_TREE_LOADED( uParam0 ))
        {
            StrCopy( ref (uParam1^)[iVar6]._fU0, uParam0, 64 );
            (uParam1^)[iVar6]._fU64 = 3;
            sub_38588( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The ACTION_TREE - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_38588(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_24997( uParam2, ref (uParam1^)[uParam0]._fU68 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU68[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The ACTION_TREE asset thread indices are NOT available!!!", 0 );
    }
    return;
}

void sub_39457(unknown uParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    int iVar12;

    if (ISEQ_DOES_EXIST( uParam0 ))
    {
        iVar12 = sub_39492( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
        if (iVar12 >= 0)
        {
            ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
            (uParam1^)[iVar12]._fU0 = uParam0;
            (uParam1^)[iVar12]._fU4 = 1;
            sub_39644( iVar12, uParam1, GET_ID_OF_THIS_THREAD() );
        }
    }
    else
    {
        SCRIPT_ASSERT( "[CCB] ### The eTempAssetName ISEQ is NOT valid!!! ###", 0 );
    }
    return;
}

int sub_39492(int iParam0, unknown uParam1, unknown uParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    int Result;
    int iVar14;

    iVar14 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU4 == 1)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The ISEQ asset is currently being requested!!!", 0 );
                sub_39644( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 2)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The ISEQ asset is already loading!!!", 0 );
                sub_39644( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 3)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                if ((uParam1^)[Result]._fU0 != 0)
                {
                    if ((ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 3 )) || (ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 2 )))
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        sub_39644( Result, uParam1, uParam2 );
                        return -1;
                    }
                    else if (ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 1 ))
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        SCRIPT_ASSERT( "The ISEQ asset is currently loading!!!", 0 );
                        sub_39644( Result, uParam1, uParam2 );
                        return -1;
                    }
                    else if (ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 6 ))
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        SCRIPT_ASSERT( "The ISEQ status is LOADED but the asset is already TERMINATED!!!", 0 );
                        (uParam1^)[Result]._fU0 = 0;
                        (uParam1^)[Result]._fU4 = 0;
                        return Result;
                    }
                    else if ((ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 5 )) || (ISEQ_QUERY_STATE( (uParam1^)[Result]._fU0, 4 )))
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        SCRIPT_ASSERT( "The ISEQ status is LOADED but the asset is already interrupted or shutting down!!!", 0 );
                        (uParam1^)[Result]._fU0 = 0;
                        (uParam1^)[Result]._fU4 = 0;
                        sub_25625( ref (uParam1^)[Result]._fU8 );
                        return Result;
                    }
                    else
                    {
                        ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                        SCRIPT_ASSERT( "The ISEQ asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                        (uParam1^)[Result]._fU0 = 0;
                        (uParam1^)[Result]._fU4 = 0;
                        sub_25625( ref (uParam1^)[Result]._fU8 );
                        return Result;
                    };;;;
                }
                else
                {
                    SCRIPT_ASSERT( "Trying to update the state of a DUMMY_SEQUENCE!!!", 0 );
                }
            }
        }
        else if ((uParam1^)[Result]._fU4 == 4)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                ISEQ_GET_NAME( 32, ref uVar5, (uParam1^)[Result]._fU0 );
                SCRIPT_ASSERT( "The ISEQ asset is currently being removed!!!", 0 );
                sub_39644( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 0)
        {
            iVar14 = Result;
        };;;;;
    }
    if (NOT (iVar14 == -1))
    {
        if (iParam0 != 0)
        {
            if ((ISEQ_QUERY_STATE( (uParam1^)[iVar14]._fU0, 3 )) || (ISEQ_QUERY_STATE( (uParam1^)[iVar14]._fU0, 2 )))
            {
                ISEQ_GET_NAME( 32, ref uVar5, iParam0 );
                SCRIPT_ASSERT( "The ISEQ asset is already loaded, but the asset status flag was not set!!!", 0 );
                (uParam1^)[iVar14]._fU0 = iParam0;
                (uParam1^)[iVar14]._fU4 = 3;
                sub_39644( iVar14, uParam1, uParam2 );
                return -1;
            }
            else
            {
                return iVar14;
            }
        }
        else
        {
            SCRIPT_ASSERT( "Trying to check if index is available for a DUMMY_SEQUENCE!!!", 0 );
        }
    }
    SCRIPT_ASSERT( "The ISEQ - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_39644(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_24997( uParam2, ref (uParam1^)[uParam0]._fU8 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU8[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The ISEQ asset thread indices are NOT available!!!", 0 );
    }
    return;
}

void sub_41386(unknown uParam0, unknown uParam1)
{
    int iVar4;

    iVar4 = sub_41407( uParam0, uParam1, GET_ID_OF_THIS_THREAD() );
    if (iVar4 >= 0)
    {
        (uParam1^)[iVar4]._fU0 = uParam0;
        (uParam1^)[iVar4]._fU4 = 1;
        sub_41545( iVar4, uParam1, GET_ID_OF_THIS_THREAD() );
    }
    return;
}

int sub_41407(int iParam0, unknown uParam1, unknown uParam2)
{
    int Result;
    int iVar6;

    iVar6 = -1;
    for ( Result = 0; Result <= ((uParam1^) - 1); Result++ )
    {
        if ((uParam1^)[Result]._fU4 == 1)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The VEHICLE_RECORDING asset is currently being requested!!!", 0 );
                sub_41545( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 2)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The VEHICLE_RECORDING asset is already loading!!!", 0 );
                sub_41545( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 3)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                if (HAS_VEHICLE_RECORDING_BEEN_LOADED( iParam0 ))
                {
                    sub_41545( Result, uParam1, uParam2 );
                    return -1;
                }
                else
                {
                    SCRIPT_ASSERT( "The VEHICLE_RECORDING asset status is loaded, but the asset is currently NOT loaded!!!", 0 );
                    (uParam1^)[Result]._fU0 = -1;
                    (uParam1^)[Result]._fU4 = 0;
                    sub_25625( ref (uParam1^)[Result]._fU8 );
                    return Result;
                }
            }
        }
        else if ((uParam1^)[Result]._fU4 == 4)
        {
            if ((uParam1^)[Result]._fU0 == iParam0)
            {
                SCRIPT_ASSERT( "The VEHICLE_RECORDING asset is currently being removed!!!", 0 );
                sub_41545( Result, uParam1, uParam2 );
                return -1;
            }
        }
        else if ((uParam1^)[Result]._fU4 == 0)
        {
            iVar6 = Result;
        };;;;;
    }
    if (NOT (iVar6 == -1))
    {
        if (HAS_VEHICLE_RECORDING_BEEN_LOADED( iParam0 ))
        {
            (uParam1^)[iVar6]._fU0 = iParam0;
            (uParam1^)[iVar6]._fU4 = 3;
            sub_41545( iVar6, uParam1, uParam2 );
            return -1;
        }
        else
        {
            return iVar6;
        }
    }
    SCRIPT_ASSERT( "The VEHICLE_RECORDING - STREAMREQ array is full!!!", 0 );
    return -1;
}

void sub_41545(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    iVar5 = sub_24997( uParam2, ref (uParam1^)[uParam0]._fU8 );
    if (iVar5 >= 0)
    {
        (uParam1^)[uParam0]._fU8[iVar5] = uParam2;
    }
    else
    {
        SCRIPT_ASSERT( "The VEHICLE_RECORDING asset thread indices are NOT available!!!", 0 );
    }
    return;
}

void sub_42372()
{
    sub_168( "CCB", "P_LOAD_AUDIO_ASSETS", 0 );
    STOP_SCRIPT_STREAM( 0 );
    STOP_SCRIPT_STREAM( 1 );
    STOP_SCRIPT_STREAM( 2 );
    sub_42444( ref g_U1704 );
    l_U135 = GET_SOUND_ID();
    return;
}

void sub_42444(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        StrCopy( ref (uParam0^)[I]._fU0, "", 32 );
        (uParam0^)[I]._fU32 = 0;
        sub_25625( ref (uParam0^)[I]._fU36 );
    }
    return;
}

int sub_42641(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    if (sub_42653( uParam0 ))
    {
        if (sub_42776( uParam1 ))
        {
            if (sub_42899( uParam2 ))
            {
                if (sub_43092( uParam3 ))
                {
                    if (sub_43221( uParam4 ))
                    {
                        if (sub_43344( uParam5 ))
                        {
                            if (sub_43473( uParam6 ))
                            {
                                if (sub_43602( uParam7 ))
                                {
                                    return 1;
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    return 0;
}

int sub_42653(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU4 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

int sub_42776(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU4 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

int sub_42899(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU4 == 1)
        {
            ISEQ_GET_NAME( 32, ref uVar3, (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 2)
        {
            ISEQ_GET_NAME( 32, ref uVar3, (uParam0^)[I]._fU0 );
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 4)
        {
            ISEQ_GET_NAME( 32, ref uVar3, (uParam0^)[I]._fU0 );
            return 0;
        };;;
    }
    return 1;
}

int sub_43092(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU32 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU32 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU32 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

int sub_43221(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU4 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU4 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

int sub_43344(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU64 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU64 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU64 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

int sub_43473(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU32 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU32 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU32 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

int sub_43602(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((uParam0^)[I]._fU64 == 1)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU64 == 2)
        {
            return 0;
        }
        else if ((uParam0^)[I]._fU64 == 4)
        {
            return 0;
        };;;
    }
    return 1;
}

void sub_43890()
{
    sub_168( "CCB", "P_SETUP_GAMEPLAY", 0 );
    sub_43931();
    sub_44088();
    sub_44380();
    SET_CAMERA_OVERRIDE( "STANDOFF_COVER_AIM_CAMERA", "XRIFLE_97LC_AIM_CAMERA", 0, 1, 1 );
    SET_SILHOUETTE_ACTIVE( 0 );
    SET_PROJECTILE_THROW_USE_DAMPING_COMPENSATION( 1 );
    SET_ALLOWED_TO_FAIL_COVER_FOR_BLOCKING_LINE_OF_FIRE( 0 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
    if ((g_U2875[11] > 0) || (g_U763 == 11))
    {
        sub_48619();
        sub_12514();
        sub_14443();
    }
    else
    {
        sub_48896();
    }
    return;
}

void sub_43931()
{
    sub_168( "CCB", "P_SETUP_WEATHER_AND_TOD", 0 );
    sub_168( "CCB", "Setting time of day to 7:00 AM. The weather is CLOUDY.", 0 );
    RELEASE_TIME_OF_DAY();
    SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
    FREEZE_TIME_OF_DAY( 7, 0 );
    return;
}

void sub_44088()
{
    sub_168( "CCB", "P_SPAWN_STANDOFF_BUS", 0 );
    if (NOT (DOES_OBJECT_EXIST( l_U431 )))
    {
        l_U431 = sub_11533( 89470519, 191.93600000, -73.20200000, -0.65000000, 0.00000000, -5.24100000, 79.18300000, 0, 0, 0 );
        if (DOES_OBJECT_EXIST( l_U431 ))
        {
            FREEZE_OBJECT_POSITION( l_U431, 1 );
            SET_OBJECT_VISIBLE( l_U431, 0 );
        }
        else
        {
            sub_168( "CCB", "The objStandoffBus object is NOT valid!!!", 0 );
        }
    }
    else
    {
        sub_168( "CCB", "The objStandoffBus object was already created.", 0 );
    }
    return;
}

void sub_44380()
{
    sub_168( "CCB", "P_SETUP_PLAYER", 0 );
    if (NOT (IS_PED_DEAD( sub_1047() )))
    {
        SET_PED_CONSUMING_AMMO( sub_1047(), 0 );
        sub_168( "CCB", "Giving the player adrenaline fore the grenade event...", 0 );
        SET_ADRENALINE_AMT( 1.00000000 );
        SET_PED_HEALTH( sub_1047(), GET_PED_MAX_HEALTH( sub_1047() ), 0 );
        if ((g_U2875[11] > 0) || (g_U763 == 11))
        {
            sub_168( "CCB", "Removing the player's weapons...", 0 );
            REMOVE_ALL_PED_WEAPONS( sub_1047() );
            sub_168( "CCB", "Giving the player the wtTermPlayerRifle weapon...", 0 );
            if ((sub_44706( ref l_U35 )) == 0)
            {
                l_U464 = sub_18184( sub_1047(), g_U2862, 25000, 0, 0 );
            }
        }
        else
        {
            sub_168( "CCB", "Removing the player's weapons...", 0 );
            REMOVE_ALL_PED_WEAPONS( sub_1047() );
            if (GET_PAYNEKILLER_AMT() < 3)
            {
                sub_168( "CCB", "Setting the painkiller amount.", 0 );
                SET_PAYNEKILLER_AMT( 3 );
            }
            else
            {
                sub_168( "CCB", "The player already has the proper amount of painkillers.", 0 );
            }
        }
    }
    return;
}

int sub_44706(unknown uParam0)
{
    sub_168( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U0 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U1 );
            sub_44836( uParam0, sub_1047() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

void sub_44836(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

    sub_168( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U0)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
    sub_45020( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
        sub_46097( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 = sub_18586( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
        sub_46410( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 = sub_18586( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
        sub_46410( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 = sub_18586( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
        sub_46410( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 = sub_18184( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
        sub_46410( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 = sub_18184( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
        sub_46410( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U0 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if ((sub_46872( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
    sub_47033( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING( sub_1047(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U0)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U0 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
    sub_168( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

void sub_45020(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 = sub_45052( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

int sub_45052(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

void sub_46097(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

void sub_46410(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

int sub_46872(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

void sub_47033(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 = sub_45052( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
    sub_47105( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

void sub_47105(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

void sub_48619()
{
    int I;

    sub_168( "CCB", "P_SPAWN_PROPS", 0 );
    for ( I = 0; I <= (l_U432 - 1); I++ )
    {
        if (NOT (DOES_OBJECT_EXIST( l_U432[I] )))
        {
            sub_168( "CCB", "Spawning oiStandoffProps_:", 0 );
            l_U432[I] = sub_11533( l_U449[I], l_U602[I], l_U609[I], 0, 0, 0 );
            sub_11944( ref l_U432, I );
        }
        else
        {
            sub_168( "CCB", "The oiStandoffProps object was already created.", 0 );
        }
    }
    return;
}

void sub_48896()
{
    sub_168( "CCB", "P_SETUP_GIOVANNA", 0 );
    if (NOT (DOES_PED_EXIST( g_U2595 )))
    {
        sub_168( "CCB", "Creating the piGiovanna ped.", 0 );
        g_U2595 = sub_16855( ref l_U399 );
    }
    else
    {
        sub_168( "CCB", "The piGiovanna ped was already created!!!", 0 );
    }
    if (NOT (IS_PED_DEAD( g_U2595 )))
    {
        SET_PED_NAME_DEBUG( g_U2595, "piGiovanna" );
        sub_168( "CCB", "Setting the piGiovanna ped invincible.", 0 );
        SET_PED_INVINCIBLE( g_U2595, 1 );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( g_U2595, 1 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( g_U2595, 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U2595, 1 );
    }
    return;
}

int sub_49738()
{
    if ((l_U125 < 39) AND (l_U125 >= 0))
    {
        ;
    }
    switch (l_U125)
    {
        case 0:
        sub_27380( 1, 0, 0, 1 );
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            sub_168( "CCB", "Stopping animated camera!!!", 0 );
            CAMERA_ANIMATED_STOP( 3000, 0 );
        }
        sub_168( "CCB", "eIntroMidscene - STATE_MIDSCENE_START", 0 );
        l_U125 = 2;
        break;
        case 2:
        if ((IS_BULLET_CAMERA_WIPE_STOPPED()) AND (IS_DEATH_PANEL_WIPE_ALLOWED()))
        {
            sub_168( "JMP", "RESUME DEATH PANEL CAMERA!", 0 );
            DO_SCREEN_FADE_IN( 500 );
        }
        if ((g_U2875[11] > 0) || (g_U763 == 11))
        {
            if (l_U114 >= 6)
            {
                sub_27380( 1, 0, 0, 1 );
                if (DOES_OBJECT_EXIST( l_U431 ))
                {
                    sub_168( "CCB", "Setting the objStandoffBus object to visible...", 0 );
                    SET_OBJECT_VISIBLE( l_U431, 1 );
                }
                if (DOES_OBJECT_EXIST( l_U432[1] ))
                {
                    sub_168( "CCB", "Unhiding the oiStandoffProps_1 object.", 0 );
                    SET_OBJECT_VISIBLE( l_U432[1], 1 );
                }
                if (NOT (IS_VEHICLE_DEAD( l_U452[5] )))
                {
                    SET_VEHICLE_VISIBLE( l_U452[5], 1 );
                    FREEZE_VEHICLE_POSITION( l_U452[5], 0 );
                }
                if (NOT (IS_PED_DEAD( l_U141[0] )))
                {
                    SET_PED_VISIBLE( l_U141[0], 1 );
                }
                if (NOT (IS_PED_DEAD( l_U141[1] )))
                {
                    SET_PED_VISIBLE( l_U141[1], 1 );
                }
                if (NOT (IS_PED_DEAD( l_U141[2] )))
                {
                    SET_PED_VISIBLE( l_U141[2], 1 );
                }
                if (NOT (IS_PED_DEAD( l_U141[3] )))
                {
                    SET_PED_VISIBLE( l_U141[3], 1 );
                }
                if (NOT (IS_PED_DEAD( l_U141[14] )))
                {
                    SET_PED_VISIBLE( l_U141[14], 1 );
                }
                if (NOT (IS_PED_DEAD( l_U141[15] )))
                {
                    SET_PED_VISIBLE( l_U141[15], 1 );
                }
                if (NOT (IS_PED_DEAD( l_U141[16] )))
                {
                    SET_PED_VISIBLE( l_U141[16], 1 );
                }
                if (NOT (IS_PED_DEAD( l_U141[17] )))
                {
                    SET_PED_VISIBLE( l_U141[17], 1 );
                }
                if (sub_50629( -1501041926, ref g_U1272 ))
                {
                    if (NOT (IS_PED_DEAD( sub_1047() )))
                    {
                        FREEZE_PED_POSITION( sub_1047(), 0 );
                        ISEQ_REGISTER_ENTITY( -1501041926, "entity_max", sub_1047(), 0 );
                    }
                    sub_50898( sub_1047(), g_U2339[11], g_U2466[11] );
                    ISEQ_START( -1501041926 );
                }
                else
                {
                    sub_168( "CCB", "The S_RTOP_VIG_02 ISEQ is NOT loaded!!!", 0 );
                }
                sub_168( "CCB", "The animated camera length is:", 0 );
                CAMERA_PLAY_ANIMATED( "LEVEL_S_BUS_CP_07", "B_OUT_10_04_BUS_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
                if ((IS_DEATH_PANEL_WIPE_ALLOWED()) || (IS_SCREEN_FADED_OUT()))
                {
                    sub_168( "CCB", "FADING IN!!!", 0 );
                    DO_SCREEN_FADE_IN( 500 );
                }
                l_U476._fU12 = 3000;
                sub_3778( ref l_U476 );
                sub_522( ref l_U476 );
                sub_168( "CCB", "eIntroMidscene - STATE_MIDSCENE_01", 0 );
                l_U125 = 6;
            }
        }
        else if (HAS_CUTSCENE_FINISHED())
        {
            sub_27380( 1, 0, 0, 1 );
            if (DOES_OBJECT_EXIST( l_U431 ))
            {
                sub_168( "CCB", "Setting the objStandoffBus object to visible...", 0 );
                SET_OBJECT_VISIBLE( l_U431, 1 );
            }
            if (DOES_OBJECT_EXIST( l_U432[1] ))
            {
                sub_168( "CCB", "Unhiding the oiStandoffProps_1 object.", 0 );
                SET_OBJECT_VISIBLE( l_U432[1], 1 );
            }
            if (NOT (IS_VEHICLE_DEAD( l_U452[5] )))
            {
                SET_VEHICLE_VISIBLE( l_U452[5], 1 );
                FREEZE_VEHICLE_POSITION( l_U452[5], 0 );
            }
            if (NOT (IS_PED_DEAD( l_U141[0] )))
            {
                SET_PED_VISIBLE( l_U141[0], 1 );
            }
            if (NOT (IS_PED_DEAD( l_U141[1] )))
            {
                SET_PED_VISIBLE( l_U141[1], 1 );
            }
            if (NOT (IS_PED_DEAD( l_U141[2] )))
            {
                SET_PED_VISIBLE( l_U141[2], 1 );
            }
            if (NOT (IS_PED_DEAD( l_U141[3] )))
            {
                SET_PED_VISIBLE( l_U141[3], 1 );
            }
            if (NOT (IS_PED_DEAD( l_U141[14] )))
            {
                SET_PED_VISIBLE( l_U141[14], 1 );
            }
            if (NOT (IS_PED_DEAD( l_U141[15] )))
            {
                SET_PED_VISIBLE( l_U141[15], 1 );
            }
            if (NOT (IS_PED_DEAD( l_U141[16] )))
            {
                SET_PED_VISIBLE( l_U141[16], 1 );
            }
            if (NOT (IS_PED_DEAD( l_U141[17] )))
            {
                SET_PED_VISIBLE( l_U141[17], 1 );
            }
            sub_168( "CCB", "The animated camera length is:", 0 );
            CAMERA_PLAY_ANIMATED( "LEVEL_S_BUS_CP_07", "B_OUT_10_04_BUS_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
            if (IS_SCREEN_FADED_OUT())
            {
                sub_168( "CCB", "FADING IN!!!", 0 );
                DO_SCREEN_FADE_IN( 500 );
            }
            l_U476._fU12 = 3000;
            sub_3778( ref l_U476 );
            sub_522( ref l_U476 );
            sub_168( "CCB", "eIntroMidscene - STATE_MIDSCENE_01", 0 );
            l_U125 = 6;
        }
        break;
        case 6:
        if (sub_4082( ref l_U476 ))
        {
            if (ISEQ_IS_LOADED( -1501041926 ))
            {
                ISEQ_UNREGISTER_ENTITY( -1501041926, "player" );
                ISEQ_TERMINATE( -1501041926 );
                sub_29371( -1501041926, ref g_U1272 );
            }
            if (NOT (IS_PED_DEAD( sub_1047() )))
            {
                sub_168( "CCB", "Setting the player in cover...", 0 );
                sub_50898( sub_1047(), 192.79800000, -65.80000000, 1.19100000, g_U2466[11] );
                SNAP_PLAYER_TO_COVERLINE( sub_1069(), "s_busdep_termfight", "SD_STANDOFF_COVERLINE_00", 0, g_U2339[11] );
            }
            l_U476._fU12 = 700;
            sub_3778( ref l_U476 );
            sub_522( ref l_U476 );
            sub_168( "CCB", "eIntroMidscene - STATE_MIDSCENE_02", 0 );
            l_U125 = 7;
        }
        else
        {
            sub_168( "CCB", "The animated camera current time:", 0 );
        }
        break;
        case 7:
        if (sub_52485( sub_1047() ))
        {
            sub_168( "CCB", "eIntroMidscene - STATE_MIDSCENE_03", 0 );
            l_U125 = 8;
        }
        else
        {
            sub_168( "CCB", "Waiting for the player to enter cover...", 0 );
        }
        break;
        case 8:
        if (sub_4082( ref l_U476 ))
        {
            sub_52676();
            l_U476._fU12 = 1900;
            sub_3778( ref l_U476 );
            sub_522( ref l_U476 );
            sub_168( "CCB", "eIntroMidscene - STATE_MIDSCENE_04", 0 );
            l_U125 = 9;
        }
        else
        {
            sub_168( "CCB", "The animated camera current time:", 0 );
        }
        break;
        case 9:
        if (CAMERA_ANIMATED_CURRENT_TIME() >= 5600)
        {
            sub_168( "CCB", "eIntroMidscene - STATE_MIDSCENE_COMPLETE", 0 );
            l_U125 = 39;
        }
        else
        {
            sub_168( "CCB", "The animated camera current time:", 0 );
        }
        break;
        case 39:
        return 1;
        break;
    }
    return 0;
}

int sub_50629(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    int I;

    if (ISEQ_DOES_EXIST( iParam0 ))
    {
        for ( I = 0; I <= ((uParam1^) - 1); I++ )
        {
            if ((uParam1^)[I]._fU4 == 3)
            {
                if ((uParam1^)[I]._fU0 == iParam0)
                {
                    ISEQ_GET_NAME( 32, ref uVar4, (uParam1^)[I]._fU0 );
                    return 1;
                }
            }
        }
    }
    else
    {
        SCRIPT_ASSERT( "The eTempAssetName ISEQ is NOT valid!!!", 0 );
    }
    return 0;
}

void sub_50898(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

int sub_52485(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        if (IS_PED_USING_MP3_COVER_TASK( uParam0 ))
        {
            return 1;
        }
    }
    return 0;
}

void sub_52676()
{
    sub_168( "CCB", "P_SETUP_PLAYER_IN_COVER", 0 );
    if (NOT (IS_PED_DEAD( sub_1047() )))
    {
        if (NOT (IS_PLAYER_DEAD( sub_1069() )))
        {
            if ((g_U2875[11] > 0) || (g_U763 == 11))
            {
                ;
            }
            SET_PLAYER_FORCED_AIM( sub_1069(), 1, 1 );
            SET_PED_DEFAULT_AIM_AT_COORD( sub_1047(), 193.94000000, -64.75000000, 2.81000000 );
            if (IS_PED_USING_MP3_COVER_TASK( sub_1047() ))
            {
                sub_168( "CCB", "Locking the player in cover.", 0 );
                SET_PLAYER_LOCKED_IN_COVER( sub_1069(), 1 );
            }
            else
            {
                sub_168( "CCB", "The player is NOT using cover!!!", 0 );
            }
            sub_168( "CCB", "Disabling shootdodge for the player...", 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE( sub_1069(), 0 );
            sub_168( "CCB", "Disabling last man standing for the player...", 0 );
            USE_ANIMATED_LAST_MAN_STANDING( 1 );
            BLOCK_PLAYER_COVER_MOVEMENT_TRANSITIONS( 1 );
            if (sub_731( ref g_U2040, ref g_U1535 ))
            {
                sub_168( "CCB", "Setting the player ped anim node to STANDOFF/STANDOFF_COVER/COVER_AIM_RIGHT_WAIT/default_cover_aim_right_modes.", 0 );
                PED_ACTION_TREE_PLAY_NODE( sub_1047(), "/Global/STANDOFF/STANDOFF_COVER/COVER_AIM_RIGHT_WAIT/default_cover_aim_right_modes" );
            }
            else
            {
                sub_168( "CCB", "The txtStandoffCover action tree is NOT loaded!!!", 0 );
            }
        }
    }
    return;
}

int sub_53708()
{
    if ((l_U123 < 7) AND (l_U123 > 3))
    {
        ;
    }
    switch (l_U123)
    {
        case 0:
        if (NOT (CUTSCENE_IS_LOADED( "10_04_BUS_CONCAT" )))
        {
            sub_168( "CCB", "The cutscene is NOT loaded!!!", 0 );
            PRE_STREAM_SEAMLESS_CUTSCENE( "10_04_BUS_CONCAT" );
        }
        else
        {
            sub_168( "CCB", "The cutscene is already loaded.", 0 );
        }
        sub_27380( 1, 0, 0, 1 );
        sub_168( "CCB", "eIntroCutscene - STATE_CUTSCENE_PRELOAD", 0 );
        l_U123 = 1;
        break;
        case 1:
        if (l_U120 >= 2)
        {
            if (l_U121 >= 2)
            {
                if (CUTSCENE_IS_LOADED( "10_04_BUS_CONCAT" ))
                {
                    if (NOT (IS_PED_DEAD( g_U2595 )))
                    {
                        sub_168( "CCB", "eIntroCutscene - STATE_CUTSCENE_IN", 0 );
                        l_U123 = 2;
                    }
                    else
                    {
                        sub_168( "CCB", "Waiting for the piGiovanna ped to be created...", 0 );
                    }
                }
                else
                {
                    sub_168( "CCB", "Waiting for the 10_04_BUS_CONCAT cutscene to load...", 0 );
                }
            }
        }
        break;
        case 2:
        if (NOT (IS_PED_DEAD( sub_1047() )))
        {
            CUTSCENE_REGISTER_PED_TELEPORT( sub_1047(), g_U2339[11], g_U2466[11] );
            ISEQ_REGISTER_ENTITY( -1501041926, "entity_max", sub_1047(), 0 );
            CUTSCENE_REGISTER_ISEQ( -1501041926 );
        }
        if (NOT (IS_PED_DEAD( g_U2595 )))
        {
            sub_168( "CCB", "Registering the piGiovanna ped...", 0 );
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( g_U2595, "Giov_Bus", 1 );
        }
        else
        {
            sub_168( "CCB", "The piGiovanna ped is NOT valid!!!", 0 );
        }
        if (NOT (IS_VEHICLE_DEAD( l_U452[5] )))
        {
            sub_168( "CCB", "Registering the jasre vehicle...", 0 );
            CUTSCENE_REGISTER_VEHICLE_COPY( l_U452[5], "jasre" );
        }
        REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_Crac_Sold_OF^3", -1489714533 );
        REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_Crac_Sold_OF", -1943434354 );
        REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_Crac_Sold_OF^1", 1758818191 );
        REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_Crac_Sold_OF^2", 1900580661 );
        CUTSCENE_DISABLE_FADE_IN_GAME_AT_END( 1 );
        CUTSCENE_ENABLE_SKIP( 0 );
        START_SEAMLESS_CUTSCENE();
        if (IS_SCREEN_FADED_OUT())
        {
            sub_168( "CCB", "FADING IN!!!", 0 );
            DO_SCREEN_FADE_IN( 2000 );
        }
        sub_168( "CCB", "eIntroCutscene - STATE_CUTSCENE_FADEIN", 0 );
        l_U123 = 3;
        break;
        case 3:
        if (l_U112 == 0)
        {
            if (((IS_PED_DEAD( sub_1047() )) == 0) AND ((IS_PLAYER_DEAD( sub_1069() )) == 0))
            {
                sub_168( "CCB", "Applying player preload variation", 0 );
                APPLY_PLAYER_PRELOAD_VARIATION( sub_1047(), 0 );
            }
            l_U112 = 1;
        }
        if (IS_SCREEN_FADED_IN())
        {
            SET_FADE_MUTE_OVERRIDE( 0 );
            sub_168( "CCB", "eIntroCutscene - STATE_CUTSCENE_IDLE", 0 );
            l_U123 = 4;
        }
        else if (HAS_CUTSCENE_FINISHED())
        {
            sub_168( "CCB", "The cutscene was skipped before finishing fading in...", 0 );
            SET_FADE_MUTE_OVERRIDE( 0 );
            sub_168( "CCB", "eIntroCutscene - STATE_CUTSCENE_IDLE", 0 );
            l_U123 = 4;
        }
        else
        {
            sub_168( "CCB", "Waiting for the screen to fade in...", 0 );
        }
        break;
        case 4:
        if (HAS_CUTSCENE_FINISHED())
        {
            sub_168( "CCB", "The cutscene is finished...", 0 );
            sub_168( "CCB", "Giving the player the wtTermPlayerRifle weapon...", 0 );
            if ((sub_44706( ref l_U35 )) == 0)
            {
                l_U464 = sub_18184( sub_1047(), g_U2862, 25000, 0, 0 );
            }
            sub_28353( g_U2595 );
            sub_28436( -1204387800, ref g_U910 );
            CUTSCENE_DISABLE_FADE_IN_GAME_AT_END( 0 );
            sub_168( "CCB", "eIntroCutscene - STATE_CUTSCENE_COMPLETE", 0 );
            l_U123 = 7;
        }
        else
        {
            sub_168( "CCB", "Waiting for cutscene:", 0 );
        }
        break;
        case 7:
        return 1;
        break;
    }
    return 0;
}

void sub_55767()
{
    sub_168( "CCB", "P_START_GAMEPLAY", 0 );
    g_U764 = 11;
    sub_168( "CCB", "The mceCurrentCheckpoint is:", 0 );
    if (g_U2875[11] == 0)
    {
        sub_168( "CCB", "Saving MCE_BUSENDFIGHT checkpoint data.", 0 );
        sub_55974( ref l_U35, g_U764, sub_1047(), g_U2339[11], g_U2466[11], g_U2509[11], g_U2552[11], 0 );
    }
    ACTIVATE_BULLET_TIME( 0, 0.40000000, 1 );
    sub_168( "CCB", "Set adrenaline to zero...", 0 );
    SET_ADRENALINE_AMT( 0.00000000 );
    SET_GENERATE_BULLET_SHELLS( 1 );
    SET_HIGH_RAGDOLL_LOD_LIMIT( 8 );
    sub_59670();
    sub_59907( 1, 1 );
    TOGGLE_DISPLAY_AMMO( 0 );
    sub_386( ref l_U485, 1300, 1, 0 );
    sub_522( ref l_U485 );
    sub_386( ref l_U494, 15000, 1, 0 );
    sub_522( ref l_U494 );
    sub_60225();
    return;
}

void sub_55974(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

    sub_168( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
        sub_168( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
        sub_47033( iParam1 );
        sub_56233( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
            sub_56684( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
            sub_56684( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_56916( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
            sub_56684( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_56916( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_56916( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
            sub_56684( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_56916( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_56916( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_56916( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
            sub_56684( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_56916( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_56916( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_56916( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if (sub_56916( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
            sub_58474( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U1, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
    sub_168( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

void sub_56233(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 = sub_45052( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
        sub_168( "TEH", "Ending context", 0 );
        sub_168( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

void sub_56684(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

void sub_56916(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

void sub_58474(int iParam0)
{
    sub_11748( "CHECKPOINT DATA" );
    sub_58513( iParam0->_fU4 );
    sub_58536( iParam0->_fU16 );
    sub_58536( iParam0->_fU20 );
    sub_58536( iParam0->_fU24 );
    sub_58579( iParam0->_fU28 );
    sub_58579( iParam0->_fU56 );
    sub_58579( iParam0->_fU60 );
    sub_58579( iParam0->_fU64 );
    sub_58579( iParam0->_fU68 );
    sub_58579( iParam0->_fU72 );
    sub_58579( iParam0->_fU76 );
    sub_58579( iParam0->_fU80 );
    sub_58579( iParam0->_fU84 );
    sub_58579( iParam0->_fU88 );
    sub_58579( iParam0->_fU92 );
    sub_58536( iParam0->_fU32 );
    sub_58579( iParam0->_fU36 );
    sub_58579( iParam0->_fU40 );
    sub_58579( iParam0->_fU44 );
    sub_58536( iParam0->_fU136 );
    sub_58784( iParam0->_fU140 );
    sub_58579( iParam0->_fU52 );
    sub_11748( "---nRightHolsterAttachmentEnabled: " );
    sub_58579( iParam0->_fU96 );
    sub_11748( "---nRightHolsterAttachmentToggled: " );
    sub_58579( iParam0->_fU100 );
    sub_11748( "---nLeftHolsterAttachmentEnabled: " );
    sub_58579( iParam0->_fU104 );
    sub_11748( "---nLeftHolsterAttachmentToggled: " );
    sub_58579( iParam0->_fU108 );
    sub_11748( "---nRifleHolsterAttachmentEnabled: " );
    sub_58579( iParam0->_fU112 );
    sub_11748( "---nRifleHolsterAttachmentToggled: " );
    sub_58579( iParam0->_fU116 );
    sub_11748( "---nRightHandAttachmentEnabled: " );
    sub_58579( iParam0->_fU120 );
    sub_11748( "---nRightHandAttachmentToggled: " );
    sub_58579( iParam0->_fU124 );
    sub_11748( "---nLeftHandAttachmentEnabled: " );
    sub_58579( iParam0->_fU128 );
    sub_11748( "---nLeftHandAttachmentToggled: " );
    sub_58579( iParam0->_fU132 );
    sub_58579( l_U1 );
    sub_58579( 144 );
    return;
}

void sub_58513(unknown uParam0, unknown uParam1, unknown uParam2)
{
    return;
}

void sub_58536(unknown uParam0)
{
    return;
}

void sub_58579(unknown uParam0)
{
    return;
}

void sub_58784(boolean bParam0)
{
    if (bParam0)
    {
        ;
    }
    return;
}

void sub_59670()
{
    sub_168( "CCB", "P_START_CAMERA", 0 );
    CLEAR_PED_DEFAULT_AIM( sub_1047() );
    sub_59735( 0, 0, 0, 93.00000000, 3.00000000, 0 );
    if (IS_ANIMATED_CAMERA_PLAYING())
    {
        sub_168( "CCB", "Stopping animated camera!!!", 0 );
        CAMERA_ANIMATED_STOP( 400, 1 );
    }
    return;
}

void sub_59735(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, float fParam4, unknown uParam5)
{
    SET_CAM_SIDE_LEFT( uParam2 );
    if (fParam4 != -1E8)
    {
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( uParam3, 1065353216, 0 );
    }
    if (fParam4 != -1E8)
    {
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( fParam4, 1065353216, 0 );
    }
    RENDER_SCRIPT_CAMS( 0, uParam1, uParam0, uParam5 );
    return;
}

void sub_59907(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD( sub_1047() )))
    {
        SET_PLAYER_CONTROL( sub_1069(), 1, 0 );
        SET_PED_INVINCIBLE( sub_1047(), 0 );
        if (bParam0)
        {
            sub_59988();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

void sub_59988()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_1047() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND( sub_1047(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND( sub_1047(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_1047(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_1047(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

void sub_60225()
{
    sub_168( "CCB", "P_START_SP_CHALLENGES", 0 );
    sub_168( "CCB", "Starting the Bus_Depot_Terminal_Fight context...", 0 );
    START_CONTEXT( "Bus_Depot_Terminal_Fight" );
    return;
}

void sub_60449()
{
    if (NOT (IS_PED_DEAD( sub_1047() )))
    {
        if (NOT (IS_PED_USING_MP3_COVER_TASK( sub_1047() )))
        {
            sub_168( "CCB", "The player is NOT in cover!!! Killing the player.", 0 );
            sub_60564( sub_1047() );
        }
    }
    return;
}

void sub_60564(unknown uParam0)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        STOP_PED_SPEAKING( uParam0, 1 );
        SET_PED_HEALTH( uParam0, 0, 0 );
        SET_PED_CORPSE( uParam0, 0 );
    }
    return;
}

void sub_60641(unknown uParam0)
{
    int I;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( (uParam0^)[I] )};
            if ((sub_60773( (uParam0^)[I], l_U756 )) || (((uVar4._fU4 > 96.00000000) || (uVar4._fU4 < -68.00000000)) || (((uVar4._fU0 > 232.00000000) || (uVar4._fU0 < 130.00000000)) || (uVar4._fU8 < -10.00000000))))
            {
                sub_168( "CCB", "Cleaning piTempPed ped:", 0 );
                sub_28353( (uParam0^)[I] );
            }
        }
    }
    return;
}

int sub_60773(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, ref uParam1._fU0 );
    }
    return 0;
}

void sub_60945(unknown uParam0, unknown uParam1, float fParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, int iParam11)
{
    int I;
    boolean bVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
            {
                if (IS_PED_SHOOTING( (uParam0^)[I] ))
                {
                    (uParam8^)[I] = 1;
                }
            }
            else
            {
                (uParam8^)[I] = 0;
            }
        }
        else
        {
            (uParam8^)[I] = 0;
        }
    }
    if (GET_REAL_GAME_TIMER() >= (uParam10^))
    {
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (DOES_PED_EXIST( (uParam0^)[I] ))
            {
                if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
                {
                    if ((NOT (uParam8^)[I]) AND (NOT (IS_PED_SHOOTING( (uParam0^)[I] ))))
                    {
                        uVar19 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_VELOCITY( (uParam0^)[I] )};
                        if ((NOT ((uVar19._fU8 * uVar19._fU8) > fParam2)) AND ((NOT ((uVar19._fU4 * uVar19._fU4) > fParam2)) AND (NOT ((uVar19._fU0 * uVar19._fU0) > fParam2))))
                        {
                            bVar15 = false;
                        }
                        else
                        {
                            bVar15 = true;
                        }
                        if ((NOT (uParam9^)[I]) AND (NOT bVar15))
                        {
                            if (NOT (IS_PED_USING_MP3_COVER_TASK( (uParam0^)[I] )))
                            {
                                if (sub_61339( (uParam0^)[I], (uParam7^)[I], uParam1 ))
                                {
                                    uVar16 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( (uParam0^)[I] )};
                                    if (IS_SPHERE_VISIBLE( uVar16, 2.00000000, 0 ))
                                    {
                                        sub_168( "CCB", "Killing stuck enemy!!!", 0 );
                                        sub_60564( (uParam0^)[I] );
                                    }
                                    else
                                    {
                                        sub_168( "CCB", "Cleaning stuck enemy!!!", 0 );
                                        sub_28353( (uParam0^)[I] );
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (DOES_PED_EXIST( (uParam0^)[I] ))
            {
                if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
                {
                    if (NOT (sub_61339( (uParam0^)[I], uParam3, uParam6 )))
                    {
                        sub_168( "CCB", "Cleaning far away enemy!!!", 0 );
                        sub_28353( (uParam0^)[I] );
                    }
                }
            }
            if (DOES_PED_EXIST( (uParam0^)[I] ))
            {
                if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
                {
                    (uParam7^)[I] = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( (uParam0^)[I] )};
                    (uParam9^)[I] = bVar15;
                    (uParam8^)[I] = 0;
                }
                else
                {
                    (uParam7^)[I] = {0.00000000, 0.00000000, 0.00000000};
                    (uParam9^)[I] = 0;
                    (uParam8^)[I] = 0;
                }
            }
            else
            {
                (uParam7^)[I] = {0.00000000, 0.00000000, 0.00000000};
                (uParam9^)[I] = 0;
                (uParam8^)[I] = 0;
            }
        }
        (uParam10^) = GET_REAL_GAME_TIMER() + iParam11;
    }
    return;
}

int sub_61339(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, float fParam4)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if (NOT (IS_PED_DEAD( uParam0 )))
        {
            if ((GET_DISTANCE_BETWEEN_COORDS( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 ), uParam1, 1 )) <= fParam4)
            {
                return 1;
            }
        }
    }
    else
    {
        sub_168( "CCB", "The piTempPed ped is NOT valid!!!", 0 );
    }
    return 0;
}

void sub_61964()
{
    if (l_U575 < 4)
    {
        if (l_U71)
        {
            if (sub_4082( ref l_U503 ))
            {
                sub_168( "CCB", "Triggering the grenade flinch.", 0 );
                PED_SET_ACTION_INTENTION( sub_1047(), 47, 1000, 0.00000000, 0.00000000, 0.00000000 );
            }
            if (sub_4082( ref l_U512 ))
            {
                sub_168( "CCB", "Stopping the camera shake.", 0 );
                STOP_GAMEPLAY_CAM_SHAKING( "SMALL_EXPLOSION_SHAKE", 0 );
            }
        }
    }
    switch (l_U575)
    {
        case 0:
        if (NOT l_U71)
        {
            if (IS_EXPLOSION_IN_AREA( 20, 196.32000000, -78.56000000, -1.95000000, 189.19000000, -60.68000000, 3.86000000 ))
            {
                l_U71 = 1;
                PLAY_SOUND_FRONTEND( l_U135, "SBUS_RS_BUS_SHAKE" );
                START_PARTICLE_FX_NON_LOOPED_AT_COORD( "BusDepot_BusRocking_S", l_U622, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
                SHAKE_GAMEPLAY_CAM( "SMALL_EXPLOSION_SHAKE", 1.50000000 );
                sub_386( ref l_U512, 1000, 1, 0 );
                sub_522( ref l_U512 );
                sub_386( ref l_U503, 20, 1, 0 );
                sub_522( ref l_U503 );
                DEACTIVATE_BULLET_TIME( 1, 0 );
                CAMERA_POINT_AT_GRENADE( 0 );
                CAMERA_CLEAR_POINT_AT_TARGET();
                if (NOT (IS_PLAYER_DEAD( sub_1069() )))
                {
                    if (NOT (IS_PED_DEAD( sub_1047() )))
                    {
                        if (l_U137 <= 1)
                        {
                            sub_168( "CCB", "Disabling PLAYER forced aim...", 0 );
                            CLEAR_PED_DEFAULT_AIM( sub_1047() );
                            SET_PLAYER_FORCED_AIM( sub_1069(), 0, 0 );
                        }
                        SET_PED_CONSUMING_AMMO( sub_1047(), 1 );
                        l_U139 = GET_PED_HEALTH( sub_1047() );
                        sub_168( "CCB", "The player's current health is:", 0 );
                        l_U140 = l_U139 - 51;
                        sub_168( "CCB", "Taking 51 points of health!!!", 0 );
                        SET_PED_HEALTH( sub_1047(), l_U140, 0 );
                        sub_168( "CCB", "The player's new health is:", 0 );
                        if ((GET_PED_HEALTH( sub_1047() )) <= 100)
                        {
                            sub_168( "CCB", "The player's health is below 100... Killing PLAYER ped!!!", 0 );
                            sub_60564( sub_1047() );
                        }
                    }
                }
                sub_386( ref l_U494, 15000, 1, 0 );
                sub_522( ref l_U494 );
            }
        }
        if (sub_4082( ref l_U494 ))
        {
            l_U160 = sub_62947( ref l_U141, l_U616 );
            if (NOT (IS_PED_DEAD( l_U160 )))
            {
                if (NOT ((sub_11022( ref l_U141 )) <= 1))
                {
                    sub_168( "CCB", "Tasking the piGrenadeThrower ped to throw a grenade...", 0 );
                    l_U465 = sub_18586( l_U160, g_U2863, 5, 1, 0 );
                    OPEN_SEQUENCE_TASK( ref l_U466 );
                    TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
                    if (NOT (IS_PED_DEAD( sub_1047() )))
                    {
                        TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, l_U616, sub_1047(), 3, 0, 1056964608, 0, 1, 0 );
                    }
                    TASK_SELECT_WEAPON_TO_HAND( 0, l_U465, 0 );
                    TASK_SHOOT_AT_COORD( 0, l_U619, -1, 1566631136, 0, 0 );
                    CLOSE_SEQUENCE_TASK( l_U466 );
                    TASK_PERFORM_SEQUENCE( l_U160, l_U466 );
                    CLEAR_SEQUENCE_TASK( l_U466 );
                    sub_386( ref l_U494, 15000, 1, 0 );
                    sub_522( ref l_U494 );
                    sub_168( "CCB", "eGrenadeEvent - STATE_GRENADE_TASK", 0 );
                    l_U575 = 1;
                }
                else
                {
                    sub_168( "CCB", "Last enemy!!!", 0 );
                    sub_168( "CCB", "eGrenadeEvent - STATE_GRENADE_COMPLETE", 0 );
                    l_U575 = 4;
                }
            }
            else
            {
                sub_168( "CCB", "The piGrenadeThrower ped is NOT valid!!!", 0 );
                sub_386( ref l_U494, 15000, 1, 0 );
                sub_522( ref l_U494 );
            }
        }
        break;
        case 1:
        if (NOT (IS_PED_DEAD( l_U160 )))
        {
            l_U465 = GET_WEAPON_FROM_HAND( l_U160, 0, 0 );
            if (GET_DOES_WEAPON_EXIST( l_U465 ))
            {
                if ((GET_WEAPON_TYPE( l_U465 )) == g_U2863)
                {
                    sub_168( "CCB", "The piGrenadeThrower ped has the grenade in hand...", 0 );
                    CAMERA_POINT_AT_GRENADE( 1 );
                    SET_PED_AS_ONE_SHOT_KILL( l_U160, 1 );
                    sub_168( "CCB", "eGrenadeEvent - STATE_GRENADE_IN_HAND", 0 );
                    l_U575 = 2;
                }
            }
        }
        else
        {
            sub_168( "CCB", "The piGrenadeThrower ped is NOT valid!!!", 0 );
            sub_386( ref l_U494, 15000, 1, 0 );
            sub_522( ref l_U494 );
            sub_168( "CCB", "eGrenadeEvent - STATE_GRENADE_WAITING", 0 );
            l_U575 = 0;
        }
        break;
        case 2:
        if (NOT (IS_PED_DEAD( l_U160 )))
        {
            if (IS_PED_SHOOTING( l_U160 ))
            {
                sub_168( "CCB", "The piGrenadeThrower ped is shooting...", 0 );
                if (NOT (IS_PED_DEAD( sub_1047() )))
                {
                    SET_PED_CONSUMING_AMMO( sub_1047(), 0 );
                    sub_59988();
                }
                SET_PED_AS_ONE_SHOT_KILL( l_U160, 0 );
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U160, 0 );
                TASK_COMBAT_PED( l_U160, sub_1047() );
                if ((sub_11022( ref l_U141 )) > 1)
                {
                    sub_168( "CCB", "Disabling bullet camera from piGrenadeThrower ped.", 0 );
                    SET_PED_CAN_TRIGGER_BULLET_CAM( l_U160, 0 );
                }
                ACTIVATE_BULLET_TIME( 0, 0.40000000, 1 );
                sub_386( ref l_U485, 1300, 1, 0 );
                sub_522( ref l_U485 );
                l_U71 = 0;
                l_U137++;
                sub_168( "CCB", "eGrenadeEvent - STATE_GRENADE_IN_AIR", 0 );
                l_U575 = 3;
            }
        }
        else if (NOT IS_BULLET_CAMERA_ACTIVE())
        {
            sub_168( "CCB", "The piGrenadeThrower ped is NOT valid!!!", 0 );
            CAMERA_CLEAR_POINT_AT_TARGET();
            CAMERA_POINT_AT_GRENADE( 0 );
            DEACTIVATE_BULLET_TIME( 1, 0 );
            if (NOT (IS_PED_DEAD( sub_1047() )))
            {
                SET_PED_CONSUMING_AMMO( sub_1047(), 1 );
            }
            sub_386( ref l_U494, 15000, 1, 0 );
            sub_522( ref l_U494 );
            sub_168( "CCB", "eGrenadeEvent - STATE_GRENADE_WAITING", 0 );
            l_U575 = 0;
        }
        break;
        case 3:
        if ((IS_EXPLOSION_IN_SPHERE( 20, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( sub_1047() ), 200.00000000 )) AND (NOT l_U71))
        {
            l_U71 = 1;
            if (l_U137 <= 1)
            {
                sub_168( "CCB", "Disabling PLAYER forced aim...", 0 );
                CLEAR_PED_DEFAULT_AIM( sub_1047() );
                SET_PLAYER_FORCED_AIM( sub_1069(), 0, 0 );
            }
            if (IS_EXPLOSION_IN_SPHERE( 20, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( sub_1047() ), 10.00000000 ))
            {
                sub_168( "CCB", "The explosion was close to the player...", 0 );
                sub_386( ref l_U503, 20, 1, 0 );
                sub_522( ref l_U503 );
            }
            if (NOT (IS_PED_DEAD( l_U141[1] )))
            {
                sub_168( "CCB", "Setting the piStandoffVCPF_1 ped to lockonable...", 0 );
                SET_PED_AIM_LOCKONABLE( l_U141[1], 1 );
            }
            sub_386( ref l_U485, 100, 1, 0 );
            sub_522( ref l_U485 );
        }
        else if (sub_4082( ref l_U485 ))
        {
            sub_168( "CCB", "Resetting the grenade event...", 0 );
            DEACTIVATE_BULLET_TIME( 1, 0 );
            CAMERA_POINT_AT_GRENADE( 0 );
            CAMERA_CLEAR_POINT_AT_TARGET();
            if (NOT (IS_PLAYER_DEAD( sub_1069() )))
            {
                if (NOT (IS_PED_DEAD( sub_1047() )))
                {
                    if (l_U137 <= 1)
                    {
                        CLEAR_PED_DEFAULT_AIM( sub_1047() );
                        SET_PLAYER_FORCED_AIM( sub_1069(), 0, 0 );
                    }
                    SET_PED_CONSUMING_AMMO( sub_1047(), 1 );
                }
            }
            if (NOT (IS_PED_DEAD( l_U141[1] )))
            {
                sub_168( "CCB", "Setting the piStandoffVCPF_1 ped to lockonable...", 0 );
                SET_PED_AIM_LOCKONABLE( l_U141[1], 1 );
            }
            sub_386( ref l_U494, 15000, 1, 0 );
            sub_522( ref l_U494 );
            sub_168( "CCB", "eGrenadeEvent - STATE_GRENADE_WAITING", 0 );
            l_U575 = 0;
        }
        break;
        case 4: break;
    }
    return;
}

void sub_62947(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    int I;
    unknown Result;
    float fVar8;
    float fVar9;

    fVar9 = -1.00000000;
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            fVar8 = GET_DISTANCE_BETWEEN_COORDS( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( (uParam0^)[I] ), uParam1, 1 );
            if (fVar9 < 0.00000000)
            {
                fVar9 = fVar8;
                sub_168( "CCB", "Storing initial nearest distance from piTempSquad:", 0 );
            }
            if (fVar8 <= fVar9)
            {
                Result = (uParam0^)[I];
                fVar9 = fVar8;
            }
        }
    }
    return Result;
}

void sub_65384()
{
    switch (l_U128)
    {
        case 0:
        sub_386( ref l_U530, 0, 1, 0 );
        sub_522( ref l_U530 );
        sub_168( "CCB", "eLastEnemy - STATE_EVENT_START", 0 );
        l_U128 = 6;
        break;
        case 6:
        if ((sub_11022( ref l_U141 )) == 1)
        {
            l_U162 = sub_65535( ref l_U141 );
            sub_386( ref l_U530, 3000, 1, 0 );
            sub_522( ref l_U530 );
            sub_168( "CCB", "eLastEnemy - STATE_EVENT_01", 0 );
            l_U128 = 10;
        }
        break;
        case 10:
        if (sub_4082( ref l_U530 ))
        {
            if (NOT (IS_PED_DEAD( l_U162 )))
            {
                sub_168( "CCB", "Last enemy found!!! Tasking the last enemy to go to coord and shoot.", 0 );
                OPEN_SEQUENCE_TASK( ref l_U466 );
                TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
                if (NOT (IS_PED_DEAD( sub_1047() )))
                {
                    TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, 193.64000000, -52.94000000, 0.00000000, sub_1047(), 3, 1, 1056964608, 0, 1, 0 );
                    TASK_SHOOT_AT_PED( 0, sub_1047(), -1, -256437761, 0, 0, 0 );
                }
                CLOSE_SEQUENCE_TASK( l_U466 );
                TASK_PERFORM_SEQUENCE( l_U162, l_U466 );
                CLEAR_SEQUENCE_TASK( l_U466 );
            }
            else
            {
                sub_168( "CCB", "The piLastEnemy ped is dead!!!", 0 );
            }
            sub_168( "CCB", "eLastEnemy - STATE_EVENT_COMPLETE", 0 );
            l_U128 = 44;
        }
        break;
        case 44: break;
    }
    return;
}

void sub_65535(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            return (uParam0^)[I];
        }
    }
    return nil;
}

void sub_66198(unknown uParam0)
{
    int I;

    if ((sub_11022( uParam0 )) == 1)
    {
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
            {
                if (NOT (GET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I] )))
                {
                    SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I], 1 );
                    return (uParam0^)[I];
                }
            }
        }
    }
    return nil;
}

void sub_66733(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            SET_PED_COMBAT_RANGE_MIN( (uParam0^)[I], uParam1 );
            SET_PED_COMBAT_RANGE_MAX( (uParam0^)[I], uParam2 );
        }
    }
    return;
}

int sub_67473()
{
    if ((l_U126 < 37) AND (l_U126 >= 4))
    {
        ;
    }
    switch (l_U126)
    {
        case 0:
        sub_168( "CCB", "eFailMidscene - STATE_EVENT_INIT", 0 );
        if (NOT (IS_PED_DEAD( sub_1047() )))
        {
            sub_168( "CCB", "The player is NOT dead!!!", 0 );
        }
        else
        {
            sub_168( "CCB", "The player is dead.", 0 );
        }
        sub_27380( 1, 0, 0, 1 );
        sub_168( "CCB", "Disabling the HUD.", 0 );
        DISPLAY_HUD( 0 );
        CLEAR_PRINTS();
        sub_67791( ref l_U463, l_U689[0], 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
        if (DOES_CAM_EXIST( l_U463 ))
        {
            POINT_CAM_AT_COORD( l_U463, l_U696[0] );
        }
        sub_67917( ref l_U463 );
        sub_168( "CCB", "Suspending music...", 0 );
        AUDIO_MUSIC_SUSPEND( 500 );
        l_U521._fU12 = 1000;
        sub_3778( ref l_U521 );
        sub_522( ref l_U521 );
        sub_168( "CCB", "eFailMidscene - STATE_MIDSCENE_01", 0 );
        l_U126 = 6;
        break;
        case 6:
        if (sub_4082( ref l_U521 ))
        {
            sub_168( "CCB", "Triggering the next camera shot.", 0 );
            sub_67791( ref l_U463, l_U689[1], 0.00000000, 0.00000000, 0.00000000, 45.00000000 );
            if (DOES_CAM_EXIST( l_U463 ))
            {
                POINT_CAM_AT_COORD( l_U463, l_U696[1] );
            }
            sub_67917( ref l_U463 );
            l_U521._fU12 = 1000;
            sub_3778( ref l_U521 );
            sub_522( ref l_U521 );
            sub_168( "CCB", "eFailMidscene - STATE_MIDSCENE_02", 0 );
            l_U126 = 7;
        }
        break;
        case 7:
        if (sub_4082( ref l_U521 ))
        {
            sub_168( "CCB", "eFailMidscene - STATE_MIDSCENE_OUT", 0 );
            l_U126 = 38;
        }
        break;
        case 38:
        sub_168( "CCB", "eFailMidscene - STATE_MIDSCENE_COMPLETE", 0 );
        l_U126 = 39;
        break;
        case 39:
        return 1;
        break;
    }
    return 0;
}

void sub_67791(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    (uParam0^) = CREATE_CAM_WITH_PARAMS( "DEFAULT_SCRIPTED_CAMERA", uParam1, uParam4, uParam7, 1 );
    SET_CAM_PARAMS( (uParam0^), uParam1, uParam4, uParam7, 0, 1, 1 );
    return;
}

void sub_67917(unknown uParam0)
{
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    SET_CAM_ACTIVE( (uParam0^), 1 );
    RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    return;
}

int sub_68561(int iParam0)
{
    iParam0 = 1;
    switch (l_U4)
    {
        case 0:
        if (NOT (sub_68618( ref l_U6 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_1047() )))
            {
                l_U5 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
            sub_386( ref l_U6, l_U5, 1, 1 );
            sub_522( ref l_U6 );
        }
        if (sub_4082( ref l_U6 ))
        {
            sub_168( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_1047() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD( sub_1069() )))
            {
                SET_PLAYER_CONTROL( sub_1069(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U4 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U4 = 2;
            }
            else
            {
                l_U4 = 3;
            }
        }
        break;
        case 2:
        sub_168( "NS", "Player will QUIT", 0 );
        sub_69061();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
        sub_168( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        sub_69061();
        return 1;
        break;
    }
    return 0;
}

int sub_68618(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

void sub_69061()
{
    sub_168( "NS", "P_PostFailRetryCleanup", 0 );
    sub_3778( ref l_U6 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD( sub_1069() )))
    {
        SET_PLAYER_CONTROL( sub_1069(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U3 = 0;
    l_U3 = l_U3;
    l_U4 = 0;
    return;
}

void sub_69851(unknown uParam0)
{
    sub_168( "CCB", "P_CLEANUP_ALL", 0 );
    SET_SILHOUETTE_ACTIVE( 1 );
    sub_168( "CCB", "Suspending music...", 0 );
    AUDIO_MUSIC_SUSPEND( 500 );
    sub_168( "CCB", "Releasing mission audio bank...", 0 );
    STOP_SOUND( l_U135, 0 );
    RELEASE_SCRIPT_AUDIO_BANK();
    REMOVE_PARTICLE_FX( l_U136 );
    if (ISEQ_IS_LOADED( -1501041926 ))
    {
        ISEQ_UNREGISTER_ENTITY( -1501041926, "player" );
        ISEQ_TERMINATE( -1501041926 );
        sub_29371( -1501041926, ref g_U1272 );
    }
    if (NOT (IS_PED_DEAD( l_U141[1] )))
    {
        if (GET_DOES_WEAPON_EXIST( l_U465 ))
        {
            REMOVE_PED_WEAPON( l_U141[1], l_U465 );
        }
    }
    sub_30359( ref l_U141 );
    sub_28353( l_U160 );
    sub_28353( l_U161 );
    sub_28353( l_U162 );
    sub_28353( g_U2595 );
    sub_28353( l_U163 );
    sub_30581( l_U431 );
    sub_70214( ref l_U432 );
    sub_70214( ref l_U435 );
    sub_30459( ref l_U452 );
    sub_30493( l_U461 );
    sub_30493( l_U462 );
    GAMEPLAY_HELPER_BOX_DESTROY( l_U753._fU0 );
    GAMEPLAY_HELPER_BOX_DESTROY( l_U754._fU0 );
    GAMEPLAY_HELPER_BOX_DESTROY( l_U755._fU0 );
    GAMEPLAY_HELPER_BOX_DESTROY( ref l_U756._fU0 );
    CAMERA_POINT_AT_GRENADE( 0 );
    CAMERA_CLEAR_POINT_AT_TARGET();
    if (DOES_CAM_EXIST( l_U463 ))
    {
        DESTROY_CAM( l_U463 );
    }
    END_POSTFX_BLENDER( 3, 0 );
    TOGGLE_DISPLAY_AMMO( 1 );
    if (NOT (IS_PLAYER_DEAD( sub_1069() )))
    {
        SET_PLAYER_LOCKED_IN_COVER( sub_1069(), 0 );
        SET_PLAYER_CAN_USE_SHOOTDODGE( sub_1069(), 1 );
        SET_PED_CONSUMING_AMMO( sub_1047(), 1 );
    }
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    SET_PROJECTILE_THROW_USE_DAMPING_COMPENSATION( 0 );
    SET_ALLOWED_TO_FAIL_COVER_FOR_BLOCKING_LINE_OF_FIRE( 1 );
    SET_HIGH_RAGDOLL_LOD_LIMIT_TO_DEFAULT();
    USE_ANIMATED_LAST_MAN_STANDING( 0 );
    BLOCK_PLAYER_COVER_MOVEMENT_TRANSITIONS( 0 );
    sub_168( "CCB", "Disabling all vehicles to high LOD...", 0 );
    SET_ALL_VEHICLES_HIGH_LOD( 0 );
    RESET_PED_MODEL_LOD_DISTANCES( g_U2106 );
    if (CUTSCENE_IS_LOADED( "10_04_BUS_CONCAT" ))
    {
        sub_168( "CCB", "Unloading 10_04_BUS_CONCAT cutscene...", 0 );
        CLEAR_NAMED_CUTSCENE( "10_04_BUS_CONCAT" );
    }
    if (CUTSCENE_IS_LOADED( "10_05_BUS_PD_END" ))
    {
        sub_168( "CCB", "Unloading 10_05_BUS_PD_END cutscene...", 0 );
        CLEAR_NAMED_CUTSCENE( "10_05_BUS_PD_END" );
    }
    if (CUTSCENE_IS_LOADED( "10_05_BUS_concat" ))
    {
        sub_168( "CCB", "Unloading 10_05_BUS_concat cutscene...", 0 );
        CLEAR_NAMED_CUTSCENE( "10_05_BUS_concat" );
    }
    SET_CAMERA_OVERRIDE( "", "", 0, 1, 1 );
    sub_70948();
    sub_71446( uParam0 );
    return;
}

void sub_70214(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_30581( (uParam0^)[I] );
    }
    return;
}

void sub_70948()
{
    sub_168( "CCB", "P_CLEANUP_SPEECH", 0 );
    if (sub_7724( l_U703 ))
    {
        sub_168( "CCB", "Killing the SBUS_TFCA speech...", 0 );
        sub_71056( ref l_U703, 0 );
    }
    if (sub_7724( l_U713 ))
    {
        sub_168( "CCB", "Killing the SBUS_TFCB speech...", 0 );
        sub_71056( ref l_U713, 0 );
    }
    if (sub_7724( l_U723 ))
    {
        sub_168( "CCB", "Killing the SBUS_TFCD speech...", 0 );
        sub_71056( ref l_U723, 0 );
    }
    if (sub_7724( l_U733 ))
    {
        sub_168( "CCB", "Killing the SBUS_TFCE speech...", 0 );
        sub_71056( ref l_U733, 0 );
    }
    if (sub_7724( l_U743 ))
    {
        sub_168( "CCB", "Killing the SBUS_TFCF speech...", 0 );
        sub_71056( ref l_U743, 0 );
    }
    return;
}

void sub_71056(int iParam0, unknown uParam1)
{
    if (NOT (sub_7737( (iParam0^) )))
    {
        ;
    }
    else if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (iParam0->_fU8 == g_U6[iParam0->_fU4])
        {
            STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, uParam1, 0 );
        }
    }
    return;
}

void sub_71446(boolean bParam0)
{
    sub_168( "CCB", "P_STOP_SP_CHALLENGES", 0 );
    if (bParam0)
    {
        ;
    }
    else
    {
        sub_168( "CCB", "Stopping the Bus_Depot context...", 0 );
        END_CONTEXT( "Bus_Depot" );
    }
    sub_168( "CCB", "Stopping the Bus_Depot_Terminal_Fight context...", 0 );
    END_CONTEXT( "Bus_Depot_Terminal_Fight" );
    return;
}

void sub_71841()
{
    sub_168( "SP", "P_SETUP_PLAYER_RELATIONSHIPS", 0 );
    if ((IS_PED_DEAD( sub_1047() )) == 0)
    {
        SET_PED_RELATIONSHIP( sub_1047(), 0, 1 );
        SET_PED_RELATIONSHIP( sub_1047(), 0, 2 );
        SET_PED_RELATIONSHIP( sub_1047(), 0, 6 );
        SET_PED_RELATIONSHIP( sub_1047(), 0, 7 );
    }
    return;
}

void sub_72248()
{
    sub_168( "CCB", "P_UNLOAD_ASSETS", 0 );
    RELEASE_SOUND_ID( l_U135 );
    sub_28436( g_U2106, ref g_U910 );
    sub_28436( 89470519, ref g_U910 );
    sub_28436( -634417735, ref g_U910 );
    sub_28436( g_U2135, ref g_U910 );
    sub_28436( 1572429640, ref g_U910 );
    sub_28436( -1522400210, ref g_U910 );
    sub_28436( -764000169, ref g_U910 );
    sub_28436( -1221193536, ref g_U910 );
    sub_28436( -1425703854, ref g_U910 );
    sub_28436( -1204387800, ref g_U910 );
    sub_28436( 1686109657, ref g_U910 );
    sub_28436( 1049690760, ref g_U910 );
    sub_28436( -1053689591, ref g_U910 );
    sub_28436( 1979959192, ref g_U910 );
    sub_28436( 967235939, ref g_U910 );
    sub_28436( -866409927, ref g_U910 );
    sub_28436( -560118084, ref g_U910 );
    sub_28436( 819522354, ref g_U910 );
    sub_28806( g_U2862, ref g_U1211 );
    sub_28806( g_U2863, ref g_U1211 );
    sub_28806( g_U2854, ref g_U1211 );
    sub_28806( g_U2856, ref g_U1211 );
    sub_28806( g_U2855, ref g_U1211 );
    sub_28806( g_U2857, ref g_U1211 );
    sub_28968( ref g_U1968, ref g_U1369 );
    sub_28968( ref g_U1944, ref g_U1369 );
    sub_28968( "veh@car_gensedan", ref g_U1369 );
    sub_29158( ref g_U2040, ref g_U1535 );
    sub_29158( "Vehicle/Vehicle_Car.act", ref g_U1535 );
    sub_29371( -1501041926, ref g_U1272 );
    sub_30940( 300, ref g_U1474 );
    sub_30940( 301, ref g_U1474 );
    return;
}

