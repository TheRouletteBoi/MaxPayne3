void main()
{
    l_U0 = 1;
    l_U1 = 144;
    l_U2 = 0;
    l_U3 = 1;
    l_U4 = 0;
    l_U5 = 1.00000000;
    l_U6 = -5.00000000;
    l_U7 = 0;
    l_U8 = 0;
    l_U9 = 0;
    l_U13 = 42;
    l_U14 = 0;
    l_U15 = 0;
    l_U16 = 0;
    l_U17 = 0;
    l_U18 = 0;
    l_U19 = 90.00000000;
    l_U20 = {0.00000000, 0.00000000, 0.00000000};
    l_U23 = {0.00000000, 0.00000000, 0.00000000};
    l_U26 = 0;
    l_U27 = 0;
    l_U28 = 0;
    l_U29 = 0;
    l_U30 = 0;
    l_U31 = 0;
    l_U32 = nil;
    l_U33 = {0.00000000, 0.00000000, 0.00000000};
    l_U36 = 0;
    l_U37 = 0;
    l_U38 = 0;
    l_U429 = 0;
    l_U430 = 0;
    l_U431 = 0;
    l_U432 = 0;
    l_U433 = 0;
    l_U434 = 0;
    l_U435 = {0, 0, 0};
    l_U438 = {0, 0, 0};
    l_U441 = 1.00000000;
    l_U442 = 0.00000000;
    l_U443 = -1;
    l_U445 = 0;
    l_U446 = 0;
    l_U447 = 1500;
    l_U458 = 0;
    l_U460 = 0;
    l_U461 = 0;
    StrCopy( ref l_U712, "LEVEL_S_OFFICE_INJ", 32 );
    StrCopy( ref l_U720, "DAM_KO", 32 );
    StrCopy( ref l_U728, "LEVEL_S_OFFICE_FIRE_ATRIUM", 32 );
    StrCopy( ref l_U736, "LEVEL_S_OFFICE_CP_01", 32 );
    StrCopy( ref l_U744, "06_06_office_sh08", 32 );
    StrCopy( ref l_U752, "SCRIPT_MISSION\S_OFFICE_CUBICLE_FIRE_EVENTS", 64 );
    StrCopy( ref l_U768, "SCRIPT_MISSION\S_OFFICE_POST_FIRE_1", 64 );
    StrCopy( ref l_U784, "Level/s_office/s_off_inj", 64 );
    l_U956 = -1;
    l_U957 = -1;
    l_U958 = 4000;
    l_U962 = 1;
    StrCopy( ref l_U965, "LEVEL_S_OFFICE_CP_07", 32 );
    StrCopy( ref l_U1013, "SOFF_Mobile_Collapse_Atrium", 64 );
    StrCopy( ref l_U1029, "SOFF_Mobile_Collapse_Succeed", 64 );
    StrCopy( ref l_U1045, "SOFF_Mobile_Collapse_Fail", 64 );
    l_U1170 = 0;
    l_U1171 = 0;
     /* WRITESCRIPTLOG */ sub_821( "SA", "Script s_fire_Fire_Atr.sc is starting...", 0 );
    l_U460 = 1;
    while (NOT IS_EXITFLAG_SET())
    {
         /* P_HANDLE_FAILURE */ sub_958();
        if (l_U461 == 0)
        {
             /* P_HANDLE_WIDGET_ATR */ sub_10659();
             /* P_HANDLE_EVENTS */ sub_10869();
        }
        WAIT( 0 );
    }
    SET_EXITFLAG_RESPONSE();
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "s_fire_Fire_Atr" );
     /* WRITESCRIPTLOG */ sub_821( "SA", "Script s_fire_Fire_Atr.sc is terminating...", 0 );
    return;
}

/* WRITESCRIPTLOG */ void sub_821(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    DISPLAYF( "[{0}][{1}]{3} {2} {3}", 4, 513, uVar5, 1537, uParam0, 1537, uParam1, 1537, sParam2 );
    return;
}

/* P_HANDLE_FAILURE */ void sub_958()
{
    if (g_U665 == 1)
    {
        switch (l_U461)
        {
            case 0:
            if ( /* RESTARTING_CHECKPOINT */ sub_1059())
            {
                l_U461 = 3;
            }
            if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )) == 1)
            {
                l_U461 = 1;
                 /* WRITESCRIPTLOG */ sub_821( "SA", "eFailState = FAIL_WAITING_FOR_PLAYER", 0 );
            }
            if (g_U1583)
            {
                if ( /* F_HANDLE_KILL_MAX_FROM_SMOKE_INHALE */ sub_1695())
                {
                    AUDIO_MUSIC_SUSPEND( 5000 );
                    l_U461 = 1;
                }
            }
            if (l_U964)
            {
                AUDIO_MUSIC_SUSPEND( 5000 );
                l_U461 = 1;
            }
            break;
            case 1:
            if ( /* F_CHECK_QUIT_RETRY */ sub_2186( NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )) ))
            {
                l_U461 = 2;
                 /* WRITESCRIPTLOG */ sub_821( "SA", "eFailState = FAIL_WAITING_FOR_RESPAWN", 0 );
            }
            break;
            case 2:
            if ((NOT IS_BULLET_CAMERA_ACTIVE()) AND ((NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() ))) AND (NOT IS_LAST_MAN_STANDING_ACTIVE())))
            {
                DO_SCREEN_FADE_OUT( 0 );
                AUDIO_MUSIC_SUSPEND( 500 );
                 /* KILL_ANY_MISSION_SPEECH */ sub_3578( 0 );
                 /* KILL_ANY_AMBIENT_SPEECH */ sub_3778( 0 );
                DESTROY_ALL_CAMS();
                RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
                l_U461 = 3;
                 /* WRITESCRIPTLOG */ sub_821( "SA", "eFailState = FAIL_CLEANUP_ALL", 0 );
            }
            break;
            case 3:
             /* WRITESCRIPTLOG */ sub_821( "SA", "eFailState = FAIL_CLEANUP_ALL", 0 );
            DO_SCREEN_FADE_OUT( 0 );
            if (g_U1605 == 2)
            {
                 /* F_LOAD_BINK_FIRE */ sub_4115( 3 );
            }
             /* P_CLEAN_UP_KILL_MAX_FROM_SMOKE_INHALE */ sub_4531();
             /* P_STOP_COUGHING_TIMER */ sub_4803();
             /* P_CLEANUP_ALL */ sub_4957();
            l_U461 = 4;
             /* WRITESCRIPTLOG */ sub_821( "SA", "eFailState = FAIL_RESTORE_PLAYER", 0 );
            break;
            case 4:
             /* WRITESCRIPTLOG */ sub_821( "SA", "eFailState = FAIL_RESTORE_PLAYER", 0 );
            if (l_U466._fU0)
            {
                 /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_5983( ref l_U466,  /* PLAYER_PED_ID */ sub_1355() );
            }
            l_U461 = 5;
             /* WRITESCRIPTLOG */ sub_821( "SA", "eFailState = FAIL_RESTART_CHECKPOINT", 0 );
            break;
            case 5:
             /* WRITESCRIPTLOG */ sub_821( "SA", "eFailState = FAIL_RESTART_CHECKPOINT", 0 );
            l_U460 = 1;
            l_U461 = 0;
             /* WRITESCRIPTLOG */ sub_821( "SA", "eFailState = FAIL_IDLE", 0 );
            break;
        }
    }
    return;
}

/* RESTARTING_CHECKPOINT */ int sub_1059()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U0 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
        {
            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_1355(), 0 );
            SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_1393(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE(  /* PLAYER_ID */ sub_1393(), 1 );
            if ((IS_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_1355() )) == 0)
            {
                SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_1355(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

/* PLAYER_PED_ID */ int sub_1355()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED(  /* PLAYER_ID */ sub_1393() );
    }
    return 0;
}

/* PLAYER_ID */ void sub_1393()
{
    return GET_PLAYER_ID();
}

/* F_HANDLE_KILL_MAX_FROM_SMOKE_INHALE */ int sub_1695()
{
    if ( /* ISTIMERDONE */ sub_1747( ref g_U1556 ))
    {
        g_U743 = CREATE_CAM( "DEFAULT_BULLET_CAMERA", 1 );
        SETUP_BULLET_CAMERA_SCENE( g_U743, "MISS_DEATH_FALL_01A", 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, "", "" );
        SET_CAM_ACTIVE( g_U743, 1 );
        return 1;
    }
    return 0;
}

/* ISTIMERDONE */ int sub_1747(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

/* F_CHECK_QUIT_RETRY */ int sub_2186(int iParam0)
{
    iParam0 = 1;
    switch (l_U446)
    {
        case 0:
        if (NOT ( /* HASTIMERBEENACTIVATED */ sub_2268( ref l_U448 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
            {
                l_U447 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
             /* CREATETIMER */ sub_2402( ref l_U448, l_U447, 1, 1 );
             /* STARTTIMER */ sub_2552( ref l_U448 );
        }
        if ( /* ISTIMERDONE */ sub_1747( ref l_U448 ))
        {
             /* WRITESCRIPTLOG */ sub_821( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1393() )))
            {
                SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1393(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U446 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U446 = 2;
            }
            else
            {
                l_U446 = 3;
            }
        }
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_821( "NS", "Player will QUIT", 0 );
         /* P_POSTQUITRETRYCLEANUP */ sub_3016();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_821( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
         /* P_POSTQUITRETRYCLEANUP */ sub_3016();
        return 1;
        break;
    }
    return 0;
}

/* HASTIMERBEENACTIVATED */ int sub_2268(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

/* CREATETIMER */ void sub_2402(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

/* STARTTIMER */ void sub_2552(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

/* P_POSTQUITRETRYCLEANUP */ void sub_3016()
{
     /* WRITESCRIPTLOG */ sub_821( "NS", "P_PostFailRetryCleanup", 0 );
     /* RESETTIMER */ sub_3091( ref l_U448 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1393() )))
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1393(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U445 = 0;
    l_U445 = l_U445;
    l_U446 = 0;
    return;
}

/* RESETTIMER */ void sub_3091(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

/* KILL_ANY_MISSION_SPEECH */ void sub_3578(unknown uParam0)
{
    int I;

    for ( I = 0; I <= 3; I++ )
    {
        PRINTSTRING( "\n KILL_ANY_MISSION_SPEECH CALLED***************************************" );
        if (IS_SCRIPTED_CONVERSATION_ONGOING( I ))
        {
            if ((g_U1[I] <= 8) AND (g_U1[I] >= 4))
            {
                STOP_SCRIPTED_CONVERSATION( I, uParam0, 0 );
            }
        }
    }
    return;
}

/* KILL_ANY_AMBIENT_SPEECH */ void sub_3778(unknown uParam0)
{
    int I;

    for ( I = 0; I <= 3; I++ )
    {
        PRINTSTRING( "\n KILL_ANY_AMBIENT_SPEECH CALLED***************************************" );
        if (IS_SCRIPTED_CONVERSATION_ONGOING( I ))
        {
            if ((g_U1[I] <= 3) AND (g_U1[I] >= 1))
            {
                STOP_SCRIPTED_CONVERSATION( I, uParam0, 0 );
            }
        }
    }
    return;
}

/* F_LOAD_BINK_FIRE */ int sub_4115(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_LOAD_BINK_FIRE", 0 );
    switch (uParam0)
    {
        case 1:
         /* WRITESCRIPTLOG */ sub_821( "SA", "BINK_FIRE_LOADING", 0 );
        PRELOAD_MOVIE( 0, "FIRE_TEST2", 1, 0 );
        SET_MOVIE_LOOP( 0, 1 );
        PLAY_MOVIE( 0, 0 );
        g_U1605 = 2;
        return 1;
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_821( "SA", "BINK_FIRE_PLAYING", 0 );
        return 1;
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_821( "SA", "BINK_FIRE_STOPPED", 0 );
        STOP_MOVIE( 0 );
        g_U1605 = 3;
        return 1;
        break;
        case 4:
         /* WRITESCRIPTLOG */ sub_821( "SA", "BINK_FIRE_RESTART", 0 );
        PLAY_MOVIE( 0, 0 );
        g_U1605 = 2;
        return 1;
        break;
        case 5:
         /* WRITESCRIPTLOG */ sub_821( "SA", "BINK_FIRE_RELEASE", 0 );
        STOP_MOVIE( 0 );
        RELEASE_MOVIE( 0 );
        g_U1605 = 0;
        return 1;
        break;
    }
    return 0;
}

/* P_CLEAN_UP_KILL_MAX_FROM_SMOKE_INHALE */ void sub_4531()
{
     /* WRITESCRIPTLOG */ sub_821( "NS", "P_CLEAN_UP_KILL_MAX_FROM_SMOKE_INHALE()", 0 );
     /* RESETTIMER */ sub_3091( ref g_U1556 );
     /* RESETTIMER */ sub_3091( ref g_U1574 );
     /* CLEANCAMERA */ sub_4656( ref g_U743 );
    g_U1583 = 0;
    CLEAR_TIMECYCLE_MODIFIER_OVERRIDE( 0 );
    DEACTIVATE_SPECIAL_FX_MODIFIER( "LAST_MAN_STANDING_DEATH" );
    return;
}

/* CLEANCAMERA */ void sub_4656(unknown uParam0)
{
    if ((DOES_CAM_EXIST( (uParam0^) )) == 1)
    {
        if ((IS_CAM_ACTIVE( (uParam0^) )) == 1)
        {
            SET_CAM_ACTIVE( (uParam0^), 0 );
        }
        DESTROY_CAM( (uParam0^) );
    }
    (uParam0^) = nil;
    return;
}

/* P_STOP_COUGHING_TIMER */ void sub_4803()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_STOP_COUGHING_TIMER", "###" );
    g_U1585 = 0;
    g_U1587 = 0;
    l_U267 = 0;
    l_U266 = 3;
    l_U268 = 0;
    DEACTIVATE_SPECIAL_FX_MODIFIER( "FIRE_COUGH" );
    STOP_SOUND( g_U1598, 0 );
     /* RESETTIMER */ sub_3091( ref g_U1538 );
    return;
}

/* P_CLEANUP_ALL */ void sub_4957()
{
    int I;

     /* WRITESCRIPTLOG */ sub_821( "SA", "P_CLEANUP", 0 );
    CLEAR_TIMECYCLE_MODIFIER_OVERRIDE( 0 );
    CLEAR_TIMECYCLE_MODIFIER();
    CAMERA_USE_HANDY_CAM( 0, 0.00000000, 1 );
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    DESTROY_ALL_CAMS();
    STOP_SOUND( l_U956, 0 );
    STOP_SOUND( l_U957, 0 );
    RELEASE_NAMED_SCRIPT_AUDIO_BANK( ref l_U752 );
    ISEQ_UNREGISTER_ENTITY( 1159597124, "player" );
    ISEQ_TERMINATE( 1159597124 );
    ISEQ_UNREGISTER_ENTITY( -654795811, "MAX" );
    ISEQ_TERMINATE( -654795811 );
    ISEQ_UNREGISTER_ENTITY( -211988314, "MAX" );
    ISEQ_TERMINATE( -211988314 );
    ISEQ_UNREGISTER_ENTITY( -1490441288, "player" );
     /* TERMINATEISEQ */ sub_5212( -1490441288, 1 );
     /* CLEANCAMERA */ sub_4656( ref l_U953 );
     /* CLEANCAMERA */ sub_4656( ref l_U954 );
     /* CLEANCAMERA */ sub_4656( ref l_U955 );
    for ( I = 0; I < 6; I++ )
    {
        REMOVE_SCRIPT_FIRE( l_U999[I] );
    }
     /* RESETTIMER */ sub_3091( ref l_U926 );
     /* RESETTIMER */ sub_3091( ref l_U917 );
     /* RESETTIMER */ sub_3091( ref l_U890 );
     /* RESETTIMER */ sub_3091( ref l_U872 );
     /* RESETTIMER */ sub_3091( ref l_U881 );
     /* RESETTIMER */ sub_3091( ref l_U908 );
     /* RESETTIMER */ sub_3091( ref l_U899 );
     /* RESETTIMER */ sub_3091( ref l_U809 );
     /* RESETTIMER */ sub_3091( ref l_U818 );
     /* RESETTIMER */ sub_3091( ref l_U827 );
     /* RESETTIMER */ sub_3091( ref l_U800 );
     /* RESETTIMER */ sub_3091( ref l_U836 );
     /* RESETTIMER */ sub_3091( ref l_U845 );
     /* RESETTIMER */ sub_3091( ref l_U854 );
     /* RESETTIMER */ sub_3091( ref l_U863 );
     /* RESETTIMER */ sub_3091( ref l_U935 );
     /* RESETTIMER */ sub_3091( ref l_U944 );
     /* CLEANOBJECT */ sub_5737( l_U1006 );
     /* CLEANOBJECT */ sub_5737( l_U1007 );
     /* CLEANOBJECT */ sub_5737( l_U1008 );
     /* CLEANOBJECT */ sub_5737( l_U1009 );
     /* CLEANOBJECT */ sub_5737( l_U1010 );
     /* CLEANOBJECT */ sub_5737( l_U1011 );
     /* CLEANOBJECT */ sub_5737( l_U1012 );
    return;
}

/* TERMINATEISEQ */ void sub_5212(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to terminate does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 1)
    {
        ISEQ_TERMINATE( uParam0 );
    }
    ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
    if (iParam1 == 1)
    {
        while ((ISEQ_IS_LOADED( uParam0 )) == 1)
        {
            DISPLAYF( "[SP]### Waiting for interactive sequence to terminate: {0} {1} ###", 2, 1281, ref uVar4, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* CLEANOBJECT */ void sub_5737(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

/* P_RESTORE_PLAYER_DATA_CHECKPOINT */ void sub_5983(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

     /* WRITESCRIPTLOG */ sub_821( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U0)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
     /* CLOSE_CURRENT_LEVEL_CONTEXT */ sub_6202( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
         /* LOADCOLLISIONFORPED */ sub_7366( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_7680( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_8159( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_7680( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_8159( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_7680( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_8159( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPON */ sub_8475( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_8159( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPON */ sub_8475( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_8159( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U0 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if (( /* F_CAN_GIVE_AMMO_TO_REGULAR_WEAPON_TYPE */ sub_9047( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
     /* START_NEW_LEVEL_CONTEXT */ sub_9249( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING(  /* PLAYER_PED_ID */ sub_1355(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U0)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U0 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
     /* WRITESCRIPTLOG */ sub_821( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

/* CLOSE_CURRENT_LEVEL_CONTEXT */ void sub_6202(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_6264( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

/* GET_MISSION_INDEX_FROM_NAME */ int sub_6264(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    }
    else
    {
        PRINTSTRING( uParam0 );
        PRINTSTRING( uParam0 );
        PRINTSTRING( uParam0 );
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

/* LOADCOLLISIONFORPED */ void sub_7366(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

/* F_GIVEPEDWEAPONTOHOLSTER */ void sub_7680(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_8084( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* WRITE_STRING */ void sub_8084(unknown uParam0)
{
    PRINTSTRING( uParam0 );
    PRINTNL();
    return;
}

/* P_RESTORE_WEAPON_ATTACHMENTS */ void sub_8159(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

/* F_GIVEPEDWEAPON */ void sub_8475(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_8084( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* F_CAN_GIVE_AMMO_TO_REGULAR_WEAPON_TYPE */ int sub_9047(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

/* START_NEW_LEVEL_CONTEXT */ void sub_9249(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_6264( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
     /* CLEAR_GG_CONTEXTS */ sub_9347( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

/* CLEAR_GG_CONTEXTS */ void sub_9347(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

/* P_HANDLE_WIDGET_ATR */ void sub_10659()
{
    if (NOT l_U1170)
    {
        START_WIDGET_GROUP( "Office Atrium Timer Adjust Widget" );
        ADD_WIDGET_INT_SLIDER( "Stair climbing timer", ref l_U958, 0, 1000000, 1 );
        ADD_WIDGET_BOOL( "Refresh timer", ref l_U1171 );
        STOP_WIDGET_GROUP();
        l_U1170 = 1;
    }
    if (l_U1171)
    {
         /* CREATETIMER */ sub_2402( ref l_U863, l_U958, 1, 0 );
        l_U1171 = 0;
    }
    return;
}

/* P_HANDLE_EVENTS */ void sub_10869()
{
    switch (l_U460)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_821( "SA", "eCheckpointState = CHECKPOINT_IDLE", 0 );
        break;
        case 1:
         /* WRITESCRIPTLOG */ sub_821( "SA", "eCheckpointState = CHECKPOINT_INIT_SCRIPT_DATA", 0 );
        if (g_U1605 == 0)
        {
             /* F_LOAD_BINK_FIRE */ sub_4115( 1 );
        }
        else if (g_U1605 == 3)
        {
             /* F_LOAD_BINK_FIRE */ sub_4115( 4 );
        }
         /* P_INIT_SCRIPT_VARIABLES */ sub_11137();
         /* P_INIT_GAMEPLAY_STRUCTS */ sub_14346();
        SET_WEATHER_TYPE_NOW_PERSIST( "EXTRASUNNY" );
        FREEZE_TIME_OF_DAY( 18, 0 );
        AUD_SET_IS_POWER_ON( 0 );
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "fireatriumleanwall01Left", 1, 0, 0, 0 );
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "fireatriumleanwall01Right", 1, 0, 0, 0 );
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "fireatriumleanwall02", 0, 0, 0, 0 );
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "FireAtriumGateLift", 1, 0, 0, 0 );
         /* P_CREATE_GAMEPLAY_CAMERAS */ sub_15458();
         /* SETUP_SCRIPTED_SPEECH */ sub_15601( "SOFFAUD" );
        l_U460 = 2;
         /* WRITESCRIPTLOG */ sub_821( "SP", "eCheckpointState = CHECKPOINT_INIT_REQUEST_ASSETS", 0 );
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_821( "SP", "eCheckpointState = CHECKPOINT_INIT_REQUEST_ASSETS", 0 );
         /* P_REQUEST_ASSETS */ sub_15901();
        l_U460 = 3;
         /* WRITESCRIPTLOG */ sub_821( "SP", "eCheckpointState = CHECKPOINT_INIT_LOAD_ASSETS", 0 );
        case 3:
        if (( /* F_HAVE_ASSETS_LOADED */ sub_17779()) == 1)
        {
            l_U460 = 4;
             /* WRITESCRIPTLOG */ sub_821( "SP", "eCheckpointState = CHECKPOINT_SETUP_STARTPOINT", 0 );
            break;
        }
        return;
        case 4:
         /* WRITESCRIPTLOG */ sub_821( "SA", "eCheckpointState = CHECKPOINT_SETUP_STARTPOINT", 0 );
         /* P_SETUP_MOBILE_MODELS */ sub_18630();
         /* P_SETUP_MAX */ sub_19592();
        if (g_U665 == 0)
        {
            l_U462 = 1;
            l_U460 = 5;
             /* WRITESCRIPTLOG */ sub_821( "SA", "eCheckpointState = CHECKPOINT_HANDLE_OPENING_CUTSCENE", 0 );
        }
        else
        {
            l_U460 = 6;
             /* WRITESCRIPTLOG */ sub_821( "SA", "eCheckpointState = CHECKPOINT_START_GAMEPLAY", 0 );
        }
        break;
        case 5:
        if (( /* F_HANDLE_OPENING_CUTSCENE */ sub_20518()) == 1)
        {
            l_U460 = 6;
             /* WRITESCRIPTLOG */ sub_821( "SP", "eCheckpointState = CHECKPOINT_START_GAMEPLAY", 0 );
            break;
        }
        return;
        case 6:
         /* WRITESCRIPTLOG */ sub_821( "SP", "eCheckpointState = CHECKPOINT_START_GAMEPLAY", 0 );
         /* P_START_GAMEPLAY */ sub_21707();
        l_U460 = 7;
         /* WRITESCRIPTLOG */ sub_821( "SP", "eCheckpointState = CHECKPOINT_HANDLE_GOTO_GATE", 0 );
        break;
        case 7:
         /* P_HANDLE_MID_10_CAM */ sub_26611();
         /* P_HANDLE_PARTICLE_FX */ sub_27208();
         /* P_HANDLE_WALL_LEAN */ sub_28763();
         /* P_HANDLE_STAIR_CLIMB */ sub_31757();
         /* P_HANDLE_GATE_LIFT */ sub_36723();
         /* P_HANDLE_FINAL_MONO */ sub_36992();
        if (g_U665 == 1)
        {
             /* P_HANDLE_GLOBAL_FIRE_EVENTS */ sub_37467();
        }
        break;
        case 8:
         /* WRITESCRIPTLOG */ sub_821( "SA", "eCheckpointState = CHECKPOINT_FINISHED", 0 );
         /* P_CLEANUP_ALL */ sub_4957();
         /* P_UNLOAD_ASSETS */ sub_41590();
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        break;
    }
     /* P_HANDLE_IMAGEFX_FIRE_ATR */ sub_41946();
    return;
}

/* P_INIT_SCRIPT_VARIABLES */ void sub_11137()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_INIT_SCRIPT_VARIABLES", 0 );
    l_U956 = GET_SOUND_ID();
    l_U957 = GET_SOUND_ID();
    l_U961 = 0;
    l_U960 = 0;
    l_U959 = 0;
    l_U963 = 0;
    l_U964 = 0;
     /* CREATETIMER */ sub_2402( ref l_U926, 2000, 1, 0 );
     /* CREATETIMER */ sub_2402( ref l_U917, 800, 1, 0 );
     /* CREATETIMER */ sub_2402( ref l_U872, 500, 1, 0 );
     /* CREATETIMER */ sub_2402( ref l_U881, 700, 1, 0 );
     /* CREATETIMER */ sub_2402( ref l_U890, 2000, 1, 0 );
     /* CREATETIMER */ sub_2402( ref l_U899, 1500, 1, 0 );
     /* CREATETIMER */ sub_2402( ref l_U800, 4800, 1, 0 );
     /* CREATETIMER */ sub_2402( ref l_U809, 1000, 1, 0 );
     /* CREATETIMER */ sub_2402( ref l_U818, 2153, 1, 0 );
     /* CREATETIMER */ sub_2402( ref l_U827, 5555, 1, 0 );
     /* CREATETIMER */ sub_2402( ref l_U836, 1700, 1, 0 );
     /* CREATETIMER */ sub_2402( ref l_U845, 2307, 1, 0 );
     /* CREATETIMER */ sub_2402( ref l_U854, 2300, 1, 0 );
     /* CREATETIMER */ sub_2402( ref l_U863, l_U958, 1, 0 );
     /* CREATETIMER */ sub_2402( ref l_U908, 12000, 1, 0 );
     /* CREATETIMER */ sub_2402( ref l_U935, 1400, 1, 0 );
     /* CREATETIMER */ sub_2402( ref l_U944, 8000, 1, 0 );
    l_U462 = 0;
    l_U463 = 0;
    l_U464 = 0;
    l_U465 = 0;
     /* P_INIT_COUGHING_LOGIC */ sub_11528();
     /* P_INIT_FIRE_POINTS */ sub_12472();
    return;
}

/* P_INIT_COUGHING_LOGIC */ void sub_11528()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_INIT_COUGHING_LOGIC", "###" );
    g_U1585 = 0;
    g_U1587 = 1;
    g_U1598 = GET_SOUND_ID();
    l_U267 = 0;
    l_U266 = 0;
    l_U268 = 0;
     /* P_CREATETRIGGERBOX */ sub_11709( ref g_U1340, "InFirAtr00", -978.00000000, 32.34000000, -2.50000000, 15.00000000, 30.00000000, 19.80000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_11709( ref g_U1361, "InFirAtr01", -988.78000000, 23.59000000, -2.50000000, 15.00000000, 13.00000000, 19.80000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_11709( ref g_U1382, "InFireCub00", -991.71000000, 37.54000000, -2.50000000, 14.00000000, 15.00000000, 20.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_11709( ref g_U1403, "InFireCub01", -1010.48000000, 32.34000000, -2.50000000, 28.00000000, 30.00000000, 20.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_11709( ref g_U1424, "InFireCub02", -1028.92000000, 30.17000000, -2.50000000, 10.00000000, 7.00000000, 20.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_11709( ref g_U1445, "InFireBrd00", -1031.12000000, 15.25000000, -2.50000000, 14.00000000, 22.50000000, 20.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_11709( ref g_U1466, "InFirArc01", -1009.07000000, 5.14000000, -2.50000000, 30.00000000, 24.00000000, 20.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_11709( ref g_U1487, "InFirArc00", -1028.87000000, -0.18000000, -2.50000000, 11.00000000, 8.00000000, 20.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_11709( ref g_U1508, "InFirRods00", -987.34000000, 3.39000000, -2.50000000, 14.00000000, 28.00000000, 20.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* RESETTIMER */ sub_3091( ref g_U1547 );
     /* CREATETIMER */ sub_2402( ref g_U1547, g_U1597, 1, 0 );
     /* RESETTIMER */ sub_3091( ref g_U1529 );
     /* CREATETIMER */ sub_2402( ref g_U1529, g_U1599, 1, 0 );
     /* RESETTIMER */ sub_3091( ref g_U1538 );
     /* CREATETIMER */ sub_2402( ref g_U1538, GET_RANDOM_INT_IN_RANGE( g_U1601, g_U1602 ), 1, 0 );
    return;
}

/* P_CREATETRIGGERBOX */ void sub_11709(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    StrCopy( ref iParam0->_fU0, uParam1, 64 );
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = {uParam2};
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 1, iParam0 + 0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* P_INIT_FIRE_POINTS */ void sub_12472()
{
    l_U39[0] = {-975.81300000, 24.29370000, 0.20000000};
    l_U39[1] = {-976.55800000, 22.32690000, 0.20000000};
    l_U39[2] = {-977.87300000, 20.86910000, 0.20000000};
    l_U39[3] = {-986.78000000, 23.85550000, 0.20000000};
    l_U39[4] = {-986.77100000, 25.82820000, 0.20000000};
    l_U39[5] = {-986.86200000, 27.80760000, 0.20000000};
    l_U39[6] = {-978.74000000, 33.56000000, 0.20000000};
    l_U39[7] = {-975.94700000, 33.13140000, 0.20000000};
    l_U39[8] = {-973.73800000, 30.97250000, 0.20000000};
    l_U39[9] = {-975.79000000, 26.29060000, 0.20000000};
    l_U39[10] = {-979.32800000, 19.46870000, 0.20000000};
    l_U39[11] = {-976.15100000, 28.33880000, 0.20000000};
    l_U39[12] = {-986.57800000, 18.69000000, 0.20000000};
    l_U39[13] = {-985.88000000, 21.00350000, 0.20000000};
    l_U82[0] = {-1001.50000000, 22.94000000, 4.90000000};
    l_U82[1] = {-1005.94000000, 26.53000000, 5.27000000};
    l_U82[2] = {-1001.13000000, 22.81000000, 4.90000000};
    l_U82[3] = {-997.86000000, 18.44390000, 4.90000000};
    l_U82[4] = {-1008.24000000, 22.64000000, 5.23000000};
    l_U82[5] = {-1011.02000000, 30.78660000, 5.23000000};
    l_U82[6] = {-1001.09000000, 27.87930000, 4.90000000};
    l_U82[7] = {-1002.04000000, 22.75000000, 4.90000000};
    l_U82[8] = {-996.57700000, 24.18540000, 4.90000000};
    l_U82[9] = {-996.96300000, 26.56050000, 4.90000000};
    l_U82[10] = {-1000.70000000, 37.59880000, 5.06841000};
    l_U82[11] = {-998.59600000, 37.62690000, 5.06841000};
    l_U82[12] = {-987.43300000, 30.83000000, 2.24344000};
    l_U82[13] = {-987.43700000, 32.53640000, 2.24185000};
    l_U82[14] = {-987.41700000, 34.50890000, 2.24185000};
    l_U82[15] = {-987.39700000, 36.57120000, 2.24185000};
    l_U82[16] = {-988.29700000, 38.13670000, 2.24344000};
    l_U82[17] = {-990.87400000, 38.24230000, 2.24344000};
    l_U82[19] = {-1008.28000000, 22.71000000, 5.23000000};
    l_U82[20] = {-1011.42000000, 20.05670000, 5.23000000};
    l_U82[21] = {-1000.78000000, 29.16000000, 4.90000000};
    l_U82[22] = {-996.20800000, 38.47680000, 5.06841000};
    l_U82[23] = {-1006.67000000, 26.33000000, 8.91000000};
    l_U82[24] = {-1013.05000000, 24.90050000, 5.23000000};
    l_U82[25] = {-1009.73000000, 29.52650000, 5.23000000};
    l_U82[26] = {-1012.81000000, 22.84860000, 5.23000000};
    l_U82[27] = {-1001.05000000, 30.78970000, 4.90000000};
    l_U82[28] = {-1001.75000000, 37.02490000, 5.06841000};
    l_U82[29] = {-1003.65000000, 18.17000000, 5.12000000};
    l_U82[30] = {-1008.37000000, 22.79000000, 5.23000000};
    l_U82[31] = {-1008.87000000, 27.82960000, 5.23000000};
    l_U82[32] = {-1009.37000000, 18.15310000, 5.12000000};
    l_U182[0] = {-1028.76000000, 10.36350000, 5.12000000};
    l_U182[1] = {-1033.35000000, 17.81970000, 5.12000000};
    l_U182[2] = {-1028.18000000, 21.06960000, 5.12000000};
    l_U182[3] = {-1028.89000000, 23.32580000, 5.12000000};
    l_U182[4] = {-1028.18000000, 25.39780000, 5.12000000};
    l_U182[5] = {-1033.35000000, 19.14410000, 5.12000000};
    l_U182[6] = {-1033.18000000, 12.51890000, 5.12000000};
    l_U182[7] = {-1034.57000000, 23.21270000, 5.12000000};
    l_U182[8] = {-1035.38000000, 25.88970000, 5.12000000};
    l_U182[9] = {-1034.96000000, 24.39860000, 5.12000000};
    l_U182[10] = {-1033.35000000, 13.93000000, 5.12000000};
    l_U182[11] = {-1028.45000000, 8.15473000, 5.12000000};
    l_U182[12] = {-1027.82000000, 4.90000000, 5.27000000};
    l_U182[13] = {-1032.84000000, 7.41310000, 5.12000000};
    l_U182[14] = {-1032.83000000, 5.65683000, 5.12000000};
    l_U182[15] = {-1028.15000000, 6.52000000, 5.27000000};
    l_U231[0] = {-1002.87000000, 3.46000000, 5.11000000};
    l_U231[1] = {-1000.20000000, 8.51000000, 5.11000000};
    l_U231[2] = {-998.83000000, 7.76000000, 5.27000000};
    l_U231[3] = {-1013.62000000, 3.49000000, 5.11000000};
    l_U231[4] = {-1017.99000000, 3.50199000, 5.11000000};
    l_U231[5] = {-1021.71000000, 4.45000000, 5.11000000};
    l_U231[6] = {-1020.13000000, 4.54000000, 5.11000000};
    l_U231[7] = {-1023.06000000, 4.79000000, 5.11000000};
    l_U256[0] = {-988.29200000, 5.26253000, 5.11000000};
    l_U256[1] = {-988.22500000, 7.23000000, 5.11000000};
    l_U256[2] = {-988.34100000, 9.27425000, 5.11000000};
    return;
}

/* P_INIT_GAMEPLAY_STRUCTS */ void sub_14346()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_INIT_GAMEPLAY_STRUCTS", 0 );
     /* P_CREATETRIGGERBOX */ sub_11709( ref l_U502, "tbFall", -987.90000000, 31.03000000, -0.27000000, 3.00000000, 3.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_11709( ref l_U523, "MOBILE_WARNING", -980.42000000, 28.55000000, -1.34000000, 6.50000000, 5.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_11709( ref l_U544, "tbMaxInAtrium", -978.30000000, 37.36000000, -1.34000000, 15.00000000, 15.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_11709( ref l_U586, "tbImageFX03", -985.30000000, 32.27000000, -0.30000000, 5.00000000, 5.00000000, 2.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_11709( ref l_U628, "tbImageFX07", -993.86200000, 36.08460000, -0.30000000, 5.00000000, 5.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_11709( ref l_U565, "tbImageFX01", -979.73500000, 28.79960000, -0.30388900, 5.00000000, 5.00000000, 2.00000000, 0.00000000, 0.00000000, -15.07930000, 1 );
     /* P_CREATETRIGGERBOX */ sub_11709( ref l_U628, "tbImageFX07", -979.73500000, 28.79960000, -0.30388900, 5.00000000, 5.00000000, 2.00000000, 0.00000000, 0.00000000, -15.07930000, 1 );
     /* P_CREATETRIGGERBOX */ sub_11709( ref l_U649, "tbImageFX09", -988.31500000, 32.27000000, -0.30000000, 5.00000000, 5.00000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_11709( ref l_U670, "tbImageFX11", -996.15400000, 36.22160000, 2.59874000, 5.00000000, 5.00000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_11709( ref l_U691, "tbImageFX12", -987.24000000, 32.27000000, -0.30000000, 5.00000000, 5.00000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    return;
}

/* P_CREATE_GAMEPLAY_CAMERAS */ void sub_15458()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_CREATE_GAMEPLAY_CAMERAS", 0 );
     /* CLEANCAMERA */ sub_4656( ref l_U955 );
    l_U955 = CREATE_CAM( "DEFAULT_SCRIPTED_CAMERA", 0 );
    return;
}

/* SETUP_SCRIPTED_SPEECH */ void sub_15601(unknown uParam0)
{
    StrCopy( ref g_U157._fU0, uParam0, 16 );
     /* CLEARPEDCONVERSATIONDATA */ sub_15645();
    return;
}

/* CLEARPEDCONVERSATIONDATA */ void sub_15645()
{
    int I;

    for ( I = 0; I <= 8; I++ )
    {
        g_U157._fU16[I]._fU0 = nil;
        g_U157._fU16[I]._fU4 = 0;
        g_U157._fU92[I] = 0;
    }
    return;
}

/* P_REQUEST_ASSETS */ void sub_15901()
{
     /* WRITESCRIPTLOG */ sub_821( "SP", "P_REQUEST_ASSETS", 0 );
    if (g_U665 < 1)
    {
         /* LOADSEAMLESSCUTSCENE */ sub_15977( ref l_U744, 0 );
    }
     /* LOADMODEL */ sub_16323( -2119961670, 0 );
     /* LOADMODEL */ sub_16323( -1329128487, 0 );
     /* LOADMODEL */ sub_16323( 1185415992, 0 );
     /* LOADMODEL */ sub_16323( 1683467108, 0 );
     /* LOADMODEL */ sub_16323( 22502157, 0 );
     /* LOADMODEL */ sub_16323( 1926445048, 0 );
     /* LOADMODEL */ sub_16323( 410241322, 0 );
     /* LOADANIMDICT */ sub_16640( ref l_U720, 0, 0 );
     /* LOADANIMDICT */ sub_16640( ref l_U712, 0, 0 );
     /* LOADACTIONTREE */ sub_16822( ref l_U784, 0 );
     /* LOADISEQ */ sub_16982( -654795811, 0 );
     /* LOADISEQ */ sub_16982( -211988314, 0 );
     /* LOADISEQ */ sub_16982( 1159597124, 0 );
     /* LOADISEQ */ sub_16982( -1490441288, 0 );
     /* LOADAUDIOBANK */ sub_17312( ref l_U768, 0 );
     /* LOADAUDIOBANK */ sub_17312( ref l_U752, 0 );
    STOP_SCRIPT_STREAM( 0 );
    STOP_SCRIPT_STREAM( 1 );
    STOP_SCRIPT_STREAM( 2 );
     /* LOADSCRIPTSTREAM */ sub_17509( ref l_U1013, 0, 0 );
     /* LOADSCRIPTSTREAM */ sub_17509( ref l_U1029, 1, 0 );
     /* LOADSCRIPTSTREAM */ sub_17509( ref l_U1045, 2, 0 );
    return;
}

/* LOADSEAMLESSCUTSCENE */ void sub_15977(unknown uParam0, int iParam1)
{
    if (HAS_CUTSCENE_LOADED())
    {
        if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
        {
            SCRIPT_ASSERT( "Another cutscene is already loaded.  You can only load one cutscene into memory.  Your current cutscene will not load into memory.", 0 );
        }
    }
    if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
    {
        PRE_STREAM_SEAMLESS_CUTSCENE( uParam0 );
        if (iParam1 == 1)
        {
            while ((CUTSCENE_IS_LOADED( uParam0 )) == 0)
            {
                DISPLAYF( "[SP]### Waiting for seamless cutscene to load: {} ###", 1, 1537, uParam0 );
                WAIT( 0 );
            }
        }
    }
    return;
}

/* LOADMODEL */ void sub_16323(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
         /* WRITE_STRING */ sub_8084( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADANIMDICT */ void sub_16640(unknown uParam0, unknown uParam1, int iParam2)
{
    REQUEST_ANIM_DICT( uParam0, uParam1 );
    "[doubled result, dropped if not asigned]";
    if (iParam2 == 1)
    {
        while ((HAS_ANIM_DICT_LOADED( uParam0, uParam1 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an animation dictionary to be loaded: {} ###", 1, 1537, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADACTIONTREE */ void sub_16822(unknown uParam0, int iParam1)
{
    ACTION_TREE_LOAD( uParam0 );
    if (iParam1 == 1)
    {
        while ((IS_ACTION_TREE_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an Action Tree to be loaded: {} ###", 1, 1537, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADISEQ */ void sub_16982(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to load does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 0)
    {
        ISEQ_REQUEST( uParam0 );
        ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
        if (iParam1 == 1)
        {
            while ((ISEQ_QUERY_STATE( uParam0, 1 )) == 1)
            {
                DISPLAYF( "[SP]### Waiting for interactive sequence to be loaded: {0} {1} ###", 2, 1281, ref uVar4, 513, uParam0 );
                WAIT( 0 );
            }
        }
    }
    return;
}

/* LOADAUDIOBANK */ void sub_17312(unknown uParam0, int iParam1)
{
    LOAD_SCRIPT_AUDIO_BANK( uParam0 );
    if (iParam1 == 1)
    {
        while ((IS_SCRIPT_AUDIO_BANK_LOADED( uParam0, 0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for script audio bank to be loaded: {} ###", 1, 1537, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADSCRIPTSTREAM */ void sub_17509(unknown uParam0, unknown uParam1, int iParam2)
{
    if (iParam2 == 0)
    {
        REQUEST_SCRIPT_STREAM( uParam0, uParam1 );
    }
    else
    {
        while ((LOAD_SCRIPT_STREAM( uParam0, uParam1 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for script stream to be loaded: {} : {} ###", 2, 1537, uParam0, 513, uParam1 );
            WAIT( 0 );
        }
    }
    return;
}

/* F_HAVE_ASSETS_LOADED */ int sub_17779()
{
    if (g_U665 < 1)
    {
        if ((CUTSCENE_IS_LOADED( ref l_U744 )) == 1)
        {
             /* WRITESCRIPTLOG */ sub_821( "SP", "Opening cutscene loaded...", 0 );
        }
        else
        {
            return 0;
        }
    }
    if (((HAS_MODEL_LOADED( 410241322 )) == 1) AND (((HAS_MODEL_LOADED( 1926445048 )) == 1) AND (((HAS_MODEL_LOADED( 22502157 )) == 1) AND (((HAS_MODEL_LOADED( 1683467108 )) == 1) AND (((HAS_MODEL_LOADED( 1185415992 )) == 1) AND (((HAS_MODEL_LOADED( -1329128487 )) == 1) AND ((HAS_MODEL_LOADED( -2119961670 )) == 1)))))))
    {
         /* WRITESCRIPTLOG */ sub_821( "SP", "Models loaded...", 0 );
        if (((HAS_ANIM_DICT_LOADED( ref l_U712, 0 )) == 1) AND ((HAS_ANIM_DICT_LOADED( ref l_U720, 0 )) == 1))
        {
             /* WRITESCRIPTLOG */ sub_821( "SP", "Anim Dicts loaded...", 0 );
            if ((IS_ACTION_TREE_LOADED( ref l_U784 )) == 1)
            {
                 /* WRITESCRIPTLOG */ sub_821( "SP", "Action Tree loaded...", 0 );
                if (((ISEQ_QUERY_STATE( -1490441288, 2 )) == 1) AND (((ISEQ_IS_LOADED( -1490441288 )) == 1) AND (((ISEQ_QUERY_STATE( 1159597124, 2 )) == 1) AND (((ISEQ_IS_LOADED( 1159597124 )) == 1) AND (((ISEQ_QUERY_STATE( -211988314, 2 )) == 1) AND (((ISEQ_IS_LOADED( -211988314 )) == 1) AND (((ISEQ_QUERY_STATE( -654795811, 2 )) == 1) AND ((ISEQ_IS_LOADED( -654795811 )) == 1))))))))
                {
                     /* WRITESCRIPTLOG */ sub_821( "SP", "ISeq's loaded and ready...", 0 );
                    if (((IS_SCRIPT_AUDIO_BANK_LOADED( ref l_U752, 0 )) == 1) AND ((IS_SCRIPT_AUDIO_BANK_LOADED( ref l_U768, 0 )) == 1))
                    {
                         /* WRITESCRIPTLOG */ sub_821( "SP", "Audio Bank's loaded...", 0 );
                        if (((LOAD_SCRIPT_STREAM( ref l_U1045, 2 )) == 1) AND (((LOAD_SCRIPT_STREAM( ref l_U1029, 1 )) == 1) AND ((LOAD_SCRIPT_STREAM( ref l_U1013, 0 )) == 1)))
                        {
                             /* WRITESCRIPTLOG */ sub_821( "SP", "Script Streams loaded...", 0 );
                            return 1;
                        }
                    }
                }
            }
        }
    }
    return 0;
}

/* P_SETUP_MOBILE_MODELS */ void sub_18630()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_SETUP_MOBILE_MODELS", 0 );
    l_U1006 =  /* CREATEOBJECTNOOFFSET */ sub_18729( -2119961670, -987.83600000, 31.47200000, 1.72500000, 0, 0, 0, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U1006 ))
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1006, ref g_U1121 );
        FREEZE_OBJECT_POSITION( l_U1006, 1 );
        SET_OBJECT_VISIBLE( l_U1006, 0 );
    }
    l_U1007 =  /* CREATEOBJECTNOOFFSET */ sub_18729( -1329128487, 64559, 34, 9, 0, 0, 0, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U1007 ))
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1007, ref g_U1121 );
        FREEZE_OBJECT_POSITION( l_U1007, 1 );
    }
    l_U1008 =  /* CREATEOBJECTNOOFFSET */ sub_18729( 1185415992, 64554, 35, 8, 0, 0, 0, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U1008 ))
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1008, ref g_U1121 );
        FREEZE_OBJECT_POSITION( l_U1008, 1 );
    }
    l_U1009 =  /* CREATEOBJECTNOOFFSET */ sub_18729( 1683467108, 64555, 39, 8, 0, 0, 0, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U1009 ))
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1009, ref g_U1121 );
        FREEZE_OBJECT_POSITION( l_U1009, 1 );
    }
    l_U1010 =  /* CREATEOBJECTNOOFFSET */ sub_18729( 22502157, 64559, 34, 9, 0, 0, 0, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U1010 ))
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1010, ref g_U1121 );
        FREEZE_OBJECT_POSITION( l_U1010, 1 );
    }
    l_U1011 =  /* CREATEOBJECTNOOFFSET */ sub_18729( 1926445048, 64554, 35, 8, 0, 0, 0, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U1011 ))
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1011, ref g_U1121 );
        FREEZE_OBJECT_POSITION( l_U1011, 1 );
    }
    l_U1012 =  /* CREATEOBJECTNOOFFSET */ sub_18729( 410241322, 64554, 35, 8, 0, 0, 0, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U1012 ))
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1012, ref g_U1121 );
        FREEZE_OBJECT_POSITION( l_U1012, 1 );
    }
    return;
}

/* CREATEOBJECTNOOFFSET */ void sub_18729(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_16323( uParam0, 1 );
    }
    Result = CREATE_OBJECT_NO_OFFSET( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an object to exist: {!f1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

/* P_SETUP_MAX */ void sub_19592()
{
    unknown uVar2;
    unknown uVar3;

     /* WRITESCRIPTLOG */ sub_821( "SA", "P_SETUP_MAX", 0 );
     /* P_STOP_COUGHING_TIMER */ sub_4803();
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
    {
         /* TELEPORTPED */ sub_19686(  /* PLAYER_PED_ID */ sub_1355(), g_U751[1], g_U851[1] );
        SET_PED_PROOFS(  /* PLAYER_PED_ID */ sub_1355(), 0, 0, 0, 0, 0 );
        SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_1355(), 1 );
        SET_FOOT_STEP_AUDIO_MOVEMENT(  /* PLAYER_PED_ID */ sub_1355(), 1 );
        REMOVE_ALL_PED_WEAPONS(  /* PLAYER_PED_ID */ sub_1355() );
        SET_CAM_VIEW_MODE( 0 );
        AUDIO_SET_PED_FOOTSTEPS_VOLUME(  /* PLAYER_PED_ID */ sub_1355(), g_U1588 );
        if (( /* HAS_SAVEFILE_LOADED */ sub_19841( ref l_U466 )) == 0)
        {
            SET_PED_HEALTH(  /* PLAYER_PED_ID */ sub_1355(), g_U1595, 0 );
        }
    }
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U885[1], 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U919[1], 1065353216, 0 );
    SET_ADRENALINE_AMT( 1.00000000 );
    SET_PAYNEKILLER_AMT( 0 );
    SET_ADRENALINE_NOT_ALLOW( 1 );
    CAMERA_USE_HANDY_CAM( 1, 5.00000000, 1 );
    SET_CAMERA_OVERRIDE( "s_office_fire_loco", "s_office_fire_loco", 0, 1, 1 );
    DISPLAY_HUD( 0 );
    uVar2 = GET_HASH_KEY( ref g_U1121 );
    uVar3 = GET_INTERIOR_FROM_NAME( ref g_U1081, 0 );
    SET_INTERIOR_ACTIVE( uVar3, 1, 0 );
    LOAD_SCENE_FOR_ROOM_BY_KEY( uVar3, uVar2 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
    {
        if (IS_ACTION_TREE_LOADED( ref l_U784 ))
        {
            PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1355(), "/Global/S_OFF_INJ1/S_OFF_INJ1/S_OFF_INJ" );
        }
    }
    return;
}

/* TELEPORTPED */ void sub_19686(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

/* HAS_SAVEFILE_LOADED */ int sub_19841(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_821( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U0 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U1 );
             /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_5983( uParam0,  /* PLAYER_PED_ID */ sub_1355() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

/* F_HANDLE_OPENING_CUTSCENE */ int sub_20518()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;

    switch (l_U462)
    {
        case 0: break;
        case 1:
         /* WRITESCRIPTLOG */ sub_821( "SP", "eOpeningCutsceneState = CUTSCENE_SETUP", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "OFFICE_ACTION_SONG_02", "OFFICE_ACTION_2_4", "", 0.00000000, 0, 0, -1082130432, 0 );
        DO_SCREEN_FADE_IN( 0 );
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )) == 0)
        {
            ISEQ_UNREGISTER_ENTITY( 1159597124, "player" );
            ISEQ_REGISTER_ENTITY( 1159597124, "player",  /* PLAYER_PED_ID */ sub_1355(), 0 );
            CUTSCENE_REGISTER_ISEQ( 1159597124 );
            CUTSCENE_REGISTER_PED_TELEPORT(  /* PLAYER_PED_ID */ sub_1355(), -982.86000000, 23.79000000, -0.42000000, -43.30000000 );
        }
        CUTSCENE_ENABLE_SKIP( 0 );
        CUTSCENE_SET_WAIT_FOR_MOVIE( 9 );
        l_U462 = 2;
         /* WRITESCRIPTLOG */ sub_821( "SP", "eOpeningCutsceneState = CUTSCENE_WAIT_FOR_HANDOFF", 0 );
        break;
        case 2:
        if (IS_TRANSITION_MOVIE_PLAYING() == 0)
        {
            l_U462 = 5;
             /* WRITESCRIPTLOG */ sub_821( "SP", "eOpeningCutsceneState = CUTSCENE_PLAYING", 0 );
            break;
        }
        return 0;
        case 5:
        if (HAS_CUTSCENE_FINISHED() == 1)
        {
            if (((CUTSCENE_NAMED_IS_LOADING( ref l_U744 )) == 1) || ((CUTSCENE_IS_LOADED( ref l_U744 )) == 1))
            {
                CLEAR_NAMED_CUTSCENE( ref l_U744 );
            }
             /* P_MID_10_BLENDOUT */ sub_21077();
            l_U462 = 0;
             /* WRITESCRIPTLOG */ sub_821( "SP", "eOpeningCutsceneState = CUTSCENE_IDLE", 0 );
            return 1;
        }
        else
        {
            uVar2 = GET_CUTSCENE_SECTION_PLAYING();
            uVar3 = GET_CUTSCENE_TIME();
            uVar4 = GET_CUTSCENE_TIME_MS();
            PRINTSTRING( "[SP] SECTION: " );
            PRINTINT( uVar2 );
            PRINTSTRING( " Time: " );
            PRINTINT( uVar3 );
            PRINTSTRING( " Time MS: " );
            PRINTINT( uVar4 );
            PRINTNL();
        }
        break;
    }
    return 0;
}

/* P_MID_10_BLENDOUT */ void sub_21077()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_MID_10_BLENDOUT", 0 );
    if (NOT (ISEQ_QUERY_STATE( 1159597124, 3 )))
    {
        ISEQ_UNREGISTER_ENTITY( 1159597124, "player" );
        ISEQ_REGISTER_ENTITY( 1159597124, "player",  /* PLAYER_PED_ID */ sub_1355(), 0 );
         /* TELEPORTPED */ sub_19686(  /* PLAYER_PED_ID */ sub_1355(), -982.86000000, 23.79000000, -0.42000000, -43.30000000 );
        ISEQ_START( 1159597124 );
    }
    CAMERA_PLAY_ANIMATED( ref l_U712, "MID_10_OFFICE_BLENDOUT_CAM", 1, -984.34000000, 23.14700000, 0.28700000, 5.00000000, 0, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 40.65768000, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( 0.00000000, 1065353216, 0 );
     /* STARTTIMER */ sub_2552( ref l_U908 );
    return;
}

/* P_START_GAMEPLAY */ void sub_21707()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_START_GAMEPLAY", 0 );
    AUDIO_MUSIC_FORCE_TRACK( "OFFICE_ACTION_SONG_02", "OFFICE_ACTION_2_4", "", 0.00000000, 0, 0, -1082130432, 0 );
    g_U665 = 1;
    if (l_U962)
    {
         /* WRITESCRIPTLOG */ sub_821( "SA", "Saving checkpoint", 0 );
         /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_21928( ref l_U466, g_U665,  /* PLAYER_PED_ID */ sub_1355(), g_U751[1], g_U851[1], g_U885[1], g_U919[1], 0 );
        l_U962 = 0;
    }
    return;
}

/* P_SAVE_PLAYER_DATA_CHECKPOINT */ void sub_21928(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

     /* WRITESCRIPTLOG */ sub_821( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
         /* WRITESCRIPTLOG */ sub_821( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
         /* START_NEW_LEVEL_CONTEXT */ sub_9249( iParam1 );
         /* CLOSE_OLD_LEVEL_CONTEXT */ sub_22219( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_22696( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_22696( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22956( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_22696( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22956( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22956( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_22696( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22956( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22956( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22956( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_22696( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22956( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22956( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22956( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_22956( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
             /* P_PRINT_CHECKPOINT_DATA */ sub_24536( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U1, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
     /* WRITESCRIPTLOG */ sub_821( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

/* CLOSE_OLD_LEVEL_CONTEXT */ void sub_22219(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_6264( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
         /* WRITESCRIPTLOG */ sub_821( "TEH", "Ending context", 0 );
         /* WRITESCRIPTLOG */ sub_821( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

/* P_SAVE_WEAPON_ATTACHMENTS */ void sub_22696(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

/* F_WEAPONS_SAME_AMMO */ void sub_22956(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

/* P_PRINT_CHECKPOINT_DATA */ void sub_24536(int iParam0)
{
     /* WRITE_STRING */ sub_8084( "CHECKPOINT DATA" );
    PRINTSTRING( "---Position: " );
     /* WRITE_VECTOR */ sub_24624( iParam0->_fU4 );
    PRINTSTRING( "---Heading: " );
     /* WRITE_FLOAT */ sub_24701( iParam0->_fU16 );
    PRINTSTRING( "---fRelativeGameCamHeading: " );
     /* WRITE_FLOAT */ sub_24701( iParam0->_fU20 );
    PRINTSTRING( "---fRelativeGameCamPitch: " );
     /* WRITE_FLOAT */ sub_24701( iParam0->_fU24 );
    PRINTSTRING( "---nHealth: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU28 );
    PRINTSTRING( "---wtRightHolster: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU56 );
    PRINTSTRING( "---wtLeftHolster: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU60 );
    PRINTSTRING( "---wtRifleHolster: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU64 );
    PRINTSTRING( "---wtRightHand: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU68 );
    PRINTSTRING( "---wtLeftHand: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU72 );
    PRINTSTRING( "---nWeaponRightHolsterAmmo: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU76 );
    PRINTSTRING( "---nWeaponLeftHolsterAmmo: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU80 );
    PRINTSTRING( "---nWeaponRifleHolsterAmmo: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU84 );
    PRINTSTRING( "---nWeaponRightHandAmmo: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU88 );
    PRINTSTRING( "---nWeaponLeftHandAmmo: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU92 );
    PRINTSTRING( "---fAdrenaline: " );
     /* WRITE_FLOAT */ sub_24701( iParam0->_fU32 );
    PRINTSTRING( "---nPayneKillers: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU36 );
    PRINTSTRING( "---nHour: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU40 );
    PRINTSTRING( "---nMinute: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU44 );
    PRINTSTRING( "---fSweatAmount: " );
     /* WRITE_FLOAT */ sub_24701( iParam0->_fU136 );
    PRINTSTRING( "---bTimeFrozen: " );
     /* WRITE_BOOL */ sub_25571( iParam0->_fU140 );
    PRINTSTRING( "---checkpointIndex: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU52 );
     /* WRITE_STRING */ sub_8084( "---nRightHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU96 );
     /* WRITE_STRING */ sub_8084( "---nRightHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU100 );
     /* WRITE_STRING */ sub_8084( "---nLeftHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU104 );
     /* WRITE_STRING */ sub_8084( "---nLeftHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU108 );
     /* WRITE_STRING */ sub_8084( "---nRifleHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU112 );
     /* WRITE_STRING */ sub_8084( "---nRifleHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU116 );
     /* WRITE_STRING */ sub_8084( "---nRightHandAttachmentEnabled: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU120 );
     /* WRITE_STRING */ sub_8084( "---nRightHandAttachmentToggled: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU124 );
     /* WRITE_STRING */ sub_8084( "---nLeftHandAttachmentEnabled: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU128 );
     /* WRITE_STRING */ sub_8084( "---nLeftHandAttachmentToggled: " );
     /* WRITE_INT */ sub_24870( iParam0->_fU132 );
    PRINTSTRING( "[CHECKPOINT DATA SIZE]: " );
     /* WRITE_INT */ sub_24870( l_U1 );
    PRINTSTRING( "[CHECKPOINT DATA REF SIZE]: " );
     /* WRITE_INT */ sub_24870( 144 );
    return;
}

/* WRITE_VECTOR */ void sub_24624(unknown uParam0, unknown uParam1, unknown uParam2)
{
    PRINTVECTOR( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_FLOAT */ void sub_24701(unknown uParam0)
{
    PRINTFLOAT( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_INT */ void sub_24870(unknown uParam0)
{
    PRINTINT( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_BOOL */ void sub_25571(boolean bParam0)
{
    if (bParam0)
    {
        PRINTSTRING( "TRUE" );
    }
    else
    {
        PRINTSTRING( "FALSE" );
    }
    PRINTNL();
    return;
}

/* P_HANDLE_MID_10_CAM */ void sub_26611()
{
    switch (l_U463)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_821( "SA", "mid10State = MID_10_NOT_STARTED", 0 );
         /* P_MID_10_BLENDOUT */ sub_21077();
        l_U463 = 1;
         /* WRITESCRIPTLOG */ sub_821( "SA", "mid10State = MID_10_STARTED", 0 );
        break;
        case 1:
        if ((IS_DEATH_PANEL_WIPE_ALLOWED()) || (NOT IS_SCREEN_FADED_IN()))
        {
            if (ISEQ_QUERY_STATE( 1159597124, 3 ))
            {
                DO_SCREEN_FADE_IN( 0 );
            }
        }
        if (ISEQ_QUERY_STATE( 1159597124, 6 ))
        {
            if ( /* ISTIMERDONE */ sub_1747( ref l_U908 ))
            {
                 /* P_RESET_COUGHING_TIMER */ sub_26860();
                DISPLAY_HUD( 1 );
                PLAY_IMAGEFX( "FLICKER_VIBRATE_LONG", 4, 0 );
                PLAY_IMAGEFX( "FLICKER_VIBRATE_LONG", 4, 0 );
                l_U463 = 2;
                 /* WRITESCRIPTLOG */ sub_821( "SA", "mid10State = MID_10_COMPLETE", 0 );
            }
        }
        break;
        case 2:
        if (IS_ANIMATED_CAMERA_PLAYING() == 1)
        {
            if (CAMERA_ANIMATED_CURRENT_TIME() >= 8000)
            {
                SET_GAMEPLAY_CAM_RELATIVE_HEADING( 40.65768000, 1065353216, 0 );
                SET_GAMEPLAY_CAM_RELATIVE_PITCH( 0.00000000, 1065353216, 0 );
                CAMERA_ANIMATED_STOP( 4000, 1 );
                l_U463 = 3;
                g_U747 = 1;
                 /* P_RESET_COUGHING_TIMER */ sub_26860();
            }
        }
        break;
    }
    return;
}

/* P_RESET_COUGHING_TIMER */ void sub_26860()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_RESET_COUGHING_TIMER", "###" );
    g_U1585 = 1;
    g_U1587 = 1;
    l_U267 = 0;
    l_U266 = 3;
    l_U268 = 1;
    return;
}

/* P_HANDLE_PARTICLE_FX */ void sub_27208()
{
    if (NOT l_U959)
    {
        if (IS_SCREEN_FADED_IN())
        {
             /* STARTTIMER */ sub_2552( ref l_U899 );
        }
        if ( /* ISTIMERDONE */ sub_1747( ref l_U899 ))
        {
             /* WRITESCRIPTLOG */ sub_821( "SA", "Triggering Rods Explosion", 0 );
            START_PARTICLE_FX_NON_LOOPED_AT_COORD( "OF_PaperBlast_S", -981.00000000, 30.00000000, 3.50000000, 0, 0, 0, 1065353216 );
            START_PARTICLE_FX_NON_LOOPED_AT_COORD( "OF_GlassBreak_S", -977.00000000, 29.00000000, 4.00000000, 0, 0, 0, 2.00000000 );
            START_PARTICLE_FX_NON_LOOPED_AT_COORD( "OF_GlassBreak_S", -979.00000000, 29.00000000, 4.00000000, 0, 0, 0, 2.00000000 );
            l_U959 = 1;
        }
    }
    if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_27496( ref l_U523, 0 ))
    {
        PLAY_OBJECT_ANIM( l_U1007, "P_AN_MOBCAG_AA_H", "of_mobile", 0.00000000, 0, 1 );
        PLAY_OBJECT_ANIM( l_U1010, "P_AN_MOBCAG_AD_H", "of_mobile", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U1007, "P_AN_MOBCAG_AA_H", "of_mobile", 1.35000000 );
        SET_OBJECT_ANIM_SPEED( l_U1010, "P_AN_MOBCAG_AD_H", "of_mobile", 1.35000000 );
        PLAY_SCRIPT_STREAM_FROM_COORD( -975.48900000, 37.10200000, 2.10200000, 0 );
        TRIGGER_EXPLOSION_AUDIO_MIX_LAYER( "S_FIRE_EXP_MOBILE_WARNING", -975.48900000, 37.10200000, 2.10200000 );
         /* STARTTIMER */ sub_2552( ref l_U800 );
         /* STARTTIMER */ sub_2552( ref l_U809 );
         /* STARTTIMER */ sub_2552( ref l_U818 );
         /* STARTTIMER */ sub_2552( ref l_U827 );
    }
    if ( /* ISTIMERDONE */ sub_1747( ref l_U800 ))
    {
        PLAY_OBJECT_ANIM( l_U1009, "P_AN_MOBCAG_AC_H", "of_mobile", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U1009, "P_AN_MOBCAG_AC_H", "of_mobile", 1.35000000 );
    }
    if ( /* ISTIMERDONE */ sub_1747( ref l_U809 ))
    {
        START_PARTICLE_FX_NON_LOOPED_AT_COORD( "OF_mobile_collaspe_S", -975.57000000, 34.05000000, -0.03000000, 0.00000000, 0.00000000, 0.00000000, 0.50000000 );
        SHAKE_GAMEPLAY_CAM( "SMALL_EXPLOSION_SHAKE", 0.09000000 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -977.53000000, 28.72000000, 1.93000000, -977.53000000, 30.72000000, 1.93000000, 0, 1, -1464892298, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -977.56000000, 28.72000000, 0.23000000, -977.56000000, 30.72000000, 0.23000000, 0, 1, -1464892298, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -976.54000000, 28.72000000, 1.54000000, -976.54000000, 30.72000000, 1.54000000, 0, 1, -1464892298, 0 );
    }
    if ( /* ISTIMERDONE */ sub_1747( ref l_U818 ))
    {
        START_PARTICLE_FX_NON_LOOPED_AT_COORD( "OF_mobile_collaspe_S", -978.10000000, 33.89000000, -0.03000000, 0.00000000, 0.00000000, 0.00000000, 0.50000000 );
        SHAKE_GAMEPLAY_CAM( "SMALL_EXPLOSION_SHAKE", 0.09000000 );
    }
    if ( /* ISTIMERDONE */ sub_1747( ref l_U827 ))
    {
        START_PARTICLE_FX_NON_LOOPED_AT_COORD( "OF_mobile_collaspe_S", -980.80000000, 36.35000000, 0.36000000, 0.00000000, 0.00000000, 0.00000000, 0.80000000 );
        SHAKE_GAMEPLAY_CAM( "SMALL_EXPLOSION_SHAKE", 0.12000000 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -982.30000000, 28.72000000, 2.66000000, -982.30000000, 30.72000000, 2.66000000, 0, 1, -1464892298, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -983.13000000, 28.72000000, 1.46000000, -983.13000000, 30.72000000, 1.46000000, 0, 1, -1464892298, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -982.34000000, 28.72000000, 0.38000000, -982.34000000, 30.72000000, 0.38000000, 0, 1, -1464892298, 0 );
    }
    return;
}

/* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ void sub_27496(int iParam0, unknown uParam1)
{
    if (iParam0->_fU64 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU64 =  /* F_ISPEDINTRIGGERBOX */ sub_27572(  /* PLAYER_PED_ID */ sub_1355(), (iParam0^) );
        if ((iParam0->_fU64) AND (uParam1))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU64;
}

/* F_ISPEDINTRIGGERBOX */ int sub_27572(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, ref uParam1._fU0 );
    }
    return 0;
}

/* P_HANDLE_WALL_LEAN */ void sub_28763()
{
    switch (l_U464)
    {
        case 0:
        if (GET_PED_REACHED_TARGETED_GRAVWELL_CENTER(  /* PLAYER_PED_ID */ sub_1355(), "s_office_fireatrium_gravitywells", "fireatriumleanwall01Left", 1 ))
        {
            l_U464 = 1;
        }
        else if (GET_PED_REACHED_TARGETED_GRAVWELL_CENTER(  /* PLAYER_PED_ID */ sub_1355(), "s_office_fireatrium_gravitywells", "fireatriumleanwall01Right", 1 ))
        {
            l_U464 = 2;
        }
        break;
        case 1:
         /* P_TRIGGER_WALL_LEAN */ sub_29046( 1 );
        l_U464 = 3;
        break;
        case 2:
         /* P_TRIGGER_WALL_LEAN */ sub_29046( 0 );
        l_U464 = 4;
        break;
        case 3:
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            if (NOT l_U963)
            {
                if (CAMERA_ANIMATED_CURRENT_TIME() > 1500)
                {
                     /* P_PLAY_SOFF_MSTRCDA */ sub_30044();
                    l_U963 = 1;
                }
            }
            if (CAMERA_ANIMATED_CURRENT_TIME() > 6000)
            {
                l_U464 = 5;
            }
        }
        break;
        case 4:
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            if (NOT l_U963)
            {
                if (CAMERA_ANIMATED_CURRENT_TIME() > 1500)
                {
                     /* P_PLAY_SOFF_MSTRCDA */ sub_30044();
                    l_U963 = 1;
                }
            }
            if (CAMERA_ANIMATED_CURRENT_TIME() > 6000)
            {
                l_U464 = 6;
            }
        }
        break;
        case 5:
         /* WRITESCRIPTLOG */ sub_821( "SA", "WALL_LEAN_COMPLETE_LEFT", 0 );
         /* P_RESET_COUGHING_TIMER */ sub_26860();
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( 91.19009000, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( -5.47168400, 1065353216, 0 );
        CAMERA_ANIMATED_STOP( 1000, 1 );
        l_U464 = 7;
        break;
        case 6:
         /* WRITESCRIPTLOG */ sub_821( "SA", "WALL_LEAN_COMPLETE_RIGHT", 0 );
         /* P_RESET_COUGHING_TIMER */ sub_26860();
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( 47.38946000, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( -5.47168400, 1065353216, 0 );
        CAMERA_ANIMATED_STOP( 1000, 1 );
        l_U464 = 7;
        break;
    }
    return;
}

/* P_TRIGGER_WALL_LEAN */ void sub_29046(boolean bParam0)
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_TRIGGER_WALL_LEAN", 0 );
    ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "fireatriumleanwall01Left", 0, 0, 0, 0 );
    ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "fireatriumleanwall01Right", 0, 0, 0, 0 );
     /* P_STOP_COUGHING_TIMER */ sub_4803();
     /* P_INITIALIZE_IMAGEFX_EFFECTS_02 */ sub_29263();
    if (bParam0)
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
        {
            SET_PED_SYNC_POINT(  /* PLAYER_PED_ID */ sub_1355(), -980.47700000, 28.81000000, -0.02300000, 0.00000000 );
            PED_SET_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_1355(), 47, 1000, 0.00000000, 0.00000000, 0.00000000 );
        }
        CAMERA_PLAY_ANIMATED( ref l_U712, "VIG_15_OFF_WALL_REST_LFT_CAM", 0, -980.95000000, 24.78000000, 1.61000000, 0.00000000, 1, 1000 );
    }
    else if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
    {
        SET_PED_SYNC_POINT(  /* PLAYER_PED_ID */ sub_1355(), -978.46000000, 28.04600000, 1.01400000, 0.00000000 );
        PED_SET_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_1355(), 48, 1000, 0.00000000, 0.00000000, 0.00000000 );
    }
    CAMERA_PLAY_ANIMATED( ref l_U712, "VIG_15_OFF_WALL_REST_CAM", 0, -981.05000000, 24.78000000, 1.61000000, 0.00000000, 1, 1000 );;
    return;
}

/* P_INITIALIZE_IMAGEFX_EFFECTS_02 */ void sub_29263()
{
     /* WRITESCRIPTLOG */ sub_821( "CO", "P_INITIALIZE_ImageFX_EFFECTS02", 0 );
     /* P_INIT_IMAGEFX */ sub_29355( ref l_U1061 );
    l_U1061[0]._fU4 = "TRIPLE_INTERLACE_COLOR_FAST";
    l_U1061[0]._fU32 = 0;
    l_U1061[0]._fU20 = 1;
    l_U1061[0]._fU8 = 4;
    l_U1061[1]._fU4 = "FLASH_GREEN";
    l_U1061[1]._fU32 = 0;
    l_U1061[1]._fU8 = 4;
    l_U457 = 0;
    return;
}

/* P_INIT_IMAGEFX */ void sub_29355(unknown uParam0)
{
    int I;

     /* WRITESCRIPTLOG */ sub_821( "CO", "P_INIT_IMAGEFX", 0 );
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        (uParam0^)[I]._fU4 = "";
        (uParam0^)[I]._fU12 = 0;
        (uParam0^)[I]._fU16 = 0;
        (uParam0^)[I]._fU20 = 0;
        (uParam0^)[I]._fU24 = 0;
        (uParam0^)[I]._fU28 = 0;
        (uParam0^)[I]._fU32 = 1;
    }
    return;
}

/* P_PLAY_SOFF_MSTRCDA */ void sub_30044()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_PLAY_SOFF_MSTRCDA", 0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
    {
        if (NOT (IS_SCRIPTED_SPEECH_PLAYING(  /* PLAYER_PED_ID */ sub_1355() )))
        {
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_30149( ref l_U279 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_30260( 0,  /* PLAYER_PED_ID */ sub_1355(), "MAX", ref l_U279, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_30260( 1,  /* PLAYER_PED_ID */ sub_1355(), "MAX", ref l_U279, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_30530( "SOFF_MSTRCDA", ref l_U279, 2, 1 );
        }
    }
    return;
}

/* RESET_SCRIPT_SPEECH_STRUCT */ void sub_30149(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

/* ADD_PED_FOR_SCRIPT_SPEECH */ void sub_30260(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

/* PLAY_SINGLE_SPEECH */ void sub_30530(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return  /* PLAY_SINGLE_SPEECH_FROM_BLOCK */ sub_30575( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

/* PLAY_SINGLE_SPEECH_FROM_BLOCK */ void sub_30575(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return  /* PLAYSPEECHMAIN */ sub_30662( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

/* PLAYSPEECHMAIN */ int sub_30662(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT ( /* CANTHISSPEECHBEPLAYED */ sub_30714( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
     /* COPYHIDDENSPEECHSTUCT */ sub_31232( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

/* CANTHISSPEECHBEPLAYED */ int sub_30714(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

/* COPYHIDDENSPEECHSTUCT */ void sub_31232(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

/* P_HANDLE_STAIR_CLIMB */ void sub_31757()
{
    vector vVar2;
    vector vVar5;
    vector vVar8;
    vector vVar11;
    int I;

    vVar2 = {-989.55000000, 34.70000000, 2.35000000};
    vVar5 = {-983.11000000, 36.43000000, 4.70000000};
    vVar8 = {-978.68000000, 35.87000000, -0.03000000};
    vVar11 = {-971.14000000, 36.06000000, 6.50000000};
    if ((NOT l_U961) AND ( /* F_ISPLAYERINTRIGGERBOX */ sub_31875( l_U544 )))
    {
         /* WRITESCRIPTLOG */ sub_821( "SA", "Enabling Grav well - fireatriumleanwall02", 0 );
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "fireatriumleanwall02", 1, 0, 0, 0 );
        l_U961 = 1;
    }
    else if ((l_U961) AND (NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_31875( l_U544 ))))
    {
         /* WRITESCRIPTLOG */ sub_821( "SA", "Disabling Grav well - fireatriumleanwall02", 0 );
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "fireatriumleanwall02", 0, 0, 0, 0 );
        l_U961 = 0;
    }
    switch (l_U465)
    {
        case 0:
        if (GET_PED_REACHED_TARGETED_GRAVWELL_CENTER(  /* PLAYER_PED_ID */ sub_1355(), "s_office_fireatrium_gravitywells", "fireatriumleanwall02", 1 ))
        {
             /* P_TRIGGER_STAIR_CLIMB */ sub_32368();
            l_U465 = 1;
        }
        break;
        case 1:
        if (DOES_CAM_EXIST( l_U955 ))
        {
            if (NOT (IS_CAM_ACTIVE( l_U955 )))
            {
                if (3 == (PED_GET_ACTION_INTENTION_STATUS(  /* PLAYER_PED_ID */ sub_1355(), 48 )))
                {
                     /* P_INITIALIZE_IMAGEFX_EFFECTS_04 */ sub_33006();
                    ATTACH_CAM_TO_PED( l_U955,  /* PLAYER_PED_ID */ sub_1355(), -0.50000000, 1.80000000, 0.36000000, 1 );
                    SET_CAM_ROT( l_U955, 11.25420000, -0.00008100, -45.92053000 );
                    SET_CAM_FOV( l_U955, 45.00000000 );
                    SET_CAM_ACTIVE( l_U955, 1 );
                    RENDER_SCRIPT_CAMS( 1, 0, 1000, 1 );
                    SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1393(), 1, 256 );
                     /* P_PLAY_SOFF_MGUTSTRA */ sub_33443();
                }
            }
        }
        if (3 == (PED_GET_ACTION_INTENTION_STATUS(  /* PLAYER_PED_ID */ sub_1355(), 49 )))
        {
            if ((NOT l_U863._fU16) AND (NOT l_U863._fU20))
            {
                 /* STARTTIMER */ sub_2552( ref l_U863 );
                PED_SET_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_1355(), 51, 1000, 0, 0, 0 );
            }
        }
        else
        {
             /* RESETTIMER */ sub_3091( ref l_U863 );
        }
        if ((g_U1584) AND ( /* ISTIMERDONE */ sub_1747( ref l_U863 )))
        {
            PLAY_OBJECT_ANIM( l_U1008, "P_AN_MOBCAG_AB_H", "of_mobile", 0.00000000, 0, 1 );
            PLAY_OBJECT_ANIM( l_U1011, "P_AN_MOBCAG_AE_H", "of_mobile", 0.00000000, 0, 1 );
            PLAY_OBJECT_ANIM( l_U1012, "P_AN_MOBCAG_AF_H", "of_mobile", 0.00000000, 0, 1 );
            BULLET_CAMERA_PRELOAD_TEXT_BINK( "S_OFFICE_MOBILE_FAIL", 1 );
            l_U954 = CREATE_CAM( "DEFAULT_BULLET_CAMERA", 1 );
            SETUP_BULLET_CAMERA_SCENE( l_U954, "S_OFFICE_MOBILE_FAIL", vVar2, vVar5, vVar8, 0.00000000, 0.00000000, 0.00000000, vVar11, 0.00000000, 0.00000000, 0.00000000, "", "" );
            SET_CAM_ACTIVE( l_U954, 1 );
            RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
            PLAY_SCRIPT_STREAM_FROM_COORD( -985.71000000, 31.35000000, 1.07000000, 2 );
            TRIGGER_EXPLOSION_AUDIO_MIX_LAYER( "S_FIRE_EXP_MOBILE_FAIL", -985.71000000, 31.35000000, 1.07000000 );
             /* STARTTIMER */ sub_2552( ref l_U881 );
            l_U465 = 2;
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_27496( ref l_U502, 0 ))
        {
             /* WRITESCRIPTLOG */ sub_821( "SA", "Max is falling", 0 );
             /* P_INITIALIZE_IMAGEFX_EFFECTS_10 */ sub_34211();
             /* RESETTIMER */ sub_3091( ref l_U863 );
            if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )) == 0)
            {
                PED_SET_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_1355(), 47, 1000, 0.00000000, 0.00000000, 0.00000000 );
            }
             /* STARTTIMER */ sub_2552( ref l_U872 );
            l_U465 = 3;
        }
        break;
        case 2:
        if ( /* ISTIMERDONE */ sub_1747( ref l_U881 ))
        {
             /* WRITESCRIPTLOG */ sub_821( "SA", "tmrStairDeath", 0 );
            SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1393(), 0, 256 );
            DISPLAY_HUD( 0 );
             /* KILL_ANY_MISSION_SPEECH */ sub_3578( 0 );
             /* KILL_ANY_AMBIENT_SPEECH */ sub_3778( 0 );
             /* P_STOP_COUGHING_TIMER */ sub_4803();
            TASK_PLAY_ANIM(  /* PLAYER_PED_ID */ sub_1355(), "Dam_ko", "ko_collapse", 4.00000000, -8.00000000, -1, 64 );
             /* STARTTIMER */ sub_2552( ref l_U890 );
        }
        if ( /* ISTIMERDONE */ sub_1747( ref l_U890 ))
        {
             /* WRITESCRIPTLOG */ sub_821( "SA", "tmrStairDeathCam", 0 );
            g_U743 = CREATE_CAM( "DEFAULT_BULLET_CAMERA", 1 );
            SETUP_BULLET_CAMERA_SCENE( g_U743, "MISS_DEATH_FALL_01A", 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, "", "" );
            SET_CAM_ACTIVE( l_U954, 0 );
            SET_CAM_ACTIVE( g_U743, 1 );
            l_U964 = 1;
            l_U465 = 6;
        }
        break;
        case 3:
        if ( /* ISTIMERDONE */ sub_1747( ref l_U872 ))
        {
            BULLET_CAMERA_PRELOAD_TEXT_BINK( "S_OFFICE_MOBILE", 1 );
            l_U953 = CREATE_CAM( "DEFAULT_BULLET_CAMERA", 1 );
            SETUP_BULLET_CAMERA_SCENE( l_U953, "S_OFFICE_MOBILE", vVar2, vVar5, vVar8, 0.00000000, 0.00000000, 0.00000000, vVar11, 0.00000000, 0.00000000, 0.00000000, "", "" );
            SET_CAM_ACTIVE( l_U953, 1 );
            RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
             /* STARTTIMER */ sub_2552( ref l_U836 );
             /* STARTTIMER */ sub_2552( ref l_U845 );
             /* STARTTIMER */ sub_2552( ref l_U854 );
            PLAY_SCRIPT_STREAM_FROM_COORD( -988.37000000, 34.14000000, 2.35000000, 1 );
            TRIGGER_EXPLOSION_AUDIO_MIX_LAYER( "S_FIRE_EXP_MOBILE_SUCCESS", -988.37000000, 34.14000000, 2.35000000 );
            if (IS_BULLET_CAMERA_SCENE_ACTIVE( l_U953 ))
            {
                 /* WRITESCRIPTLOG */ sub_821( "SA", "Bullet cam created", 0 );
            }
        }
        if ( /* ISTIMERDONE */ sub_1747( ref l_U836 ))
        {
             /* WRITESCRIPTLOG */ sub_821( "SA", "Mobile Collapse - 1/3", 0 );
             /* P_INITIALIZE_IMAGEFX_EFFECTS_06 */ sub_35207();
            PLAY_OBJECT_ANIM( l_U1008, "P_AN_MOBCAG_AB_H", "of_mobile", 0.00000000, 0, 1 );
            PLAY_OBJECT_ANIM( l_U1011, "P_AN_MOBCAG_AE_H", "of_mobile", 0.00000000, 0, 1 );
            PLAY_OBJECT_ANIM( l_U1012, "P_AN_MOBCAG_AF_H", "of_mobile", 0.00000000, 0, 1 );
            SET_OBJECT_ANIM_SPEED( l_U1008, "P_AN_MOBCAG_AB_H", "of_mobile", 1.35000000 );
            SET_OBJECT_ANIM_SPEED( l_U1011, "P_AN_MOBCAG_AE_H", "of_mobile", 1.35000000 );
            SET_OBJECT_ANIM_SPEED( l_U1012, "P_AN_MOBCAG_AF_H", "of_mobile", 1.35000000 );
        }
        if ( /* ISTIMERDONE */ sub_1747( ref l_U845 ))
        {
             /* WRITESCRIPTLOG */ sub_821( "SA", "Mobile Collapse - 2/3", 0 );
            for ( I = 0; I < 6; I++ )
            {
                l_U999[I] = START_SCRIPT_FIRE( l_U980[I], 1 );
            }
            START_PARTICLE_FX_NON_LOOPED_AT_COORD( "OF_mobile_collaspe_S", -978.60000000, 35.90000000, -0.03000000, 0.00000000, 0.00000000, 0.00000000, 1.50000000 );
        }
        if ( /* ISTIMERDONE */ sub_1747( ref l_U854 ))
        {
             /* WRITESCRIPTLOG */ sub_821( "SA", "Mobile Collapse - 3/3", 0 );
            START_PARTICLE_FX_NON_LOOPED_AT_COORD( "OF_mobile_collaspe_S", -987.89000000, 33.64000000, 3.75000000, 0.00000000, 0.00000000, 0.00000000, 0.80000000 );
        }
        if (IS_BULLET_CAMERA_SCENE_ACTIVE( l_U953 ))
        {
            if ((PED_GET_ACTION_INTENTION_STATUS(  /* PLAYER_PED_ID */ sub_1355(), 58 )) == 3)
            {
                PED_FINISH_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_1355(), 58 );
                CAMERA_USE_HANDY_CAM( 1, 5.00000000, 1 );
                if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
                {
                    PED_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1355(), "/Global/S_OFF_INJ1/S_OFF_INJ1/S_OFF_INJ" );
                    SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1393(), 0, 256 );
                    l_U465 = 4;
                }
            }
        }
        break;
        case 4:
        if (NOT (IS_BULLET_CAMERA_SCENE_ACTIVE( l_U953 )))
        {
            SET_OBJECT_VISIBLE( l_U1006, 1 );
            SET_GAMEPLAY_CAM_RELATIVE_HEADING( 4.32733400, 1065353216, 0 );
            SET_GAMEPLAY_CAM_RELATIVE_PITCH( 5.00000000, 1065353216, 0 );
            RENDER_SCRIPT_CAMS( 0, 1, 3000, 0 );
            if (DOES_CAM_EXIST( l_U953 ))
            {
                SET_CAM_ACTIVE( l_U953, 0 );
            }
            DESTROY_ALL_CAMS();
             /* STARTTIMER */ sub_2552( ref l_U917 );
            l_U465 = 5;
        }
        break;
        case 5:
        if ( /* ISTIMERDONE */ sub_1747( ref l_U917 ))
        {
             /* STARTTIMER */ sub_2552( ref l_U926 );
            SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1393(), 1, 256 );
             /* P_RESET_COUGHING_TIMER */ sub_26860();
            SET_CAMERA_OVERRIDE( "s_office_fire_loco", "s_office_fire_loco", 0, 1, 1 );
            STOP_SCRIPT_STREAM( 0 );
            STOP_SCRIPT_STREAM( 1 );
            STOP_SCRIPT_STREAM( 2 );
            BULLET_CAMERA_PRELOAD_TEXT_BINK( "S_OFFICE_MOBILE_FAIL", 0 );
            BULLET_CAMERA_PRELOAD_TEXT_BINK( "S_OFFICE_MOBILE", 0 );
            l_U465 = 6;
        }
        break;
    }
    return;
}

/* F_ISPLAYERINTRIGGERBOX */ void sub_31875(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20)
{
    return  /* F_ISPEDINTRIGGERBOX */ sub_27572(  /* PLAYER_PED_ID */ sub_1355(), uParam0 );
}

/* P_TRIGGER_STAIR_CLIMB */ void sub_32368()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_TRIGGER_STAIR_CLIMB", 0 );
    SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1393(), 0, 256 );
    ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "fireatriumleanwall02", 0, 0, 0, 0 );
     /* P_STOP_COUGHING_TIMER */ sub_4803();
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
    {
         /* FINISHALLACTIONINTENTIONS */ sub_32550(  /* PLAYER_PED_ID */ sub_1355() );
    }
    ISEQ_UNREGISTER_ENTITY( -211988314, "MAX" );
    SET_PED_SYNC_POINT(  /* PLAYER_PED_ID */ sub_1355(), -983.59000000, 31.70000000, -0.05000000, 90.00000000 );
    ISEQ_REGISTER_ENTITY( -211988314, "MAX",  /* PLAYER_PED_ID */ sub_1355(), 0 );
    ISEQ_START( -211988314 );
     /* STARTTIMER */ sub_2552( ref l_U863 );
    return;
}

/* FINISHALLACTIONINTENTIONS */ void sub_32550(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
         /* WRITESCRIPTLOG */ sub_821( "[SA]", "Clearing ACT_INT_SEQ_ACTION01 - ACT_INT_SEQ_ACTION12 for ped.", 0 );
        PED_FINISH_ACTION_INTENTION( uParam0, 47 );
        PED_FINISH_ACTION_INTENTION( uParam0, 48 );
        PED_FINISH_ACTION_INTENTION( uParam0, 49 );
        PED_FINISH_ACTION_INTENTION( uParam0, 50 );
        PED_FINISH_ACTION_INTENTION( uParam0, 51 );
        PED_FINISH_ACTION_INTENTION( uParam0, 52 );
        PED_FINISH_ACTION_INTENTION( uParam0, 53 );
        PED_FINISH_ACTION_INTENTION( uParam0, 54 );
        PED_FINISH_ACTION_INTENTION( uParam0, 55 );
        PED_FINISH_ACTION_INTENTION( uParam0, 56 );
        PED_FINISH_ACTION_INTENTION( uParam0, 57 );
        PED_FINISH_ACTION_INTENTION( uParam0, 58 );
    }
    return;
}

/* P_INITIALIZE_IMAGEFX_EFFECTS_04 */ void sub_33006()
{
     /* WRITESCRIPTLOG */ sub_821( "CO", "P_INITIALIZE_ImageFX_EFFECTS04", 0 );
     /* P_INIT_IMAGEFX */ sub_29355( ref l_U1061 );
    l_U1061[0]._fU4 = "DISTORT_INTERLACE_MIDDLE";
    l_U1061[0]._fU32 = 0;
    l_U1061[0]._fU8 = 4;
    l_U1061[1]._fU4 = "INTERLACE_LIGHT";
    l_U1061[1]._fU12 = 1000;
    l_U1061[1]._fU32 = 0;
    l_U1061[1]._fU8 = 4;
    l_U1061[2]._fU4 = "INTERLACE_CONTRAST_ZOOM_FAST";
    l_U1061[2]._fU12 = 2000;
    l_U1061[2]._fU32 = 0;
    l_U1061[2]._fU8 = 4;
    l_U457 = 0;
    return;
}

/* P_PLAY_SOFF_MGUTSTRA */ void sub_33443()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_PLAY_SOFF_MGUTSTRA", 0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
    {
        if (NOT (IS_SCRIPTED_SPEECH_PLAYING(  /* PLAYER_PED_ID */ sub_1355() )))
        {
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_30149( ref l_U289 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_30260( 0,  /* PLAYER_PED_ID */ sub_1355(), "MAX", ref l_U289, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_30260( 1,  /* PLAYER_PED_ID */ sub_1355(), "MAX", ref l_U289, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_30530( "SOFF_MGUTSTRA", ref l_U289, 2, 1 );
        }
    }
    return;
}

/* P_INITIALIZE_IMAGEFX_EFFECTS_10 */ void sub_34211()
{
     /* WRITESCRIPTLOG */ sub_821( "CO", "P_INITIALIZE_ImageFX_EFFECTS10", 0 );
    PLAY_IMAGEFX( "FLICKER_VIBRATE_INTERLACE_M", 4, 0 );
    return;
}

/* P_INITIALIZE_IMAGEFX_EFFECTS_06 */ void sub_35207()
{
     /* WRITESCRIPTLOG */ sub_821( "CO", "P_INITIALIZE_ImageFX_EFFECTS06", 0 );
     /* P_INIT_IMAGEFX */ sub_29355( ref l_U1061 );
    l_U1061[0]._fU4 = "DISTORT_INTERLACE_DOUBLE_01";
    l_U1061[0]._fU12 = 800;
    l_U1061[0]._fU32 = 0;
    l_U1061[0]._fU8 = 4;
    l_U1061[1]._fU4 = "TRIPLE_MOVE_RIGHT_COLOR_SPLIT5";
    l_U1061[1]._fU12 = 4000;
    l_U1061[1]._fU32 = 0;
    l_U1061[1]._fU20 = 1;
    l_U1061[1]._fU8 = 4;
    l_U1061[2]._fU4 = "DISTORT_INTERLACE_MIDDLE_INVRT";
    l_U1061[2]._fU12 = 4400;
    l_U1061[2]._fU32 = 0;
    l_U1061[2]._fU8 = 4;
    l_U1061[3]._fU4 = "RELOAD_GLITCH_BORDER";
    l_U1061[3]._fU12 = 4500;
    l_U1061[3]._fU32 = 0;
    l_U1061[3]._fU8 = 3;
    l_U457 = 0;
    return;
}

/* P_HANDLE_GATE_LIFT */ void sub_36723()
{
    if (GET_PED_REACHED_TARGETED_GRAVWELL_CENTER(  /* PLAYER_PED_ID */ sub_1355(), "s_office_fireatrium_gravitywells", "FireAtriumGateLift", 1 ))
    {
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "FireAtriumGateLift", 0, 0, 0, 0 );
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1393(), 0, 0 );
        ISEQ_REGISTER_ENTITY( -1490441288, "player",  /* PLAYER_PED_ID */ sub_1355(), 0 );
        ISEQ_START( -1490441288 );
         /* STARTTIMER */ sub_2552( ref l_U935 );
    }
    if ( /* ISTIMERDONE */ sub_1747( ref l_U935 ))
    {
        g_U1586 = 1;
        l_U460 = 8;
    }
    return;
}

/* P_HANDLE_FINAL_MONO */ void sub_36992()
{
    if ( /* ISTIMERDONE */ sub_1747( ref l_U926 ))
    {
        if ((GET_RANDOM_FLOAT_IN_RANGE( 0, 1 )) > 0.50000000)
        {
             /* P_PLAY_SOFF_MXCUTS1 */ sub_37060();
        }
        else
        {
             /* P_PLAY_SOFF_MXCUTS2 */ sub_37256();
        }
    }
    return;
}

/* P_PLAY_SOFF_MXCUTS1 */ void sub_37060()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_PLAY_SOFF_MXCUTS1", 0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
    {
        if (NOT (IS_SCRIPTED_SPEECH_PLAYING(  /* PLAYER_PED_ID */ sub_1355() )))
        {
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_30149( ref l_U299 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_30260( 0,  /* PLAYER_PED_ID */ sub_1355(), "MAX", ref l_U299, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_30260( 1,  /* PLAYER_PED_ID */ sub_1355(), "MAX", ref l_U299, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_30530( "SOFF_MXCUTS1", ref l_U299, 2, 1 );
        }
    }
    return;
}

/* P_PLAY_SOFF_MXCUTS2 */ void sub_37256()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_PLAY_SOFF_MXCUTS2", 0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
    {
        if (NOT (IS_SCRIPTED_SPEECH_PLAYING(  /* PLAYER_PED_ID */ sub_1355() )))
        {
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_30149( ref l_U309 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_30260( 0,  /* PLAYER_PED_ID */ sub_1355(), "MAX", ref l_U309, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_30260( 1,  /* PLAYER_PED_ID */ sub_1355(), "MAX", ref l_U309, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_30530( "SOFF_MXCUTS2", ref l_U309, 2, 1 );
        }
    }
    return;
}

/* P_HANDLE_GLOBAL_FIRE_EVENTS */ void sub_37467()
{
     /* P_HANDLE_COUGHING_WIDGET */ sub_37507();
     /* P_HANDLE_COUGHING_DEBUG_KEYS */ sub_38232();
    if (g_U1587)
    {
         /* P_HANDLE_FIRE_REACTIONS */ sub_38577();
    }
    if ((g_U1584) AND (g_U1585))
    {
         /* P_HANDLE_SMOKE_FX_LOGIC */ sub_39121();
         /* P_HANDLE_MAX_COUGHING_SFX */ sub_39377();
         /* P_HANDLE_MAX_IDLING */ sub_40350();
    }
    return;
}

/* P_HANDLE_COUGHING_WIDGET */ void sub_37507()
{
    if (NOT l_U429)
    {
        START_WIDGET_GROUP( "Fire Widget" );
        ADD_WIDGET_BOOL( "Enable/Disable Smoke/Coughing", ref g_U1584 );
        ADD_WIDGET_FLOAT_SLIDER( "Fire react distance", ref g_U1589, 0, 1000000, 1 );
        ADD_WIDGET_INT_SLIDER( "Max's starting health (in Fire Atrium)", ref g_U1594, 0, 1000000, 1 );
        ADD_WIDGET_INT_SLIDER( "Max's dying health (triggers coughing death)", ref g_U1595, 0, 1000000, 1 );
        ADD_WIDGET_INT_SLIDER( "Delay before idle state begins", ref g_U1599, 0, 1000000, 1 );
        ADD_WIDGET_INT_SLIDER( "Time between coughs when idling", ref g_U1600, 0, 1000000, 1 );
        ADD_WIDGET_INT_SLIDER( "The length of each cycle where Max loose a bit of health", ref g_U1597, 0, 1000000, 1 );
        ADD_WIDGET_INT_SLIDER( "How much health Max loose each cycle", ref g_U1596, 0, 1000000, 1 );
        ADD_WIDGET_FLOAT_SLIDER( "Smoke Blend in rate", ref g_U1591, 0, 1, 0.01000000 );
        ADD_WIDGET_FLOAT_SLIDER( "Smoke Blend out rate", ref g_U1592, 0, 1, 0.01000000 );
        ADD_WIDGET_INT_SLIDER( "Min Time for Max's cough", ref g_U1601, 0, 1000000, 1 );
        ADD_WIDGET_INT_SLIDER( "Max Time for Max's cough", ref g_U1602, 0, 1000000, 1 );
        STOP_WIDGET_GROUP();
        l_U429 = 1;
    }
    return;
}

/* P_HANDLE_COUGHING_DEBUG_KEYS */ void sub_38232()
{
    if ( /* F_DEBUG_CHECK_FOR_SCRIPT_INVINCIBILITY_KEY */ sub_38273())
    {
        if (g_U1584)
        {
             /* WRITESCRIPTLOG */ sub_821( "SA", "Disabling Oxygen Drain", 0 );
            PRINT_STRING_WITH_LITERAL_STRING( "STRING", "Disabling Oxygen Drain", 2000, 1 );
            g_U1584 = 0;
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_821( "SA", "Enabling Oxygen Drain", 0 );
            PRINT_STRING_WITH_LITERAL_STRING( "STRING", "Enabling Oxygen Drain", 2000, 1 );
            g_U1584 = 1;
        }
    }
    return;
}

/* F_DEBUG_CHECK_FOR_SCRIPT_INVINCIBILITY_KEY */ int sub_38273()
{
    if ((IS_MARKETING_KEYBOARD_KEY_JUST_PRESSED( 49 )) || (IS_KEYBOARD_KEY_JUST_PRESSED( 49 )))
    {
        return 1;
    }
    return 0;
}

/* P_HANDLE_FIRE_REACTIONS */ void sub_38577()
{
    if (( /* F_ISPEDINTRIGGERBOX */ sub_27572(  /* PLAYER_PED_ID */ sub_1355(), g_U1361 )) || ( /* F_ISPEDINTRIGGERBOX */ sub_27572(  /* PLAYER_PED_ID */ sub_1355(), g_U1340 )))
    {
         /* P_FIRE_REACT_CHECK */ sub_38656( ref l_U39, 14 );
    }
    else if (( /* F_ISPEDINTRIGGERBOX */ sub_27572(  /* PLAYER_PED_ID */ sub_1355(), g_U1424 )) || (( /* F_ISPEDINTRIGGERBOX */ sub_27572(  /* PLAYER_PED_ID */ sub_1355(), g_U1403 )) || ( /* F_ISPEDINTRIGGERBOX */ sub_27572(  /* PLAYER_PED_ID */ sub_1355(), g_U1382 ))))
    {
         /* P_FIRE_REACT_CHECK */ sub_38656( ref l_U82, 33 );
    }
    else if ( /* F_ISPEDINTRIGGERBOX */ sub_27572(  /* PLAYER_PED_ID */ sub_1355(), g_U1445 ))
    {
         /* P_FIRE_REACT_CHECK */ sub_38656( ref l_U182, 16 );
    }
    else if (( /* F_ISPEDINTRIGGERBOX */ sub_27572(  /* PLAYER_PED_ID */ sub_1355(), g_U1466 )) || ( /* F_ISPEDINTRIGGERBOX */ sub_27572(  /* PLAYER_PED_ID */ sub_1355(), g_U1487 )))
    {
         /* P_FIRE_REACT_CHECK */ sub_38656( ref l_U231, 8 );
    }
    else if ( /* F_ISPEDINTRIGGERBOX */ sub_27572(  /* PLAYER_PED_ID */ sub_1355(), g_U1508 ))
    {
         /* P_FIRE_REACT_CHECK */ sub_38656( ref l_U256, 3 );
    };;;;;
    return;
}

/* P_FIRE_REACT_CHECK */ void sub_38656(unknown uParam0, int iParam1)
{
    int I;

    I = 0;
    for ( I = 0; I < iParam1; I++ )
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
        {
            if (( /* GET_DISTANCE_BETWEEN_PED_AND_VECTOR */ sub_38734(  /* PLAYER_PED_ID */ sub_1355(), (uParam0^)[I] )) <= g_U1589)
            {
                PED_SET_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_1355(), 55, 1000, (uParam0^)[I] );
            }
        }
    }
    return;
}

/* GET_DISTANCE_BETWEEN_PED_AND_VECTOR */ void sub_38734(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;

    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        uVar6 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
    }
    else
    {
        return -1.00000000;
    }
    return VDIST( uVar6, uParam1 );
}

/* P_HANDLE_SMOKE_FX_LOGIC */ void sub_39121()
{
    switch (l_U267)
    {
        case 0:
        if (l_U268 == 2)
        {
            l_U267 = 1;
        }
        break;
        case 1:
         /* WRITESCRIPTLOG */ sub_821( "SA", "SMKFX_BLEND_IN", 0 );
        l_U267 = 2;
        break;
        case 2:
        if (l_U268 != 2)
        {
            l_U267 = 3;
        }
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_821( "SA", "SMKFX_BLEND_OUT", 0 );
        l_U267 = 4;
        break;
        case 4:
         /* WRITESCRIPTLOG */ sub_821( "SA", "SMKFX_IDLE", 0 );
        l_U267 = 0;
        break;
    }
    return;
}

/* P_HANDLE_MAX_COUGHING_SFX */ void sub_39377()
{
    switch (l_U266)
    {
        case 0: break;
        case 1:
         /* WRITESCRIPTLOG */ sub_821( "SA", "CL_SETUP", 0 );
         /* RESETTIMER */ sub_3091( ref g_U1538 );
         /* CREATETIMER */ sub_2402( ref g_U1538, GET_RANDOM_INT_IN_RANGE( g_U1601, g_U1602 ), 1, 0 );
         /* STARTTIMER */ sub_2552( ref g_U1538 );
        l_U266 = 2;
        break;
        case 2:
        if ( /* ISTIMERDONE */ sub_1747( ref g_U1538 ))
        {
             /* WRITESCRIPTLOG */ sub_821( "SA", "CL_MAX_CAN_COUGH", 0 );
            if ((GET_PED_HEALTH(  /* PLAYER_PED_ID */ sub_1355() )) > g_U1593)
            {
                 /* P_RANDOM_COUGH_STAGE_1 */ sub_39610();
            }
            else
            {
                 /* P_RANDOM_COUGH_STAGE_2 */ sub_40018();
            }
            l_U266 = 1;
        }
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_821( "SA", "CL_MAX_CANNOT_COUGH", 0 );
         /* RESETTIMER */ sub_3091( ref g_U1538 );
        l_U266 = 0;
        break;
    }
    return;
}

/* P_RANDOM_COUGH_STAGE_1 */ void sub_39610()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_RANDOM_COUGH_STAGE_1", 0 );
    if ((GET_RANDOM_INT_IN_RANGE( 1, 3 )) == 1)
    {
         /* P_LIGHT_COUGH */ sub_39697();
    }
    else
    {
         /* P_MED_COUGH */ sub_39855();
    }
    return;
}

/* P_LIGHT_COUGH */ void sub_39697()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_LIGHT_COUGH", "###" );
    PED_SET_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_1355(), 51, 1000, 0.00000000, 0.00000000, 0.00000000 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
    {
        PLAY_SOUND_FROM_PED( g_U1598, "MAX_COUGHS_SMALL",  /* PLAYER_PED_ID */ sub_1355() );
    }
    return;
}

/* P_MED_COUGH */ void sub_39855()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_MED_COUGH", "###" );
    PED_SET_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_1355(), 52, 1000, 0.00000000, 0.00000000, 0.00000000 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
    {
        PLAY_SOUND_FROM_PED( g_U1598, "MAX_COUGHS_MEDIUM",  /* PLAYER_PED_ID */ sub_1355() );
    }
    return;
}

/* P_RANDOM_COUGH_STAGE_2 */ void sub_40018()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_RANDOM_COUGH_STAGE_2", 0 );
    if ((GET_RANDOM_INT_IN_RANGE( 1, 4 )) == 1)
    {
         /* P_MED_COUGH */ sub_39855();
    }
    else
    {
         /* P_HEAVY_COUGH */ sub_40115();
    }
    return;
}

/* P_HEAVY_COUGH */ void sub_40115()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_HEAVY_COUGH", "###" );
    PED_SET_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_1355(), 53, 1000, 0.00000000, 0.00000000, 0.00000000 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
    {
        PLAY_SOUND_FROM_PED( g_U1598, "MAX_COUGHS_LARGE_A",  /* PLAYER_PED_ID */ sub_1355() );
    }
    return;
}

/* P_HANDLE_MAX_IDLING */ void sub_40350()
{
    boolean bVar2;

    bVar2 = true;
    switch (l_U268)
    {
        case 0: break;
        case 1:
        if ((GET_PED_SPEED(  /* PLAYER_PED_ID */ sub_1355() )) > 0.10000000)
        {
            bVar2 = false;
        }
        if (bVar2)
        {
            if ((NOT g_U1529._fU16) AND (NOT g_U1529._fU20))
            {
                 /* STARTTIMER */ sub_2552( ref g_U1529 );
            }
        }
        else
        {
             /* RESETTIMER */ sub_3091( ref g_U1529 );
        }
        if ( /* ISTIMERDONE */ sub_1747( ref g_U1529 ))
        {
             /* P_PLAY_RANDOM_SMOKE_WARNING */ sub_40526();
             /* RESETTIMER */ sub_3091( ref g_U1529 );
            l_U266 = 1;
            l_U268 = 2;
        }
        break;
        case 2:
        if ((NOT g_U1547._fU16) AND (NOT g_U1547._fU20))
        {
             /* STARTTIMER */ sub_2552( ref g_U1547 );
        }
        if ( /* ISTIMERDONE */ sub_1747( ref g_U1547 ))
        {
            SET_PED_HEALTH(  /* PLAYER_PED_ID */ sub_1355(), (GET_PED_HEALTH(  /* PLAYER_PED_ID */ sub_1355() )) - g_U1596, 0 );
             /* RESETTIMER */ sub_3091( ref g_U1547 );
             /* STARTTIMER */ sub_2552( ref g_U1547 );
        }
        if ((GET_PED_HEALTH(  /* PLAYER_PED_ID */ sub_1355() )) < g_U1594)
        {
            l_U268 = 3;
        }
        if ((GET_PED_SPEED(  /* PLAYER_PED_ID */ sub_1355() )) > 0.10000000)
        {
             /* RESETTIMER */ sub_3091( ref g_U1529 );
             /* RESETTIMER */ sub_3091( ref g_U1547 );
            l_U266 = 3;
            l_U268 = 1;
        }
        break;
        case 3:
         /* P_KILL_MAX_FROM_SMOKE_INHALE */ sub_41187();
        l_U268 = 0;
        break;
    }
    return;
}

/* P_PLAY_RANDOM_SMOKE_WARNING */ void sub_40526()
{
    if ((GET_RANDOM_FLOAT_IN_RANGE( 0, 1 )) > 0.50000000)
    {
         /* P_PLAY_SOFF_MDSNTM */ sub_40588();
    }
    else
    {
         /* P_PLAY_SOFF_SHTPRMP */ sub_40781();
    }
    return;
}

/* P_PLAY_SOFF_MDSNTM */ void sub_40588()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_PLAY_SOFF_MDSNTM", 0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
    {
        if (NOT (IS_SCRIPTED_SPEECH_PLAYING(  /* PLAYER_PED_ID */ sub_1355() )))
        {
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_30149( ref l_U409 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_30260( 0,  /* PLAYER_PED_ID */ sub_1355(), "MAX", ref l_U409, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_30260( 1,  /* PLAYER_PED_ID */ sub_1355(), "MAX", ref l_U409, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_30530( "SOFF_MDSNTM", ref l_U409, 2, 1 );
        }
    }
    return;
}

/* P_PLAY_SOFF_SHTPRMP */ void sub_40781()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_PLAY_SOFF_SHTPRMP", 0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
    {
        if (NOT (IS_SCRIPTED_SPEECH_PLAYING(  /* PLAYER_PED_ID */ sub_1355() )))
        {
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_30149( ref l_U419 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_30260( 0,  /* PLAYER_PED_ID */ sub_1355(), "MAX", ref l_U419, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_30260( 1,  /* PLAYER_PED_ID */ sub_1355(), "MAX", ref l_U419, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_30530( "SOFF_SHTPRMP", ref l_U419, 2, 1 );
        }
    }
    return;
}

/* P_KILL_MAX_FROM_SMOKE_INHALE */ void sub_41187()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_KILL_MAX_FROM_SMOKE_INHALE", "###" );
    SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1393(), 0, 0 );
    DISPLAY_HUD( 0 );
    ADD_SPECIAL_FX_MODIFIER( "FIRE_COUGH", 1.00000000, 0.00000000, g_U1591, g_U1592 );
    if (g_U665 == 1)
    {
        ISEQ_REGISTER_ENTITY( -654795811, "MAX",  /* PLAYER_PED_ID */ sub_1355(), 0 );
        ISEQ_START( -654795811 );
    }
    else
    {
        SET_PLAYER_CAN_USE_COVER(  /* PLAYER_ID */ sub_1393(), 0 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1355() )))
        {
            PED_SET_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_1355(), 47, 1000, 0.00000000, 0.00000000, 0.00000000 );
        }
    }
    g_U1583 = 1;
     /* RESETTIMER */ sub_3091( ref g_U1556 );
     /* CREATETIMER */ sub_2402( ref g_U1556, 2500, 1, 0 );
     /* STARTTIMER */ sub_2552( ref g_U1556 );
    return;
}

/* P_UNLOAD_ASSETS */ void sub_41590()
{
     /* WRITESCRIPTLOG */ sub_821( "SA", "P_UNLOAD_ASSETS", 0 );
    BULLET_CAMERA_PRELOAD_TEXT_BINK( "S_OFFICE_MOBILE_FAIL", 0 );
    BULLET_CAMERA_PRELOAD_TEXT_BINK( "S_OFFICE_MOBILE", 0 );
     /* UNLOADMODEL */ sub_41709( -2119961670 );
     /* UNLOADMODEL */ sub_41709( -1329128487 );
     /* UNLOADMODEL */ sub_41709( 1185415992 );
     /* UNLOADMODEL */ sub_41709( 1683467108 );
     /* UNLOADMODEL */ sub_41709( 22502157 );
     /* UNLOADMODEL */ sub_41709( 1926445048 );
     /* UNLOADMODEL */ sub_41709( 410241322 );
    return;
}

/* UNLOADMODEL */ void sub_41709(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 1)
    {
        SET_MODEL_AS_NO_LONGER_NEEDED( uParam0 );
    }
    else
    {
         /* WRITE_STRING */ sub_8084( "[SP]### ERROR! (UnloadModel) Trying to unload a model that isn't in the img! ###" );
    }
    return;
}

/* P_HANDLE_IMAGEFX_FIRE_ATR */ void sub_41946()
{
    if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_27496( ref l_U565, 0 ))
    {
         /* P_INITIALIZE_IMAGEFX_EFFECTS_01 */ sub_41999();
    }
    if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_27496( ref l_U586, 0 ))
    {
         /* P_INITIALIZE_IMAGEFX_EFFECTS_03 */ sub_42153();
    }
    if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_27496( ref l_U607, 0 ))
    {
         /* P_INITIALIZE_IMAGEFX_EFFECTS_05 */ sub_42401();
    }
    if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_27496( ref l_U628, 0 ))
    {
         /* P_INITIALIZE_IMAGEFX_EFFECTS_07 */ sub_42656();
    }
    if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_27496( ref l_U649, 0 ))
    {
         /* P_INITIALIZE_IMAGEFX_EFFECTS_09 */ sub_42791();
    }
    if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_27496( ref l_U670, 0 ))
    {
         /* P_INITIALIZE_IMAGEFX_EFFECTS_11 */ sub_42988();
    }
    if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_27496( ref l_U691, 0 ))
    {
         /* P_INITIALIZE_IMAGEFX_EFFECTS_12 */ sub_43132();
    }
     /* P_HANDLE_IMAGEFX */ sub_43275( ref l_U1061 );
    return;
}

/* P_INITIALIZE_IMAGEFX_EFFECTS_01 */ void sub_41999()
{
     /* WRITESCRIPTLOG */ sub_821( "CO", "P_INITIALIZE_ImageFX_EFFECTS01", 0 );
    PLAY_IMAGEFX( "DISTORT_INTERLACE_MIDDLE_INVRT", 4, 0 );
    return;
}

/* P_INITIALIZE_IMAGEFX_EFFECTS_03 */ void sub_42153()
{
     /* WRITESCRIPTLOG */ sub_821( "CO", "P_INITIALIZE_ImageFX_EFFECTS03", 0 );
     /* P_INIT_IMAGEFX */ sub_29355( ref l_U1061 );
    l_U1061[0]._fU4 = "TRIPLE_INTERLACE_COLOR_MED";
    l_U1061[0]._fU32 = 0;
    l_U1061[0]._fU20 = 1;
    l_U1061[0]._fU8 = 4;
    l_U1061[1]._fU4 = "FLASH_GREEN";
    l_U1061[1]._fU32 = 0;
    l_U1061[1]._fU8 = 4;
    l_U457 = 0;
    return;
}

/* P_INITIALIZE_IMAGEFX_EFFECTS_05 */ void sub_42401()
{
     /* WRITESCRIPTLOG */ sub_821( "CO", "P_INITIALIZE_ImageFX_EFFECTS05", 0 );
     /* P_INIT_IMAGEFX */ sub_29355( ref l_U1061 );
    l_U1061[0]._fU4 = "TRIPLE_INTERLACE_COLOR_FAST";
    l_U1061[0]._fU32 = 0;
    l_U1061[0]._fU8 = 4;
    l_U1061[1]._fU4 = "INTERLACE_LIGHT";
    l_U1061[1]._fU12 = 1000;
    l_U1061[1]._fU32 = 0;
    l_U1061[1]._fU8 = 4;
    l_U457 = 0;
    return;
}

/* P_INITIALIZE_IMAGEFX_EFFECTS_07 */ void sub_42656()
{
     /* WRITESCRIPTLOG */ sub_821( "CO", "P_INITIALIZE_ImageFX_EFFECTS07", 0 );
    PLAY_IMAGEFX( "FLASH_WHITE", 4, 0 );
    return;
}

/* P_INITIALIZE_IMAGEFX_EFFECTS_09 */ void sub_42791()
{
     /* WRITESCRIPTLOG */ sub_821( "CO", "P_INITIALIZE_ImageFX_EFFECTS09", 0 );
    PLAY_IMAGEFX( "FLICKER_VIBRATE_INTERLACE_01_L", 4, 0 );
    PLAY_IMAGEFX( "FLICKER_VIBRATE_INTERLACE_01_L", 4, 0 );
    return;
}

/* P_INITIALIZE_IMAGEFX_EFFECTS_11 */ void sub_42988()
{
     /* WRITESCRIPTLOG */ sub_821( "CO", "P_INITIALIZE_ImageFX_EFFECTS11", 0 );
    PLAY_IMAGEFX( "FLICKER_VIBRATE_LONG", 4, 0 );
    return;
}

/* P_INITIALIZE_IMAGEFX_EFFECTS_12 */ void sub_43132()
{
     /* WRITESCRIPTLOG */ sub_821( "CO", "P_INITIALIZE_ImageFX_EFFECTS12", 0 );
    PLAY_IMAGEFX( "DISTORT_INTERLACE_MID_INVRT_01", 4, 0 );
    return;
}

/* P_HANDLE_IMAGEFX */ void sub_43275(unknown uParam0)
{
    int I;
    int J;

    switch (l_U457)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_821( "CO", "P_HANDLE_IMAGEFX", 0 );
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (uParam0^)[I]._fU32)
            {
                 /* CREATETIMER */ sub_2402( ref (uParam0^)[I]._fU36, (uParam0^)[I]._fU12, 1, 0 );
                 /* STARTTIMER */ sub_2552( ref (uParam0^)[I]._fU36 );
                if ((uParam0^)[I]._fU20 > 0)
                {
                    I += (uParam0^)[I]._fU20;
                }
            }
        }
        l_U457 = 1;
        break;
        case 1:
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if ( /* ISTIMERDONE */ sub_1747( ref (uParam0^)[I]._fU36 ))
            {
                (uParam0^)[I]._fU0 = PLAY_IMAGEFX( (uParam0^)[I]._fU4, (uParam0^)[I]._fU8, (uParam0^)[I]._fU28 );
                if ((uParam0^)[I]._fU16 > 0)
                {
                     /* CREATETIMER */ sub_2402( ref (uParam0^)[I]._fU72, (uParam0^)[I]._fU16, 1, 0 );
                     /* STARTTIMER */ sub_2552( ref (uParam0^)[I]._fU72 );
                }
                if ((uParam0^)[I]._fU20 > 0)
                {
                    for ( J = I + 1; J <= (I + (uParam0^)[I]._fU20); J++ )
                    {
                        PRINTSTRING( "******* [CO] ***** STARTING CHILD FOR index : " );
                        PRINTINT( J );
                        PRINTNL();
                        (uParam0^)[J]._fU0 = PLAY_IMAGEFX( (uParam0^)[J]._fU4, (uParam0^)[J]._fU8, (uParam0^)[I]._fU28 );
                        if ((uParam0^)[J]._fU16 > 0)
                        {
                             /* CREATETIMER */ sub_2402( ref (uParam0^)[J]._fU72, (uParam0^)[J]._fU16, 1, 0 );
                             /* STARTTIMER */ sub_2552( ref (uParam0^)[J]._fU72 );
                        }
                    }
                    I += (uParam0^)[I]._fU20;
                }
            }
            if ( /* ISTIMERDONE */ sub_1747( ref (uParam0^)[I]._fU72 ))
            {
                STOP_IMAGEFX( (uParam0^)[I]._fU0, (uParam0^)[I]._fU24 );
                (uParam0^)[I]._fU32 = 1;
                if ((uParam0^)[I]._fU20 > 0)
                {
                    if ((uParam0^)[I]._fU20 == 1)
                    {
                        STOP_IMAGEFX( (uParam0^)[I + 1]._fU0, (uParam0^)[I + 1]._fU24 );
                        (uParam0^)[I + 1]._fU32 = 1;
                    }
                    else
                    {
                        for ( J = I + 1; J <= (uParam0^)[I]._fU20; J++ )
                        {
                            STOP_IMAGEFX( (uParam0^)[J]._fU0, (uParam0^)[J]._fU24 );
                            (uParam0^)[J]._fU32 = 1;
                        }
                    }
                    I += (uParam0^)[I]._fU20;
                }
            }
        }
        break;
    }
    return;
}

