void main()
{
    l_U0 = 1;
    l_U1 = 144;
    l_U2 = "PED_DEF";
    l_U44 = 1.00000000;
    l_U56 = 0;
    l_U97 = 0;
    l_U117 = 1;
    l_U118 = 1;
    l_U158 = 0;
    l_U170 = 0;
    l_U171 = 1;
    l_U172 = 0;
    l_U173 = 1.00000000;
    l_U174 = -5.00000000;
    l_U175 = 0;
    l_U176 = 0;
    l_U177 = 0;
    l_U181 = 42;
    l_U182 = 0;
    l_U183 = 0;
    l_U184 = 0;
    l_U185 = 0;
    l_U186 = 0;
    l_U187 = 90.00000000;
    l_U188 = {0.00000000, 0.00000000, 0.00000000};
    l_U191 = {0.00000000, 0.00000000, 0.00000000};
    l_U194 = 0;
    l_U195 = 0;
    l_U196 = 0;
    l_U197 = 0;
    l_U198 = 0;
    l_U199 = 0;
    l_U200 = nil;
    l_U201 = {0.00000000, 0.00000000, 0.00000000};
    l_U204 = 0;
    l_U205 = 0;
    l_U206 = 0;
    l_U258 = 0;
    l_U259 = 0;
    l_U260 = 1;
    l_U262 = 0;
    l_U263 = 0;
    l_U264 = 1500;
    l_U275 = 0;
    l_U279 = -1;
    l_U280 = {64536, 64536, 64536};
    l_U283 = {0, 0, 0};
    StrCopy( ref l_U286, "DUMMY", 32 );
    l_U294 = 1;
    l_U299 = 0;
    l_U300 = 0;
    l_U301 = 0;
    l_U304 = 0;
    l_U2107 = 1000;
    l_U2126 = 0;
    StrCopy( ref l_U2219, "SNYC_VIG14A", 64 );
    StrCopy( ref l_U2235, "SNYC_ABPB", 64 );
    StrCopy( ref l_U2251, "SNYC_VIG21A", 64 );
    StrCopy( ref l_U2267, "SNYC_VIG21B", 64 );
    l_U2595 = 1;
    l_U2596 = 0;
    l_U2597 = 1;
    l_U2598 = 0;
    l_U2600 = "mid_03_nybar_concat";
    l_U2633 = 0;
    StrCopy( ref l_U2704, "mid_03c_nybar_concat", 32 );
    l_U2744 = 0;
    l_U2855 = 0;
    l_U2856 = 0;
    l_U2857 = 0;
    l_U2870 = 0;
    l_U2871 = 0;
    l_U2872 = 0;
    l_U2882 = 0;
    l_U2883 = "LEVEL_S_NYBAR_CP_04";
    l_U2884 = "MID_03B_NYBAR_PT1_CAM";
    l_U2885 = "MID_03B_NYBAR_PT2_CAM";
    l_U2917 = 0;
    sub_793( "RJM", "Script s_nyc2_rooftops.sc is starting...", 0 );
    l_U275 = 0;
    if (g_U779 < 2)
    {
        sub_861( 0 );
    }
    else if ((g_U779 <= 3) AND (g_U779 >= 2))
    {
        sub_1645();
    }
    else if (g_U779 >= 4)
    {
        sub_1966( 1 );
    };;;
    if (g_U779 <= 2)
    {
        sub_2150( 2, 1 );
    }
    else
    {
        sub_2150( 3, 1 );
    }
    sub_2453();
    sub_2564();
    sub_8957();
    sub_9631();
    START_WIDGET_GROUP( "PASSOS In-Flow Abandoned Building Run" );
    sub_30952( ref g_U3425, "Vig 17 Start Position: ", 1036831949 );
    ADD_WIDGET_FLOAT_SLIDER( "Vig 17 Start Rotation: ", ref g_U3428, 65356, 180, 0.10000000 );
    STOP_WIDGET_GROUP();
    START_WIDGET_GROUP( "Tower Fall" );
    sub_30952( ref g_U3425, "Vig 17 Start Position: ", 1036831949 );
    ADD_WIDGET_INT_SLIDER( "Tower Fall Cam Time", ref l_U2107, 0, 2000, l_U2107 );
    STOP_WIDGET_GROUP();
    while (NOT IS_EXITFLAG_SET())
    {
        if (g_U3437[9])
        {
            SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        }
        if ((g_U780 <= 6) AND (g_U780 >= 2))
        {
            sub_31294();
        }
        sub_34859();
        sub_45576();
        WAIT( 0 );
    }
    sub_793( "RJM", "Script s_nyc2_rooftops.sc is starting to end", 0 );
    sub_42793();
    sub_83671();
    sub_83842( 2 );
    SET_BULLET_CAM_PREF( sub_10194(), "", "", "", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
    sub_793( "RJM", "Script s_nyc2_rooftops.sc is ending", 0 );
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "s_nyc2_rooftops" );
    SET_EXITFLAG_RESPONSE();
    return;
}

void sub_793(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    return;
}

void sub_861(unknown uParam0)
{
    sub_878( g_U3097, uParam0 );
    sub_878( -859113524, uParam0 );
    sub_878( 1740663406, 1 );
    sub_878( g_U774, 1 );
    sub_878( g_U777, 1 );
    sub_878( g_U775, 1 );
    sub_1124( "ny_anim", 0, 1 );
    sub_1202( -329975025, uParam0 );
    sub_1424( "Vehicle/Vehicle_Car.act", 1 );
    sub_1500( "SNYCAUD" );
    return;
}

void sub_878(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
        sub_983( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_983(unknown uParam0)
{
    return;
}

void sub_1124(unknown uParam0, unknown uParam1, int iParam2)
{
    REQUEST_ANIM_DICT( uParam0, uParam1 );
    "[doubled result, dropped if not asigned]";
    if (iParam2 == 1)
    {
        while ((HAS_ANIM_DICT_LOADED( uParam0, uParam1 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_1202(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to load does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 0)
    {
        ISEQ_REQUEST( uParam0 );
        ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
        if (iParam1 == 1)
        {
            while ((ISEQ_QUERY_STATE( uParam0, 1 )) == 1)
            {
                WAIT( 0 );
            }
        }
    }
    return;
}

void sub_1424(unknown uParam0, int iParam1)
{
    ACTION_TREE_LOAD( uParam0 );
    if (iParam1 == 1)
    {
        while ((IS_ACTION_TREE_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_1500(unknown uParam0)
{
    StrCopy( ref g_U157._fU0, uParam0, 16 );
    sub_1520();
    return;
}

void sub_1520()
{
    int I;

    for ( I = 0; I <= 8; I++ )
    {
        g_U157._fU16[I]._fU0 = nil;
        g_U157._fU16[I]._fU4 = 0;
        g_U157._fU92[I] = 0;
    }
    return;
}

void sub_1645()
{
    sub_861( 1 );
    sub_1662( 1 );
    return;
}

void sub_1662(unknown uParam0)
{
    sub_1124( "ny_wtanim", 0, uParam0 );
    sub_878( -1522991054, uParam0 );
    sub_878( -1193498759, uParam0 );
    sub_878( 588151771, uParam0 );
    sub_878( 216303562, uParam0 );
    sub_878( -946946919, uParam0 );
    sub_878( -1915312722, uParam0 );
    sub_878( -1549971141, uParam0 );
    sub_1202( 1419096468, uParam0 );
    sub_1202( 123489604, uParam0 );
    sub_1202( -900483547, uParam0 );
    sub_1202( -652127296, uParam0 );
    sub_1202( 8102532, uParam0 );
    sub_1202( -1131749617, uParam0 );
    sub_1202( 2119011196, uParam0 );
    sub_1202( -1930417983, uParam0 );
    sub_1202( 361106065, uParam0 );
    sub_1202( 1876730400, uParam0 );
    sub_1202( 1423764005, uParam0 );
    sub_1202( -361846818, uParam0 );
    sub_1202( -787715329, uParam0 );
    return;
}

void sub_1966(unknown uParam0)
{
    sub_878( g_U3097, uParam0 );
    sub_878( g_U3091, uParam0 );
    sub_878( -1809963165, uParam0 );
    sub_1124( "PAS_INT", 0, uParam0 );
    sub_1202( -1202559929, uParam0 );
    sub_1124( "FACE_PASNYB", 0, uParam0 );
    sub_1424( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act", uParam0 );
    sub_1500( "SNYCAUD" );
    return;
}

void sub_2150(unknown uParam0, unknown uParam1)
{
    sub_2166( -862236369, 1 );
    switch (uParam0)
    {
        case 0:
        case 1:
        case 2:
        sub_2166( 434544317, uParam1 );
        sub_2166( -691403429, uParam1 );
        break;
        case 3:
        case 4:
        case 5:
        case 6:
        sub_2166( 434544317, uParam1 );
        sub_2166( -691403429, uParam1 );
        sub_2166( 1478009203, uParam1 );
        sub_2166( -1074756423, uParam1 );
        break;
        case 7:
        case 8:
        sub_2166( 434544317, uParam1 );
        sub_2166( -691403429, uParam1 );
        sub_2166( -1074756423, uParam1 );
        break;
    }
    return;
}

void sub_2166(unknown uParam0, boolean bParam1)
{
    REQUEST_WEAPON( uParam0 );
    if (bParam1)
    {
        while ((HAS_WEAPON_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_2453()
{
    START_WIDGET_GROUP( "Water Tower tweaking" );
    ADD_WIDGET_FLOAT_SLIDER( "Water tower anim start phase", ref g_U3586, 0, 1.00000000, 0.00010000 );
    STOP_WIDGET_GROUP();
    return;
}

void sub_2564()
{
    sub_2647( ref l_U529, "TRIG_WALK_MID02_AB", -365.70000000, -2.61000000, 6.09000000, 5.00000000, 5.00000000, 2.76000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U550, "TRIG_MID02_AB", -362.98000000, -2.65000000, 6.05000000, 1.75000000, 3.00000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U571, "TRIG_LOCK_ROOF_DOOR", -365.62000000, 0.29000000, 2.61000000, 5.20000000, 10.10000000, 6.11000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U592, "TRIG_ROOF_REACTION", -361.59530000, -2.55377300, 6.25992800, 5.75000000, 3.25000000, 3.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U613, "TRIG_MIDSCENE_02C_DEATH", -288.58000000, -20.05000000, 1.32000000, 6.00000000, 14.44000000, 11.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U634, "TRIG_MIDSCENE_03", -292.89000000, -20.05000000, 1.32000000, 6.00000000, 14.44000000, 11.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U655, "TRIG_VIGNETTE_20", -243.94000000, -25.91000000, 5.04000000, 2.00000000, 3.50000000, 1.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U676, "TRIG_FLY_MY_PRETTIES_ROOF0", -335.86000000, -5.12000000, 3.71000000, 14.00000000, 16.50000000, 5.46000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U697, "TRIG_START_ROOF_TASKING", -324.05000000, -19.54000000, -4.16000000, 18.00000000, 10.00000000, 10.00000000, 0.00000000, 0.00000000, 90.16000000, 1 );
    sub_2647( ref l_U718, "TRIG_UROOF1_CREATION", -324.05000000, -19.54000000, 2.26000000, 18.00000000, 10.00000000, 10.00000000, 0.00000000, 0.00000000, 90.16000000, 1 );
    sub_2647( ref l_U739, "TRIG_END_WHOLE_APT_CONTEXT", -324.05000000, -19.54000000, 2.26000000, 18.00000000, 10.00000000, 10.00000000, 0.00000000, 0.00000000, 90.16000000, 1 );
    sub_2647( ref l_U760, "TRIG_DISABLE_SHOOTDODGE", -296.06000000, -20.28000000, 6.94000000, 10.00000000, 15.00000000, 5.46000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1432, "TRIG_MAX_UP_STAIRS", -239.00000000, -26.33000000, 1.66000000, 3.00000000, 1.75000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U781, "TRIG_ABANDON_FLOOR1_CREATION", -260.28000000, -9.79000000, -0.53000000, 25.00000000, 14.04000000, 7.00000000, 0.00000000, 0.00000000, -90.00000000, 1 );
    sub_2647( ref l_U802, "TRIG_ABANDONED_CHECKPOINT", -251.86000000, -2.46000000, 2.00000000, 3.94000000, 4.03000000, 3.50000000, 0.00000000, 0.00000000, 15.01000000, 1 );
    sub_2647( ref l_U823, "TRIG_PASSOS_FINISHED_VAULT", -255.86000000, -1.46000000, 0.00000000, 3.94000000, 12.00000000, 3.13000000, 0.00000000, 0.00000000, 0.01000000, 1 );
    sub_2647( ref l_U1012, "TRIG_MPM_FAILURE", -284.46000000, -1.74000000, 1.41000000, 9.46000000, 12.01000000, 1.70000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1033, "TRIG_MPM_FAILURE2", -290.78000000, -3.54000000, 2.97000000, 3.00000000, 13.00000000, 1.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1054, "TRIG_POST_MPM_LEDGE_UP", -277.73000000, -1.74000000, 1.43000000, 4.00000000, 18.00000000, 2.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1159, "PASSOS_MID_05A_DEATH", -239.74000000, -26.37000000, 3.99000000, 7.00000000, 1.80000000, 3.00000000, 0.00000000, 35.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1180, "PASSOS_MID_05B_DEATH", -240.58000000, -14.94000000, 1.24000000, 18.00000000, 14.00000000, 2.00000000, 0.00000000, 0.00000000, 90.00000000, 1 );
    sub_2647( ref l_U844, "TRIG_ROOF_DEATHZONE1", -351.14000000, -12.55000000, -5.73000000, 65.65000000, 50.00000000, 10.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U865, "TRIG_ROOF_DEATHZONE2", -271.34000000, -12.55000000, -3.71000000, 94.59000000, 50.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U886, "TRIG_ROOF_DEATHZONE3", -309.16000000, -6.15000000, -0.28000000, 40.00000000, 17.00000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U907, "TRIG_ROOF_DEATHZONE4", -288.11000000, -19.58000000, -3.49000000, 40.00000000, 17.00000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U928, "TRIG_ROOF_DEATHZONE5", -349.69000000, -12.48000000, -1.41000000, 40.00000000, 17.00000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U949, "TRIG_ROOF_DEATHZONE6", -300.26000000, -7.16000000, 1.48000000, 20.00000000, 17.00000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U970, "tbRoofDeathzone7", -351.59000000, -13.08000000, -0.03000000, 7.00000000, 20.00000000, 10.00000000, 0.00000000, 0.00000000, -90.00000000, 1 );
    sub_2647( ref l_U991, "tbRoofDeathzone8", -349.39000000, -11.05000000, 3.96000000, 4.00000000, 4.00000000, 6.00000000, 0.00000000, 0.00000000, -90.00000000, 1 );
    sub_2647( ref l_U1453, "TRIG_PASSOS_ABNDN_YELL", -233.54000000, -19.88000000, 5.11000000, 1.75000000, 5.00000000, 1.40000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1474, "TRIG_ABDN_FLOOR2_TASK", -244.51000000, -25.91000000, 5.04000000, 2.00000000, 5.00000000, 2.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1495, "TRIG_ABDN_FLOOR2_TASK2", -239.57000000, -20.42000000, 4.90000000, 12.00000000, 6.00000000, 3.40000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1075, "PASSOS_MOVE_TO_ABDN", -260.28000000, -2.12000000, -0.53000000, 14.00000000, 20.00000000, 7.00000000, 0.00000000, 0.00000000, -90.00000000, 1 );
    sub_2647( ref l_U1096, "PASSOS_TASK_TOWARDS_ABDN", -282.14000000, -1.74000000, 1.41000000, 5.00000000, 12.01000000, 1.70000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1138, "TRIG_STREAMING_REQUEST", -365.94000000, -3.12000000, 2.60000000, 5.00000000, 5.00000000, 2.76000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1369, "PASSOS_ABANDON_FLOOR2_STAIRS_WARN", -236.98000000, -26.33000000, -1.80000000, 3.00000000, 1.75000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1390, "PASSOS_ABANDON_FLOOR2_FE_WARN", -232.78000000, -17.80000000, 5.11000000, 2.60000000, 1.50000000, 2.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1411, "PASSOS_ABANDON_FLOOR2_FE_DEATH", -231.95000000, -21.98000000, 2.50000000, 1.50000000, 3.00000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1117, "TRIG_TELEPORT_MAX_FLOOR2_MIDSCENE", -239.57000000, -24.48000000, 4.90000000, 12.00000000, 6.00000000, 3.40000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1201, "MID_06_FAILSAFE", -234.04000000, -20.20000000, 5.11000000, 1.75000000, 4.00000000, 1.40000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1222, "MID_06_FAILSAFE2", -221.14000000, -20.91000000, 4.95000000, 24.00000000, 30.00000000, 10.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1243, "MID_06_WalkTrigger", -233.15000000, -20.04000000, 5.11000000, 6.00000000, 6.50000000, 4.40000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1264, "MID_06_StartTrigger", -233.15000000, -20.04000000, 5.11000000, 1.00000000, 1.50000000, 1.40000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1327, "TRIG_ROOFTOP_COVER", -334.94000000, -14.70000000, 3.71000000, 12.00000000, 4.00000000, 5.46000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1348, "TASK_AB_FLOOR1_EXTRA", -240.58000000, -14.94000000, 1.24000000, 9.00000000, 14.00000000, 2.00000000, 0.00000000, 0.00000000, 90.00000000, 1 );
    sub_2647( ref l_U1516, "TRIG_FIRE_ESCAPE_DIVE_DEATH_1", -229.85000000, -19.23000000, 1.94000000, 3.00000000, 9.00000000, 5.01000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1537, "TRIG_FIRE_ESCAPE_DIVE_DEATH_2", -231.69000000, -25.23000000, 1.94000000, 4.00000000, 3.00000000, 5.01000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1285, "TRIG_CLEANUP_BY_ROOF_DOOR", -285.05000000, -3.60000000, 1.40000000, 1.50000000, 1.65000000, 2.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1306, "tbPreventHobokenDialogue", -300.28000000, -20.28000000, 6.58000000, 20.00000000, 15.00000000, 5.46000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1587, "TRIG_CHOPSHOP_SCRIPT_LOAD", -233.57000000, -20.12000000, 4.90000000, 5.50000000, 7.00000000, 3.40000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2647( ref l_U1566, "TRIG_CHOPSHOP_SCRIPT_PRELOAD", -239.95000000, -26.23000000, 1.99000000, 8.00000000, 3.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_6893( ref l_U1558, "TETH_MPM", -287.00420000, -1.05960100, 0.00000000, 6.00000000, 4.00000000, 6.00000000, 0.00000000, 0.00000000, -90.00000000, 1 );
    sub_6893( ref l_U1559, "TETH_APT_ROOF", -351.80000000, -13.08000000, 6.00000000, 30.00000000, 43.00000000, 4.00000000, 0.00000000, 0.00000000, -90.00000000, 1 );
    sub_6893( ref l_U1563, "TETH_ROOF_ADVANCE", -309.50000000, -21.37000000, 3.88000000, 17.50000000, 14.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_6893( ref l_U1564, "TETH_ROOF_ADVANCE2", -296.18000000, -21.36000000, 6.29000000, 8.82000000, 7.76000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_6893( ref l_U1565, "TETH_ROOF_IN_COVER", -321.35000000, -21.37000000, 3.28000000, 9.00000000, 12.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_6893( ref l_U1560, "TETH_ABANDON_FLOOR1_FRONT", -239.52000000, -12.72000000, 1.35000000, 5.00000000, 4.00000000, 1.50000000, 0.00000000, 0.00000000, -15.00000000, 1 );
    sub_6893( ref l_U1561, "TETH_ABANDON_FLOOR1_BACK", -239.46000000, -20.14000000, 1.34000000, 11.00000000, 8.00000000, 1.49000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_6893( ref l_U1562, "TETH_ABANDON_FLOOR2_GROUP3", -240.66000000, -12.01000000, 4.93000000, 15.00000000, 15.00000000, 1.40000000, 0.00000000, 0.00000000, 90.15000000, 1 );
    sub_7548( ref l_U1609[0], -346.33600000, -6.72100000, 6.33000000, 65446, 1236259418, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1609[1], -345.53800000, -6.11800000, 6.33000000, 135, 1322463443, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1609[2], -344.90400000, -6.81100000, 6.33000000, 90, 2031544278, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1673[0], -333.45540000, -24.73068000, 6.32011800, 0, 951389475, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1809[0], -330.68000000, -15.50000000, 6.31000000, -90.78000000, 494399252, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1695[0], -302.48310000, -16.69737000, 6.51252000, 180, 732399117, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1695[1], -302.42990000, -17.61116000, 6.64468100, 180, 105659276, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1695[2], -302.36640000, -25.81591000, 6.77241500, 0, 1236259418, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1695[3], -302.37000000, -24.73000000, 6.77000000, 0, 1322463443, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1759[0], -319.70500000, -18.58575000, 4.79393600, 90, 951389475, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1759[1], -320.17010000, -24.16053000, 4.99139200, 90, -518261513, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1759[2], -312.62000000, -23.35000000, 5.70000000, 0.00000000, -842821795, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U2127[0], -287.76710000, -2.73186000, 1.45000000, 176.36000000, -1969074258, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U2127[1], -287.75360000, -0.79111000, 1.45000000, 176.77000000, 951389475, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U2127[2], -287.75360000, -0.79111000, 1.45000000, 171.43000000, -1491110017, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U2127[3], -285.46100000, -0.32396000, 1.45000000, -175.12000000, 11941526, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U2127[4], -285.58760000, -2.71476000, 1.45000000, 177.93000000, 2031544278, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U2127[5], -282.12000000, 3.13000000, 1.50000000, 90, 2104411633, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1831[0], -242.06000000, -17.65000000, 1.71000000, -17.81000000, 596270676, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1831[1], -241.31000000, -17.65000000, 1.71000000, -17.81000000, -363321782, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1867[0], -244.54000000, -17.52000000, 1.71000000, -157.89000000, -518261513, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1867[1], -244.89000000, -16.39000000, 1.71000000, -151.39000000, 357988079, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1903[0], -243.91000000, -25.61000000, 1.77000000, 0, 59494386, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1903[1], -240.01000000, -26.31000000, 4.52000000, 65446, 844547771, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1939[0], -235.50000000, -15.13000000, 5.11000000, -174.96000000, 629269026, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1939[1], -236.58000000, -15.12000000, 5.11000000, 171.93000000, -88915421, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1939[2], -243.30000000, -15.27000000, 5.11000000, 164.88000000, 293821277, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U1939[3], -244.04000000, -15.07000000, 5.11000000, 164.88000000, 1692162125, 7, 3, 2, 0, 0 );
    sub_7548( ref l_U2005, g_U781[3]._fU0, g_U781[3]._fU12, -1756913695, 26, 6, 0, 0, 0 );
    sub_7548( ref l_U2018, g_U781[5]._fU0, g_U781[5]._fU12, -1756913695, 26, 6, 0, 0, 0 );
    sub_7548( ref l_U2031, g_U781[6]._fU0, g_U781[6]._fU12, -1756913695, 26, 6, 0, 0, 0 );
    return;
}

void sub_2647(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    StrCopy( ref iParam0->_fU0, uParam1, 64 );
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = {uParam2};
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 1, iParam0 + 0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

void sub_6893(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 2, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

void sub_7548(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

void sub_8957()
{
    l_U2853 = 0;
    l_U2854 = 0;
    l_U2858 = 0;
    l_U2855 = 0;
    l_U2856 = 0;
    l_U2857 = 0;
    l_U2303 = 0;
    l_U2304 = 0;
    l_U2003 = 0;
    l_U2004 = 0;
    l_U1659[0] = 0;
    l_U1659[1] = 0;
    l_U1659[2] = 0;
    l_U1663 = 0;
    l_U2594 = 0;
    l_U2533 = 0;
    l_U2126 = 0;
    l_U2283 = 0;
    l_U2284 = 0;
    l_U2285 = 0;
    l_U2286 = 0;
    l_U2287 = 0;
    l_U2288 = 0;
    l_U2289 = 0;
    l_U2290 = 0;
    l_U2291 = 0;
    l_U2292 = 0;
    l_U2294 = 0;
    l_U2293 = 0;
    l_U2295 = 0;
    l_U2296 = 0;
    l_U2297 = 0;
    l_U2298 = 0;
    l_U2299 = 0;
    l_U2300 = 0;
    l_U2859 = 2;
    l_U2301 = 0;
    l_U2302 = 0;
    STOP_SCRIPT_STREAM( 0 );
    sub_9240( "S_NYC_TOWER_MPM_SUCCESS", 0, 1 );
    sub_9324( ref l_U2305, 15000, 1, 0 );
    sub_9324( ref l_U2314, 5000, 1, 0 );
    l_U2870 = 0;
    l_U2871 = 0;
    l_U2872 = 0;
    l_U2882 = 0;
    sub_9324( ref l_U2873, 1000, 1, 0 );
    sub_9512( ref l_U2350 );
    return;
}

void sub_9240(unknown uParam0, unknown uParam1, int iParam2)
{
    if (iParam2 == 0)
    {
        REQUEST_SCRIPT_STREAM( uParam0, uParam1 );
    }
    else
    {
        while ((LOAD_SCRIPT_STREAM( uParam0, uParam1 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_9324(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

void sub_9512(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

void sub_9631()
{
    if ((g_U779 == 6) || ((g_U779 == 5) || ((g_U779 == 4) || ((g_U779 == 3) || (g_U779 == 2)))))
    {
        sub_9687( 2, 0 );
        SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
        if (NOT (sub_10069( ref l_U349 )))
        {
            sub_12445( sub_10194(), -691403429, 200, 0, 1 );
        }
        g_U780 = g_U779;
    }
    if (g_U779 == 2)
    {
        sub_793( "RJM", "INITIALIZE_PLAYER_BY_CHECKPOINT says we're in MCE_ROOFTOPS", 0 );
        l_U2595 = 2;
        sub_14499( ref l_U349, 2, sub_10194(), g_U3141[2]._fU0, g_U3141[2]._fU12, g_U3141[2]._fU16, g_U3141[2]._fU20, 0 );
        sub_18113();
        sub_22740();
        sub_23967( 1 );
        SET_TRAFFIC_SYSTEM( 1 );
        sub_25299( l_U2600, 1 );
        sub_25552( ref g_U2860, 1 );
        sub_25755( ref g_U2860, 1 );
        l_U2853 = 2;
    }
    else if (g_U779 == 3)
    {
        sub_793( "RJM", "INITIALIZE_PLAYER_BY_CHECKPOINT says we're in MCE_ROOFTOPS_MPM", 0 );
        sub_26009( sub_10194(), g_U3141[3]._fU0, g_U3141[3]._fU12 );
        FREEZE_PED_POSITION( sub_10194(), 1 );
        sub_14499( ref l_U385, 3, sub_10194(), g_U3141[3]._fU0, g_U3141[3]._fU12, g_U3141[3]._fU16, g_U3141[3]._fU20, 0 );
        sub_23967( 1 );
        SET_TRAFFIC_SYSTEM( 1 );
        WAIT( 1000 );
        l_U2595 = 3;
        sub_25299( ref l_U2704, 1 );
        l_U2853 = 9;
        l_U2854 = 1;
    }
    else if (g_U779 == 4)
    {
        sub_793( "RJM", "INITIALIZE_PLAYER_BY_CHECKPOINT says we're in MCE_ROOFTOPS_MPM", 0 );
        sub_14499( ref l_U421, 4, sub_10194(), g_U3141[4]._fU0, g_U3141[4]._fU12, g_U3141[4]._fU16, g_U3141[4]._fU20, 0 );
        sub_26339();
        sub_1202( -1236175571, 1 );
        sub_26805();
        l_U2595 = 4;
        SET_TRAFFIC_SYSTEM( 1 );
        WAIT( 1000 );
        l_U2595 = 4;
        l_U2853 = 10;
    }
    else if (g_U779 == 5)
    {
        sub_793( "RJM", "INITIALIZE_PLAYER_BY_CHECKPOINT says we're in MCE_ABANDONED_BUILDING", 0 );
        sub_14499( ref l_U457, 5, sub_10194(), g_U3141[5]._fU0, g_U3141[5]._fU12, g_U3141[5]._fU16, g_U3141[5]._fU20, 0 );
        START_CONTEXT( "NYBAR_ABANDONED_BUILDING" );
        sub_27139();
        sub_27380();
        sub_1202( -223586764, 1 );
        sub_1202( 1103749565, 1 );
        sub_1202( -1222535398, 1 );
        SET_TRAFFIC_SYSTEM( 0 );
        l_U2853 = 12;
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U3141[5]._fU16, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U3141[5]._fU20, 1065353216, 0 );
        l_U2291 = 1;
        sub_29282();
        sub_29939( ref l_U2561, 4000 );
        l_U2595 = 5;
        sub_30095( 1000 );
    }
    else if (g_U779 == 6)
    {
        sub_793( "RJM", "INITIALIZE_PLAYER_BY_CHECKPOINT says we're in MCE_ABANDONED_BUILDING_2", 0 );
        sub_14499( ref l_U493, 6, sub_10194(), g_U3141[6]._fU0, g_U3141[6]._fU12, g_U3141[6]._fU16, g_U3141[6]._fU20, 0 );
        sub_30332();
        sub_1202( -223586764, 1 );
        sub_1202( 637400269, 1 );
        sub_1202( 1103749565, 1 );
        SET_TRAFFIC_SYSTEM( 0 );
        sub_29282();
        l_U2595 = 6;
        if ((IS_SCREEN_FADING_OUT()) || (IS_SCREEN_FADED_OUT()))
        {
            DO_SCREEN_FADE_IN( 500 );
        }
        l_U2003 = 1;
        l_U2853 = 14;
        l_U2291 = 1;
    };;;;;
    return;
}

void sub_9687(unknown uParam0, unknown uParam1)
{
    sub_793( "BSW", "SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR start...", 0 );
    SET_WEATHER_TRANSITION_IMMEDIATE( uParam1 );
    switch (uParam0)
    {
        case 0:
        case 1:
        case 20:
        case 30:
        SET_TIME_OF_DAY( 12, 0 );
        FREEZE_TIME_OF_DAY( 12, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
        break;
        case 7:
        SET_TIME_OF_DAY( 18, 0 );
        FREEZE_TIME_OF_DAY( 18, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
        break;
        case 2:
        case 3:
        case 4:
        case 5:
        case 6:
        case 8:
        case 21:
        case 22:
        case 24:
        SET_TIME_OF_DAY( 18, 0 );
        FREEZE_TIME_OF_DAY( 18, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "SNOW_LIGHT" );
        break;
        default:
        SET_TIME_OF_DAY( 12, 0 );
        FREEZE_TIME_OF_DAY( 12, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
        break;
    }
    return;
}

int sub_10069(unknown uParam0)
{
    sub_793( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U0 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U1 );
            sub_10260( uParam0, sub_10194() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

int sub_10194()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED( sub_10216() );
    }
    return 0;
}

void sub_10216()
{
    return GET_PLAYER_ID();
}

void sub_10260(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

    sub_793( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U0)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
    sub_10444( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
        sub_11521( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 = sub_11813( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
        sub_12160( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 = sub_11813( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
        sub_12160( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 = sub_11813( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
        sub_12160( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 = sub_12445( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
        sub_12160( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 = sub_12445( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
        sub_12160( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U0 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if ((sub_12938( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
    sub_13099( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING( sub_10194(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U0)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U0 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
    sub_793( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

void sub_10444(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 = sub_10476( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

int sub_10476(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

void sub_11521(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

void sub_11813(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                }
            }
        }
    }
    else
    {
        sub_983( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

void sub_12160(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

void sub_12445(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                }
            }
        }
    }
    else
    {
        sub_983( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

int sub_12938(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

void sub_13099(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 = sub_10476( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
    sub_13171( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

void sub_13171(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

void sub_14499(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

    sub_793( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
        sub_793( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
        sub_13099( iParam1 );
        sub_14758( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
            sub_15209( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
            sub_15209( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_15441( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
            sub_15209( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_15441( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_15441( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
            sub_15209( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_15441( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_15441( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_15441( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
            sub_15209( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_15441( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_15441( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_15441( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if (sub_15441( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
            sub_16999( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U1, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
    sub_793( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

void sub_14758(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 = sub_10476( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
        sub_793( "TEH", "Ending context", 0 );
        sub_793( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

void sub_15209(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

void sub_15441(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

void sub_16999(int iParam0)
{
    sub_983( "CHECKPOINT DATA" );
    sub_17038( iParam0->_fU4 );
    sub_17061( iParam0->_fU16 );
    sub_17061( iParam0->_fU20 );
    sub_17061( iParam0->_fU24 );
    sub_17104( iParam0->_fU28 );
    sub_17104( iParam0->_fU56 );
    sub_17104( iParam0->_fU60 );
    sub_17104( iParam0->_fU64 );
    sub_17104( iParam0->_fU68 );
    sub_17104( iParam0->_fU72 );
    sub_17104( iParam0->_fU76 );
    sub_17104( iParam0->_fU80 );
    sub_17104( iParam0->_fU84 );
    sub_17104( iParam0->_fU88 );
    sub_17104( iParam0->_fU92 );
    sub_17061( iParam0->_fU32 );
    sub_17104( iParam0->_fU36 );
    sub_17104( iParam0->_fU40 );
    sub_17104( iParam0->_fU44 );
    sub_17061( iParam0->_fU136 );
    sub_17309( iParam0->_fU140 );
    sub_17104( iParam0->_fU52 );
    sub_983( "---nRightHolsterAttachmentEnabled: " );
    sub_17104( iParam0->_fU96 );
    sub_983( "---nRightHolsterAttachmentToggled: " );
    sub_17104( iParam0->_fU100 );
    sub_983( "---nLeftHolsterAttachmentEnabled: " );
    sub_17104( iParam0->_fU104 );
    sub_983( "---nLeftHolsterAttachmentToggled: " );
    sub_17104( iParam0->_fU108 );
    sub_983( "---nRifleHolsterAttachmentEnabled: " );
    sub_17104( iParam0->_fU112 );
    sub_983( "---nRifleHolsterAttachmentToggled: " );
    sub_17104( iParam0->_fU116 );
    sub_983( "---nRightHandAttachmentEnabled: " );
    sub_17104( iParam0->_fU120 );
    sub_983( "---nRightHandAttachmentToggled: " );
    sub_17104( iParam0->_fU124 );
    sub_983( "---nLeftHandAttachmentEnabled: " );
    sub_17104( iParam0->_fU128 );
    sub_983( "---nLeftHandAttachmentToggled: " );
    sub_17104( iParam0->_fU132 );
    sub_17104( l_U1 );
    sub_17104( 144 );
    return;
}

void sub_17038(unknown uParam0, unknown uParam1, unknown uParam2)
{
    return;
}

void sub_17061(unknown uParam0)
{
    return;
}

void sub_17104(unknown uParam0)
{
    return;
}

void sub_17309(boolean bParam0)
{
    if (bParam0)
    {
        ;
    }
    return;
}

void sub_18113()
{
    sub_793( "RJM", "CREATE_ROOFTOP_ENEMIES_AND_PASSOS - Start", 0 );
    SET_PED_MODEL_LOD_DISTANCES( 233534649, 25.00000000, 100.00000000 );
    sub_18201();
    sub_18578( ref l_U1809, ref l_U1823, ref l_U1825, -691403429, 0.50000000, "AIT_NORMAL", 0, 0, 25000, 2, 0, 25000, 0 );
    sub_20866( ref l_U1823, l_U1559, 1 );
    sub_21424( ref l_U1823 );
    sub_20682( ref l_U1823, "APT_ROOF_" );
    sub_21675();
    sub_22151();
    sub_793( "RJM", "CREATE_ROOFTOP_ENEMIES_AND_PASSOS - end", 0 );
    return;
}

void sub_18201()
{
    sub_793( "SBA", "CREATE_FIRST_ENCOUNTER_ROOF_GUYS", "***" );
    sub_793( "SBA", "CREATE_FIRST_ENCOUNTER_ROOF_GUYS: Creating patrolers", "***" );
    sub_18347( -862236369, 0, 25000, 25000 );
    sub_18445( 1, 434544317, 0, 25000, 25000 );
    sub_18578( ref l_U1609, ref l_U1649, ref l_U1653, 0, 1.00000000, "AIT_NORMAL", 0, 0, 25000, 4, 0, 25000, "ROOF_PATROL " );
    sub_12445( l_U1649[0], -862236369, 25000, 0, 0 );
    sub_12445( l_U1649[1], 434544317, 25000, 0, 0 );
    sub_12445( l_U1649[2], -862236369, 25000, 0, 0 );
    sub_20866( ref l_U1649, l_U1559, 1 );
    sub_21044( ref l_U1649, 1 );
    sub_1202( -329975025, 1 );
    ISEQ_REGISTER_ENTITY( -329975025, "thug0", l_U1649[0], 0 );
    ISEQ_REGISTER_ENTITY( -329975025, "thug1", l_U1649[1], 0 );
    ISEQ_REGISTER_ENTITY( -329975025, "thug2", l_U1649[2], 0 );
    ISEQ_START( -329975025 );
    sub_793( "SBA", "CREATE_FIRST_ENCOUNTER_ROOF_GUYS: Creating right side guys", "***" );
    sub_18578( ref l_U1673, ref l_U1687, ref l_U1689, -862236369, 0.50000000, "AIT_NORMAL", 0, 0, 25000, 2, 0, 25000, 0 );
    sub_20682( ref l_U1687, "ROOF_RIGHT_" );
    sub_20866( ref l_U1687, l_U1559, 1 );
    sub_21424( ref l_U1687 );
    return;
}

void sub_18347(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    int I;

    for ( I = 0; I < 10; I++ )
    {
        l_U3[I]._fU0 = uParam0;
        l_U3[I]._fU4 = uParam2;
        l_U3[I]._fU8 = uParam1;
        l_U3[I]._fU12 = uParam3;
    }
    return;
}

int sub_18445(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (iParam0 < 10)
    {
        l_U3[iParam0]._fU0 = uParam1;
        l_U3[iParam0]._fU4 = uParam3;
        l_U3[iParam0]._fU8 = uParam2;
        l_U3[iParam0]._fU12 = uParam4;
        return 1;
    }
    return 0;
}

void sub_18578(unknown uParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5, boolean bParam6, unknown uParam7, unknown uParam8, unknown uParam9, int iParam10, unknown uParam11, unknown uParam12)
{
    int I;
    unknown uVar16;

    if ((uParam0^) != (uParam1^))
    {
        SCRIPT_ASSERT( "PED_ARRAY_INITIALIZE - Array sizes don't match!!", 0 );
        return;
    }
    sub_18667( uParam2, uParam4, 0 );
    if (IS_STRING_NULL( uParam12 ))
    {
        uParam12 = l_U2;
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_18886( (uParam1^)[I] );
        (uParam1^)[I] = sub_18967( ref (uParam0^)[I] );
        if (sub_19634( (uParam1^)[I] ))
        {
            SET_PED_AI_TEMPLATE( (uParam1^)[I], uParam5 );
            SET_PED_ALERTNESS( (uParam1^)[I], uParam9 );
            SET_PED_ALLOWED_TO_SURRENDER( (uParam1^)[I], 0 );
            sub_19748( (uParam1^)[I], uParam2 );
            if (iParam3 != -1569615261)
            {
                uVar16 = sub_12445( (uParam1^)[I], iParam3, uParam8, 0, 0 );
            }
            if (iParam10 != 0)
            {
                sub_11813( (uParam1^)[I], iParam10, 0, uParam11, 0 );
            }
            if (bParam6)
            {
                sub_20094( (uParam1^)[I], iParam3 );
            }
            switch (uParam7)
            {
                case 0: break;
                case 1:
                ENABLE_WEAPON_ATTACHMENT( uVar16, 13, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar16, 13, 1 );
                break;
                case 2:
                ENABLE_WEAPON_ATTACHMENT( uVar16, 14, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar16, 14, 1 );
                break;
                case 3:
                ENABLE_WEAPON_ATTACHMENT( uVar16, 12, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar16, 12, 1 );
                break;
            }
        }
    }
    sub_20682( uParam1, uParam12 );
    return;
}

void sub_18667(int iParam0, unknown uParam1, boolean bParam2)
{
    iParam0->_fU4 = uParam1;
    iParam0->_fU0 = CREATE_GROUP( 3, 1 );
    if (bParam2)
    {
        while (NOT (DOES_GROUP_EXIST( iParam0->_fU0 )))
        {
            WAIT( 0 );
        }
    }
    SET_GROUP_RATIO_FIRING_AT_VISIBLE( iParam0->_fU0, iParam0->_fU4 );
    SET_GROUP_RATIO_FIRING_AT_INVISIBLE( iParam0->_fU0, iParam0->_fU4 );
    if (iParam0->_fU8)
    {
        SET_GROUP_FORMATION( iParam0->_fU0, iParam0->_fU12 );
        SET_GROUP_FORMATION_SPACING( iParam0->_fU0, iParam0->_fU16 );
        SET_GROUP_FORMATION_MAX_MOVE_SPEED( iParam0->_fU0, iParam0->_fU20 );
    }
    return;
}

void sub_18886(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

void sub_18967(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
        sub_878( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
    sub_19446( iParam0->_fU40 );
    sub_19526( iParam0->_fU40 );
    return iParam0->_fU40;
}

void sub_19446(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

void sub_19526(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

int sub_19634(unknown uParam0)
{
    if ((NOT (IS_PED_DEAD( uParam0 ))) AND (DOES_PED_EXIST( uParam0 )))
    {
        return 1;
    }
    return 0;
}

void sub_19748(unknown uParam0, int iParam1)
{
    int iVar4;
    unknown uVar5;

    if ((DOES_GROUP_EXIST( iParam1->_fU0 )) == 0)
    {
        sub_983( "[SP]### Warning!!! Group does not exist. Creating new group specified attributes. ###" );
        if (iParam1->_fU4 > 0)
        {
            sub_18667( iParam1, iParam1->_fU4, 0 );
        }
        else
        {
            sub_18667( iParam1, 1056964608, 0 );
        }
    }
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        GET_GROUP_SIZE( iParam1->_fU0, ref iVar4, ref uVar5 );
        if (iVar4 == 0)
        {
            SET_PED_AS_GROUP_LEADER( uParam0, iParam1->_fU0 );
        }
        else
        {
            SET_PED_AS_GROUP_MEMBER( uParam0, iParam1->_fU0 );
        }
        SET_PED_NEVER_LEAVES_GROUP( uParam0, 1 );
    }
    return;
}

void sub_20094(unknown uParam0, unknown uParam1)
{
    switch (uParam1)
    {
        case -1569615261:
        case 406496141:
        case -862236369:
        case 456708483:
        case -1464892298:
        case 68019059:
        case -612753081:
        case -820634585:
        SET_PED_COMBAT_RANGE_MAX( uParam0, 10.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 1.00000000 );
        break;
        case 434544317:
        case 1845102363:
        case -168327769:
        case -184942895:
        case 514118749:
        case 1964270085:
        case -691403429:
        case 1478009203:
        case -1404433099:
        case 1194438308:
        SET_PED_COMBAT_RANGE( uParam0, 1 );
        SET_PED_COMBAT_RANGE_MAX( uParam0, 20.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 1.00000000 );
        break;
        case -1013714740:
        case -1074756423:
        case 1308526797:
        case 840671040:
        case 57534114:
        case 724901397:
        case 1992962408:
        SET_PED_COMBAT_RANGE( uParam0, 2 );
        SET_PED_COMBAT_RANGE_MAX( uParam0, 30.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 1.00000000 );
        break;
        case 1224272620:
        case 10648147:
        case 377623895:
        case 319712764:
        case -110877124:
        case -1659006841:
        SET_PED_COMBAT_RANGE( uParam0, 3 );
        SET_PED_COMBAT_RANGE_MAX( uParam0, 50.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 5.00000000 );
        break;
    }
    return;
}

void sub_20682(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

void sub_20866(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_20902( ref (uParam0^)[I], uParam1, uParam2 );
    }
    return;
}

void sub_20902(unknown uParam0, unknown uParam1, unknown uParam2)
{
    if (sub_19634( (uParam0^) ))
    {
        RESET_PED_TETHERING( (uParam0^) );
        sub_20941( ref uParam1, (uParam0^), uParam2 );
    }
    return;
}

void sub_20941(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_TETHERING_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_TETHERING_OPTION( uParam1, uParam2 );
    }
    return;
}

void sub_21044(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_21078( ref (uParam0^)[I], uParam1 );
    }
    return;
}

void sub_21078(unknown uParam0, unknown uParam1)
{
    if (sub_19634( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), uParam1 );
    }
    return;
}

void sub_21424(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_21455( (uParam0^)[I] );
    }
    return;
}

void sub_21455(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 1 );
        SET_PED_VISIBLE( uParam0, 0 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 0 );
        FREEZE_PED_POSITION( uParam0, 1 );
        SET_PED_COLLISION( uParam0, 0 );
        SET_PED_PROOFS( uParam0, 1, 1, 1, 1, 1 );
    }
    return;
}

void sub_21675()
{
    int I;

    sub_18667( ref l_U1753, 1.00000000, 1 );
    for ( I = 0; I <= 3; I++ )
    {
        sub_21755( ref l_U1695[I], ref l_U1748[I], -691403429, "AIT_NORMAL", 0, 25000, 2, 0, 25000 );
        WAIT( 0 );
        if (sub_19634( l_U1748[I] ))
        {
            sub_19748( l_U1748[I], ref l_U1753 );
            sub_21078( ref l_U1748[I], 0 );
            SET_PED_VISIBLE( l_U1748[I], 0 );
            sub_21455( l_U1748[I] );
        }
    }
    sub_20866( ref l_U1748, l_U1563, 1 );
    sub_20682( ref l_U1748, "ROOF_ADVANCE" );
    return;
}

void sub_21755(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, int iParam7, unknown uParam8)
{
    unknown uVar11;

    sub_18886( (uParam1^) );
    (uParam1^) = sub_18967( uParam0 );
    if (sub_19634( (uParam1^) ))
    {
        uVar11 = sub_12445( (uParam1^), uParam2, uParam5, 0, 1 );
        if (iParam7 != 0)
        {
            sub_11813( (uParam1^), iParam7, 0, uParam8, 0 );
        }
        SET_PED_AI_TEMPLATE( (uParam1^), uParam3 );
        SET_PED_ALERTNESS( (uParam1^), uParam6 );
        switch (uParam4)
        {
            case 0: break;
            case 1:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 13, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 13, 1 );
            break;
            case 2:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 14, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 14, 1 );
            break;
            case 3:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 12, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 12, 1 );
            break;
        }
    }
    return;
}

void sub_22151()
{
    sub_793( "SBA", "CREATE_COVER_ROOF_GUYS", "***" );
    sub_18578( ref l_U1759, ref l_U1799, ref l_U1803, -862236369, 0.50000000, "AIT_NORMAL", 0, 0, 25000, 2, 0, 25000, 0 );
    sub_21044( ref l_U1799, 1 );
    sub_20682( ref l_U1799, "ROOF_COVER_" );
    sub_22336( l_U1799[0], "GenCover", "F824CF1A_FAD87A44_Corner2", 0, 1 );
    if (sub_19634( l_U1799[1] ))
    {
        REMOVE_ALL_PED_WEAPONS( l_U1799[1] );
        sub_12445( l_U1799[1], -691403429, 25000, 0, 0 );
        sub_22336( l_U1799[1], "GenCover", "F824CF1A_ED4DB447_Corner2", 0, 1 );
    }
    sub_20866( ref l_U1799, l_U1565, 1 );
    sub_22567( ref l_U1799, 1 );
    return;
}

void sub_22336(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (sub_19634( uParam0 ))
    {
        CLEAR_PED_TASKS_IMMEDIATELY( uParam0 );
        sub_22370( ref uParam0, uParam4 );
        TASK_COMBAT_SNAP_TO_COVER( uParam0, uParam1, uParam2, uParam3 );
    }
    return;
}

void sub_22370(unknown uParam0, unknown uParam1)
{
    if (sub_19634( (uParam0^) ))
    {
        SET_PED_FLAG_LOCK_TO_COVER( (uParam0^), uParam1 );
    }
    return;
}

void sub_22567(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_22601( ref (uParam0^)[I], uParam1 );
    }
    return;
}

void sub_22601(unknown uParam0, unknown uParam1)
{
    if (sub_19634( (uParam0^) ))
    {
        sub_17309( uParam1 );
        SET_PED_FLAG_ALWAYS_HIDE_WHEN_IN_COVER( (uParam0^), uParam1 );
    }
    return;
}

void sub_22740()
{
    sub_793( "SBA", "P_CREATE_GRILL", 0 );
    sub_22784( l_U2044 );
    l_U2044 = sub_22864( -859113524, -304.89000000, -22.45600000, 6.38500000, 0.00000000, 0.00000000, 0.00000000, 0, 1, 0 );
    if ((DOES_OBJECT_EXIST( l_U2044 )) == 1)
    {
        SET_OBJECT_ONLY_DAMAGED_BY_PLAYER( l_U2044, 1 );
        CAMERA_CAN_TARGET_OBJECT( 1, l_U2044 );
        SET_OBJECT_AS_PATH_OBSTACLE( l_U2044 );
    }
    sub_23143();
    return;
}

void sub_22784(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

void sub_22864(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
        sub_878( uParam0, 1 );
    }
    Result = CREATE_OBJECT_NO_OFFSET( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

void sub_23143()
{
    sub_793( "CO", "P_CREATE_S_NY2_GG_M5_02", 0 );
    sub_23243( ref g_U683, g_U774, 658348797, 297855094, -370.43000000, 0.12000000, 6.33000000, 1.50000000, 0.00000000, 2.00000000, "" );
    sub_23372( ref g_U683 );
    return;
}

void sub_23243(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    if (NOT IS_ARCADE_MODE_ACTIVE())
    {
        iParam0->_fU4 = uParam1;
        iParam0->_fU8 = uParam2;
        iParam0->_fU12 = uParam3;
        iParam0->_fU16 = {uParam4};
        iParam0->_fU28 = {uParam7};
        StrCopy( ref iParam0->_fU40, uParam10, 32 );
    }
    else
    {
        sub_793( "CO", "NO GOLDEN GUNS FOR ARCADE", 0 );
    }
    return;
}

void sub_23372(int iParam0)
{
    sub_793( "CO", "P_CreateCollectible", 0 );
    if (NOT IS_ARCADE_MODE_ACTIVE())
    {
        if ((sub_23433( iParam0->_fU12 )) == 1)
        {
            sub_793( "CO", "HAS BEEN COLLECTED.", 0 );
        }
        else
        {
            sub_793( "CO", "has never been collected.", 0 );
        }
        if ((sub_23433( iParam0->_fU12 )) == 0)
        {
            sub_23638( iParam0->_fU0 );
            iParam0->_fU0 = sub_23706( iParam0->_fU8, iParam0->_fU16, iParam0->_fU28, 1, 0, 0, 1119092736 );
            if (NOT (IS_STRING_NULL( iParam0 + 40 )))
            {
                if ((DOES_PLACEMENT_EXIST( iParam0->_fU0 )) == 1)
                {
                    sub_793( "CO", "Added collectible to interior", 0 );
                    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( iParam0->_fU0, iParam0 + 40 );
                }
            }
        }
    }
    else
    {
        sub_793( "CO", "NO GOLDEN GUNS FOR ARCADE", 0 );
    }
    return;
}

int sub_23433(unknown uParam0)
{
    unknown uVar3;
    float fVar4;

    if (IS_COLLECTABLE_ENABLED() == 0)
    {
        return 1;
    }
    uVar3 = uParam0;
    fVar4 = STAT_HASH_GET_FLOAT( uVar3 );
    if (ARE_SP_STATS_LOADED() == 1)
    {
        if ((STAT_HASH_EXISTS( uVar3 )) == 1)
        {
            if (fVar4 > 0.00000000)
            {
                return 1;
            }
        }
    }
    return 0;
}

void sub_23638(unknown uParam0)
{
    if ((DOES_PLACEMENT_EXIST( uParam0 )) == 1)
    {
        REMOVE_PLACEMENT( uParam0 );
    }
    return;
}

void sub_23706(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, int iParam8, unknown uParam9, unknown uParam10)
{
    unknown Result;

    Result = CREATE_PLACEMENT_ROTATE( uParam0, uParam1, uParam4, uParam7, 0, uParam9, uParam10 );
    if (iParam8 == 1)
    {
        while ((DOES_PLACEMENT_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    return Result;
}

void sub_23967(unknown uParam0)
{
    sub_23977();
    sub_1662( 1 );
    sub_24711( uParam0 );
    return;
}

void sub_23977()
{
    ISEQ_UNREGISTER_ENTITY( 123489604, "TOWER_AA" );
    sub_24016( 123489604, 1 );
    ISEQ_UNREGISTER_ENTITY( -900483547, "TOWER_ANM01" );
    sub_24016( -900483547, 1 );
    ISEQ_UNREGISTER_ENTITY( -652127296, "TOWER_ANM02" );
    sub_24016( -652127296, 1 );
    ISEQ_UNREGISTER_ENTITY( 8102532, "TOWER_ANM03" );
    sub_24016( 8102532, 1 );
    ISEQ_UNREGISTER_ENTITY( -1131749617, "TOWER_BASE" );
    sub_24016( -1131749617, 1 );
    ISEQ_UNREGISTER_ENTITY( 2119011196, "RF_WT_lid_01" );
    sub_24016( 2119011196, 1 );
    ISEQ_UNREGISTER_ENTITY( -1930417983, "RF_WT_lid_02" );
    sub_24016( -1930417983, 1 );
    ISEQ_UNREGISTER_ENTITY( 361106065, "TOWER_AA" );
    sub_24016( 361106065, 1 );
    ISEQ_UNREGISTER_ENTITY( 1876730400, "TOWER_ANM01" );
    sub_24016( 1876730400, 1 );
    ISEQ_UNREGISTER_ENTITY( 1423764005, "TOWER_ANM02" );
    sub_24016( 1423764005, 1 );
    ISEQ_UNREGISTER_ENTITY( -361846818, "TOWER_ANM03" );
    sub_24016( -361846818, 1 );
    ISEQ_UNREGISTER_ENTITY( -787715329, "TOWER_BASE" );
    sub_24016( -787715329, 1 );
    ISEQ_UNREGISTER_ENTITY( 247297794, "RF_WT_lid_01" );
    sub_24016( 247297794, 1 );
    ISEQ_UNREGISTER_ENTITY( -864087722, "RF_WT_lid_02" );
    sub_24016( -864087722, 1 );
    return;
}

void sub_24016(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to terminate does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 1)
    {
        ISEQ_TERMINATE( uParam0 );
    }
    ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
    if (iParam1 == 1)
    {
        while ((ISEQ_IS_LOADED( uParam0 )) == 1)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_24711(boolean bParam0)
{
    sub_793( "RJM", "CREATE_TOWER", " " );
    sub_24751();
    g_U3112 = sub_22864( -1522991054, g_U3119, g_U3122, 0, 1, 0 );
    g_U3113 = sub_22864( -1193498759, g_U3119, g_U3122, 0, 1, 0 );
    g_U3114 = sub_22864( -946946919, g_U3119, g_U3122, 0, 1, 0 );
    g_U3115 = sub_22864( 588151771, g_U3119, g_U3122, 0, 1, 0 );
    g_U3116 = sub_22864( 216303562, g_U3119, g_U3122, 0, 1, 0 );
    g_U3117 = sub_22864( -1915312722, g_U3119, g_U3122, 0, 1, 0 );
    g_U3118 = sub_22864( -1549971141, g_U3119, g_U3122, 0, 1, 0 );
    FREEZE_OBJECT_POSITION( g_U3112, 1 );
    FREEZE_OBJECT_POSITION( g_U3113, 1 );
    FREEZE_OBJECT_POSITION( g_U3114, 1 );
    FREEZE_OBJECT_POSITION( g_U3115, 1 );
    FREEZE_OBJECT_POSITION( g_U3116, 1 );
    FREEZE_OBJECT_POSITION( g_U3117, 1 );
    FREEZE_OBJECT_POSITION( g_U3118, 1 );
    SET_OBJECT_COLLISION( g_U3112, 0 );
    SET_OBJECT_COLLISION( g_U3113, 0 );
    SET_OBJECT_COLLISION( g_U3114, 0 );
    SET_OBJECT_COLLISION( g_U3115, 0 );
    SET_OBJECT_COLLISION( g_U3116, 0 );
    SET_OBJECT_COLLISION( g_U3117, 0 );
    SET_OBJECT_COLLISION( g_U3118, 0 );
    if (bParam0)
    {
        SET_OBJECT_VISIBLE( g_U3118, 0 );
    }
    else
    {
        SET_OBJECT_VISIBLE( g_U3117, 0 );
    }
    return;
}

void sub_24751()
{
    sub_22784( g_U3112 );
    sub_22784( g_U3113 );
    sub_22784( g_U3114 );
    sub_22784( g_U3115 );
    sub_22784( g_U3116 );
    sub_22784( g_U3117 );
    sub_22784( g_U3118 );
    return;
}

void sub_25299(unknown uParam0, int iParam1)
{
    if (HAS_CUTSCENE_LOADED())
    {
        if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
        {
            SCRIPT_ASSERT( "Another cutscene is already loaded.  You can only load one cutscene into memory.  Your current cutscene will not load into memory.", 0 );
        }
    }
    if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
    {
        PRE_STREAM_SEAMLESS_CUTSCENE( uParam0 );
        if (iParam1 == 1)
        {
            while ((CUTSCENE_IS_LOADED( uParam0 )) == 0)
            {
                WAIT( 0 );
            }
        }
    }
    return;
}

void sub_25552(int iParam0, int iParam1)
{
    if ((sub_25564( iParam0 )) == 0)
    {
        sub_25630( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    return;
}

int sub_25564(int iParam0)
{
    int iVar3;

    iVar3 = DOES_OBJECT_OF_TYPE_EXIST_AT_COORDS( iParam0->_fU4, 1.00000000, iParam0->_fU0 );
    if (iVar3 == 1)
    {
        return 1;
    }
    return 0;
}

void sub_25630(unknown uParam0)
{
    (uParam0^) = {(uParam0^)};
    return;
}

void sub_25755(int iParam0, int iParam1)
{
    int iVar4;
    float fVar5;

    if ((sub_25564( iParam0 )) == 0)
    {
        sub_25630( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
    }
    else
    {
        iVar4 = 0;
        fVar5 = 0.00000000;
        GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref iVar4, ref fVar5 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar5 );
    }
    return;
}

void sub_26009(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

void sub_26339()
{
    sub_18886( g_U818 );
    g_U818 = sub_18967( ref l_U2005 );
    if (sub_19634( g_U818 ))
    {
        sub_12445( g_U818, -862236369, 25000, 0, 0 );
        sub_26413( ref g_U818 );
        SET_PED_NAME_DEBUG( g_U818, "PASSOS_ROOFTOPS_MPM" );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U818, 0 );
    }
    return;
}

void sub_26413(unknown uParam0)
{
    sub_793( "SBA", "P_SETUP_PASSOS_GENERAL_ATTRIBUTES", "***" );
    if (sub_19634( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), 1 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^), 1 );
        SET_PED_VALIDATE_BULLET_CAM_HIT( (uParam0^), 0 );
        SET_AI_SHOULD_ALWAYS_MISS_PED( (uParam0^), 1 );
        SET_CAN_AI_KICK_THROUGH_CORPSES( (uParam0^), 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_AI_TEMPLATE( (uParam0^), "AIT_NORMAL" );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( (uParam0^), 1 );
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^), 1 );
        SET_PED_GORE( (uParam0^), 0 );
        SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( (uParam0^), 0 );
        SET_PED_PROOFS( (uParam0^), 0, 1, 1, 1, 1 );
        SET_PED_ALLOWED_TO_SURRENDER( (uParam0^), 0 );
        SET_PED_CAN_AVOID_DEATH_ZONES( (uParam0^), 0 );
        SET_PED_STAND_GROUND_ON_PLAYER_IMPACT( (uParam0^), 1 );
        SET_PED_CAN_PUSH_PLAYER( (uParam0^), 1 );
        SET_PED_RESIST_TO_OBJECT_COLLISION( (uParam0^), 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_CAN_BE_TARGETTED( (uParam0^), 0 );
        SET_PED_CONSUMING_AMMO( (uParam0^), 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^), 1 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^), 1 );
    }
    return;
}

void sub_26805()
{
    sub_793( "RJM", "CREATE_DESTROYED_TOWER", 0 );
    sub_22784( l_U2048 );
    l_U2048 = sub_22864( -1809963165, -288.13200000, -11.19400000, -9.00700000, 0, 0, 0, 0, 0, 0 );
    return;
}

void sub_27139()
{
    sub_18886( g_U818 );
    g_U818 = sub_18967( ref l_U2005 );
    if (sub_19634( g_U818 ))
    {
        sub_12445( g_U818, -862236369, 25000, 0, 0 );
        sub_26413( ref g_U818 );
        SET_PED_NAME_DEBUG( g_U818, "PASSOS_ROOFTOPS_ABDN" );
        sub_1202( -1202559929, 1 );
        sub_26009( g_U818, -251.40000000, -1.70000000, 1.57000000, 65446 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U818, 0 );
        ISEQ_REGISTER_ENTITY( -1202559929, "passos", g_U818, 0 );
        ISEQ_START( -1202559929 );
        PED_SET_ACTION_INTENTION( g_U818, 58, 1000, 0, 0, 0 );
    }
    return;
}

void sub_27380()
{
    int I;

    sub_27440( ref l_U1831, ref l_U1858, ref l_U1861, -691403429, 0.50000000, "AIT_NORMAL", 0, 0, 25000, 2, -862236369, 25000, 0 );
    sub_20682( ref l_U1858, "ABDN_FLOOR1_FRONT_" );
    sub_28144( ref l_U1894, g_U3553 );
    for ( I = 0; I <= 1; I++ )
    {
        if (sub_19634( l_U1858[I] ))
        {
            SET_PED_ONLY_DAMAGED_BY_PLAYER( l_U1858[I], 1 );
        }
    }
    sub_20866( ref l_U1858, l_U1560, 1 );
    sub_27440( ref l_U1867, ref l_U1894, ref l_U1897, -1074756423, 0.50000000, "AIT_NORMAL", 0, 0, 25000, 2, -862236369, 25000, 0 );
    sub_20682( ref l_U1894, "ABDN_FLOOR1_BACK_" );
    sub_28144( ref l_U1858, g_U3553 );
    for ( I = 0; I <= 1; I++ )
    {
        if (sub_19634( l_U1894[I] ))
        {
            SET_PED_ONLY_DAMAGED_BY_PLAYER( l_U1894[I], 1 );
            SET_PED_WEAPON_OBSTRUCTION_CHECK_DISTANCE( l_U1894[I], 1.00000000 );
        }
    }
    sub_20866( ref l_U1894, l_U1561, 1 );
    if (sub_28531())
    {
        sub_28643( l_U1858[0], "GenCover", "F824CF1A_9ED3037F_Corner1", g_U818, 0 );
        sub_28643( l_U1858[1], "GenCover", "F824CF1A_9ED3037F_Popover2", g_U818, 0 );
        sub_28643( l_U1894[0], "GenCover", "F824CF1A_B2BB12C2_Popover1", g_U818, 0 );
    }
    sub_18578( ref l_U1903, ref l_U1930, ref l_U1933, -1074756423, 0.50000000, "AIT_NORMAL", 0, 0, 25000, 2, 0, 25000, 0 );
    sub_20682( ref l_U1930, "ABDN_FLOOR1_EXTRA" );
    sub_28144( ref l_U1930, g_U3553 );
    sub_21044( ref l_U1930, 1 );
    sub_20866( ref l_U1930, l_U1561, 1 );
    for ( I = 0; I <= 1; I++ )
    {
        if (sub_19634( l_U1930[I] ))
        {
            SET_PED_WEAPON_OBSTRUCTION_CHECK_DISTANCE( l_U1930[I], 1.00000000 );
        }
    }
    sub_29010( ref l_U1930 );
    sub_29010( ref l_U1858 );
    sub_29010( ref l_U1894 );
    return;
}

void sub_27440(unknown uParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5, boolean bParam6, unknown uParam7, unknown uParam8, unknown uParam9, int iParam10, unknown uParam11, unknown uParam12)
{
    int I;
    unknown uVar16;
    int iVar17;

    if ((uParam0^) != (uParam1^))
    {
        SCRIPT_ASSERT( "PED_ARRAY_INITIALIZE - Array sizes don't match!!", 0 );
        return;
    }
    sub_18667( uParam2, uParam4, 0 );
    if (IS_STRING_NULL( uParam12 ))
    {
        uParam12 = l_U2;
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_18886( (uParam1^)[I] );
        (uParam1^)[I] = sub_18967( ref (uParam0^)[I] );
        if (sub_19634( (uParam1^)[I] ))
        {
            sub_21455( (uParam1^)[I] );
            SET_PED_AI_TEMPLATE( (uParam1^)[I], uParam5 );
            SET_PED_ALERTNESS( (uParam1^)[I], uParam9 );
            SET_PED_ALLOWED_TO_SURRENDER( (uParam1^)[I], 0 );
            sub_19748( (uParam1^)[I], uParam2 );
            if (iParam3 != 0)
            {
                if (iParam3 != -1569615261)
                {
                    uVar16 = sub_12445( (uParam1^)[I], iParam3, uParam8, 0, 0 );
                }
                if (iParam10 != 0)
                {
                    sub_11813( (uParam1^)[I], iParam10, 0, uParam11, 0 );
                }
            }
            else if (I < 10)
            {
                iVar17 = l_U3[I]._fU0;
                if ((iVar17 != -1569615261) AND (iVar17 != 0))
                {
                    sub_12445( (uParam1^)[I], iVar17, l_U3[I]._fU4, 0, 0 );
                }
                if (l_U3[I]._fU8 != 0)
                {
                    sub_11813( (uParam1^)[I], l_U3[I]._fU8, 0, l_U3[I]._fU12, 0 );
                }
            }
            if (bParam6)
            {
                sub_20094( (uParam1^)[I], iParam3 );
            }
            switch (uParam7)
            {
                case 0: break;
                case 1:
                ENABLE_WEAPON_ATTACHMENT( uVar16, 13, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar16, 13, 1 );
                break;
                case 2:
                ENABLE_WEAPON_ATTACHMENT( uVar16, 14, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar16, 14, 1 );
                break;
                case 3:
                ENABLE_WEAPON_ATTACHMENT( uVar16, 12, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar16, 12, 1 );
                break;
            }
        }
        WAIT( 1 );
    }
    sub_20682( uParam1, uParam12 );
    return;
}

void sub_28144(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (sub_19634( (uParam0^)[I] ))
        {
            sub_28200( ref (uParam0^)[I], uParam1 );
        }
    }
    return;
}

void sub_28200(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    if (sub_19634( (uParam0^) ))
    {
        SET_ROOM_FOR_PED_BY_NAME( (uParam0^), ref uParam1 );
    }
    return;
}

int sub_28531()
{
    if ((NOT (IS_PED_DEAD( g_U818 ))) AND (DOES_PED_EXIST( g_U818 )))
    {
        return 1;
    }
    return 0;
}

void sub_28643(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (sub_19634( uParam0 ))
    {
        CLEAR_PED_TASKS_IMMEDIATELY( uParam0 );
        sub_22370( ref uParam0, uParam4 );
        TASK_COMBAT_MOVE_TO_COVER( uParam0, uParam1, uParam2, uParam3 );
    }
    return;
}

void sub_29010(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_29041( (uParam0^)[I] );
    }
    return;
}

void sub_29041(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 0 );
        SET_PED_VISIBLE( uParam0, 1 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 1 );
        FREEZE_PED_POSITION( uParam0, 0 );
        SET_PED_COLLISION( uParam0, 1 );
        SET_PED_PROOFS( uParam0, 0, 0, 0, 0, 0 );
    }
    return;
}

void sub_29282()
{
    sub_793( "RJM", "CLEANUP_ROOFTOP_ASSETS_FOR_ABANDONED_BUILDING", 0 );
    sub_24751();
    sub_22784( l_U2048 );
    sub_22784( l_U2047 );
    sub_22784( l_U2044 );
    sub_29391( ref l_U2206 );
    sub_24016( 1419096468, 0 );
    sub_24016( 123489604, 0 );
    sub_24016( -900483547, 0 );
    sub_24016( -652127296, 0 );
    sub_24016( 8102532, 0 );
    sub_24016( -1131749617, 0 );
    sub_24016( 2119011196, 0 );
    sub_24016( -1930417983, 0 );
    sub_24016( 361106065, 0 );
    sub_24016( 1876730400, 0 );
    sub_24016( 1423764005, 0 );
    sub_24016( -361846818, 0 );
    sub_24016( -787715329, 0 );
    sub_24016( 247297794, 0 );
    sub_24016( -864087722, 0 );
    sub_23638( g_U683._fU0 );
    sub_23638( g_U737._fU0 );
    sub_29643( -1522991054 );
    sub_29643( -1193498759 );
    sub_29643( 588151771 );
    sub_29643( 216303562 );
    sub_29643( -946946919 );
    sub_29643( -1915312722 );
    sub_29643( -1549971141 );
    sub_29643( 1740663406 );
    sub_29643( g_U774 );
    sub_29643( g_U777 );
    sub_29881( "ny_wtanim" );
    sub_29881( "ny_anim" );
    return;
}

void sub_29391(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_18886( (uParam0^)[I] );
    }
    return;
}

void sub_29643(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 1)
    {
        SET_MODEL_AS_NO_LONGER_NEEDED( uParam0 );
    }
    else
    {
        sub_983( "[SP]### ERROR! (UnloadModel) Trying to unload a model that isn't in the img! ###" );
    }
    return;
}

void sub_29881(unknown uParam0)
{
    REMOVE_ANIM_DICT( uParam0, 0 );
    return;
}

void sub_29939(unknown uParam0, unknown uParam1)
{
    sub_9324( uParam0, uParam1, 1, 0 );
    sub_29962( uParam0 );
    return;
}

void sub_29962(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

void sub_30095(unknown uParam0)
{
    if ((IS_SCREEN_FADING_IN() == 0) AND (IS_SCREEN_FADED_IN() == 0))
    {
        DO_SCREEN_FADE_IN( uParam0 );
        while (IS_SCREEN_FADED_IN() == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_30332()
{
    sub_18886( g_U818 );
    g_U818 = sub_18967( ref l_U2031 );
    if (sub_19634( g_U818 ))
    {
        sub_12445( g_U818, -862236369, 25000, 0, 0 );
        sub_26413( ref g_U818 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U818, 0 );
        SET_PED_NAME_DEBUG( g_U818, "PASSOS_ABDN_BLDG_2" );
        sub_28200( ref g_U818, g_U3553 );
        sub_1202( -1202559929, 1 );
        ISEQ_REGISTER_ENTITY( -1202559929, "passos", g_U818, 0 );
        ISEQ_START( -1202559929 );
        l_U2298 = 1;
        CLEAR_PED_PRIMARY_LOOKAT( g_U818 );
        if (sub_30541())
        {
            SET_PED_PRIMARY_LOOKAT( g_U818, sub_10194() );
        }
        PED_SET_ACTION_INTENTION( g_U818, 56, 1000, 0, 0, 0 );
        sub_30625();
        sub_29939( ref l_U2579, 21000 );
        l_U2296 = 1;
    }
    return;
}

int sub_30541()
{
    if (sub_19634( sub_10194() ))
    {
        return 1;
    }
    return 0;
}

void sub_30625()
{
    sub_793( "SBA", "INIT_HANDLE_PASSOS_WAITING_SPEECH: Setting ePWS_State = ePWS_SetupState", 0 );
    l_U117 = 1;
    return;
}

void sub_30952(int iParam0, unknown uParam1, unknown uParam2)
{
    START_WIDGET_GROUP( uParam1 );
    ADD_WIDGET_FLOAT_SLIDER( "x", iParam0 + 0, 60536, 5000, uParam2 );
    ADD_WIDGET_FLOAT_SLIDER( "y", iParam0 + 4, 60536, 5000, uParam2 );
    ADD_WIDGET_FLOAT_SLIDER( "z", iParam0 + 8, 60536, 5000, uParam2 );
    STOP_WIDGET_GROUP();
    return;
}

void sub_31294()
{
    if (l_U2597 != l_U2595)
    {
        sub_793( "TEH", "playing music:changed CUR FLAG", 0 );
        sub_17104( l_U2595 );
        sub_17104( l_U2596 );
        l_U2597 = l_U2595;
    }
    else if (l_U2598 != l_U2596)
    {
        sub_793( "TEH", "playing music:changed NEW FLAG", 0 );
        sub_17104( l_U2595 );
        sub_17104( l_U2596 );
        l_U2598 = l_U2596;
    }
    switch (l_U2595)
    {
        case 1:
        sub_793( "TEH", "playing music: MC_STARTUP ", 0 );
        l_U2599 = 0;
        l_U2595 = 7;
        l_U2596 = 7;
        break;
        case 2:
        sub_793( "TEH", "playing music: MC_CHECKPOINT_RESTART_ROOFTOPS ", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1", "", 0, 1000, 5000, -1082130432, 0 );
        l_U2599 = 0;
        l_U2595 = 7;
        l_U2596 = 7;
        break;
        case 7:
        if (l_U2596 == 7)
        {
            if (l_U2599 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_OS_2", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_OS_2" ))
                {
                    sub_793( "TEH", "playing music: Sussesfully preloaded NYBAR_OS_2 ", 0 );
                    l_U2599 = 1;
                }
            }
            else
            {
                l_U2595 = 8;
                l_U2596 = 8;
            }
        }
        break;
        case 8:
        if (l_U2596 == 8)
        {
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_2", "", 0, 1000, -1, -1082130432, 0 );
            l_U2595 = 9;
        }
        break;
        case 9:
        if (l_U2596 == 9)
        {
            if (l_U2599 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_OS_2" ))
                {
                    sub_793( "TEH", "playing music: Sussesfully played oneshot_20 ", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                }
            }
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_2_4_6", "", 0, 1000, 5000, -1082130432, 0 );
            l_U2595 = 10;
        }
        break;
        case 10:
        if (l_U2596 == 10)
        {
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_2_5_6", "", 0, 5000, 5000, -1082130432, 0 );
            l_U2595 = 11;
        }
        break;
        case 11:
        if (l_U2596 == 11)
        {
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_3", "", 0, 6000, 5000, -1082130432, 0 );
            l_U2595 = 13;
        }
        break;
        case 13:
        if (l_U2596 == 13)
        {
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_2_3", "", 0, 7000, -1, -1082130432, 0 );
            l_U2595 = 12;
        }
        break;
        case 3:
        sub_793( "TEH", "playing music: MC_CHECKPOINT_RESTART_PRE_MPM ", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_3", "", 0, 1000, -1, -1082130432, 0 );
        l_U2599 = 0;
        l_U2595 = 14;
        l_U2596 = 14;
        break;
        case 12:
        if (l_U2596 == 12)
        {
            sub_793( "TEH", "playing music: MC_STARTING_MPM", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_3", "", 0, 1000, -1, -1082130432, 0 );
            l_U2599 = 0;
            l_U2595 = 14;
            l_U2596 = 14;
        }
        break;
        case 14:
        if (l_U2596 == 14)
        {
            if (l_U2599 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_ONESHOT_13", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                    sub_793( "TEH", "playing music: Sussesfully preloaded oneshot_13 ", 0 );
                    l_U2599 = 1;
                }
            }
            else
            {
                l_U2595 = 15;
            }
        }
        break;
        case 15:
        if (l_U2596 == 15)
        {
            if (l_U2599 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                    AUDIO_MUSIC_SUSPEND( 6000 );
                    sub_793( "TEH", "playing music: Sussesfully played oneshot_13 ", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                }
            }
            l_U2599 = 0;
            l_U2595 = 16;
        }
        break;
        case 16:
        if (l_U2596 == 16)
        {
            sub_793( "TEH", "playing music: MC_POST_MPM", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_3", "", 0, 5000, 5000, -1082130432, 0 );
            l_U2595 = 17;
        }
        break;
        case 4:
        sub_793( "TEH", "playing music: MC_CHECKPOINT_RESTART_POST_MPM ", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_3", "", 0, 5000, 5000, -1082130432, 0 );
        l_U2599 = 0;
        l_U2595 = 17;
        break;
        case 17:
        if (l_U2596 == 17)
        {
            sub_793( "TEH", "playing music: MC_LEDGE_UP ", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_3_6", "", 0, 3000, 5000, -1082130432, 0 );
            l_U2595 = 18;
        }
        break;
        case 5:
        sub_793( "TEH", "playing music: MC_CHECKPOINT_RESTART_ABANDONED_BUILDING_1 ", 0 );
        l_U2599 = 0;
        AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_3_5_6", "", 0, 5000, 5000, -1082130432, 0 );
        l_U2595 = 19;
        l_U2596 = 19;
        break;
        case 18:
        if (l_U2596 == 18)
        {
            sub_793( "TEH", "playing music: MC_ENTER_AB_BLD ", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_3_5_6", "", 0, 2000, 5000, -1082130432, 0 );
            l_U2595 = 19;
            l_U2596 = 19;
        }
        break;
        case 19:
        if (l_U2596 == 19)
        {
            if (l_U2599 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_OS_1", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_OS_1" ))
                {
                    sub_793( "TEH", "playing music: Sussesfully preloaded NYBAR_OS_1 ", 0 );
                    l_U2599 = 1;
                }
            }
            else
            {
                l_U2595 = 20;
            }
        }
        break;
        case 20:
        if (l_U2596 == 20)
        {
            if (l_U2599 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                    sub_793( "TEH", "playing music: Sussesfully played NYBAR_OS_1 ", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                }
            }
            l_U2599 = 0;
            l_U2595 = 21;
        }
        break;
        case 21:
        if (l_U2596 == 21)
        {
            sub_793( "TEH", "playing music: first floor all dead", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_3", "", 0, 6000, 6000, -1082130432, 0 );
            l_U2595 = 22;
            l_U2596 = 22;
        }
        break;
        case 6:
        sub_793( "TEH", "playing music: MC_CHECKPOINT_RESTART_ABANDONED_BUILDING_2 ", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_3", "", 0, 3000, 5000, -1082130432, 0 );
        l_U2599 = 0;
        l_U2595 = 22;
        l_U2596 = 22;
        break;
        case 22:
        if (l_U2596 == 22)
        {
            if (l_U2599 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_RAND_OS", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_RAND_OS" ))
                {
                    sub_793( "TEH", "playing music: Sussesfully preloaded NYBAR_RAND_OS ", 0 );
                    l_U2599 = 1;
                }
            }
            else
            {
                l_U2595 = 23;
            }
        }
        break;
        case 23:
        if (l_U2596 == 23)
        {
            if (l_U2599 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_RAND_OS" ))
                {
                    sub_793( "TEH", "playing music: Sussesfully played NYBAR_RAND_OS ", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                }
            }
            l_U2599 = 0;
            l_U2595 = 24;
            l_U2596 = 24;
        }
        break;
        case 24:
        if (l_U2596 == 24)
        {
            sub_793( "TEH", "playing music: moving to floor 2", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_2_3_5", "", 0, 2000, 2000, -1082130432, 0 );
            l_U2595 = 25;
        }
        break;
        case 25:
        if (l_U2596 == 25)
        {
            sub_793( "TEH", "playing music: all dead", 0 );
            AUDIO_MUSIC_SUSPEND( 8000 );
            l_U2595 = 28;
        }
        break;
    }
    return;
}

void sub_34859()
{
    if ((g_U780 == 6) || ((g_U780 == 5) || ((g_U780 == 4) || ((g_U780 == 3) || (g_U780 == 2)))))
    {
        if (l_U2860 == 0)
        {
            if ((l_U2126) || (NOT (sub_19634( sub_10194() ))))
            {
                sub_793( "RJM", "HANDLE_CHECKPOINTS - Player's died on Rooftops, setting eFailure = STATE_FAIL_WAITING", 0 );
                l_U2126 = 0;
                l_U2860 = 2;
                if (g_U780 != 3)
                {
                    ;
                }
            }
            else if (sub_35076())
            {
                sub_793( "SBA", "HANDLE_CHECKPOINTS - Restart, setting eFailure = STATE_FAIL_WAITING", 0 );
                l_U2860 = 2;
            }
            else if (l_U2291)
            {
                if ((NOT IS_LAST_MAN_STANDING_ACTIVE()) AND ((g_U3040) || (IS_PED_DEAD( g_U818 ))))
                {
                    sub_793( "SBA", "P_HANDLE_CHECKPOINTS: Passos killed, setting eFailure = STATE_FAIL_DEATH_CAM_PASSOS", "***" );
                    SET_PED_GORE( g_U818, 1 );
                    l_U2860 = 1;
                }
            };;;
        }
        sub_35765();
    }
    return;
}

int sub_35076()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U0 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD( sub_10194() )))
        {
            SET_PED_FORCED_TO_WALK( sub_10194(), 0 );
            SET_PLAYER_FORCED_AIM( sub_10216(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE( sub_10216(), 1 );
            if ((IS_PED_VISIBLE( sub_10194() )) == 0)
            {
                SET_PED_VISIBLE( sub_10194(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

void sub_35765()
{
    switch (l_U2860)
    {
        case 0: break;
        case 1:
        if (sub_30541())
        {
            SET_PED_INVINCIBLE( sub_10194(), 1 );
        }
        if (l_U2859 == 2)
        {
            l_U2860 = 2;
            sub_793( "SBA", "Disabling ALLOW_BULLET_CAMERA_TO_GAMEPLAY...", 0 );
            ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            sub_35958( 0 );
            sub_793( "CCB", "ePassosDeathState = PE_MOVING; eFailure - STATE_FAIL_WAITING", 0 );
        }
        else if (l_U2859 == 0)
        {
            if (sub_36873( l_U2422 ))
            {
                l_U2860 = 2;
                sub_793( "CCB", "eFailure - STATE_FAIL_WAITING", 0 );
            }
        }
        else if (l_U2859 == 1)
        {
            if (sub_39425( l_U2422 ))
            {
                l_U2860 = 2;
                sub_793( "CCB", "eFailure - STATE_FAIL_WAITING", 0 );
            }
        };;;
        break;
        case 2:
        if (sub_40771())
        {
            if ((g_U819[7]._fU40 != 4) AND (g_U819[7]._fU40 != 0))
            {
                sub_793( "GA", "Shutting down script for Chopshop.", 0 );
                g_U3041 = 1;
                sub_40894( ref g_U819[7] );
                SET_EXITFLAG_FOR_SCRIPT( g_U819[7]._fU32 );
                g_U3437[7] = 0;
                g_U3437[8] = 1;
            }
            l_U2860 = 3;
        }
        else if ((sub_40977( 0 )) == 1)
        {
            if ((g_U819[7]._fU40 != 4) AND (g_U819[7]._fU40 != 0))
            {
                sub_793( "GA", "Shutting down script for Chopshop.", 0 );
                g_U3041 = 1;
                sub_40894( ref g_U819[7] );
                SET_EXITFLAG_FOR_SCRIPT( g_U819[7]._fU32 );
                g_U3437[7] = 0;
                g_U3437[8] = 1;
            }
            l_U2860 = 3;
        }
        break;
        case 3:
        if (NOT (IS_PED_DEAD( sub_10194() )))
        {
            sub_793( "CCB", "Deactivating bullettime...", 0 );
            DEACTIVATE_BULLET_TIME( 1, 0 );
            END_POSTFX_BLENDER( 3, 0 );
            l_U2860 = 4;
            sub_793( "CCB", "eFailure - STATE_FAIL_CLEANUP", 0 );
        }
        break;
        case 4:
        if (NOT (IS_PLAYER_DEAD( sub_10216() )))
        {
            if (NOT (IS_PED_DEAD( sub_10194() )))
            {
                SET_PLAYER_CONTROL( sub_10216(), 0, 0 );
            }
        }
        END_CONTEXT( "NYBAR_MPM" );
        sub_42179( "NY_PASSOS4_SCRIPTED_FAIL_FX" );
        sub_42179( "NY_PASSOS5_SCRIPTED_FAIL_FX" );
        sub_42179( "NY_MPM_SCRIPTED_FAIL_FX" );
        DESTROY_ALL_CAMS();
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        SET_BULLET_CAM_PREF( sub_10194(), "", "", "", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
        sub_23977();
        ISEQ_UNREGISTER_ENTITY( 1419096468, "ny_mpm_max" );
        sub_24016( 1419096468, 1 );
        sub_793( "CCB", "Destroying Passos...", 0 );
        ISEQ_UNREGISTER_ENTITY( -1202559929, "passos" );
        sub_24016( -1202559929, 1 );
        ISEQ_UNREGISTER_ENTITY( -223586764, "passos" );
        sub_24016( -223586764, 1 );
        ISEQ_UNREGISTER_ENTITY( 1103749565, "max" );
        sub_24016( 1103749565, 1 );
        ISEQ_UNREGISTER_ENTITY( -1222535398, "passos" );
        sub_24016( -1222535398, 1 );
        ISEQ_UNREGISTER_ENTITY( 637400269, "passos" );
        sub_24016( 637400269, 1 );
        sub_18886( g_U818 );
        sub_29881( "FACE_PASNYB" );
        sub_42701( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act" );
        if (g_U780 == 4)
        {
            sub_793( "BSW", "MCE_ROOFTOPS_2, skipping cleanup", 0 );
        }
        else
        {
            sub_42793();
        }
        l_U2860 = 5;
        sub_793( "CCB", "eFailure - STATE_FAIL_RESTORE", 0 );
        break;
        case 5:
        sub_2564();
        sub_8957();
        SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
        if (NOT IS_BULLET_CAMERA_TO_GAMEPLAY_ALLOWED())
        {
            ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
        }
        sub_43358();
        sub_9324( ref l_U2861, 20000, 1, 0 );
        sub_29962( ref l_U2861 );
        l_U2860 = 6;
        sub_793( "CCB", "eFailure - STATE_FAIL_RESTART", 0 );
        break;
        case 6:
        if (GET_NUMBER_OF_STREAMING_REQUESTS() == 0)
        {
            sub_793( "CCB", "eFailure - STATE_FAIL_IDLE", 0 );
            if (g_U780 == 2)
            {
                sub_793( "RJM", "Restoring player to ROOFTOP Checkpoint", 0 );
                sub_10260( ref l_U349, sub_10194() );
                sub_25299( l_U2600, 1 );
                while ((NOT (sub_38813( ref l_U2861 ))) AND ((GET_STABLE_NUM_OF_STREAMING_REQUESTS() > 0) || (GET_NUMBER_OF_STREAMING_REQUESTS() > 0)))
                {
                    sub_793( "bsw", "waiting for streaming on respawn", 0 );
                    WAIT( 0 );
                }
                sub_18113();
                sub_22740();
                SET_TRAFFIC_SYSTEM( 1 );
                sub_25552( ref g_U2860, 1 );
                sub_25755( ref g_U2860, 1 );
                l_U2595 = 2;
                l_U2596 = 2;
                l_U2853 = 2;
            }
            if (g_U780 == 3)
            {
                sub_793( "RJM", "Restoring player to ROOFTOP MPM Checkpoint", 0 );
                sub_10260( ref l_U385, sub_10194() );
                while ((NOT (sub_38813( ref l_U2861 ))) AND ((GET_STABLE_NUM_OF_STREAMING_REQUESTS() > 0) || (GET_NUMBER_OF_STREAMING_REQUESTS() > 0)))
                {
                    sub_793( "bsw", "waiting for streaming on respawn", 0 );
                    WAIT( 0 );
                }
                SET_TRAFFIC_SYSTEM( 1 );
                l_U2291 = 0;
                sub_23967( 1 );
                sub_25299( ref l_U2704, 1 );
                l_U2595 = 3;
                l_U2596 = 3;
                l_U2853 = 9;
                l_U2854 = 1;
            }
            if (g_U780 == 4)
            {
                sub_793( "BSW", "Restoring player to MCE_ROOFTOPS_2 Checkpoint", 0 );
                sub_10260( ref l_U421, sub_10194() );
                sub_26339();
                SET_TRAFFIC_SYSTEM( 1 );
                sub_1202( -1236175571, 1 );
                l_U2291 = 1;
                if (IS_SCREEN_FADED_OUT())
                {
                    DO_SCREEN_FADE_IN( 500 );
                }
                if (NOT (DOES_OBJECT_EXIST( l_U2048 )))
                {
                    sub_26805();
                }
                l_U2595 = 4;
                l_U2596 = 4;
                l_U2853 = 10;
            }
            if (g_U780 == 5)
            {
                sub_793( "RJM", "Restoring player to ABANDONED Checkpoint", 0 );
                sub_10260( ref l_U457, sub_10194() );
                sub_1202( -223586764, 1 );
                sub_1202( 1103749565, 1 );
                sub_1202( -1222535398, 1 );
                sub_1124( "FACE_PASNYB", 0, 1 );
                sub_1424( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act", 1 );
                while ((NOT (sub_38813( ref l_U2861 ))) AND ((GET_STABLE_NUM_OF_STREAMING_REQUESTS() > 0) || (GET_NUMBER_OF_STREAMING_REQUESTS() > 0)))
                {
                    sub_793( "bsw", "waiting for streaming on respawn", 0 );
                    WAIT( 0 );
                }
                SET_TRAFFIC_SYSTEM( 0 );
                sub_27139();
                sub_27380();
                SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U3141[5]._fU16, 1065353216, 0 );
                SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U3141[5]._fU20, 1065353216, 0 );
                if (NOT sub_44625())
                {
                    sub_30095( 0 );
                    if (IS_DEATH_PANEL_WIPE_ALLOWED())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                l_U2291 = 1;
                l_U2595 = 5;
                l_U2596 = 5;
                sub_29282();
                sub_29939( ref l_U2561, 4000 );
                l_U2853 = 12;
            }
            if (g_U780 == 6)
            {
                sub_793( "RJM", "INITIALIZE_PLAYER_BY_CHECKPOINT says we're in MCE_ABANDONED_BUILDING_2", 0 );
                sub_10260( ref l_U493, sub_10194() );
                ENABLE_STATIC_EMITTER( "S_NYC2_SE_CHOP_SHOP_TOOLS", 0 );
                sub_1202( -1202559929, 1 );
                sub_1202( -223586764, 1 );
                sub_1202( 637400269, 1 );
                sub_1202( 1103749565, 1 );
                sub_1124( "FACE_PASNYB", 0, 1 );
                sub_1424( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act", 1 );
                while ((NOT (sub_38813( ref l_U2861 ))) AND ((GET_STABLE_NUM_OF_STREAMING_REQUESTS() > 0) || (GET_NUMBER_OF_STREAMING_REQUESTS() > 0)))
                {
                    sub_793( "bsw", "waiting for streaming on respawn", 0 );
                    WAIT( 0 );
                }
                sub_30332();
                SET_TRAFFIC_SYSTEM( 0 );
                sub_29282();
                if (NOT sub_44625())
                {
                    if ((IS_DEATH_PANEL_WIPE_ALLOWED()) || ((IS_SCREEN_FADING_OUT()) || (IS_SCREEN_FADED_OUT())))
                    {
                        DO_SCREEN_FADE_IN( 500 );
                    }
                }
                l_U2003 = 1;
                l_U2595 = 6;
                l_U2596 = 6;
                l_U2853 = 14;
                l_U2291 = 1;
            }
            if (sub_30541())
            {
                SET_PED_INVINCIBLE( sub_10194(), 0 );
                SET_PLAYER_CONTROL( sub_10216(), 1, 0 );
                SET_PED_VISIBLE( sub_10194(), 1 );
                SET_PED_FORCED_TO_WALK( sub_10194(), 0 );
            }
            l_U2359 = 0;
            g_U3040 = 0;
            g_U3437[8] = 0;
            l_U2860 = 0;
            sub_793( "CCB", "eCheckpoint - STATE_CHECKPOINT_INIT", 0 );
        }
        else
        {
            sub_793( "CCB", "Waiting for stream requests...", 0 );
        }
        break;
    }
    return;
}

void sub_35958(unknown uParam0)
{
    string sVar3;
    string sVar4;
    string sVar5;
    string sVar6;
    string sVar7;

    sub_793( "NS", "P_SETUP_PASSOS_DEATH()", 0 );
    sVar3 = "";
    sVar4 = "";
    sVar5 = "";
    sVar6 = "";
    sVar7 = "";
    switch (l_U278)
    {
        case 0:
        sVar4 = "S_NYB_FAIL_09A";
        sVar5 = "S_NYB_FAIL_09B";
        sVar6 = "S_NYB_FAIL_09C";
        sVar7 = "S_NYB_FAIL_09D";
        sVar3 = "MISS_FAIL_04";
        break;
        case 1:
        sVar4 = "S_NYB_FAIL_10A";
        sVar5 = "S_NYB_FAIL_10B";
        sVar3 = "MISS_FAIL_08";
        break;
        case 2:
        sVar4 = "S_NYB_FAIL_11A";
        sVar5 = "S_NYB_FAIL_11B";
        sVar6 = "S_NYB_FAIL_11C";
        sVar7 = "S_NYB_FAIL_11D";
        sVar3 = "MISS_FAIL_04";
        break;
        case 3:
        sVar4 = "S_NYB_FAIL_12A";
        sVar5 = "S_NYB_FAIL_12B";
        sVar6 = "S_NYB_FAIL_12C";
        sVar7 = "S_NYB_FAIL_12D";
        sVar3 = "MISS_FAIL_04";
        break;
        case 4:
        sVar4 = "S_NYB_FAIL_13A";
        sVar5 = "S_NYB_FAIL_13B";
        sVar6 = "S_NYB_FAIL_13C";
        sVar7 = "S_NYB_FAIL_13D";
        sVar3 = "MISS_FAIL_05";
        break;
    }
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
    sub_36554( sVar3, sVar4, sVar5, sVar6, sVar7, uParam0 );
    l_U278++;
    if (l_U278 == 5)
    {
        l_U278 = 0;
    }
    return;
}

void sub_36554(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    sub_793( "NS", "P_SETUP_AND_PLAY_DEATH_CAM()", 0 );
    uParam5 = uParam5;
    if (NOT (IS_STRING_NULL( uParam1 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 0, "" );
    }
    if (NOT (IS_STRING_NULL( uParam2 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 1, "" );
    }
    if (NOT (IS_STRING_NULL( uParam3 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 2, "" );
    }
    if (NOT (IS_STRING_NULL( uParam4 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 3, "" );
    }
    return;
}

int sub_36873(unknown uParam0)
{
    switch (l_U2359)
    {
        case 0:
        sub_793( "CCB", "PLAY_MIDSCENE_05A_PASSOS_DEATH: ePassosDeathCamState - STATE_DEATHCAM_INIT", 0 );
        sub_37028( 1, 0, 0, 1 );
        sub_1202( -1222535398, 1 );
        if (sub_30541())
        {
            sub_26009( sub_10194(), -240.57000000, 0.44000000, 1.73000000, 0 );
            SET_PED_VISIBLE( sub_10194(), 0 );
        }
        if (ISEQ_QUERY_ENTITY_STATE( -1202559929, "passos", 3 ))
        {
            sub_793( "RJM", "Vig 17 was playing, kill it.  KILL IT NAOW!!!", 0 );
            ISEQ_UNREGISTER_ENTITY( -1202559929, "passos" );
            sub_24016( -1202559929, 1 );
        }
        if (sub_19634( g_U818 ))
        {
            CLEAR_PED_TASKS_IMMEDIATELY( g_U818 );
            sub_37398( ref g_U818 );
            ISEQ_REGISTER_ENTITY( -1222535398, "passos", g_U818, 0 );
            ISEQ_START( -1222535398 );
        }
        sub_7548( ref l_U2785, -237.80000000, -6.89000000, 1.73000000, 30, uParam0, 7, 3, 2, 0, 0 );
        sub_18886( l_U2798 );
        l_U2798 = sub_18967( ref l_U2785 );
        if (sub_19634( l_U2798 ))
        {
            sub_37808( ref l_U2798 );
            sub_12445( l_U2798, -862236369, 25000, 0, 0 );
            SET_ROOM_FOR_PED_BY_NAME( l_U2798, ref g_U3553 );
            REGISTER_TARGET( l_U2798, g_U818 );
            SET_PED_DEFAULT_AIM_AT_PED( l_U2798, g_U818 );
            TASK_AIM_GUN_AT_PED( l_U2798, g_U818, -1, 0 );
        }
        sub_38005( ref l_U2745, -243.57520000, 0.20469900, 2.07655300, 9.14803700, -0.00000300, -140.61300000, 45, 7000 );
        sub_38243( "NY_PASSOS4_SCRIPTED_FAIL_FX", 0 );
        l_U2359 = 3;
        sub_793( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_START", 0 );
        case 3:
        sub_38579( ref l_U2745 );
        SHAKE_CAM( l_U2745._fU0, sub_38670(), 0.25000000 );
        sub_9324( ref l_U2776, 500, 1, 0 );
        sub_29962( ref l_U2776 );
        l_U2359 = 2;
        sub_793( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_WAITING", 0 );
        break;
        case 2:
        if (sub_38813( ref l_U2776 ))
        {
            if ((sub_19634( g_U818 )) AND (sub_19634( l_U2798 )))
            {
                SET_PED_SHOOTS_AT_COORD( l_U2798, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_BONE_COORDS( g_U818, 65488, 0, 0, 0 ) );
                SHAKE_CAM( l_U2745._fU0, "SMALL_EXPLOSION_SHAKE", 1 );
                sub_39085( g_U818 );
                sub_9324( ref l_U2776, 500, 1, 0 );
                sub_29962( ref l_U2776 );
                l_U2359 = 5;
                sub_793( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_PLAYING", 0 );
            }
        }
        break;
        case 5:
        if (sub_38813( ref l_U2776 ))
        {
            l_U2359 = 6;
            sub_793( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_FINISHED", 0 );
        }
        break;
        case 6:
        return 1;
        break;
    }
    return 0;
}

void sub_37028(int iParam0, int iParam1, unknown uParam2, boolean bParam3)
{
    END_POSTFX_BLENDER( 12, 0 );
    if (bParam3)
    {
        STOP_ALL_IMAGEFX( 0 );
    }
    SET_WIDESCREEN_BORDERS( 1, 500 );
    DISPLAY_HUD( 0 );
    if (iParam0 == 1)
    {
        if (NOT (IS_PED_DEAD( sub_10194() )))
        {
            SET_PLAYER_CONTROL( sub_10216(), 0, uParam2 );
            SET_PED_DUCKING( sub_10194(), 0 );
            if (iParam1 == 1)
            {
                CLEAR_PED_TASKS_IMMEDIATELY( sub_10194() );
            }
            SET_PED_INVINCIBLE( sub_10194(), 1 );
        }
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    return;
}

void sub_37398(unknown uParam0)
{
    sub_793( "RJM", "P_SETUP_PASSOS_FOR_FAILURE_SCENE", "***" );
    if (sub_19634( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), 1 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^), 0 );
        SET_PED_VALIDATE_BULLET_CAM_HIT( (uParam0^), 1 );
        SET_AI_SHOULD_ALWAYS_MISS_PED( (uParam0^), 0 );
        SET_CAN_AI_KICK_THROUGH_CORPSES( (uParam0^), 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_AI_TEMPLATE( (uParam0^), "AIT_NORMAL" );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( (uParam0^), 0 );
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^), 1 );
        SET_PED_GORE( (uParam0^), 1 );
        SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( (uParam0^), 0 );
        SET_PED_PROOFS( (uParam0^), 0, 1, 1, 1, 1 );
        SET_PED_ALLOWED_TO_SURRENDER( (uParam0^), 0 );
        SET_PED_CAN_AVOID_DEATH_ZONES( (uParam0^), 0 );
        SET_PED_STAND_GROUND_ON_PLAYER_IMPACT( (uParam0^), 1 );
        SET_PED_CAN_PUSH_PLAYER( (uParam0^), 1 );
        SET_PED_RESIST_TO_OBJECT_COLLISION( (uParam0^), 0 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_CAN_BE_TARGETTED( (uParam0^), 1 );
    }
    return;
}

void sub_37808(unknown uParam0)
{
    if (sub_19634( (uParam0^) ))
    {
        CLEAR_PED_TASKS_IMMEDIATELY( (uParam0^) );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), 1 );
        SET_PED_COMBAT_MOVEMENT( (uParam0^), 0 );
    }
    return;
}

void sub_38005(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    iParam0->_fU4 = {uParam4};
    iParam0->_fU16 = {uParam1};
    iParam0->_fU28 = uParam7;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    iParam0->_fU84 = uParam8;
    iParam0->_fU88 = 0;
    iParam0->_fU92 = 0;
    iParam0->_fU40 = 0;
    iParam0->_fU44 = 0;
    iParam0->_fU100 = 1;
    iParam0->_fU104 = 1;
    iParam0->_fU96 = 0;
    sub_9324( iParam0 + 48, uParam8, 1, 0 );
    iParam0->_fU0 = CREATE_CAM_WITH_PARAMS( ref g_U649, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 1 );
    SET_CAM_PARAMS( iParam0->_fU0, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 0, 1, 1 );
    return;
}

void sub_38243(unknown uParam0, boolean bParam1)
{
    sub_38257( ref l_U276 );
    l_U276 = CREATE_CAM( "DEFAULT_BULLET_CAMERA", 1 );
    SETUP_BULLET_CAMERA_SCENE( l_U276, uParam0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, "", "" );
    if (bParam1)
    {
        RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    }
    return;
}

void sub_38257(unknown uParam0)
{
    if ((DOES_CAM_EXIST( (uParam0^) )) == 1)
    {
        if ((IS_CAM_ACTIVE( (uParam0^) )) == 1)
        {
            SET_CAM_ACTIVE( (uParam0^), 0 );
        }
        DESTROY_CAM( (uParam0^) );
    }
    (uParam0^) = nil;
    return;
}

void sub_38579(int iParam0)
{
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    SET_CAM_ACTIVE( iParam0->_fU0, 1 );
    RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    sub_29962( iParam0 + 48 );
    iParam0->_fU32 = 1;
    iParam0->_fU40 = 1;
    return;
}

string sub_38670()
{
    return "WOBBLY_SHAKE";
}

int sub_38813(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

void sub_39085(unknown uParam0)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        STOP_PED_SPEAKING( uParam0, 1 );
        SET_PED_HEALTH( uParam0, 0, 0 );
        SET_PED_CORPSE( uParam0, 0 );
    }
    return;
}

int sub_39425(unknown uParam0)
{
    switch (l_U2359)
    {
        case 0:
        sub_1202( 637400269, 1 );
        if (sub_30541())
        {
            sub_26009( sub_10194(), -244.42000000, -19.82000000, 5.13000000, 0 );
            SET_PED_VISIBLE( sub_10194(), 0 );
        }
        if (ISEQ_QUERY_ENTITY_STATE( -1202559929, "passos", 3 ))
        {
            sub_793( "RJM", "Vig 17 was playing, kill it.  KILL IT NAOW!!!", 0 );
            ISEQ_UNREGISTER_ENTITY( -1202559929, "passos" );
            sub_24016( -1202559929, 1 );
        }
        if (sub_19634( g_U818 ))
        {
            CLEAR_PED_TASKS_IMMEDIATELY( g_U818 );
            sub_26009( g_U818, -242.16750000, -25.48294000, 5.10000000, 180.00000000 );
            SET_ROOM_FOR_PED_BY_NAME( g_U818, ref g_U3561 );
            sub_37398( ref g_U818 );
            ISEQ_REGISTER_ENTITY( 637400269, "passos", g_U818, 0 );
            ISEQ_START( 637400269 );
        }
        sub_7548( ref l_U2839, -245.94850000, -19.94804000, 5.13012800, 210, uParam0, 7, 3, 2, 0, 0 );
        sub_18886( l_U2852 );
        l_U2852 = sub_18967( ref l_U2839 );
        if (sub_19634( l_U2852 ))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U2852, 1 );
            sub_37808( ref l_U2852 );
            sub_12445( l_U2852, -862236369, 25000, 0, 0 );
            SET_ROOM_FOR_PED_BY_NAME( l_U2852, ref g_U3561 );
            REGISTER_TARGET( l_U2852, g_U818 );
            SET_PED_DEFAULT_AIM_AT_PED( l_U2852, g_U818 );
            TASK_AIM_GUN_AT_PED( l_U2852, g_U818, -1, 0 );
        }
        sub_38005( ref l_U2799, -242.49370000, -27.48373000, 5.59246100, 16.02845000, -0.00000200, 23.18072000, 45, 7000 );
        l_U2359 = 1;
        sub_793( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_ONE_TICK_FOR_TELEPORT", 0 );
        break;
        case 1:
        if (sub_30541())
        {
            SET_ROOM_FOR_PED_BY_NAME( sub_10194(), ref g_U3561 );
            SET_PED_VISIBLE( sub_10194(), 0 );
        }
        sub_793( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_START", 0 );
        l_U2359 = 3;
        case 3:
        sub_38579( ref l_U2799 );
        SHAKE_CAM( l_U2799._fU0, sub_38670(), 0.25000000 );
        sub_38243( "NY_PASSOS5_SCRIPTED_FAIL_FX", 0 );
        sub_9324( ref l_U2830, 500, 1, 0 );
        sub_29962( ref l_U2830 );
        l_U2359 = 2;
        sub_793( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_WAITING", 0 );
        break;
        case 2:
        if (sub_38813( ref l_U2830 ))
        {
            if ((sub_19634( g_U818 )) AND (sub_19634( l_U2852 )))
            {
                SET_PED_SHOOTS_AT_COORD( l_U2852, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_BONE_COORDS( g_U818, 65488, 0, 0, 0 ) );
                SHAKE_CAM( l_U2799._fU0, "SMALL_EXPLOSION_SHAKE", 1 );
                sub_39085( g_U818 );
                sub_9324( ref l_U2830, 500, 1, 0 );
                sub_29962( ref l_U2830 );
                l_U2359 = 5;
                sub_793( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_PLAYING", 0 );
            }
        }
        break;
        case 5:
        if (sub_38813( ref l_U2830 ))
        {
            l_U2359 = 6;
            sub_793( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_FINISHED", 0 );
        }
        break;
        case 6:
        return 1;
        break;
    }
    return 0;
}

void sub_40771()
{
    return g_U648;
}

void sub_40894(int iParam0)
{
    iParam0->_fU36 = 0;
    iParam0->_fU40 = 0;
    return;
}

int sub_40977(int iParam0)
{
    iParam0 = 1;
    switch (l_U263)
    {
        case 0:
        if (NOT (sub_41038( ref l_U265 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_10194() )))
            {
                l_U264 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
            sub_9324( ref l_U265, l_U264, 1, 1 );
            sub_29962( ref l_U265 );
        }
        if (sub_38813( ref l_U265 ))
        {
            sub_793( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_10194() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD( sub_10216() )))
            {
                SET_PLAYER_CONTROL( sub_10216(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U263 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U263 = 2;
            }
            else
            {
                l_U263 = 3;
            }
        }
        break;
        case 2:
        sub_793( "NS", "Player will QUIT", 0 );
        sub_41497();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
        sub_793( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        sub_41497();
        return 1;
        break;
    }
    return 0;
}

int sub_41038(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

void sub_41497()
{
    sub_793( "NS", "P_PostFailRetryCleanup", 0 );
    sub_9512( ref l_U265 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD( sub_10216() )))
    {
        SET_PLAYER_CONTROL( sub_10216(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U262 = 0;
    l_U262 = l_U262;
    l_U263 = 0;
    return;
}

void sub_42179(unknown uParam0)
{
    sub_793( "CO", "P_IMAGEFX_STOP_BULLETCAM:  Cameras Deleted", 0 );
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    sub_38257( ref l_U276 );
    l_U275 = 1;
    return;
}

void sub_42701(unknown uParam0)
{
    ACTION_TREE_UNLOAD( uParam0 );
    return;
}

void sub_42793()
{
    sub_793( "RJM", "CLEANUP_ROOFTOP", " " );
    CLEAR_PED_DEFAULT_AIM( sub_10194() );
    SET_PLAYER_FORCED_AIM( sub_10216(), 0, 0 );
    ISEQ_UNREGISTER_ENTITY( -329975025, "thug0" );
    ISEQ_UNREGISTER_ENTITY( -329975025, "thug1" );
    ISEQ_UNREGISTER_ENTITY( -329975025, "thug2" );
    sub_24016( -329975025, 0 );
    sub_29391( ref l_U1823 );
    sub_29391( ref l_U1649 );
    sub_29391( ref l_U1687 );
    sub_29391( ref l_U1748 );
    sub_29391( ref l_U1799 );
    sub_29391( ref l_U1858 );
    sub_29391( ref l_U1894 );
    sub_29391( ref l_U1930 );
    sub_29391( ref l_U1992 );
    sub_29391( ref l_U2206 );
    sub_18886( l_U2798 );
    sub_18886( l_U2852 );
    sub_23638( g_U683._fU0 );
    sub_23638( g_U737._fU0 );
    sub_23638( g_U701._fU0 );
    sub_43083( ref l_U2588 );
    sub_22784( l_U2045 );
    sub_22784( l_U2046 );
    sub_22784( l_U2047 );
    sub_22784( l_U2044 );
    sub_24751();
    if (IS_ACTION_TREE_LOADED( "Vehicle/Vehicle_Car.act" ))
    {
        sub_42701( "Vehicle/Vehicle_Car.act" );
    }
    return;
}

void sub_43083(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_23638( (uParam0^)[I] );
    }
    return;
}

void sub_43358()
{
    sub_793( "SP", "P_SETUP_PLAYER_RELATIONSHIPS", "###" );
    if ((IS_PED_DEAD( sub_10194() )) == 0)
    {
        SET_PED_RELATIONSHIP( sub_10194(), 0, 1 );
        SET_PED_RELATIONSHIP( sub_10194(), 0, 2 );
        SET_PED_RELATIONSHIP( sub_10194(), 0, 6 );
        SET_PED_RELATIONSHIP( sub_10194(), 0, 7 );
    }
    return;
}

int sub_44625()
{
    if (l_U275)
    {
        sub_793( "CO", "F_IMAGEFX_FADE_IN: IMAGEFX START", 0 );
        START_PANEL_WIPE( 0, 6 );
        PLAY_IMAGEFX( "BULLETCAM_IMPACT", 3, 1 );
        PLAY_IMAGEFX( "BLACK_FADE_UP_FAST_01", 3, 1 );
        DO_SCREEN_FADE_IN( 0 );
        l_U275 = 0;
        return 1;
        break;
    }
    sub_793( "CO", "F_IMAGEFX_FADE_IN: NORMAL START", 0 );
    return 0;
}

void sub_45576()
{
    int iVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;

    if (l_U2860 == 0)
    {
        if ((l_U2853 > 2) AND (l_U2853 != 9))
        {
            if (((sub_45628( ref l_U991, sub_10194(), 0 )) == 1) || (((sub_45628( ref l_U970, sub_10194(), 0 )) == 1) || (((sub_45628( ref l_U928, sub_10194(), 0 )) == 1) || (((sub_45628( ref l_U865, sub_10194(), 0 )) == 1) || ((sub_45628( ref l_U844, sub_10194(), 0 )) == 1)))))
            {
                sub_793( "kja", "Player Hit the Kill Box", 0 );
                SET_BULLET_CAM_PREF( sub_10194(), "MISS_DEATH_FALL_01A", "", "", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
                sub_39085( sub_10194() );
            }
        }
        switch (l_U2853)
        {
            case 4:
            sub_793( "RJM", "HANDLE_EVENTS - ROOFTOP_MID_05A_PASSOS_DEATH", 0 );
            l_U2859 = 0;
            sub_46187();
            l_U2422 = sub_46232();
            g_U3040 = 1;
            sub_793( "RJM", "HANDLE_EVENTS - Moving to ROOFTOP_DONE", 0 );
            l_U2853 = 19;
            break;
            case 5:
            sub_793( "RJM", "HANDLE_EVENTS - ROOFTOP_MID_05B_PASSOS_DEATH", 0 );
            l_U2859 = 1;
            sub_46187();
            l_U2422 = sub_46905();
            g_U3040 = 1;
            sub_793( "RJM", "HANDLE_EVENTS - Moving to ROOFTOP_DONE", 0 );
            l_U2853 = 19;
            break;
            case 0:
            sub_793( "RJM", "Loading MidScene02AB ", 0 );
            sub_793( "RJM", "HANDLE_EVENTS - Moving to ROOFTOP_WAIT_ROOFTOPS_TRIGGER", 0 );
            sub_861( 1 );
            sub_22740();
            l_U2853 = 1;
            break;
            case 1:
            if (sub_47349( ref l_U529, 0 ))
            {
                sub_793( "SBA", "HANDLE_EVENTS - Top of stairs, first time", 0 );
                g_U3437[5] = 1;
                sub_25755( ref g_U2860, 0 );
            }
            if (sub_47349( ref l_U550, 0 ))
            {
                sub_18113();
                SET_TRAFFIC_SYSTEM( 1 );
                sub_9687( 2, 0 );
                if (g_U780 != 2)
                {
                    sub_14499( ref l_U349, 2, sub_10194(), g_U3141[2]._fU0, g_U3141[2]._fU12, g_U3141[2]._fU16, g_U3141[2]._fU20, 1 );
                    START_CONTEXT( "NYBAR_ROOFTOPS_TO_MPM" );
                    g_U780 = 2;
                }
                sub_793( "RJM", "HANDLE_EVENTS - Moving to ROOFTOP_WAIT_BLENDOUT", 0 );
                l_U2853 = 2;
            }
            break;
            case 2:
            sub_793( "RJM", "HANDLE_EVENTS - Moving to ROOFTOP_APARTMENT_ROOF", 0 );
            sub_47802();
            sub_48047();
            if (NOT l_U1663)
            {
                sub_48247();
            }
            if (IS_DEATH_PANEL_WIPE_ALLOWED())
            {
                DO_SCREEN_FADE_IN( 0 );
            }
            if ((IS_SCREEN_FADING_OUT()) || (IS_SCREEN_FADED_OUT()))
            {
                DO_SCREEN_FADE_IN( 1000 );
            }
            sub_1662( 0 );
            sub_25299( l_U2600, 0 );
            sub_878( 1740663406, 0 );
            sub_2166( 1478009203, 0 );
            sub_2166( -1074756423, 0 );
            sub_9324( ref l_U1664, 500, 1, 0 );
            sub_29962( ref l_U1664 );
            l_U2853 = 3;
            break;
            case 3:
            sub_49566( ref l_U1823, -1054867456, 0, 1 );
            sub_49566( ref l_U1687, -1054867456, 0, 1 );
            sub_49566( ref l_U1799, -1054867456, 0, 1 );
            sub_49566( ref l_U1649, -1054867456, 0, 1 );
            sub_49566( ref l_U1748, -1054867456, 0, 1 );
            if ((sub_45628( ref l_U886, sub_10194(), 0 )) == 1)
            {
                sub_793( "kja", "Player Hit the Kill Box", 0 );
                SET_BULLET_CAM_PREF( sub_10194(), "MISS_DEATH_FALL_01A", "", "", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
                sub_39085( sub_10194() );
            }
            sub_49896();
            if (NOT l_U1663)
            {
                sub_48247();
            }
            if (sub_38813( ref l_U1664 ))
            {
                if (sub_19634( l_U1649[2] ))
                {
                    PLAY_PED_AMBIENT_SPEECH( l_U1649[2], "ORDER_FIRE", 1, 0, 2, 0, 30000 );
                }
            }
            if (NOT (sub_50324( ref g_U2860 )))
            {
                if (NOT (sub_50397( l_U571 )))
                {
                    uVar13 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( sub_10194() )};
                    if (uVar13._fU8 > 5.00000000)
                    {
                        if (((sub_50500( ref g_U2860 )) < 0.05000000) || (NOT (IS_OBJECT_ON_SCREEN( DOOR_FIND_CLOSEST( g_U2860._fU0, g_U2860._fU4 ) ))))
                        {
                            sub_793( "SBA", "HANDLE_EVENTS - Locking door to stairs, ok to unload Apartment script", 0 );
                            sub_25755( ref g_U2860, 1 );
                            g_U3437[4] = 1;
                        }
                    }
                }
            }
            if (sub_47349( ref l_U718, 0 ))
            {
                STREAM_HELPERS_REQUEST_AT_LOC( -522.09200000, -8.25800000, 10.23100000, 0 );
                sub_23967( 1 );
                sub_793( "RJM", "HANDLE_EVENTS - Moving to ROOFTOP_MAIN_FIGHT", 0 );
                l_U2596 = 10;
                l_U2853 = 6;
            }
            if (sub_47349( ref l_U676, 0 ))
            {
                sub_50818();
                sub_50952();
            }
            if (NOT l_U2293)
            {
                if ((sub_51572( ref l_U1799 )) == 0)
                {
                    sub_793( "RJM", "Killed the Rooftop Cover guys before jumping down, start AGA timer", 0 );
                    l_U2293 = 1;
                    sub_29939( ref l_U2341, 5000 );
                }
            }
            if (sub_38813( ref l_U2341 ))
            {
                sub_793( "RJM", "AGA timer expired before jumping down, start tasking AGA peds.", 0 );
                l_U2294 = 1;
            }
            if (l_U2294)
            {
                sub_51865();
            }
            if ((NOT l_U2292) AND (sub_50397( l_U718 )))
            {
                sub_51135( ref l_U1799, 0 );
                l_U2292 = 1;
            }
            break;
            case 6:
            sub_49566( ref l_U1823, -1054867456, 0, 1 );
            sub_49566( ref l_U1687, -1054867456, 0, 1 );
            sub_49566( ref l_U1799, -1054867456, 0, 1 );
            sub_49566( ref l_U1649, -1054867456, 0, 1 );
            sub_49566( ref l_U1748, -1054867456, 0, 1 );
            if (NOT l_U2300)
            {
                if (sub_50397( l_U760 ))
                {
                    sub_793( "RJM", "Disabling shootdodge", 0 );
                    SET_PLAYER_CAN_USE_SHOOTDODGE( sub_10216(), 0 );
                    l_U2300 = 1;
                }
            }
            else if (NOT (sub_50397( l_U760 )))
            {
                sub_793( "RJM", "Enabling shootdodge", 0 );
                SET_PLAYER_CAN_USE_SHOOTDODGE( sub_10216(), 1 );
                l_U2300 = 0;
            }
            if ((sub_45628( ref l_U886, sub_10194(), 0 )) == 1)
            {
                sub_793( "kja", "Player Hit the Kill Box", 0 );
                SET_BULLET_CAM_PREF( sub_10194(), "MISS_DEATH_FALL_01A", "", "", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
                sub_39085( sub_10194() );
            }
            sub_49896();
            if (sub_47349( ref l_U571, 0 ))
            {
                sub_793( "SBA", "HANDLE_EVENTS - Locking door to stairs", 0 );
                sub_25755( ref g_U2860, 1 );
            }
            if (sub_38813( ref l_U2534 ))
            {
                sub_53506( "SNYC_DPDP", ref l_U2453 );
            }
            sub_51865();
            if (sub_47349( ref l_U676, 0 ))
            {
                sub_50818();
                sub_50952();
            }
            if ((NOT l_U2292) AND (sub_50397( l_U718 )))
            {
                sub_51135( ref l_U1799, 0 );
                l_U2292 = 1;
            }
            iVar2 = ((((sub_51572( ref l_U1748 )) + (sub_51572( ref l_U1823 ))) + (sub_51572( ref l_U1799 ))) + (sub_51572( ref l_U1649 ))) + (sub_51572( ref l_U1687 ));
            if (iVar2 == 1)
            {
                sub_54801( ref l_U1748 );
                sub_54801( ref l_U1823 );
                sub_54801( ref l_U1799 );
                sub_54801( ref l_U1649 );
                sub_54801( ref l_U1687 );
            }
            else if (iVar2 == 0)
            {
                if (NOT l_U2302)
                {
                    sub_54993();
                    sub_29939( ref l_U2534, 20000 );
                    l_U2302 = 1;
                }
                if (NOT l_U2301)
                {
                    l_U2596 = 11;
                    l_U2301 = 1;
                }
                if (NOT l_U2533)
                {
                    if ((NOT (sub_50397( l_U1306 ))) AND ((TIME_SINCE_LAST_MONOLOGUE() > 5000) AND ((NOT sub_55307()) AND ((NOT (IS_PLAYER_DOING_MELEE_GRAPPLE( sub_10216() ))) AND (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))))))
                    {
                        sub_53506( "SNYC_STOR", ref l_U2443 );
                        l_U2533 = 1;
                    }
                }
            }
            if (sub_50397( l_U634 ))
            {
                RESET_PED_MODEL_LOD_DISTANCES( 233534649 );
                sub_55455( 0 );
                sub_25299( l_U2600, 1 );
                sub_55559( 0 );
                sub_29939( ref l_U2543, 750 );
                if (sub_30541())
                {
                    SET_PED_FORCED_TO_WALK( sub_10194(), 1 );
                }
                sub_793( "RJM", "HANDLE_EVENTS - Moving to ROOFTOP_PRE_MIDSCENE_03", 0 );
                l_U2853 = 7;
            }
            break;
            case 7:
            if (sub_38813( ref l_U2543 ))
            {
                sub_29391( ref l_U1748 );
                sub_29391( ref l_U1823 );
                sub_29391( ref l_U1799 );
                sub_29391( ref l_U1649 );
                sub_29391( ref l_U1687 );
                sub_22784( l_U2047 );
                sub_29881( "ny_anim" );
                sub_793( "RJM", "HANDLE_EVENTS - Moving to ROOFTOP_MIDSCENE_03", 0 );
                if (l_U2595 == 11)
                {
                    l_U2596 = 11;
                }
                l_U2853 = 8;
            }
            break;
            case 8: if (sub_56375( 1, 0, 0 ))
            {
                SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U3141[3]._fU16, 1065353216, 0 );
                SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U3141[3]._fU20, 1065353216, 0 );
                sub_793( "RJM", "HANDLE_EVENTS - Moving to ROOFTOP_MAX_PAYNE_MOMENT", 0 );
                SET_PLAYER_CAN_USE_SHOOTDODGE( sub_10216(), 1 );
                l_U2291 = 0;
                l_U2854 = 1;
                l_U2853 = 9;
            }
            case 9:
            if (sub_60648())
            {
                if (g_U780 != 4)
                {
                    sub_793( "BSW", "updating current checkpoint to MCE_ROOFTOPS_2", 0 );
                    g_U780 = 4;
                    sub_14499( ref l_U421, 4, sub_10194(), g_U3141[4]._fU0, g_U3141[4]._fU12, g_U3141[4]._fU16, g_U3141[4]._fU20, 0 );
                }
                sub_1202( 1103749565, 0 );
                sub_1202( -1202559929, 0 );
                sub_1202( -1236175571, 1 );
                sub_1124( "FACE_PASNYB", 0, 0 );
                sub_1424( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act", 0 );
                l_U2853 = 10;
            }
            break;
            case 10:
            l_U2291 = 1;
            if (sub_70796())
            {
                if (sub_19634( g_U818 ))
                {
                    CLEAR_PED_TASKS_IMMEDIATELY( g_U818 );
                    sub_26009( g_U818, -269.48690000, -3.07285600, 2.75137900, 90.00000000 );
                }
                sub_71796();
                if (sub_30541())
                {
                    SET_PED_FORCED_TO_WALK( sub_10194(), 0 );
                }
                sub_29939( ref l_U2552, 100 );
                sub_30625();
                l_U2853 = 11;
            }
            break;
            case 11:
            if ((sub_45628( ref l_U907, sub_10194(), 0 )) == 1)
            {
                sub_793( "kja", "Player Hit the Kill Box", 0 );
                SET_BULLET_CAM_PREF( sub_10194(), "MISS_DEATH_FALL_01A", "", "", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
                sub_39085( sub_10194() );
            }
            if (sub_47349( ref l_U1054, 0 ))
            {
                sub_793( "BSW", "player is in trigger box: tbPostMPMLedgeUp", 0 );
                l_U2596 = 17;
            }
            sub_72166();
            if (sub_47349( ref l_U781, 0 ))
            {
                sub_27380();
            }
            if (sub_28531())
            {
                if (NOT l_U2286)
                {
                    sub_72292( 13000, 3000 );
                    if (sub_50397( l_U1096 ))
                    {
                        sub_73216( 0 );
                        sub_1202( -1202559929, 0 );
                        l_U2286 = 1;
                        CLEAR_PED_TASKS_IMMEDIATELY( g_U818 );
                        TASK_FOLLOW_NAV_MESH_TO_COORD( g_U818, -256.80000000, -1.12500000, 1.60600000, 3, -1, 1048576000, 0, 0 );
                        if (NOT sub_55307())
                        {
                            sub_72741( ref l_U2219, ref uVar3 );
                        }
                    }
                }
                else if (NOT l_U2287)
                {
                    if (sub_45628( ref l_U823, g_U818, 0 ))
                    {
                        sub_793( "bsw", "Passos succesfully vaulted, time to teleport him", 0 );
                        l_U2287 = 1;
                        sub_26009( g_U818, g_U3425, g_U3428 );
                        ISEQ_REGISTER_ENTITY( -1202559929, "passos", g_U818, 0 );
                        ISEQ_START( -1202559929 );
                        PED_SET_ACTION_INTENTION( g_U818, 57, 1000, 0, 0, 0 );
                    }
                }
                else if (NOT l_U2288)
                {
                    if (sub_50397( l_U1075 ))
                    {
                        sub_793( "RJM", "Player's in the fucking trigger volume, make Passos run into the FUCKING BUILDING!!!!!", 0 );
                        l_U2288 = 1;
                        PED_SET_ACTION_INTENTION( g_U818, 47, 1000, 0, 0, 0 );
                        sub_29939( ref l_U2350, 1500 );
                    }
                };;;
            }
            if (sub_38813( ref l_U2350 ))
            {
                sub_73968();
            }
            if (NOT l_U2289)
            {
                if (sub_28531())
                {
                    if (PED_ANIM_EVENT( g_U818, 1477325977 ))
                    {
                        sub_74192();
                        l_U2289 = 1;
                    }
                }
            }
            if (sub_47349( ref l_U802, 0 ))
            {
                if (g_U780 != 5)
                {
                    g_U780 = 5;
                    sub_14499( ref l_U457, 5, sub_10194(), g_U3141[5]._fU0, g_U3141[5]._fU12, g_U3141[5]._fU16, g_U3141[5]._fU20, 1 );
                }
                SET_TRAFFIC_SYSTEM( 0 );
                sub_1202( -223586764, 1 );
                sub_1202( -1222535398, 0 );
                sub_29282();
                START_CONTEXT( "NYBAR_ABANDONED_BUILDING" );
                if (IS_DEATH_PANEL_WIPE_ALLOWED())
                {
                    DO_SCREEN_FADE_IN( 0 );
                }
                sub_29939( ref l_U2561, 4000 );
                l_U2853 = 12;
                sub_793( "BSW", "Kick off the abo floor 1 fight", 0 );
                l_U2596 = 18;
            }
            break;
            case 12:
            if (sub_38813( ref l_U2350 ))
            {
                sub_73968();
            }
            sub_74717();
            if (NOT l_U2289)
            {
                if (sub_28531())
                {
                    if (PED_ANIM_EVENT( g_U818, 1477325977 ))
                    {
                        sub_74192();
                        l_U2289 = 1;
                    }
                }
            }
            if (sub_47349( ref l_U1566, 0 ))
            {
                g_U3437[7] = 1;
            }
            if (NOT l_U2299)
            {
                if ((((sub_51572( ref l_U1894 )) + (sub_51572( ref l_U1858 ))) <= 3) || (sub_47349( ref l_U1348, 0 )))
                {
                    sub_21044( ref l_U1930, 0 );
                    if (sub_19634( l_U1930[0] ))
                    {
                        sub_49056( l_U1930[0], -245.77000000, -21.83000000, 1.73000000, 0.50000000, 20, -1, 4 );
                    }
                    if (sub_19634( l_U1930[1] ))
                    {
                        sub_49056( l_U1930[1], -235.25000000, -23.03000000, 1.73000000, 0.50000000, 20, -1, 4 );
                    }
                    l_U2299 = 1;
                }
            }
            if (sub_47349( ref l_U1159, 0 ))
            {
                sub_793( "RJM", "HANDLE_EVENTS - Moving to ROOFTOP_MID_05A_PASSOS_DEATH", 0 );
                l_U2853 = 4;
            }
            if (NOT l_U2285)
            {
                if ((PED_GET_ACTION_INTENTION_STATUS( g_U818, 47 )) == 1)
                {
                    l_U2285 = 1;
                }
            }
            else if (sub_75276())
            {
                sub_793( "RJM", "Player shot near Passos", 0 );
                PED_SET_ACTION_INTENTION( g_U818, 56, 1000, 0, 0, 0 );
            }
            if (NOT l_U2284)
            {
                if ((sub_51572( ref l_U1858 )) == 0)
                {
                    sub_793( "RJM", "Reset tethering for the peds at the back of the first floor", 0 );
                    sub_48105( ref l_U1894 );
                    l_U2284 = 1;
                }
            }
            iVar2 = ((sub_51572( ref l_U1858 )) + (sub_51572( ref l_U1894 ))) + (sub_51572( ref l_U1930 ));
            if ((l_U2595 == 20) AND (iVar2 < 6))
            {
                l_U2596 = 20;
            }
            else if (iVar2 == 1)
            {
                if (NOT l_U2290)
                {
                    sub_54801( ref l_U1858 );
                    sub_54801( ref l_U1894 );
                    sub_54801( ref l_U1930 );
                }
            }
            else if (iVar2 == 0)
            {
                l_U2596 = 21;
                sub_793( "RJM", "HANDLE_EVENTS - Moving to ABANDONED_FLOOR1_BULLET_CAM", 0 );
                l_U2853 = 13;
            };;;
            break;
            case 13:
            if (NOT IS_LAST_MAN_STANDING_ACTIVE())
            {
                if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
                {
                    if ((PED_GET_ACTION_INTENTION_STATUS( g_U818, 47 )) == 1)
                    {
                        if (g_U780 != 6)
                        {
                            g_U780 = 6;
                            sub_14499( ref l_U493, 6, sub_10194(), g_U3141[6]._fU0, g_U3141[6]._fU12, g_U3141[6]._fU16, g_U3141[6]._fU20, 1 );
                        }
                        sub_26009( g_U818, -242.80000000, -2.41871000, 1.60600000, 65446 );
                        sub_65105( g_U818 );
                        PED_SET_ACTION_INTENTION( g_U818, 48, 1000, 0, 0, 0 );
                        sub_28200( ref g_U818, g_U3553 );
                        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U818, 1 );
                        CLEAR_PED_TASKS( g_U818 );
                        l_U2003 = 1;
                        sub_793( "RJM", "HANDLE_EVENTS - Moving to ABANDONED_RUN_UP_STAIRS", 0 );
                        l_U2853 = 14;
                    }
                    else
                    {
                        sub_76077();
                    }
                }
            }
            break;
            case 14:
            sub_76316( g_U818, ref l_U2870, ref l_U2872, ref l_U2871, ref l_U2882, ref l_U2873 );
            sub_76077();
            if (((sub_45628( ref l_U1537, sub_10194(), 0 )) == 1) || ((sub_45628( ref l_U1516, sub_10194(), 0 )) == 1))
            {
                sub_793( "kja", "Player Hit the Kill Box", 0 );
                SET_BULLET_CAM_PREF( sub_10194(), "MISS_DEATH_FALL_01A", "", "", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
                sub_39085( sub_10194() );
            }
            if (sub_47349( ref l_U1566, 0 ))
            {
                g_U3437[7] = 1;
            }
            if (sub_47349( ref l_U1432, 0 ))
            {
                sub_73216( 1 );
                sub_9512( ref l_U2579 );
                l_U2596 = 23;
            }
            if (NOT sub_55307())
            {
                if (sub_38813( ref l_U2579 ))
                {
                    sub_53506( "SNYC_SGTPH", ref l_U2523 );
                }
            }
            if (NOT l_U2298)
            {
                if ((PED_GET_ACTION_INTENTION_STATUS( g_U818, 48 )) == 1)
                {
                    CLEAR_PED_PRIMARY_LOOKAT( g_U818 );
                    if (NOT l_U2296)
                    {
                        sub_30625();
                        sub_29939( ref l_U2579, 21000 );
                        l_U2296 = 1;
                    }
                    if (sub_30541())
                    {
                        sub_793( "RJM", "SET_PED_PRIMARY_LOOKAT - Setting Passos to look at Max", 0 );
                        SET_PED_PRIMARY_LOOKAT( g_U818, sub_10194() );
                        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U818, 0 );
                        l_U2298 = 1;
                    }
                }
            }
            if (l_U2296)
            {
                sub_72292( 16000, 2000 );
            }
            if (((sub_76384( g_U818, 29 )) != 3) AND (NOT l_U2295))
            {
                if (NOT ((PED_GET_ACTION_INTENTION_STATUS( g_U818, 52 )) == 3))
                {
                    if ((IS_CONTROL_PRESSED( 0, 6 )) AND ((IS_PLAYER_GUN_RAISED( sub_10216() )) AND (IS_PED_IN_CROSSHAIR_CYLINDER_OFFSET( g_U818, 0.40000000, 1.00000000, 0.00000000, 0.00000000, -0.20000000, 15.00000000, 1 ))))
                    {
                        l_U2295 = 1;
                        PED_SET_ACTION_INTENTION( g_U818, 52, 1000, 0, 0, 0 );
                    }
                }
            }
            else if (l_U2295)
            {
                if (((PED_GET_ACTION_INTENTION_STATUS( g_U818, 52 )) == 1) || (NOT (IS_PED_IN_CROSSHAIR_CYLINDER_OFFSET( g_U818, 0.40000000, 1.00000000, 0.00000000, 0.00000000, -0.20000000, 15.00000000, 1 ))))
                {
                    PED_FINISH_ACTION_INTENTION( g_U818, 52 );
                    sub_793( "RJM", "Turning on ability to POINT again", 0 );
                    l_U2295 = 0;
                }
            }
            if (sub_78982())
            {
                if ((sub_47349( ref l_U1495, 0 )) || (sub_47349( ref l_U1474, 0 )))
                {
                    sub_79892();
                    sub_80037();
                    sub_26009( g_U818, -236.78000000, -24.10000000, 1.73123000, 0 );
                    PED_SET_ACTION_INTENTION( g_U818, 49, 1000, 0, 0, 0 );
                    sub_793( "RJM", "HANDLE_EVENTS - Moving to ABANDONED_BUILDING_FLOOR2", 0 );
                    sub_80279();
                    sub_24016( -1222535398, 0 );
                    sub_1202( 637400269, 0 );
                    sub_29939( ref l_U2570, 1500 );
                    sub_29939( ref l_U2561, 7000 );
                    l_U2853 = 15;
                }
            }
            break;
            case 15:
            if (((sub_45628( ref l_U1537, sub_10194(), 0 )) == 1) || ((sub_45628( ref l_U1516, sub_10194(), 0 )) == 1))
            {
                sub_793( "kja", "Player Hit the Kill Box", 0 );
                SET_BULLET_CAM_PREF( sub_10194(), "MISS_DEATH_FALL_01A", "", "", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
                sub_39085( sub_10194() );
            }
            if (sub_28531())
            {
                if ((sub_47349( ref l_U1369, 0 )) || (sub_47349( ref l_U1390, 0 )))
                {
                    sub_793( "RJM", "Player has run out to the fire escape warning", 0 );
                    sub_72741( "SNYC_WTFG", ref l_U2503 );
                }
                else if ((sub_47349( ref l_U1180, 0 )) || (sub_47349( ref l_U1411, 0 )))
                {
                    sub_793( "RJM", "HANDLE_EVENTS - Moving to ROOFTOP_MID_05B_PASSOS_DEATH", 0 );
                    l_U2853 = 5;
                }
            }
            if (sub_38813( ref l_U2570 ))
            {
                sub_53506( "SNYC_MSTT", ref l_U2513 );
            }
            sub_80802();
            if (sub_75276())
            {
                sub_793( "RJM", "Player shot near Passos", 0 );
                PED_SET_ACTION_INTENTION( g_U818, 56, 1000, 0, 0, 0 );
            }
            iVar2 = sub_51572( ref l_U1992 );
            if (iVar2 == 1)
            {
                if (NOT l_U2290)
                {
                    sub_54801( ref l_U1992 );
                }
            }
            else if (iVar2 == 0)
            {
                sub_793( "RJM", "HANDLE_EVENTS - Moving to ABANDONED_FLOOR2_BULLET_CAM", 0 );
                END_CONTEXT( "NYBAR_ABANDONED_BUILDING" );
                ENABLE_STATIC_EMITTER( "S_NYC2_SE_CHOP_SHOP_TOOLS", 1 );
                l_U2853 = 16;
            }
            break;
            case 16:
            if (((sub_45628( ref l_U1537, sub_10194(), 0 )) == 1) || ((sub_45628( ref l_U1516, sub_10194(), 0 )) == 1))
            {
                sub_793( "kja", "Player Hit the Kill Box", 0 );
                SET_BULLET_CAM_PREF( sub_10194(), "MISS_DEATH_FALL_01A", "", "", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
                sub_39085( sub_10194() );
            }
            if (NOT IS_LAST_MAN_STANDING_ACTIVE())
            {
                if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
                {
                    l_U2595 = 25;
                    l_U2596 = 25;
                    if (sub_28531())
                    {
                        sub_793( "RJM", "Starting Vig_21 with Passos", 0 );
                        CLEAR_PED_TASKS_IMMEDIATELY( g_U818 );
                        ISEQ_UNREGISTER_ENTITY( -1202559929, "passos" );
                        sub_65105( g_U818 );
                        sub_26009( g_U818, -238.48110000, -21.14708000, 5.12300000, 274 );
                        ISEQ_REGISTER_ENTITY( -223586764, "passos", g_U818, 0 );
                        ISEQ_START( -223586764 );
                    }
                    sub_81596( ref l_U2588, ref l_U2591 );
                    sub_793( "RJM", "HANDLE_EVENTS - Moving to ABANDONED_FLOOR2_WAIT_FOR_PASSOS_MOVEMENT", 0 );
                    l_U2853 = 17;
                }
            }
            break;
            case 17:
            sub_76316( g_U818, ref l_U2870, ref l_U2872, ref l_U2871, ref l_U2882, ref l_U2873 );
            if (((sub_45628( ref l_U1537, sub_10194(), 0 )) == 1) || ((sub_45628( ref l_U1516, sub_10194(), 0 )) == 1))
            {
                sub_793( "kja", "Player Hit the Kill Box", 0 );
                SET_BULLET_CAM_PREF( sub_10194(), "MISS_DEATH_FALL_01A", "", "", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
                sub_39085( sub_10194() );
            }
            sub_82039();
            if (sub_50397( l_U1243 ))
            {
                uVar16 = GET_WEAPON_FROM_HAND( sub_10194(), 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar16 )) == 1)
                {
                    if ((sub_57707( uVar16 )) == 1)
                    {
                        sub_55559( 0 );
                    }
                    else
                    {
                        uVar17 = GET_WEAPON_FROM_HAND( sub_10194(), 1, 0 );
                        if ((GET_DOES_WEAPON_EXIST( uVar17 )) == 1)
                        {
                            sub_55559( 0 );
                        }
                    }
                }
            }
            if (sub_82400( l_U1243, l_U1264, 1 ))
            {
                sub_793( "RJM", "HANDLE_EVENTS - Max in Passos' MID_06 Start position.  Short-circuit", 0 );
                g_U3437[8] = 1;
                l_U2853 = 20;
            }
            if (sub_19634( g_U818 ))
            {
                if ((PED_GET_ACTION_INTENTION_STATUS( g_U818, 56 )) == 1)
                {
                    sub_793( "RJM", "HANDLE_EVENTS - Moving to ABANDONED_FLOOR2_WAIT_FOR_MID06", 0 );
                    l_U2853 = 18;
                }
            }
            break;
            case 18:
            if (((sub_45628( ref l_U1537, sub_10194(), 0 )) == 1) || ((sub_45628( ref l_U1516, sub_10194(), 0 )) == 1))
            {
                sub_793( "kja", "Player Hit the Kill Box", 0 );
                SET_BULLET_CAM_PREF( sub_10194(), "MISS_DEATH_FALL_01A", "", "", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
                sub_39085( sub_10194() );
            }
            if ((sub_50397( l_U1222 )) || ((sub_50397( l_U1201 )) || (sub_50397( l_U1243 ))))
            {
                uVar16 = GET_WEAPON_FROM_HAND( sub_10194(), 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar16 )) == 1)
                {
                    if ((sub_57707( uVar16 )) == 1)
                    {
                        sub_55559( 0 );
                    }
                    else
                    {
                        uVar17 = GET_WEAPON_FROM_HAND( sub_10194(), 1, 0 );
                        if ((GET_DOES_WEAPON_EXIST( uVar17 )) == 1)
                        {
                            sub_55559( 0 );
                        }
                    }
                }
            }
            if ((sub_50397( l_U1222 )) || ((sub_50397( l_U1201 )) || (sub_82400( l_U1243, l_U1264, 1 ))))
            {
                sub_73216( 0 );
                sub_793( "SBA", "HANDLE_EVENTS: Timer done, moving on to ROOFTOP_DONE", 0 );
                g_U3437[8] = 1;
                l_U2853 = 20;
            }
            if (sub_45628( ref l_U1453, g_U818, 0 ))
            {
                sub_793( "RJM", "VIG 21 - Passos finished first animation, start timer for impatient dialog", 0 );
                sub_29962( ref l_U2305 );
                sub_72741( ref l_U2251, ref l_U2423 );
            }
            if (sub_41038( ref l_U2305 ))
            {
                if (sub_38813( ref l_U2305 ))
                {
                    PED_SET_ACTION_INTENTION( g_U818, 37, 1000, 0, 0, 0 );
                    sub_72741( ref l_U2267, ref l_U2433 );
                    sub_52834( ref l_U2305 );
                    sub_30625();
                    l_U2297 = 1;
                }
            }
            if (l_U2297)
            {
                sub_72292( 16000, 2000 );
            }
            sub_82039();
            break;
            case 19: break;
            case 20: break;
        }
    }
    return;
}

void sub_45628(int iParam0, unknown uParam1, unknown uParam2)
{
    if (iParam0->_fU68 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU68 = sub_45667( uParam1, (iParam0^) );
        if ((iParam0->_fU68) AND (uParam2))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU68;
}

int sub_45667(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, ref uParam1._fU0 );
    }
    return 0;
}

void sub_46187()
{
    sub_21424( ref l_U1858 );
    sub_21424( ref l_U1894 );
    sub_21424( ref l_U1992 );
    return;
}

int sub_46232()
{
    int I;

    for ( I = 0; I <= (l_U1858 - 1); I++ )
    {
        if (sub_19634( l_U1858[I] ))
        {
            sub_793( "RJM", "GET_SCENEPED_FOR_MID_05A - Found a guy from the front group", 0 );
            return l_U1831[I]._fU20;
        }
    }
    for ( I = 0; I <= (l_U1894 - 1); I++ )
    {
        if (sub_19634( l_U1894[I] ))
        {
            sub_793( "RJM", "GET_SCENEPED_FOR_MID_05A - Found a guy from the back group", 0 );
            return l_U1867[I]._fU20;
        }
    }
    for ( I = 0; I <= (l_U1930 - 1); I++ )
    {
        if (sub_19634( l_U1930[I] ))
        {
            sub_793( "RJM", "GET_SCENEPED_FOR_MID_05A - Found a guy from the extra group", 0 );
            return l_U1903[I]._fU20;
        }
    }
    sub_793( "RJM", "GET_SCENEPED_FOR_MID_05A - Couldn't find anyone alive...that's weird, use a default", 0 );
    return 596270676;
}

int sub_46905()
{
    int I;

    for ( I = 0; I <= (l_U1992 - 1); I++ )
    {
        if (sub_19634( l_U1992[I] ))
        {
            sub_793( "RJM", "GET_SCENEPED_FOR_MID_05B - Found a guy", 0 );
            return l_U1939[I]._fU20;
        }
    }
    sub_793( "RJM", "GET_SCENEPED_FOR_MID_05B - Couldn't find anyone alive...that's weird, use a default", 0 );
    return 293821277;
}

void sub_47349(int iParam0, unknown uParam1)
{
    if (iParam0->_fU64 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU64 = sub_45667( sub_10194(), (iParam0^) );
        if ((iParam0->_fU64) AND (uParam1))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU64;
}

void sub_47802()
{
    sub_793( "SBA", "START_ROOF_PATROLLERS", "***" );
    sub_47854( 0 );
    return;
}

void sub_47854(boolean bParam0)
{
    int I;

    sub_793( "SBA", "ACTIVATE_ROOF_PATROLLERS", "***" );
    for ( I = 0; I < 3; I++ )
    {
        if (sub_19634( l_U1649[I] ))
        {
            if (bParam0)
            {
                sub_26009( l_U1649[I], l_U1609[I]._fU0, l_U1609[I]._fU12 );
            }
            PED_SET_ACTION_INTENTION( l_U1649[I], 53, 1000, 0.00000000, 0.00000000, 0.00000000 );
        }
    }
    return;
}

void sub_48047()
{
    sub_793( "RJM", "TRIGGER_APT_ROOF_GUYS - start", 0 );
    sub_48105( ref l_U1823 );
    if (sub_19634( l_U1823[0] ))
    {
        sub_29041( l_U1823[0] );
        SET_PED_COMBAT_MOVEMENT( l_U1823[0], 0 );
    }
    return;
}

void sub_48105(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (sub_19634( (uParam0^)[I] ))
        {
            RESET_PED_TETHERING( (uParam0^)[I] );
        }
    }
    return;
}

void sub_48247()
{
    int I;
    string sVar3;

    for ( I = 0; I < 3; I++ )
    {
        if ((NOT l_U1659[I]) AND (sub_19634( l_U1748[I] )))
        {
            if (I == 0)
            {
                sVar3 = "thug0";
            }
            else if (I == 1)
            {
                sVar3 = "thug1";
            }
            else if (I == 2)
            {
                sVar3 = "thug2";
            };;;
            if ((ISEQ_QUERY_ENTITY_STATE( -329975025, sVar3, 5 )) || (ISEQ_QUERY_ENTITY_STATE( -329975025, sVar3, 6 )))
            {
                sub_793( "BSW", "HANDLE_PATROL_REACTIONS - Patroller reacting", 0 );
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1649[I], 0 );
                if (sub_30541())
                {
                    sub_48498( l_U1649[I], 1 );
                }
                if (I != 2)
                {
                    PLAY_PED_AMBIENT_SPEECH( l_U1649[I], "ORDER_FIRE", 0, 0, 2, 0, 30000 );
                }
                l_U1659[I] = 1;
            }
        }
    }
    if ((l_U1659[2]) AND ((l_U1659[1]) AND (l_U1659[0])))
    {
        sub_793( "BSW", "HANDLE_PATROL_REACTIONS, all patrollers have reacted", 0 );
        l_U1663 = 1;
        if (sub_19634( l_U1823[0] ))
        {
            SET_PED_COMBAT_MOVEMENT( l_U1823[0], 2 );
            sub_48575( ref l_U1823[0] );
            SET_PED_COMBAT_ATTRIBUTES( l_U1823[0], 1, 0 );
            sub_49056( l_U1823[0], -335.69000000, -15.73000000, 6.27000000, 0.50000000, 20, -1, 4 );
        }
        sub_49115();
        if (l_U2595 == 9)
        {
            l_U2596 = 9;
        }
    }
    return;
}

void sub_48498(unknown uParam0, boolean bParam1)
{
    if ((NOT (IS_PED_RAGDOLL( uParam0, 0 ))) AND ((NOT (IS_PED_INJURED( uParam0 ))) AND ((sub_30541()) AND (sub_19634( uParam0 )))))
    {
        if (bParam1)
        {
            CLEAR_PED_TASKS_IMMEDIATELY( uParam0 );
        }
        CLEAR_LOCKED_TARGET( uParam0 );
        sub_48575( ref uParam0 );
        sub_48671( ref uParam0 );
        TASK_COMBAT_PED( uParam0, sub_10194() );
    }
    return;
}

void sub_48575(unknown uParam0)
{
    if ((sub_30541()) AND (sub_19634( (uParam0^) )))
    {
        sub_48611( uParam0, sub_10194() );
    }
    return;
}

void sub_48611(unknown uParam0, unknown uParam1)
{
    if ((sub_19634( uParam1 )) AND (sub_19634( (uParam0^) )))
    {
        REGISTER_TARGET( (uParam0^), uParam1 );
    }
    return;
}

void sub_48671(unknown uParam0)
{
    if ((sub_30541()) AND (sub_19634( (uParam0^) )))
    {
        sub_48707( uParam0, sub_10194() );
    }
    return;
}

void sub_48707(unknown uParam0, unknown uParam1)
{
    if ((sub_19634( uParam1 )) AND (sub_19634( (uParam0^) )))
    {
        SET_LOCKED_TARGET( (uParam0^), uParam1 );
    }
    return;
}

void sub_49056(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    if (sub_19634( uParam0 ))
    {
        CLEAR_PED_TASKS_IMMEDIATELY( uParam0 );
        TASK_ATTACK_MOVE( uParam0, uParam1, uParam4, uParam5, uParam6, uParam7 );
    }
    return;
}

void sub_49115()
{
    sub_793( "SBA", "ACTIVATE_AND_MOVE_ROOF_RIGHT_GUYS", "***" );
    sub_29010( ref l_U1687 );
    sub_49197( ref l_U1687, sub_10194(), 1 );
    if ((sub_30541()) AND (sub_19634( l_U1687[0] )))
    {
        SET_PED_COMBAT_ATTRIBUTES( l_U1687[0], 1, 0 );
        TASK_COMBAT_PED( l_U1687[0], sub_10194() );
    }
    return;
}

void sub_49197(unknown uParam0, unknown uParam1, int iParam2)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if ((NOT (IS_PED_DEAD( uParam1 ))) AND (NOT (IS_PED_DEAD( (uParam0^)[I] ))))
        {
            REGISTER_TARGET( (uParam0^)[I], uParam1 );
            if (iParam2 == 1)
            {
                CLEAR_LOCKED_TARGET( (uParam0^)[I] );
                SET_LOCKED_TARGET( (uParam0^)[I], uParam1 );
            }
        }
    }
    return;
}

void sub_49566(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_49603( (uParam0^)[I], uParam1, uParam2, uParam3 );
    }
    return;
}

void sub_49603(unknown uParam0, float fParam1, int iParam2, boolean bParam3)
{
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;

    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        uVar6 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        if (uVar6._fU8 < fParam1)
        {
            if (iParam2 == 1)
            {
                SET_PED_HEALTH( uParam0, 0, 0 );
            }
            if (bParam3)
            {
                sub_18886( uParam0 );
            }
        }
    }
    return;
}

void sub_49896()
{
    sub_49916( ref l_U1823, l_U844 );
    sub_49916( ref l_U1649, l_U844 );
    sub_49916( ref l_U1687, l_U844 );
    sub_49916( ref l_U1799, l_U844 );
    sub_49916( ref l_U1748, l_U865 );
    sub_49566( ref l_U1823, -1054867456, 0, 1 );
    sub_49566( ref l_U1649, -1054867456, 0, 1 );
    sub_49566( ref l_U1687, -1054867456, 0, 1 );
    sub_49566( ref l_U1799, -1054867456, 0, 1 );
    sub_49566( ref l_U1748, -1054867456, 0, 1 );
    return;
}

void sub_49916(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    int Result;
    int I;
    int iVar26;

    Result = 0;
    I = 0;
    iVar26 = (uParam0^);
    for ( I = 0; I < iVar26; I++ )
    {
        if (sub_49966( ref (uParam0^)[I], uParam1 ))
        {
            Result = 1;
        }
    }
    return Result;
}

int sub_49966(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((DOES_PED_EXIST( (uParam0^) )) == 1)
    {
        if ((IS_PED_DEAD( (uParam0^) )) == 0)
        {
            if ((IS_PED_IN_GAMEPLAY_HELPER_BOX( (uParam0^), ref uParam1._fU0 )) == 1)
            {
                sub_39085( (uParam0^) );
                return 1;
            }
        }
    }
    return 0;
}

void sub_50324(int iParam0)
{
    unknown Result;
    unknown uVar4;

    if ((sub_25564( iParam0 )) == 0)
    {
        sub_25630( iParam0 );
    }
    GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref Result, ref uVar4 );
    return Result;
}

void sub_50397(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20)
{
    return sub_45667( sub_10194(), uParam0 );
}

void sub_50500(int iParam0)
{
    int iVar3;
    float Result;

    if ((sub_25564( iParam0 )) == 0)
    {
        sub_25630( iParam0 );
    }
    iVar3 = 0;
    Result = 0.00000000;
    GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref iVar3, ref Result );
    return Result;
}

void sub_50818()
{
    sub_793( "SBA", "RELEASE_THE_PIGEONS: starting effect", 0 );
    START_PARTICLE_FX_NON_LOOPED_AT_COORD( "Ambient_Birds_scripted_S", -327.55600000, -17.03100000, 4.91800000, 0, 0, 50, 1065353216 );
    return;
}

void sub_50952()
{
    unknown uVar2;

    sub_793( "SBA", "ACTIVATE_COVER_ROOF_GUYS", "***" );
    sub_21044( ref l_U1799, 0 );
    sub_22567( ref l_U1799, 0 );
    sub_51030( ref l_U1799 );
    sub_51135( ref l_U1799, 0 );
    if (sub_30541())
    {
        if (sub_19634( l_U1799[0] ))
        {
            OPEN_SEQUENCE_TASK( ref uVar2 );
            TASK_PAUSE( 0, 500 );
            TASK_COMBAT_PED( 0, sub_10194() );
            CLOSE_SEQUENCE_TASK( uVar2 );
            TASK_PERFORM_SEQUENCE( l_U1799[0], uVar2 );
            CLEAR_SEQUENCE_TASK( uVar2 );
        }
        if (sub_19634( l_U1799[1] ))
        {
            OPEN_SEQUENCE_TASK( ref uVar2 );
            TASK_PAUSE( 0, 750 );
            TASK_COMBAT_PED( 0, sub_10194() );
            CLOSE_SEQUENCE_TASK( uVar2 );
            TASK_PERFORM_SEQUENCE( l_U1799[1], uVar2 );
            CLEAR_SEQUENCE_TASK( uVar2 );
        }
        if (sub_19634( l_U1799[2] ))
        {
            RESET_PED_TETHERING( l_U1799[2] );
            sub_20902( ref l_U1799[2], l_U1563, 1 );
            SET_PED_COMBAT_ATTRIBUTES( l_U1799[2], 1, 0 );
            OPEN_SEQUENCE_TASK( ref uVar2 );
            TASK_PAUSE( 0, 250 );
            TASK_ATTACK_MOVE( 0, -315.97000000, -18.95000000, 5.68000000, 1092616192, 1101004800, -1082130432, 3 );
            TASK_COMBAT_PED( 0, sub_10194() );
            CLOSE_SEQUENCE_TASK( uVar2 );
            TASK_PERFORM_SEQUENCE( l_U1799[2], uVar2 );
            CLEAR_SEQUENCE_TASK( uVar2 );
        }
    }
    return;
}

void sub_51030(unknown uParam0)
{
    sub_51047( uParam0, sub_10194() );
    return;
}

void sub_51047(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (sub_19634( (uParam0^)[I] ))
        {
            sub_48611( ref (uParam0^)[I], uParam1 );
        }
    }
    return;
}

void sub_51135(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_22370( ref (uParam0^)[I], uParam1 );
    }
    return;
}

void sub_51572(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result++;
        }
    }
    return Result;
}

void sub_51865()
{
    int iVar2;

    iVar2 = 3000;
    if (NOT l_U2283)
    {
        switch (l_U2858)
        {
            case 0:
            sub_793( "RJM", "HANDLE_ROOFTOP_ENEMY_TASKING - Going to RET_WAIT_FOR_PLAYER_TRIGGER", 0 );
            l_U2858 = 1;
            break;
            case 1:
            sub_793( "RJM", "HANDLE_ROOFTOP_ENEMY_TASKING - Going to RET_TASK_FIRST_WAVE", 0 );
            l_U2858 = 2;
            break;
            case 2:
            sub_52121();
            sub_29939( ref l_U2332, iVar2 );
            sub_793( "RJM", "HANDLE_ROOFTOP_ENEMY_TASKING - Going to RET_TASK_SECOND_WAVE", 0 );
            l_U2858 = 3;
            break;
            case 3:
            if (sub_38813( ref l_U2332 ))
            {
                sub_52505();
                sub_52834( ref l_U2332 );
                sub_793( "RJM", "HANDLE_ROOFTOP_ENEMY_TASKING - Going to RET_TASK_DONE", 0 );
                l_U2858 = 4;
            }
            break;
            case 4:
            sub_21078( ref l_U1748[0], 0 );
            sub_21078( ref l_U1748[1], 0 );
            l_U2283 = 1;
            l_U2294 = 0;
            break;
        }
    }
    return;
}

void sub_52121()
{
    sub_793( "RJM", "TASK_UPPER_ROOF0 - start", 0 );
    if ((sub_30541()) AND (sub_19634( l_U1748[0] )))
    {
        sub_29041( l_U1748[0] );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( l_U1748[0], 1 );
        sub_28643( l_U1748[0], "GenCover", "F824CF1A_B6E6FA61_Corner2", sub_10194(), 0 );
    }
    if (sub_19634( l_U1748[1] ))
    {
        sub_29041( l_U1748[1] );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( l_U1748[1], 1 );
        sub_28643( l_U1748[1], "GenCover", "F824CF1A_673F1030_Corner1", sub_10194(), 0 );
    }
    return;
}

void sub_52505()
{
    sub_793( "RJM", "TASK_UPPER_ROOF1 - start", 0 );
    if (sub_19634( l_U1748[2] ))
    {
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( l_U1748[2], 1 );
        sub_48575( ref l_U1748[2] );
        sub_21078( ref l_U1748[2], 0 );
        sub_29041( l_U1748[2] );
        SET_PED_COMBAT_ATTRIBUTES( l_U1748[2], 1, 0 );
        sub_49056( l_U1748[2], -312.12000000, -20.31000000, 5.72000000, 0.50000000, 1101004800, -1082130432, 3 );
    }
    if (sub_19634( l_U1748[3] ))
    {
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( l_U1748[3], 1 );
        sub_48575( ref l_U1748[3] );
        sub_21078( ref l_U1748[3], 0 );
        sub_29041( l_U1748[3] );
        RESET_PED_TETHERING( l_U1748[3] );
        sub_49056( l_U1748[3], -309.89000000, -23.02000000, 6.47000000, 0.50000000, 1101004800, -1082130432, 3 );
    }
    return;
}

void sub_52834(int iParam0)
{
    iParam0->_fU20 = 0;
    iParam0->_fU16 = 0;
    return;
}

void sub_53506(unknown uParam0, unknown uParam1)
{
    sub_793( "SBA", "P_SPEECH_PLAY_MAX_MONOLOGUE", "***" );
    if (sub_30541())
    {
        sub_53575( uParam1 );
        sub_53655( 0, sub_10194(), "MAX", uParam1, 2, 0 );
        sub_53655( 1, sub_10194(), "MAX", uParam1, 2, 0 );
        sub_53880( uParam0, uParam1, 8, 1 );
    }
    return;
}

void sub_53575(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

void sub_53655(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

void sub_53880(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return sub_53904( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

void sub_53904(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return sub_53959( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

int sub_53959(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT (sub_53994( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
    sub_54488( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

int sub_53994(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

void sub_54488(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

void sub_54801(unknown uParam0)
{
    int I;

    if ((sub_51572( uParam0 )) == 1)
    {
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
            {
                if (NOT (GET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I] )))
                {
                    SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I], 1 );
                    return (uParam0^)[I];
                }
            }
        }
    }
    return nil;
}

void sub_54993()
{
    sub_793( "RJM", "CREATE_PLANE", 0 );
    sub_22784( l_U2047 );
    l_U2047 = CREATE_OBJECT_NO_OFFSET( 1740663406, -302.18600000, -5.44400000, 30.20300000, 1, 0 );
    if (DOES_OBJECT_EXIST( l_U2047 ))
    {
        sub_793( "RJM", "Setting up NYC_PLANE_ROOT", 0 );
        PLAY_OBJECT_ANIM( l_U2047, "NYC_PLANE_ROOT", "ny_anim", 0.10000000, 0, 1 );
        SET_OBJECT_ANIM_CURRENT_TIME( l_U2047, "NYC_PLANE_ROOT", "ny_anim", 0.25000000 );
    }
    return;
}

void sub_55307()
{
    int Result;
    int I;

    Result = 0;
    for ( I = 0; I <= 3; I++ )
    {
        Result = (IS_SCRIPTED_CONVERSATION_ONGOING( I )) || (Result);
    }
    return Result;
}

void sub_55455(unknown uParam0)
{
    int I;

    for ( I = 0; I <= 3; I++ )
    {
        if (IS_SCRIPTED_CONVERSATION_ONGOING( I ))
        {
            if ((g_U1[I] <= 8) AND (g_U1[I] >= 4))
            {
                STOP_SCRIPTED_CONVERSATION( I, uParam0, 0 );
            }
        }
    }
    return;
}

void sub_55559(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_10194() )) == 0)
    {
        iVar3 = 0;
        uVar4 = GET_WEAPON_FROM_HAND( sub_10194(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar4 )) == 0)
        {
            iVar3 = 1;
        }
        if (((sub_55639( uVar4 )) == 0) AND ((GET_DOES_WEAPON_EXIST( uVar4 )) == 1))
        {
            iVar3 = 1;
        }
        if (iVar3 == 1)
        {
            uVar5 = sub_55848();
            if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
            {
                SELECT_WEAPON_TO_HAND( sub_10194(), uVar5, 0, uParam0 );
            }
        }
    }
    return;
}

int sub_55639(unknown uParam0)
{
    int iVar3;

    if ((GET_DOES_WEAPON_EXIST( uParam0 )) == 1)
    {
        iVar3 = GET_WEAPON_TYPE( uParam0 );
        if ((iVar3 == 1194438308) || ((iVar3 == -76667461) || ((iVar3 == -1404433099) || ((iVar3 == 1131969637) || ((iVar3 == -691403429) || ((iVar3 == 1845102363) || ((iVar3 == 150541352) || ((iVar3 == -820634585) || ((iVar3 == -612753081) || ((iVar3 == 811797242) || ((iVar3 == 68019059) || ((iVar3 == -1464892298) || ((iVar3 == 456708483) || ((iVar3 == -862236369) || (iVar3 == 406496141)))))))))))))))
        {
            return 1;
        }
    }
    return 0;
}

int sub_55848()
{
    unknown Result;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_10194() )) == 0)
    {
        Result = GET_WEAPON_FROM_HAND( sub_10194(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( Result )) == 1)
        {
            if ((sub_55639( Result )) == 1)
            {
                return Result;
            }
        }
        uVar3 = GET_WEAPON_FROM_HAND( sub_10194(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            return uVar3;
        }
        uVar4 = GET_WEAPON_FROM_HOLSTER( sub_10194(), 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar4 )) == 1)
        {
            return uVar4;
        }
        uVar5 = GET_WEAPON_FROM_HOLSTER( sub_10194(), 1 );
        if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
        {
            return uVar5;
        }
    }
    return 0;
}

void sub_56375(boolean bParam0, unknown uParam1, unknown uParam2)
{
    int Result;

    Result = 0;
    if (IS_STRING_NULL( uParam2 ))
    {
        uParam2 = l_U2600;
    }
    switch (l_U2633)
    {
        case 0:
        sub_793( "RJM", "PLAY_MIDSCENE_03 start", 0 );
        sub_37028( 1, 0, 0, 1 );
        if (NOT bParam0)
        {
            sub_56507();
            sub_25299( uParam2, 1 );
        }
        else
        {
            sub_793( "bsw", "PLAY_MIDSCENE_03 forcing fade in", 0 );
            DO_SCREEN_FADE_IN( 0 );
        }
        if (bParam0)
        {
            CUTSCENE_REGISTER_ISEQ( 1419096468 );
            CUTSCENE_REGISTER_ISEQ( 123489604 );
            CUTSCENE_REGISTER_ISEQ( -900483547 );
            CUTSCENE_REGISTER_ISEQ( -652127296 );
            CUTSCENE_REGISTER_ISEQ( 8102532 );
            CUTSCENE_REGISTER_ISEQ( -1131749617 );
            CUTSCENE_REGISTER_ISEQ( 2119011196 );
            CUTSCENE_REGISTER_ISEQ( -1930417983 );
            SET_PED_DEFAULT_AIM_AT_COORD( sub_10194(), -287.63280000, 3.79891700, 1.71265600 );
            SET_PLAYER_FORCED_AIM( sub_10216(), 1, 0 );
        }
        sub_56837();
        sub_57361( bParam0 );
        START_SEAMLESS_CUTSCENE();
        l_U2633 = 1;
        break;
        case 1:
        sub_60029( 0 );
        l_U2633 = 2;
        break;
        case 2:
        if ((l_U2595 == 13) AND (GET_CUTSCENE_TIME_MS() > 12945))
        {
            l_U2596 = 13;
        }
        if (HAS_CUTSCENE_FINISHED())
        {
            CAMERA_PLAY_ANIMATED( "LEVEL_S_NYBAR_CP_04", "VIG_15B_NYBAR_MPM_FWD_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
        }
        case 3:
        if ((HAS_CUTSCENE_UNLOADED()) AND (HAS_CUTSCENE_FINISHED()))
        {
            if (l_U2595 == 13)
            {
                l_U2596 = 13;
            }
            sub_58554( l_U2601, 1 );
            sub_58554( l_U2601, 1 );
            sub_60029( 1 );
            sub_60346();
            sub_60414();
            sub_793( "RJM", "PLAY_MIDSCENE_03 end", 0 );
            Result = 1;
            l_U2633 = 3;
        }
        break;
    }
    return Result;
}

void sub_56507()
{
    sub_878( 233534649, 1 );
    sub_1202( 1419096468, 1 );
    sub_1202( 123489604, 1 );
    sub_1202( -900483547, 1 );
    sub_1202( -652127296, 1 );
    sub_1202( 8102532, 1 );
    sub_1202( -1131749617, 1 );
    sub_1202( 2119011196, 1 );
    sub_1202( -1930417983, 1 );
    return;
}

void sub_56837()
{
    sub_793( "RJM", "CREATE_MID_03_PEDS_AND_OBJECTS - start", 0 );
    sub_7548( ref l_U2635, 0, 0, 0, 0.00000000, -1491110017, 26, 6, 0, 0, 0 );
    sub_7548( ref l_U2649, 0, 0, 0, 0.00000000, 951389475, 26, 6, 0, 0, 0 );
    sub_7548( ref l_U2663, 0, 0, 0, 0.00000000, 11941526, 26, 6, 0, 0, 0 );
    sub_7548( ref l_U2677, 0, 0, 0, 0.00000000, 2031544278, 26, 6, 0, 0, 0 );
    sub_7548( ref l_U2691, 0, 0, 0, 0.00000000, -1969074258, 26, 6, 0, 0, 0 );
    l_U2634 = sub_18967( ref l_U2635 );
    l_U2648 = sub_18967( ref l_U2649 );
    l_U2662 = sub_18967( ref l_U2663 );
    l_U2676 = sub_18967( ref l_U2677 );
    l_U2690 = sub_18967( ref l_U2691 );
    if (sub_19634( l_U2634 ))
    {
        sub_12445( l_U2634, 434544317, 25000, 0, 0 );
    }
    if (sub_19634( l_U2634 ))
    {
        sub_12445( l_U2648, -1074756423, 25000, 0, 0 );
    }
    if (sub_19634( l_U2634 ))
    {
        sub_12445( l_U2662, -1074756423, 25000, 0, 0 );
    }
    if (sub_19634( l_U2634 ))
    {
        sub_12445( l_U2676, -1074756423, 25000, 0, 0 );
    }
    if (sub_19634( l_U2634 ))
    {
        sub_12445( l_U2690, -1074756423, 25000, 0, 0 );
    }
    sub_793( "RJM", "CREATE_MID_03_PEDS_AND_OBJECTS - end", 0 );
    return;
}

void sub_57361(boolean bParam0)
{
    sub_793( "RJM", "REGISTER_PEDS_MID_03 - start", 0 );
    if (sub_30541())
    {
        sub_793( "RJM", "Registering Max with mid_03", 0 );
        sub_57472( ref l_U2601, 1, 1 );
        sub_58554( l_U2601, 0 );
        sub_58659( l_U2601, 0 );
        sub_55559( 1 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( sub_10194(), 0, 0 ), "W_PI_Clt1911_Aa_H", 0 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( sub_10194(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
        CUTSCENE_REGISTER_PED_TELEPORT( sub_10194(), g_U3141[3]._fU0, g_U3141[3]._fU12 );
        if (bParam0)
        {
            ISEQ_REGISTER_ENTITY( 1419096468, "ny_mpm_max", sub_10194(), 0 );
        }
    }
    if (sub_19634( l_U2634 ))
    {
        sub_793( "RJM", "Registering piMid_03Guy1 with mid_03", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U2634, "G_NY_T_Sold_D", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U2634, 0, 0 ), "W_SG_BenM3_Aa_H", 1 );
    }
    if (sub_19634( l_U2648 ))
    {
        sub_793( "RJM", "Registering piMid_03Guy2 with mid_03", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U2648, "G_NY_T_Sold_D^1", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U2648, 0, 0 ), "W_AR_AK47_Aa_H^2", 1 );
    }
    if (sub_19634( l_U2662 ))
    {
        sub_793( "RJM", "Registering piMid_03Guy3 with mid_03", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U2662, "G_NY_T_Sold_D^2", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U2662, 0, 0 ), "W_AR_AK47_Aa_H", 1 );
    }
    if (sub_19634( l_U2676 ))
    {
        sub_793( "RJM", "Registering piMid_03Guy4 with mid_03", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U2676, "G_NY_T_Sold_D^3", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U2676, 0, 0 ), "W_AR_AK47_Aa_H^3", 1 );
    }
    if (sub_19634( l_U2690 ))
    {
        sub_793( "RJM", "Registering piMid_03Guy5 with mid_03", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U2690, "G_NY_T_Sold_D^4", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U2690, 0, 0 ), "W_AR_AK47_Aa_H^1", 1 );
    }
    if (bParam0)
    {
        if (DOES_OBJECT_EXIST( g_U3116 ))
        {
            ISEQ_REGISTER_ENTITY( 123489604, "TOWER_AA", g_U3116, 1 );
        }
        if (DOES_OBJECT_EXIST( g_U3112 ))
        {
            ISEQ_REGISTER_ENTITY( -900483547, "TOWER_ANM01", g_U3112, 1 );
        }
        if (DOES_OBJECT_EXIST( g_U3113 ))
        {
            ISEQ_REGISTER_ENTITY( -652127296, "TOWER_ANM02", g_U3113, 1 );
        }
        if (DOES_OBJECT_EXIST( g_U3115 ))
        {
            ISEQ_REGISTER_ENTITY( 8102532, "TOWER_ANM03", g_U3115, 1 );
        }
        if (DOES_OBJECT_EXIST( g_U3114 ))
        {
            ISEQ_REGISTER_ENTITY( -1131749617, "TOWER_BASE", g_U3114, 1 );
        }
        if (DOES_OBJECT_EXIST( g_U3117 ))
        {
            ISEQ_REGISTER_ENTITY( 2119011196, "RF_WT_lid_01", g_U3117, 1 );
        }
        if (DOES_OBJECT_EXIST( g_U3118 ))
        {
            ISEQ_REGISTER_ENTITY( -1930417983, "RF_WT_lid_02", g_U3118, 1 );
        }
    }
    REGISTER_HIDE_ENTITY_AT_POSITION( g_U2895._fU0, g_U2895._fU4 );
    sub_793( "RJM", "REGISTER_PEDS_MID_03 - end", 0 );
    return;
}

void sub_57472(int iParam0, int iParam1, unknown uParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;

    sub_57484( iParam0 );
    if ((IS_PED_DEAD( sub_10194() )) == 0)
    {
        uVar5 = GET_WEAPON_FROM_HAND( sub_10194(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
        {
            if ((sub_55639( uVar5 )) == 1)
            {
                ref iParam0->_fU0->_fU0 = uVar5;
                ref iParam0->_fU0->_fU4 = GET_WEAPON_TYPE( uVar5 );
            }
            else if ((sub_57707( uVar5 )) == 1)
            {
                ref iParam0->_fU24->_fU0 = uVar5;
                ref iParam0->_fU24->_fU4 = GET_WEAPON_TYPE( uVar5 );
            }
        }
        uVar6 = GET_WEAPON_FROM_HAND( sub_10194(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar6 )) == 1)
        {
            ref iParam0->_fU12->_fU0 = uVar6;
            ref iParam0->_fU12->_fU4 = GET_WEAPON_TYPE( uVar6 );
        }
        uVar7 = GET_WEAPON_FROM_HOLSTER( sub_10194(), 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
        {
            ref iParam0->_fU36->_fU0 = uVar7;
            ref iParam0->_fU36->_fU4 = GET_WEAPON_TYPE( uVar7 );
        }
        uVar8 = GET_WEAPON_FROM_HOLSTER( sub_10194(), 1 );
        if ((GET_DOES_WEAPON_EXIST( uVar8 )) == 1)
        {
            ref iParam0->_fU48->_fU0 = uVar8;
            ref iParam0->_fU48->_fU4 = GET_WEAPON_TYPE( uVar8 );
        }
        uVar9 = GET_WEAPON_FROM_HOLSTER( sub_10194(), 2 );
        if ((GET_DOES_WEAPON_EXIST( uVar9 )) == 1)
        {
            ref iParam0->_fU60->_fU0 = uVar9;
            ref iParam0->_fU60->_fU4 = GET_WEAPON_TYPE( uVar9 );
        }
    }
    if (iParam1 == 0)
    {
        if ((IS_PED_DEAD( sub_10194() )) == 0)
        {
            uVar10 = GET_WEAPON_FROM_HAND( sub_10194(), 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar10 )) == 1)
            {
                SELECT_WEAPON_TO_HAND( sub_10194(), 0, 0, uParam2 );
            }
            uVar11 = GET_WEAPON_FROM_HAND( sub_10194(), 1, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar11 )) == 1)
            {
                SELECT_WEAPON_TO_HAND( sub_10194(), 0, 1, uParam2 );
            }
        }
    }
    else if (iParam1 == 1)
    {
        if ((IS_PED_DEAD( sub_10194() )) == 0)
        {
            uVar12 = GET_WEAPON_FROM_HAND( sub_10194(), 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar12 )) == 1)
            {
                if ((sub_57707( uVar12 )) == 1)
                {
                    SELECT_WEAPON_TO_HAND( sub_10194(), 0, 0, uParam2 );
                }
            }
            uVar13 = GET_WEAPON_FROM_HAND( sub_10194(), 1, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar13 )) == 1)
            {
                SELECT_WEAPON_TO_HAND( sub_10194(), 0, 1, uParam2 );
            }
        }
    }
    return;
}

void sub_57484(int iParam0)
{
    ref iParam0->_fU0->_fU0 = 0;
    ref iParam0->_fU0->_fU4 = 0;
    ref iParam0->_fU12->_fU0 = 0;
    ref iParam0->_fU12->_fU4 = 0;
    ref iParam0->_fU24->_fU0 = 0;
    ref iParam0->_fU24->_fU4 = 0;
    ref iParam0->_fU36->_fU0 = 0;
    ref iParam0->_fU36->_fU4 = 0;
    ref iParam0->_fU48->_fU0 = 0;
    ref iParam0->_fU48->_fU4 = 0;
    ref iParam0->_fU60->_fU0 = 0;
    ref iParam0->_fU60->_fU4 = 0;
    return;
}

int sub_57707(unknown uParam0)
{
    int iVar3;

    if ((GET_DOES_WEAPON_EXIST( uParam0 )) == 1)
    {
        iVar3 = GET_WEAPON_TYPE( uParam0 );
        if ((iVar3 == -2075384407) || ((iVar3 == 10648147) || ((iVar3 == 1224272620) || ((iVar3 == 1478009203) || ((iVar3 == 1964270085) || ((iVar3 == -110877124) || ((iVar3 == 427207702) || ((iVar3 == 319712764) || ((iVar3 == 514118749) || ((iVar3 == -184942895) || ((iVar3 == -168327769) || ((iVar3 == 434544317) || ((iVar3 == -1659006841) || ((iVar3 == 930042831) || ((iVar3 == 1001413062) || ((iVar3 == 377623895) || ((iVar3 == -1312131151) || ((iVar3 == -1787162676) || ((iVar3 == 724901397) || ((iVar3 == 57534114) || ((iVar3 == 840671040) || ((iVar3 == 1308526797) || ((iVar3 == -1074756423) || ((iVar3 == 1992962408) || (iVar3 == -1013714740)))))))))))))))))))))))))
        {
            return 1;
        }
    }
    return 0;
}

void sub_58554(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18)
{
    unknown uVar21;
    unknown uVar22;

    uVar21 = uParam0._fU24._fU0;
    if ((GET_DOES_WEAPON_EXIST( uVar21 )) == 1)
    {
        SET_WEAPON_VISIBLE( uVar21, uParam18 );
    }
    uVar22 = uParam0._fU60._fU0;
    if ((GET_DOES_WEAPON_EXIST( uVar22 )) == 1)
    {
        SET_WEAPON_VISIBLE( uVar22, uParam18 );
    }
    return;
}

void sub_58659(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18)
{
    unknown uVar21;

    uVar21 = uParam0._fU12._fU0;
    if ((GET_DOES_WEAPON_EXIST( uVar21 )) == 1)
    {
        SET_WEAPON_VISIBLE( uVar21, uParam18 );
    }
    return;
}

void sub_60029(unknown uParam0)
{
    SET_OBJECT_VISIBLE( g_U3112, uParam0 );
    SET_OBJECT_VISIBLE( g_U3113, uParam0 );
    SET_OBJECT_VISIBLE( g_U3114, uParam0 );
    SET_OBJECT_VISIBLE( g_U3115, uParam0 );
    SET_OBJECT_VISIBLE( g_U3116, uParam0 );
    SET_OBJECT_VISIBLE( g_U3117, uParam0 );
    SET_OBJECT_VISIBLE( g_U3118, uParam0 );
    return;
}

void sub_60346()
{
    sub_18886( l_U2634 );
    sub_18886( l_U2648 );
    sub_18886( l_U2662 );
    sub_18886( l_U2676 );
    sub_18886( l_U2690 );
    return;
}

void sub_60414()
{
    sub_29643( 233534649 );
    return;
}

void sub_60648()
{
    int Result;
    unknown uVar3;
    unknown uVar4;
    int iVar5;

    Result = 0;
    switch (l_U2854)
    {
        case 1:
        sub_793( "BSW", "HANDLE_ROOFTOP_MPM - rooftopMPMState start", 0 );
        sub_9687( 2, 0 );
        if (g_U780 != 3)
        {
            sub_793( "BSW", "updating current checkpoint to MCE_ROOFTOPS_MPM", 0 );
            g_U780 = 3;
            sub_14499( ref l_U385, 3, sub_10194(), g_U3141[3]._fU0, g_U3141[3]._fU12, g_U3141[3]._fU16, g_U3141[3]._fU20, 0 );
        }
        sub_1966( 0 );
        END_CONTEXT( "NYBAR_APARTMENT_TO_MPM" );
        START_CONTEXT( "NYBAR_MPM" );
        sub_37028( 1, 0, 0, 1 );
        sub_61004();
        sub_61551();
        sub_61894( ref uVar3, ref uVar4 );
        sub_1202( 1681130475, 0 );
        sub_1202( -283082350, 0 );
        sub_1202( -1236175571, 0 );
        l_U2595 = 12;
        l_U2596 = 12;
        if (GET_ADRENALINE_AMT() < 0.10000000)
        {
            SET_ADRENALINE_AMT( 0.10000000 );
        }
        ACTIVATE_BULLET_TIME( 0, 1.00000000, 1 );
        if ((ISEQ_QUERY_STATE( 1419096468, 3 )) == 0)
        {
            sub_26009( sub_10194(), g_U3141[3]._fU0, g_U3141[3]._fU12 );
            CAMERA_PLAY_ANIMATED( "LEVEL_S_NYBAR_CP_04", "VIG_15B_NYBAR_MPM_FWD_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
            sub_793( "bsw", "registering the menagerie of watertower iseqs", 0 );
            if (sub_30541())
            {
                sub_793( "bsw", "...registering Max", 0 );
                ISEQ_REGISTER_ENTITY( 1419096468, "ny_mpm_max", sub_10194(), 0 );
            }
            if (DOES_OBJECT_EXIST( g_U3116 ))
            {
                sub_793( "bsw", "...registering TOWER_AA", 0 );
                ISEQ_REGISTER_ENTITY( 123489604, "TOWER_AA", g_U3116, 1 );
            }
            if (DOES_OBJECT_EXIST( g_U3112 ))
            {
                sub_793( "bsw", "...registering TOWER_ANM01", 0 );
                ISEQ_REGISTER_ENTITY( -900483547, "TOWER_ANM01", g_U3112, 1 );
            }
            if (DOES_OBJECT_EXIST( g_U3113 ))
            {
                sub_793( "bsw", "...registering TOWER_ANM02", 0 );
                ISEQ_REGISTER_ENTITY( -652127296, "TOWER_ANM02", g_U3113, 1 );
            }
            if (DOES_OBJECT_EXIST( g_U3115 ))
            {
                sub_793( "bsw", "...registering TOWER_ANM03", 0 );
                ISEQ_REGISTER_ENTITY( 8102532, "TOWER_ANM03", g_U3115, 1 );
            }
            if (DOES_OBJECT_EXIST( g_U3114 ))
            {
                sub_793( "bsw", "...registering TOWER_BASE", 0 );
                ISEQ_REGISTER_ENTITY( -1131749617, "TOWER_BASE", g_U3114, 1 );
            }
            if (DOES_OBJECT_EXIST( g_U3117 ))
            {
                ISEQ_REGISTER_ENTITY( 2119011196, "RF_WT_lid_01", g_U3117, 1 );
            }
            if (DOES_OBJECT_EXIST( g_U3118 ))
            {
                ISEQ_REGISTER_ENTITY( -1930417983, "RF_WT_lid_02", g_U3118, 1 );
            }
            ISEQ_START( 1419096468 );
            ISEQ_START( 123489604 );
            ISEQ_START( -900483547 );
            ISEQ_START( -652127296 );
            ISEQ_START( 8102532 );
            ISEQ_START( -1131749617 );
            ISEQ_START( 2119011196 );
            ISEQ_START( -1930417983 );
            FREEZE_PED_POSITION( sub_10194(), 0 );
        }
        PLAY_SCRIPT_STREAM_FROM_OBJECT( g_U3117, 0 );
        if (NOT sub_44625())
        {
            DO_SCREEN_FADE_IN( 100 );
        }
        sub_25299( ref l_U2704, 0 );
        sub_9324( ref l_U2080, 10, 1, 0 );
        sub_29962( ref l_U2080 );
        l_U2854 = 2;
        break;
        case 2:
        if (sub_38813( ref l_U2080 ))
        {
            sub_63842();
        }
        if ((CAMERA_ANIMATED_CURRENT_TIME() + 1) >= (CAMERA_ANIMATED_LENGTH( "LEVEL_S_NYBAR_CP_04", "VIG_15B_NYBAR_MPM_FWD_CAM" )))
        {
            ACTIVATE_BULLET_TIME( 0, 0.70000000, 1 );
            SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U3141[3]._fU16, 1065353216, 0 );
            SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U3141[3]._fU20, 1065353216, 0 );
            CAMERA_FREEZE_FRAME( 1, 400, 0, 0 );
            l_U2854 = 3;
        }
        break;
        case 3:
        sub_793( "bsw", "HANDLE_ROOFTOP_MPM - activating bullet time...", 0 );
        sub_64258( 1, 1 );
        sub_64523( 1 );
        sub_64746();
        sub_21044( ref l_U2206, 0 );
        sub_9324( ref l_U2089, 2100, 1, 0 );
        sub_29962( ref l_U2089 );
        l_U2854 = 4;
        break;
        case 4:
        iVar5 = sub_51572( ref l_U2206 );
        if ((iVar5 < 4) AND (l_U2595 == 15))
        {
            l_U2596 = 15;
        }
        if (sub_30541())
        {
            if (sub_38813( ref l_U2089 ))
            {
                CLEAR_PED_DEFAULT_AIM( sub_10194() );
                SET_PLAYER_FORCED_AIM( sub_10216(), 0, 0 );
                if ((PED_GET_ACTION_INTENTION_STATUS( sub_10194(), 47 )) == 3)
                {
                    sub_793( "BSW", "ACT_INT_SEQ_ACTION01 is started", 0 );
                }
                sub_65105( sub_10194() );
                sub_793( "bsw", "HANDLE_ROOFTOP_MPM - times up, how did you do?", 0 );
                END_CONTEXT( "NYBAR_MPM" );
                sub_64523( 0 );
                SET_CAMERA_OVERRIDE( "", "", 0, 1, 1 );
                l_U2854 = 7;
            }
        }
        break;
        case 7: if (sub_65392())
        {
            sub_793( "bsw", "MPM ready for reckoning", 0 );
            if ((sub_51572( ref l_U2206 )) == 0)
            {
                sub_793( "bsw", "HANDLE_ROOFTOP_MPM - 0 guys remaining, you WIN", 0 );
                sub_26339();
                sub_67651();
                l_U2596 = 16;
                sub_24751();
                sub_29643( -1522991054 );
                sub_29643( -1193498759 );
                sub_29643( 588151771 );
                sub_29643( 216303562 );
                sub_29643( -946946919 );
                sub_29643( -1915312722 );
                sub_29643( -1549971141 );
                sub_1966( 1 );
                sub_26805();
                sub_67769( 1, 0 );
                sub_69420();
                l_U2854 = 5;
            }
            else
            {
                sub_793( "bsw", "HANDLE_ROOFTOP_MPM - didnt kill everyone, you LOSE", 0 );
                sub_69734();
                l_U2854 = 6;
            }
        }
        case 6:
        if (l_U2854 == 6)
        {
            if (sub_69871())
            {
                l_U2854 = 0;
            }
        }
        break;
        case 5:
        if (sub_67769( 1, 0 ))
        {
            CAMERA_ENABLE_SHOULDER_MODE( 1 );
            sub_70417( 0, 0, 0, -859915232, -859915232, 0 );
            Result = 1;
        }
        break;
        case 0: break;
    }
    return Result;
}

void sub_61004()
{
    sub_18578( ref l_U2127, ref l_U2206, ref l_U2213, 1478009203, 1.00000000, "AIT_EXPERT", 0, 0, 25000, 2, 0, 25000, 0 );
    sub_20682( ref l_U2206, "MPM_GUYS_" );
    sub_21044( ref l_U2206, 1 );
    sub_61101( ref l_U2206, 3 );
    REMOVE_ALL_PED_WEAPONS( l_U2206[1] );
    sub_12445( l_U2206[1], 434544317, 25000, 0, 0 );
    REMOVE_ALL_PED_WEAPONS( l_U2206[2] );
    sub_12445( l_U2206[2], 1478009203, 25000, 0, 0 );
    REMOVE_ALL_PED_WEAPONS( l_U2206[3] );
    sub_12445( l_U2206[3], 1478009203, 25000, 0, 0 );
    SET_PED_DEFAULT_AIM_AT_COORD( l_U2206[0], -284.67000000, -7.81000000, 1.85000000 );
    SET_PED_DEFAULT_AIM_AT_COORD( l_U2206[4], -284.67000000, -7.81000000, 1.85000000 );
    sub_61383( ref l_U2206, 1 );
    sub_61466( ref l_U2206, 0 );
    sub_20866( ref l_U2206, l_U1558, 1 );
    return;
}

void sub_61101(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_61135( ref (uParam0^)[I], uParam1 );
    }
    return;
}

void sub_61135(unknown uParam0, unknown uParam1)
{
    if (sub_19634( (uParam0^) ))
    {
        SET_PED_ALERTNESS( (uParam0^), uParam1 );
    }
    return;
}

void sub_61383(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (sub_19634( (uParam0^)[I] ))
        {
            SET_PED_AS_ONE_SHOT_KILL( (uParam0^)[I], uParam1 );
        }
    }
    return;
}

void sub_61466(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^)[I], 1, uParam1 );
    }
    return;
}

void sub_61551()
{
    int I;

    for ( I = 0; I <= (l_U2206 - 1); I++ )
    {
        if (sub_19634( l_U2206[I] ))
        {
            SET_PED_FLAG_BLOCK_GORE_REACTION( l_U2206[I], 1 );
        }
    }
    sub_48498( l_U2206[0], 1 );
    sub_61648( ref l_U2206[0], 0 );
    sub_48498( l_U2206[1], 1 );
    sub_61648( ref l_U2206[1], 0 );
    sub_48498( l_U2206[2], 1 );
    sub_61648( ref l_U2206[2], 0 );
    sub_48498( l_U2206[3], 1 );
    sub_61648( ref l_U2206[3], 0 );
    sub_48498( l_U2206[4], 1 );
    sub_61648( ref l_U2206[4], 0 );
    if (sub_19634( l_U2206[5] ))
    {
        RESET_PED_TETHERING( l_U2206[5] );
        sub_49056( l_U2206[5], -286.39000000, 2.19000000, 1.50000000, 0.50000000, 20, -1, 4 );
        sub_61648( ref l_U2206[5], 2 );
    }
    return;
}

void sub_61648(unknown uParam0, unknown uParam1)
{
    if (sub_19634( (uParam0^) ))
    {
        SET_PED_COMBAT_MOVEMENT( (uParam0^), uParam1 );
    }
    return;
}

void sub_61894(unknown uParam0, unknown uParam1)
{
    unknown uVar4;

    sub_793( "TEH", "MAR_NY_HolsterRifleOrDualAndDrawPistol begun", 0 );
    uVar4 = GET_WEAPON_FROM_HAND( sub_10194(), 0, 0 );
    if (GET_DOES_WEAPON_EXIST( uVar4 ))
    {
        if (((uParam0^) == 1) || (((GET_WEAPON_TYPE( uVar4 )) == 1992962408) || (((GET_WEAPON_TYPE( uVar4 )) == 724901397) || (((GET_WEAPON_TYPE( uVar4 )) == 57534114) || (((GET_WEAPON_TYPE( uVar4 )) == 1308526797) || (((GET_WEAPON_TYPE( uVar4 )) == -1074756423) || (((GET_WEAPON_TYPE( uVar4 )) == -1013714740) || (((GET_WEAPON_TYPE( uVar4 )) == -184942895) || (((GET_WEAPON_TYPE( uVar4 )) == -168327769) || (((GET_WEAPON_TYPE( uVar4 )) == 1845102363) || ((GET_WEAPON_TYPE( uVar4 )) == 434544317)))))))))))
        {
            sub_793( "TEH", "Holster weapon and draw gun", 0 );
            SELECT_WEAPON_TO_HAND( sub_10194(), 0, 0, 1 );
            uVar4 = GET_WEAPON_FROM_HAND( sub_10194(), 0, 0 );
            while (GET_DOES_WEAPON_EXIST( uVar4 ))
            {
                WAIT( 0 );
                uVar4 = GET_WEAPON_FROM_HAND( sub_10194(), 0, 0 );
                sub_793( "TEH", "Waiting for right hand to be empty", 0 );
            }
        }
    }
    uVar4 = GET_WEAPON_FROM_HAND( sub_10194(), 1, 0 );
    if (GET_DOES_WEAPON_EXIST( uVar4 ))
    {
        (uParam1^) = 1;
        sub_793( "TEH", "Dual wielding is true", 0 );
        SELECT_WEAPON_TO_HAND( sub_10194(), 0, 1, 1 );
        uVar4 = GET_WEAPON_FROM_HAND( sub_10194(), 1, 0 );
        while (GET_DOES_WEAPON_EXIST( uVar4 ))
        {
            WAIT( 0 );
            uVar4 = GET_WEAPON_FROM_HAND( sub_10194(), 1, 0 );
        }
    }
    uVar4 = GET_WEAPON_FROM_HAND( sub_10194(), 0, 0 );
    if (NOT (GET_DOES_WEAPON_EXIST( uVar4 )))
    {
        uVar4 = GET_WEAPON_FROM_HOLSTER( sub_10194(), 0 );
        if (NOT (GET_DOES_WEAPON_EXIST( uVar4 )))
        {
            uVar4 = GET_WEAPON_FROM_HOLSTER( sub_10194(), 1 );
        }
        SELECT_WEAPON_TO_HAND( sub_10194(), uVar4, 0, 1 );
        uVar4 = GET_WEAPON_FROM_HAND( sub_10194(), 0, 0 );
        while (NOT (GET_DOES_WEAPON_EXIST( uVar4 )))
        {
            WAIT( 0 );
            uVar4 = GET_WEAPON_FROM_HAND( sub_10194(), 0, 0 );
            sub_793( "TEH", "Waiting for right hand to be full", 0 );
        }
    }
    sub_793( "TEH", "MAR_NY_HolsterRifleOrDualAndDrawPistol ended", 0 );
    return;
}

void sub_63842()
{
    sub_793( "BSW", "SETUP_MPM_CAM_SETTINGS() - start", 0 );
    SET_CAMERA_OVERRIDE( "NYBAR_MPM_AIM_CAMERA", "NYBAR_MPM_AIM_CAMERA", 0, 1, 1 );
    CAMERA_ENABLE_SHOULDER_MODE( 0 );
    SET_CAM_SIDE_LEFT( 0 );
    SET_PLAYER_FORCED_AIM( sub_10216(), 1, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U3141[3]._fU16, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U3141[3]._fU20, 1065353216, 0 );
    return;
}

void sub_64258(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD( sub_10194() )))
    {
        SET_PLAYER_CONTROL( sub_10216(), 1, 0 );
        SET_PED_INVINCIBLE( sub_10194(), 0 );
        if (bParam0)
        {
            sub_64339();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

void sub_64339()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_10194() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND( sub_10194(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND( sub_10194(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_10194(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_10194(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

void sub_64523(boolean bParam0)
{
    sub_793( "bsw", "toggling MPM settings", 0 );
    if (sub_30541())
    {
        SET_PED_INVINCIBLE( sub_10194(), bParam0 );
        SET_PED_PROOFS( sub_10194(), bParam0, bParam0, bParam0, bParam0, bParam0 );
        SET_PED_CONSUMING_AMMO( sub_10194(), NOT bParam0 );
        SET_PED_CAN_SWITCH_WEAPON( sub_10194(), NOT bParam0 );
    }
    if (bParam0)
    {
        DISPLAY_HUD( 0 );
        ENABLE_CROSSHAIR( 1 );
        ENABLE_MPM( 1 );
        ENABLE_ALL_ADRENALINE( 0 );
        SET_CROSSHAIR_PULSE();
    }
    else
    {
        ENABLE_MPM( 0 );
        ENABLE_ALL_ADRENALINE( 1 );
        ENABLE_CROSSHAIR( 0 );
        DISPLAY_HUD( 0 );
    }
    SET_SILHOUETTE_ACTIVE( NOT bParam0 );
    return;
}

void sub_64746()
{
    sub_793( "SP", "P_LIMIT_PLAYER_ACTIONS_FOR_MPM", 0 );
    if (((IS_PED_DEAD( sub_10194() )) == 0) AND ((IS_PLAYER_DEAD( sub_10216() )) == 0))
    {
        SET_PLAYER_CONTROL( sub_10216(), 0, 0 );
        REENABLE_PLAYER_INPUT( 14 );
        REENABLE_PLAYER_INPUT( 15 );
        REENABLE_PLAYER_INPUT( 16 );
        REENABLE_PLAYER_INPUT( 17 );
        REENABLE_PLAYER_INPUT( 6 );
        REENABLE_PLAYER_INPUT( 4 );
    }
    return;
}

void sub_65105(unknown uParam0)
{
    if (sub_19634( uParam0 ))
    {
        PED_FINISH_ACTION_INTENTION( uParam0, 47 );
        PED_FINISH_ACTION_INTENTION( uParam0, 48 );
        PED_FINISH_ACTION_INTENTION( uParam0, 49 );
        PED_FINISH_ACTION_INTENTION( uParam0, 50 );
        PED_FINISH_ACTION_INTENTION( uParam0, 51 );
        PED_FINISH_ACTION_INTENTION( uParam0, 52 );
        PED_FINISH_ACTION_INTENTION( uParam0, 53 );
        PED_FINISH_ACTION_INTENTION( uParam0, 54 );
        PED_FINISH_ACTION_INTENTION( uParam0, 55 );
        PED_FINISH_ACTION_INTENTION( uParam0, 56 );
        PED_FINISH_ACTION_INTENTION( uParam0, 57 );
        PED_FINISH_ACTION_INTENTION( uParam0, 58 );
    }
    return;
}

void sub_65392()
{
    int Result;

    Result = 0;
    switch (l_U2856)
    {
        case 0:
        sub_37028( 1, 0, 0, 1 );
        sub_38005( ref l_U2886, -287.49000000, -12.91000000, -9.84000000, 70.00000000, 0.00000000, 58.33000000, 45.00000000, 400 );
        sub_38579( ref l_U2886 );
        ACTIVATE_BULLET_TIME( 0, 0.30000000, 1 );
        sub_21424( ref l_U2206 );
        l_U1608 = sub_65544( ref l_U2206 );
        if (sub_19634( l_U1608 ))
        {
            sub_29041( l_U1608 );
            CLEAR_PED_TASKS_IMMEDIATELY( l_U1608 );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1608, 1 );
            sub_26009( l_U1608, -287.72900000, -5.97800000, 1.49545100, 180.00000000 );
        }
        sub_24711( 0 );
        if (DOES_OBJECT_EXIST( g_U3116 ))
        {
            sub_793( "bsw", "...registering TOWER_AA", 0 );
            ISEQ_REGISTER_ENTITY( 361106065, "TOWER_AA", g_U3116, 1 );
        }
        if (DOES_OBJECT_EXIST( g_U3112 ))
        {
            sub_793( "bsw", "...registering TOWER_ANM01", 0 );
            ISEQ_REGISTER_ENTITY( 1876730400, "TOWER_ANM01", g_U3112, 1 );
        }
        if (DOES_OBJECT_EXIST( g_U3113 ))
        {
            sub_793( "bsw", "...registering TOWER_ANM02", 0 );
            ISEQ_REGISTER_ENTITY( 1423764005, "TOWER_ANM02", g_U3113, 1 );
        }
        if (DOES_OBJECT_EXIST( g_U3115 ))
        {
            sub_793( "bsw", "...registering TOWER_ANM03", 0 );
            ISEQ_REGISTER_ENTITY( -361846818, "TOWER_ANM03", g_U3115, 1 );
        }
        if (DOES_OBJECT_EXIST( g_U3114 ))
        {
            sub_793( "bsw", "...registering TOWER_BASE", 0 );
            ISEQ_REGISTER_ENTITY( -787715329, "TOWER_BASE", g_U3114, 1 );
        }
        sub_1202( 1681130475, 1 );
        ISEQ_UNREGISTER_ENTITY( 1419096468, "ny_mpm_max" );
        sub_24016( 1419096468, 0 );
        ISEQ_REGISTER_ENTITY( 1681130475, "max", sub_10194(), 0 );
        ISEQ_START( 1681130475 );
        sub_26009( sub_10194(), -289.10710000, -12.40520000, 5.59287900, 0.00000000 );
        sub_22784( g_U3117 );
        sub_22784( g_U3118 );
        ISEQ_START( 361106065 );
        ISEQ_START( 1876730400 );
        ISEQ_START( 1423764005 );
        ISEQ_START( -361846818 );
        ISEQ_START( -787715329 );
        l_U2856 = 1;
        break;
        case 1:
        l_U2917++;
        if ((l_U2917 mod 2) == 0)
        {
            sub_66394();
        }
        if (sub_66508( ref l_U2886, 1 ))
        {
            if (sub_30541())
            {
                sub_793( "bsw", "...registering Max with S_NYBAR_MID_03B_HANG", 0 );
                PED_SET_ACTION_INTENTION( sub_10194(), 48, 1000, 0.00000000, 0.00000000, 0.00000000 );
                sub_57472( ref l_U2108, 1, 1 );
                sub_58659( l_U2108, 0 );
                sub_58554( l_U2108, 0 );
                sub_55559( 1 );
                sub_26009( sub_10194(), g_U3105, g_U3111 );
            }
            START_PARTICLE_FX_NON_LOOPED_AT_COORD( "NYC_WT_Blast_S", -288.48500000, -14.00000000, 1.50000000, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
            CAMERA_PLAY_ANIMATED( l_U2883, l_U2884, 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
            sub_38005( ref l_U2049, -287.40310000, -13.92598000, -4.90621000, 37.43932000, 0.03090900, 3.19475400, 23.47000000, 1000 );
            sub_38579( ref l_U2049 );
            ACTIVATE_BULLET_TIME( 0, 1065353216, 1 );
            l_U2856 = 2;
            sub_9324( ref l_U2098, 300, 1, 0 );
            sub_29962( ref l_U2098 );
        }
        break;
        case 2:
        if (sub_38813( ref l_U2098 ))
        {
            DEACTIVATE_BULLET_TIME( 0, 0 );
        }
        if ((NOT IS_ANIMATED_CAMERA_PLAYING()) || ((CAMERA_ANIMATED_CURRENT_TIME() + 1) >= (CAMERA_ANIMATED_LENGTH( l_U2883, l_U2884 ))))
        {
            sub_793( "bsw", "first cam done", 0 );
            if ((sub_51572( ref l_U2206 )) > 0)
            {
                if (sub_30541())
                {
                    sub_793( "bsw", "...registering Max with S_NYBAR_MID_03B_FAIL", 0 );
                    ISEQ_UNREGISTER_ENTITY( 1681130475, "max" );
                    sub_24016( 1681130475, 0 );
                    sub_26009( sub_10194(), g_U3108, g_U3111 );
                    ISEQ_REGISTER_ENTITY( -283082350, "max", sub_10194(), 0 );
                }
                if (sub_19634( l_U1608 ))
                {
                    ISEQ_REGISTER_ENTITY( -283082350, "thug", l_U1608, 0 );
                    REMOVE_ALL_PED_WEAPONS( l_U1608 );
                    sub_12445( l_U1608, -862236369, 25000, 0, 0 );
                    sub_26009( l_U1608, -287.72900000, -5.97800000, 1.49545100, 180.00000000 );
                }
                ISEQ_START( -283082350 );
                CAMERA_PLAY_ANIMATED( l_U2883, l_U2885, 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
            }
            l_U2856 = 3;
        }
        break;
        case 3:
        sub_793( "bsw", "HANDLE_ROOFTOP_MPM_DIVE_NIS finished, returning TRUE", 0 );
        Result = 1;
        break;
    }
    return Result;
}

void sub_65544(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            return (uParam0^)[I];
        }
    }
    return nil;
}

void sub_66394()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;

    if (sub_30541())
    {
        uVar2 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( sub_10194() )};
        uVar2._fU0 = -289.10710000;
        uVar2._fU4 += 0.03500000;
        uVar2._fU8 = 5.59287900;
        SET_PED_COORDS( sub_10194(), uVar2, 1 );
        SET_PED_HEADING( sub_10194(), 0.00000000 );
    }
    return;
}

int sub_66508(int iParam0, boolean bParam1)
{
    if (bParam1 == 1)
    {
        if (NOT iParam0->_fU44)
        {
            if ((ref iParam0->_fU48->_fU16) || (sub_38813( iParam0 + 48 )))
            {
                iParam0->_fU44 = 1;
                iParam0->_fU36 = 1;
                return 1;
            }
        }
    }
    if (NOT bParam1)
    {
        if ((ref iParam0->_fU48->_fU16) || (sub_38813( iParam0 + 48 )))
        {
            iParam0->_fU36 = 1;
            return 1;
        }
    }
    return 0;
}

void sub_67651()
{
    l_U2744 = 0;
    return;
}

void sub_67769(boolean bParam0, boolean bParam1)
{
    int Result;

    Result = 0;
    switch (l_U2744)
    {
        case 0:
        sub_793( "RJM", "PLAY_MIDSCENE_03c start", 0 );
        sub_37028( 1, 0, 0, 1 );
        if (NOT bParam0)
        {
            sub_67881();
            sub_25299( ref l_U2704, 1 );
        }
        else
        {
            sub_793( "bsw", "PLAY_MIDSCENE_03c forcing fade in", 0 );
            DO_SCREEN_FADE_IN( 500 );
        }
        if (NOT bParam0)
        {
            sub_68168();
        }
        sub_68387( bParam0 );
        if (bParam0)
        {
            CUTSCENE_REGISTER_ISEQ( -1236175571 );
        }
        if (bParam1)
        {
            START_CUTSCENE_CAPTURE( ref l_U2704 );
        }
        START_SEAMLESS_CUTSCENE();
        l_U2744 = 1;
        break;
        case 1:
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U3141[4]._fU16, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U3141[4]._fU20, 1065353216, 0 );
        l_U2744 = 2;
        break;
        case 2:
        if (HAS_CUTSCENE_FINISHED())
        {
            CAMERA_PLAY_ANIMATED( "LEVEL_S_NYBAR_CP_05", "BLEND_OUT_MID_03C_NYBAR_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
            if (bParam1)
            {
                STOP_CUTSCENE_CAPTURE();
            }
            sub_69259();
            if (NOT bParam0)
            {
                sub_69295();
            }
            sub_58554( l_U2712, 1 );
            sub_58554( l_U2712, 1 );
            sub_793( "RJM", "PLAY_MIDSCENE_03c end", 0 );
            sub_64258( 1, 1 );
            Result = 1;
            l_U2744 = 3;
        }
        break;
        case 3: break;
    }
    return Result;
}

void sub_67881()
{
    sub_67896( 2024698471 );
    return;
}

void sub_67896(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
        sub_983( "[SP]### ERROR! (BlockLoadModel) Trying to block load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    LOAD_ALL_OBJECTS_NOW();
    while ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        LOAD_ALL_OBJECTS_NOW();
        WAIT( 0 );
    }
    return;
}

void sub_68168()
{
    sub_793( "RJM", "CREATE_mid_03c_PEDS_AND_OBJECTS - start", 0 );
    sub_793( "SBA", "P_SETUP_NYC_mid_03c", "***" );
    sub_7548( ref l_U2731, 0, 0, 0, 0.00000000, -1756913695, 26, 6, 0, 0, 0 );
    sub_18886( l_U2730 );
    l_U2730 = sub_18967( ref l_U2731 );
    sub_793( "RJM", "CREATE_mid_03c_PEDS_AND_OBJECTS - end", 0 );
    return;
}

void sub_68387(boolean bParam0)
{
    unknown uVar3;

    sub_793( "SBA", "REGISTER_PEDs_nyc2_mid_03c", "***" );
    if (bParam0)
    {
        sub_1202( -1236175571, 1 );
        sub_793( "SBA", "FROM FLOW: Registering passos with NYC_mid_03c", "***" );
        uVar3 = g_U818;
    }
    else
    {
        sub_793( "SBA", "FROM CUTSCENE SCRIPT: Registering passos with NYC_mid_03c", "***" );
        uVar3 = l_U2730;
    }
    if (sub_19634( uVar3 ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( uVar3, "FB_Pass_NY", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( uVar3, 0, 0 ), "W_PI_Clt1911_Aa_H^1", 0 );
        ISEQ_REGISTER_ENTITY( -1236175571, "passos", uVar3, 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( uVar3, g_U781[3]._fU0, g_U781[3]._fU12 );
    }
    if (sub_30541())
    {
        sub_793( "bsw", "registering Max for mid03c", 0 );
        sub_57472( ref l_U2712, 1, 1 );
        sub_58659( l_U2712, 0 );
        sub_58554( l_U2712, 0 );
        sub_55559( 1 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( sub_10194(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( sub_10194(), 0, 0 ), "W_PI_Clt1911_Aa_H", 0 );
        ISEQ_REGISTER_ENTITY( -1236175571, "max", sub_10194(), 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( sub_10194(), g_U3141[4]._fU0, g_U3141[4]._fU12 );
    }
    REGISTER_HIDE_ENTITY_AT_POSITION( g_U2895._fU0, g_U2895._fU4 );
    return;
}

void sub_69259()
{
    sub_18886( l_U2730 );
    return;
}

void sub_69295()
{
    sub_29643( 2024698471 );
    return;
}

void sub_69420()
{
    int I;

    for ( I = 0; I <= (l_U2206 - 1); I++ )
    {
        if (DOES_PED_EXIST( l_U2206[I] ))
        {
            if (IS_PED_DEAD( l_U2206[I] ))
            {
                if (IS_PED_IN_GAMEPLAY_HELPER_BOX( l_U2206[I], "TRIG_CLEANUP_BY_ROOF_DOOR" ))
                {
                    sub_793( "SBA", "P_CLEANUP_DEAD_MPM_ENEMIES_NEAR_ROOF_DOOR: cleaning up dead guy by door", 0 );
                    sub_18886( l_U2206[I] );
                }
            }
        }
    }
    return;
}

void sub_69734()
{
    sub_29643( g_U3091 );
    sub_29643( -1809963165 );
    sub_29881( "PAS_INT" );
    sub_29881( "FACE_PASNYB" );
    sub_42701( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act" );
    return;
}

void sub_69871()
{
    int Result;

    Result = 0;
    switch (l_U2855)
    {
        case 0:
        sub_793( "bsw", "HANDLE_ROOFTOP_MPM_FAIL_NIS start", 0 );
        sub_38243( "NY_MPM_SCRIPTED_FAIL_FX", 0 );
        l_U2855 = 1;
        break;
        case 1:
        if ((CAMERA_ANIMATED_CURRENT_TIME() + 500) >= (CAMERA_ANIMATED_LENGTH( l_U2883, l_U2885 )))
        {
            sub_793( "bsw", "HANDLE_ROOFTOP_MPM_FAIL_NIS fading out", 0 );
            l_U2126 = 1;
            l_U2855 = 3;
            DO_SCREEN_FADE_OUT( 500 );
        }
        if ((sub_19634( l_U1608 )) AND (sub_30541()))
        {
            if (PED_ANIM_EVENT( l_U1608, -1531652494 ))
            {
                sub_793( "BSW", "executor ped has shot, cause blood from Max head", 0 );
                START_PARTICLE_FX_NON_LOOPED_ON_PED_BONE( "CS_Blood_ImpactSplash_S", sub_10194(), 0.25000000, 0, 0, 0, 180, 0, 65488, 1 );
                START_PARTICLE_FX_NON_LOOPED_ON_PED_BONE( "CS_Blood_Exit_S", sub_10194(), 0.25000000, 0, 0, 0, 180, 0, 65488, 1 );
            }
        }
        break;
        case 3:
        Result = 1;
        break;
    }
    return Result;
}

void sub_70417(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, float fParam4, unknown uParam5)
{
    SET_CAM_SIDE_LEFT( uParam2 );
    if (fParam4 != -1E8)
    {
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( uParam3, 1065353216, 0 );
    }
    if (fParam4 != -1E8)
    {
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( fParam4, 1065353216, 0 );
    }
    RENDER_SCRIPT_CAMS( 0, uParam1, uParam0, uParam5 );
    return;
}

void sub_70796()
{
    int Result;

    Result = 0;
    switch (l_U2857)
    {
        case 0:
        sub_793( "SP", "eMID03cBlendoutState = MPM_NIS_START", 0 );
        sub_1202( 1103749565, 0 );
        sub_1202( -1202559929, 0 );
        sub_37028( 1, 0, 0, 1 );
        sub_1202( -1236175571, 1 );
        if (NOT (ISEQ_QUERY_STATE( -1236175571, 3 )))
        {
            CAMERA_PLAY_ANIMATED( "LEVEL_S_NYBAR_CP_05", "BLEND_OUT_MID_03C_NYBAR_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
            sub_71079( g_U3141[4]._fU0, g_U3141[4]._fU12, g_U3141[4]._fU16, g_U3141[4]._fU20 );
            sub_793( "bsw", "starting S_NYBAR_MID03C_BLENDOUT", 0 );
            if (sub_30541())
            {
                ISEQ_REGISTER_ENTITY( -1236175571, "max", sub_10194(), 0 );
                sub_793( "bsw", "S_NYBAR_MID03C_BLENDOUT registering Max", 0 );
            }
            if (sub_19634( g_U818 ))
            {
                ISEQ_REGISTER_ENTITY( -1236175571, "passos", g_U818, 0 );
                sub_793( "bsw", "S_NYBAR_MID03C_BLENDOUT registering piPassos", 0 );
            }
            ISEQ_START( -1236175571 );
        }
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U3141[4]._fU16, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U3141[4]._fU20, 1065353216, 0 );
        if ((IS_DEATH_PANEL_WIPE_ALLOWED()) || ((IS_SCREEN_FADING_OUT()) || (IS_SCREEN_FADED_OUT())))
        {
            DO_SCREEN_FADE_IN( 500 );
        }
        l_U2857 = 1;
        break;
        case 1:
        if ((CAMERA_ANIMATED_CURRENT_TIME() + 1000) >= (CAMERA_ANIMATED_LENGTH( "LEVEL_S_NYBAR_CP_05", "BLEND_OUT_MID_03C_NYBAR_CAM" )))
        {
            sub_793( "SP", "eMID03cBlendoutState = MPM_NIS_PLAYING", 0 );
            CAMERA_FREEZE_FRAME( 1, 1500, 0, 0 );
            CAMERA_ANIMATED_STOP( 0, 0 );
            l_U2857 = 3;
        }
        break;
        case 3:
        sub_64258( 1, 1 );
        sub_793( "SP", "eMID03cBlendoutState = MPM_NIS_FINISHED", 0 );
        Result = 1;
        break;
    }
    return Result;
}

void sub_71079(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    unknown uVar8;

    uVar8 = sub_10194();
    sub_26009( uVar8, uParam0, uParam3 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( uParam4, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( uParam5, 1065353216, 0 );
    return;
}

void sub_71796()
{
    sub_793( "CO", "P_CREATE_S_NY2_GG_LM_02", 0 );
    sub_23243( ref g_U737, g_U777, -1758307275, -451971732, -315.35000000, 0.26000000, 2.89000000, 0.00000000, 0.00000000, 1.00000000, "" );
    sub_23372( ref g_U737 );
    return;
}

void sub_72166()
{
    if (NOT l_U1054._fU64)
    {
        if (NOT sub_55307())
        {
            if (sub_38813( ref l_U2552 ))
            {
                sub_53506( "SNYC_ROTR", ref l_U2463 );
            }
        }
    }
    return;
}

void sub_72292(int iParam0, unknown uParam1)
{
    switch (l_U117)
    {
        case 0: break;
        case 1:
        sub_9324( ref l_U149, iParam0 + (GET_RANDOM_INT_IN_RANGE( -uParam1, uParam1 )), 1, 0 );
        sub_29962( ref l_U149 );
        l_U158 = 0;
        sub_793( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: Going to ePWS_ChooseSpeechState", 0 );
        l_U117 = 2;
        break;
        case 2:
        if (NOT sub_55307())
        {
            if (sub_38813( ref l_U149 ))
            {
                l_U118 = l_U158;
                sub_793( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: Going to ePWS_PlaySpeechState", 0 );
                sub_793( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: iPassosSpeechLevel = ", 0 );
                sub_17104( l_U158 );
                l_U117 = 3;
            }
        }
        break;
        case 3:
        switch (l_U118)
        {
            case 0:
            sub_72741( "SNYC_PSDS", ref l_U129 );
            break;
            case 1:
            sub_72741( "SNYC_CMMF", ref l_U119 );
            break;
            case 2:
            sub_72741( "SNYC_TMFL", ref l_U139 );
            break;
        }
        sub_793( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: Going to ePWS_ResetState", 0 );
        l_U117 = 4;
        break;
        case 4:
        sub_9324( ref l_U149, iParam0 + (GET_RANDOM_INT_IN_RANGE( -uParam1, uParam1 )), 1, 0 );
        sub_29962( ref l_U149 );
        l_U158++;
        if (l_U158 > 2)
        {
            l_U158 = 0;
        }
        sub_793( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: Returning to ePWS_ChooseSpeechState", 0 );
        l_U117 = 2;
        break;
    }
    return;
}

void sub_72741(unknown uParam0, unknown uParam1)
{
    sub_793( "SBA", "P_PLAY_DIAL_PASSOS", "***" );
    if (sub_19634( g_U818 ))
    {
        if (NOT (IS_PED_DEAD( sub_10194() )))
        {
            sub_53575( uParam1 );
            sub_53655( 1, g_U818, "PASSOS", uParam1, 2, 0 );
            sub_53655( 0, sub_10194(), "MAX", uParam1, 2, 0 );
            sub_53880( uParam0, uParam1, 8, 1 );
        }
    }
    return;
}

void sub_73216(unknown uParam0)
{
    sub_73232( ref l_U119, uParam0 );
    sub_73232( ref l_U129, uParam0 );
    sub_73232( ref l_U139, uParam0 );
    sub_793( "SBA", "INIT_HANDLE_PASSOS_WAITING_SPEECH: Setting ePWS_State = ePWS_IdleState", 0 );
    l_U117 = 0;
    return;
}

void sub_73232(int iParam0, unknown uParam1)
{
    if (NOT (sub_73246( (iParam0^) )))
    {
        ;
    }
    else if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (iParam0->_fU8 == g_U6[iParam0->_fU4])
        {
            STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, uParam1, 0 );
        }
    }
    return;
}

boolean sub_73246(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    int iVar12;

    if (uParam0._fU4 < 0)
    {
        return 0;
    }
    iVar12 = GET_CHECK_HASH_FROM_CONVERSATION_ID( uParam0._fU4 );
    return (uParam0._fU16 == iVar12) AND (iVar12 != 0);
}

void sub_73968()
{
    sub_793( "SBA", "P_PLAY_DIAL_PASSOS_MAX_ROOF2", "***" );
    if (sub_19634( g_U818 ))
    {
        if (NOT (IS_PED_DEAD( sub_10194() )))
        {
            sub_53575( ref l_U2473 );
            sub_53655( 2, g_U818, "PASSOS", ref l_U2473, 2, 0 );
            sub_53655( 1, sub_10194(), "MAX", ref l_U2473, 2, 0 );
            sub_53880( "SNYC_TGCC", ref l_U2473, 8, 1 );
        }
    }
    return;
}

void sub_74192()
{
    int I;
    unknown uVar3;

    sub_793( "RJM", "TASK_FRONT_GUYS_TO_FIRE_AT_PASSOS", 0 );
    for ( I = 0; I <= 1; I++ )
    {
        if ((sub_28531()) AND (sub_19634( l_U1858[I] )))
        {
            CLEAR_PED_TASKS_IMMEDIATELY( l_U1858[I] );
            OPEN_SEQUENCE_TASK( ref uVar3 );
            TASK_SHOOT_AT_COORD( 0, -242.84000000, 3.89000000, 3.61000000, 2000, 0, 0, 0 );
            TASK_SHOOT_AT_COORD( 0, -240.12000000, 3.87000000, 3.27000000, 2000, 0, 0, 0 );
            TASK_COMBAT_PED( 0, g_U818 );
            CLOSE_SEQUENCE_TASK( uVar3 );
            TASK_PERFORM_SEQUENCE( l_U1858[I], uVar3 );
            CLEAR_SEQUENCE_TASK( uVar3 );
        }
    }
    return;
}

void sub_74717()
{
    if (NOT sub_55307())
    {
        if (sub_38813( ref l_U2561 ))
        {
            sub_793( "SBA", "P_HANDLE_PASSOS_ABANDONED_BLDG_INCIDENTAL_SHOOT_VO", "***" );
            sub_72741( "SNYC_PCDS", ref l_U2483 );
            sub_9324( ref l_U2561, GET_RANDOM_INT_IN_RANGE( 15000, 18000 ), 1, 0 );
            sub_29962( ref l_U2561 );
        }
    }
    return;
}

int sub_75276()
{
    int iVar2;

    if (((IS_PED_DEAD( g_U818 )) == 0) AND ((DOES_PED_EXIST( g_U818 )) == 1))
    {
        if (HAS_BULLET_IMPACTED_IN_AREA( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( g_U818 ), 4.00000000, ref iVar2 ))
        {
            if (iVar2 == sub_10194())
            {
                return 1;
            }
        }
    }
    return 0;
}

void sub_76077()
{
    if (sub_47349( ref l_U1390, 0 ))
    {
        sub_793( "RJM", "Player has run out to the fire escape warning", 0 );
        sub_72741( "SNYC_WTFG", ref l_U2503 );
    }
    else if (sub_47349( ref l_U1411, 0 ))
    {
        sub_793( "RJM", "HANDLE_EVENTS - Moving to ROOFTOP_MID_05B_PASSOS_DEATH", 0 );
        l_U2853 = 5;
    }
    return;
}

void sub_76316(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    sub_76371( uParam0, uParam1, uParam2, uParam3, uParam4, uParam5, 76338, 1077936128, 1069547520, 1065353216 );
    return;
}

void sub_76338(unknown uParam0)
{
    return;
}

void sub_76371(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, int iParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    unknown uVar12;

    if ((sub_76384( uParam0, 29 )) == 3)
    {
        uVar12 = nil;
        if (((sub_76530( 1 )) AND (IS_PED_IN_CROSSHAIR_CYLINDER( uParam0, 2, 10000, 0, -1082130432 ))) || (HAS_BULLET_IMPACTED_IN_AREA( sub_76446( uParam0 ), 3, ref uVar12 )))
        {
            sub_76623( "PLAYER SHOT AT PASSOS" );
            sub_76716( ref uParam0, sub_76446( sub_10194() ), 34, 1000 );
            SET_PED_PRIMARY_LOOKAT( uParam0, sub_10194() );
            (uParam1^) = 1;
            break;
            uParam6;
            0;
            break;
        }
        if (NOT (uParam2^))
        {
            if (((sub_76384( uParam0, 32 )) != 3) AND (((sub_76384( uParam0, 33 )) != 3) AND (IS_PED_TOUCHING_PED( sub_10194(), uParam0 ))))
            {
                sub_76623( "BAD TOUCH!!" );
                (uParam2^) = 1;
                (uParam1^) = 1;
                sub_76716( ref uParam0, sub_76446( sub_10194() ), 35, 1000 );
                SET_PED_PRIMARY_LOOKAT( uParam0, sub_10194() );
                break;
                uParam6;
                1;
                break;
            }
        }
        else if (NOT (IS_PED_TOUCHING_PED( sub_10194(), uParam0 )))
        {
            (uParam2^) = 0;
        }
        if (NOT (uParam3^))
        {
            if (sub_76962( ref uParam0, 300, 100, -1, 0, 0 ))
            {
                if ((IS_CONTROL_PRESSED( 0, 6 )) AND (IS_PED_IN_CROSSHAIR_CYLINDER( uParam0, 1, 10000, 0, -1082130432 )))
                {
                    (uParam1^) = 1;
                    (uParam3^) = 1;
                    sub_76716( ref uParam0, sub_76446( sub_10194() ), 32, 1000 );
                    SET_PED_PRIMARY_LOOKAT( uParam0, sub_10194() );
                    sub_76623( "PLAYER AIMING AT PASSOS" );
                    break;
                    uParam6;
                    2;
                    break;
                }
            }
        }
        else if ((NOT (IS_CONTROL_PRESSED( 0, 6 ))) || (NOT (IS_PED_IN_CROSSHAIR_CYLINDER( uParam0, 1.50000000, 10000, 0, -1082130432 ))))
        {
            if ((sub_76384( uParam0, 32 )) != 3)
            {
                (uParam3^) = 0;
                sub_76623( "PLAYER NO LONGER AIMING AT PASSOS" );
            }
        }
        if (NOT (uParam1^))
        {
            if ((sub_76962( ref uParam0, uParam9, 180, -1, 46, 0 )) || ((sub_76962( ref uParam0, uParam8, 45, -1, 31, 0 )) || (sub_76962( ref uParam0, uParam7, 30, -1, 0, 0 ))))
            {
                sub_76623( "INTERRUPTING PASSOS" );
                sub_76716( ref uParam0, sub_76446( sub_10194() ), 33, 1000 );
                SET_PED_PRIMARY_LOOKAT( uParam0, sub_10194() );
                (uParam1^) = 1;
            }
        }
        else if ((sub_76962( ref uParam0, -1, 180, uParam8 + 1, 91, 0 )) || (sub_76962( ref uParam0, -1, 90, uParam7 + 1, 0, 0 )))
        {
            if ((NOT (uParam2^)) AND (NOT (uParam3^)))
            {
                if ((sub_77730( ref uParam0, 35, 1 )) || ((sub_77730( ref uParam0, 32, 1 )) || ((sub_77730( ref uParam0, 34, 1 )) || (sub_77730( ref uParam0, 33, 1 )))))
                {
                    sub_77768( ref uParam0, 33 );
                    sub_77768( ref uParam0, 34 );
                    sub_77768( ref uParam0, 32 );
                    sub_77768( ref uParam0, 35 );
                    sub_77768( ref uParam0, 31 );
                    sub_77916( uParam0, 36, 1000 );
                    CLEAR_PED_PRIMARY_LOOKAT( uParam0 );
                    (uParam1^) = 0;
                    (uParam3^) = 0;
                    (uParam2^) = 0;
                    (uParam4^) = 0;
                    sub_9324( iParam5, sub_78001( 10000, 15000 ), 1, 0 );
                    return;
                }
            }
        }
        if ((sub_76384( uParam0, 30 )) == 3)
        {
            if (sub_38813( iParam5 ))
            {
                sub_76716( ref uParam0, sub_76446( sub_10194() ), 31, 1000 );
                (uParam4^)++;
                break;
                uParam6;
                3;
                break;
            }
            else if ((uParam4^) < 3)
            {
                if ((iParam5->_fU16) || (NOT (sub_41038( iParam5 ))))
                {
                    sub_9324( iParam5, sub_78001( 10000, 15000 ), 1, 0 );
                    sub_29962( iParam5 );
                }
            }
        }
    }
    sub_77730( ref uParam0, 31, 1 );
    sub_77730( ref uParam0, 36, 1 );
    return;
}

int sub_76384(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        return PED_GET_ACTION_INTENTION_STATUS( uParam0, uParam1 );
    }
    return 0;
}

vector sub_76446(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        return "[dynamic result, ret vals = 3]";
        break;
        GET_PED_COORDS( uParam0 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        break;
    }
    return vector( 0, 0, 0);
}

int sub_76530(unknown uParam0)
{
    int iVar3;

    iVar3 = nil;
    if (HAS_SHOT_BEEN_FIRED_IN_AREA( sub_76446( sub_10194() ), 2.00000000, uParam0, ref iVar3 ))
    {
        if (iVar3 == sub_10194())
        {
            sub_76623( "MAL_HasPlayerFired RETURNING TRUE" );
            return 1;
        }
    }
    return 0;
}

void sub_76623(unknown uParam0)
{
    unknown uVar3;

    uVar3 = GET_REAL_GAME_TIMER();
    return;
}

void sub_76716(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        PED_SET_ACTION_INTENTION( (uParam0^), uParam4, uParam5, uParam1 );
    }
    return;
}

int sub_76962(unknown uParam0, float fParam1, unknown uParam2, float fParam3, float fParam4, boolean bParam5)
{
    float fVar8;

    if ((NOT (IS_PED_DEAD( sub_10194() ))) AND (NOT (IS_PED_DEAD( (uParam0^) ))))
    {
        fVar8 = sub_77011( (uParam0^), sub_10194(), 0 );
        if ((fVar8 > fParam1) AND (fParam1 > -1))
        {
            return 0;
        }
        else if ((fVar8 < fParam3) AND (fParam3 > -1))
        {
            return 0;
        }
        else if (NOT (IS_PED_FACING_PED( (uParam0^), sub_10194(), uParam2 )))
        {
            return 0;
        }
        else if ((IS_PED_FACING_PED( (uParam0^), sub_10194(), fParam4 )) AND (fParam4 > 0))
        {
            return 0;
        }
        else if (bParam5)
        {
            sub_17061( fParam4 );
        }
        return 1;;;;;
    }
    return 0;
}

void sub_77011(unknown uParam0, unknown uParam1, boolean bParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;

    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        uVar5 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
    }
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        uVar8 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    }
    if (bParam2)
    {
        return VDIST( uVar5, uVar8 );
        break;
    }
    return VDIST( uVar5._fU0, uVar5._fU4, 0, uVar8._fU0, uVar8._fU4, 0 );
}

int sub_77730(unknown uParam0, unknown uParam1, boolean bParam2)
{
    if ((sub_76384( (uParam0^), uParam1 )) == 1)
    {
        if (bParam2)
        {
            sub_77768( uParam0, uParam1 );
        }
        return 1;
    }
    return 0;
}

void sub_77768(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        PED_FINISH_ACTION_INTENTION( (uParam0^), uParam1 );
    }
    return;
}

void sub_77916(unknown uParam0, unknown uParam1, unknown uParam2)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        PED_SET_ACTION_INTENTION( uParam0, uParam1, uParam2, l_U283 );
    }
    return;
}

void sub_78001(unknown uParam0, int iParam1)
{
    int Result;

    Result = GET_RANDOM_INT_IN_RANGE( uParam0, iParam1 + 1 );
    if (Result > iParam1)
    {
        Result = iParam1;
    }
    return Result;
}

int sub_78982()
{
    switch (l_U2003)
    {
        case 1:
        l_U2004 = 0;
        sub_18667( ref l_U1997, 0.50000000, 0 );
        sub_79057();
        l_U2003 = 2;
        sub_793( "GA", "e_AbandonFloor2Spawn = ENTITY_STATE_CREATING", 0 );
        break;
        case 2:
        l_U1992[l_U2004] = sub_18967( ref l_U1939[l_U2004] );
        sub_19748( l_U1992[l_U2004], ref l_U1997 );
        if (NOT (IS_PED_DEAD( l_U1992[l_U2004] )))
        {
            sub_28200( ref l_U1992[l_U2004], g_U3561 );
            sub_20902( ref l_U1992[l_U2004], l_U1562, 1 );
            sub_61135( ref l_U1992[l_U2004], 3 );
            SET_PED_AI_TEMPLATE( l_U1992[l_U2004], "AIT_NORMAL" );
            if (l_U2004 == 0)
            {
                sub_12445( l_U1992[l_U2004], -862236369, 25000, 0, 0 );
            }
            else if (l_U2004 == 1)
            {
                sub_12445( l_U1992[l_U2004], -691403429, 25000, 0, 0 );
            }
            else if (l_U2004 == 2)
            {
                sub_12445( l_U1992[l_U2004], -1074756423, 25000, 0, 0 );
            }
            else if (l_U2004 == 3)
            {
                sub_12445( l_U1992[l_U2004], 434544317, 25000, 0, 0 );
            };;;;
        }
        l_U2004++;
        if (l_U2004 >= 4)
        {
            l_U2003 = 3;
            sub_793( "GA", "e_AbandonFloor2Spawn = ENTITY_STATE_POST_CREATE_SETUP", 0 );
        }
        break;
        case 3:
        sub_20682( ref l_U1992, "ABDN_FLOOR2" );
        sub_21424( ref l_U1992 );
        sub_793( "GA", "e_AbandonFloor2Spawn = ENTITY_STATE_COMPLETE", 0 );
        l_U2003 = 4;
        break;
        case 4:
        return 1;
        break;
    }
    return 0;
}

void sub_79057()
{
    sub_43083( ref l_U2588 );
    l_U2588[0] = sub_23706( -4072149, -241.21000000, -10.15000000, 5.83000000, 0, 0, 0.00000000, 0, 0, 0, 1119092736 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U2588[0], ref g_U3561 );
    l_U2588[1] = sub_23706( -4072149, -241.00000000, -10.05000000, 5.86400000, 1.57500000, 0, 0.00000000, 0, 0, 0, 1119092736 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U2588[1], ref g_U3561 );
    return;
}

void sub_79892()
{
    sub_29010( ref l_U1992 );
    sub_61101( ref l_U1992, 3 );
    sub_79925( ref l_U1992 );
    sub_49056( l_U1992[1], -239.10000000, -14.50000000, 5.14000000, 1092616192, 1101004800, -1082130432, 3 );
    return;
}

void sub_79925(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_48498( (uParam0^)[I], 1 );
    }
    return;
}

void sub_80037()
{
    sub_793( "CO", "P_CREATE_S_NY2_GG_M5_03", 0 );
    sub_23243( ref g_U701, g_U775, 1292101257, 67259641, -239.90000000, -28.51000000, 5.15000000, 1.50000000, 0.00000000, 2.00000000, "" );
    sub_23372( ref g_U701 );
    return;
}

void sub_80279()
{
    sub_793( "SBA", "P_INIT_PASSOS_WARNING_DEATH", "***" );
    l_U97 = 1;
    return;
}

void sub_80802()
{
    if (NOT sub_55307())
    {
        if (sub_38813( ref l_U2561 ))
        {
            sub_793( "SBA", "P_HANDLE_PASSOS_ABANDONED_BLDG2_INCIDENTAL_SHOOT_VO", "***" );
            sub_72741( "SNYC_PDB2", ref l_U2483 );
            sub_9324( ref l_U2561, GET_RANDOM_INT_IN_RANGE( 13000, 16000 ), 1, 0 );
            sub_29962( ref l_U2561 );
        }
    }
    return;
}

void sub_81596(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (DOES_PLACEMENT_EXIST( (uParam0^)[I] ))
        {
            sub_793( "RJM", "DO_ANY_PAINKILLERS_STILL_EXIST - Found a pill in there, we can still play some V.O.", 0 );
            (uParam1^)[I] = 1;
        }
        else
        {
            (uParam1^)[I] = 0;
        }
    }
    return;
}

void sub_82039()
{
    if (NOT l_U2594)
    {
        if (sub_82080( "SNYC_FSPL", ref l_U2588, ref l_U2591 ))
        {
            l_U2594 = 1;
        }
    }
    return;
}

int sub_82080(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    if ((IS_PLAYER_DEAD( sub_10216() )) == 0)
    {
        if (sub_55307() == 0)
        {
            for ( I = 0; I <= ((uParam1^) - 1); I++ )
            {
                if ((uParam2^)[I])
                {
                    if ((HAS_PLACEMENT_BEEN_COLLECTED( (uParam1^)[I] )) || (NOT (DOES_PLACEMENT_EXIST( (uParam1^)[I] ))))
                    {
                        (uParam2^)[I] = 0;
                        if (TIME_SINCE_LAST_MONOLOGUE() > 5000)
                        {
                            sub_53575( ref l_U107 );
                            sub_53506( uParam0, ref l_U107 );
                            return 1;
                        }
                    }
                }
            }
        }
    }
    return 0;
}

int sub_82400(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21, unknown uParam22, unknown uParam23, unknown uParam24, unknown uParam25, unknown uParam26, unknown uParam27, unknown uParam28, unknown uParam29, unknown uParam30, unknown uParam31, unknown uParam32, unknown uParam33, unknown uParam34, unknown uParam35, unknown uParam36, unknown uParam37, unknown uParam38, unknown uParam39, unknown uParam40, unknown uParam41, boolean bParam42)
{
    if (sub_30541())
    {
        if ((NOT (GET_IS_PED_FORCED_TO_WALK( sub_10194() ))) AND (sub_50397( uParam0 )))
        {
            sub_793( "RJM", "UPDATE_FORCEWALK_AND_TRIGGER_PAIR - Force walk enabled", 0 );
            SET_PED_FORCED_TO_WALK( sub_10194(), 1 );
        }
        else if ((GET_IS_PED_FORCED_TO_WALK( sub_10194() )) AND (NOT (sub_50397( uParam0 ))))
        {
            sub_793( "RJM", "UPDATE_FORCEWALK_AND_TRIGGER_PAIR - Force walk disabled", 0 );
            SET_PED_FORCED_TO_WALK( sub_10194(), 0 );
        }
    }
    if (sub_50397( uParam21 ))
    {
        if (bParam42)
        {
            SET_PED_FORCED_TO_WALK( sub_10194(), 0 );
        }
        return 1;
    }
    return 0;
}

void sub_83671()
{
    sub_29643( g_U3097 );
    sub_29643( -859113524 );
    sub_29643( -1522991054 );
    sub_29643( -1193498759 );
    sub_29643( 588151771 );
    sub_29643( 216303562 );
    sub_29643( -946946919 );
    sub_29643( 1740663406 );
    sub_29643( g_U774 );
    sub_29643( g_U775 );
    sub_29643( g_U777 );
    sub_29643( -1915312722 );
    sub_29643( -1549971141 );
    sub_69734();
    sub_29881( "ny_wtanim" );
    return;
}

void sub_83842(unknown uParam0)
{
    switch (uParam0)
    {
        case 0: break;
        case 1: break;
        case 2:
        case 5:
        case 6: break;
        case 7:
        case 8: break;
    }
    return;
}

