void main()
{
    l_U0 = 1;
    l_U1 = 144;
    l_U2 = "PED_DEF";
    l_U44 = 1.00000000;
    l_U56 = 0;
    l_U97 = 0;
    l_U117 = 1;
    l_U118 = 1;
    l_U158 = 0;
    l_U170 = 0;
    l_U171 = 1;
    l_U172 = 0;
    l_U173 = 1.00000000;
    l_U174 = -5.00000000;
    l_U175 = 0;
    l_U176 = 0;
    l_U177 = 0;
    l_U181 = 42;
    l_U182 = 0;
    l_U183 = 0;
    l_U184 = 0;
    l_U185 = 0;
    l_U186 = 0;
    l_U187 = 90.00000000;
    l_U188 = {0.00000000, 0.00000000, 0.00000000};
    l_U191 = {0.00000000, 0.00000000, 0.00000000};
    l_U194 = 0;
    l_U195 = 0;
    l_U196 = 0;
    l_U197 = 0;
    l_U198 = 0;
    l_U199 = 0;
    l_U200 = nil;
    l_U201 = {0.00000000, 0.00000000, 0.00000000};
    l_U204 = 0;
    l_U205 = 0;
    l_U206 = 0;
    l_U258 = 0;
    l_U259 = 0;
    l_U260 = 1;
    l_U262 = 0;
    l_U263 = 0;
    l_U264 = 1500;
    l_U275 = 0;
    l_U297 = 1;
    l_U298 = 0;
    l_U300 = "MID_02aa_NYBAR_concat";
    l_U301 = 0;
    l_U374 = 0;
    l_U375 = 0;
    l_U1283 = 750;
    l_U1284 = 50;
    l_U1455 = {-363.61500000, -7.34700000, 2.64900000};
    l_U1458 = {-337.99140000, -13.70355000, 2.67698700};
    l_U1461 = {-344.00000000, -7.20000000, 2.65000000};
    l_U1464 = {-344.00000000, -7.20000000, 2.65000000};
    l_U1481 = {-344.80750000, -19.05593000, 2.67698700};
    l_U1484 = 270;
    l_U1486 = 0;
    l_U1487 = 0;
    l_U1488 = 0;
    l_U1489 = 0;
    l_U1490 = 0;
    l_U1492 = 0;
    l_U1493 = 0;
    l_U1494 = 0;
    l_U1495 = 0;
    l_U1496 = 0;
    l_U1499 = {-363.66600000, -7.88800000, 1.80500000};
    l_U1651 = {-363.20000000, -7.20000000, 3.82800000};
    l_U1654 = {0, 0, 0};
    l_U1657 = {-365.20000000, -5.40000000, 5.20000000};
    l_U1660 = {0, 0, 0};
    l_U1663 = 1000;
    l_U1664 = 0.60000000;
    l_U1665 = 0.22000000;
    l_U1675 = "SCRIPT_MISSION\S_NYC2_APARTMENT_COLLAPSE";
    l_U1677 = -1;
    l_U1764 = {-369.53080000, -25.88512000, 3.18000000};
    l_U1786 = -1;
    l_U1873 = {-333.78500000, -15.26600000, 4.17000000};
    l_U1876 = -1;
    l_U1963 = {-330.84000000, -11.75000000, 3.65000000};
    l_U2237 = 0;
    l_U2238 = 0;
    l_U2239 = 0;
    l_U2241 = 0;
    sub_939( "SBA", "Script s_nyc2_apartment.sc is starting...", " " );
    START_WIDGET_GROUP( "Skip Everything In the Apartments" );
    ADD_WIDGET_BOOL( "Skip Everything?", ref l_U1491 );
    STOP_WIDGET_GROUP();
    sub_1071( 0 );
    sub_1798( 1, 0 );
    l_U1015 = GET_INTERIOR_AT_COORDS( g_U3141[1]._fU0 );
    MARK_INTERIOR_COLLISION_REQUIRED( l_U1015 );
    sub_2124();
    sub_6396();
    if (g_U779 == 0)
    {
        l_U2240 = 0;
    }
    sub_7164();
    while (NOT IS_EXITFLAG_SET())
    {
        if (g_U3437[4])
        {
            SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        }
        else if (l_U2240 > 5)
        {
            sub_11672();
        }
        sub_12945();
        sub_18370();;
        WAIT( 0 );
    }
    sub_16628();
    sub_66955();
    sub_67188( 1 );
    CLEAR_INTERIOR_COLLISION_REQUIRED( l_U1015 );
    sub_939( "SBA", "Script s_nyc2_apartment.sc is ending", 0 );
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "s_nyc2_apartment" );
    SET_EXITFLAG_RESPONSE();
    return;
}

void sub_939(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    return;
}

void sub_1071(unknown uParam0)
{
    sub_939( "SBA", "LOAD_APARTMENT_ASSETS", "***" );
    sub_1129( 439675427, uParam0 );
    sub_1331( g_U3095, uParam0 );
    sub_1331( g_U776, uParam0 );
    sub_1331( g_U773, uParam0 );
    sub_1331( -1029582816, uParam0 );
    sub_1555( "SNYCAUD" );
    sub_1331( -1725947354, uParam0 );
    sub_1331( -1226437551, uParam0 );
    sub_1705( "EXPL_CAM", 0, uParam0 );
    sub_1331( g_U3091, uParam0 );
    return;
}

void sub_1129(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to load does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 0)
    {
        ISEQ_REQUEST( uParam0 );
        ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
        if (iParam1 == 1)
        {
            while ((ISEQ_QUERY_STATE( uParam0, 1 )) == 1)
            {
                WAIT( 0 );
            }
        }
    }
    return;
}

void sub_1331(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
        sub_1436( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_1436(unknown uParam0)
{
    return;
}

void sub_1555(unknown uParam0)
{
    StrCopy( ref g_U157._fU0, uParam0, 16 );
    sub_1575();
    return;
}

void sub_1575()
{
    int I;

    for ( I = 0; I <= 8; I++ )
    {
        g_U157._fU16[I]._fU0 = nil;
        g_U157._fU16[I]._fU4 = 0;
        g_U157._fU92[I] = 0;
    }
    return;
}

void sub_1705(unknown uParam0, unknown uParam1, int iParam2)
{
    REQUEST_ANIM_DICT( uParam0, uParam1 );
    "[doubled result, dropped if not asigned]";
    if (iParam2 == 1)
    {
        while ((HAS_ANIM_DICT_LOADED( uParam0, uParam1 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_1798(unknown uParam0, unknown uParam1)
{
    sub_1814( -862236369, 1 );
    switch (uParam0)
    {
        case 0:
        case 1:
        case 2:
        sub_1814( 434544317, uParam1 );
        sub_1814( -691403429, uParam1 );
        break;
        case 3:
        case 4:
        case 5:
        case 6:
        sub_1814( 434544317, uParam1 );
        sub_1814( -691403429, uParam1 );
        sub_1814( 1478009203, uParam1 );
        sub_1814( -1074756423, uParam1 );
        break;
        case 7:
        case 8:
        sub_1814( 434544317, uParam1 );
        sub_1814( -691403429, uParam1 );
        sub_1814( -1074756423, uParam1 );
        break;
    }
    return;
}

void sub_1814(unknown uParam0, boolean bParam1)
{
    REQUEST_WEAPON( uParam0 );
    if (bParam1)
    {
        while ((HAS_WEAPON_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_2124()
{
    sub_939( "RJM", "SETUP_APARTMENT_STATIC_DATA", "***" );
    sub_2220( ref l_U926[0], -337.60030000, -13.45455000, 2.67698700, 230.00000000, 1964119353, 7, 3, 2, 0, 0 );
    sub_2220( ref l_U926[1], -345.57900000, -23.21000000, 2.64971900, -36.17700000, -548595990, 7, 3, 2, 0, 0 );
    sub_2220( ref l_U926[2], -338.39200000, -15.29400000, 2.67698700, -36.17700000, 708339469, 7, 3, 2, 0, 0 );
    sub_2220( ref l_U1016[0], -360.91000000, -6.60000000, 6.20000000, 180.70000000, -1244383370, 7, 3, 2, 0, 0 );
    sub_2220( ref l_U1016[1], -358.91000000, -6.60000000, 6.20000000, 177.70000000, -480948977, 7, 3, 2, 0, 0 );
    sub_2220( ref l_U1016[2], -357.40000000, -6.60000000, 6.20000000, 172.30000000, 226430039, 7, 3, 2, 0, 0 );
    sub_2220( ref l_U1016[3], -351.60000000, -6.60000000, 6.20000000, 172.30000000, 149637155, 7, 3, 2, 0, 0 );
    sub_2220( ref l_U1016[4], -345.30000000, -7.60000000, 6.20000000, 172.30000000, -651442088, 7, 3, 2, 0, 0 );
    sub_2220( ref l_U1286[0], -366.40300000, -6.27200000, 2.64900000, 65446, -1237558166, 7, 3, 2, 0, 0 );
    sub_2220( ref l_U1286[1], -367.57200000, -7.18500000, 2.64900000, -90.00000000, -941579388, 7, 3, 2, 0, 0 );
    sub_2220( ref l_U1286[2], -366.01100000, -8.30700000, 2.64900000, -90.00000000, 525041670, 7, 3, 2, 0, 0 );
    sub_2220( ref l_U1424, -338.72000000, -12.48700000, 1.65000000, 260.00000000, -1237558166, 7, 1, 2, 0, 0 );
    sub_2220( ref l_U1336[0], -366.40300000, -6.27200000, 2.70000000, 65446, -1025326267, 7, 3, 2, 0, 0 );
    sub_2220( ref l_U1336[1], -367.57200000, -7.18500000, 2.70000000, -90.00000000, 2140559462, 7, 3, 2, 0, 0 );
    sub_2220( ref l_U1336[2], -366.01100000, -8.30700000, 2.70000000, 0.00000000, -1327077111, 7, 3, 2, 0, 0 );
    sub_2220( ref l_U1336[3], -366.01100000, -8.30700000, 2.75000000, 0.00000000, -1696183181, 7, 3, 2, 0, 0 );
    sub_2220( ref l_U1394[0], -347.69060000, -7.05099000, 2.71586900, 65446, 1582120812, 7, 3, 2, 0, 0 );
    sub_2220( ref l_U1394[1], -351.12980000, -7.11067400, 2.71586900, 80, -1566018181, 7, 3, 2, 0, 0 );
    sub_3147( ref l_U412, "TRIG_APT_ENTER_HALL", -366.94000000, -18.70000000, 2.60000000, 12.00000000, 7.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U433, "TRIG_MAX_APT_DOOR", -369.66000000, -19.32000000, 2.60000000, 2.95000000, 3.34000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U475, "TRIG_CHALL_APT_EXIT", -366.11560000, -19.28811000, 2.65637000, 3.00000000, 3.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U454, "TRIG_MAX_BATH", -369.98000000, -15.32000000, 2.60000000, 2.64000000, 4.00000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U496, "TRIG_APT_HALL1", -352.82000000, -19.10000000, 2.60000000, 22.00000000, 7.00000000, 4.00000000, 0.00000000, 0.00000000, -10.00000000, 1 );
    sub_3147( ref l_U517, "TRIG_APT_HALL2", -348.56000000, -18.98000000, 2.60000000, 13.00000000, 2.60000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U538, "TRIG_ALL_HALLS", -351.82000000, -13.59000000, 2.60000000, 30.13000000, 15.35000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U559, "TRIG_APT_WINDOWS04", -365.43000000, -15.42000000, 2.60000000, 3.00000000, 3.50000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U580, "TRIG_1ST_HALL_WINDOWS", -353.99000000, -19.62000000, 2.60000000, 17.75000000, 3.88000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U601, "TRIG_BACK_HALL_WINDOWS", -352.26000000, -6.70000000, 2.60000000, 22.82000000, 3.89000000, 3.00000000, 0.00000000, 0.00000000, -180.00000000, 1 );
    sub_3147( ref l_U1094[0], "TRIG_TARGET_WINDOW_0", -361.43000000, -18.98000000, 2.60000000, 2.24000000, 2.64000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U1094[1], "TRIG_TARGET_WINDOW_1", -359.28000000, -19.55000000, 2.60000000, 2.00000000, 3.78000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U1094[2], "TRIG_TARGET_WINDOW_2", -356.95000000, -19.55000000, 2.60000000, 2.61000000, 3.78000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U1094[3], "TRIG_TARGET_WINDOW_3", -354.23000000, -19.55000000, 2.60000000, 2.72000000, 3.78000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U1094[4], "TRIG_TARGET_WINDOW_4", -351.86000000, -18.98000000, 2.60000000, 1.97000000, 2.64000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U1094[5], "TRIG_TARGET_WINDOW_5", -349.47000000, -18.98000000, 2.60000000, 2.76000000, 2.64000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U622, "TRIG_APT_NEAR_HALL_CORNER", -339.16000000, -17.96000000, 2.60000000, 7.20000000, 6.00000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U643, "TRIG_FLEE_NO_BACKSIES", -338.27000000, -12.95000000, 2.60000000, 7.00000000, 16.00000000, 4.00000000, 0.00000000, 0.00000000, 7.34000000, 1 );
    sub_3147( ref l_U664, "TRIG_APT_VIG_11", -338.28000000, -7.51000000, 2.60000000, 6.00000000, 3.00000000, 4.00000000, 0.00000000, 0.00000000, 15.00000000, 1 );
    sub_3147( ref l_U790, "TRIG_APT_FINAL_WAVE", -345.07000000, -6.77000000, 2.60000000, 6.50000000, 4.00000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U685, "TRIG_VIGNETTE_12", -352.16000000, -7.24000000, 2.58000000, 6.00000000, 3.00000000, 3.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U706, "TRIG_CLEAN_VIGNETTE_12", -364.83450000, 1.25184400, 4.08288900, 6.00000000, 3.00000000, 3.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U727, "TRIG_STAIRWELL_EXIT", -365.85000000, 0.00000000, 2.60000000, 4.00000000, 10.00000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U895, "TRIG_STAIRS_RAYFIRE", -365.89000000, 2.77000000, 3.75000000, 4.05000000, 4.33000000, 2.52000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U748, "TRIG_APT_DEATHZONE", -352.23000000, -13.65000000, -4.00000000, 52.75000000, 40.63000000, 4.70000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U769, "TRIG_APT_DELETE_FLEES", -345.75000000, -8.28000000, 2.60000000, 8.00000000, 10.50000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U811, "TRIG_CRAZY_GUY_APARTMENT", -334.85000000, -13.18000000, 2.00000000, 10.00000000, 8.78000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U832, "TRIG_CRAZY_GUY_INTERIOR", -332.73000000, -13.18000000, 2.50000000, 5.81000000, 8.60000000, 2.93000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U853, "TRIG_CLIPPINGS_POI_INNER", -332.80000000, -15.31000000, 2.60000000, 2.00000000, 2.25000000, 2.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3147( ref l_U874, "TRIG_CLIPPINGS_POI_OUTER", -332.59000000, -15.31000000, 2.60000000, 2.50000000, 2.75000000, 2.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_5620( ref l_U916, "TETH_MAX_APT_AREA", -368.93000000, -22.65000000, 2.60000000, 10.00000000, 12.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_5620( ref l_U917, "TETH_APT_DOOR_COVER1", -357.21000000, -20.58000000, 2.60000000, 3.38000000, 1.70000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_5620( ref l_U918, "TETH_APT_DOOR_COVER2", -345.20000000, -20.58000000, 2.60000000, 3.38000000, 1.70000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_5620( ref l_U919, "TETH_APT_DOOR_COVER3", -358.45000000, -5.70000000, 2.60000000, 3.38000000, 1.70000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_5620( ref l_U920, "TETH_APT_HALL_CORNER", -338.27000000, -19.16000000, 2.60000000, 5.00000000, 5.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_5620( ref l_U921, "TETH_APT_FIRST_HALL", -353.56000000, -19.22000000, 2.60000000, 25.00000000, 4.77000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_5620( ref l_U922, "TETH_APT_FIRST_HALL_FULL", -350.45000000, -19.09000000, 2.60000000, 29.00000000, 4.77000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_5620( ref l_U923, "TETH_APT_HALL_END", -359.90000000, -7.29000000, 2.60000000, 16.50000000, 5.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_5620( ref l_U924, "TETH_ROOF_WAVE2", -353.05000000, -7.47000000, 6.00000000, 18.00000000, 2.70000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_5620( ref l_U925, "TETH_BACKROOF_WAVE2", -353.05000000, -18.78000000, 6.00000000, 18.00000000, 2.70000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    return;
}

void sub_2220(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

void sub_3147(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    StrCopy( ref iParam0->_fU0, uParam1, 64 );
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = {uParam2};
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 1, iParam0 + 0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

void sub_5620(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 2, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

void sub_6396()
{
    sub_939( "RJM", "INITIALIZE_APARTMENT_SCRIPT_DATA", "***" );
    l_U2240 = 2;
    l_U2237 = 0;
    l_U2238 = 0;
    l_U2239 = 0;
    l_U1677 = -1;
    l_U1786 = -1;
    l_U1876 = -1;
    l_U1643 = 0;
    l_U1648 = 0;
    l_U1622 = 0;
    l_U1623 = 0;
    l_U1624 = 0;
    l_U2242 = 4;
    l_U1485 = 0;
    l_U1012 = 0;
    l_U1013 = 0;
    l_U1014 = 0;
    l_U1649 = 0;
    l_U1486 = 0;
    l_U1487 = 0;
    l_U1285 = 0;
    l_U1488 = 0;
    l_U1489 = 0;
    l_U1490 = 0;
    l_U1491 = 0;
    l_U1492 = 0;
    l_U1493 = 0;
    l_U1494 = 0;
    l_U1453 = 0;
    l_U1454 = 0;
    l_U1495 = 0;
    sub_6644();
    return;
}

void sub_6644()
{
    sub_939( "CCB", "P_INITIALIZE_SP_CHALLENGES", 0 );
    l_U2243 = 0;
    sub_6705( ref l_U2244 );
    l_U2250 = 0;
    if (NOT (SCRIPT_VAR_HASH_EXISTS( 335066299 )))
    {
        sub_939( "CCB", "Creating the OldFamiliar script variable...", 0 );
        SCRIPT_VAR_HASH_ADD_INT( 335066299 );
        if (SCRIPT_VAR_HASH_EXISTS( 335066299 ))
        {
            sub_939( "CCB", "The OldFamiliar script variable was successfully created...", 0 );
        }
        else
        {
            sub_939( "CCB", "The OldFamiliar script variable is NOT valid!!!", 0 );
        }
    }
    else
    {
        sub_939( "CCB", "The OldFamiliar script variable was already created...", 0 );
        SCRIPT_VAR_HASH_SET_INT( 335066299, 0 );
    }
    return;
}

void sub_6705(unknown uParam0)
{
    int I;

    sub_939( "CCB", "P_RESET_BOOL_ARRAY", 0 );
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        (uParam0^)[I] = 0;
    }
    return;
}

void sub_7164()
{
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
    if ((g_U779 == 0) || (g_U779 == 1))
    {
        l_U297 = 2;
        sub_939( "RJM", "INITIALIZE_PLAYER_BY_CHECKPOINT says we're in MCE_APARTMENT", " " );
        if (NOT (sub_7290( ref l_U376 )))
        {
            sub_9666( sub_7415(), sub_11552( 1 ), 200, 0, 1 );
        }
        g_U780 = 1;
    }
    else
    {
        l_U297 = 1;
    }
    return;
}

int sub_7290(unknown uParam0)
{
    sub_939( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U0 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U1 );
            sub_7481( uParam0, sub_7415() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

int sub_7415()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED( sub_7437() );
    }
    return 0;
}

void sub_7437()
{
    return GET_PLAYER_ID();
}

void sub_7481(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

    sub_939( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U0)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
    sub_7665( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
        sub_8742( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 = sub_9034( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
        sub_9381( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 = sub_9034( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
        sub_9381( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 = sub_9034( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
        sub_9381( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 = sub_9666( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
        sub_9381( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 = sub_9666( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
        sub_9381( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U0 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if ((sub_10159( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
    sub_10320( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING( sub_7415(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U0)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U0 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
    sub_939( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

void sub_7665(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 = sub_7697( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

int sub_7697(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

void sub_8742(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

void sub_9034(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                }
            }
        }
    }
    else
    {
        sub_1436( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

void sub_9381(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

void sub_9666(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                }
            }
        }
    }
    else
    {
        sub_1436( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

int sub_10159(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

void sub_10320(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 = sub_7697( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
    sub_10392( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

void sub_10392(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

int sub_11552(unknown uParam0)
{
    uParam0 = uParam0;
    return -862236369;
}

void sub_11672()
{
    switch (l_U297)
    {
        case 1:
        sub_939( "TEH", "playing music: Suspended ", 0 );
        AUDIO_MUSIC_SUSPEND( 0 );
        l_U299 = 0;
        l_U297 = 3;
        break;
        case 2:
        sub_939( "TEH", "playing music: MC_CHECKPOINT_RESTART_APARTMENT ", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_2_3", "", 0, 5000, 5000, -1082130432, 0 );
        l_U299 = 0;
        l_U297 = 3;
        break;
        case 3:
        if (l_U298 == 3)
        {
            sub_939( "TEH", "playing music: RMC_START_HALLWAY", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_2_3", "", 0, 5000, 5000, -1082130432, 0 );
            l_U299 = 0;
            l_U297 = 4;
            l_U298 = 4;
        }
        break;
        case 4:
        if (l_U298 == 4)
        {
            if (l_U299 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_OS_3", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                    sub_939( "TEH", "playing music: Sussesfully preloaded NYBAR_OS_3 ", 0 );
                    l_U299 = 1;
                }
            }
            else
            {
                l_U297 = 5;
            }
        }
        break;
        case 5:
        if (l_U298 == 5)
        {
            if (l_U299 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_OS_3" ))
                {
                    sub_939( "TEH", "playing music: Sussesfully played NYBAR_OS_3 ", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                }
            }
            l_U297 = 6;
        }
        break;
        case 6:
        if (l_U298 == 6)
        {
            sub_939( "TEH", "playing music: MC_BEFORE_START_CRAZY_BLOWS_UP ", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_3", "", 0, 7000, 7000, -1082130432, 0 );
            l_U297 = 7;
        }
        break;
        case 7:
        if (l_U298 == 7)
        {
            sub_939( "TEH", "playing music: MC_CRAZY_GUY_EXPLOSION ", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1", "", 0, 1000, 1000, -1082130432, 0 );
            l_U297 = 8;
        }
        break;
        case 8: break;
        case 9:
        if (l_U298 == 9)
        {
            sub_939( "TEH", "playing music: MC_FINAL_HALLWAY_WITH_ENEMIES", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_5", "", 0, 3000, 3000, -1082130432, 0 );
            l_U297 = 10;
        }
        break;
        case 10:
        if (l_U298 == 10)
        {
            sub_939( "TEH", "playing music: MC_FINAL_HALLWAY_WITHOUT_ENEMIES", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1", "", 0, 3000, 3000, -1082130432, 0 );
            l_U297 = 11;
        }
        break;
    }
    return;
}

void sub_12945()
{
    if (g_U780 == 1)
    {
        if (l_U2241 == 0)
        {
            if ((IS_PED_DEAD( sub_7415() )) == 1)
            {
                sub_939( "SBA", "Player died in APARTMENT checkpoint", 0 );
                l_U2241 = 2;
                g_U3038 = 1;
                sub_13061( 1 );
            }
            else if (sub_13128())
            {
                sub_939( "SBA", "HANDLE_CHECKPOINTS - Restart, setting eAptFailure = STATE_FAIL_WAITING", 0 );
                l_U2241 = 2;
            }
        }
        sub_13651();
    }
    return;
}

void sub_13061(unknown uParam0)
{
    sub_939( "NS", "P_SETUP_PLAYER_DEATH_CAM()", 0 );
    uParam0 = uParam0;
    return;
}

int sub_13128()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U0 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD( sub_7415() )))
        {
            SET_PED_FORCED_TO_WALK( sub_7415(), 0 );
            SET_PLAYER_FORCED_AIM( sub_7437(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE( sub_7437(), 1 );
            if ((IS_PED_VISIBLE( sub_7415() )) == 0)
            {
                SET_PED_VISIBLE( sub_7415(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

void sub_13651()
{
    switch (l_U2241)
    {
        case 0: break;
        case 1:
        sub_13743( 1 );
        l_U2241 = 2;
        sub_939( "CCB", "eAptFailure - STATE_FAIL_WAITING", 0 );
        break;
        case 2:
        if (sub_14516())
        {
            if ((g_U819[2]._fU40 != 4) AND (g_U819[2]._fU40 != 0))
            {
                sub_939( "GA", "Shutting down script for Rooftops.", 0 );
                g_U2608._fU64 = 0;
                sub_14643( ref g_U819[2] );
                SET_EXITFLAG_FOR_SCRIPT( g_U819[2]._fU32 );
            }
            l_U2241 = 3;
        }
        else if ((sub_14708( 0 )) == 1)
        {
            if ((g_U819[2]._fU40 != 4) AND (g_U819[2]._fU40 != 0))
            {
                sub_939( "GA", "Shutting down script for Rooftops.", 0 );
                g_U2608._fU64 = 0;
                sub_14643( ref g_U819[2] );
                SET_EXITFLAG_FOR_SCRIPT( g_U819[2]._fU32 );
            }
            l_U2241 = 3;
        }
        break;
        case 3:
        if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
        {
            if (NOT IS_LAST_MAN_STANDING_ACTIVE())
            {
                if (NOT (IS_PED_DEAD( sub_7415() )))
                {
                    sub_939( "CCB", "Deactivating bullettime...", 0 );
                    DEACTIVATE_BULLET_TIME( 0, 0 );
                    END_POSTFX_BLENDER( 3, 0 );
                    l_U2241 = 5;
                    sub_939( "CCB", "eAptFailure - STATE_FAIL_CLEANUP", 0 );
                }
            }
            else
            {
                sub_939( "CCB", "Waiting for the last man standing...", 0 );
            }
        }
        else
        {
            sub_939( "CCB", "Waiting for passos bullet death cam...", 0 );
        }
        if ((IS_PED_DEAD( sub_7415() )) AND ((IS_BULLET_CAMERA_RUNNING( 0 )) AND (IS_DEATH_PANEL_WIPE_ALLOWED())))
        {
            l_U2241 = 4;
        }
        break;
        case 4:
        if (NOT (IS_PED_DEAD( sub_7415() )))
        {
            l_U2241 = 5;
        }
        break;
        case 5:
        if (NOT (IS_PLAYER_DEAD( sub_7437() )))
        {
            if (NOT (IS_PED_DEAD( sub_7415() )))
            {
                SET_PLAYER_CONTROL( sub_7437(), 0, 0 );
                SET_PED_FORCED_TO_WALK( sub_7415(), 0 );
                SET_PED_RELATIONSHIP( sub_7415(), 2, 3 );
            }
        }
        DO_SCREEN_FADE_OUT( 0 );
        CAMERA_FREEZE_FRAME( 0, 400, 0, 0 );
        DESTROY_ALL_CAMS();
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        sub_16628();
        sub_17252( l_U1467 );
        l_U2241 = 6;
        sub_939( "CCB", "eAptFailure - STATE_FAIL_RESTORE", 0 );
        break;
        case 6:
        sub_17921();
        sub_2124();
        sub_6396();
        SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
        if (IS_MAGDEMO())
        {
            l_U1494 = 1;
        }
        if (g_U780 == 1)
        {
            sub_7481( ref l_U376, sub_7415() );
        }
        if (sub_18124())
        {
            FREEZE_PED_POSITION( sub_7415(), 1 );
        }
        l_U2240 = 1;
        l_U297 = 2;
        l_U2241 = 7;
        sub_939( "CCB", "eAptFailure - STATE_FAIL_RESTART", 0 );
        break;
        case 7:
        sub_939( "CCB", "eAptFailure - STATE_FAIL_IDLE", 0 );
        g_U3038 = 0;
        l_U2241 = 0;
        break;
    }
    return;
}

void sub_13743(unknown uParam0)
{
    string sVar3;
    string sVar4;
    string sVar5;
    string sVar6;
    string sVar7;

    sub_939( "NS", "P_SETUP_PLAYER_KILL_PASSOS_DEATH()", 0 );
    sVar3 = "";
    sVar4 = "";
    sVar5 = "";
    sVar6 = "";
    sVar7 = "";
    switch (l_U277)
    {
        case 0:
        sVar4 = "S_NYB_FAIL_14A";
        sVar5 = "S_NYB_FAIL_14B";
        sVar6 = "S_NYB_FAIL_14C";
        sVar3 = "MISS_FAIL_07";
        break;
        case 1:
        sVar4 = "S_NYB_FAIL_15A";
        sVar5 = "S_NYB_FAIL_15B";
        sVar6 = "S_NYB_FAIL_15C";
        sVar7 = "S_NYB_FAIL_15D";
        sVar3 = "MISS_FAIL_04";
        break;
        case 2:
        sVar4 = "S_NYB_FAIL_16A";
        sVar5 = "S_NYB_FAIL_16B";
        sVar6 = "S_NYB_FAIL_16C";
        sVar7 = "S_NYB_FAIL_16D";
        sVar3 = "MISS_FAIL_04";
        break;
        case 3:
        sVar4 = "S_NYB_FAIL_17A";
        sVar5 = "S_NYB_FAIL_17B";
        sVar6 = "S_NYB_FAIL_17C";
        sVar3 = "MISS_FAIL_06";
        break;
    }
    sub_14236( sVar3, sVar4, sVar5, sVar6, sVar7, uParam0 );
    l_U277++;
    if (l_U277 == 4)
    {
        l_U277 = 0;
    }
    return;
}

void sub_14236(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    sub_939( "NS", "P_SETUP_AND_PLAY_DEATH_CAM()", 0 );
    uParam5 = uParam5;
    if (NOT (IS_STRING_NULL( uParam1 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 0, "" );
    }
    if (NOT (IS_STRING_NULL( uParam2 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 1, "" );
    }
    if (NOT (IS_STRING_NULL( uParam3 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 2, "" );
    }
    if (NOT (IS_STRING_NULL( uParam4 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 3, "" );
    }
    return;
}

void sub_14516()
{
    return g_U648;
}

void sub_14643(int iParam0)
{
    iParam0->_fU36 = 0;
    iParam0->_fU40 = 0;
    return;
}

int sub_14708(int iParam0)
{
    iParam0 = 1;
    switch (l_U263)
    {
        case 0:
        if (NOT (sub_14769( ref l_U265 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_7415() )))
            {
                l_U264 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
            sub_14879( ref l_U265, l_U264, 1, 1 );
            sub_15015( ref l_U265 );
        }
        if (sub_15135( ref l_U265 ))
        {
            sub_939( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_7415() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD( sub_7437() )))
            {
                SET_PLAYER_CONTROL( sub_7437(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U263 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U263 = 2;
            }
            else
            {
                l_U263 = 3;
            }
        }
        break;
        case 2:
        sub_939( "NS", "Player will QUIT", 0 );
        sub_15622();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
        sub_939( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        sub_15622();
        return 1;
        break;
    }
    return 0;
}

int sub_14769(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

void sub_14879(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

void sub_15015(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

int sub_15135(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

void sub_15622()
{
    sub_939( "NS", "P_PostFailRetryCleanup", 0 );
    sub_15672( ref l_U265 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD( sub_7437() )))
    {
        SET_PLAYER_CONTROL( sub_7437(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U262 = 0;
    l_U262 = l_U262;
    l_U263 = 0;
    return;
}

void sub_15672(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

void sub_16628()
{
    sub_939( "SBA", "CLEANUP_APARTMENT", "***" );
    if (CUTSCENE_IS_LOADED( l_U300 ))
    {
        CLEAR_NAMED_CUTSCENE( l_U300 );
    }
    if (IS_ANIMATED_CAMERA_PLAYING())
    {
        CAMERA_ANIMATED_STOP( 3000, 0 );
    }
    ISEQ_UNREGISTER_ENTITY( 439675427, "max" );
    sub_16751( 439675427, 0 );
    ISEQ_UNREGISTER_ENTITY( -2112719846, "GMED_LEFT" );
    ISEQ_UNREGISTER_ENTITY( -2112719846, "GMED_CENTER" );
    ISEQ_UNREGISTER_ENTITY( -2112719846, "GMED_RIGHT" );
    ISEQ_UNREGISTER_ENTITY( -2112719846, "CRAZY_GUY" );
    sub_16751( -2112719846, 0 );
    ISEQ_UNREGISTER_ENTITY( 1883820167, "passos" );
    sub_16751( 1883820167, 0 );
    ISEQ_UNREGISTER_ENTITY( -1741224239, "dead_thug" );
    sub_16751( -1741224239, 0 );
    ISEQ_UNREGISTER_ENTITY( -382428326, "max" );
    sub_16751( -382428326, 0 );
    ISEQ_UNREGISTER_ENTITY( 1624814954, "Max" );
    sub_16751( 1624814954, 1 );
    ISEQ_UNREGISTER_ENTITY( -613372609, "Max" );
    sub_16751( -613372609, 1 );
    sub_17218( ref l_U966 );
    sub_17218( ref l_U1082 );
    sub_17218( ref l_U1326 );
    sub_17218( ref l_U1389 );
    sub_17218( ref l_U1421 );
    sub_17252( l_U1437 );
    sub_17396( l_U1438 );
    sub_17396( l_U1439 );
    sub_17453( ref l_U1440 );
    sub_17453( ref l_U1443 );
    sub_17396( l_U1445 );
    sub_17396( l_U1446 );
    sub_17396( g_U701._fU0 );
    sub_17396( g_U719._fU0 );
    sub_17568( l_U1498 );
    sub_17568( l_U1497 );
    sub_17568( l_U1650 );
    sub_17568( g_U3044 );
    sub_17642( ref l_U1966 );
    sub_17568( l_U1966._fU40 );
    sub_17568( l_U1676 );
    sub_17568( l_U1785 );
    STOP_SCRIPT_STREAM( 2 );
    RELEASE_NAMED_SCRIPT_AUDIO_BANK( l_U1675 );
    sub_17817( "LEVEL_S_NYBAR_CP_03" );
    return;
}

void sub_16751(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to terminate does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 1)
    {
        ISEQ_TERMINATE( uParam0 );
    }
    ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
    if (iParam1 == 1)
    {
        while ((ISEQ_IS_LOADED( uParam0 )) == 1)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_17218(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_17252( (uParam0^)[I] );
    }
    return;
}

void sub_17252(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

void sub_17396(unknown uParam0)
{
    if ((DOES_PLACEMENT_EXIST( uParam0 )) == 1)
    {
        REMOVE_PLACEMENT( uParam0 );
    }
    return;
}

void sub_17453(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_17396( (uParam0^)[I] );
    }
    return;
}

void sub_17568(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

void sub_17642(int iParam0)
{
    sub_939( "rw", "P_CLEAN_MOVIE", 0 );
    sub_17568( iParam0->_fU40 );
    sub_16751( iParam0->_fU76, 1 );
    if (IS_SCRIPT_MOVIE_PLAYING( 2 ))
    {
        STOP_MOVIE( 2 );
    }
    RELEASE_MOVIE( 2 );
    return;
}

void sub_17817(unknown uParam0)
{
    REMOVE_ANIM_DICT( uParam0, 0 );
    return;
}

void sub_17921()
{
    sub_939( "SP", "P_SETUP_PLAYER_RELATIONSHIPS", "###" );
    if ((IS_PED_DEAD( sub_7415() )) == 0)
    {
        SET_PED_RELATIONSHIP( sub_7415(), 0, 1 );
        SET_PED_RELATIONSHIP( sub_7415(), 0, 2 );
        SET_PED_RELATIONSHIP( sub_7415(), 0, 6 );
        SET_PED_RELATIONSHIP( sub_7415(), 0, 7 );
    }
    return;
}

int sub_18124()
{
    if (sub_18139( sub_7415() ))
    {
        return 1;
    }
    return 0;
}

int sub_18139(unknown uParam0)
{
    if ((NOT (IS_PED_DEAD( uParam0 ))) AND (DOES_PED_EXIST( uParam0 )))
    {
        return 1;
    }
    return 0;
}

void sub_18370()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;

    if (sub_18385( ref l_U475, 0 ))
    {
        END_CONTEXT( "NYBAR_Apartment_Apartment" );
    }
    sub_18566();
    sub_18929( ref l_U1966 );
    if (l_U2241 == 0)
    {
        if (sub_25445( l_U748 ))
        {
            sub_939( "SBA", "KillPedInTrigger: Player fell", "***" );
        }
        sub_25652();
        sub_28688();
        if (l_U1491)
        {
            sub_939( "RJM", "Short-circuiting Apartment script so we can quickly test Apt -> Roof transition", 0 );
            sub_16628();
            if (sub_18124())
            {
                sub_22928( sub_7415(), -365.45190000, -7.37069100, 2.71586900, 92.74036000 );
                SET_ROOM_FOR_PED_BY_NAME( sub_7415(), ref g_U3497 );
            }
            g_U819[2]._fU36 = 1;
            l_U1491 = 0;
            l_U2240 = 10;
        }
        if (l_U1492)
        {
            if (sub_25755( l_U811 ))
            {
                if (NOT l_U1493)
                {
                    sub_939( "bsw", "player is in crazy guy apartment", 0 );
                    sub_29220( ref l_U1082 );
                    SET_PED_RELATIONSHIP( sub_7415(), 0, 3 );
                    l_U1493 = 1;
                }
            }
            else if (l_U1493)
            {
                sub_939( "bsw", "player has exited crazy guy apartment", 0 );
                SET_PED_RELATIONSHIP( sub_7415(), 2, 3 );
                l_U1493 = 0;
            }
        }
        switch (l_U2240)
        {
            case 0:
            if (GET_NUMBER_OF_STREAMING_REQUESTS() == 0)
            {
                l_U2240 = 2;
            }
            break;
            case 1:
            if ((GET_STABLE_NUM_OF_STREAMING_REQUESTS() == 0) AND (GET_NUMBER_OF_STREAMING_REQUESTS() == 0))
            {
                sub_939( "SBA", "P_HANDLE_START_EVENTS: APARTMENT_RESTART - streaming requests = 0, advancing...", "***" );
                l_U2240 = 2;
            }
            break;
            case 2:
            if ((GET_STABLE_NUM_OF_STREAMING_REQUESTS() == 0) AND (GET_NUMBER_OF_STREAMING_REQUESTS() == 0))
            {
                sub_939( "SBA", "P_HANDLE_START_EVENTS: Case APARTMENT_SETUP", "***" );
                sub_29751( 1, 0 );
                sub_30120();
                sub_31305();
                sub_32800();
                sub_34327();
                sub_35239();
                sub_35854();
                sub_36265();
                sub_36599( sub_7415(), 1 );
                sub_37287();
                SET_TRANSITION_MOVIE_SKIPPABLE( 1 );
                l_U2240 = 3;
            }
            break;
            case 3:
            if ((GET_TRANSITION_MOVIE_FRAMES_REMAINING() <= 5) || (NOT IS_TRANSITION_MOVIE_PLAYING()))
            {
                if (sub_18124())
                {
                    sub_939( "SBA", "unfreezing player ped", "***" );
                    FREEZE_PED_POSITION( sub_7415(), 0 );
                }
                sub_37851();
                sub_42940();
                START_CONTEXT( "NYBAR_APARTMENT" );
                START_CONTEXT( "NYBAR_APARTMENT_TO_MPM" );
                START_CONTEXT( "NYBAR_APARTMENT_TO_BACKYARDS" );
                START_CONTEXT( "NYBAR_Apartment_Apartment" );
                STOP_CUTSCENE_AUDIO();
                sub_44637( ref g_U2811, 1 );
                l_U298 = 3;
                l_U2240 = 4;
            }
            break;
            case 4:
            sub_42940();
            if (NOT IS_TRANSITION_MOVIE_PLAYING())
            {
                if ((l_U376._fU0 == 0) || (g_U780 != 1))
                {
                    sub_44874( ref l_U376, 1, sub_7415(), g_U3141[1]._fU0, g_U3141[1]._fU12, g_U3141[1]._fU16, g_U3141[1]._fU20, 1 );
                    g_U780 = 1;
                }
            }
            if (sub_48461( ref g_U3386, 1 ))
            {
                sub_939( "bsw", "HANDLE_04_02_BLENDOUT 2nd shot finished", 0 );
                sub_48669( 500, 1, 1, -859915232, -859915232, 0 );
                sub_48768( 1, 1 );
                sub_14879( ref l_U985, 1000, 1, 0 );
                sub_15015( ref l_U985 );
                sub_14879( ref l_U994, 3500, 1, 0 );
                sub_15015( ref l_U994 );
                sub_14879( ref l_U976, 6000, 1, 0 );
                sub_15015( ref l_U976 );
                sub_49101();
                sub_49179( 0 );
                sub_32737( ref l_U1678, 1 );
                sub_49618( ref l_U1440, ref l_U1447 );
                sub_939( "SBA", "P_HANDLE_START_EVENTS: Moving to APARTMENT_1ST_ENCOUNTERS", "***" );
                l_U2240 = 6;
            }
            break;
            case 6:
            sub_42940();
            sub_49894();
            sub_50945();
            if (NOT l_U1014)
            {
                if (sub_15135( ref l_U976 ))
                {
                    if (NOT (sub_25755( l_U538 )))
                    {
                        sub_51219();
                        sub_14879( ref l_U1003, 1500, 1, 0 );
                        sub_15015( ref l_U1003 );
                    }
                    else
                    {
                        sub_17252( l_U966[2] );
                    }
                    l_U1014 = l_U1014;
                }
            }
            if (sub_15135( ref l_U985 ))
            {
                if (sub_18139( l_U966[1] ))
                {
                    PLAY_PED_AMBIENT_SPEECH( l_U966[1], "SWEAR_ANGRY", 0, 0, 2, 0, 30000 );
                }
            }
            if (sub_15135( ref l_U994 ))
            {
                if (sub_18139( l_U966[0] ))
                {
                    PLAY_PED_AMBIENT_SPEECH( l_U966[0], "SWEAR_ANGRY", 0, 0, 2, 0, 30000 );
                }
            }
            if (sub_15135( ref l_U1003 ))
            {
                if (sub_18139( l_U966[2] ))
                {
                    PLAY_PED_AMBIENT_SPEECH( l_U966[2], "TAUNT", 0, 0, 2, 0, 30000 );
                }
            }
            if (sub_18385( ref l_U1094[0], 0 ))
            {
                sub_51822( ref l_U966, 1 );
                sub_939( "SBA", "piThugs1stWave is now one-shot-kill!", 0 );
                if (l_U297 == 5)
                {
                    l_U298 = 5;
                }
            }
            if (NOT l_U1486)
            {
                if (sub_25755( l_U1094[3] ))
                {
                    sub_939( "SBA", "Middle thug should retreat!", 0 );
                    sub_43294( l_U966[1], 0, 1, 1 );
                    sub_52059( 1, 1 );
                    sub_52059( 2, 1 );
                    l_U1486 = 1;
                }
            }
            if (NOT l_U1487)
            {
                if (sub_25755( l_U1094[5] ))
                {
                    sub_939( "SBA", "Last thug should retreat!", 0 );
                    sub_43294( l_U966[0], 0, 1, 1 );
                    sub_52572( ref l_U966 );
                    sub_52059( 0, 1 );
                    l_U1487 = 1;
                }
            }
            if (sub_18385( ref l_U517, 0 ))
            {
                sub_939( "SBA", "P_HANDLE_START_EVENTS: Player in tbAptHall2", "***" );
                l_U298 = 3;
                sub_52803();
            }
            if ((sub_18124()) AND (NOT l_U1488))
            {
                if ((NOT IS_LAST_MAN_STANDING_ACTIVE()) AND ((NOT IS_BULLET_CAMERA_ACTIVE()) AND ((NOT IS_PLAYER_SHOOTDODGING()) AND (sub_25755( l_U622 )))))
                {
                    sub_939( "SBA", "P_HANDLE_START_EVENTS: hitting tbAptNearHallCorner!", "***" );
                    sub_53111( l_U966[0], -350.50000000, -19.00000000, 2.65000000 );
                    sub_53111( l_U966[1], -351.00000000, -19.00000000, 2.65000000 );
                    sub_53111( l_U966[2], -351.50000000, -19.00000000, 2.65000000 );
                    sub_1129( -382428326, 1 );
                    sub_1129( -1741224239, 1 );
                    sub_36114( l_U1437, 0 );
                    sub_22928( l_U1437, l_U1424._fU0, l_U1424._fU12 );
                    if (sub_18139( l_U1437 ))
                    {
                        SET_ROOM_FOR_PED_BY_NAME( l_U1437, ref g_U3529 );
                    }
                    ISEQ_REGISTER_ENTITY( -1741224239, "dead_thug", l_U1437, 0 );
                    ISEQ_START( -1741224239 );
                    l_U298 = 6;
                    if (sub_18139( sub_7415() ))
                    {
                        if (NOT (sub_53588( sub_7415() )))
                        {
                            sub_53788( ref uVar3, ref uVar4 );
                        }
                    }
                    sub_54633();
                    l_U1488 = 1;
                    g_U3043 = 0;
                    sub_36114( l_U1437, 0 );
                    sub_49179( 1 );
                    sub_54938();
                    sub_50054( 0 );
                    sub_56007( 1 );
                    sub_56463( ref l_U1326 );
                    sub_939( "SBA", "P_HANDLE_START_EVENTS: Advancing to APARTMENT_PLAY_MID_02aa", "***" );
                    l_U2240 = 7;
                }
            }
            sub_57363();
            if (l_U1487)
            {
                sub_57805( ref l_U966[0], 0 );
            }
            if (l_U1486)
            {
                sub_57805( ref l_U966[1], 0 );
                sub_57805( ref l_U966[2], 0 );
            }
            sub_58207();
            sub_38953();
            break;
            case 7:
            if ((NOT l_U1495) AND (g_U3043))
            {
                sub_58616();
                l_U1495 = 1;
            }
            if (sub_59223( 1, 0, 0 ))
            {
                sub_60457();
                sub_44637( ref g_U2811, 0 );
                sub_37527( ref g_U2811, 0, 1, 1.00000000 );
                sub_37678( ref g_U2811, 1 );
                sub_17218( ref l_U1326 );
                sub_44345( g_U3090 );
                l_U1493 = 0;
                l_U1492 = 1;
                sub_61652();
                sub_61971();
                sub_61114( ref l_U966 );
                sub_939( "SBA", "P_HANDLE_START_EVENTS: Advancing to APARTMENT_MID_02aa_BLENDOUT", "***" );
                l_U2240 = 8;
            }
            break;
            case 8:
            if (sub_62215())
            {
                if (sub_18139( l_U1437 ))
                {
                    SET_PED_COLLISION( l_U1437, 0 );
                    SET_PED_BLOODSPRAY_ENABLE( l_U1437, 0 );
                }
                sub_939( "SBA", "P_HANDLE_START_EVENTS: Advancing to APARTMENT_POST_EXPLOSION", "***" );
                l_U2240 = 9;
            }
            break;
            case 9:
            sub_57363();
            sub_38953();
            sub_49894();
            sub_58207();
            sub_62813();
            sub_63742();
            sub_64561();
            sub_50945();
            if (sub_18385( ref l_U790, 0 ))
            {
                l_U790._fU64 = 1;
                if (l_U1490)
                {
                    sub_939( "SBA", "Reseting the bulletcam flag for Final Wave", 0 );
                    l_U1490 = 0;
                }
            }
            if (l_U297 == 8)
            {
                if ((sub_27093( ref l_U1082 )) > 0)
                {
                    l_U297 = 9;
                    l_U298 = 9;
                }
                else
                {
                    l_U297 = 10;
                    l_U298 = 10;
                }
            }
            if (l_U297 == 10)
            {
                if ((sub_27093( ref l_U1082 )) == 0)
                {
                    l_U298 = 10;
                }
            }
            if (sub_18385( ref l_U685, 0 ))
            {
                STOP_SCRIPT_STREAM( 2 );
                sub_64900( l_U1675, 1 );
                sub_64972( ref g_U2860, 1 );
                sub_44637( ref g_U2860, 1 );
                uVar2 = DOOR_FIND_CLOSEST( g_U2860._fU0, g_U2860._fU4 );
                if (DOES_OBJECT_EXIST( uVar2 ))
                {
                    sub_939( "SBA", "P_HANDLE_START_EVENTS: Keeping roof door shut", "***" );
                    DOOR_SET_IS_AFFECTED_BY_BULLETS( uVar2, 0 );
                }
                sub_1331( -905572943, 0 );
                sub_1331( 162997152, 0 );
                sub_939( "SBA", "P_HANDLE_START_EVENTS: going to APARTMENT_DONE", "***" );
                l_U2240 = 10;
            }
            break;
            case 10:
            sub_49894();
            sub_62813();
            sub_63742();
            sub_64561();
            sub_50945();
            if ((sub_25755( l_U727 )) AND (NOT l_U1489))
            {
                sub_65367();
                l_U1489 = 1;
            }
            if (sub_18385( ref l_U895, 0 ))
            {
                l_U2242 = 0;
            }
            if (l_U2242 != 4)
            {
                sub_65540();
            }
            sub_58207();
            sub_38953();
            sub_939( "SBA", "P_HANDLE_START_EVENTS: going to APARTMENT_IDLE", "***" );
            l_U2240 = 11;
            break;
            case 11:
            sub_49894();
            sub_62813();
            sub_63742();
            sub_64561();
            sub_50945();
            if ((sub_25755( l_U727 )) AND (NOT l_U1489))
            {
                END_CONTEXT( "NYBAR_Apartment" );
                sub_65367();
                l_U1489 = 1;
            }
            if (l_U297 == 10)
            {
                if ((sub_27093( ref l_U1082 )) == 0)
                {
                    l_U298 = 10;
                }
            }
            if (sub_18385( ref l_U895, 0 ))
            {
                if (l_U297 == 10)
                {
                    l_U298 = 10;
                }
                l_U2242 = 0;
            }
            if (l_U2242 != 4)
            {
                sub_65540();
            }
            sub_58207();
            sub_38953();
            break;
        }
    }
    return;
}

void sub_18385(int iParam0, unknown uParam1)
{
    if (iParam0->_fU64 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU64 = sub_18427( sub_7415(), (iParam0^) );
        if ((iParam0->_fU64) AND (uParam1))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU64;
}

int sub_18427(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, ref uParam1._fU0 );
    }
    return 0;
}

void sub_18566()
{
    switch (l_U2243)
    {
        case 0:
        sub_939( "CCB", "eOldFamiliar - STATE_CHALLENGE_IDLE", 0 );
        l_U2243 = 1;
        break;
        case 1:
        if (l_U2237 >= 1)
        {
            sub_18693( ref l_U1082, ref l_U2244 );
        }
        break;
        case 2: break;
    }
    return;
}

void sub_18693(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (NOT (uParam1^)[I])
        {
            if (sub_18744( (uParam0^)[I], sub_7415() ))
            {
                (uParam1^)[I] = 1;
                l_U2250++;
                l_U2250 = (SCRIPT_VAR_HASH_GET_INT( 335066299 )) + 1;
                SCRIPT_VAR_HASH_SET_INT( 335066299, l_U2250 );
            }
        }
    }
    return;
}

int sub_18744(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        if (DOES_PED_EXIST( uParam0 ))
        {
            if (IS_PED_DEAD( uParam0 ))
            {
                if (HAS_PED_BEEN_DAMAGED_BY_PED( uParam0, uParam1, 0 ))
                {
                    return 1;
                }
            }
        }
    }
    return 0;
}

void sub_18929(int iParam0)
{
    if (DOES_OBJECT_EXIST( iParam0->_fU40 ))
    {
        if ((GET_OBJECT_HEALTH( iParam0->_fU40 )) < 1000.00000000)
        {
            if (iParam0->_fU4)
            {
                sub_17568( iParam0->_fU40 );
            }
            if ((ref iParam0->_fU496->_fU0) == 1)
            {
                sub_19028( iParam0 + 496, 0 );
            }
        }
    }
    switch (iParam0->_fU940)
    {
        case 0:
        if (DOES_OBJECT_EXIST( iParam0->_fU40 ))
        {
            if (((GET_OBJECT_HEALTH( iParam0->_fU40 )) == 1000.00000000) AND ((sub_20020() == 0) AND (iParam0->_fU0 == 0)))
            {
                if ((IS_SCRIPT_MOVIE_PLAYING( 2 )) == 0)
                {
                    if (sub_20139( iParam0 + 496 ))
                    {
                        if (NOT (IS_PED_DEAD( sub_7415() )))
                        {
                            SET_PLAYER_CONTROL( sub_7437(), 0, 0 );
                            REENABLE_PLAYER_INPUT( 30 );
                        }
                        iParam0->_fU944 = GET_WEAPON_FROM_HAND( sub_7415(), 0, 0 );
                        if (iParam0->_fU1072)
                        {
                            if (sub_21991( iParam0->_fU944 ))
                            {
                                sub_22277( iParam0 );
                            }
                        }
                        else
                        {
                            sub_22441();
                        }
                        if (NOT (IS_PED_DEAD( sub_7415() )))
                        {
                            if (IS_PED_DUAL_WIELDING( sub_7415() ))
                            {
                                sub_14879( ref l_U279, 1200, 1, 0 );
                            }
                            else
                            {
                                sub_14879( ref l_U279, 500, 1, 0 );
                            }
                        }
                        sub_1129( iParam0->_fU76, 0 );
                        sub_15015( ref l_U279 );
                        iParam0->_fU940 = 1;
                    }
                }
            }
        }
        break;
        case 1:
        if ((sub_15135( ref l_U279 )) AND (sub_22612( iParam0 )))
        {
            if ((sub_22702( iParam0 )) AND (NOT (IS_PED_DEAD( sub_7415() ))))
            {
                ISEQ_REGISTER_ENTITY( iParam0->_fU76, "Max", sub_7415(), 0 );
            }
            if (sub_22702( iParam0 ))
            {
                ISEQ_START( iParam0->_fU76 );
            }
            sub_19028( iParam0 + 496, 0 );
            iParam0->_fU940 = 2;
        }
        else
        {
            sub_939( "rw", "waiting for weapon to holster", 0 );
        }
        break;
        case 2:
        if (sub_22702( iParam0 ))
        {
            CAMERA_PLAY_ANIMATED( iParam0->_fU100, iParam0->_fU96, 0, iParam0->_fU108, iParam0->_fU120, 0, 0 );
            sub_22928( sub_7415(), iParam0->_fU80, iParam0->_fU92 );
        }
        PRELOAD_MOVIE( 2, iParam0 + 8, 0, sub_22991() );
        if (sub_22702( iParam0 ))
        {
            sub_14879( iParam0 + 840, iParam0->_fU916, 1, 0 );
        }
        else
        {
            sub_14879( iParam0 + 840, 0, 1, 0 );
        }
        sub_15015( iParam0 + 840 );
        iParam0->_fU940 = 3;
        break;
        case 3:
        if (sub_15135( iParam0 + 840 ))
        {
            sub_15672( iParam0 + 840 );
            if (sub_22702( iParam0 ))
            {
                ISEQ_UNREGISTER_ENTITY( iParam0->_fU76, "Max" );
                ISEQ_TERMINATE( iParam0->_fU76 );
            }
            CAMERA_ANIMATED_STOP( 0, 0 );
            iParam0->_fU124 = CREATE_CAM_WITH_PARAMS( "DEFAULT_SCRIPTED_CAMERA", iParam0->_fU128, iParam0->_fU140, 45, 0 );
            if (iParam0->_fU924 != 0)
            {
                SET_CAM_FAR_DOF( iParam0->_fU124, iParam0->_fU924, iParam0->_fU928 );
                SET_CAM_DOF_STRENGTH( iParam0->_fU124, iParam0->_fU932 );
            }
            SET_CAM_ACTIVE( iParam0->_fU124, 1 );
            RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
            if (NOT (IS_PED_DEAD( sub_7415() )))
            {
                SET_PED_VISIBLE( sub_7415(), 0 );
                DISPLAY_HUD( 0 );
            }
            if ((iParam0->_fU912 == 0) AND ((DOES_OBJECT_EXIST( iParam0->_fU40 )) == 1))
            {
                ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( iParam0->_fU40, iParam0 + 44 );
                FREEZE_OBJECT_POSITION( iParam0->_fU40, 1 );
                SET_OBJECT_COLLISION( iParam0->_fU40, 0 );
            }
            sub_19028( iParam0 + 496, 0 );
            sub_19028( iParam0 + 152, 1 );
            if ((IS_SCRIPT_MOVIE_PLAYING( 2 )) == 0)
            {
                SET_MOVIE_LOOP( 2, 0 );
                PLAY_MOVIE( 2, 0 );
                AUDIO_ENABLE_TV_MOVIE( 1 );
            }
            if ((NOT (sub_14769( iParam0 + 876 ))) AND ((sub_22702( iParam0 )) AND (iParam0->_fU920 > 0)))
            {
                sub_14879( iParam0 + 876, iParam0->_fU920, 1, 0 );
                sub_15015( iParam0 + 876 );
            }
            STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
            iParam0->_fU940 = 4;
        }
        break;
        case 4:
        if (sub_15135( iParam0 + 876 ))
        {
            sub_1129( iParam0->_fU76, 0 );
            if (NOT (IS_PED_DEAD( sub_7415() )))
            {
                ISEQ_REGISTER_ENTITY( iParam0->_fU76, "Max", sub_7415(), 0 );
                SET_PED_VISIBLE( sub_7415(), 1 );
            }
            sub_22928( sub_7415(), iParam0->_fU80, iParam0->_fU92 );
            if (sub_22702( iParam0 ))
            {
                SET_CAM_ACTIVE( iParam0->_fU124, 0 );
                CAMERA_PLAY_ANIMATED( iParam0->_fU100, iParam0->_fU96, 0, iParam0->_fU108, iParam0->_fU120, 0, 0 );
                ISEQ_START( iParam0->_fU76 );
            }
            CLEAR_PED_PRIMARY_LOOKAT( sub_7415() );
            SET_COORD_PRIMARY_LOOKAT( sub_7415(), "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU40 ) );
            sub_15672( iParam0 + 840 );
            sub_14879( iParam0 + 840, iParam0->_fU916, 1, 0 );
            sub_15015( iParam0 + 840 );
            sub_19028( iParam0 + 496, 0 );
            sub_19028( iParam0 + 152, 0 );
        }
        if (sub_15135( iParam0 + 840 ))
        {
            sub_15672( iParam0 + 840 );
            if (sub_22702( iParam0 ))
            {
                ISEQ_UNREGISTER_ENTITY( iParam0->_fU76, "Max" );
                ISEQ_TERMINATE( iParam0->_fU76 );
            }
            if (sub_22702( iParam0 ))
            {
                if (IS_ANIMATED_CAMERA_PLAYING())
                {
                    CAMERA_ANIMATED_STOP( 0, 0 );
                }
            }
            if ((DOES_CAM_EXIST( iParam0->_fU124 )) == 0)
            {
                iParam0->_fU124 = CREATE_CAM_WITH_PARAMS( "DEFAULT_SCRIPTED_CAMERA", iParam0->_fU128, iParam0->_fU140, 45, 0 );
                if (iParam0->_fU924 != 0)
                {
                    SET_CAM_FAR_DOF( iParam0->_fU124, iParam0->_fU924, iParam0->_fU928 );
                    SET_CAM_DOF_STRENGTH( iParam0->_fU124, iParam0->_fU932 );
                }
            }
            SET_CAM_ACTIVE( iParam0->_fU124, 1 );
            if (NOT (IS_PED_DEAD( sub_7415() )))
            {
                SET_PLAYER_CONTROL( sub_7437(), 0, 0 );
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( sub_7415(), 1 );
                REENABLE_PLAYER_INPUT( 30 );
                SET_PED_VISIBLE( sub_7415(), 0 );
                DISPLAY_HUD( 0 );
            }
            RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
            if ((iParam0->_fU912 == 0) AND ((DOES_OBJECT_EXIST( iParam0->_fU40 )) == 1))
            {
                ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( iParam0->_fU40, iParam0 + 44 );
                FREEZE_OBJECT_POSITION( iParam0->_fU40, 1 );
                SET_OBJECT_COLLISION( iParam0->_fU40, 0 );
            }
            sub_19028( iParam0 + 152, 1 );
        }
        if ((sub_20020()) || (((sub_24370( iParam0 )) AND ((ref iParam0->_fU152->_fU0) == 1)) || (sub_20139( iParam0 + 152 ))))
        {
            sub_22928( sub_7415(), iParam0->_fU1012, iParam0->_fU1024 );
            sub_19028( iParam0 + 152, 0 );
            if (sub_22702( iParam0 ))
            {
                sub_14879( iParam0 + 1028, iParam0->_fU1064, 1, 0 );
            }
            else
            {
                sub_14879( iParam0 + 1028, iParam0->_fU1068, 1, 0 );
            }
            sub_15015( iParam0 + 1028 );
            if (sub_22702( iParam0 ))
            {
                sub_1129( iParam0->_fU1008, 0 );
                ISEQ_REGISTER_ENTITY( iParam0->_fU1008, "Max", sub_7415(), 0 );
                ISEQ_START( iParam0->_fU1008 );
            }
            iParam0->_fU940 = 5;
        }
        break;
        case 5:
        if (NOT (IS_PED_DEAD( sub_7415() )))
        {
            SET_PED_VISIBLE( sub_7415(), 1 );
        }
        if (sub_22702( iParam0 ))
        {
            CAMERA_PLAY_ANIMATED( iParam0->_fU100, iParam0->_fU104, 0, iParam0->_fU108, iParam0->_fU120, 0, 0 );
            iParam0->_fU1080 = 1;
        }
        SET_CAM_ACTIVE( iParam0->_fU124, 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        iParam0->_fU940 = 6;
        break;
        case 6:
        if (sub_15135( iParam0 + 1028 ))
        {
            if (sub_22702( iParam0 ))
            {
                ISEQ_UNREGISTER_ENTITY( iParam0->_fU1008, "Max" );
                ISEQ_TERMINATE( iParam0->_fU1008 );
            }
            iParam0->_fU0 = 1;
            DISPLAY_HUD( 1 );
            DESTROY_CAM( iParam0->_fU124 );
            STOP_MOVIE( 2 );
            AUDIO_ENABLE_TV_MOVIE( 0 );
            RELEASE_MOVIE( 2 );
            if (iParam0->_fU912 == 0)
            {
                sub_17568( iParam0->_fU40 );
            }
            sub_14879( ref l_U288, 750, 1, 0 );
            sub_15015( ref l_U288 );
            iParam0->_fU940 = 7;
        }
        break;
        case 7:
        if (sub_15135( ref l_U288 ))
        {
            if (iParam0->_fU1072 == 0)
            {
                sub_22277( iParam0 );
            }
            iParam0->_fU940 = 8;
        }
        break;
        case 8:
        if (sub_25026( iParam0 ))
        {
            DESTROY_CAM( iParam0->_fU124 );
            if (sub_22702( iParam0 ))
            {
                SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU1076, 1065353216, 0 );
                SET_GAMEPLAY_CAM_RELATIVE_PITCH( 0, 1065353216, 0 );
            }
            if (NOT (IS_PED_DEAD( sub_7415() )))
            {
                CLEAR_PED_PRIMARY_LOOKAT( sub_7415() );
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( sub_7415(), 0 );
            }
            iParam0->_fU940 = 0;
        }
        else
        {
            sub_939( "rw", " waiting to reholster weapon ", 0 );
        }
        break;
        default: break;
    }
    if ((iParam0->_fU1080) AND ((CAMERA_ANIMATED_CURRENT_TIME() > ((CAMERA_ANIMATED_LENGTH( iParam0->_fU100, iParam0->_fU104 )) - sub_25293())) AND (IS_ANIMATED_CAMERA_PLAYING())))
    {
        iParam0->_fU1080 = 0;
        sub_25344();
    }
    return;
}

void sub_19028(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        if ((iParam0->_fU4 == 1) AND (iParam0->_fU320 == 1))
        {
            sub_19072( iParam0, 1 );
        }
        iParam0->_fU0 = 1;
    }
    else
    {
        sub_19072( iParam0, 0 );
        sub_19272( iParam0, 0 );
        if ((IS_PED_DEAD( sub_7415() )) == 0)
        {
            TASK_CLEAR_LOOK_AT( sub_7415() );
            if ((iParam0->_fU328 == 1) AND (iParam0->_fU324 == 1))
            {
                SET_PED_FORCED_TO_WALK( sub_7415(), 0 );
                iParam0->_fU328 = 0;
            }
        }
        iParam0->_fU8 = 0;
        iParam0->_fU0 = 0;
    }
    return;
}

void sub_19072(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        if (iParam0->_fU12 != nil)
        {
            if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
            {
                ENABLE_GLINT( iParam0->_fU12, 1 );
            }
            else
            {
                iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
            }
        }
        else
        {
            iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
        }
    }
    else if (iParam0->_fU12 != nil)
    {
        if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
        {
            ENABLE_GLINT( iParam0->_fU12, 0 );
        }
    }
    return;
}

void sub_19272(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        SET_INTERACTIONTEXT_TEXT( iParam0 + 32 );
        SET_INTERACTIONTEXT_BUTTON( iParam0->_fU48 );
        if ((iParam0->_fU72 == 0) AND ((iParam0->_fU64 == 1) AND (iParam0->_fU68 == 1)))
        {
            SET_INTERACTIONTEXT_VISIBLE( 0 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 0 );
            SET_INTERACTIONTEXT_AVAILABLE( 0 );
            iParam0->_fU56 = 0;
        }
        else
        {
            SET_INTERACTIONTEXT_VISIBLE( 1 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 1 );
            SET_INTERACTIONTEXT_AVAILABLE( 1 );
            iParam0->_fU56 = 1;
        }
        sub_19423( iParam0 );
        if (iParam0->_fU332 == 1)
        {
            SET_INTERACTIONTEXT_PULSE( 1 );
            SET_INTERACTIONTEXT_PULSE_PERIOD( iParam0->_fU336 );
        }
    }
    else
    {
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        SET_INTERACTIONTEXT_BUTTON_VISIBLE( 0 );
    }
    return;
}

void sub_19423(int iParam0)
{
    if (iParam0->_fU60 == 1)
    {
        SET_INTERACTIONTEXT_AVAILABLE( 0 );
        iParam0->_fU56 = 0;
    }
    else if (iParam0->_fU56 == 1)
    {
        if ((sub_19484( iParam0 )) == 0)
        {
            SET_INTERACTIONTEXT_AVAILABLE( 0 );
            iParam0->_fU56 = 0;
        }
    }
    else if ((sub_19484( iParam0 )) == 1)
    {
        SET_INTERACTIONTEXT_AVAILABLE( 1 );
        iParam0->_fU56 = 1;
    };;;
    return;
}

int sub_19484(int iParam0)
{
    if (((IS_PED_DEAD( sub_7415() )) == 0) AND ((IS_PLAYER_DEAD( sub_7437() )) == 0))
    {
        if (((IS_PED_RELOADING( sub_7415() )) == 1) || (((IS_PED_GETTING_UP( sub_7415() )) == 1) || (((IS_PED_PICKING_UP_PICKUP( sub_7415() )) == 1) || (((IS_PED_IN_COVER( sub_7415() )) == 1) || (((IS_PED_DUCKING( sub_7415() )) == 1) || (IS_PLAYER_SHOOTDODGING() == 1))))))
        {
            return 0;
        }
        if (iParam0->_fU304 == 0)
        {
            if ((IS_MONOLOGUE_PLAYING() == 1) || ((IS_ANY_SPEECH_PLAYING( sub_7415() )) == 1))
            {
                return 0;
            }
        }
        return 1;
    }
    return 0;
}

int sub_20020()
{
    float fVar2;

    fVar2 = 50.00000000;
    fVar2 = 6.00000000;
    if (IS_PED_IN_SPHERE_AREA_OF_ANY_ENEMY_PEDS( sub_7415(), "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( sub_7415() ), fVar2, 0 ))
    {
        return 1;
    }
    return 0;
}

int sub_20139(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    int iVar6;
    int iVar7;
    int iVar8;

    if ((IS_PED_DEAD( sub_7415() )) == 0)
    {
        if (iParam0->_fU0 == 1)
        {
            uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( sub_7415() )};
            iVar6 = 0;
            if (iParam0->_fU80 == 1)
            {
                if ((sub_18427( sub_7415(), iParam0->_fU116 )) == 1)
                {
                    if (iParam0->_fU300 == 1)
                    {
                        if (((IS_OBJECT_ON_SCREEN( iParam0->_fU312 )) == 1) AND ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1))
                        {
                            iVar6 = 1;
                        }
                    }
                    else
                    {
                        iVar6 = 1;
                    }
                }
            }
            else if ((iParam0->_fU308 == 1) AND (iParam0->_fU84 == 1))
            {
                if ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU312 ), 1 )) <= iParam0->_fU112)
                    {
                        if (iParam0->_fU300 == 1)
                        {
                            if ((IS_OBJECT_ON_SCREEN( iParam0->_fU312 )) == 1)
                            {
                                iVar6 = 1;
                            }
                        }
                        else
                        {
                            iVar6 = 1;
                        }
                    }
                }
            }
            else if (iParam0->_fU96 == 1)
            {
                if ((DOES_PED_EXIST( iParam0->_fU316 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU316 ), 1 )) <= iParam0->_fU112)
                    {
                        if (iParam0->_fU300 == 1)
                        {
                            if ((IS_PED_ON_SCREEN( iParam0->_fU316, 0 )) == 1)
                            {
                                iVar6 = 1;
                            }
                        }
                        else
                        {
                            iVar6 = 1;
                        }
                    }
                }
            }
            else if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, iParam0->_fU100, 1 )) <= iParam0->_fU112)
            {
                if (iParam0->_fU300 == 1)
                {
                    if (((IS_OBJECT_ON_SCREEN( iParam0->_fU312 )) == 1) AND ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1))
                    {
                        iVar6 = 1;
                    }
                }
                else
                {
                    iVar6 = 1;
                }
            };;;;
            iVar7 = 0;
            if (iParam0->_fU88 == 1)
            {
                if ((sub_18427( sub_7415(), iParam0->_fU216 )) == 1)
                {
                    iVar7 = 1;
                }
            }
            else if ((iParam0->_fU308 == 1) AND (iParam0->_fU92 == 1))
            {
                if ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU312 ), 1 )) <= iParam0->_fU212)
                    {
                        iVar7 = 1;
                    }
                }
            }
            else if (iParam0->_fU96 == 1)
            {
                if ((DOES_PED_EXIST( iParam0->_fU316 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU316 ), 1 )) <= iParam0->_fU212)
                    {
                        iVar7 = 1;
                    }
                }
            }
            else if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, iParam0->_fU200, 1 )) <= iParam0->_fU212)
            {
                iVar7 = 1;
            };;;;
            if (iVar6 == 1)
            {
                if ((iParam0->_fU4 != 3) AND (iParam0->_fU52 == 1))
                {
                    if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                    {
                        sub_19423( iParam0 );
                    }
                    iVar8 = 0;
                    if ((IS_WEAPON_PICKUP_VISIBLE() == 0) AND ((iParam0->_fU60 == 0) AND ((sub_19484( iParam0 )) == 1)))
                    {
                        SET_ACTION_CONSUMED( 0, 1 );
                        if (sub_21021() == 1)
                        {
                            iVar8 = 1;
                        }
                    }
                    if (iVar8 == 1)
                    {
                        if (iParam0->_fU332 == 0)
                        {
                            sub_19028( iParam0, 0 );
                            iParam0->_fU64 = 1;
                        }
                        if (iParam0->_fU68 == 1)
                        {
                            iParam0->_fU72 = 0;
                        }
                        return 1;
                    }
                    else if (iParam0->_fU8 != 2)
                    {
                        if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                        {
                            sub_19072( iParam0, 0 );
                            sub_19272( iParam0, 1 );
                        }
                        else if (iParam0->_fU320 == 1)
                        {
                            sub_19072( iParam0, 1 );
                        }
                        iParam0->_fU8 = 2;
                    }
                    if ((iParam0->_fU328 == 0) AND (iParam0->_fU324 == 1))
                    {
                        if ((IS_PED_DEAD( sub_7415() )) == 0)
                        {
                            SET_PED_FORCED_TO_WALK( sub_7415(), 1 );
                            iParam0->_fU328 = 1;
                        }
                    }
                }
            }
            else if (iVar7 == 1)
            {
                if (iParam0->_fU8 != 1)
                {
                    if ((iParam0->_fU4 != 3) AND (iParam0->_fU320 == 1))
                    {
                        sub_19072( iParam0, 1 );
                    }
                    if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                    {
                        sub_19272( iParam0, 0 );
                    }
                    if (iParam0->_fU96 == 1)
                    {
                        if (((IS_PED_DEAD( sub_7415() )) == 0) AND ((((IS_PED_DEAD( iParam0->_fU316 )) == 1) || ((IS_PED_DEAD( iParam0->_fU316 )) == 0)) AND ((DOES_PED_EXIST( iParam0->_fU316 )) == 1)))
                        {
                            TASK_LOOK_AT_PED( sub_7415(), iParam0->_fU316, -1, 0 );
                        }
                    }
                    else if ((IS_PED_DEAD( sub_7415() )) == 0)
                    {
                        TASK_LOOK_AT_COORD( sub_7415(), iParam0->_fU100, -1, 0 );
                    }
                    iParam0->_fU340 = 1;
                    if ((iParam0->_fU72 == 0) AND ((iParam0->_fU68 == 1) AND ((iParam0->_fU64 == 1) AND (iParam0->_fU8 == 2))))
                    {
                        iParam0->_fU72 = 1;
                    }
                    iParam0->_fU8 = 1;
                }
                if ((iParam0->_fU328 == 0) AND (iParam0->_fU324 == 1))
                {
                    if ((IS_PED_DEAD( sub_7415() )) == 0)
                    {
                        SET_PED_FORCED_TO_WALK( sub_7415(), 1 );
                        iParam0->_fU328 = 1;
                    }
                }
            }
            else if ((iParam0->_fU4 == 1) || (iParam0->_fU4 == 3))
            {
                ;
            }
            else if (iParam0->_fU8 != 0)
            {
                if (iParam0->_fU320 == 1)
                {
                    sub_19072( iParam0, 0 );
                }
            }
            if (iParam0->_fU8 == 2)
            {
                if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                {
                    sub_19272( iParam0, 0 );
                }
            }
            if (iParam0->_fU340)
            {
                if ((IS_PED_DEAD( sub_7415() )) == 0)
                {
                    TASK_CLEAR_LOOK_AT( sub_7415() );
                    iParam0->_fU340 = 0;
                }
            }
            if ((iParam0->_fU328 == 1) AND (iParam0->_fU324 == 1))
            {
                if ((IS_PED_DEAD( sub_7415() )) == 0)
                {
                    SET_PED_FORCED_TO_WALK( sub_7415(), 0 );
                    iParam0->_fU328 = 0;
                }
            }
            if (iParam0->_fU332 == 1)
            {
                sub_19272( iParam0, 0 );
            }
            iParam0->_fU8 = 0;;;
        }
    }
    return 0;
}

int sub_21021()
{
    if ((IS_CONTROL_JUST_PRESSED( 0, 30 )) == 1)
    {
        return 1;
    }
    return 0;
}

int sub_21991(unknown uParam0)
{
    int iVar3;

    if ((GET_DOES_WEAPON_EXIST( uParam0 )) == 1)
    {
        iVar3 = GET_WEAPON_TYPE( uParam0 );
        if ((iVar3 == -2075384407) || ((iVar3 == 10648147) || ((iVar3 == 1224272620) || ((iVar3 == 1478009203) || ((iVar3 == 1964270085) || ((iVar3 == -110877124) || ((iVar3 == 427207702) || ((iVar3 == 319712764) || ((iVar3 == 514118749) || ((iVar3 == -184942895) || ((iVar3 == -168327769) || ((iVar3 == 434544317) || ((iVar3 == -1659006841) || ((iVar3 == 930042831) || ((iVar3 == 1001413062) || ((iVar3 == 377623895) || ((iVar3 == -1312131151) || ((iVar3 == -1787162676) || ((iVar3 == 724901397) || ((iVar3 == 57534114) || ((iVar3 == 840671040) || ((iVar3 == 1308526797) || ((iVar3 == -1074756423) || ((iVar3 == 1992962408) || (iVar3 == -1013714740)))))))))))))))))))))))))
        {
            return 1;
        }
    }
    return 0;
}

void sub_22277(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    iVar3 = 1;
    if (NOT (IS_PED_DEAD( sub_7415() )))
    {
        if (GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HOLSTER( sub_7415(), 0 ) ))
        {
            iParam0->_fU944 = GET_WEAPON_FROM_HOLSTER( sub_7415(), 0 );
        }
        else if (GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HOLSTER( sub_7415(), 1 ) ))
        {
            iParam0->_fU944 = GET_WEAPON_FROM_HOLSTER( sub_7415(), 1 );
        }
        SELECT_WEAPON_TO_HAND( sub_7415(), iParam0->_fU944, 0, iVar3 );
    }
    return;
}

void sub_22441()
{
    if (NOT (IS_PED_DEAD( sub_7415() )))
    {
        SELECT_WEAPON_TO_HAND( sub_7415(), 0, 0, 0 );
        SELECT_WEAPON_TO_HAND( sub_7415(), 0, 1, 0 );
    }
    return;
}

int sub_22612(int iParam0)
{
    if ((iParam0->_fU1072 == 1) || ((GET_WEAPON_FROM_HAND( sub_7415(), 0, 0 )) != iParam0->_fU944))
    {
        return 1;
    }
    return 0;
}

int sub_22702(unknown uParam0)
{
    return 1;
    return 0;
}

void sub_22928(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

int sub_22991()
{
    return 1;
    return 0;
}

int sub_24370(int iParam0)
{
    if (sub_22702( iParam0 ))
    {
        if ((GET_SCRIPT_MOVIE_FRAMES_REMAINING( 2 )) < ((iParam0->_fU1068 / 1000) * 30.00000000))
        {
            return 1;
        }
    }
    else if ((IS_PAUSE_MENU_ACTIVE() == 0) AND ((IS_SCRIPT_MOVIE_PLAYING( 2 )) == 0))
    {
        return 1;
    }
    return 0;
}

int sub_25026(int iParam0)
{
    if ((iParam0->_fU1072) || ((GET_WEAPON_FROM_HAND( sub_7415(), 0, 0 )) == iParam0->_fU944))
    {
        return 1;
    }
    return 0;
}

int sub_25293()
{
    return 300;
    return 1500;
}

void sub_25344()
{
    int iVar2;

    iVar2 = 1500;
    iVar2 = 500;
    CAMERA_FREEZE_FRAME( 1, iVar2, 1500, 0 );
    if (NOT (IS_PED_DEAD( sub_7415() )))
    {
        SET_PLAYER_CONTROL( sub_7437(), 1, 0 );
    }
    return;
}

int sub_25445(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20)
{
    if ((DOES_PED_EXIST( sub_7415() )) == 1)
    {
        if ((IS_PED_DEAD( sub_7415() )) == 0)
        {
            if ((IS_PED_IN_GAMEPLAY_HELPER_BOX( sub_7415(), ref uParam0._fU0 )) == 1)
            {
                sub_25520( sub_7415() );
                return 1;
            }
        }
    }
    return 0;
}

void sub_25520(unknown uParam0)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        STOP_PED_SPEAKING( uParam0, 1 );
        SET_PED_HEALTH( uParam0, 0, 0 );
        SET_PED_CORPSE( uParam0, 0 );
    }
    return;
}

void sub_25652()
{
    sub_25662();
    if (DOES_PED_EXIST( l_U966[0] ))
    {
        sub_27003();
        if ((sub_27093( ref l_U966 )) == 0)
        {
            sub_27777();
        }
    }
    return;
}

void sub_25662()
{
    if (NOT l_U1649)
    {
        if (NOT sub_25683())
        {
            if (sub_25755( l_U454 ))
            {
                sub_25807( "SNYC_BTRT", ref l_U1532 );
                l_U1649 = 1;
            }
        }
    }
    return;
}

void sub_25683()
{
    int Result;
    int I;

    Result = 0;
    for ( I = 0; I <= 3; I++ )
    {
        Result = (IS_SCRIPTED_CONVERSATION_ONGOING( I )) || (Result);
    }
    return Result;
}

void sub_25755(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20)
{
    return sub_18427( sub_7415(), uParam0 );
}

void sub_25807(unknown uParam0, unknown uParam1)
{
    sub_939( "SBA", "P_SPEECH_PLAY_MAX_MONOLOGUE", "***" );
    if (sub_18124())
    {
        sub_25876( uParam1 );
        sub_25956( 0, sub_7415(), "MAX", uParam1, 2, 0 );
        sub_25956( 1, sub_7415(), "MAX", uParam1, 2, 0 );
        sub_26181( uParam0, uParam1, 8, 1 );
    }
    return;
}

void sub_25876(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

void sub_25956(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

void sub_26181(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return sub_26205( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

void sub_26205(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return sub_26260( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

int sub_26260(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT (sub_26295( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
    sub_26789( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

int sub_26295(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

void sub_26789(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

void sub_27003()
{
    switch (l_U1623)
    {
        case 0:
        if (((sub_27093( ref l_U966 )) + (sub_27093( ref l_U1082 ))) == 0)
        {
            if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
            {
                sub_14879( ref l_U1625, 800, 1, 0 );
                sub_15015( ref l_U1625 );
                l_U1623++;
            }
        }
        break;
        case 1:
        if (sub_15135( ref l_U1625 ))
        {
            sub_25807( "SNYC_MKLGC", ref l_U1612 );
            l_U1623++;
        }
        break;
        case 2:
        if (l_U2240 >= 9)
        {
            sub_14879( ref l_U1625, 20000, 1, 0 );
            sub_15015( ref l_U1625 );
            l_U1623++;
        }
        break;
        case 3:
        if (NOT sub_25683())
        {
            if ((NOT (sub_25755( l_U811 ))) AND (sub_25755( l_U538 )))
            {
                if (sub_15135( ref l_U1625 ))
                {
                    sub_25807( "SNYC_PECK", ref l_U1612 );
                    sub_14879( ref l_U1625, 20000, 1, 0 );
                    sub_15015( ref l_U1625 );
                    l_U1623++;
                }
            }
        }
        break;
        case 4:
        if (NOT sub_25683())
        {
            if (sub_25755( l_U538 ))
            {
                if (sub_15135( ref l_U1625 ))
                {
                    sub_25807( "SNYC_PECL", ref l_U1612 );
                    sub_14879( ref l_U1625, 20000, 1, 0 );
                    sub_15015( ref l_U1625 );
                    l_U1623++;
                }
            }
        }
        break;
        case 5:
        if (NOT sub_25683())
        {
            if (sub_25755( l_U538 ))
            {
                if (sub_15135( ref l_U1625 ))
                {
                    sub_25807( "SNYC_THSC", ref l_U1612 );
                    sub_14879( ref l_U1625, 20000, 1, 0 );
                    sub_15015( ref l_U1625 );
                    l_U1623++;
                }
            }
        }
        break;
        case 6:
        if (NOT sub_25683())
        {
            if (sub_25755( l_U538 ))
            {
                if (sub_15135( ref l_U1625 ))
                {
                    sub_25807( "SNYC_GTTFR", ref l_U1612 );
                    l_U1623++;
                }
            }
        }
        break;
        case 7: break;
    }
    return;
}

void sub_27093(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result++;
        }
    }
    return Result;
}

void sub_27777()
{
    switch (l_U1643)
    {
        case 0:
        l_U1644[0] = "SNYC_BTDA";
        l_U1644[1] = "SNYC_BTDB";
        l_U1644[2] = "SNYC_BTDC";
        sub_939( "SBA", "P_HANDLE_MAX_APT_MONOLOGUE: Setup done; going to eMAM_LeftApt", 0 );
        l_U1643 = 1;
        break;
        case 1:
        if (sub_25755( l_U475 ))
        {
            sub_939( "SBA", "P_HANDLE_MAX_APT_MONOLOGUE: Max leaving; going to eMAM_EnterApt", 0 );
            l_U1643 = 2;
        }
        break;
        case 2:
        if (sub_25755( l_U433 ))
        {
            sub_939( "SBA", "P_HANDLE_MAX_APT_MONOLOGUE: Max entering; going to eMAM_PlayMono", 0 );
            l_U1643 = 3;
        }
        break;
        case 3:
        if (NOT sub_25683())
        {
            sub_939( "SBA", "P_HANDLE_MAX_APT_MONOLOGUE: eMAM_PlayMono - playing monologue number:", 0 );
            sub_28297( l_U1648 );
            sub_25807( l_U1644[l_U1648], ref l_U1582 );
            l_U1648++;
            if (l_U1648 > (l_U1644 - 1))
            {
                sub_939( "SBA", "P_HANDLE_MAX_APT_MONOLOGUE: out of speeches, going to eMAM_Done", 0 );
                l_U1643 = 4;
            }
            else
            {
                sub_939( "SBA", "P_HANDLE_MAX_APT_MONOLOGUE: Returning to eMAM_LeftApt", 0 );
                l_U1643 = 1;
            }
        }
        else if (sub_25755( l_U475 ))
        {
            sub_939( "SBA", "P_HANDLE_MAX_APT_MONOLOGUE: Max left so we didn't play monologue; returning to eMAM_LeftApt", 0 );
            l_U1643 = 1;
        }
        break;
        case 4: break;
    }
    return;
}

void sub_28297(unknown uParam0)
{
    return;
}

void sub_28688()
{
    if (sub_18124())
    {
        if ((NOT (GET_IS_PED_FORCED_TO_WALK( sub_7415() ))) AND (sub_25755( l_U832 )))
        {
            sub_939( "SBA", "P_HANDLE_FORCE_WALK_BREWER_APT - Force walk enabled", 0 );
            SET_PED_FORCED_TO_WALK( sub_7415(), 1 );
        }
        else if ((GET_IS_PED_FORCED_TO_WALK( sub_7415() )) AND (NOT (sub_25755( l_U832 ))))
        {
            sub_939( "SBA", "P_HANDLE_FORCE_WALK_BREWER_APT - Force walk disabled", 0 );
            SET_PED_FORCED_TO_WALK( sub_7415(), 0 );
        }
    }
    return;
}

void sub_29220(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (sub_18139( (uParam0^)[I] ))
        {
            CLEAR_PED_TASKS_IMMEDIATELY( (uParam0^)[I] );
        }
    }
    return;
}

void sub_29751(unknown uParam0, unknown uParam1)
{
    sub_939( "BSW", "SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR start...", 0 );
    SET_WEATHER_TRANSITION_IMMEDIATE( uParam1 );
    switch (uParam0)
    {
        case 0:
        case 1:
        case 20:
        case 30:
        SET_TIME_OF_DAY( 12, 0 );
        FREEZE_TIME_OF_DAY( 12, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
        break;
        case 7:
        SET_TIME_OF_DAY( 18, 0 );
        FREEZE_TIME_OF_DAY( 18, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
        break;
        case 2:
        case 3:
        case 4:
        case 5:
        case 6:
        case 8:
        case 21:
        case 22:
        case 24:
        SET_TIME_OF_DAY( 18, 0 );
        FREEZE_TIME_OF_DAY( 18, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "SNOW_LIGHT" );
        break;
        default:
        SET_TIME_OF_DAY( 12, 0 );
        FREEZE_TIME_OF_DAY( 12, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
        break;
    }
    return;
}

void sub_30120()
{
    sub_939( "SWN", "P_CREATE_INITIAL_PLACEMENTS", "###" );
    sub_30177();
    sub_17396( l_U1438 );
    l_U1438 = sub_30713( -343443786, -371.63500000, -22.70000000, 3.57000000, 1.57000000, 0.00000000, -1.00000000, 0, 0, 0, 1119092736 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1438, ref g_U3497 );
    sub_17396( l_U1439 );
    l_U1439 = sub_30713( -1138829373, -367.23000000, -22.39100000, 3.02200000, 1.57000000, -1.20000000, 0.00000000, 0, 0, 0, 1119092736 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1439, ref g_U3497 );
    sub_17396( l_U1440[0] );
    l_U1440[0] = sub_30713( -4072149, -371.81000000, -22.33200000, 3.55500000, 0, 0, 0.70000000, 0, 0, 0, 1119092736 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1440[0], ref g_U3497 );
    sub_17396( l_U1440[1] );
    l_U1440[1] = sub_30713( -4072149, -371.21600000, -15.47000000, 3.96100000, 0, 0, 2.20000000, 0, 0, 0, 1119092736 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1440[1], ref g_U3497 );
    return;
}

void sub_30177()
{
    sub_939( "CO", "P_CREATE_S_NY2_GG_M5_01", 0 );
    sub_30288( ref g_U665, g_U773, 1876995138, -1454434416, -370.60000000, -27.82000000, 2.67000000, 1.50000000, 0.00000000, 2.00000000, "RM_Aprt_03" );
    sub_30417( ref g_U665 );
    return;
}

void sub_30288(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    if (NOT IS_ARCADE_MODE_ACTIVE())
    {
        iParam0->_fU4 = uParam1;
        iParam0->_fU8 = uParam2;
        iParam0->_fU12 = uParam3;
        iParam0->_fU16 = {uParam4};
        iParam0->_fU28 = {uParam7};
        StrCopy( ref iParam0->_fU40, uParam10, 32 );
    }
    else
    {
        sub_939( "CO", "NO GOLDEN GUNS FOR ARCADE", 0 );
    }
    return;
}

void sub_30417(int iParam0)
{
    sub_939( "CO", "P_CreateCollectible", 0 );
    if (NOT IS_ARCADE_MODE_ACTIVE())
    {
        if ((sub_30478( iParam0->_fU12 )) == 1)
        {
            sub_939( "CO", "HAS BEEN COLLECTED.", 0 );
        }
        else
        {
            sub_939( "CO", "has never been collected.", 0 );
        }
        if ((sub_30478( iParam0->_fU12 )) == 0)
        {
            sub_17396( iParam0->_fU0 );
            iParam0->_fU0 = sub_30713( iParam0->_fU8, iParam0->_fU16, iParam0->_fU28, 1, 0, 0, 1119092736 );
            if (NOT (IS_STRING_NULL( iParam0 + 40 )))
            {
                if ((DOES_PLACEMENT_EXIST( iParam0->_fU0 )) == 1)
                {
                    sub_939( "CO", "Added collectible to interior", 0 );
                    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( iParam0->_fU0, iParam0 + 40 );
                }
            }
        }
    }
    else
    {
        sub_939( "CO", "NO GOLDEN GUNS FOR ARCADE", 0 );
    }
    return;
}

int sub_30478(unknown uParam0)
{
    unknown uVar3;
    float fVar4;

    if (IS_COLLECTABLE_ENABLED() == 0)
    {
        return 1;
    }
    uVar3 = uParam0;
    fVar4 = STAT_HASH_GET_FLOAT( uVar3 );
    if (ARE_SP_STATS_LOADED() == 1)
    {
        if ((STAT_HASH_EXISTS( uVar3 )) == 1)
        {
            if (fVar4 > 0.00000000)
            {
                return 1;
            }
        }
    }
    return 0;
}

void sub_30713(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, int iParam8, unknown uParam9, unknown uParam10)
{
    unknown Result;

    Result = CREATE_PLACEMENT_ROTATE( uParam0, uParam1, uParam4, uParam7, 0, uParam9, uParam10 );
    if (iParam8 == 1)
    {
        while ((DOES_PLACEMENT_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    return Result;
}

void sub_31305()
{
    sub_939( "SBA", "P_CREATE_MAX_BADGE", 0 );
    sub_17568( l_U1676 );
    l_U1676 = sub_31380( -1725947354, l_U1764, 0, 0, 122, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U1676 ))
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1676, ref g_U3497 );
        FREEZE_OBJECT_POSITION( l_U1676, 1 );
        sub_31678( ref l_U1678, 1, l_U1764, l_U1676, 1, 0, 1.50000000, 3.00000000, 1, 0 );
        sub_32512( ref l_U1678, 30, "POI_NYC_BADGE" );
        sub_32673( ref l_U1678, 1 );
        sub_32705( ref l_U1678, 0 );
        sub_32737( ref l_U1678, 0 );
    }
    return;
}

void sub_31380(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
        sub_1331( uParam0, 1 );
    }
    Result = CREATE_OBJECT_NO_OFFSET( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

void sub_31678(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;

    sub_31693( iParam0, uParam10 );
    if ((DOES_OBJECT_EXIST( uParam5 )) == 1)
    {
        uVar14 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( uParam5 )};
        iParam0->_fU4 = uParam1;
        iParam0->_fU308 = uParam7;
        if (iParam0->_fU308 == 0)
        {
            iParam0->_fU100 = {uVar14};
            iParam0->_fU200 = {uVar14};
        }
        iParam0->_fU112 = uParam8;
        iParam0->_fU212 = uParam9;
        iParam0->_fU300 = uParam6;
        iParam0->_fU312 = uParam5;
        iParam0->_fU320 = uParam11;
        iParam0->_fU20 = {uParam2};
        sub_32132( iParam0 );
    }
    else
    {
        SCRIPT_ASSERT( "[SP]### WARNING!!! (P_CreateObjectPOIStruct): Object doesn't exist! ###", 0 );
    }
    return;
}

void sub_31693(int iParam0, unknown uParam1)
{
    iParam0->_fU0 = uParam1;
    iParam0->_fU4 = 0;
    iParam0->_fU8 = 0;
    iParam0->_fU12 = nil;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU52 = 1;
    iParam0->_fU56 = 1;
    iParam0->_fU60 = 0;
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = 0;
    iParam0->_fU76 = 0;
    iParam0->_fU80 = 0;
    iParam0->_fU84 = 0;
    iParam0->_fU100 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU112 = 0.00000000;
    iParam0->_fU88 = 0;
    iParam0->_fU92 = 0;
    iParam0->_fU96 = 0;
    iParam0->_fU200 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU212 = 0.00000000;
    iParam0->_fU300 = 0;
    iParam0->_fU304 = 1;
    iParam0->_fU308 = 0;
    iParam0->_fU324 = 1;
    iParam0->_fU328 = 0;
    iParam0->_fU340 = 0;
    iParam0->_fU336 = 0.20000000;
    return;
}

void sub_32132(int iParam0)
{
    if (iParam0->_fU12 != nil)
    {
        if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
        {
            REMOVE_GLINT( iParam0->_fU12 );
        }
    }
    iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
    sub_32211( iParam0 );
    return;
}

void sub_32211(int iParam0)
{
    if (iParam0->_fU0 == 1)
    {
        if (iParam0->_fU320 == 1)
        {
            if ((iParam0->_fU8 > 0) AND (iParam0->_fU4 == 0))
            {
                sub_19072( iParam0, 1 );
            }
            else if ((iParam0->_fU8 < 2) AND (iParam0->_fU4 == 1))
            {
                sub_19072( iParam0, 1 );
            }
            else if ((iParam0->_fU8 == 1) AND (iParam0->_fU4 == 2))
            {
                sub_19072( iParam0, 1 );
            }
            else
            {
                sub_19072( iParam0, 0 );
            };;;
        }
        else
        {
            sub_19072( iParam0, 0 );
        }
    }
    else
    {
        sub_19072( iParam0, 0 );
    }
    return;
}

void sub_32512(int iParam0, unknown uParam1, unknown uParam2)
{
    StrCopy( ref iParam0->_fU32, uParam2, 16 );
    iParam0->_fU48 = uParam1;
    sub_32543( iParam0 );
    return;
}

void sub_32543(int iParam0)
{
    if ((iParam0->_fU8 == 2) AND (iParam0->_fU0 == 1))
    {
        if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
        {
            SET_INTERACTIONTEXT_BUTTON( iParam0->_fU48 );
            SET_INTERACTIONTEXT_TEXT( iParam0 + 32 );
            SET_INTERACTIONTEXT_VISIBLE( 1 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 1 );
            SET_INTERACTIONTEXT_AVAILABLE( 1 );
            iParam0->_fU56 = 1;
        }
    }
    return;
}

void sub_32673(int iParam0, unknown uParam1)
{
    iParam0->_fU68 = uParam1;
    return;
}

void sub_32705(int iParam0, unknown uParam1)
{
    iParam0->_fU324 = uParam1;
    return;
}

void sub_32737(int iParam0, int iParam1)
{
    if (iParam1 == 0)
    {
        iParam0->_fU60 = 1;
    }
    else
    {
        iParam0->_fU60 = 0;
    }
    sub_19423( iParam0 );
    return;
}

void sub_32800()
{
    int I;

    sub_939( "SBA", "P_SETUP_THUGS_1ST_WAVE", "***" );
    for ( I = 0; I < 3; I++ )
    {
        sub_32907( ref l_U926[I], ref l_U966[I], -691403429, "AIT_EXPERT", 0, 25000, 2, 0, 25000 );
        if (sub_18139( l_U966[I] ))
        {
            if (I == 0)
            {
                sub_8742( l_U966[I] );
                SET_ROOM_FOR_PED_BY_NAME( l_U966[I], ref g_U3529 );
            }
            SET_PED_NAME_DEBUG( l_U966[I], "piThugs1stWave" );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U966[I], 1 );
            SET_PED_CAN_PLAY_LOCO_FLAVOR_STARTS( l_U966[I], 0 );
            SET_PED_COMBAT_ATTRIBUTES( l_U966[I], 16, 0 );
            SET_PED_NO_RAGDOLL_TO_BULLET_UNLESS_DEAD( l_U966[I], 1 );
            SET_PED_ALERTNESS( l_U966[I], 2 );
            SET_PED_SEEING_RANGE( l_U966[I], 3.00000000, 75 );
            SET_PED_HEARING_RANGE( l_U966[I], 3.00000000 );
            SET_PED_FLAG_FORCE_BLINDFIRE_IN_COVER( l_U966[I], 0 );
            SET_PED_FLAG_FIRE_UNTIL_EMPTY_IN_COVER( l_U966[I], 1 );
            SET_PED_CAN_PEEK_IN_COVER( l_U966[I], 0 );
            if (I == 2)
            {
                sub_34096( ref l_U966[I], 0 );
                SET_PED_COMBAT_ATTRIBUTES( l_U966[I], 1, 0 );
            }
        }
    }
    sub_34172( ref l_U966 );
    return;
}

void sub_32907(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, int iParam7, unknown uParam8)
{
    unknown uVar11;

    sub_17252( (uParam1^) );
    (uParam1^) = sub_32927( uParam0 );
    if (sub_18139( (uParam1^) ))
    {
        uVar11 = sub_9666( (uParam1^), uParam2, uParam5, 0, 1 );
        if (iParam7 != 0)
        {
            sub_9034( (uParam1^), iParam7, 0, uParam8, 0 );
        }
        SET_PED_AI_TEMPLATE( (uParam1^), uParam3 );
        SET_PED_ALERTNESS( (uParam1^), uParam6 );
        switch (uParam4)
        {
            case 0: break;
            case 1:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 13, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 13, 1 );
            break;
            case 2:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 14, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 14, 1 );
            break;
            case 3:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 12, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 12, 1 );
            break;
        }
    }
    return;
}

void sub_32927(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
        sub_1331( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
    sub_33406( iParam0->_fU40 );
    sub_33486( iParam0->_fU40 );
    return iParam0->_fU40;
}

void sub_33406(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

void sub_33486(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

void sub_34096(unknown uParam0, unknown uParam1)
{
    if (sub_18139( (uParam0^) ))
    {
        SET_PED_COMBAT_MOVEMENT( (uParam0^), uParam1 );
    }
    return;
}

void sub_34172(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_34203( (uParam0^)[I] );
    }
    return;
}

void sub_34203(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 1 );
        SET_PED_VISIBLE( uParam0, 0 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 0 );
        FREEZE_PED_POSITION( uParam0, 1 );
        SET_PED_COLLISION( uParam0, 0 );
        SET_PED_PROOFS( uParam0, 1, 1, 1, 1, 1 );
    }
    return;
}

void sub_34327()
{
    int I;
    unknown uVar3;

    sub_939( "SBA", "P_SETUP_THUGS_2ND_WAVE", "***" );
    l_U1221[0] = {-359.92820000, -18.47825000, 6.39214100};
    l_U1221[1] = {-353.80500000, -19.50000000, 6.35340600};
    l_U1221[2] = {-350.12730000, -19.50000000, 6.39939300};
    l_U1221[3] = {-347.91630000, -19.50000000, 6.64563000};
    l_U1221[4] = {-345.25380000, -19.50000000, 6.48472900};
    for ( I = 0; I <= 4; I++ )
    {
        sub_32907( ref l_U1016[I], ref l_U1082[I], -691403429, "AIT_EXPERT", 1, 25000, 2, 0, 25000 );
        if (sub_18139( l_U1082[I] ))
        {
            sub_8742( l_U1082[I] );
            SET_PED_COMBAT_MOVEMENT( l_U1082[I], 0 );
            SET_PED_COMBAT_ATTRIBUTES( l_U1082[I], 1, 0 );
            SET_PED_COMBAT_ATTRIBUTES( l_U1082[I], 8192, 0 );
            SET_PED_COMBAT_ATTRIBUTES( l_U1082[I], 262144, 1 );
            SET_PED_FLAG_BLOCK_GORE_REACTION( l_U1082[I], 1 );
            SET_PED_FLAG_BLOCK_WOUNDED_MOVEMENT( l_U1082[I], 1 );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1082[I], 1 );
            SET_BULLET_CAM_PREF( l_U1082[I], "ALL_LMS_01", "ALL_02_NEAR_FAILSAFE", "ALL_02_NEAR_FAILSAFE", "", 0, 0, 0, 0, 0, 0, 0, 0 );
            SET_PED_ALERTNESS( l_U1082[I], 3 );
            uVar3 = GET_WEAPON_FROM_HAND( l_U1082[I], 0, 0 );
            if (GET_DOES_WEAPON_EXIST( uVar3 ))
            {
                TOGGLE_WEAPON_ATTACHMENT( uVar3, 13, 1 );
                SET_WEAPON_CHANCE_TO_FIRE_BLANKS( uVar3, 50 );
            }
            SET_PED_DROPS_WEAPONS_WHEN_DEAD( l_U1082[I], 0 );
            sub_34203( l_U1082[I] );
        }
    }
    sub_34954( ref l_U1082, "LASER_SHOOTERS_" );
    sub_35058( ref l_U1082, l_U924, 1 );
    return;
}

void sub_34954(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

void sub_35058(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_35094( ref (uParam0^)[I], uParam1, uParam2 );
    }
    return;
}

void sub_35094(unknown uParam0, unknown uParam1, unknown uParam2)
{
    if (sub_18139( (uParam0^) ))
    {
        RESET_PED_TETHERING( (uParam0^) );
        sub_35133( ref uParam1, (uParam0^), uParam2 );
    }
    return;
}

void sub_35133(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_TETHERING_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_TETHERING_OPTION( uParam1, uParam2 );
    }
    return;
}

void sub_35239()
{
    sub_939( "SBA", "MAKE_PASSOS_0402B_Out", "***" );
    sub_1331( g_U3091, 1 );
    sub_2220( ref l_U1468, l_U1481, l_U1484, -1756913695, 26, 6, 0, 0, 0 );
    sub_17252( l_U1467 );
    l_U1467 = sub_32927( ref l_U1468 );
    sub_35359( ref l_U1467 );
    SET_ROOM_FOR_PED_BY_NAME( l_U1467, ref g_U3529 );
    SET_PED_DEFAULT_AIM_AT_COORD( l_U1467, -360.20000000, -8.82000000, 4.20000000 );
    sub_9666( l_U1467, -862236369, 25000, 0, 0 );
    SET_PED_INVINCIBLE( l_U1467, 1 );
    SET_BULLET_CAM_PREF( l_U1467, "ALL_LMS_01", "ALL_02_NEAR_FAILSAFE", "ALL_02_NEAR_FAILSAFE", "", 0, 0, 0, 0, 0, 0, 0, 0 );
    return;
}

void sub_35359(unknown uParam0)
{
    sub_939( "SBA", "P_SETUP_PASSOS_GENERAL_ATTRIBUTES", "***" );
    if (sub_18139( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), 1 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^), 1 );
        SET_PED_VALIDATE_BULLET_CAM_HIT( (uParam0^), 0 );
        SET_AI_SHOULD_ALWAYS_MISS_PED( (uParam0^), 1 );
        SET_CAN_AI_KICK_THROUGH_CORPSES( (uParam0^), 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_AI_TEMPLATE( (uParam0^), "AIT_NORMAL" );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( (uParam0^), 1 );
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^), 1 );
        SET_PED_GORE( (uParam0^), 0 );
        SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( (uParam0^), 0 );
        SET_PED_PROOFS( (uParam0^), 0, 1, 1, 1, 1 );
        SET_PED_ALLOWED_TO_SURRENDER( (uParam0^), 0 );
        SET_PED_CAN_AVOID_DEATH_ZONES( (uParam0^), 0 );
        SET_PED_STAND_GROUND_ON_PLAYER_IMPACT( (uParam0^), 1 );
        SET_PED_CAN_PUSH_PLAYER( (uParam0^), 1 );
        SET_PED_RESIST_TO_OBJECT_COLLISION( (uParam0^), 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_CAN_BE_TARGETTED( (uParam0^), 0 );
        SET_PED_CONSUMING_AMMO( (uParam0^), 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^), 1 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^), 1 );
    }
    return;
}

void sub_35854()
{
    sub_939( "SBA", "P_SETUP_THUG_AND_CIV", "***" );
    sub_17252( l_U1437 );
    l_U1437 = sub_32927( ref l_U1424 );
    if (sub_18139( l_U1437 ))
    {
        SET_ROOM_FOR_PED_BY_NAME( l_U1437, ref g_U3529 );
        FREEZE_PED_POSITION( l_U1437, 1 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1437, 1 );
        SET_PED_CAN_BE_TARGETTED( l_U1437, 0 );
        SET_PED_AIM_LOCKONABLE( l_U1437, 0 );
        SET_PED_INVINCIBLE( l_U1437, 1 );
        SET_PED_COLLISION( l_U1437, 0 );
        SET_PED_VISIBLE( l_U1437, 0 );
        SET_PED_CAN_BE_MELEED( l_U1437, 0 );
        SET_PED_SEEING_RANGE( l_U1437, 0, 75 );
        SET_PED_HEARING_RANGE( l_U1437, 0 );
        SET_PED_ID_RANGE( l_U1437, 0 );
        sub_36114( l_U1437, 1 );
    }
    sub_1705( "LEVEL_S_NYBAR_CP_03", 0, 0 );
    return;
}

void sub_36114(unknown uParam0, unknown uParam1)
{
    sub_939( "SBA", "FREEZE_PED_PROCESSING", "***" );
    sub_36167( uParam1 );
    if (sub_18139( uParam0 ))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, uParam1 );
    }
    return;
}

void sub_36167(boolean bParam0)
{
    if (bParam0)
    {
        ;
    }
    return;
}

void sub_36265()
{
    if ((ISEQ_QUERY_STATE( 439675427, 3 )) == 0)
    {
        sub_939( "bsw", "Starting S_NYBAR_04_02_BLENDOUT via script", "***" );
        sub_1129( 439675427, 1 );
        if (sub_18124())
        {
            ISEQ_REGISTER_ENTITY( 439675427, "max", sub_7415(), 0 );
        }
        if (sub_18139( l_U1467 ))
        {
            ISEQ_REGISTER_ENTITY( 439675427, "passos", l_U1467, 0 );
        }
        if (sub_18139( l_U966[0] ))
        {
            ISEQ_REGISTER_ENTITY( 439675427, "gmed", l_U966[0], 0 );
        }
        if (sub_18139( l_U966[1] ))
        {
            ISEQ_REGISTER_ENTITY( 439675427, "gmed2", l_U966[1], 0 );
        }
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( -97.90666000, 0, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( -3.00594600, 0, 0 );
        ISEQ_START( 439675427 );
    }
    return;
}

void sub_36599(unknown uParam0, unknown uParam1)
{
    sub_939( "SBA", "P_SET_PED_ALL_WEAPON_VISIBILITY", 0 );
    sub_36167( uParam1 );
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        sub_939( "SBA", "P_SET_PED_ALL_WEAPON_VISIBILITY: WEAPONHAND_LEFT", 0 );
        sub_28297( GET_WEAPON_FROM_HAND( uParam0, 1, 0 ) );
        if ((GET_WEAPON_FROM_HAND( uParam0, 1, 0 )) != 0)
        {
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( uParam0, 1, 0 ), uParam1 );
        }
        sub_939( "SBA", "P_SET_PED_ALL_WEAPON_VISIBILITY: WEAPONHAND_RIGHT", 0 );
        sub_28297( GET_WEAPON_FROM_HAND( uParam0, 0, 0 ) );
        if ((GET_WEAPON_FROM_HAND( uParam0, 0, 0 )) != 0)
        {
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( uParam0, 0, 0 ), uParam1 );
        }
        sub_939( "SBA", "P_SET_PED_ALL_WEAPON_VISIBILITY: WEAPONHOLSTER_PISTOL_LEFT", 0 );
        sub_28297( GET_WEAPON_FROM_HOLSTER( uParam0, 1 ) );
        if ((GET_WEAPON_FROM_HOLSTER( uParam0, 1 )) != 0)
        {
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HOLSTER( uParam0, 1 ), uParam1 );
        }
        sub_939( "SBA", "P_SET_PED_ALL_WEAPON_VISIBILITY: WEAPONHOLSTER_PISTOL_RIGHT", 0 );
        sub_28297( GET_WEAPON_FROM_HOLSTER( uParam0, 0 ) );
        if ((GET_WEAPON_FROM_HOLSTER( uParam0, 0 )) != 0)
        {
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HOLSTER( uParam0, 0 ), uParam1 );
        }
        sub_939( "SBA", "P_SET_PED_ALL_WEAPON_VISIBILITY: WEAPONHOLSTER_RIFLE", 0 );
        sub_28297( GET_WEAPON_FROM_HOLSTER( uParam0, 2 ) );
        if ((GET_WEAPON_FROM_HOLSTER( uParam0, 2 )) != 0)
        {
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HOLSTER( uParam0, 2 ), uParam1 );
        }
    }
    return;
}

void sub_37287()
{
    sub_939( "SBA", "P_OPEN_FRONT_DOOR", "***" );
    sub_37349( ref g_U2762, -110.00000000, 110.00000000 );
    sub_37527( ref g_U2762, 0, 1, 1065353216 );
    sub_37678( ref g_U2762, 1 );
    return;
}

void sub_37349(int iParam0, float fParam1, float fParam2)
{
    if ((sub_37361( iParam0 )) == 0)
    {
        sub_37427( iParam0 );
    }
    if (fParam1 > fParam2)
    {
        ;
    }
    else
    {
        DOOR_FIND_CLOSEST_SET_LIMIT_MIN( iParam0->_fU0, iParam0->_fU4, fParam1 );
        DOOR_FIND_CLOSEST_SET_LIMIT_MAX( iParam0->_fU0, iParam0->_fU4, fParam2 );
    }
    return;
}

int sub_37361(int iParam0)
{
    int iVar3;

    iVar3 = DOES_OBJECT_OF_TYPE_EXIST_AT_COORDS( iParam0->_fU4, 1.00000000, iParam0->_fU0 );
    if (iVar3 == 1)
    {
        return 1;
    }
    return 0;
}

void sub_37427(unknown uParam0)
{
    (uParam0^) = {(uParam0^)};
    return;
}

void sub_37527(int iParam0, int iParam1, int iParam2, unknown uParam3)
{
    float fVar6;

    if ((sub_37361( iParam0 )) == 0)
    {
        sub_37427( iParam0 );
    }
    fVar6 = 0.00000000;
    if (iParam1 == 1)
    {
        fVar6 = uParam3;
    }
    else
    {
        fVar6 = -uParam3;
    }
    if (iParam2 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, fVar6 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    return;
}

void sub_37678(int iParam0, unknown uParam1)
{
    if ((sub_37361( iParam0 )) == 0)
    {
        sub_37427( iParam0 );
    }
    DOOR_FIND_CLOSEST_SET_LATCH( iParam0->_fU0, iParam0->_fU4, uParam1 );
    return;
}

void sub_37851()
{
    unknown uVar2;

    sub_37865( 1, 0, 0, 1 );
    if (sub_18124())
    {
        PED_SET_ACTION_INTENTION( sub_7415(), 47, 1000, 0.00000000, 0.00000000, 0.00000000 );
        SNAP_PLAYER_TO_COVERPOINT( sub_7437(), "ny_aprt", "Corner_Position01", 1 );
    }
    if (NOT (IS_PED_DEAD( l_U1467 )))
    {
        PED_SET_ACTION_INTENTION( l_U1467, 47, 1000, 0.00000000, 0.00000000, 0.00000000 );
    }
    if (NOT (IS_PED_DEAD( l_U966[0] )))
    {
        PED_SET_ACTION_INTENTION( l_U966[0], 47, 1000, 0.00000000, 0.00000000, 0.00000000 );
    }
    if (NOT (IS_PED_DEAD( l_U966[1] )))
    {
        PED_SET_ACTION_INTENTION( l_U966[1], 47, 1000, 0.00000000, 0.00000000, 0.00000000 );
    }
    uVar2 = DOOR_FIND_CLOSEST( g_U2804._fU0, g_U2804._fU4 );
    if (DOES_OBJECT_EXIST( uVar2 ))
    {
        PLAY_OBJECT_ANIM( uVar2, "B_OUT_04_02_NYBAR_DOOR", "LEVEL_S_NYBAR_04_02_BLENDOUT", 0.00000000, 0, 1 );
    }
    sub_38391( ref l_U1082 );
    sub_38540( 1, 1 );
    sub_38836();
    sub_38953();
    sub_38422( l_U966[0] );
    sub_38422( l_U966[1] );
    sub_40664( ref l_U966, 1 );
    l_U1485 = 1;
    sub_39320( ref l_U1082[4] );
    TASK_SHOOT_AT_COORD( l_U1082[4], -345.44460000, -19.58995000, 3.50859400, 1800, -256437761, 1, 0 );
    sub_42629( ref g_U3386, -371.97850000, -19.18427000, 4.33580300, -3.00577000, 0.00000000, -97.87200000, 45, 500 );
    sub_42840( ref g_U3386 );
    DO_SCREEN_FADE_IN( 0 );
    return;
}

void sub_37865(int iParam0, int iParam1, unknown uParam2, boolean bParam3)
{
    END_POSTFX_BLENDER( 12, 0 );
    if (bParam3)
    {
        STOP_ALL_IMAGEFX( 0 );
    }
    SET_WIDESCREEN_BORDERS( 1, 500 );
    DISPLAY_HUD( 0 );
    if (iParam0 == 1)
    {
        if (NOT (IS_PED_DEAD( sub_7415() )))
        {
            SET_PLAYER_CONTROL( sub_7437(), 0, uParam2 );
            SET_PED_DUCKING( sub_7415(), 0 );
            if (iParam1 == 1)
            {
                CLEAR_PED_TASKS_IMMEDIATELY( sub_7415() );
            }
            SET_PED_INVINCIBLE( sub_7415(), 1 );
        }
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    return;
}

void sub_38391(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_38422( (uParam0^)[I] );
    }
    return;
}

void sub_38422(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 0 );
        SET_PED_VISIBLE( uParam0, 1 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 1 );
        FREEZE_PED_POSITION( uParam0, 0 );
        SET_PED_COLLISION( uParam0, 1 );
        SET_PED_PROOFS( uParam0, 0, 0, 0, 0, 0 );
    }
    return;
}

void sub_38540(unknown uParam0, boolean bParam1)
{
    unknown uVar4;
    int I;

    sub_939( "SBA", "P_TOGGLE_ROOFS_LASER_SIGHTS", 0 );
    sub_36167( uParam0 );
    for ( I = 0; I <= 4; I++ )
    {
        if (sub_18139( l_U1082[I] ))
        {
            uVar4 = GET_WEAPON_FROM_HAND( l_U1082[I], 0, 0 );
            if (GET_DOES_WEAPON_EXIST( uVar4 ))
            {
                sub_939( "SBA", "P_TOGGLE_ROOFS_LASER_SIGHTS: Toggling Laser", 0 );
                TOGGLE_WEAPON_ATTACHMENT( uVar4, 13, uParam0 );
                if (bParam1)
                {
                    sub_939( "SBA", "P_TOGGLE_ROOFS_LASER_SIGHTS: Setting Laser Type", 0 );
                    SET_LASER_SIGHT_ATTACHMENT( uVar4, -938171172 );
                }
            }
        }
    }
    return;
}

void sub_38836()
{
    int I;

    sub_939( "SBA", "P_CREATE_FIRST_LASER_TIMERS", "***" );
    for ( I = 0; I <= 4; I++ )
    {
        sub_14879( ref l_U1237[I], 0, 1, 0 );
        sub_15015( ref l_U1237[I] );
    }
    return;
}

void sub_38953()
{
    if (l_U2237 != 5)
    {
        if (sub_25755( l_U706 ))
        {
            sub_939( "SBA", "P_PROCESS_2ND_WAVE_THUGS: Player in tbCleanupVignette12, cleanup 2nd wave & goto eSWS_Done", "***" );
            sub_17218( ref l_U1082 );
            l_U2237 = 5;
        }
    }
    switch (l_U2237)
    {
        case 0:
        sub_39176();
        if ((sub_40324( ref l_U1082 )) || (sub_25755( l_U496 )))
        {
            sub_939( "SBA", "P_PROCESS_2ND_WAVE_THUGS: Player in tbAptHall1, activate 2nd wave & goto eSWS_First_Position", "***" );
            sub_40664( ref l_U1082, 0 );
            sub_40764( ref l_U1082 );
            l_U2237 = 1;
        }
        break;
        case 1:
        sub_40915( l_U580 );
        sub_41331();
        if (l_U1488)
        {
            sub_41567();
            sub_939( "SBA", "P_PROCESS_2ND_WAVE_THUGS: Goto eSWS_Reactivate", "***" );
            l_U2237 = 2;
        }
        break;
        case 2:
        if (l_U2240 >= 9)
        {
            sub_38391( ref l_U1082 );
            sub_42096( ref l_U1082 );
            sub_40664( ref l_U1082, 1 );
            sub_38540( 1, 1 );
            l_U2238 = 0;
            sub_939( "SBA", "P_PROCESS_2ND_WAVE_THUGS: Goto eSWS_Waiting_For_Max", "***" );
            l_U2237 = 3;
        }
        break;
        case 3:
        if (sub_18124())
        {
            if (NOT (IS_PED_USING_MP3_COVER_TASK( sub_7415() )))
            {
                sub_40664( ref l_U1082, 0 );
                sub_41077( ref l_U1082, 1 );
                sub_40764( ref l_U1082 );
                sub_939( "SBA", "P_PROCESS_2ND_WAVE_THUGS: Goto eSWS_Second_Position", "***" );
                l_U2237 = 4;
            }
        }
        break;
        case 4:
        sub_40915( l_U601 );
        sub_41331();
        break;
        case 5: break;
    }
    return;
}

void sub_39176()
{
    int I;

    for ( I = 0; I <= 4; I++ )
    {
        if (sub_15135( ref l_U1237[I] ))
        {
            sub_39218( I );
            sub_14879( ref l_U1237[I], (l_U1283 + l_U1284) * (GET_RANDOM_INT_IN_RANGE( 2, 5 )), 1, 0 );
            sub_15015( ref l_U1237[I] );
        }
    }
    return;
}

void sub_39218(unknown uParam0)
{
    unknown uVar3;

    switch (uParam0)
    {
        case 0:
        case 1:
        case 2:
        if (sub_18139( l_U1082[uParam0] ))
        {
            CLEAR_PED_TASKS_IMMEDIATELY( l_U1082[uParam0] );
            sub_39320( ref l_U1082[uParam0] );
            OPEN_SEQUENCE_TASK( ref uVar3 );
            TASK_DEFAULT_AIM_AT_COORD( 0, sub_39456( -361.11000000, -17.51000000, 4.40000000, 0.25000000, 0.10000000, 0.20000000 ) );
            TASK_PAUSE( 0, l_U1283 + (GET_RANDOM_INT_IN_RANGE( -l_U1284, l_U1284 )) );
            TASK_DEFAULT_AIM_AT_COORD( 0, sub_39456( -362.17000000, -17.51000000, 4.40000000, 0.25000000, 0.10000000, 0.20000000 ) );
            TASK_PAUSE( 0, l_U1283 + (GET_RANDOM_INT_IN_RANGE( -l_U1284, l_U1284 )) );
            SET_SEQUENCE_TO_REPEAT( uVar3, 1 );
            CLOSE_SEQUENCE_TASK( uVar3 );
            TASK_PERFORM_SEQUENCE( l_U1082[uParam0], uVar3 );
            CLEAR_SEQUENCE_TASK( uVar3 );
        }
        break;
        case 3:
        if (sub_18139( l_U1082[3] ))
        {
            CLEAR_PED_TASKS_IMMEDIATELY( l_U1082[3] );
            sub_39320( ref l_U1082[3] );
            OPEN_SEQUENCE_TASK( ref uVar3 );
            TASK_DEFAULT_AIM_AT_COORD( 0, sub_39456( -357.18000000, -17.51000000, 4.40000000, 0.25000000, 0.10000000, 0.25000000 ) );
            TASK_PAUSE( 0, l_U1283 + (GET_RANDOM_INT_IN_RANGE( -l_U1284, l_U1284 )) );
            TASK_DEFAULT_AIM_AT_COORD( 0, sub_39456( -358.24000000, -17.51000000, 4.40000000, 0.25000000, 0.10000000, 0.25000000 ) );
            TASK_PAUSE( 0, l_U1283 + (GET_RANDOM_INT_IN_RANGE( -l_U1284, l_U1284 )) );
            SET_SEQUENCE_TO_REPEAT( uVar3, 1 );
            CLOSE_SEQUENCE_TASK( uVar3 );
            TASK_PERFORM_SEQUENCE( l_U1082[3], uVar3 );
            CLEAR_SEQUENCE_TASK( uVar3 );
        }
        break;
        case 4:
        if (sub_18139( l_U1082[4] ))
        {
            CLEAR_PED_TASKS_IMMEDIATELY( l_U1082[4] );
            sub_39320( ref l_U1082[4] );
            OPEN_SEQUENCE_TASK( ref uVar3 );
            TASK_DEFAULT_AIM_AT_COORD( 0, sub_39456( -353.28000000, -17.51000000, 4.40000000, 0.25000000, 0.10000000, 0.25000000 ) );
            TASK_PAUSE( 0, l_U1283 + (GET_RANDOM_INT_IN_RANGE( -l_U1284, l_U1284 )) );
            TASK_DEFAULT_AIM_AT_COORD( 0, sub_39456( -354.34000000, -17.51000000, 4.40000000, 0.25000000, 0.10000000, 0.25000000 ) );
            TASK_PAUSE( 0, l_U1283 + (GET_RANDOM_INT_IN_RANGE( -l_U1284, l_U1284 )) );
            SET_SEQUENCE_TO_REPEAT( uVar3, 1 );
            CLOSE_SEQUENCE_TASK( uVar3 );
            TASK_PERFORM_SEQUENCE( l_U1082[4], uVar3 );
            CLEAR_SEQUENCE_TASK( uVar3 );
        }
        break;
    }
    return;
}

void sub_39320(unknown uParam0)
{
    if ((sub_18124()) AND (sub_18139( (uParam0^) )))
    {
        sub_39356( uParam0, sub_7415() );
    }
    return;
}

void sub_39356(unknown uParam0, unknown uParam1)
{
    if ((sub_18139( uParam1 )) AND (sub_18139( (uParam0^) )))
    {
        REGISTER_TARGET( (uParam0^), uParam1 );
    }
    return;
}

void sub_39456(unknown Result, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    Result._fU0 += GET_RANDOM_FLOAT_IN_RANGE( -uParam3._fU0, uParam3._fU0 );
    Result._fU4 += GET_RANDOM_FLOAT_IN_RANGE( -uParam3._fU4, uParam3._fU4 );
    Result._fU8 += GET_RANDOM_FLOAT_IN_RANGE( -uParam3._fU8, uParam3._fU8 );
    return Result;
}

int sub_40324(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((sub_18124()) AND (sub_18139( (uParam0^)[I] )))
        {
            if (HAS_PED_BEEN_DAMAGED_BY_PED( (uParam0^)[I], sub_7415(), 0 ))
            {
                sub_939( "SBA", "F_HAS_PED_ARRAY_BEEN_DAMAGED_BY_PLAYER: TRUE!", 0 );
                sub_939( "SBA", "Unfreezing ped!", 0 );
                FREEZE_PED_POSITION( (uParam0^)[I], 0 );
                CLEAR_PED_LAST_DAMAGE_ENTITY( (uParam0^)[I] );
                return 1;
            }
        }
    }
    return 0;
}

void sub_40664(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_40698( ref (uParam0^)[I], uParam1 );
    }
    return;
}

void sub_40698(unknown uParam0, unknown uParam1)
{
    if (sub_18139( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), uParam1 );
    }
    return;
}

void sub_40764(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((NOT (IS_PED_RAGDOLL( (uParam0^)[I], 0 ))) AND ((NOT (IS_PED_INJURED( (uParam0^)[I] ))) AND ((sub_18124()) AND (sub_18139( (uParam0^)[I] )))))
        {
            CLEAR_PED_TASKS_IMMEDIATELY( (uParam0^)[I] );
            TASK_COMBAT_PED( (uParam0^)[I], sub_7415() );
        }
    }
    return;
}

void sub_40915(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20)
{
    switch (l_U2238)
    {
        case 0:
        if (sub_25755( uParam0 ))
        {
            sub_939( "SBA", "P_PROCESS_2ND_WAVE_THUG_TARGETING: Player in front of windows, LOS check OFF", "***" );
            sub_40664( ref l_U1082, 0 );
            sub_41077( ref l_U1082, 1 );
            sub_40764( ref l_U1082 );
            l_U2238 = 1;
        }
        break;
        case 1:
        if (NOT (sub_25755( uParam0 )))
        {
            sub_939( "SBA", "P_PROCESS_2ND_WAVE_THUG_TARGETING: Player away from windows, LOS check ON", "***" );
            sub_40664( ref l_U1082, 0 );
            sub_41077( ref l_U1082, 1 );
            sub_40764( ref l_U1082 );
            l_U2238 = 0;
        }
        break;
    }
    return;
}

void sub_41077(unknown uParam0, boolean bParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (sub_18139( (uParam0^)[I] ))
        {
            SET_PED_IGNORE_LOS_CHECKS( (uParam0^)[I], NOT bParam1 );
        }
    }
    return;
}

void sub_41331()
{
    int I;
    unknown uVar3;

    if (NOT l_U1285)
    {
        if ((sub_27093( ref l_U1082 )) <= 2)
        {
            for ( I = 0; I <= 4; I++ )
            {
                if (sub_18139( l_U1082[I] ))
                {
                    uVar3 = GET_WEAPON_FROM_HAND( l_U1082[I], 0, 0 );
                    if (GET_DOES_WEAPON_EXIST( uVar3 ))
                    {
                        sub_939( "SBA", "P_HANDLE_STOP_FIRING_BLANKS: Roof dude no longer firing blanks", "***" );
                        sub_28297( I );
                        SET_WEAPON_CHANCE_TO_FIRE_BLANKS( uVar3, 0 );
                    }
                }
            }
            l_U1285 = 1;
        }
    }
    return;
}

void sub_41567()
{
    int I;

    sub_939( "SBA", "P_SETUP_THUGS_2ND_WAVE_FOR_BACK_HALL", "***" );
    for ( I = 0; I <= 4; I++ )
    {
        if (sub_18139( l_U1082[I] ))
        {
            sub_939( "SBA", "P_SETUP_THUGS_2ND_WAVE_FOR_BACK_HALL: Teleporting ped:", "***" );
            sub_28297( I );
            CLEAR_PED_TASKS_IMMEDIATELY( l_U1082[I] );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1082[I], 1 );
            CLEAR_LOCKED_TARGET( l_U1082[I] );
            CLEAR_PED_DEFAULT_AIM( l_U1082[I] );
            TOGGLE_WEAPON_ATTACHMENT( GET_WEAPON_FROM_HAND( l_U1082[I], 0, 0 ), 13, 0 );
            sub_22928( l_U1082[I], l_U1221[I], 0 );
            sub_35058( ref l_U1082, l_U925, 1 );
            sub_34203( l_U1082[I] );
        }
        else
        {
            sub_939( "SBA", "P_SETUP_THUGS_2ND_WAVE_FOR_BACK_HALL: Ped not valid:", "***" );
            sub_28297( I );
        }
    }
    return;
}

void sub_42096(unknown uParam0)
{
    int I;

    sub_939( "SBA", "P_CLEAR_PED_ARRAY_TASKS", 0 );
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (sub_18139( (uParam0^)[I] ))
        {
            CLEAR_PED_TASKS( (uParam0^)[I] );
        }
    }
    return;
}

void sub_42629(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    iParam0->_fU4 = {uParam4};
    iParam0->_fU16 = {uParam1};
    iParam0->_fU28 = uParam7;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    iParam0->_fU84 = uParam8;
    iParam0->_fU88 = 0;
    iParam0->_fU92 = 0;
    iParam0->_fU40 = 0;
    iParam0->_fU44 = 0;
    iParam0->_fU100 = 1;
    iParam0->_fU104 = 1;
    iParam0->_fU96 = 0;
    sub_14879( iParam0 + 48, uParam8, 1, 0 );
    iParam0->_fU0 = CREATE_CAM_WITH_PARAMS( ref g_U649, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 1 );
    SET_CAM_PARAMS( iParam0->_fU0, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 0, 1, 1 );
    return;
}

void sub_42840(int iParam0)
{
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    SET_CAM_ACTIVE( iParam0->_fU0, 1 );
    RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    sub_15015( iParam0 + 48 );
    iParam0->_fU32 = 1;
    iParam0->_fU40 = 1;
    return;
}

void sub_42940()
{
    boolean bVar2;
    unknown uVar3;
    int I;
    string sVar5;
    string sVar6;
    string sVar7;

    if (l_U1485)
    {
        if (IS_PED_DEAD( l_U1467 ))
        {
            uVar3 = DOOR_FIND_CLOSEST( g_U2804._fU0, g_U2804._fU4 );
            if (DOES_OBJECT_EXIST( uVar3 ))
            {
                if (IS_OBJECT_PLAYING_ANIM( uVar3, "B_OUT_04_02_NYBAR_DOOR", "LEVEL_S_NYBAR_04_02_BLENDOUT" ))
                {
                    SET_OBJECT_ANIM_SPEED( uVar3, "B_OUT_04_02_NYBAR_DOOR", "LEVEL_S_NYBAR_04_02_BLENDOUT", 0.00000000 );
                }
            }
            l_U2241 = 1;
        }
        for ( I = 0; I < 2; I++ )
        {
            if (sub_18139( l_U966[I] ))
            {
                if (I == 0)
                {
                    bVar2 = l_U1487;
                }
                else if (I == 1)
                {
                    bVar2 = l_U1486;
                }
                if ((PED_GET_ACTION_INTENTION_STATUS( l_U966[I], 47 )) == 3)
                {
                    PED_FINISH_ACTION_INTENTION( l_U966[I], 47 );
                    if (NOT bVar2)
                    {
                        sub_43294( l_U966[I], 1, 0, 0 );
                    }
                }
                if (I == 0)
                {
                    sVar5 = "gmed";
                    sVar6 = "GenCover";
                    sVar7 = "3020B2F4_F5617DED_Corner1";
                }
                else
                {
                    sVar5 = "gmed2";
                    sVar6 = "ny_aprt";
                    sVar7 = "Corner_Position45";
                }
                if ((ISEQ_QUERY_ENTITY_STATE( 439675427, sVar5, 5 )) || (ISEQ_QUERY_ENTITY_STATE( 439675427, sVar5, 6 )))
                {
                    if (NOT l_U1013)
                    {
                        if ((I == 0) AND (NOT l_U1487))
                        {
                            sub_939( "BSW", "P_HANDLE_04_02_BLENDOUT - setting up 0 ambush", 0 );
                            sub_43929( l_U966[0], sVar6, sVar7 );
                            l_U1013 = 1;
                        }
                    }
                    if (NOT l_U1012)
                    {
                        if ((I == 1) AND (NOT l_U1486))
                        {
                            sub_939( "BSW", "P_HANDLE_04_02_BLENDOUT - setting up 1 ambush", 0 );
                            sub_43929( l_U966[1], sVar6, sVar7 );
                            l_U1012 = 1;
                        }
                    }
                }
            }
        }
        if (l_U2241 != 1)
        {
            if ((ISEQ_QUERY_ENTITY_STATE( 439675427, "passos", 5 )) || (ISEQ_QUERY_ENTITY_STATE( 439675427, "passos", 6 )))
            {
                sub_939( "BSW", "P_HANDLE_04_02_BLENDOUT - passos is finished", 0 );
                sub_17252( l_U1467 );
                sub_44345( g_U3091 );
                l_U1485 = 0;
            }
        }
    }
    return;
}

void sub_43294(unknown uParam0, boolean bParam1, boolean bParam2, boolean bParam3)
{
    sub_939( "SBA", "P_FREE_UP_FIGHTER", "***" );
    if (sub_18139( uParam0 ))
    {
        SET_PED_COMBAT_MOVEMENT( uParam0, 2 );
        SET_PED_SEEING_RANGE( uParam0, 60.00000000, 75 );
        SET_PED_HEARING_RANGE( uParam0, 60.00000000 );
        if (bParam1)
        {
            sub_939( "SBA", "P_FREE_UP_FIGHTER: Unblocking temp events", "***" );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( uParam0, 0 );
        }
        if (bParam2)
        {
            sub_939( "SBA", "P_FREE_UP_FIGHTER: Clearing Tasks", "***" );
            CLEAR_PED_TASKS( uParam0 );
        }
        if (bParam3)
        {
            sub_939( "SBA", "P_FREE_UP_FIGHTER: Unlocking forced cover, removing forced lean fire", "***" );
            SET_PED_FLAG_LOCK_TO_COVER( uParam0, 0 );
            SET_PED_FLAG_FORCE_LEANFIRE_IN_COVER( uParam0, 0 );
            SET_PED_FLAG_FORCE_BLINDFIRE_IN_COVER( uParam0, 0 );
            SET_PED_FLAG_FIRE_UNTIL_EMPTY_IN_COVER( uParam0, 0 );
        }
    }
    return;
}

void sub_43929(unknown uParam0, unknown uParam1, unknown uParam2)
{
    unknown uVar5;

    sub_939( "SBA", "P_PED_AMBUSHES_PLAYER", "***" );
    if (sub_18139( uParam0 ))
    {
        SET_PED_FLAG_LOCK_TO_COVER( uParam0, 1 );
        OPEN_SEQUENCE_TASK( ref uVar5 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        TASK_COMBAT_MOVE_TO_COVER( 0, uParam1, uParam2, sub_7415() );
        CLOSE_SEQUENCE_TASK( uVar5 );
        CLEAR_PED_TASKS( uParam0 );
        TASK_PERFORM_SEQUENCE( uParam0, uVar5 );
        CLEAR_SEQUENCE_TASK( uVar5 );
    }
    return;
}

void sub_44345(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 1)
    {
        SET_MODEL_AS_NO_LONGER_NEEDED( uParam0 );
    }
    else
    {
        sub_1436( "[SP]### ERROR! (UnloadModel) Trying to unload a model that isn't in the img! ###" );
    }
    return;
}

void sub_44637(int iParam0, int iParam1)
{
    int iVar4;
    float fVar5;

    if ((sub_37361( iParam0 )) == 0)
    {
        sub_37427( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
    }
    else
    {
        iVar4 = 0;
        fVar5 = 0.00000000;
        GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref iVar4, ref fVar5 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar5 );
    }
    return;
}

void sub_44874(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

    sub_939( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
        sub_939( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
        sub_10320( iParam1 );
        sub_45133( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
            sub_45584( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
            sub_45584( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_45816( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
            sub_45584( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_45816( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_45816( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
            sub_45584( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_45816( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_45816( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_45816( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
            sub_45584( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_45816( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_45816( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_45816( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if (sub_45816( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
            sub_47374( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U1, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
    sub_939( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

void sub_45133(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 = sub_7697( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
        sub_939( "TEH", "Ending context", 0 );
        sub_939( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

void sub_45584(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

void sub_45816(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

void sub_47374(int iParam0)
{
    sub_1436( "CHECKPOINT DATA" );
    sub_47413( iParam0->_fU4 );
    sub_47436( iParam0->_fU16 );
    sub_47436( iParam0->_fU20 );
    sub_47436( iParam0->_fU24 );
    sub_28297( iParam0->_fU28 );
    sub_28297( iParam0->_fU56 );
    sub_28297( iParam0->_fU60 );
    sub_28297( iParam0->_fU64 );
    sub_28297( iParam0->_fU68 );
    sub_28297( iParam0->_fU72 );
    sub_28297( iParam0->_fU76 );
    sub_28297( iParam0->_fU80 );
    sub_28297( iParam0->_fU84 );
    sub_28297( iParam0->_fU88 );
    sub_28297( iParam0->_fU92 );
    sub_47436( iParam0->_fU32 );
    sub_28297( iParam0->_fU36 );
    sub_28297( iParam0->_fU40 );
    sub_28297( iParam0->_fU44 );
    sub_47436( iParam0->_fU136 );
    sub_36167( iParam0->_fU140 );
    sub_28297( iParam0->_fU52 );
    sub_1436( "---nRightHolsterAttachmentEnabled: " );
    sub_28297( iParam0->_fU96 );
    sub_1436( "---nRightHolsterAttachmentToggled: " );
    sub_28297( iParam0->_fU100 );
    sub_1436( "---nLeftHolsterAttachmentEnabled: " );
    sub_28297( iParam0->_fU104 );
    sub_1436( "---nLeftHolsterAttachmentToggled: " );
    sub_28297( iParam0->_fU108 );
    sub_1436( "---nRifleHolsterAttachmentEnabled: " );
    sub_28297( iParam0->_fU112 );
    sub_1436( "---nRifleHolsterAttachmentToggled: " );
    sub_28297( iParam0->_fU116 );
    sub_1436( "---nRightHandAttachmentEnabled: " );
    sub_28297( iParam0->_fU120 );
    sub_1436( "---nRightHandAttachmentToggled: " );
    sub_28297( iParam0->_fU124 );
    sub_1436( "---nLeftHandAttachmentEnabled: " );
    sub_28297( iParam0->_fU128 );
    sub_1436( "---nLeftHandAttachmentToggled: " );
    sub_28297( iParam0->_fU132 );
    sub_28297( l_U1 );
    sub_28297( 144 );
    return;
}

void sub_47413(unknown uParam0, unknown uParam1, unknown uParam2)
{
    return;
}

void sub_47436(unknown uParam0)
{
    return;
}

int sub_48461(int iParam0, boolean bParam1)
{
    if (bParam1 == 1)
    {
        if (NOT iParam0->_fU44)
        {
            if ((ref iParam0->_fU48->_fU16) || (sub_15135( iParam0 + 48 )))
            {
                iParam0->_fU44 = 1;
                iParam0->_fU36 = 1;
                return 1;
            }
        }
    }
    if (NOT bParam1)
    {
        if ((ref iParam0->_fU48->_fU16) || (sub_15135( iParam0 + 48 )))
        {
            iParam0->_fU36 = 1;
            return 1;
        }
    }
    return 0;
}

void sub_48669(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, float fParam4, unknown uParam5)
{
    SET_CAM_SIDE_LEFT( uParam2 );
    if (fParam4 != -1E8)
    {
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( uParam3, 1065353216, 0 );
    }
    if (fParam4 != -1E8)
    {
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( fParam4, 1065353216, 0 );
    }
    RENDER_SCRIPT_CAMS( 0, uParam1, uParam0, uParam5 );
    return;
}

void sub_48768(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD( sub_7415() )))
    {
        SET_PLAYER_CONTROL( sub_7437(), 1, 0 );
        SET_PED_INVINCIBLE( sub_7415(), 0 );
        if (bParam0)
        {
            sub_48849();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

void sub_48849()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_7415() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND( sub_7415(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND( sub_7415(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_7415(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_7415(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

void sub_49101()
{
    if (NOT (DOES_OBJECT_EXIST( l_U1497 )))
    {
        l_U1497 = CREATE_OBJECT( -1029582816, l_U1499, 1, 0 );
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1497, ref g_U3529 );
    }
    return;
}

void sub_49179(unknown uParam0)
{
    if (NOT (HAS_ANIM_DICT_LOADED( "ny_anim", 0 )))
    {
        sub_1705( "ny_anim", uParam0, 1 );
    }
    sub_1331( 1654676128, uParam0 );
    sub_1129( -1741224239, uParam0 );
    sub_1129( -382428326, uParam0 );
    sub_1129( -613372609, 0 );
    sub_1129( 1624814954, 0 );
    sub_1331( -1210795386, uParam0 );
    sub_1331( 443367284, uParam0 );
    sub_1331( g_U3096, uParam0 );
    sub_1331( g_U3090, uParam0 );
    sub_49344( l_U300, uParam0 );
    return;
}

void sub_49344(unknown uParam0, int iParam1)
{
    if (HAS_CUTSCENE_LOADED())
    {
        if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
        {
            SCRIPT_ASSERT( "Another cutscene is already loaded.  You can only load one cutscene into memory.  Your current cutscene will not load into memory.", 0 );
        }
    }
    if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
    {
        PRE_STREAM_SEAMLESS_CUTSCENE( uParam0 );
        if (iParam1 == 1)
        {
            while ((CUTSCENE_IS_LOADED( uParam0 )) == 0)
            {
                WAIT( 0 );
            }
        }
    }
    return;
}

void sub_49618(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (DOES_PLACEMENT_EXIST( (uParam0^)[I] ))
        {
            sub_939( "RJM", "DO_ANY_PAINKILLERS_STILL_EXIST - Found a pill in there, we can still play some V.O.", 0 );
            (uParam1^)[I] = 1;
        }
        else
        {
            (uParam1^)[I] = 0;
        }
    }
    return;
}

void sub_49894()
{
    if (sub_20139( ref l_U1678 ))
    {
        l_U1677 = 0;
    }
    if (sub_49924())
    {
        sub_19028( ref l_U1678, 1 );
        sub_939( "SBA", "P_HANDLE_MAX_BADGE_POI: POI has been used", 0 );
    }
    return;
}

void sub_49924()
{
    int Result;

    Result = 0;
    switch (l_U1677)
    {
        case 0:
        sub_939( "SBA", "HANDLE_MAX_BADGE_CAM: eMaxBadgeState = ASS_SETUP", 0 );
        sub_37865( 1, 0, 0, 1 );
        sub_50054( 0 );
        l_U1677 = 3;
        break;
        case 3:
        sub_939( "SBA", "HANDLE_MAX_BADGE_CAM: eMaxBadgeState = ASS_WAITING_TO_PLAY", 0 );
        CAMERA_PLAY_ANIMATED( "EXPL_CAM", "EXPL_CAM_GND_15_F_CAM", 1, -369.16000000, -25.67000000, 3.65000000, 120, 0, 0 );
        if (NOT (HAS_EXPLORATION_ITEM_BEEN_FOUND( "snyc2_MaxBadge" )))
        {
            sub_50054( 0 );
            sub_25807( "SNYC_EXBDGA", ref l_U1542 );
            FOUND_EXPLORATION_ITEM( "snyc2_MaxBadge" );
        }
        else
        {
            sub_14879( ref l_U1767, 4000, 1, 0 );
            sub_15015( ref l_U1767 );
        }
        if (sub_18124())
        {
            SET_PED_VISIBLE( sub_7415(), 0 );
        }
        l_U1677 = 4;
        break;
        case 4:
        if (((NOT (sub_50464( l_U1542 ))) AND (NOT l_U1767._fU20)) || (sub_15135( ref l_U1767 )))
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
            if (sub_18124())
            {
                SET_PED_VISIBLE( sub_7415(), 1 );
            }
            sub_939( "SBA", "HANDLE_MAX_BADGE_CAM: Cam cut done, going to eMaxBadgeState = ASS_FINISHED", 0 );
            l_U1677 = 5;
        }
        break;
        case 5:
        sub_48768( 1, 1 );
        Result = 1;
        sub_939( "SBA", "HANDLE_MAX_BADGE_CAM: going to eMaxBadgeState = ASS_INACTIVE", 0 );
        l_U1677 = -1;
        break;
    }
    return Result;
}

void sub_50054(unknown uParam0)
{
    int I;

    for ( I = 0; I <= 3; I++ )
    {
        if (IS_SCRIPTED_CONVERSATION_ONGOING( I ))
        {
            if ((g_U1[I] <= 8) AND (g_U1[I] >= 4))
            {
                STOP_SCRIPTED_CONVERSATION( I, uParam0, 0 );
            }
        }
    }
    return;
}

int sub_50464(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    if (NOT (sub_50477( uParam0 )))
    {
        return 0;
    }
    if ((g_U11[uParam0._fU4] == 2) || ((g_U11[uParam0._fU4] == 1) || (IS_SCRIPTED_CONVERSATION_ONGOING( uParam0._fU4 ))))
    {
        if (uParam0._fU8 == g_U6[uParam0._fU4])
        {
            return 1;
        }
    }
    return 0;
}

boolean sub_50477(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    int iVar12;

    if (uParam0._fU4 < 0)
    {
        return 0;
    }
    iVar12 = GET_CHECK_HASH_FROM_CONVERSATION_ID( uParam0._fU4 );
    return (uParam0._fU16 == iVar12) AND (iVar12 != 0);
}

void sub_50945()
{
    if (NOT l_U1453)
    {
        if (sub_50986( "SNYC_FSPL", ref l_U1440, ref l_U1447 ))
        {
            l_U1453 = 1;
        }
    }
    return;
}

int sub_50986(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    if ((IS_PLAYER_DEAD( sub_7437() )) == 0)
    {
        if (sub_25683() == 0)
        {
            for ( I = 0; I <= ((uParam1^) - 1); I++ )
            {
                if ((uParam2^)[I])
                {
                    if ((HAS_PLACEMENT_BEEN_COLLECTED( (uParam1^)[I] )) || (NOT (DOES_PLACEMENT_EXIST( (uParam1^)[I] ))))
                    {
                        (uParam2^)[I] = 0;
                        if (TIME_SINCE_LAST_MONOLOGUE() > 5000)
                        {
                            sub_25876( ref l_U107 );
                            sub_25807( uParam0, ref l_U107 );
                            return 1;
                        }
                    }
                }
            }
        }
    }
    return 0;
}

void sub_51219()
{
    unknown uVar2;

    sub_939( "SBA", "P_DEPLOY_THIRD_MAN_WAVE1", "***" );
    if ((sub_18124()) AND (sub_18139( l_U966[2] )))
    {
        sub_38422( l_U966[2] );
        SET_PED_HEARING_RANGE( l_U966[2], 60 );
        SET_PED_SEEING_RANGE( l_U966[2], 60, 75 );
        sub_51359( ref l_U966[2], 3 );
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
        TASK_GO_TO_COORD_WHILE_AIMING_AT_PED( 0, -337.56500000, -19.35600000, 2.67698700, sub_7415(), 3, 0, 1056964608, 0, 1, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        TASK_SHOOT_AT_PED( 0, sub_7415(), 2500, -256437761, 0, 0, 0 );
        CLOSE_SEQUENCE_TASK( uVar2 );
        CLEAR_PED_TASKS_IMMEDIATELY( l_U966[2] );
        TASK_PERFORM_SEQUENCE( l_U966[2], uVar2 );
        CLEAR_SEQUENCE_TASK( uVar2 );
    }
    return;
}

void sub_51359(unknown uParam0, unknown uParam1)
{
    if (sub_18139( (uParam0^) ))
    {
        SET_PED_ALERTNESS( (uParam0^), uParam1 );
    }
    return;
}

void sub_51822(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (sub_18139( (uParam0^)[I] ))
        {
            SET_PED_AS_ONE_SHOT_KILL( (uParam0^)[I], uParam1 );
        }
    }
    return;
}

void sub_52059(int iParam0, unknown uParam1)
{
    unknown uVar4;

    sub_939( "SBA", "P_TASK_RETREAT", "***" );
    if (sub_18139( l_U966[iParam0] ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U966[iParam0], 1 );
        SET_PED_AS_ONE_SHOT_KILL( l_U966[iParam0], uParam1 );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( l_U966[iParam0], 1 );
        SET_PED_CAN_AVOID_DEATH_ZONES( l_U966[iParam0], 0 );
        SET_PED_STAND_GROUND_ON_PLAYER_IMPACT( l_U966[iParam0], 1 );
        SET_PED_CAN_PUSH_PLAYER( l_U966[iParam0], 1 );
        SET_PED_RESIST_TO_OBJECT_COLLISION( l_U966[iParam0], 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_FLAG_BLOCK_GORE_REACTION( l_U966[iParam0], 1 );
        SET_PED_COMBAT_ATTRIBUTES( l_U966[iParam0], 1, 0 );
        SET_PED_CAN_SLOW_DOWN_WHEN_TURNING( l_U966[iParam0], 0 );
        CLEAR_LOCKED_TARGET( l_U966[iParam0] );
        CLEAR_PED_TASKS( l_U966[iParam0] );
        OPEN_SEQUENCE_TASK( ref uVar4 );
        if (iParam0 == 1)
        {
            TASK_FOLLOW_NAV_MESH_TO_COORD( 0, l_U1458, 4, -1, 0.75000000, 0, 0 );
        }
        else
        {
            l_U1461 = {l_U1464};
        }
        TASK_FOLLOW_NAV_MESH_TO_COORD( 0, l_U1461, 4, -1, 0.75000000, 0, 0 );
        CLOSE_SEQUENCE_TASK( uVar4 );
        CLEAR_PED_TASKS_IMMEDIATELY( l_U966[iParam0] );
        TASK_PERFORM_SEQUENCE( l_U966[iParam0], uVar4 );
        CLEAR_SEQUENCE_TASK( uVar4 );
    }
    return;
}

void sub_52572(unknown uParam0)
{
    int I;

    sub_939( "SBA", "P_RESET_THUG_TETHERS", "***" );
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ((NOT (IS_PED_DEAD( (uParam0^)[I] ))) AND (DOES_PED_EXIST( (uParam0^)[I] )))
        {
            RESET_PED_TETHERING( (uParam0^)[I] );
        }
    }
    return;
}

void sub_52803()
{
    sub_939( "SBA", "P_CREATE_APT01_PLACEMENTS", "***" );
    sub_17453( ref l_U1443 );
    l_U1443[0] = sub_30713( -4072149, -330.90000000, -11.16000000, 3.54000000, 0, 0, 0.60000000, 0, 0, 0, 1119092736 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1443[0], "RM_Aprt_01" );
    return;
}

void sub_53111(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    unknown uVar6;

    sub_939( "SBA", "P_MOVE_1ST_WAVE_PED_TO_COORD_TO_WAIT", "***" );
    if (sub_18139( uParam0 ))
    {
        if (NOT (sub_18427( uParam0, l_U643 )))
        {
            sub_939( "SBA", "P_MOVE_1ST_WAVE_PED_TO_COORD_TO_WAIT: moving ped to coord", "***" );
            OPEN_SEQUENCE_TASK( ref uVar6 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
            TASK_FOLLOW_NAV_MESH_TO_COORD( 0, uParam1, 4, -1, 0.25000000, 64, 0 );
            CLOSE_SEQUENCE_TASK( uVar6 );
            CLEAR_PED_TASKS_IMMEDIATELY( uParam0 );
            TASK_PERFORM_SEQUENCE( uParam0, uVar6 );
            CLEAR_SEQUENCE_TASK( uVar6 );
        }
    }
    return;
}

void sub_53588(unknown uParam0)
{
    int[8] iVar3;
    int Result;
    int I;
    unknown uVar14;

    array(ref iVar3, 8);
    Result = 0;
    iVar3[0] = 406496141;
    iVar3[1] = -862236369;
    iVar3[2] = 456708483;
    iVar3[3] = -1464892298;
    iVar3[4] = 68019059;
    iVar3[5] = -612753081;
    iVar3[6] = -691403429;
    iVar3[7] = 1194438308;
    for ( I = 0; I <= 7; I++ )
    {
        if (NOT (IS_PED_DEAD( uParam0 )))
        {
            uVar14 = GET_WEAPON_FROM_HAND( uParam0, 0, 0 );
            if ((GET_WEAPON_TYPE( uVar14 )) == iVar3[I])
            {
                Result = 1;
            }
        }
    }
    return Result;
}

void sub_53788(unknown uParam0, unknown uParam1)
{
    unknown uVar4;

    sub_939( "TEH", "MAR_NY_HolsterRifleOrDualAndDrawPistol begun", 0 );
    uVar4 = GET_WEAPON_FROM_HAND( sub_7415(), 0, 0 );
    if (GET_DOES_WEAPON_EXIST( uVar4 ))
    {
        if (((uParam0^) == 1) || (((GET_WEAPON_TYPE( uVar4 )) == 1992962408) || (((GET_WEAPON_TYPE( uVar4 )) == 724901397) || (((GET_WEAPON_TYPE( uVar4 )) == 57534114) || (((GET_WEAPON_TYPE( uVar4 )) == 1308526797) || (((GET_WEAPON_TYPE( uVar4 )) == -1074756423) || (((GET_WEAPON_TYPE( uVar4 )) == -1013714740) || (((GET_WEAPON_TYPE( uVar4 )) == -184942895) || (((GET_WEAPON_TYPE( uVar4 )) == -168327769) || (((GET_WEAPON_TYPE( uVar4 )) == 1845102363) || ((GET_WEAPON_TYPE( uVar4 )) == 434544317)))))))))))
        {
            sub_939( "TEH", "Holster weapon and draw gun", 0 );
            SELECT_WEAPON_TO_HAND( sub_7415(), 0, 0, 1 );
            uVar4 = GET_WEAPON_FROM_HAND( sub_7415(), 0, 0 );
            while (GET_DOES_WEAPON_EXIST( uVar4 ))
            {
                WAIT( 0 );
                uVar4 = GET_WEAPON_FROM_HAND( sub_7415(), 0, 0 );
                sub_939( "TEH", "Waiting for right hand to be empty", 0 );
            }
        }
    }
    uVar4 = GET_WEAPON_FROM_HAND( sub_7415(), 1, 0 );
    if (GET_DOES_WEAPON_EXIST( uVar4 ))
    {
        (uParam1^) = 1;
        sub_939( "TEH", "Dual wielding is true", 0 );
        SELECT_WEAPON_TO_HAND( sub_7415(), 0, 1, 1 );
        uVar4 = GET_WEAPON_FROM_HAND( sub_7415(), 1, 0 );
        while (GET_DOES_WEAPON_EXIST( uVar4 ))
        {
            WAIT( 0 );
            uVar4 = GET_WEAPON_FROM_HAND( sub_7415(), 1, 0 );
        }
    }
    uVar4 = GET_WEAPON_FROM_HAND( sub_7415(), 0, 0 );
    if (NOT (GET_DOES_WEAPON_EXIST( uVar4 )))
    {
        uVar4 = GET_WEAPON_FROM_HOLSTER( sub_7415(), 0 );
        if (NOT (GET_DOES_WEAPON_EXIST( uVar4 )))
        {
            uVar4 = GET_WEAPON_FROM_HOLSTER( sub_7415(), 1 );
        }
        SELECT_WEAPON_TO_HAND( sub_7415(), uVar4, 0, 1 );
        uVar4 = GET_WEAPON_FROM_HAND( sub_7415(), 0, 0 );
        while (NOT (GET_DOES_WEAPON_EXIST( uVar4 )))
        {
            WAIT( 0 );
            uVar4 = GET_WEAPON_FROM_HAND( sub_7415(), 0, 0 );
            sub_939( "TEH", "Waiting for right hand to be full", 0 );
        }
    }
    sub_939( "TEH", "MAR_NY_HolsterRifleOrDualAndDrawPistol ended", 0 );
    return;
}

void sub_54633()
{
    int I;

    sub_939( "SBA", "P_SETUP_THUGS_3RD_WAVE", "***" );
    for ( I = 0; I <= 2; I++ )
    {
        sub_17252( l_U1326[I] );
        l_U1326[I] = sub_32927( ref l_U1286[I] );
        if (I == 0)
        {
            sub_9666( l_U1326[I], -862236369, 25000, 0, 0 );
        }
        else if (I == 1)
        {
            sub_9666( l_U1326[I], 434544317, 25000, 0, 0 );
        }
        else
        {
            sub_9666( l_U1326[I], -862236369, 25000, 1, 0 );
        }
        SET_ROOM_FOR_PED_BY_NAME( l_U1326[I], ref g_U3529 );
        SET_PED_COMBAT_MOVEMENT( l_U1326[I], 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1326[I], 1 );
    }
    return;
}

void sub_54938()
{
    sub_939( "rw", "P_CreateTvStruct", 0 );
    l_U1966._fU0 = 0;
    StrCopy( ref l_U1966._fU8, "TV_03_16x9_NyApt", 32 );
    l_U1966._fU40 = sub_31380( 443367284, -332.07380000, -9.36466000, 3.48379000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    l_U1966._fU912 = 1;
    l_U1966._fU4 = 1;
    l_U1966._fU44 = {g_U3489};
    l_U1966._fU76 = -898316628;
    l_U1966._fU916 = 2300;
    l_U1966._fU920 = 0;
    l_U1966._fU80 = {-331.99000000, -11.47000000, 2.65000000};
    l_U1966._fU92 = 0;
    l_U1966._fU96 = "04_NYBAR_TV_TURN_ON_CAM";
    l_U1966._fU100 = "LEVEL_S_NYBAR_CP_03";
    l_U1966._fU104 = "04_NYBAR_TV_TURN_OFF_CAM";
    l_U1966._fU108 = {-333.93000000, -11.89000000, 5.30000000};
    l_U1966._fU120 = -38.13000000;
    l_U1966._fU924 = 0.70000000;
    l_U1966._fU928 = 0.75000000;
    l_U1966._fU932 = 1.00000000;
    l_U1966._fU128 = {-331.98000000, -10.24000000, 3.75000000};
    l_U1966._fU140 = {-2.19000000, 0.00000000, -0.16000000};
    l_U1966._fU1008 = -613372609;
    l_U1966._fU1012 = {-331.99000000, -11.72000000, 2.65000000};
    l_U1966._fU1024 = 0.00000000;
    l_U1966._fU1064 = 2400;
    l_U1966._fU1068 = 3900;
    l_U1966._fU1076 = 13.05199000;
    FREEZE_OBJECT_POSITION( l_U1966._fU40, 1 );
    ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1966._fU40, ref l_U1966._fU44 );
    sub_55553( ref l_U1966 );
    return;
}

void sub_55553(int iParam0)
{
    float fVar3;
    float fVar4;

    fVar3 = 1.10000000;
    fVar4 = 1.50000000;
    if (DOES_OBJECT_EXIST( iParam0->_fU40 ))
    {
        SET_OBJECT_ONLY_DAMAGED_BY_PLAYER( iParam0->_fU40, 1 );
    }
    sub_55672( iParam0 + 152, 2, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU40 ), "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU40 ), "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU40 ), 10.00000000, 10.00000000, 0, 0 );
    sub_32512( iParam0 + 152, 30, "POI_STOPWATCHTV" );
    sub_32705( iParam0 + 152, 0 );
    sub_55672( iParam0 + 496, 2, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU40 ), "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU40 ), "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU40 ), fVar3, fVar4, 1, 0 );
    sub_32512( iParam0 + 496, 30, "POI_WATCHTV" );
    sub_32705( iParam0 + 496, 0 );
    sub_15672( iParam0 + 840 );
    sub_15672( iParam0 + 876 );
    sub_15672( iParam0 + 968 );
    sub_15672( iParam0 + 1028 );
    iParam0->_fU936 = 0;
    iParam0->_fU940 = 0;
    iParam0->_fU1080 = 0;
    return;
}

void sub_55672(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14)
{
    sub_31693( iParam0, uParam13 );
    iParam0->_fU4 = uParam1;
    iParam0->_fU100 = {uParam5};
    iParam0->_fU112 = uParam11;
    iParam0->_fU200 = {uParam8};
    iParam0->_fU212 = uParam12;
    iParam0->_fU320 = uParam14;
    iParam0->_fU20 = {uParam2};
    sub_32132( iParam0 );
    return;
}

void sub_56007(boolean bParam0)
{
    sub_939( "RJM", "CREATE_MID_03_PEDS_AND_OBJECTS - start", 0 );
    sub_2220( ref l_U360, -332.31260000, -13.02238000, 2.65000000, 92.00000000, -1538180161, 7, 3, 2, 0, 0 );
    if (NOT bParam0)
    {
        sub_2220( ref l_U307[0], 0, 0, 0, 0.00000000, -1237558166, 26, 6, 0, 0, 0 );
        sub_2220( ref l_U307[1], 0, 0, 0, 0.00000000, -1244383370, 26, 6, 0, 0, 0 );
        sub_2220( ref l_U307[2], 0, 0, 0, 0.00000000, -941579388, 26, 6, 0, 0, 0 );
        sub_2220( ref l_U307[3], 0, 0, 0, 0.00000000, 525041670, 26, 6, 0, 0, 0 );
        l_U302[0] = sub_32927( ref l_U307[0] );
        sub_9666( l_U302[0], -862236369, 25000, 0, 0 );
        l_U302[1] = sub_32927( ref l_U307[1] );
        l_U302[2] = sub_32927( ref l_U307[2] );
        l_U302[3] = sub_32927( ref l_U307[3] );
    }
    sub_17252( l_U373 );
    l_U373 = sub_32927( ref l_U360 );
    sub_9666( l_U373, 434544317, 25000, 0, 0 );
    sub_939( "RJM", "CREATE_MID_03_PEDS_AND_OBJECTS - end", 0 );
    return;
}

void sub_56463(unknown uParam0)
{
    sub_939( "BSW", "REGISTER_PEDS_MID_02aa - start", 0 );
    if (sub_18124())
    {
        sub_939( "BSW", "Registering player with NYC_MID_02aa", "***" );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( sub_7415(), 0, 0 ), "W_PI_Clt1911_Aa_H^1", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( sub_7415(), g_U3429, g_U3432 );
        ISEQ_REGISTER_ENTITY( -382428326, "max", sub_7415(), 0 );
    }
    if (sub_18139( l_U373 ))
    {
        sub_939( "SBA", "Registering piCrazy with NYC_MID_02aa", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U373, "Crazy_Man", 0 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( l_U373, ref g_U3045 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U373, 0, 0 ), "W_SG_BenM3_Aa_H", 0 );
    }
    if (sub_18139( (uParam0^)[0] ))
    {
        sub_939( "SBA", "Registering piThug with NYC_MID_02aa", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam0^)[0], "G_NY_T_Sold_C", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( (uParam0^)[0], 0, 0 ), "W_PI_Clt1911_Aa_H", 0 );
    }
    if (sub_18139( (uParam0^)[1] ))
    {
        sub_939( "SBA", "Registering piThug with NYC_MID_02aa", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam0^)[1], "G_NY_T_Sold_C^8", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( (uParam0^)[1], 0, 0 ), "W_PI_Clt1911_Aa_H", 0 );
    }
    if (sub_18139( (uParam0^)[2] ))
    {
        sub_939( "SBA", "Registering piThug with NYC_MID_02aa", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam0^)[2], "G_NY_T_Sold_C^9", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( (uParam0^)[2], 0, 0 ), "W_PI_Clt1911_Aa_H", 0 );
    }
    REGISTER_HIDE_ENTITY_AT_POSITION( g_U2811._fU0, g_U2811._fU4 );
    return;
}

void sub_57363()
{
    if (sub_57383( ref l_U966, l_U748 ))
    {
        sub_939( "TEH", "piThugs1stWave guy fell through apartment", "###" );
    }
    if (sub_57383( ref l_U1082, l_U748 ))
    {
        sub_939( "TEH", "piThugs2ndWave guy fell through apartment", "###" );
    }
    if (sub_57383( ref l_U1326, l_U748 ))
    {
        sub_939( "TEH", "piThugs3rdWave guy fell through apartment", "###" );
    }
    return;
}

void sub_57383(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    int Result;
    int I;
    int iVar26;

    Result = 0;
    I = 0;
    iVar26 = (uParam0^);
    for ( I = 0; I < iVar26; I++ )
    {
        if (sub_57433( ref (uParam0^)[I], uParam1 ))
        {
            Result = 1;
        }
    }
    return Result;
}

int sub_57433(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((DOES_PED_EXIST( (uParam0^) )) == 1)
    {
        if ((IS_PED_DEAD( (uParam0^) )) == 0)
        {
            if ((IS_PED_IN_GAMEPLAY_HELPER_BOX( (uParam0^), ref uParam1._fU0 )) == 1)
            {
                sub_25520( (uParam0^) );
                return 1;
            }
        }
    }
    return 0;
}

void sub_57805(unknown uParam0, boolean bParam1)
{
    if (sub_18139( (uParam0^) ))
    {
        if ((bParam1) || (sub_18427( (uParam0^), l_U769 )))
        {
            if (bParam1)
            {
                sub_939( "SBA", "P_DELETE_RETREATER", "***" );
                sub_17252( (uParam0^) );
            }
            else
            {
                sub_939( "SBA", "P_DELETE_RETREATER: killing ped", "***" );
                sub_57968( (uParam0^), 1, 1065353216 );
                sub_25520( (uParam0^) );
            }
        }
    }
    return;
}

void sub_57968(unknown uParam0, boolean bParam1, unknown uParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;

    if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
    {
        uVar5 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        sub_939( "SBA", "P_FIRE_BULLET_AT_PED: Firing bullet at ped", "***" );
        sub_47413( uVar5 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( uVar5._fU0 + 0.50000000, uVar5._fU4 + 0.50000000, uVar5._fU8, uVar5, 100, 1, -1074756423, 0 );
        if (bParam1)
        {
            DAMAGE_DECALS_ON_PED( uParam0, uParam2 );
        }
    }
    return;
}

void sub_58207()
{
    int iVar2;
    unknown uVar3;

    if (NOT l_U1490)
    {
        uVar3 = nil;
        iVar2 = (sub_27093( ref l_U966 )) + (sub_27093( ref l_U1082 ));
        if (iVar2 == 1)
        {
            sub_58266( ref l_U966 );
            uVar3 = sub_58266( ref l_U1082 );
            if (sub_18139( uVar3 ))
            {
                sub_939( "SBA", "P_HANDLE_START_EVENTS: bullet cam set on 2nd wave thug", "***" );
                BULLET_CAMERA_ALLOW_TRACK_BULLET( 0 );
                BULLET_CAMERA_TRACK_UNTIL_GROUNDED( 0 );
            }
            sub_939( "SBA", "P_SET_APT_BULLETCAM: bullet cam has been assigned", "***" );
            l_U1490 = 1;
        }
    }
    return;
}

void sub_58266(unknown uParam0)
{
    int I;

    if ((sub_27093( uParam0 )) == 1)
    {
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
            {
                if (NOT (GET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I] )))
                {
                    SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I], 1 );
                    return (uParam0^)[I];
                }
            }
        }
    }
    return nil;
}

void sub_58616()
{
    sub_939( "SBA", "PLAY_EXPLOSION_RAYFIRE_SEQUENCE", "***" );
    sub_58677();
    sub_58828();
    SMASH_GLASS_IN_RADIUS( l_U1455, 10, 0.10000000 );
    SMASH_GLASS_IN_RADIUS( -352.33590000, -6.68739900, 2.71586900, 7, 0.10000000 );
    SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -352.84000000, -6.68000000, 4.32000000, -349.99000000, -8.71000000, 4.77000000, 100, 1, 1845102363, 0 );
    SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -352.84000000, -6.68000000, 4.32000000, -349.33000000, -8.71000000, 4.77000000, 100, 1, 1845102363, 0 );
    sub_59125( "p_aptHall_lghtHangAa", -351.83790000, -7.14960000, 5.36080000 );
    sub_59125( "P_EL_nywalllit", -354.46600000, -5.87040000, 4.44010000 );
    return;
}

void sub_58677()
{
    int I;

    sub_939( "SBA", "P_SETUP_BLOWNUP_PEDS", "***" );
    for ( I = 0; I <= 3; I++ )
    {
        sub_17252( l_U1389[I] );
        l_U1389[I] = sub_32927( ref l_U1336[I] );
        SET_ROOM_FOR_PED_BY_NAME( l_U1389[I], ref g_U3529 );
        sub_25520( l_U1389[I] );
    }
    return;
}

void sub_58828()
{
    if (DOES_OBJECT_EXIST( l_U1497 ))
    {
        sub_17568( l_U1497 );
    }
    if (NOT (DOES_OBJECT_EXIST( l_U1498 )))
    {
        l_U1498 = CREATE_OBJECT( -1210795386, l_U1499, 1, 0 );
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1498, ref g_U3529 );
    }
    return;
}

void sub_59125(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    DAMAGE_ALL_GROUPS_ON_OBJECT( FIND_OBJECT_AT_POSITION( uParam0, uParam1, 0.50000000 ) );
    return;
}

void sub_59223(boolean bParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;
    int Result;

    Result = 0;
    if (IS_STRING_NULL( uParam2 ))
    {
        uParam2 = l_U300;
    }
    switch (l_U301)
    {
        case 0:
        sub_939( "BSW", "PLAY_MIDSCENE_02aa start", 0 );
        sub_37865( 1, 0, 0, 1 );
        if (NOT bParam0)
        {
            sub_59349();
            sub_49344( uParam2, 1 );
            sub_56007( bParam0 );
            sub_56463( ref l_U302 );
        }
        else
        {
            CUTSCENE_REGISTER_ISEQ( -382428326 );
        }
        l_U374 = 0;
        g_U3042 = 0;
        l_U375 = 0;
        START_SEAMLESS_CUTSCENE();
        l_U301 = 1;
        break;
        case 1:
        l_U301 = 2;
        break;
        case 2:
        iVar5 = GET_CUTSCENE_TIME_MS();
        if (HAS_CUTSCENE_FINISHED())
        {
            sub_59592();
            sub_59677();
            sub_939( "BSW", "PLAY_MIDSCENE_02aa end", 0 );
            if (l_U297 == 7)
            {
                l_U298 = 7;
            }
            CAMERA_PLAY_ANIMATED( "LEVEL_S_NYBAR_CP_03", "B_OUT_MID_02AA_NYBAR_FWD_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
            Result = 1;
            l_U301 = 0;
        }
        else if (NOT g_U3042)
        {
            if ((iVar5 < 6400) AND (iVar5 > 5400))
            {
                sub_939( "SBA", "PLAY_MIDSCENE_02aa: Brewer shoots thug", 0 );
                SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -336.30000000, -13.40000000, 4.02000000, -338.76000000, -13.29000000, 4.17000000, 100, 1, 434544317, 0 );
                g_U3042 = 1;
            }
        }
        if (NOT l_U375)
        {
            if ((iVar5 < 37000) AND (iVar5 > 36000))
            {
                sub_939( "SBA", "PLAY_MIDSCENE_02aa: Swapping Brewer sceneped", 0 );
                SET_PERSISTENT_PED_VARIATION_ENUM( l_U373, -1786077646 );
                l_U375 = 1;
            }
        }
        if ((NOT l_U374) AND (iVar5 > 6500))
        {
            sub_60252();
        }
        if ((l_U297 == 7) AND (iVar5 > 49000))
        {
            l_U298 = 7;
        }
        if ((NOT g_U3043) AND (iVar5 > 49000))
        {
            g_U3043 = 1;
        }
        break;
    }
    return Result;
}

void sub_59349()
{
    sub_939( "BSW", "LOAD_NYC_MID_02AA_ASSETS", "***" );
    sub_1331( 186202593, 1 );
    sub_1331( 755708664, 1 );
    sub_1814( -862236369, 1 );
    sub_1814( 434544317, 1 );
    sub_1705( "ny_anim", 0, 1 );
    sub_1331( 1654676128, 1 );
    return;
}

void sub_59592()
{
    sub_939( "BSW", "CLEAN_UP_NYC_MID_02AA_ASSETS", "***" );
    sub_17218( ref l_U302 );
    sub_17252( l_U373 );
    return;
}

void sub_59677()
{
    sub_939( "SBA", "UNLOAD_NYC_MID_02AA_ASSETS", "***" );
    sub_44345( 186202593 );
    sub_44345( 755708664 );
    sub_59758( -862236369 );
    sub_59758( 434544317 );
    sub_44345( 1654676128 );
    sub_17817( "ny_anim" );
    return;
}

void sub_59758(unknown uParam0)
{
    SET_WEAPON_AS_NO_LONGER_NEEDED( uParam0 );
    return;
}

void sub_60252()
{
    if (NOT (DOES_OBJECT_EXIST( g_U3044 )))
    {
        sub_939( "SBA", "CREATE_HALL_BLOOD_DECAL", 0 );
        g_U3044 = CREATE_OBJECT( 1654676128, -339.77700000, -12.29400000, 2.07000000, 1, 0 );
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( g_U3044, ref g_U3529 );
        l_U374 = 1;
    }
    return;
}

void sub_60457()
{
    sub_939( "SBA", "P_POST_MID_02A_SETUP", 0 );
    if (sub_18139( l_U1437 ))
    {
        TRANSFER_PED_BLOOD_HANDLE( l_U1326[0], l_U1437 );
        SET_PED_COORDS( l_U1437, -338.72000000, -12.48700000, 2.65000000, 1 );
        SET_PED_HEADING( l_U1437, l_U1424._fU12 );
        SET_ROOM_FOR_PED_BY_NAME( l_U1437, ref g_U3529 );
        STOP_PED_SPEAKING( l_U1437, 1 );
        SET_PED_VISIBLE( l_U1437, 1 );
        SET_PED_COLLISION( l_U1437, 1 );
    }
    if (NOT g_U3042)
    {
        sub_939( "SBA", "P_POST_MID_02A_SETUP: Midscene ended early, shooting thug in the head", 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -339.17000000, -10.53000000, 3.10000000, -339.44000000, -12.48000000, 2.80000000, 100, 1, 434544317, 0 );
    }
    sub_60787();
    sub_60940();
    if (sub_18124())
    {
        SET_PED_FORCED_TO_WALK( sub_7415(), 0 );
    }
    sub_61297();
    return;
}

void sub_60787()
{
    sub_939( "SBA", "P_CREATE_DEAD_THUG_GUN_PLACEMENT", "***" );
    sub_17396( l_U1446 );
    l_U1446 = sub_30713( -343443786, -338.59000000, -13.29000000, 2.67000000, -1.57000000, 0.00000000, -1.87000000, 1, 0, 0, 1119092736 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1446, ref g_U3529 );
    return;
}

void sub_60940()
{
    int I;

    sub_939( "SBA", "P_SETUP_KILLED_PEDS", "***" );
    for ( I = 0; I <= 1; I++ )
    {
        sub_17252( l_U1421[I] );
        l_U1421[I] = sub_32927( ref l_U1394[I] );
        sub_9666( l_U1421[I], -862236369, 25000, 0, 0 );
        SET_ROOM_FOR_PED_BY_NAME( l_U1421[I], ref g_U3529 );
        SET_PED_DROPS_WEAPONS_WHEN_DEAD( l_U1421[I], 1 );
    }
    sub_61114( ref l_U1421 );
    return;
}

void sub_61114(unknown uParam0)
{
    int I;

    sub_939( "SBA", "P_NYC2_KILL_PEDS_IN_ARRAY", "***" );
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (sub_18139( (uParam0^)[I] ))
        {
            FREEZE_PED_POSITION( (uParam0^)[I], 0 );
            sub_57968( (uParam0^)[I], 1, 1065353216 );
            sub_25520( (uParam0^)[I] );
        }
    }
    return;
}

void sub_61297()
{
    sub_939( "SBA", "P_CREATE_CRAZY_GUN_PLACEMENT", "***" );
    sub_61355();
    sub_17396( l_U1445 );
    l_U1445 = sub_30713( -1138829373, -363.57000000, -6.63000000, 2.72500000, 1.57000000, 0.00000000, 0.70000000, 1, 0, 0, 1119092736 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1445, ref g_U3529 );
    return;
}

void sub_61355()
{
    sub_939( "CO", "P_CREATE_S_NY2_GG_LM_01", 0 );
    sub_30288( ref g_U719, g_U776, -1527482439, -750661167, -357.79000000, -2.21000000, 2.70000000, 0.00000000, 1.50000000, 1.00000000, "RM_Aprt_06" );
    sub_30417( ref g_U719 );
    return;
}

void sub_61652()
{
    sub_939( "SBA", "P_CREATE_NEWS_CLIPPINGS", 0 );
    sub_17568( l_U1785 );
    l_U1785 = sub_31380( -1226437551, l_U1873, 0, 0, 90, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U1785 ))
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1785, ref g_U3489 );
        FREEZE_OBJECT_POSITION( l_U1785, 1 );
        sub_61813( ref l_U1787, 1, l_U1873, l_U853, l_U874, 1, 0 );
        sub_32512( ref l_U1787, 30, "POI_NYC_CLIPS" );
        sub_32673( ref l_U1787, 1 );
        sub_32705( ref l_U1787, 0 );
    }
    return;
}

void sub_61813(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21, unknown uParam22, unknown uParam23, unknown uParam24, unknown uParam25, unknown uParam26, unknown uParam27, unknown uParam28, unknown uParam29, unknown uParam30, unknown uParam31, unknown uParam32, unknown uParam33, unknown uParam34, unknown uParam35, unknown uParam36, unknown uParam37, unknown uParam38, unknown uParam39, unknown uParam40, unknown uParam41, unknown uParam42, unknown uParam43, unknown uParam44, unknown uParam45, unknown uParam46, unknown uParam47, unknown uParam48)
{
    sub_31693( iParam0, uParam47 );
    iParam0->_fU4 = uParam1;
    iParam0->_fU80 = 1;
    iParam0->_fU116 = {uParam5};
    iParam0->_fU88 = 1;
    iParam0->_fU216 = {uParam26};
    iParam0->_fU320 = uParam48;
    iParam0->_fU20 = {uParam2};
    sub_32132( iParam0 );
    return;
}

void sub_61971()
{
    sub_939( "SBA", "P_CREATE_MANIFESTO_POI", 0 );
    sub_55672( ref l_U1877, 2, l_U1963, l_U1963, l_U1963, 1.50000000, 1.75000000, 1, 0 );
    sub_32512( ref l_U1877, 30, "POI_NYC_MFSTO" );
    sub_32673( ref l_U1877, 1 );
    sub_32705( ref l_U1877, 0 );
    return;
}

void sub_62215()
{
    int Result;

    Result = 0;
    switch (l_U2239)
    {
        case 0:
        sub_939( "BSW", "HANDLE_MID_02aa_BLENDOUT = MPM_NIS_START", 0 );
        sub_37865( 1, 0, 0, 1 );
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.01000000, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( -10.00000000, 1065353216, 0 );
        if ((IS_SCREEN_FADING_OUT()) || (IS_SCREEN_FADED_OUT()))
        {
            DO_SCREEN_FADE_IN( 500 );
        }
        sub_25807( "SNYC_FGBU", ref l_U1572 );
        l_U2239 = 1;
        break;
        case 1:
        if ((CAMERA_ANIMATED_CURRENT_TIME() + 1) >= (CAMERA_ANIMATED_LENGTH( "LEVEL_S_NYBAR_CP_03", "B_OUT_MID_02AA_NYBAR_FWD_CAM" )))
        {
            sub_939( "BSW", "eMID_02aaBlendout = MPM_NIS_PLAYING", 0 );
            CAMERA_FREEZE_FRAME( 1, 1250, 0, 0 );
            l_U2239 = 2;
        }
        break;
        case 2:
        sub_48768( 1, 1 );
        sub_939( "BSW", "eMID_02aaBlendout = ISS_SCRIPT_FINISHING", 0 );
        Result = 1;
        break;
    }
    return Result;
}

void sub_62813()
{
    if (sub_20139( ref l_U1787 ))
    {
        l_U1786 = 0;
    }
    if (sub_62843())
    {
        sub_19028( ref l_U1787, 1 );
        sub_939( "SBA", "P_HANDLE_NEWS_CLIPPINGS_POI: POI has been used", 0 );
    }
    return;
}

void sub_62843()
{
    int Result;

    Result = 0;
    switch (l_U1786)
    {
        case 0:
        sub_939( "SBA", "HANDLE_NEWS_CLIPPINGS_CAM: eNewsClippings = ASS_SETUP", 0 );
        sub_37865( 1, 0, 0, 1 );
        sub_50054( 0 );
        l_U1786 = 3;
        break;
        case 3:
        sub_939( "SBA", "HANDLE_NEWS_CLIPPINGS_CAM: eNewsClippings = ASS_WAITING_TO_PLAY", 0 );
        CAMERA_PLAY_ANIMATED( "EXPL_CAM", "EXPL_CAMWAL_POPZOOM_F", 1, -332.59000000, -15.06000000, 4.38000000, 188, 0, 0 );
        if (NOT (HAS_EXPLORATION_ITEM_BEEN_FOUND( "snyc2_MaxNews" )))
        {
            sub_50054( 0 );
            sub_25807( "SNYC_EXCAM", ref l_U1562 );
            FOUND_EXPLORATION_ITEM( "snyc2_MaxNews" );
        }
        else
        {
            sub_14879( ref l_U1776, 4000, 1, 0 );
            sub_15015( ref l_U1776 );
        }
        if (sub_18124())
        {
            SET_PED_VISIBLE( sub_7415(), 0 );
            CLEAR_PED_TASKS_IMMEDIATELY( sub_7415() );
            sub_22928( sub_7415(), -332.05910000, -15.13261000, 2.64962000, 92.62003000 );
            SET_ROOM_FOR_PED_BY_NAME( sub_7415(), ref g_U3489 );
            SET_PED_DEFAULT_AIM_AHEAD( sub_7415() );
        }
        l_U1786 = 4;
        break;
        case 4:
        if (((NOT (sub_50464( l_U1562 ))) AND (NOT l_U1776._fU20)) || (sub_15135( ref l_U1776 )))
        {
            if (sub_18124())
            {
                SET_PED_VISIBLE( sub_7415(), 1 );
            }
            CAMERA_ANIMATED_STOP( 0, 0 );
            sub_939( "SBA", "HANDLE_NEWS_CLIPPINGS_CAM: Cam cut done, going to eNewsClippings = ASS_FINISHED", 0 );
            l_U1786 = 5;
        }
        break;
        case 5:
        sub_48768( 1, 1 );
        if (sub_18124())
        {
            CLEAR_PED_DEFAULT_AIM( sub_7415() );
        }
        Result = 1;
        sub_939( "SBA", "HANDLE_NEWS_CLIPPINGS_CAM: going to eNewsClippings = ASS_INACTIVE", 0 );
        l_U1786 = -1;
        break;
    }
    return Result;
}

void sub_63742()
{
    if (l_U1966._fU940 == 0)
    {
        if (sub_20139( ref l_U1877 ))
        {
            l_U1876 = 0;
        }
    }
    if (sub_63788())
    {
        sub_19028( ref l_U1877, 1 );
        sub_939( "SBA", "P_HANDLE_MANIFESTO_POI: POI has been used", 0 );
    }
    return;
}

void sub_63788()
{
    int Result;

    Result = 0;
    switch (l_U1876)
    {
        case 0:
        sub_939( "SBA", "HANDLE_MANIFESTO_CAM: eManifesto = ASS_SETUP", 0 );
        sub_37865( 1, 0, 0, 1 );
        l_U1876 = 3;
        break;
        case 3:
        sub_939( "SBA", "HANDLE_MANIFESTO_CAM: eManifesto = ASS_WAITING_TO_PLAY", 0 );
        if (sub_18124())
        {
            CLEAR_PED_TASKS_IMMEDIATELY( sub_7415() );
            SET_PED_VISIBLE( sub_7415(), 0 );
        }
        CAMERA_PLAY_ANIMATED( "EXPL_CAM", "EXPL_CAM_GND_25_F_CAM", 1, -331.60000000, -11.08000000, 4.19000000, 240.00000000, 0, 0 );
        if (NOT (HAS_EXPLORATION_ITEM_BEEN_FOUND( "snyc2_Journal" )))
        {
            FOUND_EXPLORATION_ITEM( "snyc2_Journal" );
            sub_50054( 0 );
            sub_25807( "SNYC_EXNTB", ref l_U1552 );
        }
        else
        {
            sub_14879( ref l_U2251, 4000, 1, 0 );
            sub_15015( ref l_U2251 );
        }
        l_U1876 = 4;
        break;
        case 4:
        if ((sub_15135( ref l_U2251 )) || ((NOT (sub_14769( ref l_U2251 ))) AND (NOT (sub_50464( l_U1552 )))))
        {
            sub_939( "SBA", "HANDLE_MANIFESTO_CAM: Cam cut done, going to eManifesto = ASS_FINISHED", 0 );
            l_U1876 = 5;
        }
        break;
        case 5:
        if (sub_18124())
        {
            SET_PED_VISIBLE( sub_7415(), 1 );
        }
        CAMERA_ANIMATED_STOP( 0, 0 );
        sub_48768( 1, 1 );
        Result = 1;
        sub_939( "SBA", "HANDLE_MANIFESTO_CAM: going to eManifesto = ASS_INACTIVE", 0 );
        l_U1876 = -1;
        break;
    }
    return Result;
}

void sub_64561()
{
    switch (l_U1622)
    {
        case 0:
        if (NOT sub_25683())
        {
            if (sub_25755( l_U832 ))
            {
                sub_25807( "SNYC_WNCH", ref l_U1592 );
                l_U1622++;
            }
        }
        break;
        case 1: break;
    }
    return;
}

void sub_64900(unknown uParam0, int iParam1)
{
    LOAD_SCRIPT_AUDIO_BANK( uParam0 );
    if (iParam1 == 1)
    {
        while ((IS_SCRIPT_AUDIO_BANK_LOADED( uParam0, 0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_64972(int iParam0, int iParam1)
{
    if ((sub_37361( iParam0 )) == 0)
    {
        sub_37427( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    return;
}

void sub_65367()
{
    sub_939( "SBA", "P_DIAL_MAX_GOTO_ROOF", "***" );
    if (NOT (IS_PED_DEAD( sub_7415() )))
    {
        sub_25876( ref l_U1512 );
        sub_25956( 0, sub_7415(), "MAX", ref l_U1512, 2, 0 );
        sub_26181( "SNYC_VIG12B", ref l_U1512, 8, 1 );
    }
    return;
}

void sub_65540()
{
    switch (l_U2242)
    {
        case 0:
        sub_939( "SBA", "P_UPDATE_APT_STAIRS_RAYFIRE: eASRF_State = eASRF_Setup", 0 );
        sub_1331( -905572943, 1 );
        sub_1331( 162997152, 1 );
        l_U2242 = 1;
        break;
        case 1:
        sub_939( "SBA", "P_UPDATE_APT_STAIRS_RAYFIRE: eASRF_State = eASRF_StartFX", 0 );
        START_PARTICLE_FX_NON_LOOPED_AT_COORD( "NY_RF_CollapseDEB_S", l_U1657, l_U1660, 1 );
        PLAY_SOUND_FROM_COORD( -1, "S_NYC2_APARTMENT_COLLAPSE", l_U1651 );
        sub_14879( ref l_U1666, l_U1663, 1, 0 );
        sub_15015( ref l_U1666 );
        l_U2242 = 2;
        break;
        case 2:
        if (sub_15135( ref l_U1666 ))
        {
            sub_939( "SBA", "P_UPDATE_APT_STAIRS_RAYFIRE: tmrAptStairsRF is up", 0 );
            sub_65980( -905572943 );
            PLAY_OBJECT_ANIM( l_U1650, "NY_RF_HLWY_Rt_01", "ny_anim", 0.10000000, 0, 1 );
            SET_OBJECT_ANIM_SPEED( l_U1650, "NY_RF_HLWY_Rt_01", "ny_anim", l_U1664 );
            l_U2242 = 3;
        }
        break;
        case 3:
        if ((GET_OBJECT_ANIM_CURRENT_TIME( l_U1650, "NY_RF_HLWY_Rt_01", "ny_anim" )) >= l_U1665)
        {
            sub_65980( 162997152 );
            FREEZE_OBJECT_POSITION( l_U1650, 1 );
            sub_66274();
            sub_939( "SBA", "P_UPDATE_APT_STAIRS_RAYFIRE: eASRF_State going to inactive", 0 );
            l_U2242 = 4;
        }
        break;
        case 4: break;
    }
    return;
}

void sub_65980(unknown uParam0)
{
    sub_939( "SBA", "P_CREATE_APT_STAIRS_RAYFIRE", 0 );
    sub_17568( l_U1650 );
    l_U1650 = sub_31380( uParam0, l_U1651, l_U1654, 0, 1, 0 );
    ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1650, ref g_U3529 );
    return;
}

void sub_66274()
{
    sub_939( "SBA", "P_EARLY_CLEANUP", "***" );
    sub_17218( ref l_U966 );
    sub_17218( ref l_U1082 );
    sub_17218( ref l_U1326 );
    sub_17218( ref l_U1389 );
    sub_17218( ref l_U1421 );
    sub_17252( l_U1437 );
    sub_17396( g_U701._fU0 );
    sub_17568( g_U3044 );
    sub_17568( l_U1676 );
    sub_17568( l_U1785 );
    sub_17817( "EXPL_CAM" );
    sub_44345( g_U3090 );
    sub_44345( g_U3095 );
    sub_44345( g_U3096 );
    sub_44345( g_U773 );
    sub_44345( g_U3091 );
    sub_44345( 1654676128 );
    sub_44345( -1226437551 );
    CLEAR_INTERIOR_COLLISION_REQUIRED( l_U1015 );
    sub_66518( ref l_U1625 );
    return;
}

void sub_66518(int iParam0)
{
    iParam0->_fU20 = 0;
    iParam0->_fU16 = 0;
    return;
}

void sub_66955()
{
    sub_939( "SBA", "UNLOAD_ASSETS_APARTMENT", "***" );
    sub_44345( g_U3090 );
    sub_44345( g_U3095 );
    sub_44345( g_U3096 );
    sub_44345( 443367284 );
    sub_44345( -1725947354 );
    sub_44345( -1226437551 );
    sub_44345( g_U774 );
    sub_44345( g_U773 );
    sub_44345( -1029582816 );
    sub_44345( -1210795386 );
    sub_44345( 1654676128 );
    sub_44345( -905572943 );
    sub_44345( 162997152 );
    sub_44345( g_U3091 );
    sub_17817( "ny_anim" );
    sub_17817( "EXPL_CAM" );
    return;
}

void sub_67188(unknown uParam0)
{
    switch (uParam0)
    {
        case 0: break;
        case 1: break;
        case 2:
        case 5:
        case 6: break;
        case 7:
        case 8: break;
    }
    return;
}

