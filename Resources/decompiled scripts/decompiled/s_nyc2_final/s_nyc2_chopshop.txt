void main()
{
    l_U0 = 1;
    l_U1 = 144;
    l_U2 = "PED_DEF";
    l_U44 = 1.00000000;
    l_U56 = 0;
    l_U97 = 0;
    l_U117 = 1;
    l_U118 = 1;
    l_U158 = 0;
    l_U170 = 0;
    l_U171 = 1;
    l_U172 = 0;
    l_U173 = 1.00000000;
    l_U174 = -5.00000000;
    l_U175 = 0;
    l_U176 = 0;
    l_U177 = 0;
    l_U181 = 42;
    l_U182 = 0;
    l_U183 = 0;
    l_U184 = 0;
    l_U185 = 0;
    l_U186 = 0;
    l_U187 = 90.00000000;
    l_U188 = {0.00000000, 0.00000000, 0.00000000};
    l_U191 = {0.00000000, 0.00000000, 0.00000000};
    l_U194 = 0;
    l_U195 = 0;
    l_U196 = 0;
    l_U197 = 0;
    l_U198 = 0;
    l_U199 = 0;
    l_U200 = nil;
    l_U201 = {0.00000000, 0.00000000, 0.00000000};
    l_U204 = 0;
    l_U205 = 0;
    l_U206 = 0;
    l_U258 = 0;
    l_U259 = 0;
    l_U260 = 1;
    l_U262 = 0;
    l_U263 = 0;
    l_U264 = 1500;
    l_U275 = 0;
    l_U279 = -452828882;
    l_U280 = 941367160;
    l_U281 = 1398588339;
    l_U282 = 1706800821;
    l_U292 = 520;
    l_U293 = 0.06000000;
    l_U294 = 1;
    l_U311 = {-217.95000000, -19.23000000, -11.77000000};
    l_U314 = {0, 0, 180};
    l_U317 = {-219.00000000, -20.00000000, -6.65000000};
    l_U320 = {-45.00000000, 0.00000000, 0.00000000};
    l_U323 = {-219.00000000, -20.00000000, -7.65000000};
    l_U326 = {0, 0, 0};
    l_U329 = {-212.22800000, -19.34800000, -7.34800000};
    l_U332 = {0.00000000, 0.00000000, 270.00000000};
    l_U335 = {-217.95000000, -19.25000000, -9.55000000};
    l_U338 = {0, 0, 180};
    l_U341 = {-214.25500000, -19.40000000, -9.50000000};
    l_U344 = {0, 0, 0};
    l_U347 = {0, 0, 0};
    StrCopy( ref l_U350, "DUMMY", 32 );
    l_U358 = 1;
    l_U363 = 0;
    l_U364 = 0;
    l_U365 = 0;
    l_U368 = 0;
    l_U413 = 1;
    l_U414 = 0;
    l_U415 = 1;
    l_U416 = 0;
    l_U436 = {-224.37200000, -22.17000000, -10.10500000};
    l_U439 = 0.00000000;
    l_U440 = 1800;
    l_U441 = 0;
    l_U451 = 750;
    l_U452 = 90.55986000;
    l_U453 = -4.20000000;
    l_U591 = "mid_06_nybar_concat";
    l_U695 = 25398;
    l_U696 = 26500;
    l_U697 = "SCRIPT_MISSION\S_NYC2_CHOP_SHOP";
    l_U702 = 0;
    l_U703 = 1;
    l_U704 = 0;
    l_U705 = 0;
    l_U799 = 0;
    l_U800 = 0;
    l_U801 = 0;
    l_U802 = 0;
    l_U803 = 0;
    l_U804 = 0;
    l_U808 = 0;
    l_U809 = 0;
    l_U810 = 0;
    l_U811 = 0;
    l_U821 = 0;
    l_U861 = 0;
    l_U862 = 0;
    l_U863 = 0;
    l_U864 = 0;
    StrCopy( ref l_U880, "NY_CHOPANIM", 32 );
    l_U920 = 0;
    l_U1573 = 0;
    l_U1574 = 0;
    l_U1575 = 0;
    l_U1576 = 0;
    l_U1577 = 1;
    l_U1580 = 0;
    l_U1584 = {-214.75600000, -19.28700000, -11.97000000};
    l_U1587 = 0.17000000;
    l_U1588 = 0.25000000;
    l_U1589 = 0.31000000;
    sub_1171( "RJM", "Script s_nyc2_chopshop.sc is starting...", " " );
    l_U921 = 0;
    if ((g_U779 == 8) || (g_U779 == 7))
    {
        sub_1247( 0 );
        sub_1326( 1 );
        g_U3437[8] = 1;
    }
    else
    {
        sub_2643( l_U591, 0 );
        sub_1326( 0 );
    }
    sub_2897();
    sub_5217();
    sub_6175( 7, 0 );
    if (g_U779 != 8)
    {
        while ((NOT IS_EXITFLAG_SET()) AND (NOT sub_6478()))
        {
            WAIT( 0 );
        }
    }
    if (NOT IS_EXITFLAG_SET())
    {
        sub_6980( 0 );
        sub_7428();
    }
    while ((NOT IS_EXITFLAG_SET()) AND (g_U3437[8] == 0))
    {
        WAIT( 0 );
    }
    if (NOT IS_EXITFLAG_SET())
    {
        g_U3437[9] = 1;
        sub_1326( 1 );
        sub_8662();
        if (g_U779 == 8)
        {
            sub_27439( 1000 );
        }
        else
        {
            sub_27522();
        }
        while (NOT IS_EXITFLAG_SET())
        {
            sub_28659();
            sub_32005();
            sub_40469();
            sub_65570();
            if ((sub_65870( g_U818, 29 )) == 3)
            {
                sub_65950( g_U818, ref l_U808, ref l_U809, ref l_U810, ref l_U811, ref l_U812 );
            }
            WAIT( 0 );
        }
    }
    sub_38205();
    sub_67825();
    sub_68252( 7 );
    sub_1171( "TEH", "Script s_nyc2_chopshop.sc is ending", " " );
    if (NOT g_U3041)
    {
        if (IS_ARCADE_MODE_ACTIVE() == 0)
        {
            SWITCH_TO_LEVEL_NAME( "s_marina" );
        }
    }
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "s_nyc2_chopshop" );
    SET_EXITFLAG_RESPONSE();
    return;
}

void sub_1171(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    return;
}

void sub_1247(unknown uParam0)
{
    if ((IS_SCREEN_FADING_OUT() == 0) AND (IS_SCREEN_FADED_OUT() == 0))
    {
        DO_SCREEN_FADE_OUT( uParam0 );
        while (IS_SCREEN_FADED_OUT() == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_1326(unknown uParam0)
{
    sub_1171( "TEH", "LOAD_CHOPSHOP_ASSETS", 0 );
    if (g_U779 != 8)
    {
        sub_1390( g_U3098, uParam0 );
        sub_1390( g_U3087, uParam0 );
        sub_1390( -175351117, uParam0 );
        sub_1390( 1905166733, uParam0 );
        sub_1390( -1904663011, uParam0 );
        sub_1390( g_U3086, uParam0 );
        sub_1390( 2133803005, uParam0 );
        sub_1390( 1819908754, uParam0 );
        sub_1390( 1110984208, uParam0 );
        sub_1390( -2132846056, uParam0 );
        sub_1390( g_U778, uParam0 );
        sub_1705( "FACE_PASNYB", 0, uParam0 );
        sub_1705( ref l_U880, 0, uParam0 );
        sub_1832( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act", uParam0 );
        sub_1905( 15594167, uParam0 );
        sub_1905( -444056596, uParam0 );
        sub_1905( -1207672607, uParam0 );
        sub_1905( 1650310217, uParam0 );
        sub_2161( "s_nyc_CHOP_LIFT", l_U1576, uParam0 );
        sub_2161( "s_nyc_CHOP_PANEL", l_U1577, uParam0 );
        sub_1705( "PAS_INT", 0, uParam0 );
        if (g_U779 == 7)
        {
            sub_2299( uParam0 );
        }
        else
        {
            sub_2360( uParam0 );
        }
    }
    sub_2503( "SNYCAUD" );
    return;
}

void sub_1390(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
        sub_1495( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_1495(unknown uParam0)
{
    return;
}

void sub_1705(unknown uParam0, unknown uParam1, int iParam2)
{
    REQUEST_ANIM_DICT( uParam0, uParam1 );
    "[doubled result, dropped if not asigned]";
    if (iParam2 == 1)
    {
        while ((HAS_ANIM_DICT_LOADED( uParam0, uParam1 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_1832(unknown uParam0, int iParam1)
{
    ACTION_TREE_LOAD( uParam0 );
    if (iParam1 == 1)
    {
        while ((IS_ACTION_TREE_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_1905(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to load does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 0)
    {
        ISEQ_REQUEST( uParam0 );
        ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
        if (iParam1 == 1)
        {
            while ((ISEQ_QUERY_STATE( uParam0, 1 )) == 1)
            {
                WAIT( 0 );
            }
        }
    }
    return;
}

void sub_2161(unknown uParam0, unknown uParam1, int iParam2)
{
    if (iParam2 == 0)
    {
        REQUEST_SCRIPT_STREAM( uParam0, uParam1 );
    }
    else
    {
        while ((LOAD_SCRIPT_STREAM( uParam0, uParam1 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_2299(unknown uParam0)
{
    sub_1390( l_U281, uParam0 );
    sub_1390( l_U279, uParam0 );
    sub_1390( l_U280, uParam0 );
    return;
}

void sub_2360(unknown uParam0)
{
    sub_1390( -1513711447, uParam0 );
    sub_1390( -737544913, uParam0 );
    sub_1390( -1035251278, uParam0 );
    sub_1390( 1679037765, uParam0 );
    sub_1390( -1838550544, uParam0 );
    sub_1390( -1332728256, uParam0 );
    sub_1390( -1629582627, uParam0 );
    sub_1390( 493783035, uParam0 );
    sub_1390( l_U282, uParam0 );
    sub_2299( uParam0 );
    return;
}

void sub_2503(unknown uParam0)
{
    StrCopy( ref g_U157._fU0, uParam0, 16 );
    sub_2523();
    return;
}

void sub_2523()
{
    int I;

    for ( I = 0; I <= 8; I++ )
    {
        g_U157._fU16[I]._fU0 = nil;
        g_U157._fU16[I]._fU4 = 0;
        g_U157._fU92[I] = 0;
    }
    return;
}

void sub_2643(unknown uParam0, int iParam1)
{
    if (HAS_CUTSCENE_LOADED())
    {
        if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
        {
            SCRIPT_ASSERT( "Another cutscene is already loaded.  You can only load one cutscene into memory.  Your current cutscene will not load into memory.", 0 );
        }
    }
    if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
    {
        PRE_STREAM_SEAMLESS_CUTSCENE( uParam0 );
        if (iParam1 == 1)
        {
            while ((CUTSCENE_IS_LOADED( uParam0 )) == 0)
            {
                WAIT( 0 );
            }
        }
    }
    return;
}

void sub_2897()
{
    sub_2942( ref l_U1270, g_U781[7]._fU0, g_U781[7]._fU12, -1756913695, 26, 6, 0, 0, 0 );
    sub_2942( ref l_U1283, g_U781[8]._fU0, g_U781[8]._fU12, -1756913695, 26, 6, 0, 0, 0 );
    sub_2942( ref l_U1302[0], g_U3125, g_U3128, 735889722, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U1302[1], g_U3129, g_U3132, -1782036333, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U1302[2], g_U3133, g_U3136, 1465702486, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U1302[3], g_U3137, g_U3140, 1064552273, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U1366[0], -207.95980000, -16.48377000, -11.34332000, 109.10000000, -1130325734, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U1366[1], -208.06930000, -21.71379000, -11.42202000, 125.60000000, 1398695518, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U1402[0], -209.68340000, -33.91483000, -11.46487000, 75.77530000, 1055358562, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U1424[0], -206.87360000, -35.84492000, -11.42821000, 89.20000000, -1470911906, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U1424[1], -206.69270000, -36.36082000, -11.42825000, 89.20000000, 696353003, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U1424[2], -205.14990000, -35.92969000, -11.42822000, 103.85560000, 266938355, 7, 3, 2, 0, 0 );
    sub_3565( ref l_U995, "TETH_CH_combatarea", -209.00000000, -26.14000000, -11.50000000, 24.00000000, 25.00000000, 3.78000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2942( ref l_U1484[0], -176.15870000, -15.91955000, -11.76447000, 90.00000000, 910290202, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U1484[1], -179.12950000, -12.00732000, -12.49424000, 0.41294800, 1324268222, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U1484[2], -180.08530000, -26.42954000, -11.27322000, 359.83650000, -619300089, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U1484[3], -175.31520000, -6.49398600, -12.37163000, 111.81320000, -1734946199, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U1484[4], -176.74140000, -15.70454000, -11.76447000, 179.96710000, -1963149332, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U1484[5], -172.85920000, -24.43697000, -11.36646000, 334.16770000, 1098813231, 7, 3, 2, 0, 0 );
    sub_3968( ref l_U996, "TRIG_CHSHP_TO_BACKYARDS", -199.25290000, -20.98930000, -11.42754000, 24.50000000, 24.50000000, 5.74000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3968( ref l_U1017, "tb_BY_MaxStartsFight", -191.32000000, -13.68000000, -12.02000000, 15.00000000, 10.00000000, 5.63000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3968( ref l_U1080, "TRIG_CHSHP_DEATHBOX", -188.40000000, -17.19000000, -25.01000000, 100.69000000, 45.50000000, 3.74000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3968( ref l_U1059, "TRIG_PLAYER_START", -221.98010000, -22.17252000, -11.46487000, 2.00000000, 2.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3968( ref l_U894, "TRIG_CHSHP_DROPKILL", -214.75600000, -19.28700000, -12.03300000, 4.80000000, 1.95000000, 5.63000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3968( ref l_U1038, "TRIG_NEAR_GATE", -196.30000000, -21.15098000, -11.46556000, 2.00000000, 2.00000000, 9.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3968( ref l_U1122, "TRIG_CHS_DEATHBOX_S", -203.47000000, -29.39000000, -11.66000000, 10.69000000, 35.50000000, 3.74000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3968( ref l_U1101, "TRIG_CHS_DEATHBOX_F", -220.02000000, -25.90000000, -12.34000000, 25.35000000, 25.00000000, 4.74000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3968( ref l_U1185, "TRIG_CHSHP_SHOULDSHOOT", -211.23000000, -19.96000000, -12.03000000, 30.30000000, 13.00000000, 5.63000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3968( ref l_U1206, "TRIG_BY_SHOULDSHOOT", -174.57710000, -16.84823000, -11.76447000, 30.00000000, 10.00000000, 5.63000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3968( ref l_U1143, "TRIG_YARD_LEFT", -176.46000000, -11.08000000, -12.70000000, 18.00000000, 15.00000000, 3.74000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3968( ref l_U1164, "TRIG_YARD_RIGHT", -176.46000000, -22.05000000, -12.70000000, 18.00000000, 15.00000000, 3.74000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3968( ref l_U1228, "TRIG_CHSHP_SIDEOFFICE", -216.45950000, -35.12066000, -11.46487000, 18.00000000, 4.00000000, 4.74000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_3968( ref l_U1249, "TRIG_BY_PASS_DEATH", -214.90000000, -25.21000000, -11.66000000, 35.00000000, 24.00000000, 3.74000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_5155( ref l_U1227, "TRIG_PASSOS_TARGETING", -215.25610000, -25.54749000, -11.46490000, 13.71000000, 15.66000000, 4.47000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    return;
}

void sub_2942(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

void sub_3565(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 2, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

void sub_3968(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    StrCopy( ref iParam0->_fU0, uParam1, 64 );
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = {uParam2};
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 1, iParam0 + 0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

void sub_5155(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 4, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

void sub_5217()
{
    l_U861 = 0;
    l_U862 = 0;
    l_U863 = 0;
    l_U864 = 0;
    g_U3038 = 0;
    l_U1583 = 1;
    l_U821 = 0;
    l_U701 = 0;
    l_U702 = 0;
    l_U703 = 1;
    l_U704 = 0;
    l_U919 = 0;
    l_U920 = 0;
    l_U1573 = 0;
    l_U1574 = 0;
    l_U1575 = 0;
    l_U1580 = 0;
    l_U801 = 0;
    l_U802 = 0;
    l_U803 = 0;
    l_U804 = 0;
    l_U805 = 0;
    l_U806 = 0;
    l_U705 = 0;
    l_U800 = 0;
    l_U441 = 0;
    l_U554 = 0;
    sub_5393( ref l_U442 );
    sub_5393( ref l_U582 );
    STOP_SCRIPT_STREAM( l_U1576 );
    STOP_SCRIPT_STREAM( l_U1577 );
    sub_5542( ref g_U2972, 1 );
    sub_5743();
    l_U808 = 0;
    l_U809 = 0;
    l_U810 = 0;
    l_U811 = 0;
    return;
}

void sub_5393(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

void sub_5542(int iParam0, int iParam1)
{
    int iVar4;
    float fVar5;

    if ((sub_5554( iParam0 )) == 0)
    {
        sub_5620( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
    }
    else
    {
        iVar4 = 0;
        fVar5 = 0.00000000;
        GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref iVar4, ref fVar5 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar5 );
    }
    return;
}

int sub_5554(int iParam0)
{
    int iVar3;

    iVar3 = DOES_OBJECT_OF_TYPE_EXIST_AT_COORDS( iParam0->_fU4, 1.00000000, iParam0->_fU0 );
    if (iVar3 == 1)
    {
        return 1;
    }
    return 0;
}

void sub_5620(unknown uParam0)
{
    (uParam0^) = {(uParam0^)};
    return;
}

void sub_5743()
{
    sub_1171( "CCB", "P_INITIALIZE_SP_CHALLENGES", 0 );
    l_U1581 = 0;
    if (NOT (SCRIPT_VAR_HASH_EXISTS( 1701971384 )))
    {
        sub_1171( "CCB", "Creating the OldPainless script variable...", 0 );
        SCRIPT_VAR_HASH_ADD_INT( 1701971384 );
        if (SCRIPT_VAR_HASH_EXISTS( 1701971384 ))
        {
            sub_1171( "CCB", "The OldPainless script variable was successfully created...", 0 );
        }
        else
        {
            sub_1171( "CCB", "The OldPainless script variable is NOT valid!!!", 0 );
        }
    }
    else
    {
        sub_1171( "CCB", "The OldPainless script variable was already created...", 0 );
        SCRIPT_VAR_HASH_SET_INT( 1701971384, 0 );
    }
    return;
}

void sub_6175(unknown uParam0, unknown uParam1)
{
    sub_6191( -862236369, 1 );
    switch (uParam0)
    {
        case 0:
        case 1:
        case 2:
        sub_6191( 434544317, uParam1 );
        sub_6191( -691403429, uParam1 );
        break;
        case 3:
        case 4:
        case 5:
        case 6:
        sub_6191( 434544317, uParam1 );
        sub_6191( -691403429, uParam1 );
        sub_6191( 1478009203, uParam1 );
        sub_6191( -1074756423, uParam1 );
        break;
        case 7:
        case 8:
        sub_6191( 434544317, uParam1 );
        sub_6191( -691403429, uParam1 );
        sub_6191( -1074756423, uParam1 );
        break;
    }
    return;
}

void sub_6191(unknown uParam0, boolean bParam1)
{
    REQUEST_WEAPON( uParam0 );
    if (bParam1)
    {
        while ((HAS_WEAPON_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

int sub_6478()
{
    if ((HAS_WEAPON_LOADED( -1074756423 )) AND ((HAS_WEAPON_LOADED( -691403429 )) AND ((HAS_WEAPON_LOADED( 434544317 )) AND ((ISEQ_QUERY_STATE( 1650310217, 2 )) AND ((ISEQ_QUERY_STATE( -1207672607, 2 )) AND ((ISEQ_QUERY_STATE( -444056596, 2 )) AND ((ISEQ_QUERY_STATE( 15594167, 2 )) AND ((IS_ACTION_TREE_LOADED( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act" )) AND ((HAS_ANIM_DICT_LOADED( ref l_U880, 0 )) AND ((HAS_ANIM_DICT_LOADED( "FACE_PASNYB", 0 )) AND ((HAS_MODEL_LOADED( g_U778 )) AND ((HAS_MODEL_LOADED( -2132846056 )) AND ((HAS_MODEL_LOADED( 1110984208 )) AND ((HAS_MODEL_LOADED( 1819908754 )) AND ((HAS_MODEL_LOADED( 2133803005 )) AND ((HAS_MODEL_LOADED( g_U3086 )) AND ((HAS_MODEL_LOADED( -1904663011 )) AND ((HAS_MODEL_LOADED( 1905166733 )) AND ((HAS_MODEL_LOADED( -175351117 )) AND (HAS_MODEL_LOADED( g_U3098 )))))))))))))))))))))
    {
        sub_1171( "RJM", "HAVE_CHOPSHOP_ASSETS_LOADED - everything's loaded", 0 );
        return 1;
    }
    sub_1171( "RJM", "HAVE_CHOPSHOP_ASSETS_LOADED - Still loading", 0 );
    return 0;
}

void sub_6980(boolean bParam0)
{
    vector vVar3;
    vector vVar6;

    sub_1171( "BSW", "CREATE_BACKYARDS_GATE", "###" );
    vVar3 = {-197.51100000, -20.24700000, -11.58900000};
    if (bParam0)
    {
        vVar3 = {-197.67200000, -22.01400000, -11.47000000};
    }
    vVar6 = {0.00000000, 0.00000000, 0.00000000};
    sub_7103( l_U699 );
    sub_1390( g_U3100, 1 );
    l_U699 = sub_7168( g_U3100, vVar3, vVar6, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U699 ))
    {
        FREEZE_OBJECT_POSITION( l_U699, 1 );
    }
    return;
}

void sub_7103(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

void sub_7168(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
        sub_1390( uParam0, 1 );
    }
    Result = CREATE_OBJECT_NO_OFFSET( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

void sub_7428()
{
    sub_1171( "BSW", "CREATE_CHOP_SHOP_WORKERS", "***" );
    sub_2942( ref l_U655[0], 0.00000000, 0.00000000, 0.00000000, 0.00000000, -12435558, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U655[1], 0.00000000, 0.00000000, 0.00000000, 0.00000000, -1625386151, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U655[2], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 606214312, 7, 3, 2, 0, 0 );
    sub_7612( ref l_U651 );
    l_U651[0] = sub_7746( ref l_U655[0] );
    l_U651[1] = sub_7746( ref l_U655[1] );
    l_U651[2] = sub_7746( ref l_U655[2] );
    sub_8450( ref l_U651, 1 );
    return;
}

void sub_7612(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_7646( (uParam0^)[I] );
    }
    return;
}

void sub_7646(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

void sub_7746(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
        sub_1390( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
    sub_8225( iParam0->_fU40 );
    sub_8305( iParam0->_fU40 );
    return iParam0->_fU40;
}

void sub_8225(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

void sub_8305(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

void sub_8450(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_8484( ref (uParam0^)[I], uParam1 );
    }
    return;
}

void sub_8484(unknown uParam0, unknown uParam1)
{
    if (sub_8497( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), uParam1 );
    }
    return;
}

int sub_8497(unknown uParam0)
{
    if ((NOT (IS_PED_DEAD( uParam0 ))) AND (DOES_PED_EXIST( uParam0 )))
    {
        return 1;
    }
    return 0;
}

void sub_8662()
{
    if (g_U779 != 8)
    {
        sub_8684();
        sub_9672();
        sub_10019();
    }
    if (g_U779 == 7)
    {
        sub_1171( "TEH", "INITIALIZE_PLAYER_BY_CHECKPOINT says we're in MCE_BACK_CHOPSHOP", " " );
        sub_1705( "FACE_PASNYB", 0, 1 );
        sub_1832( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act", 1 );
        sub_1905( 15594167, 1 );
        sub_1905( -444056596, 0 );
        sub_1905( -1207672607, 0 );
        sub_1905( 1650310217, 0 );
        sub_11222( 7, 0 );
        if (NOT (sub_11595( ref l_U923 )))
        {
            if ((IS_PLAYER_DEAD( sub_11742() )) == 0)
            {
                sub_13971( sub_11720(), sub_15876( 7 ), 200, 0, 1 );
            }
        }
        sub_15914();
        l_U413 = 2;
        g_U780 = 7;
        sub_16639( ref l_U923, 7, sub_11720(), g_U3141[7]._fU0, g_U3141[7]._fU12, g_U3141[7]._fU16, g_U3141[7]._fU20, 0 );
        sub_20254( 0 );
        l_U921 = 1;
        sub_23211();
    }
    else if (g_U779 == 8)
    {
        sub_1171( "RJM", "INITIALIZE_PLAYER_BY_CHECKPOINT says we're in MCE_BACKYARDS", " " );
        sub_23421();
        sub_11222( 8, 0 );
        g_U3437[8] = 1;
        if (NOT (sub_11595( ref l_U959 )))
        {
            sub_13971( sub_11720(), sub_15876( 8 ), 200, 0, 1 );
        }
        sub_1705( "FACE_PASNYB", 0, 1 );
        sub_1832( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act", 1 );
        sub_1905( -444056596, 1 );
        sub_1905( -1207672607, 1 );
        sub_2643( "mid_08_nybar_concat", 1 );
        sub_20372( ref l_U1283 );
        sub_23699();
        sub_26418( ref l_U1563 );
        sub_26565();
        g_U780 = 8;
        sub_16639( ref l_U959, 8, sub_11720(), g_U3141[8]._fU0, g_U3141[8]._fU12, g_U3141[8]._fU16, g_U3141[8]._fU20, 0 );
        l_U413 = 3;
        l_U703 = 0;
        sub_27012();
        l_U921 = 5;
    }
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
    return;
}

void sub_8684()
{
    sub_1171( "TEH", "P_CREATE_DROP_CAR", "###" );
    sub_7103( l_U888 );
    l_U888 = sub_8770( -2132846056, l_U1584, 0.00000000, 0.00000000, 0.00000000, 0, 1, 0 );
    if ((DOES_OBJECT_EXIST( l_U888 )) == 1)
    {
        FREEZE_OBJECT_POSITION( l_U888, 1 );
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U888, ref g_U3569 );
    }
    sub_7103( l_U889 );
    l_U889 = sub_8770( 2133803005, l_U1584, 0.00000000, 0.00000000, 0.00000000, 0, 1, 0 );
    if ((DOES_OBJECT_EXIST( l_U889 )) == 1)
    {
        FREEZE_OBJECT_POSITION( l_U889, 1 );
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U889, ref g_U3569 );
    }
    sub_7103( l_U890 );
    l_U890 = sub_8770( 1819908754, l_U1584, 0.00000000, 0.00000000, 0.00000000, 0, 1, 0 );
    if ((DOES_OBJECT_EXIST( l_U890 )) == 1)
    {
        FREEZE_OBJECT_POSITION( l_U890, 1 );
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U890, ref g_U3569 );
    }
    sub_7103( l_U891 );
    l_U891 = sub_8770( 1110984208, l_U1584, 0.00000000, 0.00000000, 0.00000000, 0, 1, 0 );
    if ((DOES_OBJECT_EXIST( l_U891 )) == 1)
    {
        FREEZE_OBJECT_POSITION( l_U891, 1 );
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U891, ref g_U3569 );
    }
    sub_7103( l_U892 );
    l_U892 = sub_8770( -175351117, -214.78500000, -17.66700000, -10.14200000, 0.00000000, 0.00000000, 0.00000000, 0, 1, 0 );
    if ((DOES_OBJECT_EXIST( l_U892 )) == 1)
    {
        SET_OBJECT_PROOFS( l_U892, 0, 1, 1, 1, 0 );
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U892, ref g_U3569 );
        SET_OBJECT_TARGETTABLE( l_U892, 1 );
        CAMERA_CAN_TARGET_OBJECT( 1, l_U892 );
        SET_OBJECT_HEALTH( l_U892, 1 );
        SET_OBJECT_ONLY_DAMAGED_BY_PLAYER( l_U892, 1 );
    }
    sub_7103( l_U893 );
    l_U893 = sub_8770( -175351117, -214.78500000, -20.99900000, -10.14200000, 0.00000000, 0.00000000, -180.00000000, 0, 1, 0 );
    if ((DOES_OBJECT_EXIST( l_U893 )) == 1)
    {
        SET_OBJECT_PROOFS( l_U893, 0, 1, 1, 1, 0 );
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U893, ref g_U3569 );
        SET_OBJECT_TARGETTABLE( l_U893, 1 );
        CAMERA_CAN_TARGET_OBJECT( 1, l_U893 );
        SET_OBJECT_HEALTH( l_U893, 1 );
        SET_OBJECT_ONLY_DAMAGED_BY_PLAYER( l_U893, 1 );
    }
    return;
}

void sub_8770(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
        sub_1390( uParam0, 1 );
    }
    Result = CREATE_OBJECT( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

void sub_9672()
{
    sub_1171( "TEH", "P_CREATE_GAS_TANKS", "###" );
    sub_7103( l_U865[0] );
    l_U865[0] = sub_7168( 1905166733, -208.00000000, -25.20000000, -9.95000000, 0.00000000, 65446, 0.00000000, 0, 1, 0 );
    if ((DOES_OBJECT_EXIST( l_U865[0] )) == 1)
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U865[0], ref g_U3569 );
        SET_OBJECT_ONLY_DAMAGED_BY_PLAYER( l_U865[0], 1 );
        SET_OBJECT_HEALTH( l_U865[0], 20 );
        SET_OBJECT_AS_PATH_OBSTACLE( l_U865[0] );
        CAMERA_CAN_TARGET_OBJECT( 1, l_U865[0] );
    }
    sub_7103( l_U869[0] );
    l_U869[0] = sub_7168( -1904663011, -200.40040000, -23.12959000, -11.42762000, 0.00000000, 0.00000000, 270.00000000, 0, 1, 0 );
    if ((DOES_OBJECT_EXIST( l_U869[0] )) == 1)
    {
        SET_OBJECT_ONLY_DAMAGED_BY_PLAYER( l_U869[0], 1 );
        SET_OBJECT_AS_PATH_OBSTACLE( l_U869[0] );
    }
    return;
}

void sub_10019()
{
    sub_1171( "SBA", "P_CREATE_CHOPSHOP_PLACEMENTS", "***" );
    sub_10077();
    if ((DOES_PLACEMENT_EXIST( l_U915[0] )) == 0)
    {
        l_U915[0] = sub_10654( -4072149, -217.11000000, -37.25500000, -10.27000000, 0.00000000, 0.00000000, 1.30000000, 0, 1, 0, 1119092736 );
        ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U915[0], ref g_U3569 );
    }
    return;
}

void sub_10077()
{
    sub_1171( "CO", "P_CREATE_S_NY2_GG_LM_03", 0 );
    sub_10191( ref g_U755, g_U778, -1393653839, 1994234110, -211.07000000, -34.03000000, -10.52000000, 0.00000000, 1.50000000, 3.00000000, "GtaMloRoom02" );
    sub_10320( ref g_U755 );
    return;
}

void sub_10191(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    if (NOT IS_ARCADE_MODE_ACTIVE())
    {
        iParam0->_fU4 = uParam1;
        iParam0->_fU8 = uParam2;
        iParam0->_fU12 = uParam3;
        iParam0->_fU16 = {uParam4};
        iParam0->_fU28 = {uParam7};
        StrCopy( ref iParam0->_fU40, uParam10, 32 );
    }
    else
    {
        sub_1171( "CO", "NO GOLDEN GUNS FOR ARCADE", 0 );
    }
    return;
}

void sub_10320(int iParam0)
{
    sub_1171( "CO", "P_CreateCollectible", 0 );
    if (NOT IS_ARCADE_MODE_ACTIVE())
    {
        if ((sub_10381( iParam0->_fU12 )) == 1)
        {
            sub_1171( "CO", "HAS BEEN COLLECTED.", 0 );
        }
        else
        {
            sub_1171( "CO", "has never been collected.", 0 );
        }
        if ((sub_10381( iParam0->_fU12 )) == 0)
        {
            sub_10586( iParam0->_fU0 );
            iParam0->_fU0 = sub_10654( iParam0->_fU8, iParam0->_fU16, iParam0->_fU28, 1, 0, 0, 1119092736 );
            if (NOT (IS_STRING_NULL( iParam0 + 40 )))
            {
                if ((DOES_PLACEMENT_EXIST( iParam0->_fU0 )) == 1)
                {
                    sub_1171( "CO", "Added collectible to interior", 0 );
                    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( iParam0->_fU0, iParam0 + 40 );
                }
            }
        }
    }
    else
    {
        sub_1171( "CO", "NO GOLDEN GUNS FOR ARCADE", 0 );
    }
    return;
}

int sub_10381(unknown uParam0)
{
    unknown uVar3;
    float fVar4;

    if (IS_COLLECTABLE_ENABLED() == 0)
    {
        return 1;
    }
    uVar3 = uParam0;
    fVar4 = STAT_HASH_GET_FLOAT( uVar3 );
    if (ARE_SP_STATS_LOADED() == 1)
    {
        if ((STAT_HASH_EXISTS( uVar3 )) == 1)
        {
            if (fVar4 > 0.00000000)
            {
                return 1;
            }
        }
    }
    return 0;
}

void sub_10586(unknown uParam0)
{
    if ((DOES_PLACEMENT_EXIST( uParam0 )) == 1)
    {
        REMOVE_PLACEMENT( uParam0 );
    }
    return;
}

void sub_10654(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, int iParam8, unknown uParam9, unknown uParam10)
{
    unknown Result;

    Result = CREATE_PLACEMENT_ROTATE( uParam0, uParam1, uParam4, uParam7, 0, uParam9, uParam10 );
    if (iParam8 == 1)
    {
        while ((DOES_PLACEMENT_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    return Result;
}

void sub_11222(unknown uParam0, unknown uParam1)
{
    sub_1171( "BSW", "SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR start...", 0 );
    SET_WEATHER_TRANSITION_IMMEDIATE( uParam1 );
    switch (uParam0)
    {
        case 0:
        case 1:
        case 20:
        case 30:
        SET_TIME_OF_DAY( 12, 0 );
        FREEZE_TIME_OF_DAY( 12, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
        break;
        case 7:
        SET_TIME_OF_DAY( 18, 0 );
        FREEZE_TIME_OF_DAY( 18, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
        break;
        case 2:
        case 3:
        case 4:
        case 5:
        case 6:
        case 8:
        case 21:
        case 22:
        case 24:
        SET_TIME_OF_DAY( 18, 0 );
        FREEZE_TIME_OF_DAY( 18, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "SNOW_LIGHT" );
        break;
        default:
        SET_TIME_OF_DAY( 12, 0 );
        FREEZE_TIME_OF_DAY( 12, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
        break;
    }
    return;
}

int sub_11595(unknown uParam0)
{
    sub_1171( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U0 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U1 );
            sub_11786( uParam0, sub_11720() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

int sub_11720()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED( sub_11742() );
    }
    return 0;
}

void sub_11742()
{
    return GET_PLAYER_ID();
}

void sub_11786(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

    sub_1171( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U0)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
    sub_11970( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
        sub_13047( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 = sub_13339( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
        sub_13686( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 = sub_13339( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
        sub_13686( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 = sub_13339( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
        sub_13686( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 = sub_13971( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
        sub_13686( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 = sub_13971( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
        sub_13686( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U0 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if ((sub_14464( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
    sub_14625( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING( sub_11720(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U0)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U0 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
    sub_1171( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

void sub_11970(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 = sub_12002( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

int sub_12002(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

void sub_13047(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

void sub_13339(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                }
            }
        }
    }
    else
    {
        sub_1495( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

void sub_13686(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

void sub_13971(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                }
            }
        }
    }
    else
    {
        sub_1495( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

int sub_14464(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

void sub_14625(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 = sub_12002( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
    sub_14697( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

void sub_14697(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

int sub_15876(unknown uParam0)
{
    uParam0 = uParam0;
    return -862236369;
}

void sub_15914()
{
    sub_15924();
    sub_16050();
    sub_16148();
    sub_16248( 1 );
    sub_16408( 0 );
    return;
}

void sub_15924()
{
    int I;

    sub_7103( l_U302 );
    sub_7103( l_U295 );
    I = 0;
    for ( I = 0; I < l_U299; I++ )
    {
        sub_7103( l_U299[I] );
    }
    I = 0;
    for ( I = 0; I < l_U296; I++ )
    {
        sub_7103( l_U296[I] );
    }
    return;
}

void sub_16050()
{
    sub_7103( l_U303 );
    sub_7103( l_U304 );
    sub_7103( l_U305 );
    sub_7103( l_U306 );
    sub_7103( l_U307 );
    sub_7103( l_U308 );
    sub_7103( l_U309 );
    sub_7103( l_U310 );
    return;
}

void sub_16148()
{
    sub_1390( l_U281, 1 );
    sub_7103( l_U295 );
    l_U295 = sub_7168( l_U281, l_U329, l_U332, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U295 ))
    {
        FREEZE_OBJECT_POSITION( l_U295, 1 );
    }
    return;
}

void sub_16248(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;

    if (iParam0 == 0)
    {
        uVar3 = {l_U335};
        uVar6 = {l_U338};
    }
    else
    {
        uVar3 = {l_U341};
        uVar6 = {l_U344};
    }
    sub_1390( l_U279, 1 );
    sub_7103( l_U299[iParam0] );
    l_U299[iParam0] = sub_7168( l_U279, uVar3, uVar6, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U299[iParam0] ))
    {
        FREEZE_OBJECT_POSITION( l_U299[iParam0], 1 );
    }
    return;
}

void sub_16408(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;

    if (iParam0 == 0)
    {
        uVar3 = {l_U335};
        uVar6 = {l_U338};
    }
    else
    {
        uVar3 = {l_U341};
        uVar6 = {l_U344};
    }
    sub_1390( l_U280, 1 );
    sub_7103( l_U296[iParam0] );
    l_U296[iParam0] = sub_7168( l_U280, uVar3, uVar6, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U296[iParam0] ))
    {
        FREEZE_OBJECT_POSITION( l_U296[iParam0], 1 );
    }
    return;
}

void sub_16639(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

    sub_1171( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
        sub_1171( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
        sub_14625( iParam1 );
        sub_16898( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
            sub_17349( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
            sub_17349( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_17581( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
            sub_17349( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_17581( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_17581( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
            sub_17349( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_17581( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_17581( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_17581( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
            sub_17349( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_17581( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_17581( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_17581( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if (sub_17581( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
            sub_19139( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U1, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
    sub_1171( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

void sub_16898(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 = sub_12002( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
        sub_1171( "TEH", "Ending context", 0 );
        sub_1171( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

void sub_17349(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

void sub_17581(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

void sub_19139(int iParam0)
{
    sub_1495( "CHECKPOINT DATA" );
    sub_19178( iParam0->_fU4 );
    sub_19201( iParam0->_fU16 );
    sub_19201( iParam0->_fU20 );
    sub_19201( iParam0->_fU24 );
    sub_19244( iParam0->_fU28 );
    sub_19244( iParam0->_fU56 );
    sub_19244( iParam0->_fU60 );
    sub_19244( iParam0->_fU64 );
    sub_19244( iParam0->_fU68 );
    sub_19244( iParam0->_fU72 );
    sub_19244( iParam0->_fU76 );
    sub_19244( iParam0->_fU80 );
    sub_19244( iParam0->_fU84 );
    sub_19244( iParam0->_fU88 );
    sub_19244( iParam0->_fU92 );
    sub_19201( iParam0->_fU32 );
    sub_19244( iParam0->_fU36 );
    sub_19244( iParam0->_fU40 );
    sub_19244( iParam0->_fU44 );
    sub_19201( iParam0->_fU136 );
    sub_19449( iParam0->_fU140 );
    sub_19244( iParam0->_fU52 );
    sub_1495( "---nRightHolsterAttachmentEnabled: " );
    sub_19244( iParam0->_fU96 );
    sub_1495( "---nRightHolsterAttachmentToggled: " );
    sub_19244( iParam0->_fU100 );
    sub_1495( "---nLeftHolsterAttachmentEnabled: " );
    sub_19244( iParam0->_fU104 );
    sub_1495( "---nLeftHolsterAttachmentToggled: " );
    sub_19244( iParam0->_fU108 );
    sub_1495( "---nRifleHolsterAttachmentEnabled: " );
    sub_19244( iParam0->_fU112 );
    sub_1495( "---nRifleHolsterAttachmentToggled: " );
    sub_19244( iParam0->_fU116 );
    sub_1495( "---nRightHandAttachmentEnabled: " );
    sub_19244( iParam0->_fU120 );
    sub_1495( "---nRightHandAttachmentToggled: " );
    sub_19244( iParam0->_fU124 );
    sub_1495( "---nLeftHandAttachmentEnabled: " );
    sub_19244( iParam0->_fU128 );
    sub_1495( "---nLeftHandAttachmentToggled: " );
    sub_19244( iParam0->_fU132 );
    sub_19244( l_U1 );
    sub_19244( 144 );
    return;
}

void sub_19178(unknown uParam0, unknown uParam1, unknown uParam2)
{
    return;
}

void sub_19201(unknown uParam0)
{
    return;
}

void sub_19244(unknown uParam0)
{
    return;
}

void sub_19449(boolean bParam0)
{
    if (bParam0)
    {
        ;
    }
    return;
}

void sub_20254(int iParam0)
{
    switch (l_U922)
    {
        case 0:
        sub_1171( "SBA", "P_HANDLE_PASSOS_CHOPSHOP: Starting VIG22", "***" );
        sub_20372( ref l_U1270 );
        sub_1905( 15594167, 1 );
        sub_1905( -444056596, 1 );
        if ((ISEQ_QUERY_STATE( 15594167, 3 )) == 0)
        {
            sub_1171( "BSW", "VIG22 starting independent of cutscene", "***" );
            sub_20978( g_U818, g_U781[7]._fU0, g_U781[7]._fU12 );
            sub_21035();
            ISEQ_START( 15594167 );
        }
        sub_21185( ref l_U709, 8000, 1, 0 );
        sub_21185( ref l_U718, 8000, 1, 0 );
        sub_21335( ref l_U709 );
        l_U1580 = 1;
        l_U922 = 1;
        break;
        case 1:
        if (iParam0 == 0)
        {
            l_U922 = 6;
        }
        else if (sub_21488())
        {
            PED_SET_ACTION_INTENTION( g_U818, 58, 1000, 0, 0, 0 );
        }
        else if (sub_21622())
        {
            PED_SET_ACTION_INTENTION( g_U818, 55, -1, 0, 0, 0 );
            if ((iParam0 > 1) AND (l_U800 < 2))
            {
                if (sub_22412( ref l_U709 ))
                {
                    sub_5393( ref l_U709 );
                    sub_21335( ref l_U709 );
                    l_U1580 = 1;
                }
                if (l_U1580)
                {
                    if (PED_ANIM_EVENT( g_U818, -1531652494 ))
                    {
                        sub_5393( ref l_U709 );
                        sub_21335( ref l_U709 );
                        l_U1580 = 0;
                        if (sub_22672( g_U818, l_U1578, ref l_U799 ))
                        {
                            SET_PED_GORE_FROM_NPC( g_U818, 1 );
                            sub_1171( "SBA", "VIG_22 - Passos KILLING TARGET", "***" );
                            sub_22920( l_U1578 );
                            l_U800++;
                            SET_PED_GORE_FROM_NPC( g_U818, 0 );
                        }
                    }
                }
            }
        }
        else
        {
            PED_FINISH_ACTION_INTENTION( g_U818, 55 );
            sub_5393( ref l_U709 );
            SET_PED_GORE_FROM_NPC( g_U818, 0 );
        };;;
        break;
        case 6:
        sub_1171( "TEH", "Passos leaving cover", " " );
        l_U922 = 7;
        break;
        case 7: break;
    }
    return;
}

void sub_20372(unknown uParam0)
{
    sub_1171( "SBA", "CREATE_CHOPSHOP_PASSOS", "***" );
    sub_7646( g_U818 );
    g_U818 = sub_7746( uParam0 );
    if (sub_8497( g_U818 ))
    {
        SET_PED_GORE_FROM_NPC( g_U818, 1 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U818, 1 );
        sub_13971( g_U818, -862236369, 25000, 0, 1 );
        sub_20512( ref g_U818 );
    }
    l_U806 = 1;
    return;
}

void sub_20512(unknown uParam0)
{
    sub_1171( "SBA", "P_SETUP_PASSOS_GENERAL_ATTRIBUTES", "***" );
    if (sub_8497( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), 1 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^), 1 );
        SET_PED_VALIDATE_BULLET_CAM_HIT( (uParam0^), 0 );
        SET_AI_SHOULD_ALWAYS_MISS_PED( (uParam0^), 1 );
        SET_CAN_AI_KICK_THROUGH_CORPSES( (uParam0^), 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_AI_TEMPLATE( (uParam0^), "AIT_NORMAL" );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( (uParam0^), 1 );
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^), 1 );
        SET_PED_GORE( (uParam0^), 0 );
        SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( (uParam0^), 0 );
        SET_PED_PROOFS( (uParam0^), 0, 1, 1, 1, 1 );
        SET_PED_ALLOWED_TO_SURRENDER( (uParam0^), 0 );
        SET_PED_CAN_AVOID_DEATH_ZONES( (uParam0^), 0 );
        SET_PED_STAND_GROUND_ON_PLAYER_IMPACT( (uParam0^), 1 );
        SET_PED_CAN_PUSH_PLAYER( (uParam0^), 1 );
        SET_PED_RESIST_TO_OBJECT_COLLISION( (uParam0^), 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_CAN_BE_TARGETTED( (uParam0^), 0 );
        SET_PED_CONSUMING_AMMO( (uParam0^), 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^), 1 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^), 1 );
    }
    return;
}

void sub_20978(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

void sub_21035()
{
    sub_1171( "TEH", "REGISTER_PEDS_VIG_22- start", 0 );
    ISEQ_REGISTER_ENTITY( 15594167, "passos", g_U818, 0 );
    sub_1171( "TEH", "REGISTER_PEDS_VIG_22 - end", 0 );
    return;
}

void sub_21185(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

void sub_21335(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

int sub_21488()
{
    int iVar2;

    if (((IS_PED_DEAD( g_U818 )) == 0) AND ((DOES_PED_EXIST( g_U818 )) == 1))
    {
        if (HAS_BULLET_IMPACTED_IN_AREA( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( g_U818 ), 4.00000000, ref iVar2 ))
        {
            if (iVar2 == sub_11720())
            {
                return 1;
            }
        }
    }
    return 0;
}

int sub_21622()
{
    int I;

    if (sub_8497( l_U1578 ))
    {
        if (sub_21657( l_U1578, l_U1227 ))
        {
            return 1;
        }
        else
        {
            l_U1578 = nil;
        }
    }
    if (NOT (sub_8497( l_U1578 )))
    {
        sub_21750( g_U818 );
        for ( I = 0; I <= 3; I++ )
        {
            if (sub_8497( l_U1355[I] ))
            {
                if (sub_21657( l_U1355[I], l_U1227 ))
                {
                    sub_21867( g_U818, l_U1355[I] );
                    l_U1578 = l_U1355[I];
                    l_U799 = GET_PED_HEALTH( l_U1578 );
                    return 1;
                }
            }
        }
        for ( I = 0; I <= 1; I++ )
        {
            if (sub_8497( l_U1393[I] ))
            {
                if (sub_21657( l_U1393[I], l_U1227 ))
                {
                    sub_21867( g_U818, l_U1393[I] );
                    l_U1578 = l_U1393[I];
                    l_U799 = GET_PED_HEALTH( l_U1578 );
                    return 1;
                }
            }
        }
        for ( I = 0; I <= 0; I++ )
        {
            if (sub_8497( l_U1416[I] ))
            {
                if (sub_21657( l_U1416[I], l_U1227 ))
                {
                    sub_21867( g_U818, l_U1416[I] );
                    l_U1578 = l_U1416[I];
                    l_U799 = GET_PED_HEALTH( l_U1578 );
                    return 1;
                }
            }
        }
        for ( I = 0; I <= 2; I++ )
        {
            if (sub_8497( l_U1464[I] ))
            {
                if (sub_21657( l_U1464[I], l_U1227 ))
                {
                    sub_21867( g_U818, l_U1464[I] );
                    l_U1578 = l_U1464[I];
                    l_U799 = GET_PED_HEALTH( l_U1578 );
                    return 1;
                }
            }
        }
    }
    return 0;
}

int sub_21657(unknown uParam0, unknown uParam1)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, uParam1._fU0 );
    }
    return 0;
}

void sub_21750(unknown uParam0)
{
    if (sub_8497( uParam0 ))
    {
        CLEAR_LOCKED_TARGET( uParam0 );
        CLEAR_PED_DEFAULT_AIM( uParam0 );
    }
    return;
}

void sub_21867(unknown uParam0, unknown uParam1)
{
    if (sub_8497( uParam0 ))
    {
        if (sub_8497( uParam1 ))
        {
            sub_21750( uParam0 );
            REGISTER_TARGET( uParam0, uParam1 );
            SET_LOCKED_TARGET( uParam0, uParam1 );
            SET_PED_DEFAULT_AIM_AT_PED( uParam0, uParam1 );
        }
    }
    return;
}

int sub_22412(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

int sub_22672(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    if (sub_8497( uParam0 ))
    {
        if (sub_8497( uParam1 ))
        {
            if (sub_22706())
            {
                iVar5 = GET_PED_HEALTH( uParam1 );
                if (iVar5 != (uParam2^))
                {
                    (uParam2^) = iVar5;
                    return 0;
                }
                if (IS_PED_IN_MELEE_COMBAT( sub_11720() ))
                {
                    return 0;
                }
                if (IS_LAST_MAN_STANDING_ACTIVE())
                {
                    return 0;
                }
                if (IS_BULLET_CAMERA_RUNNING( 0 ))
                {
                    return 0;
                }
                return 1;
            }
        }
    }
    return 0;
}

int sub_22706()
{
    if (sub_8497( sub_11720() ))
    {
        return 1;
    }
    return 0;
}

void sub_22920(unknown uParam0)
{
    if (sub_8497( uParam0 ))
    {
        START_PARTICLE_FX_NON_LOOPED_ON_PED_BONE( "Blood_headsoup_S_01", uParam0, 0.25000000, 0, 0, 0, 0, 0, 57704, 2 );
        sub_22998( uParam0 );
    }
    return;
}

void sub_22998(unknown uParam0)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        STOP_PED_SPEAKING( uParam0, 1 );
        SET_PED_HEALTH( uParam0, 0, 0 );
        SET_PED_CORPSE( uParam0, 0 );
    }
    return;
}

void sub_23211()
{
    unknown uVar2;

    uVar2 = GET_INTERIOR_AT_COORDS( g_U3141[7]._fU0 );
    SET_INTERIOR_ACTIVE( uVar2, 1, 0 );
    LOAD_SCENE_FOR_ROOM_BY_KEY( uVar2, GET_HASH_KEY( ref g_U3569 ) );
    SET_ROOM_FOR_PED_BY_NAME( sub_11720(), ref g_U3569 );
    sub_20978( sub_11720(), g_U3141[7]._fU0, g_U3141[7]._fU12 );
    return;
}

void sub_23421()
{
    sub_1171( "SBA", "LOAD_EXTRA_BACKYARD_ASSETS", "***" );
    sub_1390( g_U3099, 1 );
    sub_1390( -859113524, 1 );
    sub_1390( 1996612931, 1 );
    return;
}

void sub_23699()
{
    int I;

    sub_23709();
    sub_23810( -691403429, -862236369, 25000, 25000 );
    sub_23908( 0, 434544317, 0, 25000, 25000 );
    sub_23908( 2, 434544317, -862236369, 25000, 25000 );
    sub_23908( 4, -1074756423, 0, 25000, 25000 );
    sub_24069( ref l_U1484, ref l_U1563, ref l_U1478, 0, 0.75000000, "AIT_NORMAL", 1, 0, 25000, 2, 0, 25000, 0 );
    SET_GROUP_LAST_ALIVE_AS_LONE_WOLF( l_U1478._fU0, 0 );
    sub_23709();
    for ( I = 0; I <= 5; I++ )
    {
        if (sub_8497( l_U1563[I] ))
        {
            SET_PED_CAN_AVOID_DEATH_ZONES( l_U1563[I], 0 );
            SET_PED_FLAG_LOCK_TO_COVER( l_U1563[I], 1 );
            SET_BLOCKING_OF_PED_TARGETTING( l_U1563[I], 1 );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1563[I], 1 );
            sub_24428( l_U1563[I] );
            if (I == 0)
            {
                TASK_COMBAT_SNAP_TO_COVER( l_U1563[I], "GenCover", "BF328AF7_5B124DD8_Corner2", 0 );
            }
            else if (I == 1)
            {
                TASK_COMBAT_SNAP_TO_COVER( l_U1563[I], "GenCover", "BF328AF7_DF3EE117_Popover1", 0 );
            }
            else if (I == 2)
            {
                TASK_COMBAT_SNAP_TO_COVER( l_U1563[I], "GenCover", "BF328AF7_9FC85EEB_Popover1", 0 );
            }
            else if (I == 3)
            {
                TASK_COMBAT_SNAP_TO_COVER( l_U1563[I], "GenCover", "BF328AF7_6127E1AB_Popover2", 0 );
            }
            else if (I == 5)
            {
                TASK_COMBAT_SNAP_TO_COVER( l_U1563[I], "GenCover", "BF328AF7_9C79663B_Corner1", 0 );
            };;;;;
        }
        else
        {
            sub_1171( "TEH", "ped not valid!", "***" );
        }
    }
    l_U1570 = CREATE_DYNAMIC_PATH_OBSTRUCTION( -186.77000000, -5.58000000, -12.19000000, -186.92000000, -14.56000000, -11.87000000, 1.00000000 );
    l_U1571 = CREATE_DYNAMIC_PATH_OBSTRUCTION( -197.32000000, -17.65000000, -7.69000000, -185.99000000, -16.55000000, -11.74000000, 2.00000000 );
    return;
}

void sub_23709()
{
    int I;

    for ( I = 0; I < 10; I++ )
    {
        l_U3[I]._fU0 = 0;
        l_U3[I]._fU4 = 25000;
        l_U3[I]._fU8 = 0;
        l_U3[I]._fU12 = 25000;
    }
    return;
}

void sub_23810(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    int I;

    for ( I = 0; I < 10; I++ )
    {
        l_U3[I]._fU0 = uParam0;
        l_U3[I]._fU4 = uParam2;
        l_U3[I]._fU8 = uParam1;
        l_U3[I]._fU12 = uParam3;
    }
    return;
}

int sub_23908(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (iParam0 < 10)
    {
        l_U3[iParam0]._fU0 = uParam1;
        l_U3[iParam0]._fU4 = uParam3;
        l_U3[iParam0]._fU8 = uParam2;
        l_U3[iParam0]._fU12 = uParam4;
        return 1;
    }
    return 0;
}

void sub_24069(unknown uParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5, boolean bParam6, unknown uParam7, unknown uParam8, unknown uParam9, int iParam10, unknown uParam11, unknown uParam12)
{
    int I;
    unknown uVar16;
    int iVar17;

    if ((uParam0^) != (uParam1^))
    {
        SCRIPT_ASSERT( "PED_ARRAY_INITIALIZE - Array sizes don't match!!", 0 );
        return;
    }
    sub_24158( uParam2, uParam4, 0 );
    if (IS_STRING_NULL( uParam12 ))
    {
        uParam12 = l_U2;
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_7646( (uParam1^)[I] );
        (uParam1^)[I] = sub_7746( ref (uParam0^)[I] );
        if (sub_8497( (uParam1^)[I] ))
        {
            sub_24428( (uParam1^)[I] );
            SET_PED_AI_TEMPLATE( (uParam1^)[I], uParam5 );
            SET_PED_ALERTNESS( (uParam1^)[I], uParam9 );
            SET_PED_ALLOWED_TO_SURRENDER( (uParam1^)[I], 0 );
            sub_24586( (uParam1^)[I], uParam2 );
            if (iParam3 != 0)
            {
                if (iParam3 != -1569615261)
                {
                    uVar16 = sub_13971( (uParam1^)[I], iParam3, uParam8, 0, 0 );
                }
                if (iParam10 != 0)
                {
                    sub_13339( (uParam1^)[I], iParam10, 0, uParam11, 0 );
                }
            }
            else if (I < 10)
            {
                iVar17 = l_U3[I]._fU0;
                if ((iVar17 != -1569615261) AND (iVar17 != 0))
                {
                    sub_13971( (uParam1^)[I], iVar17, l_U3[I]._fU4, 0, 0 );
                }
                if (l_U3[I]._fU8 != 0)
                {
                    sub_13339( (uParam1^)[I], l_U3[I]._fU8, 0, l_U3[I]._fU12, 0 );
                }
            }
            if (bParam6)
            {
                sub_25071( (uParam1^)[I], iParam3 );
            }
            switch (uParam7)
            {
                case 0: break;
                case 1:
                ENABLE_WEAPON_ATTACHMENT( uVar16, 13, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar16, 13, 1 );
                break;
                case 2:
                ENABLE_WEAPON_ATTACHMENT( uVar16, 14, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar16, 14, 1 );
                break;
                case 3:
                ENABLE_WEAPON_ATTACHMENT( uVar16, 12, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar16, 12, 1 );
                break;
            }
        }
        WAIT( 1 );
    }
    sub_25667( uParam1, uParam12 );
    return;
}

void sub_24158(int iParam0, unknown uParam1, boolean bParam2)
{
    iParam0->_fU4 = uParam1;
    iParam0->_fU0 = CREATE_GROUP( 3, 1 );
    if (bParam2)
    {
        while (NOT (DOES_GROUP_EXIST( iParam0->_fU0 )))
        {
            WAIT( 0 );
        }
    }
    SET_GROUP_RATIO_FIRING_AT_VISIBLE( iParam0->_fU0, iParam0->_fU4 );
    SET_GROUP_RATIO_FIRING_AT_INVISIBLE( iParam0->_fU0, iParam0->_fU4 );
    if (iParam0->_fU8)
    {
        SET_GROUP_FORMATION( iParam0->_fU0, iParam0->_fU12 );
        SET_GROUP_FORMATION_SPACING( iParam0->_fU0, iParam0->_fU16 );
        SET_GROUP_FORMATION_MAX_MOVE_SPEED( iParam0->_fU0, iParam0->_fU20 );
    }
    return;
}

void sub_24428(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 1 );
        SET_PED_VISIBLE( uParam0, 0 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 0 );
        FREEZE_PED_POSITION( uParam0, 1 );
        SET_PED_COLLISION( uParam0, 0 );
        SET_PED_PROOFS( uParam0, 1, 1, 1, 1, 1 );
    }
    return;
}

void sub_24586(unknown uParam0, int iParam1)
{
    int iVar4;
    unknown uVar5;

    if ((DOES_GROUP_EXIST( iParam1->_fU0 )) == 0)
    {
        sub_1495( "[SP]### Warning!!! Group does not exist. Creating new group specified attributes. ###" );
        if (iParam1->_fU4 > 0)
        {
            sub_24158( iParam1, iParam1->_fU4, 0 );
        }
        else
        {
            sub_24158( iParam1, 1056964608, 0 );
        }
    }
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        GET_GROUP_SIZE( iParam1->_fU0, ref iVar4, ref uVar5 );
        if (iVar4 == 0)
        {
            SET_PED_AS_GROUP_LEADER( uParam0, iParam1->_fU0 );
        }
        else
        {
            SET_PED_AS_GROUP_MEMBER( uParam0, iParam1->_fU0 );
        }
        SET_PED_NEVER_LEAVES_GROUP( uParam0, 1 );
    }
    return;
}

void sub_25071(unknown uParam0, unknown uParam1)
{
    switch (uParam1)
    {
        case -1569615261:
        case 406496141:
        case -862236369:
        case 456708483:
        case -1464892298:
        case 68019059:
        case -612753081:
        case -820634585:
        SET_PED_COMBAT_RANGE_MAX( uParam0, 10.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 1.00000000 );
        break;
        case 434544317:
        case 1845102363:
        case -168327769:
        case -184942895:
        case 514118749:
        case 1964270085:
        case -691403429:
        case 1478009203:
        case -1404433099:
        case 1194438308:
        SET_PED_COMBAT_RANGE( uParam0, 1 );
        SET_PED_COMBAT_RANGE_MAX( uParam0, 20.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 1.00000000 );
        break;
        case -1013714740:
        case -1074756423:
        case 1308526797:
        case 840671040:
        case 57534114:
        case 724901397:
        case 1992962408:
        SET_PED_COMBAT_RANGE( uParam0, 2 );
        SET_PED_COMBAT_RANGE_MAX( uParam0, 30.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 1.00000000 );
        break;
        case 1224272620:
        case 10648147:
        case 377623895:
        case 319712764:
        case -110877124:
        case -1659006841:
        SET_PED_COMBAT_RANGE( uParam0, 3 );
        SET_PED_COMBAT_RANGE_MAX( uParam0, 50.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 5.00000000 );
        break;
    }
    return;
}

void sub_25667(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

void sub_26418(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_26449( (uParam0^)[I] );
    }
    return;
}

void sub_26449(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 0 );
        SET_PED_VISIBLE( uParam0, 1 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 1 );
        FREEZE_PED_POSITION( uParam0, 0 );
        SET_PED_COLLISION( uParam0, 1 );
        SET_PED_PROOFS( uParam0, 0, 0, 0, 0, 0 );
    }
    return;
}

void sub_26565()
{
    sub_1171( "SBA", "P_CREATE_BACKYARD_GAS_GRILLS", "***" );
    sub_7103( l_U706[0] );
    l_U706[0] = sub_7168( -859113524, -187.18800000, -8.47000000, -12.81200000, 0.00000000, 0.00000000, 95.53300000, 0, 1, 0 );
    if ((DOES_OBJECT_EXIST( l_U706[0] )) == 1)
    {
        SET_OBJECT_ONLY_DAMAGED_BY_PLAYER( l_U706[0], 1 );
        SET_OBJECT_HEALTH( l_U706[0], 20 );
        SET_OBJECT_AS_PATH_OBSTACLE( l_U706[0] );
        CAMERA_CAN_TARGET_OBJECT( 1, l_U706[0] );
    }
    sub_7103( l_U706[1] );
    l_U706[1] = sub_7168( 1996612931, -176.10660000, -25.05579000, -11.37000000, 0.00000000, 0.00000000, 27.03800000, 0, 1, 0 );
    if ((DOES_OBJECT_EXIST( l_U706[1] )) == 1)
    {
        SET_OBJECT_ONLY_DAMAGED_BY_PLAYER( l_U706[1], 1 );
        SET_OBJECT_HEALTH( l_U706[1], 20 );
        SET_OBJECT_AS_PATH_OBSTACLE( l_U706[1] );
        CAMERA_CAN_TARGET_OBJECT( 1, l_U706[1] );
    }
    return;
}

void sub_27012()
{
    sub_27022();
    sub_27185( g_U818 );
    ISEQ_START( -444056596 );
    PED_SET_ACTION_INTENTION( g_U818, 51, -1, 0, 0, 0 );
    return;
}

void sub_27022()
{
    sub_1171( "TEH", "REGISTER_PEDS_VIG_24- start", 0 );
    ISEQ_REGISTER_ENTITY( -444056596, "passos", g_U818, 0 );
    ISEQ_REGISTER_ENTITY( -444056596, "cs_gate", l_U699, 1 );
    sub_1171( "TEH", "REGISTER_PEDS_VIG_24 - end", 0 );
    return;
}

void sub_27185(unknown uParam0)
{
    if (sub_8497( uParam0 ))
    {
        PED_FINISH_ACTION_INTENTION( uParam0, 47 );
        PED_FINISH_ACTION_INTENTION( uParam0, 48 );
        PED_FINISH_ACTION_INTENTION( uParam0, 49 );
        PED_FINISH_ACTION_INTENTION( uParam0, 50 );
        PED_FINISH_ACTION_INTENTION( uParam0, 51 );
        PED_FINISH_ACTION_INTENTION( uParam0, 52 );
        PED_FINISH_ACTION_INTENTION( uParam0, 53 );
        PED_FINISH_ACTION_INTENTION( uParam0, 54 );
        PED_FINISH_ACTION_INTENTION( uParam0, 55 );
        PED_FINISH_ACTION_INTENTION( uParam0, 56 );
        PED_FINISH_ACTION_INTENTION( uParam0, 57 );
        PED_FINISH_ACTION_INTENTION( uParam0, 58 );
    }
    return;
}

void sub_27439(unknown uParam0)
{
    if ((IS_SCREEN_FADING_IN() == 0) AND (IS_SCREEN_FADED_IN() == 0))
    {
        DO_SCREEN_FADE_IN( uParam0 );
        while (IS_SCREEN_FADED_IN() == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_27522()
{
    int I;

    I = 0;
    sub_23709();
    sub_23810( -691403429, 0, 25000, 25000 );
    sub_23908( 2, -1074756423, 0, 25000, 25000 );
    sub_23908( 3, 434544317, 0, 25000, 25000 );
    sub_24069( ref l_U1302, ref l_U1355, ref l_U1296, 0, 1.00000000, "AIT_EXPERT", 0, 0, 25000, 3, 0, 25000, "Assault A" );
    sub_27663( ref l_U1355, l_U995, 1 );
    sub_23709();
    I = 0;
    for ( I = 0; I <= (l_U1355 - 1); I++ )
    {
        SET_PED_CAN_AVOID_DEATH_ZONES( l_U1355[I], 0 );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( l_U1355[I], 1 );
    }
    SET_PED_SUGGESTED_COVER_POINT( l_U1355[0], "GenCover", "BF328AF7_C3E45C7_Corner2" );
    SET_PED_SUGGESTED_COVER_POINT( l_U1355[1], "GenCover", "BF328AF7_E394D885_Corner1" );
    SET_PED_SUGGESTED_COVER_POINT( l_U1355[2], "ny_grdn", "Corner_Position339" );
    SET_PED_SUGGESTED_COVER_POINT( l_U1355[3], "GenCover", "BF328AF7_C1E3B113_Corner2" );
    l_U1468 = PEDGROUPTASK_ADVANCE_CREATE( l_U1296._fU0 );
    for ( I = 0; I < l_U1355; I++ )
    {
        if (((IS_PED_DEAD( l_U1355[I] )) == 0) AND ((DOES_PED_EXIST( l_U1355[I] )) == 1))
        {
            PEDGROUPTASK_ADVANCE_ASSIGNPED( l_U1296._fU0, l_U1468, l_U1355[I] );
        }
    }
    if ((IS_PED_DEAD( sub_11720() )) == 0)
    {
        PEDGROUPTASK_ADVANCE_SETTARGET_PED( l_U1296._fU0, l_U1468, sub_11720() );
    }
    PEDGROUPTASK_ADVANCE_SETTIMETOHIDE( l_U1296._fU0, l_U1468, 3.00000000 );
    PEDGROUPTASK_ADVANCE_SETTIMETOIDLE( l_U1296._fU0, l_U1468, 5.00000000 );
    PEDGROUPTASK_ADVANCE_SETTIMERANGEFORALLPEDSTOSTARTFIRING( l_U1296._fU0, l_U1468, 2.00000000 );
    PEDGROUPTASK_ADVANCE_SETADVANCEDISTANCE( l_U1296._fU0, l_U1468, 3.00000000 );
    PEDGROUPTASK_ADVANCE_SETNUMPEDSTOADVANCE( l_U1296._fU0, l_U1468, 1 );
    PEDGROUPTASK_ADVANCE_TRIGGER_MOVE( l_U1296._fU0, l_U1468 );
    SET_GROUP_LAST_ALIVE_AS_LONE_WOLF( l_U1296._fU0, 1 );
    sub_23810( -691403429, 0, 25000, 25000 );
    sub_23908( 2, 434544317, 0, 25000, 25000 );
    sub_23908( 3, 434544317, 0, 25000, 25000 );
    sub_23908( 4, -1074756423, 0, 25000, 25000 );
    sub_24069( ref l_U1366, ref l_U1393, ref l_U1360, 0, 1.00000000, "AIT_EXPERT", 0, 0, 25000, 3, 0, 25000, "Assault B" );
    sub_27663( ref l_U1393, l_U995, 1 );
    sub_23709();
    for ( I = 0; I <= (l_U1393 - 1); I++ )
    {
        SET_PED_CAN_AVOID_DEATH_ZONES( l_U1393[I], 0 );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( l_U1393[I], 1 );
    }
    return;
}

void sub_27663(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_27699( ref (uParam0^)[I], uParam1, uParam2 );
    }
    return;
}

void sub_27699(unknown uParam0, unknown uParam1, unknown uParam2)
{
    if (sub_8497( (uParam0^) ))
    {
        RESET_PED_TETHERING( (uParam0^) );
        sub_27738( ref uParam1, (uParam0^), uParam2 );
    }
    return;
}

void sub_27738(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_TETHERING_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_TETHERING_OPTION( uParam1, uParam2 );
    }
    return;
}

void sub_28659()
{
    if (l_U415 != l_U413)
    {
        sub_1171( "TEH", "playing music:changed CUR FLAG", 0 );
        sub_19244( l_U413 );
        sub_19244( l_U414 );
        l_U415 = l_U413;
    }
    else if (l_U416 != l_U414)
    {
        sub_1171( "TEH", "playing music:changed NEW FLAG", 0 );
        sub_19244( l_U413 );
        sub_19244( l_U414 );
        l_U416 = l_U414;
    }
    switch (l_U413)
    {
        case 1:
        sub_1171( "TEH", "playing music: MC_PLAYTHROUGH", 0 );
        AUDIO_MUSIC_SUSPEND( 7000 );
        l_U435 = 0;
        l_U413 = 5;
        break;
        case 2:
        sub_1171( "TEH", "playing music: MC_CHECKPOINT_RESTART_CHOPSHOP ", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_3", "", 0, 4000, 5000, -1082130432, 0 );
        l_U435 = 0;
        l_U413 = 5;
        l_U414 = 5;
        break;
        case 3:
        sub_1171( "TEH", "playing music: MC_CHECKPOINT_RESTART_BACKYARDS ", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_4_6", "", 0, 4000, 5000, -1082130432, 0 );
        l_U435 = 0;
        l_U413 = 14;
        l_U414 = 14;
        break;
        case 4:
        if (l_U414 == 4)
        {
            sub_1171( "TEH", "playing music: MC_CUTSCENE_ON_ROOF ", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_3", "", 0, 5000, 5000, -1082130432, 0 );
            l_U435 = 0;
            l_U413 = 5;
        }
        break;
        case 5:
        if (l_U414 == 5)
        {
            sub_1171( "TEH", "playing music: MC_CUTSCENE_ENTERING_GARAGE ", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_2_4", "", 0, 5000, 5000, -1082130432, 0 );
            l_U435 = 0;
            l_U413 = 6;
            l_U414 = 6;
        }
        break;
        case 6:
        if (l_U414 == 6)
        {
            if (l_U435 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_ONESHOT_19", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                    sub_1171( "TEH", "playing music: Sussesfully preloaded _ONESHOT_19 ", 0 );
                    l_U435 = 1;
                }
            }
            else
            {
                l_U413 = 7;
            }
        }
        break;
        case 7:
        if (l_U414 == 7)
        {
            if (l_U435 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                    sub_1171( "TEH", "playing music: Sussesfully played oneshot_19 ", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                }
            }
            l_U435 = 0;
            l_U413 = 8;
            l_U414 = 8;
        }
        break;
        case 8:
        if (l_U414 == 8)
        {
            if (l_U435 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_RAND_OS", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_RAND_OS" ))
                {
                    sub_1171( "TEH", "playing music: Sussesfully preloaded FIRST_RAND_OS ", 0 );
                    l_U435 = 1;
                }
            }
            else
            {
                l_U413 = 9;
            }
        }
        break;
        case 9:
        if (l_U414 == 9)
        {
            if (l_U435 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                    sub_1171( "TEH", "playing music: Sussesfully played FIRST_RAND_OS ", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                }
            }
            l_U435 = 0;
            l_U413 = 10;
        }
        break;
        case 10:
        if (l_U414 == 10)
        {
            if (l_U435 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_RAND_OS", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_RAND_OS" ))
                {
                    sub_1171( "TEH", "playing music: Sussesfully preloaded SECOND_RAND_OS ", 0 );
                    l_U435 = 1;
                }
            }
            else
            {
                sub_1171( "TEH", "playing music: MC_ONESHOT_PRELOAD_SECOND_RAND_OS starting timer ", 0 );
                sub_21185( ref l_U417, 4000, 1, 0 );
                sub_21335( ref l_U417 );
                l_U413 = 11;
                l_U414 = 11;
            }
        }
        break;
        case 11:
        if (sub_22412( ref l_U417 ))
        {
            sub_1171( "TEH", "playing music: MC_CHOPSHOP_FIVE_DEAD timer complete, playing RAND_OS ", 0 );
            l_U413 = 12;
            l_U414 = 12;
        }
        break;
        case 12:
        if (l_U414 == 12)
        {
            if (l_U435 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                    sub_1171( "TEH", "playing music: Sussesfully played SECOND_RAND_OS ", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                }
            }
            l_U413 = 13;
        }
        break;
        case 13:
        if (l_U414 == 13)
        {
            sub_1171( "TEH", "playing music: MC_CHOPSHOP_ALL_DEAD ", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_6", "", 0, 4000, 6000, -1082130432, 0 );
            l_U435 = 0;
            l_U413 = 14;
        }
        break;
        case 14:
        if (l_U414 == 14)
        {
            sub_1171( "TEH", "playing music: MC_BACKYARD_FIGHT_STARTS", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_4_6", "", 0, 4000, 5000, -1082130432, 0 );
            l_U435 = 0;
            l_U413 = 15;
            l_U414 = 15;
        }
        break;
        case 15:
        if (l_U414 == 15)
        {
            if (l_U435 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_RAND_OS", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_RAND_OS" ))
                {
                    sub_1171( "TEH", "playing music: Sussesfully preloaded THIRD_RAND_OS", 0 );
                    l_U435 = 1;
                }
            }
            else
            {
                l_U413 = 16;
            }
        }
        break;
        case 16:
        if (l_U414 == 16)
        {
            if (l_U435 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_RAND_OS" ))
                {
                    sub_1171( "TEH", "playing music: Sussesfully played THIRD_RAND_OS ", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                }
            }
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_2_4_6", "", 0, 3000, -1, -1082130432, 0 );
            l_U435 = 0;
            sub_21185( ref l_U417, 3000, 1, 0 );
            sub_21335( ref l_U417 );
            l_U413 = 17;
        }
        break;
        case 17:
        if (sub_22412( ref l_U417 ))
        {
            l_U413 = 18;
            l_U414 = 18;
        }
        break;
        case 18:
        if (l_U414 == 18)
        {
            if (l_U435 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_OS_5", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_OS_5" ))
                {
                    sub_1171( "TEH", "playing music: Sussesfully preloaded NYBAR_OS_5 ", 0 );
                    l_U435 = 1;
                }
            }
            else
            {
                l_U413 = 19;
            }
        }
        break;
        case 19:
        if (l_U414 == 19)
        {
            if (l_U435 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_OS_5" ))
                {
                    sub_1171( "TEH", "playing music: Sussesfully played NYBAR_OS_5 ", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                }
            }
            l_U435 = 0;
            l_U413 = 20;
        }
        break;
        case 20:
        if (l_U414 == 20)
        {
            sub_1171( "TEH", "playing music: MC_ALL_DEAD ", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_6", "", 0, 1000, 5000, -1082130432, 0 );
            l_U413 = 23;
        }
        break;
        case 21:
        if (l_U414 == 21)
        {
            sub_1171( "TEH", "playing music: MC_ALL_DEAD ", 0 );
            AUDIO_MUSIC_SUSPEND( 6000 );
            l_U413 = 23;
        }
        break;
        case 22:
        sub_1171( "TEH", "playing music: MC_MAX_DOWN ", 0 );
        AUDIO_MUSIC_SUSPEND( 4000 );
        l_U413 = 23;
        break;
    }
    return;
}

void sub_32005()
{
    if ((g_U780 == 8) || (g_U780 == 7))
    {
        if (l_U807 == 0)
        {
            if ((IS_PED_DEAD( sub_11720() )) == 1)
            {
                sub_1171( "TEH", "Setup player death cam", 0 );
                DESTROY_ALL_CAMS();
                sub_32111( 1 );
                l_U413 = 22;
                l_U807 = 3;
            }
            else if (sub_32190())
            {
                sub_1171( "SBA", "HANDLE_CHECKPOINTS - Restart, setting eFailure = STATE_FAIL_WAITING", 0 );
                l_U807 = 3;
            }
            else if ((l_U806) AND ((NOT IS_LAST_MAN_STANDING_ACTIVE()) AND ((l_U805) || ((IS_PED_DEAD( g_U818 )) == 1))))
            {
                sub_1171( "TEH", "Passos Death Cam", 0 );
                SET_PED_GORE( g_U818, 1 );
                l_U413 = 22;
                l_U807 = 1;
            };;;
        }
        sub_32811();
    }
    return;
}

void sub_32111(unknown uParam0)
{
    sub_1171( "NS", "P_SETUP_PLAYER_DEATH_CAM()", 0 );
    uParam0 = uParam0;
    return;
}

int sub_32190()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U0 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD( sub_11720() )))
        {
            SET_PED_FORCED_TO_WALK( sub_11720(), 0 );
            SET_PLAYER_FORCED_AIM( sub_11742(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE( sub_11742(), 1 );
            if ((IS_PED_VISIBLE( sub_11720() )) == 0)
            {
                SET_PED_VISIBLE( sub_11720(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

void sub_32811()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;

    switch (l_U807)
    {
        case 0: break;
        case 1:
        if ((IS_PLAYER_DEAD( sub_11742() )) == 0)
        {
            SET_PED_INVINCIBLE( sub_11720(), 1 );
        }
        if (l_U1583 == 1)
        {
            SET_PED_GORE( g_U818, 1 );
            sub_32960( 0 );
            l_U807 = 3;
            sub_1171( "CCB", "eFailure - STATE_FAIL_WAITING  passos died moving", 0 );
        }
        else if (l_U1583 == 0)
        {
            if (sub_33865())
            {
                l_U807 = 3;
                sub_1171( "CCB", "eFailure - STATE_FAIL_WAITING handling the passos death cam has finished", 0 );
            }
        }
        break;
        case 2:
        sub_1171( "SP", "The player is under a falling car...blood time!", "###" );
        if ((IS_PED_DEAD( sub_11720() )) == 0)
        {
            SET_PED_HEALTH( sub_11720(), 0, 0 );
        }
        START_PARTICLE_FX_NON_LOOPED_ON_PED_BONE( "blood_fall_high_death", sub_11720(), 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 65488, 5.00000000 );
        l_U807 = 3;
        break;
        case 3:
        if (sub_36934())
        {
            l_U807 = 4;
        }
        else if ((sub_36974( 0 )) == 1)
        {
            l_U807 = 4;
        }
        break;
        case 4:
        if (NOT (IS_PED_DEAD( sub_11720() )))
        {
            sub_1171( "CCB", "Deactivating bullettime...", 0 );
            DEACTIVATE_BULLET_TIME( 0, 0 );
            END_POSTFX_BLENDER( 3, 0 );
            l_U807 = 5;
            sub_1171( "CCB", "eFailure - STATE_FAIL_CLEANUP", 0 );
        }
        break;
        case 5:
        if (NOT (IS_PLAYER_DEAD( sub_11742() )))
        {
            if (NOT (IS_PED_DEAD( sub_11720() )))
            {
                SET_PLAYER_CONTROL( sub_11742(), 0, 0 );
            }
        }
        DO_SCREEN_FADE_OUT( 0 );
        sub_38028( "NY_PASSOS6_SCRIPTED_FAIL_FX" );
        DESTROY_ALL_CAMS();
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        sub_1171( "CCB", "Destroying Passos...", 0 );
        sub_7646( g_U818 );
        sub_7646( l_U798 );
        sub_38205();
        l_U807 = 6;
        sub_1171( "CCB", "eFailure - STATE_FAIL_RESTORE", 0 );
        break;
        case 6:
        sub_2897();
        sub_5217();
        sub_6980( 0 );
        sub_1705( "FACE_PASNYB", 0, 1 );
        sub_1832( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act", 1 );
        sub_39514();
        SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
        if (g_U780 == 7)
        {
            sub_1171( "RJM", "RESTART.  Restoring player to MCE_CHOPSHOP state", " " );
            sub_1905( 15594167, 1 );
            sub_1905( -444056596, 0 );
            sub_1905( -1207672607, 0 );
            sub_1905( 1650310217, 0 );
            sub_8684();
            sub_9672();
            sub_10019();
            sub_11786( ref l_U923, sub_11720() );
            sub_27522();
            sub_20372( ref l_U1270 );
            l_U413 = 2;
            sub_23211();
            if ((IS_PLAYER_DEAD( sub_11742() )) == 0)
            {
                if ((IS_PED_DEAD( sub_11720() )) == 0)
                {
                    SET_PED_INVINCIBLE( sub_11720(), 0 );
                    SET_PLAYER_CONTROL( sub_11742(), 1, 0 );
                }
            }
            l_U922 = 0;
            sub_20254( 0 );
            l_U921 = 1;
        }
        else if (g_U780 == 8)
        {
            sub_1171( "RJM", "RESTART.  Restoring player to MCE_BACKYARDS state", " " );
            sub_23421();
            sub_11222( 8, 0 );
            sub_1905( -1207672607, 1 );
            sub_1905( -444056596, 1 );
            sub_2643( "mid_08_nybar_concat", 1 );
            sub_20372( ref l_U1283 );
            sub_23699();
            sub_26418( ref l_U1563 );
            sub_26565();
            l_U413 = 3;
            sub_11786( ref l_U959, sub_11720() );
            l_U413 = 3;
            if ((IS_PLAYER_DEAD( sub_11742() )) == 0)
            {
                if ((IS_PED_DEAD( sub_11720() )) == 0)
                {
                    SET_PED_INVINCIBLE( sub_11720(), 0 );
                    SET_PLAYER_CONTROL( sub_11742(), 1, 0 );
                }
            }
            sub_27012();
            l_U703 = 0;
            sub_27439( 1000 );
            if (IS_DEATH_PANEL_WIPE_ALLOWED())
            {
                DO_SCREEN_FADE_IN( 0 );
            }
            l_U921 = 5;
        }
        l_U807 = 7;
        sub_1171( "CCB", "eFailure - STATE_FAIL_RESTART", 0 );
        break;
        case 7:
        if (GET_NUMBER_OF_STREAMING_REQUESTS() == 0)
        {
            sub_1171( "CCB", "eFailure - STATE_FAIL_IDLE", 0 );
            l_U807 = 0;
            sub_1171( "CCB", "eCheckpoint - STATE_CHECKPOINT_INIT", 0 );
        }
        else
        {
            sub_1171( "CCB", "Waiting for stream requests...", 0 );
        }
        break;
    }
    return;
}

void sub_32960(unknown uParam0)
{
    string sVar3;
    string sVar4;
    string sVar5;
    string sVar6;
    string sVar7;

    sub_1171( "NS", "P_SETUP_PASSOS_DEATH()", 0 );
    sVar3 = "";
    sVar4 = "";
    sVar5 = "";
    sVar6 = "";
    sVar7 = "";
    switch (l_U278)
    {
        case 0:
        sVar4 = "S_NYB_FAIL_09A";
        sVar5 = "S_NYB_FAIL_09B";
        sVar6 = "S_NYB_FAIL_09C";
        sVar7 = "S_NYB_FAIL_09D";
        sVar3 = "MISS_FAIL_04";
        break;
        case 1:
        sVar4 = "S_NYB_FAIL_10A";
        sVar5 = "S_NYB_FAIL_10B";
        sVar3 = "MISS_FAIL_08";
        break;
        case 2:
        sVar4 = "S_NYB_FAIL_11A";
        sVar5 = "S_NYB_FAIL_11B";
        sVar6 = "S_NYB_FAIL_11C";
        sVar7 = "S_NYB_FAIL_11D";
        sVar3 = "MISS_FAIL_04";
        break;
        case 3:
        sVar4 = "S_NYB_FAIL_12A";
        sVar5 = "S_NYB_FAIL_12B";
        sVar6 = "S_NYB_FAIL_12C";
        sVar7 = "S_NYB_FAIL_12D";
        sVar3 = "MISS_FAIL_04";
        break;
        case 4:
        sVar4 = "S_NYB_FAIL_13A";
        sVar5 = "S_NYB_FAIL_13B";
        sVar6 = "S_NYB_FAIL_13C";
        sVar7 = "S_NYB_FAIL_13D";
        sVar3 = "MISS_FAIL_05";
        break;
    }
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
    sub_33556( sVar3, sVar4, sVar5, sVar6, sVar7, uParam0 );
    l_U278++;
    if (l_U278 == 5)
    {
        l_U278 = 0;
    }
    return;
}

void sub_33556(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    sub_1171( "NS", "P_SETUP_AND_PLAY_DEATH_CAM()", 0 );
    uParam5 = uParam5;
    if (NOT (IS_STRING_NULL( uParam1 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 0, "" );
    }
    if (NOT (IS_STRING_NULL( uParam2 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 1, "" );
    }
    if (NOT (IS_STRING_NULL( uParam3 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 2, "" );
    }
    if (NOT (IS_STRING_NULL( uParam4 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 3, "" );
    }
    return;
}

int sub_33865()
{
    unknown uVar2;

    switch (l_U1582)
    {
        case 0:
        sub_1171( "CCB", "PLAY_PASSOS_TREEGARDEN_DEATH_SCENE: ePassosDeathCamState - STATE_DEATHCAM_INIT", 0 );
        sub_34024( 1, 0, 0, 1 );
        sub_34187( ref l_U1563 );
        uVar2 = sub_34242();
        sub_34556( ref l_U754, -191.91550000, -16.73534000, -10.72514000, -7.64226100, -3.00003000, -76.10046000, 45, 1500 );
        sub_1905( 842704944, 1 );
        if (ISEQ_QUERY_ENTITY_STATE( -1207672607, "passos", 3 ))
        {
            sub_1171( "RJM", "S_NYBAR_VIG_26 was playing, kill it.", 0 );
            ISEQ_UNREGISTER_ENTITY( -1207672607, "passos" );
            sub_34879( -1207672607, 1 );
        }
        if (sub_8497( g_U818 ))
        {
            CLEAR_PED_TASKS_IMMEDIATELY( g_U818 );
            sub_35109( ref g_U818 );
            ISEQ_REGISTER_ENTITY( 1650310217, "PASSOS", g_U818, 0 );
            ISEQ_START( 1650310217 );
        }
        sub_2942( ref l_U785, -182.36000000, -17.20000000, -11.77000000, 90, uVar2, 7, 3, 2, 0, 0 );
        sub_7646( l_U798 );
        l_U798 = sub_7746( ref l_U785 );
        if (sub_8497( l_U798 ))
        {
            sub_35522( ref l_U798 );
            sub_13971( l_U798, -862236369, 25000, 0, 0 );
            REGISTER_TARGET( l_U798, g_U818 );
            SET_PED_DEFAULT_AIM_AT_PED( l_U798, g_U818 );
            TASK_AIM_GUN_AT_PED( l_U798, g_U818, -1, 0 );
        }
        sub_21185( ref l_U745, 50, 1, 0 );
        sub_21335( ref l_U745 );
        l_U1582 = 3;
        sub_1171( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_START", 0 );
        case 3:
        if (sub_22412( ref l_U745 ))
        {
            sub_35764( ref l_U754 );
            sub_35879( "NY_PASSOS6_SCRIPTED_FAIL_FX", 0 );
            SHAKE_CAM( l_U754._fU0, sub_36154(), 0.25000000 );
            sub_21185( ref l_U745, 750, 1, 0 );
            sub_21335( ref l_U745 );
            l_U1582 = 2;
            sub_1171( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_WAITING", 0 );
        }
        break;
        case 2:
        if (sub_22412( ref l_U745 ))
        {
            if ((sub_8497( g_U818 )) AND (sub_8497( l_U798 )))
            {
                SET_PED_SHOOTS_AT_COORD( l_U798, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_BONE_COORDS( g_U818, 65488, 0, 0, 0 ) );
                SHAKE_CAM( l_U754._fU0, "SMALL_EXPLOSION_SHAKE", 1 );
                SET_PED_DEFAULT_AIM_AT_COORD( l_U798, -10.06000000, 108.19000000, 5.24000000 );
                sub_22998( g_U818 );
                sub_21185( ref l_U745, 50, 1, 0 );
                sub_21335( ref l_U745 );
                l_U1582 = 5;
                sub_1171( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_PLAYING", 0 );
            }
        }
        break;
        case 5:
        if (sub_22412( ref l_U745 ))
        {
            l_U1582 = 6;
            sub_1171( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_FINISHED", 0 );
        }
        break;
        case 6:
        return 1;
        break;
    }
    return 0;
}

void sub_34024(int iParam0, int iParam1, unknown uParam2, boolean bParam3)
{
    END_POSTFX_BLENDER( 12, 0 );
    if (bParam3)
    {
        STOP_ALL_IMAGEFX( 0 );
    }
    SET_WIDESCREEN_BORDERS( 1, 500 );
    DISPLAY_HUD( 0 );
    if (iParam0 == 1)
    {
        if (NOT (IS_PED_DEAD( sub_11720() )))
        {
            SET_PLAYER_CONTROL( sub_11742(), 0, uParam2 );
            SET_PED_DUCKING( sub_11720(), 0 );
            if (iParam1 == 1)
            {
                CLEAR_PED_TASKS_IMMEDIATELY( sub_11720() );
            }
            SET_PED_INVINCIBLE( sub_11720(), 1 );
        }
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    return;
}

void sub_34187(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_24428( (uParam0^)[I] );
    }
    return;
}

int sub_34242()
{
    int I;

    for ( I = 0; I <= (l_U1563 - 1); I++ )
    {
        if (sub_8497( l_U1563[I] ))
        {
            sub_1171( "RJM", "GET_SCENEPED_FOR_PASSOS_DEATH - Found a guy from the Backyards", 0 );
            return l_U1484[I]._fU20;
        }
    }
    sub_1171( "RJM", "GET_SCENEPED_FOR_PASSOS_DEATH - Couldn't find anyone alive...that's weird, use a default", 0 );
    return -1734946199;
}

void sub_34556(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    iParam0->_fU4 = {uParam4};
    iParam0->_fU16 = {uParam1};
    iParam0->_fU28 = uParam7;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    iParam0->_fU84 = uParam8;
    iParam0->_fU88 = 0;
    iParam0->_fU92 = 0;
    iParam0->_fU40 = 0;
    iParam0->_fU44 = 0;
    iParam0->_fU100 = 1;
    iParam0->_fU104 = 1;
    iParam0->_fU96 = 0;
    sub_21185( iParam0 + 48, uParam8, 1, 0 );
    iParam0->_fU0 = CREATE_CAM_WITH_PARAMS( ref g_U649, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 1 );
    SET_CAM_PARAMS( iParam0->_fU0, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 0, 1, 1 );
    return;
}

void sub_34879(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to terminate does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 1)
    {
        ISEQ_TERMINATE( uParam0 );
    }
    ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
    if (iParam1 == 1)
    {
        while ((ISEQ_IS_LOADED( uParam0 )) == 1)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_35109(unknown uParam0)
{
    sub_1171( "RJM", "P_SETUP_PASSOS_FOR_FAILURE_SCENE", "***" );
    if (sub_8497( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), 1 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^), 0 );
        SET_PED_VALIDATE_BULLET_CAM_HIT( (uParam0^), 1 );
        SET_AI_SHOULD_ALWAYS_MISS_PED( (uParam0^), 0 );
        SET_CAN_AI_KICK_THROUGH_CORPSES( (uParam0^), 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_AI_TEMPLATE( (uParam0^), "AIT_NORMAL" );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( (uParam0^), 0 );
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^), 1 );
        SET_PED_GORE( (uParam0^), 1 );
        SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( (uParam0^), 0 );
        SET_PED_PROOFS( (uParam0^), 0, 1, 1, 1, 1 );
        SET_PED_ALLOWED_TO_SURRENDER( (uParam0^), 0 );
        SET_PED_CAN_AVOID_DEATH_ZONES( (uParam0^), 0 );
        SET_PED_STAND_GROUND_ON_PLAYER_IMPACT( (uParam0^), 1 );
        SET_PED_CAN_PUSH_PLAYER( (uParam0^), 1 );
        SET_PED_RESIST_TO_OBJECT_COLLISION( (uParam0^), 0 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_CAN_BE_TARGETTED( (uParam0^), 1 );
    }
    return;
}

void sub_35522(unknown uParam0)
{
    if (sub_8497( (uParam0^) ))
    {
        CLEAR_PED_TASKS_IMMEDIATELY( (uParam0^) );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), 1 );
        SET_PED_COMBAT_MOVEMENT( (uParam0^), 0 );
    }
    return;
}

void sub_35764(int iParam0)
{
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    SET_CAM_ACTIVE( iParam0->_fU0, 1 );
    RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    sub_21335( iParam0 + 48 );
    iParam0->_fU32 = 1;
    iParam0->_fU40 = 1;
    return;
}

void sub_35879(unknown uParam0, boolean bParam1)
{
    sub_35893( ref l_U276 );
    l_U276 = CREATE_CAM( "DEFAULT_BULLET_CAMERA", 1 );
    SETUP_BULLET_CAMERA_SCENE( l_U276, uParam0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, "", "" );
    if (bParam1)
    {
        RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    }
    return;
}

void sub_35893(unknown uParam0)
{
    if ((DOES_CAM_EXIST( (uParam0^) )) == 1)
    {
        if ((IS_CAM_ACTIVE( (uParam0^) )) == 1)
        {
            SET_CAM_ACTIVE( (uParam0^), 0 );
        }
        DESTROY_CAM( (uParam0^) );
    }
    (uParam0^) = nil;
    return;
}

string sub_36154()
{
    return "WOBBLY_SHAKE";
}

void sub_36934()
{
    return g_U648;
}

int sub_36974(int iParam0)
{
    iParam0 = 1;
    switch (l_U263)
    {
        case 0:
        if (NOT (sub_37035( ref l_U265 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_11720() )))
            {
                l_U264 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
            sub_21185( ref l_U265, l_U264, 1, 1 );
            sub_21335( ref l_U265 );
        }
        if (sub_22412( ref l_U265 ))
        {
            sub_1171( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_11720() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD( sub_11742() )))
            {
                SET_PLAYER_CONTROL( sub_11742(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U263 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U263 = 2;
            }
            else
            {
                l_U263 = 3;
            }
        }
        break;
        case 2:
        sub_1171( "NS", "Player will QUIT", 0 );
        sub_37494();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
        sub_1171( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        sub_37494();
        return 1;
        break;
    }
    return 0;
}

int sub_37035(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

void sub_37494()
{
    sub_1171( "NS", "P_PostFailRetryCleanup", 0 );
    sub_5393( ref l_U265 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD( sub_11742() )))
    {
        SET_PLAYER_CONTROL( sub_11742(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U262 = 0;
    l_U262 = l_U262;
    l_U263 = 0;
    return;
}

void sub_38028(unknown uParam0)
{
    sub_1171( "CO", "P_IMAGEFX_STOP_BULLETCAM:  Cameras Deleted", 0 );
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    sub_35893( ref l_U276 );
    l_U275 = 1;
    return;
}

void sub_38205()
{
    BULLET_CAMERA_TRACK_UNTIL_GROUNDED( 0 );
    sub_38223();
    sub_39003();
    sub_39135();
    sub_7646( g_U818 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    STOP_SOUND( l_U1572, 0 );
    ENABLE_WALLA_ZONE( "S_NYC2_WZ_BACKYARDS", 0 );
    if (CUTSCENE_IS_LOADED( l_U591 ))
    {
        CLEAR_NAMED_CUTSCENE( l_U591 );
    }
    sub_39268( "FACE_PASNYB" );
    sub_39338( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act" );
    return;
}

void sub_38223()
{
    sub_1171( "bsw", "CLEANUP_CHOPSHOP", 0 );
    ISEQ_UNREGISTER_ENTITY( 15594167, "passos" );
    ISEQ_UNREGISTER_ENTITY( -444056596, "passos" );
    ISEQ_UNREGISTER_ENTITY( -444056596, "cs_gate" );
    sub_34879( 15594167, 0 );
    sub_34879( -444056596, 0 );
    ENABLE_COVERPOINTMP3( "GenCover", "BF328AF7_C3E45C7_Corner1", 1 );
    ENABLE_COVERPOINTMP3( "GenCover", "BF328AF7_C3E45C7_Popover1", 1 );
    ENABLE_COVERPOINTMP3( "GenCover", "BF328AF7_C3E45C7_Corner2", 1 );
    ENABLE_NORMAL_LINE( "ny_grdn", "GrabSpline10", 1 );
    DESTROY_DYNAMIC_PATH_OBSTRUCTION( l_U1570 );
    DESTROY_DYNAMIC_PATH_OBSTRUCTION( l_U1571 );
    sub_7646( l_U798 );
    sub_7612( ref l_U1355 );
    sub_7612( ref l_U1393 );
    sub_7612( ref l_U1416 );
    sub_7612( ref l_U1464 );
    sub_38596( ref l_U915 );
    sub_10586( g_U755._fU0 );
    sub_38669( ref l_U865 );
    sub_38669( ref l_U867 );
    sub_38669( ref l_U869 );
    sub_7103( l_U888 );
    sub_7103( l_U892 );
    sub_7103( l_U893 );
    sub_7103( l_U700 );
    sub_38789( g_U3098 );
    sub_38789( g_U3087 );
    sub_38789( -175351117 );
    sub_38789( 1905166733 );
    sub_38789( -1455323458 );
    sub_38789( -1904663011 );
    sub_38789( g_U3086 );
    sub_38789( g_U778 );
    return;
}

void sub_38596(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_10586( (uParam0^)[I] );
    }
    return;
}

void sub_38669(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_7103( (uParam0^)[I] );
    }
    return;
}

void sub_38789(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 1)
    {
        SET_MODEL_AS_NO_LONGER_NEEDED( uParam0 );
    }
    else
    {
        sub_1495( "[SP]### ERROR! (UnloadModel) Trying to unload a model that isn't in the img! ###" );
    }
    return;
}

void sub_39003()
{
    sub_34879( 15594167, 0 );
    sub_34879( -444056596, 0 );
    ISEQ_UNREGISTER_ENTITY( -1207672607, "passos" );
    sub_34879( -1207672607, 0 );
    ISEQ_UNREGISTER_ENTITY( 1650310217, "PASSOS" );
    sub_34879( 1650310217, 0 );
    sub_7646( l_U798 );
    sub_7612( ref l_U1563 );
    sub_38669( ref l_U706 );
    return;
}

void sub_39135()
{
    sub_7103( l_U699 );
    return;
}

void sub_39268(unknown uParam0)
{
    REMOVE_ANIM_DICT( uParam0, 0 );
    return;
}

void sub_39338(unknown uParam0)
{
    ACTION_TREE_UNLOAD( uParam0 );
    return;
}

void sub_39514()
{
    sub_1171( "SP", "P_SETUP_PLAYER_RELATIONSHIPS", "###" );
    if ((IS_PED_DEAD( sub_11720() )) == 0)
    {
        SET_PED_RELATIONSHIP( sub_11720(), 0, 1 );
        SET_PED_RELATIONSHIP( sub_11720(), 0, 2 );
        SET_PED_RELATIONSHIP( sub_11720(), 0, 6 );
        SET_PED_RELATIONSHIP( sub_11720(), 0, 7 );
    }
    return;
}

void sub_40469()
{
    int iVar2;
    int iVar3;

    if (l_U807 == 0)
    {
        if (l_U921 <= 4)
        {
            if (sub_40503())
            {
                PED_SET_ACTION_INTENTION( g_U818, 56, 1000, 0, 0, 0 );
            }
            else
            {
                PED_FINISH_ACTION_INTENTION( g_U818, 56 );
            }
        }
        else if (sub_40746())
        {
            PED_SET_ACTION_INTENTION( g_U818, 56, 1000, 0, 0, 0 );
        }
        else
        {
            PED_FINISH_ACTION_INTENTION( g_U818, 56 );
        }
        switch (l_U921)
        {
            case 0:
            sub_1171( "TEH", "Chopshop intro", " " );
            sub_1326( 1 );
            sub_2643( l_U591, 1 );
            sub_1905( 15594167, 1 );
            sub_41114( 1, ref l_U1355 );
            sub_43396( 0 );
            sub_43553( 1, ref l_U1355, 0, 0 );
            SET_PLAYER_CONTROL( sub_11742(), 0, 0 );
            if (sub_22706())
            {
                if (GET_IS_PED_FORCED_TO_WALK( sub_11720() ))
                {
                    SET_PED_FORCED_TO_WALK( sub_11720(), 0 );
                }
            }
            sub_11222( 7, 0 );
            l_U821 = 1;
            l_U921 = 2;
            l_U921 = 2;
            case 1: if ((ISEQ_QUERY_STATE( 15594167, 3 )) == 1)
            {
                sub_11222( 7, 0 );
                l_U821 = 1;
                l_U921 = 2;
            }
            case 2:
            iVar2 = (((sub_48010( ref l_U1355 )) + (sub_48010( ref l_U1393 ))) + (sub_48010( ref l_U1416 ))) + (sub_48010( ref l_U1464 ));
            if (sub_48122())
            {
                sub_38789( 557810561 );
                sub_49636();
                if (g_U780 != 7)
                {
                    g_U780 = 7;
                    sub_16639( ref l_U923, 7, sub_11720(), g_U3141[7]._fU0, g_U3141[7]._fU12, g_U3141[7]._fU16, g_U3141[7]._fU20, 1 );
                }
                iVar2 = (((sub_48010( ref l_U1355 )) + (sub_48010( ref l_U1393 ))) + (sub_48010( ref l_U1416 ))) + (sub_48010( ref l_U1464 ));
                BULLET_CAMERA_TRACK_UNTIL_GROUNDED( 1 );
                sub_21185( ref l_U1469, 10000, 1, 0 );
                sub_21335( ref l_U1469 );
                sub_21185( ref l_U573, 5000, 1, 0 );
                sub_21335( ref l_U573 );
                l_U414 = 7;
                l_U921 = 3;
            }
            break;
            case 3:
            sub_50358( ref l_U1355, "pi_CHS_Assault A guy outside of play area" );
            sub_50358( ref l_U1393, "pi_CHS_Assault B guy outside of play area" );
            sub_50358( ref l_U1416, "pi_CHS_Assault C guy outside of play area" );
            sub_50358( ref l_U1464, "pi_CHS_Assault D guy outside of play area" );
            iVar2 = (((sub_48010( ref l_U1355 )) + (sub_48010( ref l_U1393 ))) + (sub_48010( ref l_U1416 ))) + (sub_48010( ref l_U1464 ));
            sub_50738();
            sub_51030();
            if (sub_22412( ref l_U1469 ))
            {
                if (sub_52440( l_U1059 ))
                {
                    sub_52476();
                }
                else
                {
                    sub_7612( ref l_U1416 );
                }
            }
            if (((sub_52440( l_U1122 )) || ((iVar2 - 3) <= 2)) AND (NOT l_U801))
            {
                sub_1171( "bsw", "activating group D", 0 );
                if (sub_52440( l_U1122 ))
                {
                    sub_1171( "bsw", "Trigger activation", 0 );
                }
                sub_26418( ref l_U1464 );
                sub_52704();
                sub_1390( g_U3099, 0 );
                sub_1390( -859113524, 0 );
                sub_1390( 1996612931, 0 );
                sub_1705( "CRUSH_IMMINENT", 0, 1 );
                sub_52899( 1 );
                sub_53041();
                sub_21185( ref l_U582, 1500, 1, 0 );
                sub_21335( ref l_U582 );
                l_U801 = 1;
            }
            if (sub_22412( ref l_U582 ))
            {
                sub_51200( "SNYC_MCSP", ref l_U484 );
            }
            if ((IS_PED_DEAD( sub_11720() )) == 0)
            {
                sub_20254( iVar2 );
                sub_53161();
                sub_55760();
            }
            if ((iVar2 == 1) AND (l_U862 == 0))
            {
                l_U1579 = sub_55951( ref l_U1355 );
                if ((sub_8497( l_U1579 )) == 0)
                {
                    l_U1579 = sub_55951( ref l_U1393 );
                    if ((sub_8497( l_U1579 )) == 0)
                    {
                        l_U1579 = sub_55951( ref l_U1416 );
                        if ((sub_8497( l_U1579 )) == 0)
                        {
                            l_U1579 = sub_55951( ref l_U1464 );
                            if ((sub_8497( l_U1579 )) == 0)
                            {
                                SCRIPT_ASSERT( "NO LAST CS OPPOENENT FOUND!!!!", 0 );
                            }
                        }
                    }
                }
                l_U862 = 1;
            }
            else if (iVar2 == 0)
            {
                if (l_U573._fU20)
                {
                    sub_1171( "SBA", "Stopping tmrPassosChopshopShootVO", " " );
                    sub_5393( ref l_U573 );
                }
                if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
                {
                    if (l_U864 == 0)
                    {
                        sub_11222( 8, 0 );
                        if (sub_8497( g_U818 ))
                        {
                            PED_FINISH_ACTION_INTENTION( g_U818, 55 );
                            PED_FINISH_ACTION_INTENTION( g_U818, 57 );
                            sub_1171( "TEH", "O enemies left - setting action intention", " " );
                            PED_SET_ACTION_INTENTION( g_U818, 47, -1, 0, 0, 0 );
                        }
                        l_U864 = 1;
                    }
                    else if ((PED_GET_ACTION_INTENTION_STATUS( g_U818, 57 )) == 3)
                    {
                        BULLET_CAMERA_TRACK_UNTIL_GROUNDED( 0 );
                        sub_1390( g_U3099, 1 );
                        sub_23699();
                        sub_27185( g_U818 );
                        CLEAR_PED_TASKS_IMMEDIATELY( g_U818 );
                        sub_56563();
                        sub_56748( ref l_U915, ref l_U917 );
                        l_U414 = 13;
                        l_U921 = 4;
                    }
                }
            }
            else if ((l_U413 == 9) AND (iVar2 <= 7))
            {
                sub_1171( "bsw", "2 guys killed, setting newMusicStage to MC_ONESHOT_PLAY_FIRST_RAND_OS", 0 );
                l_U414 = 9;
            }
            else if ((l_U413 == 10) AND (iVar2 <= 4))
            {
                sub_1171( "bsw", "5 guys killed, setting newMusicStage to MC_ONESHOT_PRELOAD_SECOND_RAND_OS", 0 );
                l_U414 = 10;
                l_U413 = 10;
            };;;;
            break;
            case 4:
            if (sub_57192( ref l_U1563, l_U1080 ))
            {
                sub_1171( "TEH", "pi_CHS_YARD_W2 guy fell through map", "***" );
            }
            sub_53161();
            sub_55760();
            sub_20254( 0 );
            sub_50738();
            sub_57461( "SNYC_FSPL", ref l_U915, ref l_U917 );
            if (NOT l_U861)
            {
                if ((PED_GET_ACTION_INTENTION_STATUS( g_U818, 48 )) == 3)
                {
                    sub_1171( "teh", "got action intention 2", 0 );
                    PED_FINISH_ACTION_INTENTION( g_U818, 48 );
                    sub_23421();
                    sub_57855();
                    sub_58031();
                    l_U861 = 1;
                }
            }
            if (l_U861)
            {
                sub_58157();
                sub_58452( 15000, 2500 );
                if (sub_59216( ref l_U996, 0 ))
                {
                    sub_59318( 0 );
                    sub_1905( -444056596, 1 );
                    sub_6980( 0 );
                    sub_27022();
                    ISEQ_START( -444056596 );
                    PED_SET_ACTION_INTENTION( g_U818, 50, 1000, 0, 0, 0 );
                    SET_PED_ONLY_DAMAGED_BY_PLAYER( g_U818, 1 );
                    SET_PED_GORE( g_U818, 0 );
                    SET_PED_PROOFS( g_U818, 0, 1, 1, 1, 1 );
                    BULLET_CAMERA_TRACK_UNTIL_GROUNDED( 0 );
                    sub_26565();
                    sub_21185( ref l_U426, 4200, 1, 0 );
                    sub_21335( ref l_U426 );
                    sub_59740();
                    PLAY_SOUND_FROM_OBJECT( l_U1572, "S_NYC2_CHOP_SHOP_GATE_OPEN", l_U699 );
                    sub_26418( ref l_U1563 );
                    sub_8450( ref l_U1563, 1 );
                    l_U921 = 5;
                }
            }
            break;
            case 5:
            if (sub_22412( ref l_U426 ))
            {
                if (IS_SCRIPTEDFX_ENABLED())
                {
                    PLAY_IMAGEFX( "CONTRAST_ZOOM_FAST_BLUE", 4, 0 );
                    PLAY_IMAGEFX( "FLASH_WHITE_3", 4, 0 );
                    PLAY_IMAGEFX( "FLASH_WHITE_3", 4, 0 );
                }
            }
            if (sub_57192( ref l_U1563, l_U1080 ))
            {
                sub_1171( "TEH", "pi_CHS_YARD_W2 guy fell through map", "***" );
            }
            if (l_U703)
            {
                if (sub_52440( l_U1038 ))
                {
                    sub_15924();
                    sub_26418( ref l_U1563 );
                    sub_60225();
                    l_U703 = 0;
                    l_U704 = 1;
                }
            }
            else
            {
                sub_53161();
                sub_55760();
                sub_50738();
            }
            if ((PED_GET_ACTION_INTENTION_STATUS( g_U818, 53 )) == 3)
            {
                PED_FINISH_ACTION_INTENTION( g_U818, 53 );
                if (g_U780 != 8)
                {
                    g_U780 = 8;
                    sub_16639( ref l_U959, 8, sub_11720(), g_U3141[8]._fU0, g_U3141[8]._fU12, g_U3141[8]._fU16, g_U3141[8]._fU20, 1 );
                }
                sub_26418( ref l_U1563 );
                sub_1171( "BSW", "Passos finished ACTION07, playing the gate ONESHOT", 0 );
            }
            if (((PED_GET_ACTION_INTENTION_STATUS( g_U818, 49 )) == 3) || (sub_52440( l_U1017 )))
            {
                PED_FINISH_ACTION_INTENTION( g_U818, 49 );
                PED_FINISH_ACTION_INTENTION( g_U818, 50 );
                PED_FINISH_ACTION_INTENTION( g_U818, 51 );
                if (l_U413 == 14)
                {
                    l_U414 = 14;
                }
                sub_21185( ref l_U736, 10000, 1, 0 );
                sub_21335( ref l_U736 );
                sub_21185( ref l_U727, 1000, 1, 0 );
                sub_21335( ref l_U727 );
                sub_5393( ref l_U573 );
                sub_1171( "BSW", "Fight's been triggered to CHOPSHOP_BACKYARDS_CHECKPOINT", 0 );
                if (sub_8497( g_U818 ))
                {
                    REGISTER_PED_PRE_SEAMLESS_CUTSCENE( g_U818, "FB_Pass_NY", 0 );
                }
                l_U702 = 0;
                l_U921 = 9;
            }
            break;
            case 9:
            if ((PED_GET_ACTION_INTENTION_STATUS( g_U818, 52 )) == 3)
            {
                sub_1171( "BSW", "Registering Passos with VIG_26", 0 );
                PED_FINISH_ACTION_INTENTION( g_U818, 52 );
                sub_1905( -1207672607, 1 );
                sub_61136();
                ISEQ_START( -1207672607 );
            }
            if (sub_22412( ref l_U727 ))
            {
                ENABLE_WALLA_ZONE( "S_NYC2_WZ_BACKYARDS", 1 );
                sub_61321();
            }
            if (sub_37035( ref l_U736 ))
            {
                if (NOT (sub_52440( l_U1249 )))
                {
                    sub_61484( ref l_U736 );
                }
                else if (sub_22412( ref l_U736 ))
                {
                    l_U805 = 1;
                    l_U1583 = 0;
                }
            }
            if (sub_57192( ref l_U1563, l_U1080 ))
            {
                sub_61565();
                sub_1171( "TEH", "pi_CHS_YARD_W2 guy fell through map", "***" );
            }
            iVar2 = sub_48010( ref l_U1563 );
            if (l_U703)
            {
                if (sub_52440( l_U1038 ))
                {
                    sub_15924();
                    sub_60225();
                    l_U703 = 0;
                    l_U704 = 1;
                }
            }
            else
            {
                sub_53161();
                sub_55760();
                sub_50738();
            }
            if (l_U704)
            {
                if ((sub_61954( l_U699, "LEVEL_S_NYBAR_CP_06", "VIG_24_NYBAR_CHOPSHOP_BACKYARD_GATE_OPEN" )) == 0)
                {
                    sub_38223();
                    sub_38789( g_U3098 );
                    sub_38789( g_U3086 );
                    sub_38789( -2132846056 );
                    sub_2643( "mid_08_nybar_concat", 0 );
                    sub_62081();
                    l_U704 = 0;
                }
            }
            if ((l_U413 == 16) AND (iVar2 <= 4))
            {
                sub_1171( "BSW", "Backyards 2 dead, advancing to MC_ONESHOT_PLAY_THIRD_RAND_OS", 0 );
                l_U414 = 16;
            }
            if ((l_U413 == 19) AND (iVar2 <= 0))
            {
                sub_1171( "BSW", "Backyards 6 dead, advancing to MC_ONESHOT_PLAY_OS_5", 0 );
                l_U414 = 19;
            }
            if ((l_U702 == 0) AND (iVar2 == 0))
            {
                if (IS_BULLET_CAMERA_RUNNING( 0 ))
                {
                    sub_1171( "TEH", "Bullet cam is running", "***" );
                    l_U414 = 20;
                    l_U413 = 20;
                    l_U702 = 1;
                }
            }
            if ((NOT (IS_BULLET_CAMERA_RUNNING( 0 ))) AND (iVar2 == 0))
            {
                END_CONTEXT( "NYBAR_APARTMENT_TO_BACKYARDS" );
                sub_1171( "TEH", "fading out to go to finale", "***" );
                ENABLE_WALLA_ZONE( "S_NYC2_WZ_BACKYARDS", 0 );
                l_U921 = 11;
            }
            else if ((NOT l_U863) AND ((NOT IS_LAST_MAN_STANDING_ACTIVE()) AND (iVar2 == 1)))
            {
                sub_1171( "SBA", "Assigning Backyards bullet cam", 0 );
                l_U1579 = sub_55951( ref l_U1563 );
                if (sub_8497( l_U1579 ))
                {
                    sub_1171( "SBA", "Last ped valid, setting camera wipe", 0 );
                    FORCE_CUSTOM_WIPE_BULLET_CAMERA( 1 );
                }
                if (sub_8497( g_U818 ))
                {
                    SET_PED_CAN_INITIATE_BULLET_CAM( g_U818, 1 );
                }
                BULLET_CAMERA_TRACK_UNTIL_GROUNDED( 1 );
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 0 );
                l_U863 = 1;
            }
            else if (l_U555._fU20 == 0)
            {
                sub_1171( "SBA", "Starting Passos speech timer", 0 );
                sub_21185( ref l_U555, GET_RANDOM_INT_IN_RANGE( 12000, 15000 ), 1, 0 );
                sub_21335( ref l_U555 );
            };;;
            if (sub_22412( ref l_U555 ))
            {
                sub_62999();
            }
            if (sub_21488())
            {
                PED_SET_ACTION_INTENTION( g_U818, 58, 1000, 0, 0, 0 );
            }
            else if (sub_63211())
            {
                PED_SET_ACTION_INTENTION( g_U818, 56, 1000, 0, 0, 0 );
            }
            break;
            case 11:
            if (sub_8497( g_U818 ))
            {
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U818, 1 );
            }
            END_CONTEXT( "NYBAR" );
            sub_11970( l_U959._fU52 );
            SET_HIGHEST_ARCADE_LEVEL_UNLOCKED( 5 );
            if (IS_ARCADE_MODE_ACTIVE() == 1)
            {
                sub_1247( 500 );
                DISPLAY_ARCADE_MODE_LEVEL_END( "s_marina" );
                DO_SCREEN_FADE_IN( 0 );
            }
            else
            {
                sub_63553();
                sub_2643( "mid_08_nybar_concat", 1 );
                sub_64331( 1 );
                CUTSCENE_ENABLE_SKIP( 0 );
                AUD_ENABLE_PRE_BINK_SHUTDOWN( 1 );
                DISABLE_FADE_BETWEEN_SP_LEVELS();
                sub_34024( 1, 0, 0, 1 );
                START_SEAMLESS_CUTSCENE();
                if ((NOT IS_BULLET_CAMERA_TO_GAMEPLAY_ALLOWED()) AND ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0))
                {
                    START_PANEL_WIPE( 300, 5 );
                    sub_1171( "RJM", "Panel wipe active", 0 );
                    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
                }
                l_U413 = 21;
                l_U414 = 21;
                while (HAS_CUTSCENE_FINISHED() == 0)
                {
                    iVar3 = GET_CUTSCENE_TIME_MS();
                    if (NOT l_U802)
                    {
                        if (iVar3 >= 20500)
                        {
                            sub_64331( 2 );
                            l_U802 = 1;
                        }
                    }
                    else if (NOT l_U803)
                    {
                        if (iVar3 >= 23000)
                        {
                            sub_64331( 3 );
                            l_U803 = 1;
                        }
                    }
                    else if (NOT l_U804)
                    {
                        if (iVar3 >= 31000)
                        {
                            sub_64331( 4 );
                            l_U804 = 1;
                        }
                    };;;
                    sub_28659();
                    WAIT( 0 );
                }
            }
            sub_1171( "BSW", "Cutscene finished, time for bink", 0 );
            g_U3041 = 0;
            g_U3437[10] = 1;
            SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
            l_U921 = 12;
            break;
            case 12: break;
        }
    }
    return;
}

int sub_40503()
{
    if ((sub_40522( ref l_U1355, l_U1227 )) > 0)
    {
        return 1;
    }
    if ((sub_40522( ref l_U1393, l_U1227 )) > 0)
    {
        return 1;
    }
    if ((sub_40522( ref l_U1416, l_U1227 )) > 0)
    {
        return 1;
    }
    if ((sub_40522( ref l_U1464, l_U1227 )) > 0)
    {
        return 1;
    }
    return 0;
}

void sub_40522(unknown uParam0, unknown uParam1)
{
    int Result;
    int I;

    Result = 0;
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (sub_21657( (uParam0^)[I], uParam1 ))
        {
            Result++;
        }
    }
    return Result;
}

int sub_40746()
{
    if ((sub_40766( ref l_U1563, l_U1206 )) > 0)
    {
        return 1;
    }
    return 0;
}

void sub_40766(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    int Result;
    int I;

    Result = 0;
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (sub_40809( (uParam0^)[I], uParam1 ))
        {
            Result++;
        }
    }
    return Result;
}

int sub_40809(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, ref uParam1._fU0 );
    }
    return 0;
}

void sub_41114(boolean bParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;

    sub_1171( "BSW", "REGISTER_PEDs_nyc2_MID_06", "***" );
    if (sub_22706())
    {
        if ((bParam0) AND (sub_8497( sub_11720() )))
        {
            sub_41199( ref uVar4, ref uVar5 );
        }
        sub_1171( "BSW", "Registering player with NYC_MID_06", "***" );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( sub_11720(), 0, 0 ), "W_PI_Clt1911_Aa_H", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( sub_11720(), g_U3141[7]._fU0, g_U3141[7]._fU12 );
        CUTSCENE_REGISTER_SET_PLAYER_IN_COVER( "GenCover", "BF328AF7_6BF903F7_Corner2", 1, 0 );
        CUTSCENE_SET_COVER_CAMERA_DIRECTION( g_U3141[7]._fU16, g_U3141[7]._fU20 );
    }
    if (bParam0)
    {
        if (sub_8497( g_U818 ))
        {
            sub_1171( "BSW", "FROM FLOW: Registering passos with NYC_MID_06", "***" );
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( g_U818, "FB_Pass_NY", 0 );
            CUTSCENE_REGISTER_PED_TELEPORT( g_U818, g_U781[7]._fU0, g_U781[7]._fU12 );
            REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( g_U818, 0, 0 ), "W_PI_Des_Aa_H", 0 );
        }
    }
    else if (sub_8497( l_U592 ))
    {
        sub_1171( "BSW", "FROM CUTSCENE SCRIPT: Registering passos with NYC_MID_06", "***" );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U592, "FB_Pass_NY", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U592, 0, 0 ), "W_PI_Des_Aa_H", 0 );
    }
    if (sub_8497( (uParam1^)[0] ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam1^)[0], "G_NY_T_SOLD_E", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( (uParam1^)[0], g_U3125, g_U3128 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( (uParam1^)[0], ref g_U3045 );
    }
    if (sub_8497( (uParam1^)[1] ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam1^)[1], "G_NY_T_SOLD_E^1", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( (uParam1^)[1], g_U3129, g_U3132 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( (uParam1^)[1], ref g_U3045 );
    }
    if (sub_8497( (uParam1^)[2] ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam1^)[2], "G_NY_T_SOLD_E^2", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( (uParam1^)[2], g_U3133, g_U3136 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( (uParam1^)[2], ref g_U3045 );
    }
    if (sub_8497( (uParam1^)[3] ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam1^)[3], "G_NY_T_SOLD_E^3", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( (uParam1^)[3], g_U3137, g_U3140 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( (uParam1^)[3], ref g_U3045 );
    }
    if (bParam0)
    {
        sub_42956( 0, uParam1 );
    }
    if (sub_8497( l_U651[0] ))
    {
        sub_1171( "BSW", "Registering piWorkers[0] with NYC_MID_06", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U651[0], "G_NY_T_SOLD_E^4", 0 );
    }
    if (sub_8497( l_U651[1] ))
    {
        sub_1171( "BSW", "Registering piWorkers[1] with NYC_MID_06", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U651[1], "G_NY_T_SOLD_E^5", 0 );
    }
    if (sub_8497( l_U651[2] ))
    {
        sub_1171( "BSW", "Registering piWorkers[2] with NYC_MID_06", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U651[2], "G_NY_T_SOLD_E^6", 0 );
    }
    return;
}

void sub_41199(unknown uParam0, unknown uParam1)
{
    unknown uVar4;

    sub_1171( "TEH", "MAR_NY_HolsterRifleOrDualAndDrawPistol begun", 0 );
    uVar4 = GET_WEAPON_FROM_HAND( sub_11720(), 0, 0 );
    if (GET_DOES_WEAPON_EXIST( uVar4 ))
    {
        if (((uParam0^) == 1) || (((GET_WEAPON_TYPE( uVar4 )) == 1992962408) || (((GET_WEAPON_TYPE( uVar4 )) == 724901397) || (((GET_WEAPON_TYPE( uVar4 )) == 57534114) || (((GET_WEAPON_TYPE( uVar4 )) == 1308526797) || (((GET_WEAPON_TYPE( uVar4 )) == -1074756423) || (((GET_WEAPON_TYPE( uVar4 )) == -1013714740) || (((GET_WEAPON_TYPE( uVar4 )) == -184942895) || (((GET_WEAPON_TYPE( uVar4 )) == -168327769) || (((GET_WEAPON_TYPE( uVar4 )) == 1845102363) || ((GET_WEAPON_TYPE( uVar4 )) == 434544317)))))))))))
        {
            sub_1171( "TEH", "Holster weapon and draw gun", 0 );
            SELECT_WEAPON_TO_HAND( sub_11720(), 0, 0, 1 );
            uVar4 = GET_WEAPON_FROM_HAND( sub_11720(), 0, 0 );
            while (GET_DOES_WEAPON_EXIST( uVar4 ))
            {
                WAIT( 0 );
                uVar4 = GET_WEAPON_FROM_HAND( sub_11720(), 0, 0 );
                sub_1171( "TEH", "Waiting for right hand to be empty", 0 );
            }
        }
    }
    uVar4 = GET_WEAPON_FROM_HAND( sub_11720(), 1, 0 );
    if (GET_DOES_WEAPON_EXIST( uVar4 ))
    {
        (uParam1^) = 1;
        sub_1171( "TEH", "Dual wielding is true", 0 );
        SELECT_WEAPON_TO_HAND( sub_11720(), 0, 1, 1 );
        uVar4 = GET_WEAPON_FROM_HAND( sub_11720(), 1, 0 );
        while (GET_DOES_WEAPON_EXIST( uVar4 ))
        {
            WAIT( 0 );
            uVar4 = GET_WEAPON_FROM_HAND( sub_11720(), 1, 0 );
        }
    }
    uVar4 = GET_WEAPON_FROM_HAND( sub_11720(), 0, 0 );
    if (NOT (GET_DOES_WEAPON_EXIST( uVar4 )))
    {
        uVar4 = GET_WEAPON_FROM_HOLSTER( sub_11720(), 0 );
        if (NOT (GET_DOES_WEAPON_EXIST( uVar4 )))
        {
            uVar4 = GET_WEAPON_FROM_HOLSTER( sub_11720(), 1 );
        }
        SELECT_WEAPON_TO_HAND( sub_11720(), uVar4, 0, 1 );
        uVar4 = GET_WEAPON_FROM_HAND( sub_11720(), 0, 0 );
        while (NOT (GET_DOES_WEAPON_EXIST( uVar4 )))
        {
            WAIT( 0 );
            uVar4 = GET_WEAPON_FROM_HAND( sub_11720(), 0, 0 );
            sub_1171( "TEH", "Waiting for right hand to be full", 0 );
        }
    }
    sub_1171( "TEH", "MAR_NY_HolsterRifleOrDualAndDrawPistol ended", 0 );
    return;
}

void sub_42956(boolean bParam0, unknown uParam1)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam1^); I++ )
    {
        if (DOES_PED_EXIST( (uParam1^)[I] ))
        {
            if (I >= 4)
            {
                if (bParam0)
                {
                    sub_26449( (uParam1^)[I] );
                }
                else
                {
                    sub_24428( (uParam1^)[I] );
                }
            }
        }
    }
    return;
}

void sub_43396(unknown uParam0)
{
    if ((DOES_OBJECT_EXIST( l_U888 )) == 1)
    {
        SET_OBJECT_VISIBLE( l_U888, uParam0 );
    }
    if ((DOES_OBJECT_EXIST( l_U889 )) == 1)
    {
        SET_OBJECT_VISIBLE( l_U889, uParam0 );
    }
    if ((DOES_OBJECT_EXIST( l_U890 )) == 1)
    {
        SET_OBJECT_VISIBLE( l_U890, uParam0 );
    }
    if ((DOES_OBJECT_EXIST( l_U891 )) == 1)
    {
        SET_OBJECT_VISIBLE( l_U891, uParam0 );
    }
    return;
}

int sub_43553(boolean bParam0, unknown uParam1, boolean bParam2, unknown uParam3)
{
    boolean bVar6;
    boolean bVar7;
    unknown uVar8;

    sub_1171( "BSW", "PLAY_NYC_MID_06 start", "*****" );
    if (IS_STRING_NULL( uParam3 ))
    {
        uParam3 = l_U591;
    }
    sub_34024( 1, 0, 0, 1 );
    sub_2643( uParam3, 1 );
    sub_2360( 1 );
    sub_43650();
    if (NOT bParam0)
    {
        sub_45280();
        sub_45543();
        sub_7428();
        sub_41114( bParam0, ref l_U593 );
    }
    else
    {
        CUTSCENE_ENABLE_SKIP( 0 );
    }
    if (bParam2)
    {
        START_CUTSCENE_CAPTURE( uParam3 );
    }
    START_SEAMLESS_CUTSCENE();
    CUTSCENE_DISABLE_FADE_IN_GAME_AT_END( 1 );
    WAIT( 1 );
    bVar6 = false;
    bVar7 = false;
    while (NOT HAS_CUTSCENE_FINISHED())
    {
        if ((NOT bVar6) AND (GET_CUTSCENE_TIME_MS() > l_U695))
        {
            sub_1171( "BSW", "init'ing breaking glass", 0 );
            ENABLE_STATIC_EMITTER( "S_NYC2_SE_CHOP_SHOP_TOOLS", 0 );
            bVar6 = true;
            l_U414 = 5;
        }
        else if ((NOT bVar7) AND (GET_CUTSCENE_TIME_MS() > l_U696))
        {
            sub_1171( "BSW", "placing final breaking glass", 0 );
            sub_46092();
            if (bParam0)
            {
                sub_2299( 0 );
            }
            bVar7 = true;
        }
        sub_28659();
        if (bVar6)
        {
            sub_46354();
        }
        WAIT( 0 );
    }
    if (NOT bVar6)
    {
        l_U414 = 5;
    }
    if (IS_SCREEN_FADED_OUT())
    {
        uVar8 = GET_INTERIOR_AT_COORDS( g_U3141[7]._fU0 );
        SET_INTERIOR_ACTIVE( uVar8, 1, 0 );
        LOAD_SCENE_FOR_ROOM_BY_KEY( uVar8, GET_HASH_KEY( ref g_U3569 ) );
        LOAD_SCENE( -205.05800000, -24.86424000, -11.49453000 );
        SET_ROOM_FOR_PED_BY_NAME( sub_11720(), ref g_U3569 );
    }
    if (bParam2)
    {
        STOP_CUTSCENE_CAPTURE();
    }
    sub_47376();
    if (NOT bParam0)
    {
        sub_47584();
        sub_47689();
        sub_47771();
    }
    else
    {
        sub_15914();
        sub_42956( 1, uParam1 );
    }
    sub_1171( "BSW", "PLAY_NYC_MID_06 end", "*****" );
    return 1;
}

void sub_43650()
{
    sub_1171( "RJM", "CREATE_CHOPSHOP_ROOF", " " );
    sub_16148();
    sub_16248( 0 );
    sub_16248( 1 );
    sub_16050();
    l_U303 = sub_8770( -1513711447, l_U311, l_U314, 0, 1, 0 );
    l_U304 = sub_8770( -737544913, l_U311, l_U314, 0, 1, 0 );
    l_U305 = sub_8770( -1035251278, l_U311, l_U314, 0, 1, 0 );
    l_U306 = sub_8770( 1679037765, l_U311, l_U314, 0, 1, 0 );
    l_U307 = sub_8770( -1838550544, l_U311, l_U314, 0, 1, 0 );
    l_U308 = sub_8770( -1332728256, l_U311, l_U314, 0, 1, 0 );
    l_U309 = sub_8770( -1629582627, l_U311, l_U314, 0, 1, 0 );
    l_U310 = sub_8770( 493783035, l_U311, l_U314, 0, 1, 0 );
    SET_OBJECT_VISIBLE( l_U303, 0 );
    SET_OBJECT_VISIBLE( l_U304, 0 );
    SET_OBJECT_VISIBLE( l_U305, 0 );
    SET_OBJECT_VISIBLE( l_U306, 0 );
    SET_OBJECT_VISIBLE( l_U307, 0 );
    SET_OBJECT_VISIBLE( l_U308, 0 );
    SET_OBJECT_VISIBLE( l_U309, 0 );
    SET_OBJECT_VISIBLE( l_U310, 0 );
    PLAY_OBJECT_ANIM( l_U303, "CS_WIN_SMASH_01", "ny_chopanim", 0.10000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U304, "CS_WIN_SMASH_02", "ny_chopanim", 0.10000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U305, "CS_WIN_SMASH_03", "ny_chopanim", 0.10000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U306, "CS_WIN_SMASH_04", "ny_chopanim", 0.10000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U307, "CS_WIN_SMASH_05", "ny_chopanim", 0.10000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U308, "CS_WIN_SMASH_06", "ny_chopanim", 0.10000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U309, "CS_WIN_SMASH_07", "ny_chopanim", 0.10000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U310, "CS_WIN_SMASH_08", "ny_chopanim", 0.10000000, 0, 1 );
    SET_OBJECT_ANIM_SPEED( l_U303, "CS_WIN_SMASH_01", "ny_chopanim", 0.00000000 );
    SET_OBJECT_ANIM_SPEED( l_U304, "CS_WIN_SMASH_02", "ny_chopanim", 0.00000000 );
    SET_OBJECT_ANIM_SPEED( l_U305, "CS_WIN_SMASH_03", "ny_chopanim", 0.00000000 );
    SET_OBJECT_ANIM_SPEED( l_U306, "CS_WIN_SMASH_04", "ny_chopanim", 0.00000000 );
    SET_OBJECT_ANIM_SPEED( l_U307, "CS_WIN_SMASH_05", "ny_chopanim", 0.00000000 );
    SET_OBJECT_ANIM_SPEED( l_U308, "CS_WIN_SMASH_06", "ny_chopanim", 0.00000000 );
    SET_OBJECT_ANIM_SPEED( l_U309, "CS_WIN_SMASH_07", "ny_chopanim", 0.00000000 );
    SET_OBJECT_ANIM_SPEED( l_U310, "CS_WIN_SMASH_08", "ny_chopanim", 0.00000000 );
    SET_OBJECT_ANIM_CURRENT_TIME( l_U303, "CS_WIN_SMASH_01", "ny_chopanim", l_U293 );
    SET_OBJECT_ANIM_CURRENT_TIME( l_U304, "CS_WIN_SMASH_02", "ny_chopanim", l_U293 );
    SET_OBJECT_ANIM_CURRENT_TIME( l_U305, "CS_WIN_SMASH_03", "ny_chopanim", l_U293 );
    SET_OBJECT_ANIM_CURRENT_TIME( l_U306, "CS_WIN_SMASH_04", "ny_chopanim", l_U293 );
    SET_OBJECT_ANIM_CURRENT_TIME( l_U307, "CS_WIN_SMASH_05", "ny_chopanim", l_U293 );
    SET_OBJECT_ANIM_CURRENT_TIME( l_U308, "CS_WIN_SMASH_06", "ny_chopanim", l_U293 );
    SET_OBJECT_ANIM_CURRENT_TIME( l_U309, "CS_WIN_SMASH_07", "ny_chopanim", l_U293 );
    SET_OBJECT_ANIM_CURRENT_TIME( l_U310, "CS_WIN_SMASH_08", "ny_chopanim", l_U293 );
    return;
}

void sub_45280()
{
    sub_1171( "BSW", "BLOCKLOAD_NYC_MID_06_ASSETS", "***" );
    sub_45342( 2024698471 );
    sub_45342( g_U3098 );
    return;
}

void sub_45342(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
        sub_1495( "[SP]### ERROR! (BlockLoadModel) Trying to block load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    LOAD_ALL_OBJECTS_NOW();
    while ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        LOAD_ALL_OBJECTS_NOW();
        WAIT( 0 );
    }
    return;
}

void sub_45543()
{
    sub_2942( ref l_U598[0], -207.81260000, -19.55955000, -11.42784000, 124.76100000, 735889722, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U598[1], -206.74500000, -18.42852000, -11.42813000, 124.76100000, -1782036333, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U598[2], -206.89750000, -16.76666000, -11.42650000, 98.19326000, 1465702486, 7, 3, 2, 0, 0 );
    sub_2942( ref l_U598[3], -207.15520000, -21.31980000, -11.42757000, 98.19326000, 1064552273, 7, 3, 2, 0, 0 );
    sub_7612( ref l_U651 );
    l_U593[0] = sub_7746( ref l_U598[0] );
    l_U593[1] = sub_7746( ref l_U598[1] );
    l_U593[2] = sub_7746( ref l_U598[2] );
    l_U593[3] = sub_7746( ref l_U598[3] );
    return;
}

void sub_46092()
{
    sub_15924();
    sub_16050();
    sub_16148();
    sub_46117();
    sub_16248( 0 );
    return;
}

void sub_46117()
{
    sub_1171( "bsw", "CREATE_STATIC_FINAL_RF start", 0 );
    sub_1390( l_U282, 1 );
    sub_7103( l_U302 );
    l_U302 = sub_7168( l_U282, l_U341, l_U344, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U302 ))
    {
        sub_1171( "bsw", "CREATE_STATIC_FINAL_RF freezing object", 0 );
        FREEZE_OBJECT_POSITION( l_U302, 1 );
    }
    return;
}

void sub_46354()
{
    switch (l_U294)
    {
        case 1:
        sub_1171( "BSW", "HANDLE_CHOPSHOP_BREAK_GLASS starting chop shop glass breaking", 0 );
        sub_43650();
        sub_46481();
        START_PARTICLE_FX_NON_LOOPED_AT_COORD( "NYC_RF_ChopShop_Glass_S", l_U317, l_U320, 1065353216 );
        sub_21185( ref l_U283, l_U292, 1, 0 );
        sub_21335( ref l_U283 );
        l_U294 = 2;
        break;
        case 2:
        if (sub_22412( ref l_U283 ))
        {
            START_PARTICLE_FX_NON_LOOPED_AT_COORD( "NYC_RF_Dust_Up_S", l_U323, l_U326, 1065353216 );
            l_U294 = 3;
        }
        break;
        case 3: break;
    }
    return;
}

void sub_46481()
{
    SET_OBJECT_VISIBLE( l_U303, 1 );
    SET_OBJECT_VISIBLE( l_U304, 1 );
    SET_OBJECT_VISIBLE( l_U305, 1 );
    SET_OBJECT_VISIBLE( l_U306, 1 );
    SET_OBJECT_VISIBLE( l_U307, 1 );
    SET_OBJECT_VISIBLE( l_U308, 1 );
    SET_OBJECT_VISIBLE( l_U309, 1 );
    SET_OBJECT_VISIBLE( l_U310, 1 );
    sub_7103( l_U299[0] );
    SET_OBJECT_ANIM_SPEED( l_U303, "CS_WIN_SMASH_01", "ny_chopanim", 0.70000000 );
    SET_OBJECT_ANIM_SPEED( l_U304, "CS_WIN_SMASH_02", "ny_chopanim", 0.70000000 );
    SET_OBJECT_ANIM_SPEED( l_U305, "CS_WIN_SMASH_03", "ny_chopanim", 0.70000000 );
    SET_OBJECT_ANIM_SPEED( l_U306, "CS_WIN_SMASH_04", "ny_chopanim", 0.70000000 );
    SET_OBJECT_ANIM_SPEED( l_U307, "CS_WIN_SMASH_05", "ny_chopanim", 0.70000000 );
    SET_OBJECT_ANIM_SPEED( l_U308, "CS_WIN_SMASH_06", "ny_chopanim", 0.70000000 );
    SET_OBJECT_ANIM_SPEED( l_U309, "CS_WIN_SMASH_07", "ny_chopanim", 0.70000000 );
    SET_OBJECT_ANIM_SPEED( l_U310, "CS_WIN_SMASH_08", "ny_chopanim", 0.70000000 );
    START_PARTICLE_FX_NON_LOOPED_AT_COORD( "NYC_RF_ChopShop_Glass_S", l_U317, l_U317, 1065353216 );
    return;
}

void sub_47376()
{
    sub_15924();
    sub_16050();
    ENABLE_STATIC_EMITTER( "S_NYC2_SE_CHOP_SHOP_TOOLS", 0 );
    sub_47433( 0 );
    return;
}

void sub_47433(boolean bParam0)
{
    sub_38789( -1513711447 );
    sub_38789( -737544913 );
    sub_38789( -1035251278 );
    sub_38789( 1679037765 );
    sub_38789( -1838550544 );
    sub_38789( -1332728256 );
    sub_38789( -1629582627 );
    sub_38789( 493783035 );
    sub_38789( l_U282 );
    if (bParam0)
    {
        sub_38789( l_U281 );
        sub_38789( l_U279 );
    }
    return;
}

void sub_47584()
{
    sub_1171( "BSW", "CLEAN_UP_MID06_ASSETS", "***" );
    sub_47635();
    sub_7612( ref l_U593 );
    sub_7646( l_U592 );
    return;
}

void sub_47635()
{
    sub_7612( ref l_U651 );
    return;
}

void sub_47689()
{
    sub_1171( "BSW", "UNLOAD_NYC_MID_06_ASSETS", "***" );
    sub_38789( 2024698471 );
    sub_38789( g_U3098 );
    return;
}

void sub_47771()
{
    sub_38789( l_U281 );
    sub_38789( l_U279 );
    sub_38789( l_U280 );
    return;
}

void sub_48010(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result++;
        }
    }
    return Result;
}

int sub_48122()
{
    switch (l_U821)
    {
        case 0: break;
        case 1:
        sub_1171( "SP", "eMid06BlendState = BLENDOUT_START", 0 );
        sub_34024( 1, 0, 0, 1 );
        sub_20978( sub_11720(), g_U3141[7]._fU0, g_U3141[7]._fU12 );
        if (IS_ANIMATED_CAMERA_PLAYING() == 0)
        {
            CAMERA_PLAY_ANIMATED( "LEVEL_S_NYBAR_CP_06", "B_OUT_MID_06_NYBAR_FWD_CAM", 1, l_U436, l_U439, 0, 0 );
        }
        l_U821 = 2;
        sub_1171( "SP", "eMid06BlendState = BLENDOUT_FIRST_FRAME", 0 );
        break;
        case 2:
        sub_1171( "SP", "eMid06BlendState = BLENDOUT_FIRST_FRAME", 0 );
        sub_48471();
        sub_47635();
        sub_43396( 1 );
        SNAP_PLAYER_TO_COVERPOINT( sub_11742(), "GenCover", "BF328AF7_6BF903F7_Corner2", 0 );
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U3141[7]._fU16, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U3141[7]._fU20, 1065353216, 0 );
        DO_SCREEN_FADE_IN( 0 );
        l_U821 = 3;
        break;
        case 3:
        sub_1171( "SP", "eMid06BlendState = BLENDOUT_PLAYING", 0 );
        if (l_U441 == 0)
        {
            if (IS_ANIMATED_CAMERA_PLAYING() == 1)
            {
                if (CAMERA_ANIMATED_CURRENT_TIME() >= l_U440)
                {
                    SET_GAMEPLAY_CAM_RELATIVE_HEADING( l_U452, 1065353216, 0 );
                    SET_GAMEPLAY_CAM_RELATIVE_PITCH( l_U453, 1065353216, 0 );
                    CAMERA_ANIMATED_STOP( l_U451, 1 );
                    sub_21185( ref l_U442, l_U451, 1, 0 );
                    sub_21335( ref l_U442 );
                    l_U441 = 1;
                }
            }
        }
        if ((sub_22412( ref l_U442 )) == 1)
        {
            sub_49287( 1, 1 );
            l_U821 = 0;
            sub_1171( "SP", "eMid06BlendState = BLENDOUT_IDLE", 0 );
            return 1;
        }
        break;
    }
    return 0;
}

void sub_48471()
{
    sub_26418( ref l_U1355 );
    sub_48494( ref l_U1355 );
    sub_26418( ref l_U1393 );
    sub_48850( ref l_U1393 );
    sub_48494( ref l_U1393 );
    return;
}

void sub_48494(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        sub_48528( (uParam0^)[I], 1 );
    }
    return;
}

void sub_48528(unknown uParam0, boolean bParam1)
{
    if ((NOT (IS_PED_RAGDOLL( uParam0, 0 ))) AND ((NOT (IS_PED_INJURED( uParam0 ))) AND ((sub_22706()) AND (sub_8497( uParam0 )))))
    {
        if (bParam1)
        {
            CLEAR_PED_TASKS_IMMEDIATELY( uParam0 );
        }
        CLEAR_LOCKED_TARGET( uParam0 );
        sub_48605( ref uParam0 );
        sub_48701( ref uParam0 );
        TASK_COMBAT_PED( uParam0, sub_11720() );
    }
    return;
}

void sub_48605(unknown uParam0)
{
    if ((sub_22706()) AND (sub_8497( (uParam0^) )))
    {
        sub_48641( uParam0, sub_11720() );
    }
    return;
}

void sub_48641(unknown uParam0, unknown uParam1)
{
    if ((sub_8497( uParam1 )) AND (sub_8497( (uParam0^) )))
    {
        REGISTER_TARGET( (uParam0^), uParam1 );
    }
    return;
}

void sub_48701(unknown uParam0)
{
    if ((sub_22706()) AND (sub_8497( (uParam0^) )))
    {
        sub_48737( uParam0, sub_11720() );
    }
    return;
}

void sub_48737(unknown uParam0, unknown uParam1)
{
    if ((sub_8497( uParam1 )) AND (sub_8497( (uParam0^) )))
    {
        SET_LOCKED_TARGET( (uParam0^), uParam1 );
    }
    return;
}

void sub_48850(unknown uParam0)
{
    sub_48867( uParam0, sub_11720() );
    return;
}

void sub_48867(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (sub_8497( (uParam0^)[I] ))
        {
            sub_48641( ref (uParam0^)[I], uParam1 );
        }
    }
    return;
}

void sub_49287(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD( sub_11720() )))
    {
        SET_PLAYER_CONTROL( sub_11742(), 1, 0 );
        SET_PED_INVINCIBLE( sub_11720(), 0 );
        if (bParam0)
        {
            sub_49368();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

void sub_49368()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD( sub_11720() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND( sub_11720(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND( sub_11720(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_11720(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP( sub_11720(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

void sub_49636()
{
    int I;

    sub_23709();
    sub_23810( -691403429, -862236369, 25000, 25000 );
    sub_23908( 2, 434544317, -862236369, 25000, 25000 );
    sub_23908( 3, 434544317, -862236369, 25000, 25000 );
    sub_24069( ref l_U1424, ref l_U1464, ref l_U1418, 0, 1.00000000, "AIT_EXPERT", 0, 0, 25000, 3, 0, 25000, "Assault D" );
    sub_27663( ref l_U1464, l_U995, 1 );
    sub_23709();
    for ( I = 0; I < l_U1464; I++ )
    {
        if (((IS_PED_DEAD( l_U1464[I] )) == 0) AND ((DOES_PED_EXIST( l_U1464[I] )) == 1))
        {
            SET_PED_CAN_AVOID_DEATH_ZONES( l_U1464[I], 0 );
            SET_PED_ONLY_DAMAGED_BY_PLAYER( l_U1464[I], 1 );
        }
    }
    SET_GROUP_LAST_ALIVE_AS_LONE_WOLF( l_U1418._fU0, 1 );
    sub_24069( ref l_U1402, ref l_U1416, ref l_U1396, -691403429, 1.00000000, "AIT_EXPERT", 0, 0, 25000, 3, 0, 25000, "Office Flankers" );
    sub_27663( ref l_U1416, l_U995, 1 );
    for ( I = 0; I < l_U1416; I++ )
    {
        if (((IS_PED_DEAD( l_U1416[I] )) == 0) AND ((DOES_PED_EXIST( l_U1416[I] )) == 1))
        {
            SET_PED_CAN_AVOID_DEATH_ZONES( l_U1416[I], 0 );
            SET_PED_ONLY_DAMAGED_BY_PLAYER( l_U1416[I], 1 );
        }
    }
    SET_GROUP_LAST_ALIVE_AS_LONE_WOLF( l_U1396._fU0, 1 );
    return;
}

void sub_50358(unknown uParam0, unknown uParam1)
{
    int I;
    int iVar5;

    I = 0;
    iVar5 = (uParam0^);
    for ( I = 0; I < iVar5; I++ )
    {
        if ((DOES_PED_EXIST( (uParam0^)[I] )) == 1)
        {
            if ((IS_PED_DEAD( (uParam0^)[I] )) == 0)
            {
                if (((IS_PED_IN_GAMEPLAY_HELPER_BOX( (uParam0^)[I], ref l_U1122._fU0 )) == 0) AND ((IS_PED_IN_GAMEPLAY_HELPER_BOX( (uParam0^)[I], ref l_U1101._fU0 )) == 0))
                {
                    sub_1171( "TEH", uParam1, "***" );
                    sub_19244( I );
                    sub_22998( (uParam0^)[I] );
                }
            }
        }
    }
    return;
}

void sub_50738()
{
    if (DOES_OBJECT_EXIST( l_U865[0] ))
    {
        if (HAS_SOMETHING_EXPLODED_IN_AREA( -209.32000000, -26.61000000, -10.20000000, 3.00000000 ))
        {
            sub_1171( "SBA", "P_HANDLE_SWAP_DESTROYED_GAS_TANK: Swapping tanks", "***" );
            sub_7103( l_U865[0] );
            sub_7103( l_U867[0] );
            l_U867[0] = sub_8770( -1455323458, -209.32000000, -26.61000000, -10.25000000, 0.00000000, 65446, 0.00000000, 0, 1, 0 );
            if ((DOES_OBJECT_EXIST( l_U867[0] )) == 1)
            {
                ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U867[0], ref g_U3569 );
                FREEZE_OBJECT_POSITION( l_U867[0], 1 );
                SET_OBJECT_AS_PATH_OBSTACLE( l_U867[0] );
            }
        }
    }
    return;
}

void sub_51030()
{
    if (NOT sub_51040())
    {
        if (sub_22412( ref l_U573 ))
        {
            sub_1171( "SBA", "P_HANDLE_PASSOS_CHOPSHOP_INCIDENTAL_SHOOT_VO", "***" );
            sub_51200( "SNYC_CSSP", ref l_U464 );
            sub_21185( ref l_U573, GET_RANDOM_INT_IN_RANGE( 15000, 18000 ), 1, 0 );
            sub_21335( ref l_U573 );
        }
    }
    return;
}

void sub_51040()
{
    int Result;
    int I;

    Result = 0;
    for ( I = 0; I <= 3; I++ )
    {
        Result = (IS_SCRIPTED_CONVERSATION_ONGOING( I )) || (Result);
    }
    return Result;
}

void sub_51200(unknown uParam0, unknown uParam1)
{
    sub_1171( "SBA", "P_PLAY_DIAL_PASSOS", "***" );
    if (sub_8497( g_U818 ))
    {
        if (NOT (IS_PED_DEAD( sub_11720() )))
        {
            sub_51283( uParam1 );
            sub_51366( 1, g_U818, "PASSOS", uParam1, 2, 0 );
            sub_51366( 0, sub_11720(), "MAX", uParam1, 2, 0 );
            sub_51591( uParam0, uParam1, 8, 1 );
        }
    }
    return;
}

void sub_51283(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

void sub_51366(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

void sub_51591(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return sub_51615( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

void sub_51615(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return sub_51670( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

int sub_51670(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT (sub_51705( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
    sub_52199( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

int sub_51705(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

void sub_52199(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

void sub_52440(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20)
{
    return sub_40809( sub_11720(), uParam0 );
}

void sub_52476()
{
    sub_1171( "BSW", "CREATE_OFFICE_FLANKERS start", 0 );
    sub_26418( ref l_U1416 );
    sub_48850( ref l_U1416 );
    sub_48494( ref l_U1416 );
    return;
}

void sub_52704()
{
    vector vVar2;
    int I;

    vVar2 = {-203.56470000, -28.98821000, -11.42776000};
    for ( I = 0; I < 3; I++ )
    {
        if (sub_8497( l_U1464[I] ))
        {
            REGISTER_TARGET( l_U1464[I], sub_11720() );
            TASK_ATTACK_MOVE( l_U1464[I], vVar2, 1092616192, 1101004800, -1082130432, 3 );
        }
    }
    return;
}

void sub_52899(unknown uParam0)
{
    sub_1171( "TEH", "LOAD_CHOPSHOP_ASSETS", 0 );
    sub_52951( l_U697, uParam0 );
    sub_2503( "SNYCAUD" );
    return;
}

void sub_52951(unknown uParam0, int iParam1)
{
    LOAD_SCRIPT_AUDIO_BANK( uParam0 );
    if (iParam1 == 1)
    {
        while ((IS_SCRIPT_AUDIO_BANK_LOADED( uParam0, 0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_53041()
{
    l_U1572 = GET_SOUND_ID();
    return;
}

void sub_53161()
{
    if ((l_U920 == 0) AND ((DOES_OBJECT_EXIST( l_U893 )) AND (DOES_OBJECT_EXIST( l_U892 ))))
    {
        if ((GET_OBJECT_HEALTH( l_U892 )) <= 0)
        {
            l_U920 = 1;
            sub_1171( "TEH", "setting to DROP_START", "---" );
            PLAY_SCRIPT_STREAM_FROM_OBJECT( l_U892, l_U1577 );
            PLAY_SCRIPT_STREAM_FROM_OBJECT( l_U888, l_U1576 );
            START_PARTICLE_FX_NON_LOOPED_ON_OBJECT( "BusDepot_Elec_Box_S", l_U892, 0, 0, 0, 0, 0, 0, 1065353216 );
            GENERATE_OBJECT_CRUSH_IMMINENT_EVENT( l_U888 );
        }
        else if ((GET_OBJECT_HEALTH( l_U893 )) <= 0)
        {
            l_U920 = 1;
            sub_1171( "TEH", "setting to DROP_START", "---" );
            PLAY_SCRIPT_STREAM_FROM_OBJECT( l_U893, l_U1577 );
            PLAY_SCRIPT_STREAM_FROM_OBJECT( l_U888, l_U1576 );
            START_PARTICLE_FX_NON_LOOPED_ON_OBJECT( "BusDepot_Elec_Box_S", l_U893, 0, 0, 0, 0, 0, 0, 1065353216 );
            GENERATE_OBJECT_CRUSH_IMMINENT_EVENT( l_U888 );
        }
    }
    if ((l_U920 != 4) AND (l_U920 != 0))
    {
        sub_53564();
    }
    if (sub_22412( ref l_U871 ))
    {
        STOP_GAMEPLAY_CAM_SHAKING( "SMALL_EXPLOSION_SHAKE", 0 );
        STOP_GAMEPLAY_CAM_SHAKING( "VIBRATE_SHAKE", 0 );
    }
    return;
}

void sub_53564()
{
    float fVar2;

    switch (l_U920)
    {
        case 1:
        sub_1171( "TEH", "CAR STARTING TO DROP", "---" );
        if (DOES_OBJECT_EXIST( l_U888 ))
        {
            PLAY_OBJECT_ANIM( l_U888, "RF_DROPCAR", ref l_U880, 0.00000000, 0, 1 );
            SET_OBJECT_ANIM_SPEED( l_U888, "RF_DROPCAR", ref l_U880, 1.00000000 );
            SET_OBJECT_ANIM_CURRENT_TIME( l_U888, "RF_DROPCAR", ref l_U880, l_U1587 );
            l_U920 = 2;
        }
        if (DOES_OBJECT_EXIST( l_U889 ))
        {
            PLAY_OBJECT_ANIM( l_U889, "RF_DCAR_WSHLD_ROOTA", ref l_U880, 0.00000000, 0, 1 );
            SET_OBJECT_ANIM_SPEED( l_U889, "RF_DCAR_WSHLD_ROOTA", ref l_U880, 1.00000000 );
            SET_OBJECT_ANIM_CURRENT_TIME( l_U889, "RF_DCAR_WSHLD_ROOTA", ref l_U880, l_U1587 );
        }
        if (DOES_OBJECT_EXIST( l_U890 ))
        {
            PLAY_OBJECT_ANIM( l_U890, "RF_DCAR_WSHLD_ROOTB", ref l_U880, 0.00000000, 0, 1 );
            SET_OBJECT_ANIM_SPEED( l_U890, "RF_DCAR_WSHLD_ROOTB", ref l_U880, 1.00000000 );
            SET_OBJECT_ANIM_CURRENT_TIME( l_U890, "RF_DCAR_WSHLD_ROOTB", ref l_U880, l_U1587 );
        }
        if (DOES_OBJECT_EXIST( l_U891 ))
        {
            PLAY_OBJECT_ANIM( l_U891, "RF_DCAR_WSHLD_ROOTC", ref l_U880, 0.00000000, 0, 1 );
            SET_OBJECT_ANIM_SPEED( l_U891, "RF_DCAR_WSHLD_ROOTC", ref l_U880, 1.00000000 );
            SET_OBJECT_ANIM_CURRENT_TIME( l_U891, "RF_DCAR_WSHLD_ROOTC", ref l_U880, l_U1587 );
        }
        if (DOES_OBJECT_EXIST( l_U892 ))
        {
            CAMERA_CAN_TARGET_OBJECT( 0, l_U892 );
        }
        if (DOES_OBJECT_EXIST( l_U893 ))
        {
            CAMERA_CAN_TARGET_OBJECT( 0, l_U893 );
        }
        break;
        case 2:
        if (sub_54290() == 1)
        {
            l_U807 = 2;
        }
        fVar2 = GET_OBJECT_ANIM_CURRENT_TIME( l_U888, "RF_DROPCAR", ref l_U880 );
        if (fVar2 >= 1.00000000)
        {
            ENABLE_NORMAL_LINE( "ny_grdn", "GrabSpline10", 0 );
            ENABLE_COVERPOINTMP3( "GenCover", "BF328AF7_C3E45C7_Corner1", 0 );
            ENABLE_COVERPOINTMP3( "GenCover", "BF328AF7_C3E45C7_Popover1", 0 );
            ENABLE_COVERPOINTMP3( "GenCover", "BF328AF7_C3E45C7_Corner2", 0 );
            l_U920 = 3;
        }
        else if ((NOT l_U1575) AND (fVar2 > l_U1587))
        {
            sub_54709( ref l_U1355 );
            sub_54709( ref l_U1393 );
            sub_54709( ref l_U1416 );
            sub_54709( ref l_U1464 );
            l_U1575 = 1;
        }
        if ((NOT l_U1574) AND (fVar2 > l_U1589))
        {
            sub_1171( "ML", "STARTING Car IMPACT EFFECTS", "---" );
            START_PARTICLE_FX_NON_LOOPED_AT_COORD( "BusDepot_BusDrop_Impact_S", -214.75600000, -19.28700000, -10.03000000, 0.00000000, 0.00000000, 0.00000000, 1065353216 );
            SET_PAD_SHAKE( 0, 500, 256 );
            SHAKE_GAMEPLAY_CAM( "SMALL_EXPLOSION_SHAKE", 0.20000000 );
            SHAKE_GAMEPLAY_CAM( "VIBRATE_SHAKE", 0.40000000 );
            sub_21185( ref l_U871, 2000, 1, 0 );
            sub_21335( ref l_U871 );
            l_U1574 = 1;
        }
        if ((NOT l_U1573) AND (fVar2 > l_U1588))
        {
            sub_1171( "ML", "STARTING CAR BLOOD SPLATS", "---" );
            sub_55175( ref l_U1355 );
            sub_55175( ref l_U1393 );
            sub_55175( ref l_U1416 );
            sub_55175( ref l_U1464 );
            l_U1573 = 1;
        }
        break;
        case 3:
        sub_1171( "TEH", "CAR HAS FALLEN", "---" );
        sub_55477( ref l_U1355 );
        sub_55477( ref l_U1393 );
        sub_55477( ref l_U1416 );
        sub_55477( ref l_U1464 );
        if (sub_54290() == 1)
        {
            l_U807 = 2;
        }
        FORCE_UPDATE_OBJECT_PHYSICAL_STATE( l_U888 );
        l_U920 = 4;
        break;
    }
    return;
}

int sub_54290()
{
    if (((IS_PED_DEAD( sub_11720() )) == 0) || ((IS_PED_DEAD( sub_11720() )) == 1))
    {
        if ((sub_40809( sub_11720(), l_U894 )) == 1)
        {
            sub_1171( "SP", "Player is under the car when falling! need special Death Cam.", 0 );
            return 1;
        }
    }
    return 0;
}

void sub_54709(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if ((IS_PED_DEAD( (uParam0^)[I] )) || (NOT (IS_PED_DEAD( (uParam0^)[I] ))))
        {
            if (sub_40809( (uParam0^)[I], l_U894 ))
            {
                Temporarily_Disable_Ped_Self_Collision( (uParam0^)[I], 3000 );
            }
        }
    }
    return;
}

void sub_55175(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            if (sub_40809( (uParam0^)[I], l_U894 ))
            {
                START_PARTICLE_FX_NON_LOOPED_ON_PED_BONE( "blood_fall_high_death", (uParam0^)[I], 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 65488, 5.00000000 );
                sub_22998( (uParam0^)[I] );
                sub_1171( "TEH", "Guy is being killed", 0 );
                SET_ARCADEMODE_EVENT( 0, (uParam0^)[I] );
            }
        }
    }
    return;
}

void sub_55477(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            if ((sub_40809( (uParam0^)[I], l_U894 )) || (IS_PED_RAGDOLL( (uParam0^)[I], 1 )))
            {
                sub_22998( (uParam0^)[I] );
                SET_ARCADEMODE_EVENT( 0, (uParam0^)[I] );
            }
        }
    }
    return;
}

void sub_55760()
{
    if ((NOT l_U701) AND (DOES_OBJECT_EXIST( l_U700 )))
    {
        if (HAS_OBJECT_BEEN_DAMAGED( l_U700 ))
        {
            sub_1171( "SBA", "P_HANDLE_OIL_POOL: radiator should be pooling oil", "***" );
            PLAY_OBJECT_ANIM( l_U700, "rad_spill", ref l_U880, 0.00000000, 0, 1 );
            l_U701 = 1;
        }
    }
    return;
}

void sub_55951(unknown uParam0)
{
    int I;

    if ((sub_48010( uParam0 )) == 1)
    {
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
            {
                if (NOT (GET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I] )))
                {
                    SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I], 1 );
                    return (uParam0^)[I];
                }
            }
        }
    }
    return nil;
}

void sub_56563()
{
    sub_1171( "SBA", "P_DIAL_CHOPSHOP_PASSOS_MAX_BANTER", "***" );
    if ((NOT (IS_PED_DEAD( g_U818 ))) AND (sub_22706()))
    {
        sub_51283( ref l_U494 );
        sub_51366( 2, g_U818, "PASSOS", ref l_U494, 2, 0 );
        sub_51366( 1, sub_11720(), "MAX", ref l_U494, 2, 0 );
        sub_51591( "SNYC_CSCU", ref l_U494, 8, 1 );
    }
    return;
}

void sub_56748(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (DOES_PLACEMENT_EXIST( (uParam0^)[I] ))
        {
            sub_1171( "RJM", "DO_ANY_PAINKILLERS_STILL_EXIST - Found a pill in there, we can still play some V.O.", 0 );
            (uParam1^)[I] = 1;
        }
        else
        {
            (uParam1^)[I] = 0;
        }
    }
    return;
}

void sub_57192(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    int Result;
    int I;
    int iVar26;

    Result = 0;
    I = 0;
    iVar26 = (uParam0^);
    for ( I = 0; I < iVar26; I++ )
    {
        if (sub_57242( ref (uParam0^)[I], uParam1 ))
        {
            Result = 1;
        }
    }
    return Result;
}

int sub_57242(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((DOES_PED_EXIST( (uParam0^) )) == 1)
    {
        if ((IS_PED_DEAD( (uParam0^) )) == 0)
        {
            if ((IS_PED_IN_GAMEPLAY_HELPER_BOX( (uParam0^), ref uParam1._fU0 )) == 1)
            {
                sub_22998( (uParam0^) );
                return 1;
            }
        }
    }
    return 0;
}

int sub_57461(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    if ((IS_PLAYER_DEAD( sub_11742() )) == 0)
    {
        if (sub_51040() == 0)
        {
            for ( I = 0; I <= ((uParam1^) - 1); I++ )
            {
                if ((uParam2^)[I])
                {
                    if ((HAS_PLACEMENT_BEEN_COLLECTED( (uParam1^)[I] )) || (NOT (DOES_PLACEMENT_EXIST( (uParam1^)[I] ))))
                    {
                        (uParam2^)[I] = 0;
                        if (TIME_SINCE_LAST_MONOLOGUE() > 5000)
                        {
                            sub_51283( ref l_U107 );
                            sub_57604( uParam0, ref l_U107 );
                            return 1;
                        }
                    }
                }
            }
        }
    }
    return 0;
}

void sub_57604(unknown uParam0, unknown uParam1)
{
    sub_1171( "SBA", "P_SPEECH_PLAY_MAX_MONOLOGUE", "***" );
    if (sub_22706())
    {
        sub_51283( uParam1 );
        sub_51366( 0, sub_11720(), "MAX", uParam1, 2, 0 );
        sub_51366( 1, sub_11720(), "MAX", uParam1, 2, 0 );
        sub_51591( uParam0, uParam1, 8, 1 );
    }
    return;
}

void sub_57855()
{
    sub_1171( "TEH", "P_DIAL_CHOPSHOP_PASSOS_WAITING", "---" );
    if ((NOT (IS_PED_DEAD( g_U818 ))) AND (sub_22706()))
    {
        sub_51283( ref l_U454 );
        sub_51366( 0, sub_11720(), "MAX", ref l_U454, 2, 0 );
        sub_51366( 1, g_U818, "PASSOS", ref l_U454, 2, 0 );
        sub_51591( "SNYC_VIG24A", ref l_U454, 8, 1 );
    }
    return;
}

void sub_58031()
{
    sub_1171( "SBA", "INIT_HANDLE_PASSOS_WAITING_SPEECH: Setting ePWS_State = ePWS_SetupState", 0 );
    l_U117 = 1;
    return;
}

void sub_58157()
{
    switch (l_U554)
    {
        case 0:
        sub_21185( ref l_U564, 20000, 1, 0 );
        sub_21335( ref l_U564 );
        l_U554++;
        break;
        case 1:
        if (NOT sub_51040())
        {
            if (NOT (sub_52440( l_U996 )))
            {
                if (sub_22412( ref l_U564 ))
                {
                    sub_57604( "SNYC_HACS", ref l_U504 );
                    sub_21185( ref l_U564, 20000, 1, 0 );
                    sub_21335( ref l_U564 );
                    l_U554++;
                }
            }
        }
        break;
        case 2:
        if (NOT sub_51040())
        {
            if (sub_52440( l_U996 ))
            {
                if (sub_22412( ref l_U564 ))
                {
                    sub_57604( "SNYC_HABD", ref l_U504 );
                    l_U554++;
                }
            }
        }
        break;
        case 3: break;
    }
    return;
}

void sub_58452(int iParam0, unknown uParam1)
{
    switch (l_U117)
    {
        case 0: break;
        case 1:
        sub_21185( ref l_U149, iParam0 + (GET_RANDOM_INT_IN_RANGE( -uParam1, uParam1 )), 1, 0 );
        sub_21335( ref l_U149 );
        l_U158 = 0;
        sub_1171( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: Going to ePWS_ChooseSpeechState", 0 );
        l_U117 = 2;
        break;
        case 2:
        if (NOT sub_51040())
        {
            if (sub_22412( ref l_U149 ))
            {
                l_U118 = l_U158;
                sub_1171( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: Going to ePWS_PlaySpeechState", 0 );
                sub_1171( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: iPassosSpeechLevel = ", 0 );
                sub_19244( l_U158 );
                l_U117 = 3;
            }
        }
        break;
        case 3:
        switch (l_U118)
        {
            case 0:
            sub_51200( "SNYC_PSDS", ref l_U129 );
            break;
            case 1:
            sub_51200( "SNYC_CMMF", ref l_U119 );
            break;
            case 2:
            sub_51200( "SNYC_TMFL", ref l_U139 );
            break;
        }
        sub_1171( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: Going to ePWS_ResetState", 0 );
        l_U117 = 4;
        break;
        case 4:
        sub_21185( ref l_U149, iParam0 + (GET_RANDOM_INT_IN_RANGE( -uParam1, uParam1 )), 1, 0 );
        sub_21335( ref l_U149 );
        l_U158++;
        if (l_U158 > 2)
        {
            l_U158 = 0;
        }
        sub_1171( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: Returning to ePWS_ChooseSpeechState", 0 );
        l_U117 = 2;
        break;
    }
    return;
}

void sub_59216(int iParam0, unknown uParam1)
{
    if (iParam0->_fU64 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU64 = sub_40809( sub_11720(), (iParam0^) );
        if ((iParam0->_fU64) AND (uParam1))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU64;
}

void sub_59318(unknown uParam0)
{
    sub_59334( ref l_U119, uParam0 );
    sub_59334( ref l_U129, uParam0 );
    sub_59334( ref l_U139, uParam0 );
    sub_1171( "SBA", "INIT_HANDLE_PASSOS_WAITING_SPEECH: Setting ePWS_State = ePWS_IdleState", 0 );
    l_U117 = 0;
    return;
}

void sub_59334(int iParam0, unknown uParam1)
{
    if (NOT (sub_59348( (iParam0^) )))
    {
        ;
    }
    else if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (iParam0->_fU8 == g_U6[iParam0->_fU4])
        {
            STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, uParam1, 0 );
        }
    }
    return;
}

boolean sub_59348(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    int iVar12;

    if (uParam0._fU4 < 0)
    {
        return 0;
    }
    iVar12 = GET_CHECK_HASH_FROM_CONVERSATION_ID( uParam0._fU4 );
    return (uParam0._fU16 == iVar12) AND (iVar12 != 0);
}

void sub_59740()
{
    sub_1171( "TEH", "P_DIAL_CHOPSHOP_PASSOS_GOING_TO_BY", "---" );
    if ((NOT (IS_PED_DEAD( g_U818 ))) AND (sub_22706()))
    {
        sub_51283( ref l_U514 );
        sub_51366( 0, sub_11720(), "MAX", ref l_U514, 2, 0 );
        sub_51366( 1, g_U818, "PASSOS", ref l_U514, 2, 0 );
        sub_51591( "SNYC_VIG24B", ref l_U514, 8, 1 );
    }
    return;
}

void sub_60225()
{
    sub_1171( "TEH", "P_CLOSE_GATE", "&^&^" );
    if ((DOES_OBJECT_EXIST( l_U699 )) == 1)
    {
        PLAY_OBJECT_ANIM( l_U699, "VIG_24_NYBAR_CHOPSHOP_BACKYARD_GATE_OPEN", "LEVEL_S_NYBAR_CP_06", 1000.00000000, 0, 1 );
        SET_OBJECT_ANIM_CURRENT_TIME( l_U699, "VIG_24_NYBAR_CHOPSHOP_BACKYARD_GATE_OPEN", "LEVEL_S_NYBAR_CP_06", 0.50000000 );
        SET_OBJECT_ANIM_SPEED( l_U699, "VIG_24_NYBAR_CHOPSHOP_BACKYARD_GATE_OPEN", "LEVEL_S_NYBAR_CP_06", -1.00000000 );
    }
    return;
}

void sub_61136()
{
    sub_1171( "TEH", "REGISTER_PEDS_VIG_26- start", 0 );
    ISEQ_REGISTER_ENTITY( -1207672607, "passos", g_U818, 0 );
    sub_1171( "TEH", "REGISTER_PEDS_VIG_26 - end", 0 );
    return;
}

void sub_61321()
{
    int I;

    for ( I = 0; I < l_U1563; I++ )
    {
        if (sub_8497( l_U1563[I] ))
        {
            SET_BLOCKING_OF_PED_TARGETTING( l_U1563[I], 0 );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1563[I], 0 );
            SET_PED_FLAG_LOCK_TO_COVER( l_U1563[I], 0 );
            sub_48701( ref l_U1563[I] );
        }
    }
    return;
}

void sub_61484(int iParam0)
{
    iParam0->_fU20 = 0;
    iParam0->_fU16 = 0;
    return;
}

void sub_61565()
{
    sub_1171( "TEH", "P_DIAL_CHOPSHOP_PASSOS_VIG26A", "---" );
    if ((NOT (IS_PED_DEAD( g_U818 ))) AND (sub_22706()))
    {
        sub_51283( ref l_U524 );
        sub_51366( 0, sub_11720(), "MAX", ref l_U524, 2, 0 );
        sub_51366( 1, g_U818, "PASSOS", ref l_U524, 2, 0 );
        sub_51591( "SNYC_VIG26A", ref l_U524, 8, 1 );
    }
    return;
}

int sub_61954(unknown uParam0, unknown uParam1, unknown uParam2)
{
    if ((DOES_OBJECT_EXIST( uParam0 )) == 1)
    {
        if (IS_OBJECT_PLAYING_ANIM( uParam0, uParam2, uParam1 ))
        {
            return 1;
        }
    }
    return 0;
}

void sub_62081()
{
    sub_1171( "TEH", "P_DIAL_CHOPSHOP_PASSOS_VIG26B", "---" );
    if ((NOT (IS_PED_DEAD( g_U818 ))) AND (sub_22706()))
    {
        sub_51283( ref l_U534 );
        sub_51366( 0, sub_11720(), "MAX", ref l_U534, 2, 0 );
        sub_51366( 1, g_U818, "PASSOS", ref l_U534, 2, 0 );
        sub_51591( "SNYC_VIG26B", ref l_U534, 8, 1 );
    }
    return;
}

void sub_62999()
{
    sub_1171( "TEH", "P_DIAL_CHOPSHOP_PASSOS_VIG26C", "---" );
    if ((NOT (IS_PED_DEAD( g_U818 ))) AND (sub_22706()))
    {
        sub_51283( ref l_U544 );
        sub_51366( 1, g_U818, "PASSOS", ref l_U544, 2, 0 );
        sub_51366( 0, sub_11720(), "MAX", ref l_U544, 2, 0 );
        sub_51591( "SNYC_SDBS", ref l_U544, 8, 1 );
    }
    return;
}

int sub_63211()
{
    int I;

    if (sub_8497( l_U1578 ))
    {
        if (sub_40809( l_U1578, l_U1206 ))
        {
            return 1;
        }
    }
    sub_21750( g_U818 );
    for ( I = 0; I <= 5; I++ )
    {
        if (sub_8497( l_U1563[I] ))
        {
            if (sub_40809( l_U1563[I], l_U1206 ))
            {
                sub_21867( g_U818, l_U1563[I] );
                l_U1578 = l_U1563[I];
                l_U799 = GET_PED_HEALTH( l_U1578 );
                return 1;
            }
        }
    }
    return 0;
}

void sub_63553()
{
    REGISTER_PED_PRE_SEAMLESS_CUTSCENE( g_U818, "FB_Pass_NY", 0 );
    sub_63595( g_U818, 0 );
    sub_63595( sub_11720(), 0 );
    return;
}

void sub_63595(unknown uParam0, unknown uParam1)
{
    sub_1171( "SBA", "P_SET_PED_ALL_WEAPON_VISIBILITY", 0 );
    sub_19449( uParam1 );
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        sub_1171( "SBA", "P_SET_PED_ALL_WEAPON_VISIBILITY: WEAPONHAND_LEFT", 0 );
        sub_19244( GET_WEAPON_FROM_HAND( uParam0, 1, 0 ) );
        if ((GET_WEAPON_FROM_HAND( uParam0, 1, 0 )) != 0)
        {
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( uParam0, 1, 0 ), uParam1 );
        }
        sub_1171( "SBA", "P_SET_PED_ALL_WEAPON_VISIBILITY: WEAPONHAND_RIGHT", 0 );
        sub_19244( GET_WEAPON_FROM_HAND( uParam0, 0, 0 ) );
        if ((GET_WEAPON_FROM_HAND( uParam0, 0, 0 )) != 0)
        {
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( uParam0, 0, 0 ), uParam1 );
        }
        sub_1171( "SBA", "P_SET_PED_ALL_WEAPON_VISIBILITY: WEAPONHOLSTER_PISTOL_LEFT", 0 );
        sub_19244( GET_WEAPON_FROM_HOLSTER( uParam0, 1 ) );
        if ((GET_WEAPON_FROM_HOLSTER( uParam0, 1 )) != 0)
        {
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HOLSTER( uParam0, 1 ), uParam1 );
        }
        sub_1171( "SBA", "P_SET_PED_ALL_WEAPON_VISIBILITY: WEAPONHOLSTER_PISTOL_RIGHT", 0 );
        sub_19244( GET_WEAPON_FROM_HOLSTER( uParam0, 0 ) );
        if ((GET_WEAPON_FROM_HOLSTER( uParam0, 0 )) != 0)
        {
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HOLSTER( uParam0, 0 ), uParam1 );
        }
        sub_1171( "SBA", "P_SET_PED_ALL_WEAPON_VISIBILITY: WEAPONHOLSTER_RIFLE", 0 );
        sub_19244( GET_WEAPON_FROM_HOLSTER( uParam0, 2 ) );
        if ((GET_WEAPON_FROM_HOLSTER( uParam0, 2 )) != 0)
        {
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HOLSTER( uParam0, 2 ), uParam1 );
        }
    }
    return;
}

void sub_64331(unknown uParam0)
{
    vector vVar3;
    vector vVar6;
    vector vVar9;
    vector vVar12;
    vector vVar15;
    vector vVar18;
    vector vVar21;
    vector vVar24;
    vector vVar27;
    float fVar30;
    float fVar31;

    vVar3 = {-145.86450000, -16.21313000, -8.50000000};
    vVar6 = {-143.74710000, -16.86111000, -8.50000000};
    vVar9 = {-140.62700000, -16.68133000, -8.50000000};
    vVar12 = {-138.35160000, -16.74670000, -8.50000000};
    vVar15 = {-126.97470000, -17.15432000, -8.50000000};
    vVar18 = {-122.79310000, -13.07062000, -8.50000000};
    vVar21 = {-124.22460000, -22.69810000, -8.50000000};
    vVar24 = {-123.82480000, -28.63766000, -8.50000000};
    vVar27 = {-125.21000000, -12.25000000, -8.50000000};
    fVar30 = 2.00000000;
    fVar31 = 4.00000000;
    switch (uParam0)
    {
        case 1:
        l_U159[0] = START_PARTICLE_FX_LOOPED_AT_COORD( "Cs_nyc_Snow_S", vVar3, 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        l_U159[1] = START_PARTICLE_FX_LOOPED_AT_COORD( "Cs_nyc_Snow_S", vVar6, 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        break;
        case 2:
        l_U159[2] = START_PARTICLE_FX_LOOPED_AT_COORD( "Cs_nyc_Snow_S", vVar9, 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        l_U159[3] = START_PARTICLE_FX_LOOPED_AT_COORD( "Cs_nyc_Snow_S", vVar12, 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        l_U159[4] = START_PARTICLE_FX_LOOPED_AT_COORD( "Cs_nyc_Snow_S", vVar15, 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        break;
        case 3:
        STOP_PARTICLE_FX_LOOPED( l_U159[0] );
        STOP_PARTICLE_FX_LOOPED( l_U159[1] );
        l_U159[5] = START_PARTICLE_FX_LOOPED_AT_COORD( "Cs_nyc_Snow_S", vVar18, 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        l_U159[6] = START_PARTICLE_FX_LOOPED_AT_COORD( "Cs_nyc_Snow_S", vVar21, 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        break;
        case 4:
        STOP_PARTICLE_FX_LOOPED( l_U159[2] );
        STOP_PARTICLE_FX_LOOPED( l_U159[3] );
        STOP_PARTICLE_FX_LOOPED( l_U159[4] );
        l_U159[7] = START_PARTICLE_FX_LOOPED_AT_COORD( "Cs_nyc_Snow_S", vVar24, 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        l_U159[8] = START_PARTICLE_FX_LOOPED_AT_COORD( "Cs_nyc_Snow_S", vVar27, 0.00000000, 0.00000000, 0.00000000, 1.00000000 );
        break;
    }
    return;
}

void sub_65570()
{
    switch (l_U1581)
    {
        case 0:
        sub_1171( "CCB", "eOldPainless - STATE_CHALLENGE_IDLE", 0 );
        l_U1581 = 1;
        break;
        case 1:
        if (l_U921 >= 11)
        {
            if (SCRIPT_VAR_HASH_EXISTS( 1701971384 ))
            {
                SCRIPT_VAR_HASH_SET_INT( 1701971384, 1 );
            }
            else
            {
                sub_1171( "CCB", "The OldPainless script variable is NOT valid!!!", 0 );
            }
            sub_1171( "CCB", "eOldPainless - STATE_CHALLENGE_COMPLETE", 0 );
            l_U1581 = 2;
        }
        break;
        case 2: break;
    }
    return;
}

int sub_65870(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        return PED_GET_ACTION_INTENTION_STATUS( uParam0, uParam1 );
    }
    return 0;
}

void sub_65950(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    sub_66005( uParam0, uParam1, uParam2, uParam3, uParam4, uParam5, 65972, 1077936128, 1069547520, 1065353216 );
    return;
}

void sub_65972(unknown uParam0)
{
    return;
}

void sub_66005(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, int iParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    unknown uVar12;

    if ((sub_65870( uParam0, 29 )) == 3)
    {
        uVar12 = nil;
        if (((sub_66121( 1 )) AND (IS_PED_IN_CROSSHAIR_CYLINDER( uParam0, 2, 10000, 0, -1082130432 ))) || (HAS_BULLET_IMPACTED_IN_AREA( sub_66037( uParam0 ), 3, ref uVar12 )))
        {
            sub_66214( "PLAYER SHOT AT PASSOS" );
            sub_66307( ref uParam0, sub_66037( sub_11720() ), 34, 1000 );
            SET_PED_PRIMARY_LOOKAT( uParam0, sub_11720() );
            (uParam1^) = 1;
            break;
            uParam6;
            0;
            break;
        }
        if (NOT (uParam2^))
        {
            if (((sub_65870( uParam0, 32 )) != 3) AND (((sub_65870( uParam0, 33 )) != 3) AND (IS_PED_TOUCHING_PED( sub_11720(), uParam0 ))))
            {
                sub_66214( "BAD TOUCH!!" );
                (uParam2^) = 1;
                (uParam1^) = 1;
                sub_66307( ref uParam0, sub_66037( sub_11720() ), 35, 1000 );
                SET_PED_PRIMARY_LOOKAT( uParam0, sub_11720() );
                break;
                uParam6;
                1;
                break;
            }
        }
        else if (NOT (IS_PED_TOUCHING_PED( sub_11720(), uParam0 )))
        {
            (uParam2^) = 0;
        }
        if (NOT (uParam3^))
        {
            if (sub_66553( ref uParam0, 300, 100, -1, 0, 0 ))
            {
                if ((IS_CONTROL_PRESSED( 0, 6 )) AND (IS_PED_IN_CROSSHAIR_CYLINDER( uParam0, 1, 10000, 0, -1082130432 )))
                {
                    (uParam1^) = 1;
                    (uParam3^) = 1;
                    sub_66307( ref uParam0, sub_66037( sub_11720() ), 32, 1000 );
                    SET_PED_PRIMARY_LOOKAT( uParam0, sub_11720() );
                    sub_66214( "PLAYER AIMING AT PASSOS" );
                    break;
                    uParam6;
                    2;
                    break;
                }
            }
        }
        else if ((NOT (IS_CONTROL_PRESSED( 0, 6 ))) || (NOT (IS_PED_IN_CROSSHAIR_CYLINDER( uParam0, 1.50000000, 10000, 0, -1082130432 ))))
        {
            if ((sub_65870( uParam0, 32 )) != 3)
            {
                (uParam3^) = 0;
                sub_66214( "PLAYER NO LONGER AIMING AT PASSOS" );
            }
        }
        if (NOT (uParam1^))
        {
            if ((sub_66553( ref uParam0, uParam9, 180, -1, 46, 0 )) || ((sub_66553( ref uParam0, uParam8, 45, -1, 31, 0 )) || (sub_66553( ref uParam0, uParam7, 30, -1, 0, 0 ))))
            {
                sub_66214( "INTERRUPTING PASSOS" );
                sub_66307( ref uParam0, sub_66037( sub_11720() ), 33, 1000 );
                SET_PED_PRIMARY_LOOKAT( uParam0, sub_11720() );
                (uParam1^) = 1;
            }
        }
        else if ((sub_66553( ref uParam0, -1, 180, uParam8 + 1, 91, 0 )) || (sub_66553( ref uParam0, -1, 90, uParam7 + 1, 0, 0 )))
        {
            if ((NOT (uParam2^)) AND (NOT (uParam3^)))
            {
                if ((sub_67321( ref uParam0, 35, 1 )) || ((sub_67321( ref uParam0, 32, 1 )) || ((sub_67321( ref uParam0, 34, 1 )) || (sub_67321( ref uParam0, 33, 1 )))))
                {
                    sub_67359( ref uParam0, 33 );
                    sub_67359( ref uParam0, 34 );
                    sub_67359( ref uParam0, 32 );
                    sub_67359( ref uParam0, 35 );
                    sub_67359( ref uParam0, 31 );
                    sub_67507( uParam0, 36, 1000 );
                    CLEAR_PED_PRIMARY_LOOKAT( uParam0 );
                    (uParam1^) = 0;
                    (uParam3^) = 0;
                    (uParam2^) = 0;
                    (uParam4^) = 0;
                    sub_21185( iParam5, sub_67592( 10000, 15000 ), 1, 0 );
                    return;
                }
            }
        }
        if ((sub_65870( uParam0, 30 )) == 3)
        {
            if (sub_22412( iParam5 ))
            {
                sub_66307( ref uParam0, sub_66037( sub_11720() ), 31, 1000 );
                (uParam4^)++;
                break;
                uParam6;
                3;
                break;
            }
            else if ((uParam4^) < 3)
            {
                if ((iParam5->_fU16) || (NOT (sub_37035( iParam5 ))))
                {
                    sub_21185( iParam5, sub_67592( 10000, 15000 ), 1, 0 );
                    sub_21335( iParam5 );
                }
            }
        }
    }
    sub_67321( ref uParam0, 31, 1 );
    sub_67321( ref uParam0, 36, 1 );
    return;
}

vector sub_66037(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        return "[dynamic result, ret vals = 3]";
        break;
        GET_PED_COORDS( uParam0 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        break;
    }
    return vector( 0, 0, 0);
}

int sub_66121(unknown uParam0)
{
    int iVar3;

    iVar3 = nil;
    if (HAS_SHOT_BEEN_FIRED_IN_AREA( sub_66037( sub_11720() ), 2.00000000, uParam0, ref iVar3 ))
    {
        if (iVar3 == sub_11720())
        {
            sub_66214( "MAL_HasPlayerFired RETURNING TRUE" );
            return 1;
        }
    }
    return 0;
}

void sub_66214(unknown uParam0)
{
    unknown uVar3;

    uVar3 = GET_REAL_GAME_TIMER();
    return;
}

void sub_66307(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        PED_SET_ACTION_INTENTION( (uParam0^), uParam4, uParam5, uParam1 );
    }
    return;
}

int sub_66553(unknown uParam0, float fParam1, unknown uParam2, float fParam3, float fParam4, boolean bParam5)
{
    float fVar8;

    if ((NOT (IS_PED_DEAD( sub_11720() ))) AND (NOT (IS_PED_DEAD( (uParam0^) ))))
    {
        fVar8 = sub_66602( (uParam0^), sub_11720(), 0 );
        if ((fVar8 > fParam1) AND (fParam1 > -1))
        {
            return 0;
        }
        else if ((fVar8 < fParam3) AND (fParam3 > -1))
        {
            return 0;
        }
        else if (NOT (IS_PED_FACING_PED( (uParam0^), sub_11720(), uParam2 )))
        {
            return 0;
        }
        else if ((IS_PED_FACING_PED( (uParam0^), sub_11720(), fParam4 )) AND (fParam4 > 0))
        {
            return 0;
        }
        else if (bParam5)
        {
            sub_19201( fParam4 );
        }
        return 1;;;;;
    }
    return 0;
}

void sub_66602(unknown uParam0, unknown uParam1, boolean bParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;

    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        uVar5 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
    }
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        uVar8 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    }
    if (bParam2)
    {
        return VDIST( uVar5, uVar8 );
        break;
    }
    return VDIST( uVar5._fU0, uVar5._fU4, 0, uVar8._fU0, uVar8._fU4, 0 );
}

int sub_67321(unknown uParam0, unknown uParam1, boolean bParam2)
{
    if ((sub_65870( (uParam0^), uParam1 )) == 1)
    {
        if (bParam2)
        {
            sub_67359( uParam0, uParam1 );
        }
        return 1;
    }
    return 0;
}

void sub_67359(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        PED_FINISH_ACTION_INTENTION( (uParam0^), uParam1 );
    }
    return;
}

void sub_67507(unknown uParam0, unknown uParam1, unknown uParam2)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        PED_SET_ACTION_INTENTION( uParam0, uParam1, uParam2, l_U347 );
    }
    return;
}

void sub_67592(unknown uParam0, int iParam1)
{
    int Result;

    Result = GET_RANDOM_INT_IN_RANGE( uParam0, iParam1 + 1 );
    if (Result > iParam1)
    {
        Result = iParam1;
    }
    return Result;
}

void sub_67825()
{
    sub_38789( l_U281 );
    sub_38789( l_U279 );
    sub_38789( l_U280 );
    sub_38789( -1513711447 );
    sub_38789( -737544913 );
    sub_38789( -1035251278 );
    sub_38789( 1679037765 );
    sub_38789( -1838550544 );
    sub_38789( -1332728256 );
    sub_38789( -1629582627 );
    sub_38789( 493783035 );
    sub_38789( g_U3098 );
    sub_38789( g_U3087 );
    sub_38789( -175351117 );
    sub_38789( 1905166733 );
    sub_38789( -1904663011 );
    sub_38789( g_U3086 );
    sub_38789( -859113524 );
    sub_38789( 1996612931 );
    sub_38789( 2133803005 );
    sub_38789( 1819908754 );
    sub_38789( 1110984208 );
    sub_38789( -2132846056 );
    sub_38789( g_U778 );
    sub_39268( "CRUSH_IMMINENT" );
    sub_39268( "FACE_PASNYB" );
    sub_39268( ref l_U880 );
    sub_39338( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act" );
    sub_34879( 15594167, 1 );
    sub_34879( -444056596, 1 );
    sub_34879( -1207672607, 1 );
    sub_34879( 1650310217, 1 );
    RELEASE_NAMED_SCRIPT_AUDIO_BANK( l_U697 );
    sub_39268( "PAS_INT" );
    return;
}

void sub_68252(unknown uParam0)
{
    switch (uParam0)
    {
        case 0: break;
        case 1: break;
        case 2:
        case 5:
        case 6: break;
        case 7:
        case 8: break;
    }
    return;
}

