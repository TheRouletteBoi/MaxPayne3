void main()
{
    l_U0 = 1;
    l_U1 = 144;
    l_U2 = 0;
    l_U3 = 1;
    l_U4 = 0;
    l_U5 = 1.00000000;
    l_U6 = -5.00000000;
    l_U7 = 0;
    l_U8 = 0;
    l_U9 = 0;
    l_U13 = 42;
    l_U14 = 0;
    l_U15 = 0;
    l_U16 = 0;
    l_U17 = 0;
    l_U18 = 0;
    l_U19 = 90.00000000;
    l_U20 = {0.00000000, 0.00000000, 0.00000000};
    l_U23 = {0.00000000, 0.00000000, 0.00000000};
    l_U26 = 0;
    l_U27 = 0;
    l_U28 = 0;
    l_U29 = 0;
    l_U30 = 0;
    l_U31 = 0;
    l_U32 = nil;
    l_U33 = {0.00000000, 0.00000000, 0.00000000};
    l_U36 = 0;
    l_U37 = 0;
    l_U38 = 0;
    l_U39 = -1;
    l_U40 = {64536, 64536, 64536};
    l_U89 = "PED_DEF";
    l_U131 = 1.00000000;
    l_U143 = 0;
    l_U184 = 0;
    l_U205 = 0;
    l_U207 = 1;
    l_U208 = 0;
    l_U209 = 1;
    l_U210 = 0;
    l_U221 = 1;
    l_U240 = "MID_04_HOTEL";
    l_U242 = 0;
    l_U243 = 0;
    l_U244 = 1500;
    l_U326 = 0;
    l_U328 = 0;
    l_U329 = 0;
    l_U330 = 762297658;
    l_U332 = {27.04000000, -51.90500000, 13.12000000};
    l_U355 = {25.07500000, 43.12600000, 13.68400000};
    l_U358 = {0.00000000, 0.00000000, 0.00000000};
    l_U373 = {-7.19000000, -7.42000000, 13.05300000};
    l_U383 = 0;
    l_U1401 = 0;
    l_U1402 = 0;
    l_U1403 = 0;
    l_U1404 = 0;
    l_U1405 = 0;
    l_U1406 = 0;
    l_U1427 = {28.80000000, -32.41000000, 13.05000000};
    l_U1430 = {0, 0, 338};
    l_U1435 = {28.83000000, -32.96000000, 14.01300000};
    l_U1438 = {-1.57000000, 0, 0.40160000};
    l_U1441 = {0.17500000, 0.10000000, -0.17500000};
    l_U1444 = {1.27000000, 0.90000000, 0.00000000};
    l_U1454 = {28.55000000, -31.21000000, 13.05500000};
    l_U1457 = {0.00000000, 0.00000000, 0.00000000};
    l_U1460 = {25.86000000, -31.75000000, 13.05000000};
    l_U1463 = {1.57000000, 0.00000000, 90.00000000};
    l_U1466 = {27.28000000, -31.36000000, 13.06000000};
    l_U1469 = {0.00000000, 0.00000000, 0.00000000};
    l_U1490 = 25;
    l_U1559 = {26.50500000, -31.67300000, 13.05200000};
    l_U1562 = {24.81991000, -28.99470000, 13.05261000};
    l_U1749 = 0;
    l_U1750 = 0;
    l_U1751 = 0;
    l_U1752 = 0;
    l_U1753 = 0;
    l_U1754 = 0;
    l_U1755 = 0;
    l_U1756 = 0;
    l_U1757 = 0;
    l_U1758 = 0;
    l_U1809 = 0;
    l_U1810 = 0;
    l_U1811 = 0;
    l_U2075 = -1;
    l_U2076 = {2.15000000, -5.75000000, 14.35000000};
    l_U2079 = {0.00000000, 0.00000000, 100.00000000};
    l_U2082 = {1.13400000, -6.32400000, 13.05295000};
    l_U2085 = 300.00000000;
    l_U2205 = {-0.72531400, -9.08833800, 15.48838000};
    l_U2208 = {-19.12753000, 0.00002400, -28.12246000};
    l_U2229 = -1;
    l_U2316 = {26.12000000, 31.28000000, 13.97000000};
    l_U2352 = -1;
    l_U2439 = {27.18000000, 28.35000000, 14.26000000};
    l_U2655 = 2000;
    l_U2656 = 1500;
    l_U2657 = (l_U2655 - l_U2656) + 250;
    l_U2689 = {26.50834000, -53.45348000, 14.71194000};
    l_U2692 = {-7.49281600, 0.00000400, -14.27298000};
     /* WRITESCRIPTLOG */ sub_1201( "AT", "Script hotel_second_floor.sc is starting up...", 0 );
     /* P_SETUP_ASSET_ARRAYS */ sub_1319();
    if ((g_U854 == 3) || (g_U854 == 2))
    {
        g_U855 = g_U854;
        l_U326 = 1;
        g_U993 = 1;
    }
    else
    {
        l_U326 = 3;
    }
    while (NOT IS_EXITFLAG_SET())
    {
        if ((g_U855 == 3) || (g_U855 == 2))
        {
             /* P_HANDLE_MUSIC */ sub_1771();
        }
         /* P_HANDLE_FAILURE */ sub_4542();
        if (l_U328 == 0)
        {
             /* P_HANDLE_EVENTS */ sub_14256();
        }
        WAIT( 0 );
    }
     /* P_CLEANUP_ALL */ sub_7125();
     /* P_UNLOAD_ASSETS */ sub_78338();
    g_U994 = 1;
    SET_EXITFLAG_RESPONSE();
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "hotel_second_floor" );
     /* WRITESCRIPTLOG */ sub_1201( "AT", "Script hotel_second_floor.sc is terminating...", 0 );
    return;
}

/* WRITESCRIPTLOG */ void sub_1201(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    DISPLAYF( "[{0}][{1}]{3} {2} {3}", 4, 513, uVar5, 1537, uParam0, 1537, uParam1, 1537, sParam2 );
    return;
}

/* P_SETUP_ASSET_ARRAYS */ void sub_1319()
{
     /* WRITESCRIPTLOG */ sub_1201( "AT", "P_SETUP_ASSET_ARRAYS start", 0 );
    l_U2461[0] = 77932492;
    l_U2461[1] = -93977637;
    l_U2461[2] = g_U1443;
    l_U2461[3] = 2019393516;
    l_U2461[4] = -1020027274;
    l_U2461[5] = -1446636735;
    l_U2461[6] = -1024724348;
    l_U2461[7] = -1835643592;
    l_U2461[8] = -495772823;
    l_U2461[9] = 247925151;
    l_U2461[10] = 2108528827;
    l_U2461[11] = -1591126843;
    l_U2461[12] = l_U330;
    l_U2461[13] = -754907209;
    l_U2461[14] = 1426433289;
    l_U2461[15] = -1490597557;
    l_U2461[16] = -1166741530;
    l_U2461[17] = g_U1445;
    l_U2461[18] = g_U1446;
     /* WRITESCRIPTLOG */ sub_1201( "AT", "P_SETUP_ASSET_ARRAYS end", 0 );
    return;
}

/* P_HANDLE_MUSIC */ void sub_1771()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;

    if (l_U209 != l_U207)
    {
         /* WRITESCRIPTLOG */ sub_1201( "TEH", "playing music:changed CUR FLAG", 0 );
         /* WRITE_INT */ sub_1864( l_U207 );
         /* WRITE_INT */ sub_1864( l_U208 );
        l_U209 = l_U207;
    }
    else if (l_U210 != l_U208)
    {
         /* WRITESCRIPTLOG */ sub_1201( "TEH", "playing music:changed NEW FLAG", 0 );
         /* WRITE_INT */ sub_1864( l_U207 );
         /* WRITE_INT */ sub_1864( l_U208 );
        l_U210 = l_U208;
    }
    switch (l_U207)
    {
        case 1:
         /* WRITESCRIPTLOG */ sub_1201( "TEH", "playing music: MC_STARTUP", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "HOTEL_SONG", "HOTEL_SONG_1", "", 0, -1, -1, -1082130432, 0 );
        l_U220 = 0;
        l_U207 = 4;
        l_U208 = 4;
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_1201( "TEH", "playing music: MC_CHECKPOINT_RESTART_SECOND_FLOOR ", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "HOTEL_SONG", "HOTEL_SONG_1", "", 0, -1, -1, -1082130432, 0 );
        l_U220 = 0;
        l_U207 = 4;
        l_U208 = 4;
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_1201( "TEH", "playing music: MC_CHECKPOINT_RESTART_SECOND_FLOOR_2", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "HOTEL_SONG", "HOTEL_SONG_1_4", "", 0, 0, 6000, -1082130432, 0 );
        l_U220 = 0;
        l_U207 = 13;
        l_U208 = 13;
        break;
        case 4:
        if (l_U208 == 4)
        {
            if (l_U220 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "HOTEL_ONESHOT_08", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                     /* WRITESCRIPTLOG */ sub_1201( "TEH", "playing music: Sussesfully preloaded oneshot_08 ", 0 );
                    l_U220 = 1;
                    l_U207 = 5;
                }
            }
        }
        break;
        case 5:
        if (l_U208 == 5)
        {
            if (l_U220 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                     /* WRITESCRIPTLOG */ sub_1201( "TEH", "playing music: Sussesfully played oneshot_08 ", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                     /* WRITESCRIPTLOG */ sub_1201( "TEH", "playing music: MC_FIGHT_STARTS ", 0 );
                    AUDIO_MUSIC_FORCE_TRACK( "HOTEL_SONG", "HOTEL_SONG_1_2", "", 0, 0, -1, -1082130432, 0 );
                    l_U220 = 0;
                    l_U207 = 6;
                }
            }
        }
        break;
        case 6:
        if ((AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 )) == 0)
        {
            l_U207 = 7;
            l_U208 = 7;
        }
        break;
        case 7:
        if (l_U208 == 7)
        {
            if (l_U220 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "HOTEL_ONESHOT_05", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                     /* WRITESCRIPTLOG */ sub_1201( "TEH", "playing music: Sussesfully preloaded oneshot_5", 0 );
                    l_U220 = 1;
                    l_U207 = 8;
                }
            }
        }
        break;
        case 8:
        if (l_U208 == 8)
        {
            if (l_U220 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                     /* WRITESCRIPTLOG */ sub_1201( "TEH", "playing music: Sussesfully played oneshot_05", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                    AUDIO_MUSIC_FORCE_TRACK( "HOTEL_SONG", "HOTEL_SONG_2_4", "", 0, 2000, 0, -1082130432, 0 );
                    l_U220 = 0;
                    l_U207 = 9;
                }
                else
                {
                     /* WRITESCRIPTLOG */ sub_1201( "TEH", "playing music: failing to play oneshot_05", 0 );
                }
            }
        }
        break;
        case 9:
        if (l_U208 == 9)
        {
            l_U220 = 0;
             /* WRITESCRIPTLOG */ sub_1201( "TEH", "CUE 2.4: playing music: MC_MAX_ON_BALCONY", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "HOTEL_SONG", "HOTEL_SONG_1_4", "", 0, 6000, -1, -1082130432, 0 );
            l_U207 = 10;
            l_U208 = 10;
        }
        break;
        case 10:
        if (l_U208 == 10)
        {
            if (l_U220 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "HOTEL_ONESHOT_02", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "HOTEL_ONESHOT_02" ))
                {
                     /* WRITESCRIPTLOG */ sub_1201( "TEH", "playing music: Sussesfully preloaded oneshot_02", 0 );
                    l_U220 = 1;
                    l_U207 = 11;
                }
            }
        }
        break;
        case 11:
        if (l_U208 == 11)
        {
            if (l_U220 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "HOTEL_ONESHOT_02" ))
                {
                     /* WRITESCRIPTLOG */ sub_1201( "TEH", "Cue 2.5: playing music: Succesfully played oneshot_02", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                    l_U220 = 0;
                    l_U207 = 12;
                }
            }
        }
        break;
        case 12:
        if ((AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 )) == 0)
        {
            l_U207 = 13;
            l_U208 = 13;
        }
        break;
        case 13:
        if (l_U208 == 13)
        {
            if (l_U220 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "HOTEL_ONESHOT_09", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                     /* WRITESCRIPTLOG */ sub_1201( "TEH", "playing music: Sussesfully preloaded oneshot_9", 0 );
                    l_U220 = 1;
                    l_U207 = 14;
                }
            }
        }
        break;
        case 14:
        if (l_U208 == 14)
        {
            if (l_U220 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                     /* WRITESCRIPTLOG */ sub_1201( "TEH", "playing music: Sussesfully played oneshot_09", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                    l_U220 = 0;
                     /* WRITESCRIPTLOG */ sub_1201( "TEH", "2.6A - playing music: MC_MAX_IN_PIT", 0 );
                    AUDIO_MUSIC_FORCE_TRACK( "HOTEL_SONG", "HOTEL_SONG_1_4", "", 0, 0, 0, -1082130432, 0 );
                    l_U207 = 15;
                }
            }
        }
        break;
        case 15:
        if ((AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 )) == 0)
        {
            l_U207 = 16;
            l_U208 = 16;
        }
        break;
        case 16:
        if (l_U208 == 16)
        {
            if (l_U220 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "HOTEL_ONESHOT_04", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                     /* WRITESCRIPTLOG */ sub_1201( "TEH", "playing music: Sussesfully preloaded oneshot_4", 0 );
                    l_U220 = 1;
                    l_U207 = 17;
                }
            }
        }
        break;
        case 17:
        if (l_U208 == 17)
        {
            if (l_U220 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                     /* WRITESCRIPTLOG */ sub_1201( "TEH", "Cue 2.8 playing music: Sussesfully played oneshot_04", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                    l_U220 = 0;
                    AUDIO_MUSIC_FORCE_TRACK( "HOTEL_SONG", "HOTEL_SONG_3", "", 0, 6000, 6000, -1082130432, 0 );
                    l_U207 = 18;
                }
            }
        }
        break;
    }
    return;
}

/* WRITE_INT */ void sub_1864(unknown uParam0)
{
    PRINTINT( uParam0 );
    PRINTNL();
    return;
}

/* P_HANDLE_FAILURE */ void sub_4542()
{
    if ((g_U855 == 3) || (g_U855 == 2))
    {
        switch (l_U328)
        {
            case 0:
            if (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() ))
            {
                l_U328 = 1;
                 /* WRITESCRIPTLOG */ sub_1201( "AT", "eFailState = FAIL_WAITING_FOR_PLAYER", 0 );
            }
            else if ( /* RESTARTING_CHECKPOINT */ sub_4818())
            {
                l_U328 = 1;
                 /* WRITESCRIPTLOG */ sub_1201( "SBA", "RESTARTING CHECKPOINT: eFailState = FAIL_CLEANUP_ALL", 0 );
            }
            break;
            case 1:
            if ( /* IS_RESTART_ACTIVE */ sub_5352())
            {
                l_U328 = 2;
            }
            else if (( /* F_CHECK_QUIT_RETRY */ sub_5412( 0 )) == 1)
            {
                l_U328 = 2;
            }
            break;
            case 2:
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )))
            {
                l_U328 = 3;
                 /* WRITESCRIPTLOG */ sub_1201( "AT", "eFailState = FAIL_CLEANUP_ALL", 0 );
            }
            break;
            case 3:
             /* WRITESCRIPTLOG */ sub_1201( "AT", "eFailState = FAIL_CLEANUP_ALL", 0 );
            if ((NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() ))) AND (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_4689() ))))
            {
                SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_4689(), 0, 0 );
                if (GET_IS_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_4651() ))
                {
                    SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_4651(), 0 );
                }
            }
            DO_SCREEN_FADE_OUT( 0 );
            DESTROY_ALL_CAMS();
            RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
            END_CONTEXT( "HOTEL_SECOND_FLOOR_BALCONY" );
             /* P_CLEANUP_ALL */ sub_7125();
            l_U328 = 4;
             /* WRITESCRIPTLOG */ sub_1201( "AT", "eFailState = FAIL_RESTORE_PLAYER", 0 );
            break;
            case 4:
             /* WRITESCRIPTLOG */ sub_1201( "AT", "eFailState = FAIL_RESTORE_PLAYER", 0 );
            if (g_U855 == 2)
            {
                 /* P_RESTORE_HOTEL_PLAYER_DATA_CHECKPOINT */ sub_8882( ref l_U254,  /* PLAYER_PED_ID */ sub_4651() );
            }
            else if (g_U855 == 3)
            {
                 /* P_RESTORE_HOTEL_PLAYER_DATA_CHECKPOINT */ sub_8882( ref l_U290,  /* PLAYER_PED_ID */ sub_4651() );
            }
            l_U328 = 5;
             /* WRITESCRIPTLOG */ sub_1201( "AT", "eFailState = FAIL_RESTART_CHECKPOINT", 0 );
            break;
            case 5:
             /* WRITESCRIPTLOG */ sub_1201( "AT", "eFailState = FAIL_RESTART_CHECKPOINT", 0 );
            if (g_U855 == 2)
            {
                l_U207 = 2;
            }
            else
            {
                l_U207 = 3;
            }
            l_U326 = 3;
            l_U328 = 0;
             /* WRITESCRIPTLOG */ sub_1201( "SP", "eFailState = FAIL_IDLE", 0 );
            break;
        }
    }
    return;
}

/* PLAYER_PED_ID */ int sub_4651()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED(  /* PLAYER_ID */ sub_4689() );
    }
    return 0;
}

/* PLAYER_ID */ void sub_4689()
{
    return GET_PLAYER_ID();
}

/* RESTARTING_CHECKPOINT */ int sub_4818()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U0 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )))
        {
            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_4651(), 0 );
            SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_4689(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE(  /* PLAYER_ID */ sub_4689(), 1 );
            if ((IS_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_4651() )) == 0)
            {
                SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_4651(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

/* IS_RESTART_ACTIVE */ void sub_5352()
{
    return g_U648;
}

/* F_CHECK_QUIT_RETRY */ int sub_5412(int iParam0)
{
    iParam0 = 1;
    switch (l_U243)
    {
        case 0:
        if (NOT ( /* HASTIMERBEENACTIVATED */ sub_5494( ref l_U245 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )))
            {
                l_U244 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
             /* CREATETIMER */ sub_5628( ref l_U245, l_U244, 1, 1 );
             /* STARTTIMER */ sub_5778( ref l_U245 );
        }
        if ( /* ISTIMERDONE */ sub_5911( ref l_U245 ))
        {
             /* WRITESCRIPTLOG */ sub_1201( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_4689() )))
            {
                SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_4689(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U243 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U243 = 2;
            }
            else
            {
                l_U243 = 3;
            }
        }
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_1201( "NS", "Player will QUIT", 0 );
         /* P_POSTQUITRETRYCLEANUP */ sub_6412();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_1201( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
         /* P_POSTQUITRETRYCLEANUP */ sub_6412();
        return 1;
        break;
    }
    return 0;
}

/* HASTIMERBEENACTIVATED */ int sub_5494(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

/* CREATETIMER */ void sub_5628(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

/* STARTTIMER */ void sub_5778(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

/* ISTIMERDONE */ int sub_5911(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

/* P_POSTQUITRETRYCLEANUP */ void sub_6412()
{
     /* WRITESCRIPTLOG */ sub_1201( "NS", "P_PostFailRetryCleanup", 0 );
     /* RESETTIMER */ sub_6487( ref l_U245 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_4689() )))
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_4689(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U242 = 0;
    l_U242 = l_U242;
    l_U243 = 0;
    return;
}

/* RESETTIMER */ void sub_6487(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

/* P_CLEANUP_ALL */ void sub_7125()
{
     /* WRITESCRIPTLOG */ sub_1201( "MW", "P_CLEANUP_ALL start", 0 );
     /* CLEANOBJECT */ sub_7189( l_U1426 );
     /* CLEANOBJECT */ sub_7189( l_U1434 );
     /* CLEANOBJECT */ sub_7189( l_U1447 );
     /* CLEANOBJECT */ sub_7189( l_U1448 );
     /* CLEANOBJECT */ sub_7189( l_U1449 );
     /* CLEANOBJECT */ sub_7189( l_U1450 );
     /* CLEANOBJECT */ sub_7189( l_U1451 );
     /* CLEANOBJECT */ sub_7189( l_U1452 );
     /* CLEANOBJECT */ sub_7189( l_U1453 );
     /* CLEANPLACEMENT */ sub_7328( l_U1433 );
     /* CLEANPLACEMENT */ sub_7328( l_U384 );
     /* CLEANOBJECT */ sub_7189( l_U336 );
     /* CLEANOBJECTARRAY */ sub_7412( ref l_U337 );
     /* CLEANOBJECT */ sub_7189( g_U2092 );
     /* CLEANOBJECT */ sub_7189( l_U331 );
    ENABLE_WALLA_ZONE( "S_HOTEL_WZ_2ND_FLOOR_1ST_ROOM", 0 );
    ENABLE_WALLA_ZONE( "S_HOTEL_WZ_2ND_FLOOR_2ND_ROOM", 0 );
    ENABLE_WALLA_ZONE( "S_HOTEL_WZ_2ND_FLOOR_PIT", 0 );
    ISEQ_UNREGISTER_ENTITY( 1082349389, "cp1" );
    ISEQ_UNREGISTER_ENTITY( 1082349389, "cp2" );
     /* TERMINATEISEQ */ sub_7665( 1082349389, 0 );
    ISEQ_UNREGISTER_ENTITY( 161673566, "MAX_PRESSING_BUTTON" );
     /* TERMINATEISEQ */ sub_7665( 161673566, 0 );
    ISEQ_UNREGISTER_ENTITY( 793883882, "runner" );
     /* TERMINATEISEQ */ sub_7665( 793883882, 0 );
    ISEQ_UNREGISTER_ENTITY( 262571667, "max" );
     /* TERMINATEISEQ */ sub_7665( 262571667, 0 );
     /* CLEANPEDARRAY */ sub_8076( ref l_U1392 );
     /* CLEANPEDARRAY */ sub_8076( ref l_U1548 );
     /* CLEANPEDARRAY */ sub_8076( ref l_U1618 );
     /* CLEANPEDARRAY */ sub_8076( ref l_U1663 );
     /* CLEANPEDARRAY */ sub_8076( ref l_U1706 );
     /* CLEANPED */ sub_8126( l_U1722 );
     /* CLEANPED */ sub_8126( l_U1736 );
     /* CLEANPEDARRAY */ sub_8076( ref l_U1799 );
     /* CLEANPEDARRAY */ sub_8076( ref l_U1884 );
     /* CLEANPEDARRAY */ sub_8076( ref l_U1910 );
     /* CLEANPEDARRAY */ sub_8076( ref l_U1954 );
     /* CLEAR_FORCED_COLLISION_LOAD_FOR_HOTEL */ sub_8322();
     /* CLEANOBJECT */ sub_7189( l_U372 );
     /* CLEANOBJECT */ sub_7189( l_U376 );
     /* CLEANOBJECT */ sub_7189( l_U377 );
     /* CLEANOBJECT */ sub_7189( l_U378 );
     /* CLEANPLACEMENTARRAY */ sub_8507( ref l_U379 );
     /* CLEANPLACEMENT */ sub_7328( g_U740._fU0 );
     /* CLEANPLACEMENT */ sub_7328( g_U794._fU0 );
     /* P_CLEAN_IMAGEFX */ sub_8614( ref l_U2481 );
    CLEAR_AREA_OF_OBJECTS( 28.00000000, -32.35000000, 13.05000000, 10 );
     /* WRITESCRIPTLOG */ sub_1201( "MW", "P_CLEANUP_ALL end", 0 );
    return;
}

/* CLEANOBJECT */ void sub_7189(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

/* CLEANPLACEMENT */ void sub_7328(unknown uParam0)
{
    if ((DOES_PLACEMENT_EXIST( uParam0 )) == 1)
    {
        REMOVE_PLACEMENT( uParam0 );
    }
    return;
}

/* CLEANOBJECTARRAY */ void sub_7412(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* CLEANOBJECT */ sub_7189( (uParam0^)[I] );
    }
    return;
}

/* TERMINATEISEQ */ void sub_7665(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to terminate does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 1)
    {
        ISEQ_TERMINATE( uParam0 );
    }
    ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
    if (iParam1 == 1)
    {
        while ((ISEQ_IS_LOADED( uParam0 )) == 1)
        {
            DISPLAYF( "[SP]### Waiting for interactive sequence to terminate: {0} {1} ###", 2, 1281, ref uVar4, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* CLEANPEDARRAY */ void sub_8076(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
         /* CLEANPED */ sub_8126( (uParam0^)[I] );
    }
    return;
}

/* CLEANPED */ void sub_8126(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

/* CLEAR_FORCED_COLLISION_LOAD_FOR_HOTEL */ void sub_8322()
{
    unknown uVar2;

     /* WRITESCRIPTLOG */ sub_1201( "BSW", "CLEAR_FORCED_COLLISION_LOAD_FOR_HOTEL", 0 );
    uVar2 = GET_INTERIOR_AT_COORDS( g_U1020[g_U854] );
    CLEAR_INTERIOR_COLLISION_REQUIRED( uVar2 );
    return;
}

/* CLEANPLACEMENTARRAY */ void sub_8507(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* CLEANPLACEMENT */ sub_7328( (uParam0^)[I] );
    }
    return;
}

/* P_CLEAN_IMAGEFX */ void sub_8614(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        STOP_IMAGEFX( (uParam0^)[I]._fU0, 0 );
    }
    return;
}

/* P_RESTORE_HOTEL_PLAYER_DATA_CHECKPOINT */ void sub_8882(unknown uParam0, unknown uParam1)
{
     /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_8937( uParam0, uParam1 );
     /* RESTORE_WATERBOTTLE_STATE */ sub_13431( uParam0 );
    return;
}

/* P_RESTORE_PLAYER_DATA_CHECKPOINT */ void sub_8937(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

     /* WRITESCRIPTLOG */ sub_1201( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U0)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
     /* CLOSE_CURRENT_LEVEL_CONTEXT */ sub_9156( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
         /* LOADCOLLISIONFORPED */ sub_10320( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_10634( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_11113( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_10634( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_11113( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_10634( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_11113( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPON */ sub_11429( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_11113( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPON */ sub_11429( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_11113( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U0 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if (( /* F_CAN_GIVE_AMMO_TO_REGULAR_WEAPON_TYPE */ sub_12001( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
     /* START_NEW_LEVEL_CONTEXT */ sub_12203( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING(  /* PLAYER_PED_ID */ sub_4651(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U0)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U0 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
     /* WRITESCRIPTLOG */ sub_1201( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

/* CLOSE_CURRENT_LEVEL_CONTEXT */ void sub_9156(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_9218( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

/* GET_MISSION_INDEX_FROM_NAME */ int sub_9218(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    }
    else
    {
        PRINTSTRING( uParam0 );
        PRINTSTRING( uParam0 );
        PRINTSTRING( uParam0 );
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

/* LOADCOLLISIONFORPED */ void sub_10320(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

/* F_GIVEPEDWEAPONTOHOLSTER */ void sub_10634(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_11038( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* WRITE_STRING */ void sub_11038(unknown uParam0)
{
    PRINTSTRING( uParam0 );
    PRINTNL();
    return;
}

/* P_RESTORE_WEAPON_ATTACHMENTS */ void sub_11113(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

/* F_GIVEPEDWEAPON */ void sub_11429(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_11038( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* F_CAN_GIVE_AMMO_TO_REGULAR_WEAPON_TYPE */ int sub_12001(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

/* START_NEW_LEVEL_CONTEXT */ void sub_12203(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_9218( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
     /* CLEAR_GG_CONTEXTS */ sub_12301( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

/* CLEAR_GG_CONTEXTS */ void sub_12301(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

/* RESTORE_WATERBOTTLE_STATE */ void sub_13431(int iParam0)
{
    unknown uVar3;

     /* WRITESCRIPTLOG */ sub_1201( "BSW", "RESTORE_WATERBOTTLE_STATE start", 0 );
    uVar3 =  /* GET_WATERBOTTLE_FROM_PLAYER */ sub_13515();
    if (GET_DOES_WEAPON_EXIST( uVar3 ))
    {
        SET_SUPPRESSOR_DAMAGE_LEVEL( uVar3, iParam0->_fU48 );
        DISPLAYF( "RESTORE_WATERBOTTLE_STATE found water bottle suppressor - restoring the state: {}", 1, 513, iParam0->_fU48 );
    }
    return;
}

/* GET_WATERBOTTLE_FROM_PLAYER */ void sub_13515()
{
    boolean bVar2;
    unknown Result;

     /* WRITESCRIPTLOG */ sub_1201( "BSW", "DOES_PLAYER_HAVE_WATERBOTTLE start", 0 );
    bVar2 = false;
    if ( /* IS_MAX_VALID */ sub_13607())
    {
        Result = GET_WEAPON_FROM_SLOT(  /* PLAYER_PED_ID */ sub_4651(), 0 );
        if (GET_DOES_WEAPON_EXIST( Result ))
        {
            if ((GET_WEAPON_TYPE( Result )) == 811797242)
            {
                bVar2 = true;
            }
        }
        if (NOT bVar2)
        {
            Result = GET_WEAPON_FROM_SLOT(  /* PLAYER_PED_ID */ sub_4651(), 1 );
            if (GET_DOES_WEAPON_EXIST( Result ))
            {
                if ((GET_WEAPON_TYPE( Result )) == 811797242)
                {
                    bVar2 = true;
                }
            }
        }
    }
    if (bVar2)
    {
        return Result;
        break;
    }
    return nil;
}

/* IS_MAX_VALID */ int sub_13607()
{
    if ( /* IS_PED_VALID */ sub_13637(  /* PLAYER_PED_ID */ sub_4651() ))
    {
        return 1;
    }
    return 0;
}

/* IS_PED_VALID */ int sub_13637(unknown uParam0)
{
    if ((NOT (IS_PED_DEAD( uParam0 ))) AND (DOES_PED_EXIST( uParam0 )))
    {
        return 1;
    }
    return 0;
}

/* P_HANDLE_EVENTS */ void sub_14256()
{
    int iVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;

    iVar2 = l_U326;
     /* P_KILL_2ND_FLOOR_JUMPER */ sub_14291();
    switch (l_U326)
    {
        case 0: break;
        case 1:
         /* WRITESCRIPTLOG */ sub_1201( "AT", "eCheckpointState = CP_LEVEL_LOAD_SCRIPT_SETUP", 0 );
        if ((NOT ( /* HAS_SAVEFILE_LOADED */ sub_14879( ref l_U290 ))) AND (NOT ( /* HAS_SAVEFILE_LOADED */ sub_14879( ref l_U254 ))))
        {
            uVar7 =  /* MAL_GIVEPEDWEAPON */ sub_15108(  /* PLAYER_PED_ID */ sub_4651(), 811797242, 50, 0, 0 );
            SET_PAYNEKILLER_AMT( 3 );
        }
        l_U326 = 2;
         /* WRITESCRIPTLOG */ sub_1201( "AT", "eCheckpointState = CP_LEVEL_LOAD_WAIT_FOR_PLAYER_WEAPONS", 0 );
        break;
        case 2:
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )))
        {
            if (GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_4651(), 0, 0 ) ))
            {
                l_U326 = 3;
                 /* WRITESCRIPTLOG */ sub_1201( "AT", "eCheckpointState = CP_INITIALIZE_SCRIPT_DATA", 0 );
            }
        }
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_1201( "AT", "eCheckpointState = CP_INITIALIZE_SCRIPT_DATA", 0 );
         /* P_INITIALIZE_SCRIPT_DATA */ sub_15667();
         /* P_SET_STATIC_DATA */ sub_16085();
         /* P_CREATE_S_HOT_GG_LA_01 */ sub_21102();
         /* P_CREATE_S_HOT_GG_G3_01 */ sub_22083();
        SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
        l_U326 = 4;
         /* WRITESCRIPTLOG */ sub_1201( "AT", "eCheckpointState = CP_INITIAL_REQUEST_ASSETS", 0 );
        break;
        case 4:
         /* WRITESCRIPTLOG */ sub_1201( "AT", "eCheckpointState = CP_INITIAL_REQUEST_ASSETS", 0 );
        l_U326 = 5;
         /* WRITESCRIPTLOG */ sub_1201( "AT", "eCheckpointState = CP_INITIAL_LOADING_ASSETS", 0 );
        break;
        case 5:
         /* WRITESCRIPTLOG */ sub_1201( "SP", "eCheckpointState = CP_INITIAL_LOADING_ASSETS", 0 );
         /* P_LOAD_ASSETS */ sub_22505();
        l_U326 = 6;
        break;
        case 6:
        if (g_U993)
        {
            if (GET_NUMBER_OF_STREAMING_REQUESTS() == 0)
            {
                if (g_U855 <= 2)
                {
                    g_U855 = 2;
                    l_U326 = 7;
                }
                else if (g_U855 == 3)
                {
                    if (NOT l_U290._fU0)
                    {
                         /* P_SAVE_HOTEL_PLAYER_DATA_CHECKPOINT */ sub_24432( ref l_U290, g_U855,  /* PLAYER_PED_ID */ sub_4651(), g_U1020[g_U855], g_U1123[g_U855], g_U1158[g_U855], g_U1193[g_U855], 0 );
                    }
                     /* P_SETUP_SECOND_FLOOR_2_GAMEPLAY */ sub_29285();
                     /* P_ACTIVATEPED */ sub_36872( l_U1722 );
                     /* P_ACTIVATEPEDARRAY */ sub_36989( ref l_U1799 );
                    DO_SCREEN_FADE_IN( 250 );
                    SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_4689(), 1, 0 );
                    l_U326 = 12;
                }
                 /* SET_HOTEL_WEATHER_AND_TOD */ sub_37100( g_U855 );
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_1201( "BSW", "waiting for stream requests...", 0 );
            }
        }
        break;
        case 7:
        if ( /* HANDLE_MID_03_BLENDOUT */ sub_37602())
        {
             /* P_SETUP_ELEVATOR_DOOR */ sub_38902();
             /* P_CREATE_VIG01 */ sub_39058();
             /* P_CREATE_PROPANE_ROOM_PEDS */ sub_39931();
             /* P_CREATE_PROPANE_ROOM_PROPS */ sub_40514();
             /* P_INITIALIZE_IMAGEFX_MID_CP_02 */ sub_40786();
            l_U326 = 8;
             /* WRITESCRIPTLOG */ sub_1201( "AT", "eCheckpointState = CP_HANDLE_SECOND_FLOOR_GAMEPLAY", 0 );
        }
        break;
        case 8:
         /* P_HANDLE_VIG01 */ sub_41505();
         /* P_HANDLE_IMAGEFX */ sub_49004( ref l_U2481 );
         /* P_SET_LAUNCHER_AMMO */ sub_49838();
        if (NOT l_U1557)
        {
            if (((IS_PED_DEAD( l_U1392[1] )) || (IS_PED_DEAD( l_U1392[0] ))) || ( /* F_ISPLAYERINTRIGGERBOX */ sub_41582( l_U470 )))
            {
                 /* P_ACTIVATE_POST_VIG01_ENEMIES */ sub_50079();
                ENABLE_WALLA_ZONE( "S_HOTEL_WZ_2ND_FLOOR_1ST_ROOM", 1 );
                l_U1557 = 1;
            }
        }
        if ((NOT l_U1558) AND (l_U1557))
        {
             /* P_FOLLOW_UP_POST_VIG01_ENEMIES */ sub_50380();
        }
         /* P_HANDLE_VIG02 */ sub_50608();
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_14332( ref l_U554, 0 ))
        {
            l_U208 = 8;
             /* P_CREATE_PROPANE_REPLACEMENTS */ sub_52476();
             /* P_ACTIVATEPROPANEROOMPREMID04 */ sub_52738();
             /* P_SETUP_SECOND_FLOOR_2_GAMEPLAY */ sub_29285();
        }
        if ( /* F_ISPEDINTRIGGERBOXFIRSTTIME */ sub_52279( ref l_U638, l_U1618[3], 0 ))
        {
            if ( /* IS_PED_VALID */ sub_13637( l_U1618[3] ))
            {
                 /* PED_SET_REGISTER_TARGET */ sub_35341( ref l_U1618[3],  /* PLAYER_PED_ID */ sub_4651() );
                SET_PED_COMBAT_ATTRIBUTES( l_U1618[3], 8192, 1 );
            }
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_14332( ref l_U701, 0 ))
        {
             /* PED_SET_LOCK_TO_COVER */ sub_34784( ref l_U1618[1], 0 );
             /* PED_SET_LOCK_TO_COVER */ sub_34784( ref l_U1618[2], 0 );
            if ( /* IS_PED_VALID */ sub_13637( l_U1618[1] ))
            {
                SET_PED_FLAG_FIRE_UNTIL_EMPTY_IN_COVER( l_U1618[1], 0 );
            }
            if ( /* IS_PED_VALID */ sub_13637( l_U1618[2] ))
            {
                SET_PED_FLAG_FIRE_UNTIL_EMPTY_IN_COVER( l_U1618[2], 0 );
            }
        }
        if (l_U1678)
        {
             /* P_HANDLE_PROPANE_REPLACEMENTS */ sub_53403();
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_14332( ref l_U617, 0 ))
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "Balcony: eCheckpointState = CP_HANDLE_MID_04_BLENDOUT", 0 );
            l_U208 = 9;
            if ( /* IS_PED_VALID */ sub_13637( l_U1618[1] ))
            {
                SET_PED_FLAG_FIRE_UNTIL_EMPTY_IN_COVER( l_U1618[1], 0 );
            }
            if ( /* IS_PED_VALID */ sub_13637( l_U1618[2] ))
            {
                SET_PED_FLAG_FIRE_UNTIL_EMPTY_IN_COVER( l_U1618[2], 0 );
            }
             /* P_CREATE_BALCONY_ATTACKERS */ sub_54190();
             /* P_CREATE_AND_START_TIMER */ sub_51025( ref l_U1408, 10 );
            START_CONTEXT( "HOTEL_SECOND_FLOOR_BALCONY" );
            if ((SCRIPT_VAR_EXISTS( "SP_SV_OFF_BALCONY" )) == 0)
            {
                SCRIPT_VAR_ADD_INT( "SP_SV_OFF_BALCONY" );
            }
             /* P_BREAK_UP_REPLACEMENT_PARTY */ sub_54583();
            l_U326 = 9;
        }
        else if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_14332( ref l_U680, 0 ))
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "Window: eCheckpointState = CP_HANDLE_MID_04_BLENDOUT", 0 );
            l_U208 = 9;
             /* P_BREAK_UP_REPLACEMENT_PARTY */ sub_54583();
            l_U326 = 9;
        }
         /* P_HANDLE_PROPANEROOM_PROPANE_TANK */ sub_55015();
        break;
        case 9:
         /* P_SET_LAUNCHER_AMMO */ sub_49838();
        if (SCRIPT_VAR_EXISTS( "SP_SV_OFF_BALCONY" ))
        {
            if ( /* F_ISPLAYERINTRIGGERREGION */ sub_55424( ref l_U933, 0 ))
            {
                SCRIPT_VAR_SET_INT( "SP_SV_OFF_BALCONY", 0 );
            }
            else
            {
                SCRIPT_VAR_SET_INT( "SP_SV_OFF_BALCONY", 1 );
            }
        }
         /* P_HANDLE_PROPANEROOM_PROPANE_TANK */ sub_55015();
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "eCheckpointState = CP_SECOND_FLOOR_GAMEPLAY_PART2", 0 );
        l_U326 = 10;
        break;
        case 10:
         /* P_SET_LAUNCHER_AMMO */ sub_49838();
         /* P_ASSIGN_SECOND_FLOOR_FIRST_HALF_BULLET_CAM */ sub_55761();
        if (SCRIPT_VAR_EXISTS( "SP_SV_OFF_BALCONY" ))
        {
            if ( /* F_ISPLAYERINTRIGGERREGION */ sub_55424( ref l_U933, 0 ))
            {
                SCRIPT_VAR_SET_INT( "SP_SV_OFF_BALCONY", 0 );
            }
            else
            {
                SCRIPT_VAR_SET_INT( "SP_SV_OFF_BALCONY", 1 );
            }
        }
         /* P_HANDLE_PROPANEROOM_PROPANE_TANK */ sub_55015();
        if ( /* ISTIMERDONE */ sub_5911( ref l_U1408 ))
        {
             /* P_TASK_BALCONY_ATTACKERS */ sub_56416();
             /* PED_SET_LOCK_TO_COVER */ sub_34784( ref l_U1618[1], 0 );
             /* PED_SET_LOCK_TO_COVER */ sub_34784( ref l_U1618[2], 0 );
        }
        if ( /* F_ISPEDINTRIGGERBOXFIRSTTIME */ sub_52279( ref l_U890[1], l_U1706[0], 0 ))
        {
             /* PED_SET_REGISTER_TARGET */ sub_35341( ref l_U1706[0],  /* PLAYER_PED_ID */ sub_4651() );
        }
        if (NOT l_U1752)
        {
             /* WRITESCRIPTLOG */ sub_1201( "BSW", "Spawning next wave of propane room ", 0 );
            l_U1752 = 1;
             /* P_CREATE_AND_TASK_PROPANE_ROOM_BACKDOOR_GUARD */ sub_56777();
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_14332( ref l_U659, 0 ))
        {
             /* PED_SET_LOCK_TO_COVER */ sub_34784( ref l_U1706[1], 0 );
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_14332( ref l_U722, 0 ))
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "Player is in tbPropaneRoomBackdoor", 0 );
             /* PED_SET_LOCK_TO_COVER */ sub_34784( ref l_U1736, 0 );
             /* PED_TASK_COMBAT_PLAYER */ sub_57213( l_U1736, 1 );
        }
        if (l_U2348 == 0)
        {
             /* P_ENABLE_POI */ sub_57365( ref l_U2088, 1 );
             /* P_ACTIVATEPED */ sub_36872( l_U1722 );
             /* P_ACTIVATEPEDARRAY */ sub_36989( ref l_U1799 );
            SET_OBJECT_VISIBLE( l_U2087, 1 );
            l_U326 = 11;
        }
        break;
        case 11:
        if ( /* F_HANDLE_POI */ sub_58223( ref l_U2088 ))
        {
            l_U2075 = 0;
        }
        if ( /* HANDLE_GATE_NIS */ sub_60041())
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_PHOTOCOPY_POI: POI has been used", 0 );
            l_U326 = 12;
        }
        break;
        case 12:
         /* P_HANDLE_HALLWAY_BARRICADE_ENEMIES */ sub_61614();
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_14332( ref l_U743, 0 ))
        {
             /* WRITESCRIPTLOG */ sub_1201( "BSW", "Player is in activate hall trigger", 0 );
            l_U208 = 11;
            g_U855 = 3;
             /* P_START_SECOND_FLOOR_2_GAMEPLAY */ sub_62570();
            ENABLE_WALLA_ZONE( "S_HOTEL_WZ_2ND_FLOOR_PIT", 1 );
             /* P_SETDOORLOCKED */ sub_32485( ref g_U1533, 1 );
             /* CLEAR_FORCED_COLLISION_LOAD_FOR_HOTEL */ sub_8322();
            if (NOT l_U290._fU0)
            {
                 /* P_SAVE_HOTEL_PLAYER_DATA_CHECKPOINT */ sub_24432( ref l_U290, g_U855,  /* PLAYER_PED_ID */ sub_4651(), g_U1020[g_U855], g_U1123[g_U855], g_U1158[g_U855], g_U1193[g_U855], 0 );
            }
        }
        if (( /* IS_PED_VALID */ sub_13637( l_U1799[1] )) AND (NOT l_U1751))
        {
            if (NOT (IS_PED_DEAD( l_U1722 )))
            {
                uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( l_U1722 )};
                if (uVar4._fU4 < 3.30000000)
                {
                     /* WRITESCRIPTLOG */ sub_1201( "SBA", "Hall cover guy not in perma-hide via charger position", 0 );
                     /* PED_SET_ALWAYS_HIDE_IN_COVER */ sub_34918( ref l_U1799[1], 0 );
                     /* PED_SET_REGISTER_TARGET_PLAYER */ sub_48343( ref l_U1799[1] );
                    SET_PED_FORCE_START_FIRING_FROM_COVER( l_U1799[1] );
                     /* PED_SET_COMBAT_MOVEMENT */ sub_35975( ref l_U1799[1], 2 );
                    l_U1751 = 1;
                }
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_1201( "SBA", "Hall cover guy not in perma-hide via charger not existing", 0 );
                 /* PED_SET_ALWAYS_HIDE_IN_COVER */ sub_34918( ref l_U1799[1], 0 );
                 /* PED_SET_REGISTER_TARGET_PLAYER */ sub_48343( ref l_U1799[1] );
                SET_PED_FORCE_START_FIRING_FROM_COVER( l_U1799[1] );
                 /* PED_SET_COMBAT_MOVEMENT */ sub_35975( ref l_U1799[1], 2 );
                l_U1751 = 1;
            }
        }
        if (NOT l_U1809)
        {
            if (( /* F_ISPLAYERINTRIGGERBOX */ sub_41582( l_U764 )) || (( /* GET_DISTANCE_BETWEEN_PEDS */ sub_64957(  /* PLAYER_PED_ID */ sub_4651(), l_U1799[1], 0 )) < 7.00000000))
            {
                 /* P_FREE_HALL_COVER_GUYS */ sub_65147( l_U1799[1] );
                l_U1809 = 1;
            }
        }
        if (( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_14332( ref l_U533, 0 )) || ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_14332( ref l_U512, 0 )))
        {
             /* P_CREATE_PLANNING_BOARD_POI */ sub_65278();
             /* P_FREE_HALL_COVER_GUYS */ sub_65147( l_U1799[0] );
             /* PED_TASK_COMBAT_PLAYER */ sub_57213( l_U1884[0], 1 );
             /* PED_TASK_COMBAT_PLAYER */ sub_57213( l_U1884[1], 1 );
             /* MAL_MOVETOPOINTTHENCOMBATPED */ sub_65821( ref l_U1884[2],  /* PLAYER_PED_ID */ sub_4651(), 22.44000000, 27.01000000, 13.05000000, 0, -1, 0 );
             /* P_TURN_ON_FLASHLIGHT */ sub_66014( l_U1884[1] );
        }
         /* P_HANDLE_PIT_LOGIC */ sub_66292();
        if (NOT l_U1913)
        {
            if ( /* F_OKAY_TO_DEPLOY_AFTER_PIT_GUYS */ sub_69659())
            {
                 /* P_CREATE_AFTER_PIT_GUYS */ sub_69898();
                 /* P_TURN_ON_FLASHLIGHT */ sub_66014( l_U1954[1] );
                l_U1913 = 1;
            }
        }
        if (NOT l_U1755)
        {
            if ( /* F_HAS_FINAL_CP_NOTICED_MAX */ sub_70661())
            {
                 /* WRITESCRIPTLOG */ sub_1201( "SBA", "FinalCp aware of Max", 0 );
                 /* PED_ARRAY_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_40353( ref l_U1954, 0 );
                 /* PED_ARRAY_SET_BLOCKING_OF_PED_TARGETTING */ sub_71194( ref l_U1954, 0 );
                 /* PED_ARRAY_SET_COMBAT_MOVEMENT */ sub_35909( ref l_U1954, 1 );
                 /* LOADANIMDICT */ sub_24043( "LEVEL_S_HOTEL_CP_11", 0, 1 );
                l_U1755 = 1;
            }
        }
         /* P_FINISH_MAX_EXPLOSION_REACTION */ sub_71340();
         /* P_HANDLE_HALLWAY_PROPANE_TANKS */ sub_71865();
        l_U2350 = (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_53462( ref l_U1799 )) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_53462( ref l_U1884 ))) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_53462( ref l_U1910 ));
        if ( /* IS_PED_VALID */ sub_13637( l_U1722 ))
        {
            l_U2350++;
        }
         /* P_HANDLE_STAIR_IMAGEFX */ sub_73385();
        if (NOT l_U1756)
        {
            if ( /* P_ASSIGN_SECOND_FLOOR_PIT_BULLET_CAM */ sub_73933())
            {
                l_U1756 = 1;
            }
        }
        else if ((l_U2350 + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_53462( ref l_U1954 ))) > 1)
        {
             /* P_RESET_HOTEL_2ND_BULLET_CAM */ sub_74217();
            l_U1756 = 0;
        }
        if (l_U2350 == 0)
        {
            if (NOT l_U2351)
            {
                 /* TAKE_PAINKILLER_ARRAY_SNAPSHOT */ sub_74560( ref l_U379, ref l_U381 );
                 /* P_SET_POI_AVAILABLE */ sub_65665( ref l_U2230, 1 );
                 /* P_SET_POI_AVAILABLE */ sub_65665( ref l_U2353, 1 );
                l_U2351 = 1;
            }
             /* P_HANDLE_FINAL_EXPLOSION_HINT */ sub_74802();
        }
        else if (l_U2351)
        {
             /* P_SET_POI_AVAILABLE */ sub_65665( ref l_U2230, 0 );
             /* P_SET_POI_AVAILABLE */ sub_65665( ref l_U2353, 0 );
            l_U2351 = 0;
        }
         /* P_HANDLE_PHOTOCOPY_POI */ sub_75381();
         /* P_HANDLE_PLANNING_BOARD_POI */ sub_76767();
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_14332( ref l_U407, 0 ))
        {
             /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_75166( "SHOT_MXGUPST", ref l_U2627 );
        }
        if ((NOT l_U383) AND (l_U2350 == 0))
        {
            if ( /* UPDATE_PILL_VO */ sub_77876( "SHOT_MXFNDPLS", ref l_U379, ref l_U381 ))
            {
                 /* WRITESCRIPTLOG */ sub_1201( "SBA", "Playing Pill monologue for puiKillHousePainkillers", "..." );
                l_U383 = 1;
            }
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_14332( ref l_U386, 0 ))
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "eCheckpointState = CP_FINISHED", 0 );
            l_U326 = 13;
        }
        break;
        case 13:
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        l_U326 = 0;
         /* WRITESCRIPTLOG */ sub_1201( "AT", "eCheckpointState = CP_IDLE", 0 );
        break;
    }
    if (l_U326 != iVar2)
    {
        l_U327 = 1;
    }
    else
    {
        l_U327 = 0;
    }
    return;
}

/* P_KILL_2ND_FLOOR_JUMPER */ void sub_14291()
{
    if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_14332( ref l_U1074, 0 ))
    {
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_KILL_2ND_FLOOR_JUMPER: Player deserves to die", 0 );
         /* P_KILL_PED */ sub_14601(  /* PLAYER_PED_ID */ sub_4651() );
    }
    return;
}

/* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ void sub_14332(int iParam0, unknown uParam1)
{
    if (iParam0->_fU64 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU64 =  /* F_ISPEDINTRIGGERBOX */ sub_14408(  /* PLAYER_PED_ID */ sub_4651(), (iParam0^) );
        if ((iParam0->_fU64) AND (uParam1))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU64;
}

/* F_ISPEDINTRIGGERBOX */ int sub_14408(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, ref uParam1._fU0 );
    }
    return 0;
}

/* P_KILL_PED */ void sub_14601(unknown uParam0)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        STOP_PED_SPEAKING( uParam0, 1 );
        SET_PED_HEALTH( uParam0, 0, 0 );
        SET_PED_CORPSE( uParam0, 0 );
    }
    return;
}

/* HAS_SAVEFILE_LOADED */ int sub_14879(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_1201( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U0 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U1 );
             /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_8937( uParam0,  /* PLAYER_PED_ID */ sub_4651() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

/* MAL_GIVEPEDWEAPON */ void sub_15108(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, boolean bParam4)
{
    unknown Result;

    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (bParam4)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                 /* MAL_WRITESCRIPTLOG */ sub_15276( "MAL_GivePedWeapon waiting for weapon to exist" );
            }
        }
        return Result;
    }
    return nil;
}

/* MAL_WRITESCRIPTLOG */ void sub_15276(unknown uParam0)
{
    unknown uVar3;

    uVar3 = GET_REAL_GAME_TIMER();
    DISPLAYF( "[{0}][{1}]{3} {2} {3}", 4, 513, uVar3, 1537, "MSWW", 1537, uParam0, 1537, "###" );
    return;
}

/* P_INITIALIZE_SCRIPT_DATA */ void sub_15667()
{
     /* WRITESCRIPTLOG */ sub_1201( "MW", "P_INITIALIZE_SCRIPT_DATA start", 0 );
    l_U327 = 1;
    l_U329 = 0;
    l_U1676 = nil;
    l_U383 = 0;
    l_U1402 = 0;
    l_U1403 = 0;
    l_U1404 = 0;
    l_U1405 = 0;
    l_U1406 = 0;
    l_U1401 = 0;
    l_U1557 = 0;
    l_U1558 = 0;
    l_U1678 = 0;
    l_U1749 = 0;
    l_U1753 = 0;
    l_U1751 = 0;
    l_U1810 = 0;
    l_U1811 = 0;
    l_U1809 = 0;
    l_U1754 = 0;
    l_U1755 = 0;
    l_U1756 = 0;
    l_U361 = 0;
    l_U362 = 0;
    l_U385 = 0;
     /* CREATETIMER */ sub_5628( ref l_U1974, 5000, 1, 0 );
    l_U1812 = 0;
    l_U1813 = 0;
    l_U2075 = -1;
    l_U1407 = 0;
    l_U1758 = 0;
    l_U1814 = 0;
    l_U2229 = -1;
    l_U2352 = -1;
    l_U1912 = 0;
    l_U1913 = 0;
    l_U2349 = 0;
    l_U2351 = 0;
    l_U1750 = 0;
    l_U1752 = 0;
    l_U1757 = 0;
     /* CREATETIMER */ sub_5628( ref l_U1983, 2500, 1, 0 );
     /* RESETTIMER */ sub_6487( ref l_U1667 );
     /* RESETTIMER */ sub_6487( ref l_U1992 );
     /* WRITESCRIPTLOG */ sub_1201( "MW", "P_INITIALIZE_SCRIPT_DATA end", 0 );
    return;
}

/* P_SET_STATIC_DATA */ void sub_16085()
{
     /* WRITESCRIPTLOG */ sub_1201( "MW", "P_SET_STATIC_DATA start", 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1365[0], 26.50500000, -31.67300000, 13.05000000, 270, -523735065, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1365[1], 27.97500000, -34.60300000, 13.05000000, 0, -242176005, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1521[0], 8.33724200, -25.63288000, 13.05318000, 65391, 490025363, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1521[1], 6.49147900, -24.86220000, 13.05320000, 65391, 1489542899, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1565[0], -3.38000000, -25.75300000, 13.05300000, 25.00000000, -1187100427, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1565[1], -6.32251300, -14.89139000, 13.05282000, 195.41470000, -1802412046, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1565[2], -9.43910800, -15.34675000, 13.05321000, 183.61840000, 313487121, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1565[3], -6.18533200, -10.82857000, 13.05291000, 194.36090000, -1530551287, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1623[0], 1.29850200, -12.01896000, 13.05324000, 100, -1187100427, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1623[1], 0.58636200, -10.39034000, 13.05324000, 100, 1721298275, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1623[2], 1.32415900, -9.04047900, 13.05319000, 100, -1169779618, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1679[0], -11.55000000, -12.00000000, 13.05000000, 140, 2038879665, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1679[1], -8.87000000, -8.02000000, 13.05339000, 76.87011000, -1603690895, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1709, 9.37066700, 5.37844500, 13.05275000, 100, 313487121, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1723, -0.95388900, -4.34067300, 13.05311000, 161.74390000, -1530551287, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1759[0], 7.98581100, 17.63562000, 13.05290000, 246.11570000, -498975161, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1759[1], 8.88167900, 4.88503700, 13.05283000, 182.30000000, -1210733481, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1759[2], 5.62800000, 23.25500000, 13.05325000, 177.33000000, 1448620200, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1818[0], 17.92547000, 32.11897000, 13.03117000, 160.79700000, -242176005, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1818[1], 22.61434000, 30.89112000, 13.05298000, 139.14560000, -523735065, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1818[2], 26.17000000, 28.36000000, 13.05000000, 132.30000000, -1210733481, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1818[3], 11.73955000, 36.97932000, 13.13924000, 199.21090000, 2038879665, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1818[4], 20.84699000, 34.80526000, 13.13090000, 236.11700000, -1603690895, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1896[0], 17.17204000, 37.48426000, 13.05415000, 125, 1721298275, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1914[0], 20.77000000, 41.20000000, 13.05428000, 160.57270000, -1169779618, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1914[1], 21.67000000, 40.10000000, 13.05439000, 131.45590000, -943945545, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_16189( ref l_U1914[2], 22.26000000, 38.81000000, 13.05417000, 123.26240000, 1489542899, 7, 3, 2, 0, 0 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U386, "TRIGGER_2F_TO_3F", 20.57000000, 39.39000000, 17.42000000, 4.29000000, 8.53000000, 6.74000000, 0.00000000, 0.00000000, 30.87000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U407, "TRIGGER_2F_TO_3F_MONO", 30.30421000, 50.41512000, 14.53531000, 5.00000000, 5.00000000, 7.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U428, "TRIGGER_START_VIG01", 23.42000000, -40.81000000, 13.00000000, 5.00000000, 5.00000000, 3.02000000, 0.00000000, 0.00000000, -32.70000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U449, "TRIGGER_SPOTTED_VIG01", 25.12000000, -35.78000000, 13.00000000, 8.00000000, 7.00000000, 3.02000000, 0.00000000, 0.00000000, -32.62000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U470, "TRIG_CREATE_VIG02_RUNNER", 23.03000000, -28.26000000, 13.00000000, 3.92000000, 6.28000000, 2.50000000, 0.00000000, 0.00000000, -41.61000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U491, "TRIGGER_VIG02", 8.87000000, -29.63000000, 13.10000000, 6.00000000, 8.15000000, 3.02000000, 0.00000000, 0.00000000, -147.76000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U554, "TRIGGER_PROPANE_GUYS_AWARE", -0.49000000, -28.35000000, 13.10000000, 4.00000000, 5.50000000, 3.00000000, 0.00000000, 0.00000000, -144.06000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U575, "TRIGGER_BALCONY_ADVANCE", -14.54400000, -12.69400000, 13.10000000, 3.86000000, 3.50000000, 3.02000000, 0.00000000, 0.00000000, 12.21000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U596, "TRIG_CLEAN_RUNNER", -13.47000000, -17.76000000, 13.10000000, 3.86000000, 3.00000000, 3.02000000, 0.00000000, 0.00000000, 13.42000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U890[0], "TRIGGER_SNIPER_DANGER0", -11.00000000, -25.04000000, 12.95000000, 4.56000000, 10.70000000, 3.95000000, 0.00000000, 0.00000000, 24.95000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U890[1], "TRIGGER_SNIPER_DANGER1", -14.78000000, -13.78000000, 12.95000000, 4.56000000, 14.34000000, 3.95000000, 0.00000000, 0.00000000, 12.85000000, 1 );
     /* P_CREATETRIGGERREGION */ sub_18411( ref l_U933, ref l_U890 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U617, "TRIGGER_MID04", -10.78000000, -23.29000000, 13.10000000, 6.06000000, 2.27000000, 3.02000000, 0.00000000, 0.00000000, -67.39000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U638, "TRIG_PRE_BALCONY", -8.26000000, -22.30000000, 13.10000000, 6.06000000, 2.27000000, 3.02000000, 0.00000000, 0.00000000, -67.39000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U743, "TRIGGER_ACTIVATE_HALLROOM", -0.16037400, 0.50000000, 13.06540000, 12.00000000, 6.00000000, 3.02000000, 0.00000000, 0.00000000, 6.85000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U701, "TRIG_FREE_PROPANE_COVER", -7.46000000, -17.07000000, 13.00000000, 5.50000000, 2.00000000, 3.00000000, 0.00000000, 0.00000000, 20.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U659, "TRIG_PROPANE_ROOM", -7.57000000, -9.71000000, 12.96000000, 10.50000000, 9.00000000, 2.50000000, 0.00000000, 0.00000000, 11.40000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U722, "TRIG_PROPANE_ROOM_BACKDOOR", -1.83000000, -7.62000000, 10.08000000, 3.00000000, 6.00000000, 6.00000000, 0.00000000, 0.00000000, -15.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U1137[0], "TRIGGER_TURRET_DANGERZONE00", 0.03000000, 6.36000000, 12.92000000, 4.35000000, 12.00000000, 3.09000000, 0.00000000, 0.00000000, -9.01000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U1137[1], "TRIGGER_TURRET_DANGERZONE01", 3.06000000, 17.13000000, 12.92000000, 4.35000000, 12.55000000, 3.07000000, 0.00000000, 0.00000000, -22.30000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U1137[2], "TRIGGER_TURRET_DANGERZONE02", -1.55000000, -1.20000000, 12.92000000, 4.85000000, 6.63000000, 3.09000000, 0.00000000, 0.00000000, -11.22000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U1137[3], "TRIGGER_TURRET_DANGERZONE03", -0.57000000, -5.10000000, 12.92000000, 2.09000000, 3.00000000, 3.09000000, 0.00000000, 0.00000000, -7.58001000, 1 );
     /* P_CREATETRIGGERREGION */ sub_18411( ref l_U1222, ref l_U1137 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U680, "TRIG_THRU_PROPANE_WINDOW", -8.16000000, -15.40000000, 12.90000000, 6.40000000, 3.16000000, 3.00000000, 0.00000000, 0.00000000, 19.62000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U764, "TRIG_HALFWAY_LIFT_ROOM", -1.36000000, 0.53000000, 12.92000000, 15.61000000, 3.00000000, 2.50000000, 0.00000000, 0.00000000, 32.52000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U512, "TRIGGER_HALLROOM_ENGAGE", 4.53000000, 5.80000000, 13.10000000, 3.58000000, 5.00000000, 3.00000000, 0.00000000, 0.00000000, -8.07001000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U533, "TRIGGER_HALLROOM_ENGAGE2", 7.59000000, 17.71000000, 13.10000000, 3.58000000, 3.00000000, 3.02000000, 0.00000000, 0.00000000, 67.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U785, "TRIGGER_IN_PIT", 14.33000000, 19.97000000, 10.43000000, 4.50000000, 6.50000000, 6.00000000, 0.00000000, 0.00000000, 63.52000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U806, "TRIGGER_BEFORE_OUT_OF_PIT", 16.47000000, 33.19000000, 12.97000000, 4.00000000, 3.00000000, 3.07000000, 0.00000000, 0.00000000, 46.35000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U827, "TRIG_CREATE_AFTER_PIT", 23.83000000, 31.85000000, 12.50000000, 9.57000000, 5.20000000, 2.50000000, 0.00000000, 0.00000000, -44.29000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U848, "TRIGGER_OUT_OF_PIT", 13.80000000, 34.71000000, 12.97000000, 4.35000000, 5.40000000, 3.07000000, 0.00000000, 0.00000000, 46.35000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U869, "TRIG_HALL_EXPLOSION_THROW_MAX", 20.62000000, 39.54000000, 12.90000000, 4.38000000, 14.57000000, 3.00000000, 0.00000000, 0.00000000, -54.78000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U1074, "TRIG_2ND_BALCONY_DEATH_BOX", -14.63000000, -18.25000000, 7.00000000, 19.72000000, 34.12000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U1095, "tbImageFX_STAIRS01", 28.27930000, 54.14800000, 15.23000000, 4.00000000, 4.00000000, 4.00000000, 0.00000000, 0.00000000, 30.87000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_17488( ref l_U1116, "tbImageFX_STAIRS02", 28.01570000, 45.12000000, 17.31590000, 4.00000000, 4.00000000, 4.00000000, 0.00000000, 0.00000000, 30.87000000, 1 );
     /* P_CREATETETHERBOX */ sub_20610( ref l_U1363, "TETHER_PROPANE_ROOM", -8.02000000, -11.37000000, 12.96000000, 9.24000000, 11.20000000, 2.50000000, 0.00000000, 0.00000000, 11.86000000, 1 );
     /* P_CREATETETHERBOX */ sub_20610( ref l_U1364, "TETH_PROPANE_BALCONY", -14.38000000, -11.22000000, 12.96000000, 4.50000000, 8.00000000, 3.00000000, 0.00000000, 0.00000000, 12.75000000, 1 );
     /* P_CREATETETHERBOX */ sub_20610( ref l_U1815, "TETH_BEFORE_PIT", 12.71000000, 16.38000000, 12.90000000, 7.00000000, 3.84000000, 2.50000000, 0.00000000, 0.00000000, -26.34000000, 1 );
     /* P_CREATETETHERBOX */ sub_20610( ref l_U1816, "TETH_UPPER_PIT1", 23.51000000, 31.17000000, 11.40000000, 12.00000000, 8.00000000, 4.50000000, 0.00000000, 0.00000000, -59.80000000, 1 );
     /* P_CREATETETHERBOX */ sub_20610( ref l_U1817, "TETH_UPPER_PIT2", 15.78000000, 34.53000000, 11.40000000, 12.00000000, 8.00000000, 4.50000000, 0.00000000, 0.00000000, -11.04000000, 1 );
     /* P_CREATETETHERBOX */ sub_20610( ref l_U1964, "TETH_FINAL_WAVE", 23.91000000, 41.67000000, 12.90000000, 8.25000000, 4.25000000, 3.00000000, 0.00000000, 0.00000000, 32.87000000, 1 );
     /* WRITESCRIPTLOG */ sub_1201( "MW", "P_SET_STATIC_DATA end", 0 );
    return;
}

/* P_CREATEPEDSTRUCTWITHNAME */ void sub_16189(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

/* P_CREATETRIGGERBOX */ void sub_17488(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    StrCopy( ref iParam0->_fU0, uParam1, 64 );
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = {uParam2};
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 1, iParam0 + 0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* P_CREATETRIGGERREGION */ void sub_18411(int iParam0, unknown uParam1)
{
    int iVar4;
    int I;

    iVar4 = (uParam1^);
    if (iVar4 > 6)
    {
         /* WRITESCRIPTLOG */ sub_1201( "[SA]", "P_CreateTriggerRegion() ERRROR: max number of trigger boxes exceeded.", 0 );
        SCRIPT_ASSERT( "P_CreateTriggerRegion() ERRROR: max number of trigger boxes exceeded.", 0 );
    }
    for ( I = 0; I < iVar4; I++ )
    {
        iParam0->_fU0[I] = {(uParam1^)[I]};
    }
    iParam0->_fU508 = iVar4;
    iParam0->_fU548 = 0;
    iParam0->_fU552 = 0;
    iParam0->_fU556 = 0;
    iParam0->_fU560 = 0;
    return;
}

/* P_CREATETETHERBOX */ void sub_20610(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 2, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* P_CREATE_S_HOT_GG_LA_01 */ void sub_21102()
{
     /* WRITESCRIPTLOG */ sub_1201( "CO", "P_CREATE_S_HOT_GG_LA_01", 0 );
     /* P_CREATECOLLECTIBLESTRUCT */ sub_21239( ref g_U740, g_U848, -185254380, 1993031030, 20.26000000, -35.21000000, 13.10000000, 1.50000000, 0.00000000, -10.00000000, "Room_F2_01" );
     /* P_CREATECOLLECTIBLE */ sub_21396( ref g_U740 );
    return;
}

/* P_CREATECOLLECTIBLESTRUCT */ void sub_21239(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    if (NOT IS_ARCADE_MODE_ACTIVE())
    {
        iParam0->_fU4 = uParam1;
        iParam0->_fU8 = uParam2;
        iParam0->_fU12 = uParam3;
        iParam0->_fU16 = {uParam4};
        iParam0->_fU28 = {uParam7};
        StrCopy( ref iParam0->_fU40, uParam10, 32 );
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_1201( "CO", "NO GOLDEN GUNS FOR ARCADE", 0 );
    }
    return;
}

/* P_CREATECOLLECTIBLE */ void sub_21396(int iParam0)
{
     /* WRITESCRIPTLOG */ sub_1201( "CO", "P_CreateCollectible", 0 );
    if (NOT IS_ARCADE_MODE_ACTIVE())
    {
        if (( /* F_HAS_COLLECTIBLE_BEEN_COLLECTED */ sub_21479( iParam0->_fU12 )) == 1)
        {
             /* WRITESCRIPTLOG */ sub_1201( "CO", "HAS BEEN COLLECTED.", 0 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_1201( "CO", "has never been collected.", 0 );
        }
        if (( /* F_HAS_COLLECTIBLE_BEEN_COLLECTED */ sub_21479( iParam0->_fU12 )) == 0)
        {
             /* CLEANPLACEMENT */ sub_7328( iParam0->_fU0 );
            iParam0->_fU0 =  /* CREATEPLACEMENT */ sub_21749( iParam0->_fU8, iParam0->_fU16, iParam0->_fU28, 1, 0, 0, 1119092736 );
            if (NOT (IS_STRING_NULL( iParam0 + 40 )))
            {
                if ((DOES_PLACEMENT_EXIST( iParam0->_fU0 )) == 1)
                {
                     /* WRITESCRIPTLOG */ sub_1201( "CO", "Added collectible to interior", 0 );
                    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( iParam0->_fU0, iParam0 + 40 );
                }
            }
        }
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_1201( "CO", "NO GOLDEN GUNS FOR ARCADE", 0 );
    }
    return;
}

/* F_HAS_COLLECTIBLE_BEEN_COLLECTED */ int sub_21479(unknown uParam0)
{
    unknown uVar3;
    float fVar4;

    if (IS_COLLECTABLE_ENABLED() == 0)
    {
        return 1;
    }
    uVar3 = uParam0;
    fVar4 = STAT_HASH_GET_FLOAT( uVar3 );
    if (ARE_SP_STATS_LOADED() == 1)
    {
        if ((STAT_HASH_EXISTS( uVar3 )) == 1)
        {
            if (fVar4 > 0.00000000)
            {
                return 1;
            }
        }
    }
    return 0;
}

/* CREATEPLACEMENT */ void sub_21749(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, int iParam8, unknown uParam9, unknown uParam10)
{
    unknown Result;

    Result = CREATE_PLACEMENT_ROTATE( uParam0, uParam1, uParam4, uParam7, 0, uParam9, uParam10 );
    if (iParam8 == 1)
    {
        while ((DOES_PLACEMENT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for a placement to exist: {} ###", 1, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return Result;
}

/* P_CREATE_S_HOT_GG_G3_01 */ void sub_22083()
{
     /* WRITESCRIPTLOG */ sub_1201( "CO", "P_CREATE_S_HOT_GG_G3_01", 0 );
     /* P_CREATECOLLECTIBLESTRUCT */ sub_21239( ref g_U794, g_U851, -1174808979, -272870987, 1.64000000, 15.97000000, 13.09000000, 1.50000000, 0.00000000, 20.00000000, "Room_F2_Hall" );
     /* P_CREATECOLLECTIBLE */ sub_21396( ref g_U794 );
    return;
}

/* P_LOAD_ASSETS */ void sub_22505()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1201( "MW", "P_LOAD_SECOND_FLOOR_ASSETS start", 0 );
     /* LOADSCRIPTSTREAM */ sub_22609( "S_HOTEL_GENERATOR_EXPLOSION", 0, 1 );
    for ( I = 0; I < l_U2461; I++ )
    {
         /* LOADMODEL */ sub_22809( l_U2461[I], 1 );
    }
    if (g_U855 <= 2)
    {
         /* LOADISEQ */ sub_23083( 262571667, 1 );
         /* LOADISEQ */ sub_23083( 161673566, 1 );
    }
     /* LOADMODEL */ sub_22809( g_U848, 1 );
     /* LOADMODEL */ sub_22809( g_U851, 1 );
     /* P_LOAD_WEAPONS */ sub_23408();
     /* SETUP_SCRIPTED_SPEECH */ sub_23659( "SHOTAUD" );
     /* LOADAUDIOBANK */ sub_23862( "SCRIPT_MISSION\S_HOTEL_SECURITY_GATE", 1 );
     /* LOADANIMDICT */ sub_24043( "LEVEL_S_HOTEL_CP_11", 0, 0 );
     /* LOADANIMDICT */ sub_24043( "EXPL_CAM", 0, 0 );
     /* WRITESCRIPTLOG */ sub_1201( "MW", "P_LOAD_SECOND_FLOOR_ASSETS end", 0 );
    return;
}

/* LOADSCRIPTSTREAM */ void sub_22609(unknown uParam0, unknown uParam1, int iParam2)
{
    if (iParam2 == 0)
    {
        REQUEST_SCRIPT_STREAM( uParam0, uParam1 );
    }
    else
    {
        while ((LOAD_SCRIPT_STREAM( uParam0, uParam1 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for script stream to be loaded: {} : {} ###", 2, 1537, uParam0, 513, uParam1 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADMODEL */ void sub_22809(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
         /* WRITE_STRING */ sub_11038( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADISEQ */ void sub_23083(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to load does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 0)
    {
        ISEQ_REQUEST( uParam0 );
        ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
        if (iParam1 == 1)
        {
            while ((ISEQ_QUERY_STATE( uParam0, 1 )) == 1)
            {
                DISPLAYF( "[SP]### Waiting for interactive sequence to be loaded: {0} {1} ###", 2, 1281, ref uVar4, 513, uParam0 );
                WAIT( 0 );
            }
        }
    }
    return;
}

/* P_LOAD_WEAPONS */ void sub_23408()
{
     /* LOADWEAPON */ sub_23441( 811797242, 1 );
     /* LOADWEAPON */ sub_23441( -110877124, 1 );
     /* LOADWEAPON */ sub_23441( -612753081, 1 );
     /* LOADWEAPON */ sub_23441( -1013714740, 1 );
     /* LOADWEAPON */ sub_23441( 514118749, 1 );
     /* LOADWEAPON */ sub_23441( -1659006841, 1 );
    return;
}

/* LOADWEAPON */ void sub_23441(unknown uParam0, boolean bParam1)
{
    REQUEST_WEAPON( uParam0 );
    if (bParam1)
    {
        while ((HAS_WEAPON_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load weapon: {!f1} : {1} ###", 2, 1, 199730165, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* SETUP_SCRIPTED_SPEECH */ void sub_23659(unknown uParam0)
{
    StrCopy( ref g_U157._fU0, uParam0, 16 );
     /* CLEARPEDCONVERSATIONDATA */ sub_23703();
    return;
}

/* CLEARPEDCONVERSATIONDATA */ void sub_23703()
{
    int I;

    for ( I = 0; I <= 8; I++ )
    {
        g_U157._fU16[I]._fU0 = nil;
        g_U157._fU16[I]._fU4 = 0;
        g_U157._fU92[I] = 0;
    }
    return;
}

/* LOADAUDIOBANK */ void sub_23862(unknown uParam0, int iParam1)
{
    LOAD_SCRIPT_AUDIO_BANK( uParam0 );
    if (iParam1 == 1)
    {
        while ((IS_SCRIPT_AUDIO_BANK_LOADED( uParam0, 0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for script audio bank to be loaded: {} ###", 1, 1537, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADANIMDICT */ void sub_24043(unknown uParam0, unknown uParam1, int iParam2)
{
    REQUEST_ANIM_DICT( uParam0, uParam1 );
    "[doubled result, dropped if not asigned]";
    if (iParam2 == 1)
    {
        while ((HAS_ANIM_DICT_LOADED( uParam0, uParam1 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an animation dictionary to be loaded: {} ###", 1, 1537, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* P_SAVE_HOTEL_PLAYER_DATA_CHECKPOINT */ void sub_24432(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
     /* SAVE_WATERBOTTLE_STATE */ sub_24482( uParam0 );
     /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_24720( uParam0, uParam1, uParam2, uParam3, uParam6, uParam7, uParam8, uParam9 );
    return;
}

/* SAVE_WATERBOTTLE_STATE */ void sub_24482(int iParam0)
{
    unknown uVar3;

     /* WRITESCRIPTLOG */ sub_1201( "BSW", "SAVE_WATERBOTTLE_STATE start", 0 );
    uVar3 =  /* GET_WATERBOTTLE_FROM_PLAYER */ sub_13515();
    if (GET_DOES_WEAPON_EXIST( uVar3 ))
    {
        iParam0->_fU48 = GET_SUPPRESSOR_DAMAGE_LEVEL( uVar3 );
        DISPLAYF( "SAVE_WATERBOTTLE_STATE found water bottle suppressor - saving the state: {}", 1, 513, iParam0->_fU48 );
    }
    return;
}

/* P_SAVE_PLAYER_DATA_CHECKPOINT */ void sub_24720(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

     /* WRITESCRIPTLOG */ sub_1201( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
         /* WRITESCRIPTLOG */ sub_1201( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
         /* START_NEW_LEVEL_CONTEXT */ sub_12203( iParam1 );
         /* CLOSE_OLD_LEVEL_CONTEXT */ sub_25011( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_25488( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_25488( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_25748( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_25488( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_25748( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_25748( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_25488( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_25748( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_25748( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_25748( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_25488( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_25748( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_25748( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_25748( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_25748( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
             /* P_PRINT_CHECKPOINT_DATA */ sub_27328( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U1, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
     /* WRITESCRIPTLOG */ sub_1201( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

/* CLOSE_OLD_LEVEL_CONTEXT */ void sub_25011(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_9218( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
         /* WRITESCRIPTLOG */ sub_1201( "TEH", "Ending context", 0 );
         /* WRITESCRIPTLOG */ sub_1201( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

/* P_SAVE_WEAPON_ATTACHMENTS */ void sub_25488(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

/* F_WEAPONS_SAME_AMMO */ void sub_25748(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

/* P_PRINT_CHECKPOINT_DATA */ void sub_27328(int iParam0)
{
     /* WRITE_STRING */ sub_11038( "CHECKPOINT DATA" );
    PRINTSTRING( "---Position: " );
     /* WRITE_VECTOR */ sub_27416( iParam0->_fU4 );
    PRINTSTRING( "---Heading: " );
     /* WRITE_FLOAT */ sub_27493( iParam0->_fU16 );
    PRINTSTRING( "---fRelativeGameCamHeading: " );
     /* WRITE_FLOAT */ sub_27493( iParam0->_fU20 );
    PRINTSTRING( "---fRelativeGameCamPitch: " );
     /* WRITE_FLOAT */ sub_27493( iParam0->_fU24 );
    PRINTSTRING( "---nHealth: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU28 );
    PRINTSTRING( "---wtRightHolster: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU56 );
    PRINTSTRING( "---wtLeftHolster: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU60 );
    PRINTSTRING( "---wtRifleHolster: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU64 );
    PRINTSTRING( "---wtRightHand: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU68 );
    PRINTSTRING( "---wtLeftHand: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU72 );
    PRINTSTRING( "---nWeaponRightHolsterAmmo: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU76 );
    PRINTSTRING( "---nWeaponLeftHolsterAmmo: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU80 );
    PRINTSTRING( "---nWeaponRifleHolsterAmmo: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU84 );
    PRINTSTRING( "---nWeaponRightHandAmmo: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU88 );
    PRINTSTRING( "---nWeaponLeftHandAmmo: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU92 );
    PRINTSTRING( "---fAdrenaline: " );
     /* WRITE_FLOAT */ sub_27493( iParam0->_fU32 );
    PRINTSTRING( "---nPayneKillers: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU36 );
    PRINTSTRING( "---nHour: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU40 );
    PRINTSTRING( "---nMinute: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU44 );
    PRINTSTRING( "---fSweatAmount: " );
     /* WRITE_FLOAT */ sub_27493( iParam0->_fU136 );
    PRINTSTRING( "---bTimeFrozen: " );
     /* WRITE_BOOL */ sub_28322( iParam0->_fU140 );
    PRINTSTRING( "---checkpointIndex: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU52 );
     /* WRITE_STRING */ sub_11038( "---nRightHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU96 );
     /* WRITE_STRING */ sub_11038( "---nRightHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU100 );
     /* WRITE_STRING */ sub_11038( "---nLeftHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU104 );
     /* WRITE_STRING */ sub_11038( "---nLeftHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU108 );
     /* WRITE_STRING */ sub_11038( "---nRifleHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU112 );
     /* WRITE_STRING */ sub_11038( "---nRifleHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU116 );
     /* WRITE_STRING */ sub_11038( "---nRightHandAttachmentEnabled: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU120 );
     /* WRITE_STRING */ sub_11038( "---nRightHandAttachmentToggled: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU124 );
     /* WRITE_STRING */ sub_11038( "---nLeftHandAttachmentEnabled: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU128 );
     /* WRITE_STRING */ sub_11038( "---nLeftHandAttachmentToggled: " );
     /* WRITE_INT */ sub_1864( iParam0->_fU132 );
    PRINTSTRING( "[CHECKPOINT DATA SIZE]: " );
     /* WRITE_INT */ sub_1864( l_U1 );
    PRINTSTRING( "[CHECKPOINT DATA REF SIZE]: " );
     /* WRITE_INT */ sub_1864( 144 );
    return;
}

/* WRITE_VECTOR */ void sub_27416(unknown uParam0, unknown uParam1, unknown uParam2)
{
    PRINTVECTOR( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_FLOAT */ void sub_27493(unknown uParam0)
{
    PRINTFLOAT( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_BOOL */ void sub_28322(boolean bParam0)
{
    if (bParam0)
    {
        PRINTSTRING( "TRUE" );
    }
    else
    {
        PRINTSTRING( "FALSE" );
    }
    PRINTNL();
    return;
}

/* P_SETUP_SECOND_FLOOR_2_GAMEPLAY */ void sub_29285()
{
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_SETUP_SECOND_FLOOR_2_GAMEPLAY", "***" );
     /* P_CREATE_2ND_FLOOR_PLACEMENTS */ sub_29380();
     /* P_CREATE_HALL_EXPLOSION_PROPS */ sub_29633();
     /* CREATE_2ND_FLOOR_GATE_BUTTON */ sub_30348();
     /* P_CREATE_HALL */ sub_32639();
     /* P_CREATE_PIT_CHARGER */ sub_36480();
    return;
}

/* P_CREATE_2ND_FLOOR_PLACEMENTS */ void sub_29380()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_CREATE_2ND_FLOOR_PLACEMENTS start", 0 );
    l_U379[0] =  /* CREATEPLACEMENT */ sub_21749( -4072149, 2.64000000, 29.78000000, 13.84000000, 0.05000000, 0.05000000, 0.10000000, 0, 0, 0, 1119092736 );
    for ( I = 0; I <= (l_U379 - 1); I++ )
    {
        ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U379[I], ref g_U1306 );
    }
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_CREATE_2ND_FLOOR_PLACEMENTS end", 0 );
    return;
}

/* P_CREATE_HALL_EXPLOSION_PROPS */ void sub_29633()
{
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_CREATE_HALL_EXPLOSION_PROPS", "***" );
     /* MAL_RECREATEOBJECTWITHNOROTATIONINROOM */ sub_29754( ref l_U336, -93977637, 27.00000000, 43.60000000, 14.20000000, ref g_U1306, 1, 0 );
     /* MAL_RECREATEOBJECTINROOM */ sub_29824( ref g_U2092, 247925151, l_U355, l_U358, ref g_U1306, 1, 1 );
    return;
}

/* MAL_RECREATEOBJECTWITHNOROTATIONINROOM */ void sub_29754(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
     /* MAL_RECREATEOBJECTINROOM */ sub_29824( uParam0, uParam1, uParam2, g_U657, uParam5, uParam6, uParam7 );
    return;
}

/* MAL_RECREATEOBJECTINROOM */ void sub_29824(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
     /* MAL_RECREATEOBJECT */ sub_29877( uParam0, uParam1, uParam2, uParam5, uParam9, uParam10 );
    if (DOES_OBJECT_EXIST( (uParam0^) ))
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( (uParam0^), uParam8 );
    }
    return;
}

/* MAL_RECREATEOBJECT */ void sub_29877(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
     /* CLEANOBJECT */ sub_7189( (uParam0^) );
    (uParam0^) =  /* CREATEOBJECTNOOFFSET */ sub_29929( uParam1, uParam2, uParam5, 0, uParam9, 0 );
    FREEZE_OBJECT_POSITION( (uParam0^), uParam8 );
    return;
}

/* CREATEOBJECTNOOFFSET */ void sub_29929(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_22809( uParam0, 1 );
    }
    Result = CREATE_OBJECT_NO_OFFSET( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an object to exist: {!f1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

/* CREATE_2ND_FLOOR_GATE_BUTTON */ void sub_30348()
{
     /* CLEANOBJECT */ sub_7189( l_U2086 );
     /* CLEANOBJECT */ sub_7189( l_U2087 );
    l_U2086 =  /* CREATEOBJECT */ sub_30429( g_U1445, l_U2076, l_U2079, 0, 1, 0 );
    l_U2087 =  /* CREATEOBJECT */ sub_30429( g_U1446, l_U2076, l_U2079, 0, 1, 0 );
    if ((DOES_OBJECT_EXIST( l_U2086 )) == 1)
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U2086, ref g_U1306 );
        FREEZE_OBJECT_POSITION( l_U2086, 1 );
         /* P_CREATEPOISTRUCTOBJECT */ sub_30845( ref l_U2088, 1, l_U2076, l_U2086, 1, 0, 1.50000000, 3.00000000, 0, 0 );
         /* P_SET_INTERACTIVE_TEXT */ sub_31957( ref l_U2088, 30, "POI_OPENGATE" );
    }
    if ((DOES_OBJECT_EXIST( l_U2087 )) == 1)
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U2087, ref g_U1306 );
        FREEZE_OBJECT_POSITION( l_U2087, 1 );
        SET_OBJECT_VISIBLE( l_U2087, 0 );
    }
     /* P_CLOSEDOOR */ sub_32228( ref g_U1533, 1 );
     /* P_SETDOORLOCKED */ sub_32485( ref g_U1533, 1 );
    return;
}

/* CREATEOBJECT */ void sub_30429(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_22809( uParam0, 1 );
    }
    Result = CREATE_OBJECT( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an object to exist: {!f1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

/* P_CREATEPOISTRUCTOBJECT */ void sub_30845(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;

     /* P_CREATEBLANKPOISTRUCT */ sub_30886( iParam0, uParam10 );
    if ((DOES_OBJECT_EXIST( uParam5 )) == 1)
    {
        uVar14 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( uParam5 )};
        iParam0->_fU4 = uParam1;
        iParam0->_fU308 = uParam7;
        if (iParam0->_fU308 == 0)
        {
            iParam0->_fU100 = {uVar14};
            iParam0->_fU200 = {uVar14};
        }
        iParam0->_fU112 = uParam8;
        iParam0->_fU212 = uParam9;
        iParam0->_fU300 = uParam6;
        iParam0->_fU312 = uParam5;
        iParam0->_fU320 = uParam11;
        iParam0->_fU20 = {uParam2};
         /* P_CREATEPOIGLINT */ sub_31350( iParam0 );
    }
    else
    {
        SCRIPT_ASSERT( "[SP]### WARNING!!! (P_CreateObjectPOIStruct): Object doesn't exist! ###", 0 );
    }
    return;
}

/* P_CREATEBLANKPOISTRUCT */ void sub_30886(int iParam0, unknown uParam1)
{
    iParam0->_fU0 = uParam1;
    iParam0->_fU4 = 0;
    iParam0->_fU8 = 0;
    iParam0->_fU12 = nil;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU52 = 1;
    iParam0->_fU56 = 1;
    iParam0->_fU60 = 0;
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = 0;
    iParam0->_fU76 = 0;
    iParam0->_fU80 = 0;
    iParam0->_fU84 = 0;
    iParam0->_fU100 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU112 = 0.00000000;
    iParam0->_fU88 = 0;
    iParam0->_fU92 = 0;
    iParam0->_fU96 = 0;
    iParam0->_fU200 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU212 = 0.00000000;
    iParam0->_fU300 = 0;
    iParam0->_fU304 = 1;
    iParam0->_fU308 = 0;
    iParam0->_fU324 = 1;
    iParam0->_fU328 = 0;
    iParam0->_fU340 = 0;
    iParam0->_fU336 = 0.20000000;
    return;
}

/* P_CREATEPOIGLINT */ void sub_31350(int iParam0)
{
    if (iParam0->_fU12 != nil)
    {
        if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
        {
            REMOVE_GLINT( iParam0->_fU12 );
        }
    }
    iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
     /* P_INITPOIGLINT */ sub_31448( iParam0 );
    return;
}

/* P_INITPOIGLINT */ void sub_31448(int iParam0)
{
    if (iParam0->_fU0 == 1)
    {
        if (iParam0->_fU320 == 1)
        {
            if ((iParam0->_fU8 > 0) AND (iParam0->_fU4 == 0))
            {
                 /* P_ENABLEPOIGLINT */ sub_31524( iParam0, 1 );
            }
            else if ((iParam0->_fU8 < 2) AND (iParam0->_fU4 == 1))
            {
                 /* P_ENABLEPOIGLINT */ sub_31524( iParam0, 1 );
            }
            else if ((iParam0->_fU8 == 1) AND (iParam0->_fU4 == 2))
            {
                 /* P_ENABLEPOIGLINT */ sub_31524( iParam0, 1 );
            }
            else
            {
                 /* P_ENABLEPOIGLINT */ sub_31524( iParam0, 0 );
            };;;
        }
        else
        {
             /* P_ENABLEPOIGLINT */ sub_31524( iParam0, 0 );
        }
    }
    else
    {
         /* P_ENABLEPOIGLINT */ sub_31524( iParam0, 0 );
    }
    return;
}

/* P_ENABLEPOIGLINT */ void sub_31524(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        if (iParam0->_fU12 != nil)
        {
            if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
            {
                ENABLE_GLINT( iParam0->_fU12, 1 );
            }
            else
            {
                iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
            }
        }
        else
        {
            iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
        }
    }
    else if (iParam0->_fU12 != nil)
    {
        if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
        {
            ENABLE_GLINT( iParam0->_fU12, 0 );
        }
    }
    return;
}

/* P_SET_INTERACTIVE_TEXT */ void sub_31957(int iParam0, unknown uParam1, unknown uParam2)
{
    StrCopy( ref iParam0->_fU32, uParam2, 16 );
    iParam0->_fU48 = uParam1;
     /* P_INITINTERACTIVETEXT */ sub_32013( iParam0 );
    return;
}

/* P_INITINTERACTIVETEXT */ void sub_32013(int iParam0)
{
    if ((iParam0->_fU8 == 2) AND (iParam0->_fU0 == 1))
    {
        if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
        {
            SET_INTERACTIONTEXT_BUTTON( iParam0->_fU48 );
            SET_INTERACTIONTEXT_TEXT( iParam0 + 32 );
            SET_INTERACTIONTEXT_VISIBLE( 1 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 1 );
            SET_INTERACTIONTEXT_AVAILABLE( 1 );
            iParam0->_fU56 = 1;
        }
    }
    return;
}

/* P_CLOSEDOOR */ void sub_32228(int iParam0, int iParam1)
{
    if (( /* F_DOESDOOREXIST */ sub_32254( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_32338( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    return;
}

/* F_DOESDOOREXIST */ int sub_32254(int iParam0)
{
    int iVar3;

    iVar3 = DOES_OBJECT_OF_TYPE_EXIST_AT_COORDS( iParam0->_fU4, 1.00000000, iParam0->_fU0 );
    if (iVar3 == 1)
    {
        return 1;
    }
    return 0;
}

/* P_PRINTDOORNOTEXIST */ void sub_32338(unknown uParam0)
{
    (uParam0^) = {(uParam0^)};
    return;
}

/* P_SETDOORLOCKED */ void sub_32485(int iParam0, int iParam1)
{
    int iVar4;
    float fVar5;

    if (( /* F_DOESDOOREXIST */ sub_32254( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_32338( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
    }
    else
    {
        iVar4 = 0;
        fVar5 = 0.00000000;
        GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref iVar4, ref fVar5 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar5 );
    }
    return;
}

/* P_CREATE_HALL */ void sub_32639()
{
    int I;
    unknown uVar3;

     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_CREATE_HALL", "***" );
     /* P_SETUP_AI_GROUP */ sub_32708( ref l_U1803, 1.00000000, 0 );
    for ( I = 0; I <= 2; I++ )
    {
         /* PED_INITIALIZE */ sub_33148( ref l_U1759[I], ref l_U1799[I], -110877124, "AIT_NORMAL", 0, 25000, 2, 0, 25000 );
         /* P_QUICK_ADD_PED_TO_GROUP */ sub_34129( l_U1799[I], ref l_U1803 );
        if ( /* IS_PED_VALID */ sub_13637( l_U1799[I] ))
        {
            SET_PED_COMBAT_ATTRIBUTES( l_U1799[I], 8192, 0 );
            if (I == 0)
            {
                 /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1799[I], g_U1338 );
                REMOVE_ALL_PED_WEAPONS( l_U1799[I] );
                 /* F_GIVEPEDWEAPON */ sub_11429( l_U1799[I], 514118749, 25000, 0, 0 );
            }
            else if (I == 1)
            {
                 /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1799[I], g_U1338 );
                REMOVE_ALL_PED_WEAPONS( l_U1799[I] );
                uVar3 =  /* F_GIVEPEDWEAPON */ sub_11429( l_U1799[I], -1013714740, 25000, 0, 0 );
                ENABLE_WEAPON_ATTACHMENT( uVar3, 14, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar3, 14, 1 );
                 /* PED_SET_LOCK_TO_COVER */ sub_34784( ref l_U1799[I], 1 );
                TASK_COMBAT_MOVE_TO_COVER( l_U1799[I], "second_floor_simple", "2ndCorner106",  /* PLAYER_PED_ID */ sub_4651() );
                 /* PED_SET_ALWAYS_HIDE_IN_COVER */ sub_34918( ref l_U1799[I], 1 );
            }
            else
            {
                 /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1799[I], g_U1306 );
                 /* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_35032( ref l_U1799[I], 1 );
                SET_PED_COMBAT_ATTRIBUTES( l_U1799[I], 1, 0 );
                SET_PED_NO_RAGDOLL_TO_BULLET_UNLESS_DEAD( l_U1799[I], 1 );
            }
        }
    }
    if (DOES_GROUP_EXIST( l_U1803._fU0 ))
    {
        SET_GROUP_LAST_ALIVE_AS_LONE_WOLF( l_U1803._fU0, 0 );
    }
     /* PED_ARRAY_SET_REGISTER_TARGET_PLAYER */ sub_35202( ref l_U1799 );
     /* PED_ARRAY_SET_LOCKED_ON_PLAYER */ sub_35449( ref l_U1799 );
     /* PED_SET_ALERTNESS */ sub_35687( ref l_U1799[0], 3 );
     /* PED_SET_ALERTNESS */ sub_35687( ref l_U1799[1], 3 );
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_35774( ref l_U1799, "Hall" );
     /* PED_ARRAY_SET_COMBAT_MOVEMENT */ sub_35909( ref l_U1799, 0 );
     /* MAL_SETACTINT */ sub_36073( l_U1799[2], 10, -1 );
    uVar3 = GET_WEAPON_FROM_HAND( l_U1799[1], 0, 0 );
    if (GET_DOES_WEAPON_EXIST( uVar3 ))
    {
        SET_WEAPON_LIGHT_DATA_BY_NAME( GET_WEAPON_FROM_HAND( l_U1799[1], 0, 0 ), "Flashlight_Hotel" );
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "ERROR: Can't set light data for piHallCP[1]", 0 );
    }
     /* P_DEACTIVATEPEDARRAY */ sub_36284( ref l_U1799 );
    return;
}

/* P_SETUP_AI_GROUP */ void sub_32708(int iParam0, unknown uParam1, boolean bParam2)
{
    iParam0->_fU4 = uParam1;
    iParam0->_fU0 = CREATE_GROUP( 3, 1 );
    if (bParam2)
    {
        PRINTSTRING( "[MSWW]### P_SETUP_AI_GROUP TOLD TO WAIT FOR GROUP TO EXIST ###" );
        PRINTNL();
        while (NOT (DOES_GROUP_EXIST( iParam0->_fU0 )))
        {
            WAIT( 0 );
            PRINTSTRING( "[MSWW]### GROUP ###" );
            PRINTNL();
        }
        PRINTSTRING( "[MSWW]### P_SETUP_AI_GROUP created group with ID: " );
        PRINTINT( iParam0->_fU0 );
        PRINTNL();
    }
    SET_GROUP_RATIO_FIRING_AT_VISIBLE( iParam0->_fU0, iParam0->_fU4 );
    SET_GROUP_RATIO_FIRING_AT_INVISIBLE( iParam0->_fU0, iParam0->_fU4 );
    if (iParam0->_fU8)
    {
        SET_GROUP_FORMATION( iParam0->_fU0, iParam0->_fU12 );
        SET_GROUP_FORMATION_SPACING( iParam0->_fU0, iParam0->_fU16 );
        SET_GROUP_FORMATION_MAX_MOVE_SPEED( iParam0->_fU0, iParam0->_fU20 );
    }
    return;
}

/* PED_INITIALIZE */ void sub_33148(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, int iParam7, unknown uParam8)
{
    unknown uVar11;

     /* CLEANPED */ sub_8126( (uParam1^) );
    (uParam1^) =  /* CREATEPED */ sub_33185( uParam0 );
    if ( /* IS_PED_VALID */ sub_13637( (uParam1^) ))
    {
        uVar11 =  /* F_GIVEPEDWEAPON */ sub_11429( (uParam1^), uParam2, uParam5, 0, 1 );
        if (iParam7 != 0)
        {
             /* F_GIVEPEDWEAPONTOHOLSTER */ sub_10634( (uParam1^), iParam7, 0, uParam8, 0 );
        }
        SET_PED_AI_TEMPLATE( (uParam1^), uParam3 );
        SET_PED_ALERTNESS( (uParam1^), uParam6 );
        switch (uParam4)
        {
            case 0: break;
            case 1:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 13, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 13, 1 );
            break;
            case 2:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 14, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 14, 1 );
            break;
            case 3:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 12, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 12, 1 );
            break;
        }
    }
    return;
}

/* CREATEPED */ void sub_33185(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_22809( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
     /* SETPEDDEFAULTSTATS */ sub_33676( iParam0->_fU40 );
     /* SETPEDDEFAULTTEMPLATE */ sub_33777( iParam0->_fU40 );
    return iParam0->_fU40;
}

/* SETPEDDEFAULTSTATS */ void sub_33676(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

/* SETPEDDEFAULTTEMPLATE */ void sub_33777(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

/* P_QUICK_ADD_PED_TO_GROUP */ void sub_34129(unknown uParam0, int iParam1)
{
    int iVar4;
    unknown uVar5;

    if ((DOES_GROUP_EXIST( iParam1->_fU0 )) == 0)
    {
         /* WRITE_STRING */ sub_11038( "[SP]### Warning!!! Group does not exist. Creating new group specified attributes. ###" );
        if (iParam1->_fU4 > 0)
        {
             /* P_SETUP_AI_GROUP */ sub_32708( iParam1, iParam1->_fU4, 0 );
        }
        else
        {
             /* P_SETUP_AI_GROUP */ sub_32708( iParam1, 1056964608, 0 );
        }
    }
    else
    {
        PRINTSTRING( "[MSWW]### P_QUICK_ADD_PED_TO_GROUP adding ped to group with ID: " );
        PRINTINT( iParam1->_fU0 );
        PRINTNL();
    }
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        GET_GROUP_SIZE( iParam1->_fU0, ref iVar4, ref uVar5 );
        if (iVar4 == 0)
        {
            SET_PED_AS_GROUP_LEADER( uParam0, iParam1->_fU0 );
        }
        else
        {
            SET_PED_AS_GROUP_MEMBER( uParam0, iParam1->_fU0 );
        }
        SET_PED_NEVER_LEAVES_GROUP( uParam0, 1 );
    }
    return;
}

/* PED_SET_ROOM_BY_NAME */ void sub_34572(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    if ( /* IS_PED_VALID */ sub_13637( (uParam0^) ))
    {
        SET_ROOM_FOR_PED_BY_NAME( (uParam0^), ref uParam1 );
    }
    return;
}

/* PED_SET_LOCK_TO_COVER */ void sub_34784(unknown uParam0, unknown uParam1)
{
    if ( /* IS_PED_VALID */ sub_13637( (uParam0^) ))
    {
        SET_PED_FLAG_LOCK_TO_COVER( (uParam0^), uParam1 );
    }
    return;
}

/* PED_SET_ALWAYS_HIDE_IN_COVER */ void sub_34918(unknown uParam0, unknown uParam1)
{
    if ( /* IS_PED_VALID */ sub_13637( (uParam0^) ))
    {
         /* WRITE_BOOL */ sub_28322( uParam1 );
        SET_PED_FLAG_ALWAYS_HIDE_WHEN_IN_COVER( (uParam0^), uParam1 );
    }
    return;
}

/* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ void sub_35032(unknown uParam0, unknown uParam1)
{
    if ( /* IS_PED_VALID */ sub_13637( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), uParam1 );
    }
    return;
}

/* PED_ARRAY_SET_REGISTER_TARGET_PLAYER */ void sub_35202(unknown uParam0)
{
     /* PED_ARRAY_SET_REGISTER_TARGET */ sub_35258( uParam0,  /* PLAYER_PED_ID */ sub_4651() );
    return;
}

/* PED_ARRAY_SET_REGISTER_TARGET */ void sub_35258(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ( /* IS_PED_VALID */ sub_13637( (uParam0^)[I] ))
        {
             /* PED_SET_REGISTER_TARGET */ sub_35341( ref (uParam0^)[I], uParam1 );
        }
    }
    return;
}

/* PED_SET_REGISTER_TARGET */ void sub_35341(unknown uParam0, unknown uParam1)
{
    if (( /* IS_PED_VALID */ sub_13637( uParam1 )) AND ( /* IS_PED_VALID */ sub_13637( (uParam0^) )))
    {
        REGISTER_TARGET( (uParam0^), uParam1 );
    }
    return;
}

/* PED_ARRAY_SET_LOCKED_ON_PLAYER */ void sub_35449(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* PED_SET_LOCKED_ON_PLAYER */ sub_35514( ref (uParam0^)[I] );
    }
    return;
}

/* PED_SET_LOCKED_ON_PLAYER */ void sub_35514(unknown uParam0)
{
    if (( /* IS_MAX_VALID */ sub_13607()) AND ( /* IS_PED_VALID */ sub_13637( (uParam0^) )))
    {
         /* PED_SET_LOCKED_ON_PED */ sub_35577( uParam0,  /* PLAYER_PED_ID */ sub_4651() );
    }
    return;
}

/* PED_SET_LOCKED_ON_PED */ void sub_35577(unknown uParam0, unknown uParam1)
{
    if (( /* IS_PED_VALID */ sub_13637( uParam1 )) AND ( /* IS_PED_VALID */ sub_13637( (uParam0^) )))
    {
        SET_LOCKED_TARGET( (uParam0^), uParam1 );
    }
    return;
}

/* PED_SET_ALERTNESS */ void sub_35687(unknown uParam0, unknown uParam1)
{
    if ( /* IS_PED_VALID */ sub_13637( (uParam0^) ))
    {
        SET_PED_ALERTNESS( (uParam0^), uParam1 );
    }
    return;
}

/* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ void sub_35774(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

/* PED_ARRAY_SET_COMBAT_MOVEMENT */ void sub_35909(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* PED_SET_COMBAT_MOVEMENT */ sub_35975( ref (uParam0^)[I], uParam1 );
    }
    return;
}

/* PED_SET_COMBAT_MOVEMENT */ void sub_35975(unknown uParam0, unknown uParam1)
{
    if ( /* IS_PED_VALID */ sub_13637( (uParam0^) ))
    {
        SET_PED_COMBAT_MOVEMENT( (uParam0^), uParam1 );
    }
    return;
}

/* MAL_SETACTINT */ void sub_36073(unknown uParam0, unknown uParam1, unknown uParam2)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        PED_SET_ACTION_INTENTION( uParam0, uParam1, uParam2, g_U657 );
    }
    return;
}

/* P_DEACTIVATEPEDARRAY */ void sub_36284(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
         /* P_DEACTIVATEPED */ sub_36338( (uParam0^)[I] );
    }
    return;
}

/* P_DEACTIVATEPED */ void sub_36338(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 1 );
        SET_PED_VISIBLE( uParam0, 0 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 0 );
        FREEZE_PED_POSITION( uParam0, 1 );
        SET_PED_COLLISION( uParam0, 0 );
        SET_PED_PROOFS( uParam0, 1, 1, 1, 1, 1 );
    }
    return;
}

/* P_CREATE_PIT_CHARGER */ void sub_36480()
{
     /* WRITESCRIPTLOG */ sub_1201( "BSW", "P_CREATE_PIT_CHARGER", "***" );
     /* P_SETUP_AI_GROUP */ sub_32708( ref l_U1737, 1.00000000, 0 );
     /* PED_INITIALIZE */ sub_33148( ref l_U1709, ref l_U1722, -1013714740, "AIT_NORMAL", 0, 25000, 2, 0, 25000 );
     /* P_QUICK_ADD_PED_TO_GROUP */ sub_34129( l_U1722, ref l_U1737 );
     /* F_GIVEPEDWEAPONTOHOLSTER */ sub_10634( l_U1722, -612753081, 1, 25000, 0 );
     /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1722, g_U1338 );
    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1722, 1 );
     /* PED_SET_BLOCKING_OF_PED_TARGETTING */ sub_36676( ref l_U1722, 1 );
    SET_PED_COMBAT_ATTRIBUTES( l_U1722, 8192, 0 );
    if (DOES_GROUP_EXIST( l_U1737._fU0 ))
    {
        SET_GROUP_LAST_ALIVE_AS_LONE_WOLF( l_U1737._fU0, 0 );
    }
    SET_PED_NAME_DEBUG( l_U1722, "PitCheckpointCharger" );
     /* P_DEACTIVATEPED */ sub_36338( l_U1722 );
    return;
}

/* PED_SET_BLOCKING_OF_PED_TARGETTING */ void sub_36676(unknown uParam0, unknown uParam1)
{
    if ( /* IS_PED_VALID */ sub_13637( (uParam0^) ))
    {
        SET_BLOCKING_OF_PED_TARGETTING( (uParam0^), uParam1 );
    }
    return;
}

/* P_ACTIVATEPED */ void sub_36872(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 0 );
        SET_PED_VISIBLE( uParam0, 1 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 1 );
        FREEZE_PED_POSITION( uParam0, 0 );
        SET_PED_COLLISION( uParam0, 1 );
        SET_PED_PROOFS( uParam0, 0, 0, 0, 0, 0 );
    }
    return;
}

/* P_ACTIVATEPEDARRAY */ void sub_36989(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
         /* P_ACTIVATEPED */ sub_36872( (uParam0^)[I] );
    }
    return;
}

/* SET_HOTEL_WEATHER_AND_TOD */ void sub_37100(unknown uParam0)
{
    int iVar3;
    string sVar4;

    switch (uParam0)
    {
        case 20:
        case 0:
        iVar3 = 20;
        sVar4 = "SUNNY";
        break;
        case 1:
        iVar3 = 12;
        sVar4 = "SUNNY";
        break;
        case 2:
        case 3:
        case 4:
        iVar3 = 9;
        sVar4 = "SUNNY";
        break;
        case 5:
        iVar3 = 12;
        sVar4 = "SUNNY";
        break;
        case 6:
        case 7:
        case 8:
        case 9:
        iVar3 = 9;
        sVar4 = "SUNNY_WINDY";
        break;
        case 10:
        iVar3 = 12;
        sVar4 = "SUNNY_WINDY";
        break;
        default:
        iVar3 = 12;
        sVar4 = "SUNNY";
        break;
    }
    PRINTSTRING( "SET_HOTEL_WEATHER_AND_TOD - checkpoint #" );
    PRINTINT( uParam0 );
    PRINTSTRING( " hour: " );
    PRINTINT( iVar3 );
    PRINTSTRING( " weather: " );
    PRINTSTRING( sVar4 );
    PRINTNL();
    SET_TIME_OF_DAY( iVar3, 0 );
    FREEZE_TIME_OF_DAY( iVar3, 0 );
    SET_WEATHER_TYPE_NOW_PERSIST( sVar4 );
    SET_WEATHER_TRANSITION_IMMEDIATE( 1 );
    return;
}

/* HANDLE_MID_03_BLENDOUT */ void sub_37602()
{
    int Result;

    Result = 0;
    switch (l_U329)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_1201( "bsw", "HANDLE_MID_03_BLENDOUT - BLENDOUT_START", 0 );
        if ((ISEQ_QUERY_STATE( 262571667, 3 )) == 0)
        {
             /* WRITESCRIPTLOG */ sub_1201( "bsw", "starting HANDLE_MID_05B_BLENDOUT WITHOUT the cutscene", 0 );
             /* LOADISEQ */ sub_23083( 262571667, 1 );
             /* TELEPORTPED */ sub_37851(  /* PLAYER_PED_ID */ sub_4651(), g_U1020[2], g_U1123[2] );
            ISEQ_REGISTER_ENTITY( 262571667, "max",  /* PLAYER_PED_ID */ sub_4651(), 0 );
            ISEQ_START( 262571667 );
             /* NIS_PRE_SETUP */ sub_37963( 1, 0, 0, 1 );
            CAMERA_PLAY_ANIMATED( "LEVEL_S_HOTEL_CP_02", "B_OUT_MID_03_HOTEL_FWD_CAM", 1, 26.81000000, -53.22000000, 14.70000000, 0.00000000, 0, 0 );
        }
        if (NOT l_U254._fU0)
        {
             /* P_SAVE_HOTEL_PLAYER_DATA_CHECKPOINT */ sub_24432( ref l_U254, g_U855,  /* PLAYER_PED_ID */ sub_4651(), g_U1020[g_U855], g_U1123[g_U855], g_U1158[g_U855], g_U1193[g_U855], 0 );
        }
         /* CREATETIMER */ sub_5628( ref l_U2637, l_U2655, 1, 0 );
         /* STARTTIMER */ sub_5778( ref l_U2637 );
         /* CREATETIMER */ sub_5628( ref l_U2646, l_U2656, 1, 0 );
         /* STARTTIMER */ sub_5778( ref l_U2646 );
        DO_SCREEN_FADE_IN( 0 );
        l_U329 = 1;
        break;
        case 1:
        l_U329 = 2;
        break;
        case 2:
        if ( /* ISTIMERDONE */ sub_5911( ref l_U2646 ))
        {
             /* WRITESCRIPTLOG */ sub_1201( "bsw", "simulating player gait", 0 );
            SIMULATE_PLAYER_INPUT_GAIT(  /* PLAYER_ID */ sub_4689(), 2, l_U2657, 0 );
            PLAY_SOUND_FROM_COORD( -1, "CHAINLINK_LARGE_DOOR_CLOSE", l_U332 );
        }
        if ( /* ISTIMERDONE */ sub_5911( ref l_U2637 ))
        {
            SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U1158[2], 1065353216, 0 );
            SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U1193[2], 1065353216, 0 );
            CAMERA_FREEZE_FRAME( 1, 1000, 0, 0 );
            CAMERA_ANIMATED_STOP( 0, 0 );
            Result = 1;
             /* NIS_POST_SETUP */ sub_38578( 1, 1 );
        }
        break;
    }
    return Result;
}

/* TELEPORTPED */ void sub_37851(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

/* NIS_PRE_SETUP */ void sub_37963(int iParam0, int iParam1, unknown uParam2, boolean bParam3)
{
    END_POSTFX_BLENDER( 12, 0 );
    if (bParam3)
    {
        STOP_ALL_IMAGEFX( 0 );
    }
    SET_WIDESCREEN_BORDERS( 1, 500 );
    DISPLAY_HUD( 0 );
    if (iParam0 == 1)
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )))
        {
            SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_4689(), 0, uParam2 );
            SET_PED_DUCKING(  /* PLAYER_PED_ID */ sub_4651(), 0 );
            if (iParam1 == 1)
            {
                CLEAR_PED_TASKS_IMMEDIATELY(  /* PLAYER_PED_ID */ sub_4651() );
            }
            SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_4651(), 1 );
        }
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    return;
}

/* NIS_POST_SETUP */ void sub_38578(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )))
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_4689(), 1, 0 );
        SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_4651(), 0 );
        if (bParam0)
        {
             /* P_MAX_RELOAD_WEAPONS */ sub_38676();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

/* P_MAX_RELOAD_WEAPONS */ void sub_38676()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_4651(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_4651(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP(  /* PLAYER_PED_ID */ sub_4651(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP(  /* PLAYER_PED_ID */ sub_4651(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

/* P_SETUP_ELEVATOR_DOOR */ void sub_38902()
{
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_SETUP_ELEVATOR_DOOR", "***" );
     /* CLEANOBJECT */ sub_7189( l_U331 );
    l_U331 =  /* CREATEOBJECT */ sub_30429( -1591126843, l_U332, 0, 0, -30.00000000, 0, 0, 0 );
    ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U331, ref g_U1298 );
    FREEZE_OBJECT_POSITION( l_U331, 1 );
    return;
}

/* P_CREATE_VIG01 */ void sub_39058()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_CREATE_VIG01", "***" );
     /* LOADISEQ */ sub_23083( 1082349389, 1 );
    for ( I = 0; I <= 1; I++ )
    {
        if (I == 0)
        {
             /* PED_INITIALIZE */ sub_33148( ref l_U1365[I], ref l_U1392[I], -612753081, "AIT_NORMAL", 0, 25000, 2, 0, 25000 );
            REMOVE_ALL_PED_WEAPONS( l_U1392[I] );
             /* F_GIVEPEDWEAPONTOHOLSTER */ sub_10634( l_U1392[I], -612753081, 1, 25000, 1 );
            SET_PED_SEEING_RANGE( l_U1392[I], 7.00000000, 75 );
        }
        else
        {
             /* PED_INITIALIZE */ sub_33148( ref l_U1365[I], ref l_U1392[I], -612753081, "AIT_NORMAL", 0, 25000, 2, 0, 25000 );
            REMOVE_ALL_PED_WEAPONS( l_U1392[I] );
             /* F_GIVEPEDWEAPONTOHOLSTER */ sub_10634( l_U1392[I], -612753081, 1, 25000, 1 );
            if ( /* IS_MAX_VALID */ sub_13607())
            {
                SET_PED_PRIMARY_LOOKAT( l_U1392[I],  /* PLAYER_PED_ID */ sub_4651() );
            }
        }
         /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1392[I], g_U1322 );
         /* PED_SET_ALERTNESS */ sub_35687( ref l_U1392[I], 0 );
        SET_PED_HEARING_RANGE( l_U1392[I], 6.00000000 );
        TASK_STAND_STILL( l_U1392[I], -1 );
        SET_PED_FLAG_BLOCK_GORE_REACTION( l_U1392[I], 1 );
    }
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_35774( ref l_U1392, "VIG_01-" );
    l_U1426 =  /* CREATEOBJECT */ sub_30429( -754907209, l_U1427, l_U1430, 0, 0, 0 );
    ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1426, ref g_U1322 );
    l_U1433 =  /* CREATEPLACEMENT */ sub_21749( 1676080365, l_U1435, l_U1438, 0, 0, 0, 1119092736 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1433, ref g_U1322 );
     /* P_CREATE_GRENADE_LAUNCHER_PICKUP */ sub_39604();
    l_U1451 =  /* CREATEOBJECT */ sub_30429( -1490597557, l_U1454, l_U1457, 0, 0, 0 );
    ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1451, ref g_U1322 );
    l_U1452 =  /* CREATEOBJECT */ sub_30429( 1426433289, l_U1460, l_U1463, 0, 0, 0 );
    ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1452, ref g_U1322 );
    l_U1453 =  /* CREATEOBJECT */ sub_30429( -1166741530, l_U1466, l_U1469, 0, 0, 0 );
    ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1453, ref g_U1322 );
    return;
}

/* P_CREATE_GRENADE_LAUNCHER_PICKUP */ void sub_39604()
{
    unknown uVar2;

     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_CREATE_GRENADE_LAUNCHER_PICKUP", 0 );
     /* CLEANPLACEMENT */ sub_7328( l_U384 );
    l_U384 =  /* CREATEPLACEMENT */ sub_21749( -64228399, 26.98000000, -37.14000000, 14.12200000, -0.77000000, 0.00000000, 0.00000000, 0, 0, 0, 1119092736 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U384, ref g_U1322 );
    return;
}

/* P_CREATE_PROPANE_ROOM_PEDS */ void sub_39931()
{
    int I;
    unknown uVar3;

     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_CREATE_PROPANE_ROOM_PEDS", "***" );
     /* P_SETUP_AI_GROUP */ sub_32708( ref l_U1737, 1.00000000, 0 );
    for ( I = 0; I <= 3; I++ )
    {
         /* PED_INITIALIZE */ sub_33148( ref l_U1565[I], ref l_U1618[I], -1013714740, "AIT_NORMAL", 0, 25000, 3, -612753081, 25000 );
         /* P_QUICK_ADD_PED_TO_GROUP */ sub_34129( l_U1618[I], ref l_U1737 );
         /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1618[I], g_U1330 );
    }
    for ( I = 1; I <= 2; I++ )
    {
        uVar3 = GET_WEAPON_FROM_HAND( l_U1618[I], 0, 0 );
        if (GET_DOES_WEAPON_EXIST( uVar3 ))
        {
            ENABLE_WEAPON_ATTACHMENT( uVar3, 14, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar3, 14, 1 );
            SET_WEAPON_LIGHT_DATA_BY_NAME( GET_WEAPON_FROM_HAND( l_U1618[I], 0, 0 ), "Flashlight_Hotel" );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "ERROR: Can't set light data for:", 0 );
             /* WRITE_INT */ sub_1864( I );
        }
    }
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_35774( ref l_U1618, "PropaneRoom" );
     /* PED_ARRAY_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_40353( ref l_U1618, 1 );
     /* P_DEACTIVATEPEDARRAY */ sub_36284( ref l_U1618 );
    if (NOT (IS_PED_DEAD( l_U1618[0] )))
    {
        SET_PED_AS_ONE_SHOT_KILL( l_U1618[0], 1 );
    }
    return;
}

/* PED_ARRAY_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ void sub_40353(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_35032( ref (uParam0^)[I], uParam1 );
    }
    return;
}

/* P_CREATE_PROPANE_ROOM_PROPS */ void sub_40514()
{
     /* MAL_RECREATEOBJECTWITHNOROTATIONINROOM */ sub_29754( ref l_U372, g_U1443, l_U373, ref g_U1330, 1, 0 );
    if (DOES_OBJECT_EXIST( l_U372 ))
    {
        SET_OBJECT_HEADING( l_U372, -45.00000000 );
        SET_OBJECT_ONLY_DAMAGED_BY_PLAYER( l_U372, 1 );
        CAMERA_CAN_TARGET_OBJECT( 1, l_U372 );
    }
     /* MAL_RECREATEOBJECTWITHNOROTATIONINROOM */ sub_29754( ref l_U376, 2019393516, -4.96300000, -6.59900000, 13.15300000, ref g_U1330, 1, 0 );
    SET_OBJECT_INVINCIBLE( l_U376, 1 );
     /* MAL_RECREATEOBJECTWITHNOROTATIONINROOM */ sub_29754( ref l_U377, -1446636735, 23.02300000, 43.20200000, 15.43900000, ref g_U1330, 1, 0 );
    SET_OBJECT_INVINCIBLE( l_U377, 1 );
     /* MAL_RECREATEOBJECTWITHNOROTATIONINROOM */ sub_29754( ref l_U378, -1835643592, -6, -8, 13, ref g_U1330, 1, 0 );
    SET_OBJECT_INVINCIBLE( l_U378, 1 );
    return;
}

/* P_INITIALIZE_IMAGEFX_MID_CP_02 */ void sub_40786()
{
     /* WRITESCRIPTLOG */ sub_1201( "CCB", "P_INITIALIZE_IMAGEFX_MID_CP_02", 0 );
     /* P_INIT_IMAGEFX */ sub_40878( ref l_U2481 );
    l_U2481[0]._fU4 = "DOUBLE_TINT_BLUE_FLASH";
    l_U2481[0]._fU12 = 0;
    l_U2481[0]._fU8 = 4;
    l_U2481[0]._fU32 = 0;
    l_U2481[1]._fU4 = "FLASH_WHITE";
    l_U2481[1]._fU12 = 600;
    l_U2481[1]._fU20 = 1;
    l_U2481[1]._fU8 = 4;
    l_U2481[1]._fU32 = 0;
    l_U2481[2]._fU4 = "TRIPLE_IMAGE_BLUR_DOWN_2";
    l_U2481[2]._fU8 = 4;
    l_U2481[2]._fU32 = 0;
    l_U2481[3]._fU4 = "DOUBLE_TINT_BLUE_FLASH_LONG";
    l_U2481[3]._fU12 = 750;
    l_U2481[3]._fU16 = 1050;
    l_U2481[3]._fU24 = 1;
    l_U2481[3]._fU8 = 4;
    l_U2481[3]._fU32 = 0;
    l_U2481[4]._fU4 = "BLUR_ZOOM_LIGHT_FAST";
    l_U2481[4]._fU12 = 1900;
    l_U2481[4]._fU8 = 4;
    l_U2481[4]._fU32 = 0;
    l_U204 = 0;
    return;
}

/* P_INIT_IMAGEFX */ void sub_40878(unknown uParam0)
{
    int I;

     /* WRITESCRIPTLOG */ sub_1201( "CO", "P_INIT_IMAGEFX", 0 );
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        (uParam0^)[I]._fU4 = "";
        (uParam0^)[I]._fU12 = 0;
        (uParam0^)[I]._fU16 = 0;
        (uParam0^)[I]._fU20 = 0;
        (uParam0^)[I]._fU24 = 0;
        (uParam0^)[I]._fU28 = 0;
        (uParam0^)[I]._fU32 = 1;
    }
    return;
}

/* P_HANDLE_VIG01 */ void sub_41505()
{
    unknown uVar2;
    unknown uVar3;

    switch (l_U1407)
    {
        case 0:
        if ( /* F_ISPLAYERINTRIGGERBOX */ sub_41582( l_U428 ))
        {
             /* PED_ARRAY_CLEAR_PED_TASKS_IMMEDIATELY */ sub_41647( ref l_U1392 );
             /* PED_ARRAY_SET_ONE_SHOT_KILL */ sub_41768( ref l_U1392, 1 );
            ISEQ_REGISTER_ENTITY( 1082349389, "cp1", l_U1392[0], 0 );
            ISEQ_REGISTER_ENTITY( 1082349389, "cp2", l_U1392[1], 0 );
             /* TELEPORTPED */ sub_37851( l_U1392[0], l_U1365[0]._fU0, l_U1365[0]._fU12 );
             /* TELEPORTPED */ sub_37851( l_U1392[1], l_U1365[1]._fU0, l_U1365[1]._fU12 );
            SET_PED_PROP_INDEX( l_U1392[0], 13, 0, 0, 255 );
            SET_PED_PROP_INDEX( l_U1392[1], 13, 1, 0, 255 );
            ISEQ_START( 1082349389 );
             /* P_DIAL_HOTEL_VIG01 */ sub_42055( 0 );
             /* P_CREATE_POST_VIG01_ENEMIES */ sub_43771();
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_VIG01 - Setup done: Going to State eHIS_PLAYING", 0 );
            l_U1407 = 2;
        }
        break;
        case 2:
        if ( /* IS_PED_VALID */ sub_13637( l_U1392[0] ))
        {
            if ( /* F_IS_ACTION_INTENTION_STATUS_REACHED */ sub_44304( l_U1392[0], 47, 1 ))
            {
                l_U1449 =  /* CREATEOBJECT */ sub_30429( 1426433289, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_PROP_POSITION( l_U1392[0], 13 ), "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PEP_PROP_ROTATION( l_U1392[0], 13 ), 0, 0, 0 );
                ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1449, ref g_U1322 );
                CLEAR_PED_PROP( l_U1392[0], 13 );
                l_U1447 = l_U1449;
                 /* CREATETIMER */ sub_5628( ref l_U1472, l_U1490, 1, 0 );
                 /* STARTTIMER */ sub_5778( ref l_U1472 );
            }
            if ( /* F_IS_ACTION_INTENTION_STATUS_REACHED */ sub_44304( l_U1392[0], 48, 3 ))
            {
                 /* CLEANOBJECT */ sub_7189( l_U1451 );
                SET_PED_PROP_INDEX( l_U1392[0], 13, 1, 0, 255 );
            }
            if ( /* F_IS_ACTION_INTENTION_STATUS_REACHED */ sub_44304( l_U1392[0], 48, 1 ))
            {
                l_U1451 =  /* CREATEOBJECT */ sub_30429( -1490597557, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_PROP_POSITION( l_U1392[0], 13 ), "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PEP_PROP_ROTATION( l_U1392[0], 13 ), 0, 0, 0 );
                ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1451, ref g_U1322 );
                CLEAR_PED_PROP( l_U1392[0], 13 );
                l_U1447 = l_U1451;
                 /* CREATETIMER */ sub_5628( ref l_U1472, l_U1490, 1, 0 );
                 /* STARTTIMER */ sub_5778( ref l_U1472 );
            }
            if ( /* F_IS_ACTION_INTENTION_STATUS_REACHED */ sub_44304( l_U1392[0], 49, 3 ))
            {
                 /* CLEANOBJECT */ sub_7189( l_U1452 );
                SET_PED_PROP_INDEX( l_U1392[0], 13, 0, 0, 255 );
            }
            if ( /* F_IS_ACTION_INTENTION_STATUS_REACHED */ sub_44304( l_U1392[0], 49, 1 ))
            {
                l_U1452 =  /* CREATEOBJECT */ sub_30429( 1426433289, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_PROP_POSITION( l_U1392[0], 13 ), "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PEP_PROP_ROTATION( l_U1392[0], 13 ), 0, 0, 0 );
                ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1452, ref g_U1322 );
                CLEAR_PED_PROP( l_U1392[0], 13 );
                l_U1447 = l_U1452;
                 /* CREATETIMER */ sub_5628( ref l_U1472, l_U1490, 1, 0 );
                 /* STARTTIMER */ sub_5778( ref l_U1472 );
            }
            if ( /* F_IS_ACTION_INTENTION_STATUS_REACHED */ sub_44304( l_U1392[0], 50, 3 ))
            {
                 /* CLEANOBJECT */ sub_7189( l_U1453 );
                SET_PED_PROP_INDEX( l_U1392[0], 13, 2, 0, 255 );
            }
            if ( /* F_IS_ACTION_INTENTION_STATUS_REACHED */ sub_44304( l_U1392[0], 50, 1 ))
            {
                CLEAR_PED_PROP( l_U1392[0], 13 );
                SET_PED_PROP_INDEX( l_U1392[0], 12, 2, 0, 255 );
            }
            if ( /* F_IS_ACTION_INTENTION_STATUS_REACHED */ sub_44304( l_U1392[0], 51, 1 ))
            {
                l_U1453 =  /* CREATEOBJECT */ sub_30429( -1166741530, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_PROP_POSITION( l_U1392[0], 12 ), "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PEP_PROP_ROTATION( l_U1392[0], 12 ), 0, 0, 0 );
                ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1453, ref g_U1322 );
                CLEAR_PED_PROP( l_U1392[0], 12 );
                l_U1447 = l_U1453;
                 /* CREATETIMER */ sub_5628( ref l_U1472, l_U1490, 1, 0 );
                 /* STARTTIMER */ sub_5778( ref l_U1472 );
            }
            if ( /* F_IS_ACTION_INTENTION_STATUS_REACHED */ sub_44304( l_U1392[0], 58, 3 ))
            {
                 /* P_SET_HAND_WEAPON_VISIBILITY */ sub_45269( l_U1392[0], 0, 1 );
            }
        }
        if ( /* IS_PED_VALID */ sub_13637( l_U1392[1] ))
        {
            if ( /* F_IS_ACTION_INTENTION_STATUS_REACHED */ sub_44304( l_U1392[1], 47, 1 ))
            {
                l_U1450 =  /* CREATEOBJECT */ sub_30429( -1490597557, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_PROP_POSITION( l_U1392[1], 13 ), "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PEP_PROP_ROTATION( l_U1392[1], 13 ), 0, 0, 0 );
                ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1450, ref g_U1322 );
                CLEAR_PED_PROP( l_U1392[1], 13 );
                l_U1448 = l_U1450;
                 /* CREATETIMER */ sub_5628( ref l_U1481, l_U1490, 1, 0 );
                 /* STARTTIMER */ sub_5778( ref l_U1481 );
            }
            if ( /* F_IS_ACTION_INTENTION_STATUS_REACHED */ sub_44304( l_U1392[1], 57, 3 ))
            {
                l_U1434 =  /* CREATEOBJECT */ sub_30429( 547887525, l_U1435, l_U1438, 0, 0, 0 );
                ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1434, ref g_U1322 );
                ATTACH_OBJECT_TO_PED( l_U1434, l_U1392[1], 25310, l_U1441, l_U1444, 0 );
                 /* CLEANPLACEMENT */ sub_7328( l_U1433 );
            }
            if ( /* F_IS_ACTION_INTENTION_STATUS_REACHED */ sub_44304( l_U1392[1], 58, 3 ))
            {
                 /* CLEANOBJECT */ sub_7189( l_U1434 );
                uVar2 =  /* F_GIVEPEDWEAPON */ sub_11429( l_U1392[1], -1013714740, 25000, 0, 0 );
                ENABLE_WEAPON_ATTACHMENT( uVar2, 14, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar2, 14, 1 );
                l_U1406 = 1;
            }
        }
        if ( /* ISTIMERDONE */ sub_5911( ref l_U1472 ))
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "tmrCP1ShortDelay is DONE", "***" );
             /* P_SET_DROPPED_OBJECT_DYNAMIC */ sub_45924( ref l_U1447 );
        }
        if ( /* ISTIMERDONE */ sub_5911( ref l_U1481 ))
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "tmrCP2ShortDelay is DONE", "***" );
             /* P_SET_DROPPED_OBJECT_DYNAMIC */ sub_45924( ref l_U1448 );
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_14332( ref l_U449, 0 ))
        {
            if ( /* IS_PED_VALID */ sub_13637( l_U1392[1] ))
            {
                 /* WRITESCRIPTLOG */ sub_1201( "SBA", "F_SHOULD_VIG01_ENEMY_SPOT_MAX: reset the rifle enemy's sense ranges", 0 );
                SET_PED_SEEING_RANGE( l_U1392[1], 60.00000000, 75 );
                SET_PED_HEARING_RANGE( l_U1392[1], 60.00000000 );
            }
        }
        if (NOT l_U1402)
        {
            if ( /* F_SHOULD_VIG01_ENEMY_SPOT_MAX */ sub_46326( l_U1392[0] ))
            {
                 /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_VIG01: CP[0] aware of player, drawing weapon", 0 );
                 /* P_DROP_ALL_PED_PROPS */ sub_46802( l_U1392[0] );
                if ( /* IS_PED_VALID */ sub_13637( l_U1392[0] ))
                {
                    SELECT_WEAPON_TO_HAND( l_U1392[0], GET_WEAPON_FROM_HOLSTER( l_U1392[0], 1 ), 0, 0 );
                }
                if (( /* IS_SPEECH_CURRENTLY_PLAYING */ sub_47133( l_U1491 )) AND (NOT l_U1403))
                {
                     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_VIG01(CP0): Killing speech", "***" );
                     /* KILL_SPEECH */ sub_47417( ref l_U1491, 0 );
                     /* P_DIAL_HOTEL_VIG01 */ sub_42055( 1 );
                }
                l_U1402 = 1;
            }
            else if (IS_PED_DEAD( l_U1392[0] ))
            {
                 /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_VIG01: CP[0] is dead, setting 'aware'", 0 );
                l_U1402 = 1;
            }
        }
        if (NOT l_U1403)
        {
            if ( /* F_SHOULD_VIG01_ENEMY_SPOT_MAX */ sub_46326( l_U1392[1] ))
            {
                 /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_VIG01: CP[1] aware of player, drawing weapon", 0 );
                 /* P_DROP_ALL_PED_PROPS */ sub_46802( l_U1392[1] );
                if (( /* IS_PED_VALID */ sub_13637( l_U1392[1] )) AND (NOT l_U1406))
                {
                    if (NOT (DOES_PLACEMENT_EXIST( l_U1433 )))
                    {
                         /* F_GIVEPEDWEAPON */ sub_11429( l_U1392[1], -1013714740, 25000, 0, 0 );
                         /* CLEANOBJECT */ sub_7189( l_U1434 );
                    }
                    else
                    {
                        SELECT_WEAPON_TO_HAND( l_U1392[1], GET_WEAPON_FROM_HOLSTER( l_U1392[1], 1 ), 0, 0 );
                    }
                }
                if (( /* IS_SPEECH_CURRENTLY_PLAYING */ sub_47133( l_U1491 )) AND (NOT l_U1402))
                {
                     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_VIG01(CP1): Killing speech", "***" );
                     /* KILL_SPEECH */ sub_47417( ref l_U1491, 0 );
                     /* P_DIAL_HOTEL_VIG01 */ sub_42055( 1 );
                }
                if ( /* IS_PED_VALID */ sub_13637( l_U1392[0] ))
                {
                    SET_PED_SEEING_RANGE( l_U1392[0], 60.00000000, 75 );
                    SET_PED_HEARING_RANGE( l_U1392[0], 60.00000000 );
                }
                l_U1403 = 1;
            }
            else if (IS_PED_DEAD( l_U1392[1] ))
            {
                 /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_VIG01: CP[1] is dead, setting 'aware'", 0 );
                l_U1403 = 1;
                if ( /* IS_PED_VALID */ sub_13637( l_U1392[0] ))
                {
                    SET_PED_SEEING_RANGE( l_U1392[0], 60.00000000, 75 );
                    SET_PED_HEARING_RANGE( l_U1392[0], 60.00000000 );
                }
            }
        }
        if ((NOT l_U1404) AND (l_U1402))
        {
            if ( /* IS_PED_VALID */ sub_13637( l_U1392[0] ))
            {
                if (GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HAND( l_U1392[0], 0, 0 ) ))
                {
                     /* MAL_WRITESCRIPTLOG */ sub_15276( "piVIG01_CP[0] has his weapon " );
                     /* PED_SET_REGISTER_TARGET_PLAYER */ sub_48343( ref l_U1392[1] );
                    SET_PED_AS_ONE_SHOT_KILL( l_U1392[0], 0 );
                    l_U1404 = 1;
                }
            }
            else
            {
                 /* PED_SET_REGISTER_TARGET_PLAYER */ sub_48343( ref l_U1392[1] );
                 /* MAL_WRITESCRIPTLOG */ sub_15276( "piVIG01_CP[0] is dead " );
                l_U1404 = 1;
            }
        }
        if ((NOT l_U1405) AND (l_U1403))
        {
            if ( /* IS_PED_VALID */ sub_13637( l_U1392[1] ))
            {
                uVar3 = GET_WEAPON_FROM_HAND( l_U1392[1], 0, 0 );
                if (GET_DOES_WEAPON_EXIST( uVar3 ))
                {
                     /* MAL_WRITESCRIPTLOG */ sub_15276( "piVIG01_CP[1] has his weapon " );
                     /* PED_SET_REGISTER_TARGET_PLAYER */ sub_48343( ref l_U1392[0] );
                    SET_PED_AS_ONE_SHOT_KILL( l_U1392[1], 0 );
                    l_U1405 = 1;
                }
            }
            else
            {
                 /* PED_SET_REGISTER_TARGET_PLAYER */ sub_48343( ref l_U1392[0] );
                 /* MAL_WRITESCRIPTLOG */ sub_15276( "piVIG01_CP[1] is dead " );
                l_U1405 = 1;
            }
        }
        if ((l_U1405) AND ((l_U1404) AND ((l_U1403) AND (l_U1402))))
        {
            if ( /* IS_PED_VALID */ sub_13637( l_U1392[0] ))
            {
                SET_PED_SEEING_RANGE( l_U1392[0], 60.00000000, 75 );
                SET_PED_HEARING_RANGE( l_U1392[0], 60.00000000 );
            }
            if ( /* IS_PED_VALID */ sub_13637( l_U1392[1] ))
            {
                SET_PED_SEEING_RANGE( l_U1392[1], 60.00000000, 75 );
                SET_PED_HEARING_RANGE( l_U1392[1], 60.00000000 );
            }
            l_U208 = 5;
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_VIG01: both peds armed and aware of player - going to eHIS_FINISHED", 0 );
            l_U1407 = 5;
        }
        break;
        case 5:
        SET_PED_FLAG_BLOCK_GORE_REACTION( l_U1392[0], 0 );
        SET_PED_FLAG_BLOCK_GORE_REACTION( l_U1392[1], 0 );
        break;
        case -1: break;
    }
    return;
}

/* F_ISPLAYERINTRIGGERBOX */ void sub_41582(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20)
{
    return  /* F_ISPEDINTRIGGERBOX */ sub_14408(  /* PLAYER_PED_ID */ sub_4651(), uParam0 );
}

/* PED_ARRAY_CLEAR_PED_TASKS_IMMEDIATELY */ void sub_41647(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ( /* IS_PED_VALID */ sub_13637( (uParam0^)[I] ))
        {
            CLEAR_PED_TASKS_IMMEDIATELY( (uParam0^)[I] );
        }
    }
    return;
}

/* PED_ARRAY_SET_ONE_SHOT_KILL */ void sub_41768(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ( /* IS_PED_VALID */ sub_13637( (uParam0^)[I] ))
        {
            SET_PED_AS_ONE_SHOT_KILL( (uParam0^)[I], uParam1 );
        }
    }
    return;
}

/* P_DIAL_HOTEL_VIG01 */ void sub_42055(boolean bParam0)
{
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_DIAL_HOTEL_VIG01", 0 );
    if ((NOT (IS_PED_DEAD( l_U1392[1] ))) AND (NOT (IS_PED_DEAD( l_U1392[0] ))))
    {
        if (NOT bParam0)
        {
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_42169( ref l_U1491 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_42293( 1, l_U1392[1], "M12_CP_01_Avg", ref l_U1491, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_42293( 2, l_U1392[0], "M12_CP_02_MUS", ref l_U1491, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_42575( "SHOT_VIG01E", ref l_U1491, 7, 1 );
        }
        else
        {
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_42169( ref l_U1501 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_42293( 1, l_U1392[1], "M12_CP_01_Avg", ref l_U1501, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_42293( 2, l_U1392[0], "M12_CP_02_MUS", ref l_U1501, 2, 0 );
             /* PLAY_SINGLE_SPEECH_FROM_LINE */ sub_43581( "SHOT_VIG01E", 11, 1, ref l_U1501, 7, 1 );
        }
    }
    return;
}

/* RESET_SCRIPT_SPEECH_STRUCT */ void sub_42169(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

/* ADD_PED_FOR_SCRIPT_SPEECH */ void sub_42293(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

/* PLAY_SINGLE_SPEECH */ void sub_42575(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return  /* PLAY_SINGLE_SPEECH_FROM_BLOCK */ sub_42620( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

/* PLAY_SINGLE_SPEECH_FROM_BLOCK */ void sub_42620(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return  /* PLAYSPEECHMAIN */ sub_42707( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

/* PLAYSPEECHMAIN */ int sub_42707(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT ( /* CANTHISSPEECHBEPLAYED */ sub_42759( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
     /* COPYHIDDENSPEECHSTUCT */ sub_43277( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

/* CANTHISSPEECHBEPLAYED */ int sub_42759(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

/* COPYHIDDENSPEECHSTUCT */ void sub_43277(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

/* PLAY_SINGLE_SPEECH_FROM_LINE */ void sub_43581(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    return  /* PLAY_SINGLE_SPEECH_FROM_LINE_FROM_BLOCK */ sub_43640( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3, uParam4, uParam5 );
}

/* PLAY_SINGLE_SPEECH_FROM_LINE_FROM_BLOCK */ void sub_43640(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6)
{
    char[16] cVar9;
    char[12] cVar13;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;

    StrCopy( ref cVar9, uParam1, 16 );
    array(ref cVar13, 2);
    StrCopy( ref cVar13[0], uParam0, 16 );
    StrCopy( ref cVar13[1], "END", 16 );
    return  /* PLAYSPEECHMAIN */ sub_42707( ref cVar13, uParam4, uParam5, 0, 1, uParam3, uParam2, ref cVar9, uParam6 );
}

/* P_CREATE_POST_VIG01_ENEMIES */ void sub_43771()
{
    int I;
    unknown uVar3;

     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_CREATE_POST_VIG01_ENEMIES", "***" );
     /* P_SETUP_AI_GROUP */ sub_32708( ref l_U1551, 1.00000000, 0 );
    for ( I = 0; I <= (l_U1548 - 1); I++ )
    {
         /* PED_INITIALIZE */ sub_33148( ref l_U1521[I], ref l_U1548[I], -1013714740, "AIT_NORMAL", 2, 25000, 2, 0, 25000 );
         /* P_QUICK_ADD_PED_TO_GROUP */ sub_34129( l_U1548[I], ref l_U1551 );
         /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1548[I], g_U1306 );
    }
    for ( I = 0; I <= (l_U1548 - 1); I++ )
    {
        uVar3 = GET_WEAPON_FROM_HAND( l_U1548[I], 0, 0 );
        if (GET_DOES_WEAPON_EXIST( uVar3 ))
        {
            SET_WEAPON_LIGHT_DATA_BY_NAME( GET_WEAPON_FROM_HAND( l_U1548[I], 0, 0 ), "Flashlight_Hotel" );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "ERROR: Can't set light data for:", 0 );
             /* WRITE_INT */ sub_1864( I );
        }
    }
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_35774( ref l_U1548, "POST_VIG01" );
     /* P_DEACTIVATEPEDARRAY */ sub_36284( ref l_U1548 );
    return;
}

/* F_IS_ACTION_INTENTION_STATUS_REACHED */ int sub_44304(unknown uParam0, unknown uParam1, int iParam2)
{
    if ( /* IS_PED_VALID */ sub_13637( uParam0 ))
    {
        if ((PED_GET_ACTION_INTENTION_STATUS( uParam0, uParam1 )) == iParam2)
        {
            PED_FINISH_ACTION_INTENTION( uParam0, uParam1 );
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "F_IS_ACTION_INTENTION_STATUS_REACHED: Returning TRUE", "***" );
            return 1;
        }
    }
    return 0;
}

/* P_SET_HAND_WEAPON_VISIBILITY */ void sub_45269(unknown uParam0, unknown uParam1, unknown uParam2)
{
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_SET_HAND_WEAPON_VISIBILITY", 0 );
     /* WRITE_BOOL */ sub_28322( uParam2 );
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        if ((GET_WEAPON_FROM_HAND( uParam0, uParam1, 0 )) != 0)
        {
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( uParam0, uParam1, 0 ), uParam2 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_SET_HAND_WEAPON_VISIBILITY: no weapon in specified hand!", "***" );
        }
    }
    return;
}

/* P_SET_DROPPED_OBJECT_DYNAMIC */ void sub_45924(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( (uParam0^) ))
    {
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_SET_DROPPED_OBJECT_DYNAMIC: Object exists - setting object dynamic", 0 );
        SET_OBJECT_DYNAMIC( (uParam0^), 1 );
    }
    return;
}

/* F_SHOULD_VIG01_ENEMY_SPOT_MAX */ int sub_46326(unknown uParam0)
{
    int iVar3;

    if ( /* PED_AWARE_OF_PED */ sub_46375( uParam0,  /* PLAYER_PED_ID */ sub_4651() ))
    {
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "F_SHOULD_VIG01_ENEMY_SPOT_MAX: PED_AWARE_OF_PED returning TRUE", 0 );
        return 1;
    }
    if (( /* IS_MAX_VALID */ sub_13607()) AND ( /* IS_PED_VALID */ sub_13637( uParam0 )))
    {
        if (HAS_BULLET_IMPACTED_IN_AREA( 28.47000000, -31.47000000, 14.00000000, 4.75000000, ref iVar3 ))
        {
            if (iVar3 == ( /* PLAYER_PED_ID */ sub_4651()))
            {
                 /* WRITESCRIPTLOG */ sub_1201( "SBA", "F_SHOULD_VIG01_ENEMY_SPOT_MAX: Bullet Impact!", 0 );
                return 1;
            }
        }
    }
    return 0;
}

/* PED_AWARE_OF_PED */ int sub_46375(unknown uParam0, unknown uParam1)
{
    if (GET_PED_AWARENESS_STATE( uParam0, uParam1, 1 ))
    {
        return 1;
    }
    if (GET_PED_AWARENESS_STATE( uParam0, uParam1, 2 ))
    {
        return 1;
    }
    if (GET_PED_AWARENESS_STATE( uParam0, uParam1, 4 ))
    {
        return 1;
    }
    if (GET_PED_AWARENESS_STATE( uParam0, uParam1, 8 ))
    {
        return 1;
    }
    return 0;
}

/* P_DROP_ALL_PED_PROPS */ void sub_46802(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_DROP_ALL_PED_PROPS", "***" );
    if ( /* IS_PED_VALID */ sub_13637( uParam0 ))
    {
        if ((GET_PED_PROP_INDEX( uParam0, 13 )) >= 0)
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_DROP_ALL_PED_PROPS: Dropping RIGHT prop", "***" );
            KNOCK_OFF_PROP_AT_ANCHOR_POINT( uParam0, 13 );
        }
        if ((GET_PED_PROP_INDEX( uParam0, 12 )) >= 0)
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_DROP_ALL_PED_PROPS: Dropping LEFT prop", "***" );
            KNOCK_OFF_PROP_AT_ANCHOR_POINT( uParam0, 12 );
        }
    }
    return;
}

/* IS_SPEECH_CURRENTLY_PLAYING */ int sub_47133(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    if (NOT ( /* IS_SCRIPT_SPEECH_STRUCT_VALID */ sub_47176( uParam0 )))
    {
        return 0;
    }
    if ((g_U11[uParam0._fU4] == 2) || ((g_U11[uParam0._fU4] == 1) || (IS_SCRIPTED_CONVERSATION_ONGOING( uParam0._fU4 ))))
    {
        if (uParam0._fU8 == g_U6[uParam0._fU4])
        {
            return 1;
        }
    }
    return 0;
}

/* IS_SCRIPT_SPEECH_STRUCT_VALID */ boolean sub_47176(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    int iVar12;

    if (uParam0._fU4 < 0)
    {
        return 0;
    }
    iVar12 = GET_CHECK_HASH_FROM_CONVERSATION_ID( uParam0._fU4 );
    return (uParam0._fU16 == iVar12) AND (iVar12 != 0);
}

/* KILL_SPEECH */ void sub_47417(int iParam0, unknown uParam1)
{
    if (NOT ( /* IS_SCRIPT_SPEECH_STRUCT_VALID */ sub_47176( (iParam0^) )))
    {
        ;
    }
    else
    {
        PRINTSTRING( "\n KILL SPEECH CALLED***************************************" );
        if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
        {
            if (iParam0->_fU8 == g_U6[iParam0->_fU4])
            {
                STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, uParam1, 0 );
            }
        }
    }
    return;
}

/* PED_SET_REGISTER_TARGET_PLAYER */ void sub_48343(unknown uParam0)
{
    if (( /* IS_MAX_VALID */ sub_13607()) AND ( /* IS_PED_VALID */ sub_13637( (uParam0^) )))
    {
         /* PED_SET_REGISTER_TARGET */ sub_35341( uParam0,  /* PLAYER_PED_ID */ sub_4651() );
    }
    return;
}

/* P_HANDLE_IMAGEFX */ void sub_49004(unknown uParam0)
{
    int I;
    int J;

    switch (l_U204)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_1201( "CO", "P_HANDLE_IMAGEFX", 0 );
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (uParam0^)[I]._fU32)
            {
                 /* CREATETIMER */ sub_5628( ref (uParam0^)[I]._fU36, (uParam0^)[I]._fU12, 1, 0 );
                 /* STARTTIMER */ sub_5778( ref (uParam0^)[I]._fU36 );
                if ((uParam0^)[I]._fU20 > 0)
                {
                    I += (uParam0^)[I]._fU20;
                }
            }
        }
        l_U204 = 1;
        break;
        case 1:
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if ( /* ISTIMERDONE */ sub_5911( ref (uParam0^)[I]._fU36 ))
            {
                (uParam0^)[I]._fU0 = PLAY_IMAGEFX( (uParam0^)[I]._fU4, (uParam0^)[I]._fU8, (uParam0^)[I]._fU28 );
                if ((uParam0^)[I]._fU16 > 0)
                {
                     /* CREATETIMER */ sub_5628( ref (uParam0^)[I]._fU72, (uParam0^)[I]._fU16, 1, 0 );
                     /* STARTTIMER */ sub_5778( ref (uParam0^)[I]._fU72 );
                }
                if ((uParam0^)[I]._fU20 > 0)
                {
                    for ( J = I + 1; J <= (I + (uParam0^)[I]._fU20); J++ )
                    {
                        PRINTSTRING( "******* [CO] ***** STARTING CHILD FOR index : " );
                        PRINTINT( J );
                        PRINTNL();
                        (uParam0^)[J]._fU0 = PLAY_IMAGEFX( (uParam0^)[J]._fU4, (uParam0^)[J]._fU8, (uParam0^)[I]._fU28 );
                        if ((uParam0^)[J]._fU16 > 0)
                        {
                             /* CREATETIMER */ sub_5628( ref (uParam0^)[J]._fU72, (uParam0^)[J]._fU16, 1, 0 );
                             /* STARTTIMER */ sub_5778( ref (uParam0^)[J]._fU72 );
                        }
                    }
                    I += (uParam0^)[I]._fU20;
                }
            }
            if ( /* ISTIMERDONE */ sub_5911( ref (uParam0^)[I]._fU72 ))
            {
                STOP_IMAGEFX( (uParam0^)[I]._fU0, (uParam0^)[I]._fU24 );
                (uParam0^)[I]._fU32 = 1;
                if ((uParam0^)[I]._fU20 > 0)
                {
                    if ((uParam0^)[I]._fU20 == 1)
                    {
                        STOP_IMAGEFX( (uParam0^)[I + 1]._fU0, (uParam0^)[I + 1]._fU24 );
                        (uParam0^)[I + 1]._fU32 = 1;
                    }
                    else
                    {
                        for ( J = I + 1; J <= (uParam0^)[I]._fU20; J++ )
                        {
                            STOP_IMAGEFX( (uParam0^)[J]._fU0, (uParam0^)[J]._fU24 );
                            (uParam0^)[J]._fU32 = 1;
                        }
                    }
                    I += (uParam0^)[I]._fU20;
                }
            }
        }
        break;
    }
    return;
}

/* P_SET_LAUNCHER_AMMO */ void sub_49838()
{
    if ((NOT l_U385) AND ( /* IS_MAX_VALID */ sub_13607()))
    {
        if (HAS_PLACEMENT_BEEN_COLLECTED( l_U384 ))
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_SET_LAUNCHER_AMMO: setting ammo", 0 );
            SET_PED_AMMO(  /* PLAYER_PED_ID */ sub_4651(), -1659006841, 0 );
            REMOVE_PED_AMMO(  /* PLAYER_PED_ID */ sub_4651(), -1889644301 );
            SET_AMMO_IN_CLIP(  /* PLAYER_PED_ID */ sub_4651(), -1659006841, 4 );
            l_U385 = 1;
        }
    }
    return;
}

/* P_ACTIVATE_POST_VIG01_ENEMIES */ void sub_50079()
{
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_ACTIVATE_POST_VIG01_ENEMIES", 0 );
     /* P_ACTIVATEPEDARRAY */ sub_36989( ref l_U1548 );
     /* PED_TASK_ATTACK_MOVE */ sub_50198( l_U1548[0], l_U1559, 3, 6, -1082130432, 3 );
     /* PED_TASK_ATTACK_MOVE */ sub_50198( l_U1548[1], l_U1562, 3, 6, -1082130432, 3 );
    return;
}

/* PED_TASK_ATTACK_MOVE */ void sub_50198(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    if ( /* IS_PED_VALID */ sub_13637( uParam0 ))
    {
        CLEAR_PED_TASKS_IMMEDIATELY( uParam0 );
        TASK_ATTACK_MOVE( uParam0, uParam1, uParam4, uParam5, uParam6, uParam7 );
    }
    return;
}

/* P_FOLLOW_UP_POST_VIG01_ENEMIES */ void sub_50380()
{
    if ( /* IS_PED_VALID */ sub_13637( l_U1548[0] ))
    {
        if ((NOT (IS_PED_IN_COMBAT( l_U1548[0] ))) AND (IS_PED_AT_COORD( l_U1548[0], l_U1559, 2.00000000, 2.00000000, 2.00000000, 0, 1 )))
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_FOLLOW_UP_POST_VIG01_ENEMIES", 0 );
             /* PED_TASK_ATTACK_MOVE */ sub_50198( l_U1548[0], 27.79243000, -47.30229000, 13.05316000, 2, 30, -1, 2 );
             /* PED_SET_REGISTER_TARGET_PLAYER */ sub_48343( ref l_U1548[0] );
            l_U1558 = 1;
        }
    }
    return;
}

/* P_HANDLE_VIG02 */ void sub_50608()
{
    switch (l_U1758)
    {
        case 0:
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_14332( ref l_U470, 0 ))
        {
             /* MAL_FREEZEPED */ sub_50702( ref l_U1618[0], 1 );
             /* P_ACTIVATEPED */ sub_36872( l_U1618[0] );
             /* LOADISEQ */ sub_23083( 793883882, 1 );
        }
        if (ISEQ_QUERY_STATE( 793883882, 2 ))
        {
             /* MAL_FREEZEPED */ sub_50702( ref l_U1618[0], 0 );
            ISEQ_REGISTER_ENTITY( 793883882, "runner", l_U1618[0], 0 );
            ISEQ_START( 793883882 );
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "UPDATE_HOTEL_VIG02 - Setup done: Going to State eHIS_WAITING_TO_PLAY", 0 );
            l_U1758 = 1;
        }
        break;
        case 1:
        if ( /* IS_PED_VALID */ sub_13637( l_U1618[0] ))
        {
            if ((IS_PED_IN_CROSSHAIR_CYLINDER( l_U1618[0], 1.00000000, 25, 1, -1082130432 )) || ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_14332( ref l_U491, 0 )))
            {
                 /* P_CREATE_AND_START_TIMER */ sub_51025( ref l_U1965, 800 );
                 /* WRITESCRIPTLOG */ sub_1201( "SBA", "UPDATE_HOTEL_VIG02 - activating propane room guys", 0 );
                 /* P_ACTIVATEPEDARRAY */ sub_36989( ref l_U1618 );
                 /* PED_TASK_COMBAT_SNAP_TO_COVER */ sub_51210( l_U1618[1], "GenCover", "796176DD_8A0204A_Popover1", 0, 1 );
                 /* PED_TASK_COMBAT_SNAP_TO_COVER */ sub_51210( l_U1618[2], "GenCover", "796176DD_7E260FD4_Corner1", 0, 1 );
                 /* PED_TASK_COMBAT_SNAP_TO_COVER */ sub_51210( l_U1618[3], "GenCover", "796176DD_D59669_Popover1", 0, 0 );
                 /* WRITESCRIPTLOG */ sub_1201( "SBA", "UPDATE_HOTEL_VIG02 - Setup done: Going to State eHIS_PLAYING", 0 );
                l_U1758 = 2;
            }
        }
        else
        {
             /* P_CREATE_AND_START_TIMER */ sub_51025( ref l_U1965, 800 );
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "UPDATE_HOTEL_VIG02 - activating propane room guys", 0 );
             /* P_ACTIVATEPEDARRAY */ sub_36989( ref l_U1618 );
             /* PED_TASK_COMBAT_SNAP_TO_COVER */ sub_51210( l_U1618[1], "GenCover", "796176DD_8A0204A_Popover1", 0, 1 );
             /* PED_TASK_COMBAT_SNAP_TO_COVER */ sub_51210( l_U1618[2], "GenCover", "796176DD_7E260FD4_Corner1", 0, 1 );
             /* PED_TASK_COMBAT_SNAP_TO_COVER */ sub_51210( l_U1618[3], "GenCover", "796176DD_D59669_Popover1", 0, 0 );
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "UPDATE_HOTEL_VIG02 - Runner Dead: Going to State eHIS_PLAYING", 0 );
            l_U1758 = 2;
        }
        break;
        case 2:
        if ( /* ISTIMERDONE */ sub_5911( ref l_U1965 ))
        {
             /* P_CREATE_AND_START_TIMER */ sub_51025( ref l_U1965, 2000 );
             /* P_DIAL_HOTEL_VIG02 */ sub_51856();
            if ( /* IS_PED_VALID */ sub_13637( l_U1618[0] ))
            {
                 /* WRITESCRIPTLOG */ sub_1201( "SBA", "UPDATE_HOTEL_VIG02 - Runner should be RUNNING", 0 );
                PED_SET_ACTION_INTENTION( l_U1618[0], 47, 1000, 0, 0, 0 );
            }
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "UPDATE_HOTEL_VIG02 - Setup done: Going to State eHIS_FINISHED", 0 );
            l_U1758 = 5;
        }
        break;
        case 5:
        if ( /* ISTIMERDONE */ sub_5911( ref l_U1965 ))
        {
            ENABLE_WALLA_ZONE( "S_HOTEL_WZ_2ND_FLOOR_2ND_ROOM", 1 );
        }
        if ( /* F_ISPEDINTRIGGERBOXFIRSTTIME */ sub_52279( ref l_U596, l_U1618[0], 0 ))
        {
            if (NOT (IS_PED_DEAD( l_U1618[0] )))
            {
                 /* CLEANPED */ sub_8126( l_U1618[0] );
            }
        }
        break;
    }
    return;
}

/* MAL_FREEZEPED */ void sub_50702(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        FREEZE_PED_POSITION( (uParam0^), uParam1 );
    }
    return;
}

/* P_CREATE_AND_START_TIMER */ void sub_51025(unknown uParam0, unknown uParam1)
{
     /* CREATETIMER */ sub_5628( uParam0, uParam1, 1, 0 );
     /* STARTTIMER */ sub_5778( uParam0 );
    return;
}

/* PED_TASK_COMBAT_SNAP_TO_COVER */ void sub_51210(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if ( /* IS_PED_VALID */ sub_13637( uParam0 ))
    {
        CLEAR_PED_TASKS_IMMEDIATELY( uParam0 );
         /* PED_SET_LOCK_TO_COVER */ sub_34784( ref uParam0, uParam4 );
        TASK_COMBAT_SNAP_TO_COVER( uParam0, uParam1, uParam2, uParam3 );
    }
    return;
}

/* P_DIAL_HOTEL_VIG02 */ void sub_51856()
{
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_DIAL_HOTEL_VIG02", 0 );
    if (NOT (IS_PED_DEAD( l_U1618[0] )))
    {
         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_42169( ref l_U1511 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_42293( 1, l_U1618[0], "M12_CP_03_Avg", ref l_U1511, 2, 0 );
         /* PLAY_SINGLE_SPEECH */ sub_42575( "SHOT_VIG01D", ref l_U1511, 7, 1 );
    }
    return;
}

/* F_ISPEDINTRIGGERBOXFIRSTTIME */ void sub_52279(int iParam0, unknown uParam1, unknown uParam2)
{
    if (iParam0->_fU68 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU68 =  /* F_ISPEDINTRIGGERBOX */ sub_14408( uParam1, (iParam0^) );
        if ((iParam0->_fU68) AND (uParam2))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU68;
}

/* P_CREATE_PROPANE_REPLACEMENTS */ void sub_52476()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_CREATE_PROPANE_REPLACEMENTS", "***" );
    for ( I = 0; I <= 2; I++ )
    {
         /* PED_INITIALIZE */ sub_33148( ref l_U1623[I], ref l_U1663[I], -1013714740, "AIT_NORMAL", 0, 25000, 3, -612753081, 25000 );
         /* P_QUICK_ADD_PED_TO_GROUP */ sub_34129( l_U1663[I], ref l_U1737 );
         /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1663[I], g_U1306 );
    }
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_35774( ref l_U1663, "PropaneReplacement" );
     /* P_DEACTIVATEPEDARRAY */ sub_36284( ref l_U1663 );
    l_U1677 = 6;
    l_U1678 = 1;
    return;
}

/* P_ACTIVATEPROPANEROOMPREMID04 */ void sub_52738()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_ActivatePropaneRoomPreMID04", "***" );
    for ( I = 1; I <= 3; I++ )
    {
         /* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_35032( ref l_U1618[I], 0 );
    }
     /* PED_SET_TETHERBOX */ sub_52879( ref l_U1618[1], l_U1363, 1 );
     /* PED_SET_TETHERBOX */ sub_52879( ref l_U1618[2], l_U1363, 1 );
     /* PED_TASK_ATTACK_MOVE */ sub_50198( l_U1618[3], 0.60527700, -28.15804000, 13.12049000, 3, 1101004800, -1082130432, 3 );
    if ( /* IS_PED_VALID */ sub_13637( l_U1618[3] ))
    {
        SET_PED_COMBAT_ATTRIBUTES( l_U1618[3], 1, 0 );
    }
    if ( /* IS_PED_VALID */ sub_13637( l_U1618[1] ))
    {
        SET_PED_FLAG_FIRE_UNTIL_EMPTY_IN_COVER( l_U1618[1], 1 );
    }
    if ( /* IS_PED_VALID */ sub_13637( l_U1618[2] ))
    {
        SET_PED_FLAG_FIRE_UNTIL_EMPTY_IN_COVER( l_U1618[2], 1 );
    }
    return;
}

/* PED_SET_TETHERBOX */ void sub_52879(unknown uParam0, unknown uParam1, unknown uParam2)
{
    if ( /* IS_PED_VALID */ sub_13637( (uParam0^) ))
    {
        RESET_PED_TETHERING( (uParam0^) );
         /* P_TETHERPED */ sub_52938( ref uParam1, (uParam0^), uParam2 );
    }
    return;
}

/* P_TETHERPED */ void sub_52938(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_TETHERING_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_TETHERING_OPTION( uParam1, uParam2 );
    }
    return;
}

/* P_HANDLE_PROPANE_REPLACEMENTS */ void sub_53403()
{
    int iVar2;

    if (NOT l_U1667._fU20)
    {
        iVar2 = ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_53462( ref l_U1618 )) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_53462( ref l_U1663 ));
        if ((iVar2 < l_U1677) AND (iVar2 >= 3))
        {
            l_U1677 = iVar2;
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_PROPANE_REPLACEMENTS: An enemy is dead, iPrevCountPropaneRoomGuys set to:", 0 );
             /* WRITE_INT */ sub_1864( l_U1677 );
            l_U1676 = l_U1663[l_U1677 - 3];
             /* P_CREATE_AND_START_TIMER */ sub_51025( ref l_U1667, GET_RANDOM_INT_IN_RANGE( 500, 2000 ) );
        }
    }
    if ( /* ISTIMERDONE */ sub_5911( ref l_U1667 ))
    {
        if (l_U1676 == nil)
        {
            SCRIPT_ASSERT( "P_HANDLE_PROPANE_REPLACEMENTS: piPedToActivate = NULL", 0 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_PROPANE_REPLACEMENTS: Activating replacement", "***" );
             /* P_ACTIVATEPED */ sub_36872( l_U1676 );
             /* TELEPORTPED */ sub_37851( l_U1676, -2.31535800, -8.66752700, 13.05386000, 100 );
             /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1676, g_U1330 );
             /* PED_TASK_ATTACK_MOVE */ sub_50198( l_U1676, -11.54000000, -21.52200000, 13.05000000, 3, 1101004800, -1082130432, 3 );
        }
    }
    return;
}

/* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ void sub_53462(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result++;
        }
    }
    return Result;
}

/* P_CREATE_BALCONY_ATTACKERS */ void sub_54190()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1201( "BSW", "P_CREATE_BALCONY_ATTACKERS", "***" );
     /* P_SETUP_AI_GROUP */ sub_32708( ref l_U1743, 1.00000000, 0 );
    for ( I = 0; I <= 1; I++ )
    {
         /* PED_INITIALIZE */ sub_33148( ref l_U1679[I], ref l_U1706[I], -1013714740, "AIT_NORMAL", 0, 25000, 3, 0, 25000 );
         /* P_QUICK_ADD_PED_TO_GROUP */ sub_34129( l_U1706[I], ref l_U1743 );
         /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1706[I], g_U1330 );
         /* F_GIVEPEDWEAPONTOHOLSTER */ sub_10634( l_U1706[I], -612753081, 1, 25000, 0 );
        SET_PED_COMBAT_ATTRIBUTES( l_U1706[I], 16, 0 );
    }
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_35774( ref l_U1706, "BalconyAttacker" );
    return;
}

/* P_BREAK_UP_REPLACEMENT_PARTY */ void sub_54583()
{
    int I;

    for ( I = 0; I <= 2; I++ )
    {
        if ( /* IS_PED_VALID */ sub_13637( l_U1663[I] ))
        {
            if (IS_PED_PROCESSING_FROZEN( l_U1663[I] ))
            {
                 /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_BREAK_UP_REPLACEMENT_PARTY: cleaning replacement:", 0 );
                 /* WRITE_INT */ sub_1864( I );
                 /* CLEANPED */ sub_8126( l_U1663[I] );
            }
            else if ( /* F_ISPEDINTRIGGERBOX */ sub_14408( l_U1663[I], l_U659 ))
            {
                 /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_BREAK_UP_REPLACEMENT_PARTY: tethering replacement!", 0 );
                 /* WRITE_INT */ sub_1864( I );
                 /* P_TETHERPED */ sub_52938( ref l_U1363, l_U1663[I], 1 );
            }
        }
    }
    return;
}

/* P_HANDLE_PROPANEROOM_PROPANE_TANK */ void sub_55015()
{
    int I;

    if (DOES_OBJECT_EXIST( l_U372 ))
    {
        if (IS_EXPLOSION_IN_SPHERE( -1, l_U373, 4.00000000 ))
        {
            PLAY_SCRIPT_STREAM_FROM_COORD( l_U373, 0 );
             /* CLEANOBJECT */ sub_7189( l_U372 );
            START_PARTICLE_FX_NON_LOOPED_AT_COORD( "HO_RF_GenExplo_S", l_U373, 0, 0, 0, 1065353216 );
            for ( I = 0; I <= 3; I++ )
            {
                if ( /* F_ISPEDINTRIGGERBOX */ sub_14408( l_U1618[I], l_U659 ))
                {
                     /* P_KILL_PED */ sub_14601( l_U1618[I] );
                }
            }
             /* MAL_RECREATEOBJECTWITHNOROTATIONINROOM */ sub_29754( ref l_U377, -1024724348, 23.02300000, 43.20200000, 15.43900000, ref g_U1330, 1, 1 );
            SET_OBJECT_INVINCIBLE( l_U377, 1 );
             /* MAL_RECREATEOBJECTWITHNOROTATIONINROOM */ sub_29754( ref l_U376, -1020027274, -4.96300000, -6.59900000, 13.15300000, ref g_U1330, 1, 1 );
            SET_OBJECT_INVINCIBLE( l_U376, 1 );
             /* MAL_RECREATEOBJECTWITHNOROTATIONINROOM */ sub_29754( ref l_U378, -495772823, -6, -8, 13, ref g_U1330, 1, 1 );
            SET_OBJECT_INVINCIBLE( l_U378, 1 );
        }
    }
    return;
}

/* F_ISPLAYERINTRIGGERREGION */ void sub_55424(int iParam0, unknown uParam1)
{
    int Result;
    int I;
    int J;

    Result = 0;
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )))
    {
        for ( I = 0; I < iParam0->_fU508; I++ )
        {
            if ( /* F_ISPLAYERINTRIGGERBOX */ sub_41582( iParam0->_fU0[I] ))
            {
                Result = 1;
            }
        }
    }
    if ((uParam1) AND (Result))
    {
        for ( J = 0; J < iParam0->_fU508; J++ )
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( ref iParam0->_fU0[J]._fU0, 0 );
        }
    }
    iParam0->_fU548 = 1;
    return Result;
}

/* P_ASSIGN_SECOND_FLOOR_FIRST_HALF_BULLET_CAM */ int sub_55761()
{
    l_U2348 = (((( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_53462( ref l_U1392 )) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_53462( ref l_U1548 ))) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_53462( ref l_U1618 ))) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_53462( ref l_U1706 ))) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_53462( ref l_U1663 ));
    if ( /* IS_PED_VALID */ sub_13637( l_U1736 ))
    {
        l_U2348++;
    }
    if ((l_U1752) AND ((NOT l_U2349) AND (l_U2348 == 1)))
    {
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_ASSIGN_SECOND_FLOOR_FIRST_HALF_BULLET_CAM: Assigning bullet cam", 0 );
        if (NOT (IS_PED_DEAD( l_U1736 )))
        {
            if (NOT (GET_PED_CAN_TRIGGER_BULLET_CAM( l_U1736 )))
            {
                SET_PED_CAN_TRIGGER_BULLET_CAM( l_U1736, 1 );
            }
        }
        else
        {
             /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_56061( ref l_U1392 );
             /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_56061( ref l_U1548 );
             /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_56061( ref l_U1618 );
             /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_56061( ref l_U1706 );
             /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_56061( ref l_U1663 );
        }
        l_U2349 = 1;
        return 1;
    }
    return 0;
}

/* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ void sub_56061(unknown uParam0)
{
    int I;

    if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_53462( uParam0 )) == 1)
    {
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
            {
                if (NOT (GET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I] )))
                {
                    SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I], 1 );
                    return (uParam0^)[I];
                }
            }
        }
    }
    return nil;
}

/* P_TASK_BALCONY_ATTACKERS */ void sub_56416()
{
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_TASK_BALCONY_ATTACKERS", "***" );
     /* PED_TASK_ATTACK_MOVE */ sub_50198( l_U1706[0], -14.35000000, -15.40000000, 13.05000000, 2.00000000, 1101004800, -1082130432, 3 );
    if ( /* IS_PED_VALID */ sub_13637( l_U1706[1] ))
    {
        TASK_COMBAT_SNAP_TO_COVER( l_U1706[1], "GenCover", "796176DD_255A5F72_Popover1", 0 );
        SET_PED_FLAG_LOCK_TO_COVER( l_U1706[1], 1 );
    }
    return;
}

/* P_CREATE_AND_TASK_PROPANE_ROOM_BACKDOOR_GUARD */ void sub_56777()
{
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_CREATE_AND_TASK_PROPANE_ROOM_BACKDOOR_GUARD", "***" );
     /* PED_INITIALIZE */ sub_33148( ref l_U1723, ref l_U1736, -1013714740, "AIT_NORMAL", 0, 25000, 2, 0, 25000 );
     /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1736, g_U1306 );
    if ( /* IS_PED_VALID */ sub_13637( l_U1736 ))
    {
         /* F_GIVEPEDWEAPONTOHOLSTER */ sub_10634( l_U1736, -612753081, 1, 25000, 0 );
        SET_PED_NAME_DEBUG( l_U1736, "backdoorguard" );
        TASK_COMBAT_SNAP_TO_COVER( l_U1736, "GenCover", "796176DD_E6565CF4_Corner1", 0 );
        SET_PED_FLAG_LOCK_TO_COVER( l_U1736, 1 );
        SET_PED_OBLIVIOUS_TO_DANGER( l_U1736, 1 );
    }
    return;
}

/* PED_TASK_COMBAT_PLAYER */ void sub_57213(unknown uParam0, boolean bParam1)
{
    if ((NOT (IS_PED_RAGDOLL( uParam0, 0 ))) AND ((NOT (IS_PED_INJURED( uParam0 ))) AND (( /* IS_MAX_VALID */ sub_13607()) AND ( /* IS_PED_VALID */ sub_13637( uParam0 )))))
    {
        if (bParam1)
        {
            CLEAR_PED_TASKS_IMMEDIATELY( uParam0 );
        }
        CLEAR_LOCKED_TARGET( uParam0 );
         /* PED_SET_REGISTER_TARGET_PLAYER */ sub_48343( ref uParam0 );
         /* PED_SET_LOCKED_ON_PLAYER */ sub_35514( ref uParam0 );
        TASK_COMBAT_PED( uParam0,  /* PLAYER_PED_ID */ sub_4651() );
    }
    return;
}

/* P_ENABLE_POI */ void sub_57365(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        if ((iParam0->_fU4 == 1) AND (iParam0->_fU320 == 1))
        {
             /* P_ENABLEPOIGLINT */ sub_31524( iParam0, 1 );
        }
        iParam0->_fU0 = 1;
    }
    else
    {
         /* P_ENABLEPOIGLINT */ sub_31524( iParam0, 0 );
         /* P_ENABLEPOIINTERACTIONTEXT */ sub_57451( iParam0, 0 );
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )) == 0)
        {
            TASK_CLEAR_LOOK_AT(  /* PLAYER_PED_ID */ sub_4651() );
            if ((iParam0->_fU328 == 1) AND (iParam0->_fU324 == 1))
            {
                SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_4651(), 0 );
                iParam0->_fU328 = 0;
            }
        }
        iParam0->_fU8 = 0;
        iParam0->_fU0 = 0;
    }
    return;
}

/* P_ENABLEPOIINTERACTIONTEXT */ void sub_57451(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        SET_INTERACTIONTEXT_TEXT( iParam0 + 32 );
        SET_INTERACTIONTEXT_BUTTON( iParam0->_fU48 );
        if ((iParam0->_fU72 == 0) AND ((iParam0->_fU64 == 1) AND (iParam0->_fU68 == 1)))
        {
            SET_INTERACTIONTEXT_VISIBLE( 0 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 0 );
            SET_INTERACTIONTEXT_AVAILABLE( 0 );
            iParam0->_fU56 = 0;
        }
        else
        {
            SET_INTERACTIONTEXT_VISIBLE( 1 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 1 );
            SET_INTERACTIONTEXT_AVAILABLE( 1 );
            iParam0->_fU56 = 1;
        }
         /* P_UPDATEINTERACTIONTEXTAVAILABLE */ sub_57631( iParam0 );
        if (iParam0->_fU332 == 1)
        {
            SET_INTERACTIONTEXT_PULSE( 1 );
            SET_INTERACTIONTEXT_PULSE_PERIOD( iParam0->_fU336 );
        }
    }
    else
    {
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        SET_INTERACTIONTEXT_BUTTON_VISIBLE( 0 );
    }
    return;
}

/* P_UPDATEINTERACTIONTEXTAVAILABLE */ void sub_57631(int iParam0)
{
    if (iParam0->_fU60 == 1)
    {
        SET_INTERACTIONTEXT_AVAILABLE( 0 );
        iParam0->_fU56 = 0;
    }
    else if (iParam0->_fU56 == 1)
    {
        if (( /* F_ISACTIONINGAVAILABLE */ sub_57727( iParam0 )) == 0)
        {
            SET_INTERACTIONTEXT_AVAILABLE( 0 );
            iParam0->_fU56 = 0;
        }
    }
    else if (( /* F_ISACTIONINGAVAILABLE */ sub_57727( iParam0 )) == 1)
    {
        SET_INTERACTIONTEXT_AVAILABLE( 1 );
        iParam0->_fU56 = 1;
    };;;
    return;
}

/* F_ISACTIONINGAVAILABLE */ int sub_57727(int iParam0)
{
    if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )) == 0) AND ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_4689() )) == 0))
    {
        if (((IS_PED_RELOADING(  /* PLAYER_PED_ID */ sub_4651() )) == 1) || (((IS_PED_GETTING_UP(  /* PLAYER_PED_ID */ sub_4651() )) == 1) || (((IS_PED_PICKING_UP_PICKUP(  /* PLAYER_PED_ID */ sub_4651() )) == 1) || (((IS_PED_IN_COVER(  /* PLAYER_PED_ID */ sub_4651() )) == 1) || (((IS_PED_DUCKING(  /* PLAYER_PED_ID */ sub_4651() )) == 1) || (IS_PLAYER_SHOOTDODGING() == 1))))))
        {
            return 0;
        }
        if (iParam0->_fU304 == 0)
        {
            if ((IS_MONOLOGUE_PLAYING() == 1) || ((IS_ANY_SPEECH_PLAYING(  /* PLAYER_PED_ID */ sub_4651() )) == 1))
            {
                return 0;
            }
        }
        return 1;
    }
    return 0;
}

/* F_HANDLE_POI */ int sub_58223(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    int iVar6;
    int iVar7;
    int iVar8;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )) == 0)
    {
        if (iParam0->_fU0 == 1)
        {
            uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS(  /* PLAYER_PED_ID */ sub_4651() )};
            iVar6 = 0;
            if (iParam0->_fU80 == 1)
            {
                if (( /* F_ISPEDINTRIGGERBOX */ sub_14408(  /* PLAYER_PED_ID */ sub_4651(), iParam0->_fU116 )) == 1)
                {
                    if (iParam0->_fU300 == 1)
                    {
                        if (((IS_OBJECT_ON_SCREEN( iParam0->_fU312 )) == 1) AND ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1))
                        {
                            iVar6 = 1;
                        }
                    }
                    else
                    {
                        iVar6 = 1;
                    }
                }
            }
            else if ((iParam0->_fU308 == 1) AND (iParam0->_fU84 == 1))
            {
                if ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU312 ), 1 )) <= iParam0->_fU112)
                    {
                        if (iParam0->_fU300 == 1)
                        {
                            if ((IS_OBJECT_ON_SCREEN( iParam0->_fU312 )) == 1)
                            {
                                iVar6 = 1;
                            }
                        }
                        else
                        {
                            iVar6 = 1;
                        }
                    }
                }
            }
            else if (iParam0->_fU96 == 1)
            {
                if ((DOES_PED_EXIST( iParam0->_fU316 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU316 ), 1 )) <= iParam0->_fU112)
                    {
                        if (iParam0->_fU300 == 1)
                        {
                            if ((IS_PED_ON_SCREEN( iParam0->_fU316, 0 )) == 1)
                            {
                                iVar6 = 1;
                            }
                        }
                        else
                        {
                            iVar6 = 1;
                        }
                    }
                }
            }
            else if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, iParam0->_fU100, 1 )) <= iParam0->_fU112)
            {
                if (iParam0->_fU300 == 1)
                {
                    if (((IS_OBJECT_ON_SCREEN( iParam0->_fU312 )) == 1) AND ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1))
                    {
                        iVar6 = 1;
                    }
                }
                else
                {
                    iVar6 = 1;
                }
            };;;;
            iVar7 = 0;
            if (iParam0->_fU88 == 1)
            {
                if (( /* F_ISPEDINTRIGGERBOX */ sub_14408(  /* PLAYER_PED_ID */ sub_4651(), iParam0->_fU216 )) == 1)
                {
                    iVar7 = 1;
                }
            }
            else if ((iParam0->_fU308 == 1) AND (iParam0->_fU92 == 1))
            {
                if ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU312 ), 1 )) <= iParam0->_fU212)
                    {
                        iVar7 = 1;
                    }
                }
            }
            else if (iParam0->_fU96 == 1)
            {
                if ((DOES_PED_EXIST( iParam0->_fU316 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU316 ), 1 )) <= iParam0->_fU212)
                    {
                        iVar7 = 1;
                    }
                }
            }
            else if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, iParam0->_fU200, 1 )) <= iParam0->_fU212)
            {
                iVar7 = 1;
            };;;;
            if (iVar6 == 1)
            {
                if ((iParam0->_fU4 != 3) AND (iParam0->_fU52 == 1))
                {
                    if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                    {
                         /* P_UPDATEINTERACTIONTEXTAVAILABLE */ sub_57631( iParam0 );
                    }
                    iVar8 = 0;
                    if ((IS_WEAPON_PICKUP_VISIBLE() == 0) AND ((iParam0->_fU60 == 0) AND (( /* F_ISACTIONINGAVAILABLE */ sub_57727( iParam0 )) == 1)))
                    {
                        SET_ACTION_CONSUMED( 0, 1 );
                        if (( /* F_HASACTIONBEENPRESSED */ sub_59120()) == 1)
                        {
                            iVar8 = 1;
                        }
                    }
                    if (iVar8 == 1)
                    {
                        if (iParam0->_fU332 == 0)
                        {
                             /* P_ENABLE_POI */ sub_57365( iParam0, 0 );
                            iParam0->_fU64 = 1;
                        }
                        if (iParam0->_fU68 == 1)
                        {
                            iParam0->_fU72 = 0;
                        }
                        return 1;
                    }
                    else if (iParam0->_fU8 != 2)
                    {
                        if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                        {
                             /* P_ENABLEPOIGLINT */ sub_31524( iParam0, 0 );
                             /* P_ENABLEPOIINTERACTIONTEXT */ sub_57451( iParam0, 1 );
                        }
                        else if (iParam0->_fU320 == 1)
                        {
                             /* P_ENABLEPOIGLINT */ sub_31524( iParam0, 1 );
                        }
                        iParam0->_fU8 = 2;
                    }
                    if ((iParam0->_fU328 == 0) AND (iParam0->_fU324 == 1))
                    {
                        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )) == 0)
                        {
                            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_4651(), 1 );
                            iParam0->_fU328 = 1;
                        }
                    }
                }
            }
            else if (iVar7 == 1)
            {
                if (iParam0->_fU8 != 1)
                {
                    if ((iParam0->_fU4 != 3) AND (iParam0->_fU320 == 1))
                    {
                         /* P_ENABLEPOIGLINT */ sub_31524( iParam0, 1 );
                    }
                    if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                    {
                         /* P_ENABLEPOIINTERACTIONTEXT */ sub_57451( iParam0, 0 );
                    }
                    if (iParam0->_fU96 == 1)
                    {
                        if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )) == 0) AND ((((IS_PED_DEAD( iParam0->_fU316 )) == 1) || ((IS_PED_DEAD( iParam0->_fU316 )) == 0)) AND ((DOES_PED_EXIST( iParam0->_fU316 )) == 1)))
                        {
                            TASK_LOOK_AT_PED(  /* PLAYER_PED_ID */ sub_4651(), iParam0->_fU316, -1, 0 );
                        }
                    }
                    else if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )) == 0)
                    {
                        TASK_LOOK_AT_COORD(  /* PLAYER_PED_ID */ sub_4651(), iParam0->_fU100, -1, 0 );
                    }
                    iParam0->_fU340 = 1;
                    if ((iParam0->_fU72 == 0) AND ((iParam0->_fU68 == 1) AND ((iParam0->_fU64 == 1) AND (iParam0->_fU8 == 2))))
                    {
                        iParam0->_fU72 = 1;
                    }
                    iParam0->_fU8 = 1;
                }
                if ((iParam0->_fU328 == 0) AND (iParam0->_fU324 == 1))
                {
                    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )) == 0)
                    {
                        SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_4651(), 1 );
                        iParam0->_fU328 = 1;
                    }
                }
            }
            else if ((iParam0->_fU4 == 1) || (iParam0->_fU4 == 3))
            {
                ;
            }
            else if (iParam0->_fU8 != 0)
            {
                if (iParam0->_fU320 == 1)
                {
                     /* P_ENABLEPOIGLINT */ sub_31524( iParam0, 0 );
                }
            }
            if (iParam0->_fU8 == 2)
            {
                if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                {
                     /* P_ENABLEPOIINTERACTIONTEXT */ sub_57451( iParam0, 0 );
                }
            }
            if (iParam0->_fU340)
            {
                if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )) == 0)
                {
                    TASK_CLEAR_LOOK_AT(  /* PLAYER_PED_ID */ sub_4651() );
                    iParam0->_fU340 = 0;
                }
            }
            if ((iParam0->_fU328 == 1) AND (iParam0->_fU324 == 1))
            {
                if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )) == 0)
                {
                    SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_4651(), 0 );
                    iParam0->_fU328 = 0;
                }
            }
            if (iParam0->_fU332 == 1)
            {
                 /* P_ENABLEPOIINTERACTIONTEXT */ sub_57451( iParam0, 0 );
            }
            iParam0->_fU8 = 0;;;
        }
    }
    return 0;
}

/* F_HASACTIONBEENPRESSED */ int sub_59120()
{
    if ((IS_CONTROL_JUST_PRESSED( 0, 30 )) == 1)
    {
        return 1;
    }
    return 0;
}

/* HANDLE_GATE_NIS */ void sub_60041()
{
    int Result;

    switch (l_U2075)
    {
        case 0:
         /* NIS_PRE_SETUP */ sub_37963( 1, 0, 0, 1 );
         /* NIS_CREATE_STATIC_CAM */ sub_60137( ref l_U2174, l_U2205, l_U2208, 45, 3000 );
         /* NIS_PLAY_STATIC_CAMERA */ sub_60372( ref l_U2174 );
        CLEAR_PED_TASKS_IMMEDIATELY(  /* PLAYER_PED_ID */ sub_4651() );
        RESET_PLAYER_INPUT_GAIT( 0 );
         /* TELEPORTPED */ sub_37851(  /* PLAYER_PED_ID */ sub_4651(), l_U2082, l_U2085 );
        ISEQ_REGISTER_ENTITY( 161673566, "MAX_PRESSING_BUTTON",  /* PLAYER_PED_ID */ sub_4651(), 0 );
        ISEQ_START( 161673566 );
         /* CREATETIMER */ sub_5628( ref l_U2220, 1000, 1, 0 );
         /* STARTTIMER */ sub_5778( ref l_U2220 );
         /* CREATETIMER */ sub_5628( ref l_U2211, 1250, 1, 0 );
         /* STARTTIMER */ sub_5778( ref l_U2211 );
        l_U2075 = 2;
        break;
        case 2:
        if ( /* ISTIMERDONE */ sub_5911( ref l_U2220 ))
        {
            if (DOES_OBJECT_EXIST( l_U2086 ))
            {
                PLAY_SOUND_FROM_OBJECT( -1, "S_HOTEL_SECURITY_GATE_BUTTON", l_U2086 );
            }
            PLAY_SOUND_FROM_OBJECT( -1, "S_HOTEL_SECURITY_GATE_BUZZER", DOOR_FIND_CLOSEST( g_U1533._fU0, g_U1533._fU4 ) );
        }
        if ( /* ISTIMERDONE */ sub_5911( ref l_U2211 ))
        {
             /* P_SETDOORMINMAXLIMIT */ sub_60792( ref g_U1533, 0, 85 );
             /* P_SETDOORLOCKED */ sub_32485( ref g_U1533, 0 );
             /* P_OPENDOOR */ sub_61032( ref g_U1533, 1, 0, 0.10000000 );
        }
        if ( /* NIS_IS_SHOT_FINISHED */ sub_61196( ref l_U2174, 1 ))
        {
             /* NIS_RETURN_TO_GAMEPLAY_CAM */ sub_61374( 750, 1, 0, 78.18056000, -6.06562900, 0 );
             /* NIS_POST_SETUP */ sub_38578( 1, 1 );
            l_U2075 = 4;
        }
        break;
        case 4:
        l_U2075 = 5;
        Result = 1;
        break;
    }
    return Result;
}

/* NIS_CREATE_STATIC_CAM */ void sub_60137(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    iParam0->_fU4 = {uParam4};
    iParam0->_fU16 = {uParam1};
    iParam0->_fU28 = uParam7;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    iParam0->_fU84 = uParam8;
    iParam0->_fU88 = 0;
    iParam0->_fU92 = 0;
    iParam0->_fU40 = 0;
    iParam0->_fU44 = 0;
    iParam0->_fU100 = 1;
    iParam0->_fU104 = 1;
    iParam0->_fU96 = 0;
     /* CREATETIMER */ sub_5628( iParam0 + 48, uParam8, 1, 0 );
    iParam0->_fU0 = CREATE_CAM_WITH_PARAMS( ref g_U724, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 1 );
    SET_CAM_PARAMS( iParam0->_fU0, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 0, 1, 1 );
    return;
}

/* NIS_PLAY_STATIC_CAMERA */ void sub_60372(int iParam0)
{
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    SET_CAM_ACTIVE( iParam0->_fU0, 1 );
    RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
     /* STARTTIMER */ sub_5778( iParam0 + 48 );
    iParam0->_fU32 = 1;
    iParam0->_fU40 = 1;
    return;
}

/* P_SETDOORMINMAXLIMIT */ void sub_60792(int iParam0, float fParam1, float fParam2)
{
    if (( /* F_DOESDOOREXIST */ sub_32254( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_32338( iParam0 );
    }
    if (fParam1 > fParam2)
    {
        PRINTSTRING( "[SP]### Error: Door fMinLimit greater than fMaxLimit (default min:-81.0 max:81.0) ###" );
        PRINTNL();
    }
    else
    {
        DOOR_FIND_CLOSEST_SET_LIMIT_MIN( iParam0->_fU0, iParam0->_fU4, fParam1 );
        DOOR_FIND_CLOSEST_SET_LIMIT_MAX( iParam0->_fU0, iParam0->_fU4, fParam2 );
    }
    return;
}

/* P_OPENDOOR */ void sub_61032(int iParam0, int iParam1, int iParam2, unknown uParam3)
{
    float fVar6;

    if (( /* F_DOESDOOREXIST */ sub_32254( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_32338( iParam0 );
    }
    fVar6 = 0.00000000;
    if (iParam1 == 1)
    {
        fVar6 = uParam3;
    }
    else
    {
        fVar6 = -uParam3;
    }
    if (iParam2 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, fVar6 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    return;
}

/* NIS_IS_SHOT_FINISHED */ int sub_61196(int iParam0, boolean bParam1)
{
    if (bParam1 == 1)
    {
        if (NOT iParam0->_fU44)
        {
            if ((ref iParam0->_fU48->_fU16) || ( /* ISTIMERDONE */ sub_5911( iParam0 + 48 )))
            {
                iParam0->_fU44 = 1;
                iParam0->_fU36 = 1;
                return 1;
            }
        }
    }
    if (NOT bParam1)
    {
        if ((ref iParam0->_fU48->_fU16) || ( /* ISTIMERDONE */ sub_5911( iParam0 + 48 )))
        {
            iParam0->_fU36 = 1;
            return 1;
        }
    }
    return 0;
}

/* NIS_RETURN_TO_GAMEPLAY_CAM */ void sub_61374(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, float fParam4, unknown uParam5)
{
    SET_CAM_SIDE_LEFT( uParam2 );
    if (fParam4 != -1E8)
    {
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( uParam3, 1065353216, 0 );
    }
    if (fParam4 != -1E8)
    {
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( fParam4, 1065353216, 0 );
    }
    RENDER_SCRIPT_CAMS( 0, uParam1, uParam0, uParam5 );
    return;
}

/* P_HANDLE_HALLWAY_BARRICADE_ENEMIES */ void sub_61614()
{
    if (l_U1814 != 3)
    {
        if (IS_PED_DEAD( l_U1799[2] ))
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "Both Shooters are dead: eBarricadeState going to eBS_OutOfPit", 0 );
            l_U1814 = 3;
        }
    }
    switch (l_U1814)
    {
        case 0:
        if (( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_14332( ref l_U1137[1], 0 )) || ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_14332( ref l_U1137[0], 0 )))
        {
             /* MAL_CLEARACTINT */ sub_61859( ref l_U1799[2], 10 );
             /* PED_SET_ALERTNESS */ sub_35687( ref l_U1799[2], 3 );
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "eBarricadeState going to eBSTurretsNotFiring", 0 );
            l_U1814 = 1;
        }
        break;
        case 1:
        if ( /* F_ISPLAYERINTRIGGERREGION */ sub_55424( ref l_U1222, 0 ))
        {
             /* MAL_CLEARACTINT */ sub_61859( ref l_U1799[2], 10 );
             /* MAL_REGISTERTARGET */ sub_62046( ref l_U1799[2],  /* PLAYER_PED_ID */ sub_4651() );
             /* P_SHOOT_AT_PLAYER */ sub_62139( l_U1799[2], 0, 1, 0, 0, 750 );
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "eBarricadeState going to eBSTurretsAreFiring", 0 );
            l_U1814 = 2;
        }
        break;
        case 2:
        if (NOT ( /* F_ISPLAYERINTRIGGERREGION */ sub_55424( ref l_U1222, 0 )))
        {
            if ( /* IS_PED_VALID */ sub_13637( l_U1799[2] ))
            {
                CLEAR_PED_TASKS_IMMEDIATELY( l_U1799[2] );
            }
             /* MAL_SETACTINT */ sub_36073( l_U1799[2], 10, -1 );
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "eBarricadeState going to eBSTurretsNotFiring", 0 );
            l_U1814 = 1;
        }
        break;
        case 3: break;
    }
    return;
}

/* MAL_CLEARACTINT */ void sub_61859(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        PED_FINISH_ACTION_INTENTION( (uParam0^), uParam1 );
    }
    return;
}

/* MAL_REGISTERTARGET */ void sub_62046(unknown uParam0, unknown uParam1)
{
    if ((NOT (IS_PED_DEAD( uParam1 ))) AND (NOT (IS_PED_DEAD( (uParam0^) ))))
    {
        REGISTER_TARGET( (uParam0^), uParam1 );
    }
    return;
}

/* P_SHOOT_AT_PLAYER */ void sub_62139(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    unknown uVar8;

    if (( /* IS_MAX_VALID */ sub_13607()) AND ( /* IS_PED_VALID */ sub_13637( uParam0 )))
    {
        OPEN_SEQUENCE_TASK( ref uVar8 );
        TASK_PAUSE( 0, uParam5 );
        TASK_SHOOT_AT_PED( 0,  /* PLAYER_PED_ID */ sub_4651(), -1, uParam1, uParam2, uParam4, uParam3 );
        CLOSE_SEQUENCE_TASK( uVar8 );
        CLEAR_PED_TASKS( uParam0 );
        TASK_PERFORM_SEQUENCE( uParam0, uVar8 );
        CLEAR_SEQUENCE_TASK( uVar8 );
    }
    return;
}

/* P_START_SECOND_FLOOR_2_GAMEPLAY */ void sub_62570()
{
     /* P_ACTIVATE_HALL_ENEMIES */ sub_62614();
     /* P_CREATE_PIT_DUDES */ sub_62888();
     /* P_TASK_PIT_CHARGER */ sub_64336();
    return;
}

/* P_ACTIVATE_HALL_ENEMIES */ void sub_62614()
{
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_ACTIVATE_HALL_ENEMIES", "***" );
     /* PED_TASK_COMBAT_MOVE_TO_COVER */ sub_62746( l_U1799[0], "GenCover", "796176DD_8BDEAB45_Corner2",  /* PLAYER_PED_ID */ sub_4651(), 1 );
     /* PED_SET_REGISTER_TARGET_PLAYER */ sub_48343( ref l_U1799[1] );
    SET_PED_FORCE_START_FIRING_FROM_COVER( l_U1799[1] );
     /* PED_SET_COMBAT_MOVEMENT */ sub_35975( ref l_U1799[1], 2 );
    return;
}

/* PED_TASK_COMBAT_MOVE_TO_COVER */ void sub_62746(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if ( /* IS_PED_VALID */ sub_13637( uParam0 ))
    {
        CLEAR_PED_TASKS_IMMEDIATELY( uParam0 );
         /* PED_SET_LOCK_TO_COVER */ sub_34784( ref uParam0, uParam4 );
        TASK_COMBAT_MOVE_TO_COVER( uParam0, uParam1, uParam2, uParam3 );
    }
    return;
}

/* P_CREATE_PIT_DUDES */ void sub_62888()
{
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_CREATE_PIT_DUDES", "***" );
     /* PED_ARRAY_INITIALIZE */ sub_63008( ref l_U1818, ref l_U1884, ref l_U1890, -1013714740, 1.00000000, "AIT_NORMAL", 0, 0, 25000, 3, 0, 25000, "Pit" );
     /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1884[0], g_U1338 );
     /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1884[1], g_U1338 );
     /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1884[2], g_U1338 );
     /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1884[3], g_U1306 );
     /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1884[4], g_U1338 );
     /* PED_ARRAY_SET_COMBAT_MOVEMENT */ sub_35909( ref l_U1884, 0 );
    if ( /* IS_PED_VALID */ sub_13637( l_U1884[1] ))
    {
        SET_PED_CAN_AVOID_DEATH_ZONES( l_U1884[1], 0 );
        SET_PED_COMBAT_ATTRIBUTES( l_U1884[1], 1, 0 );
    }
    if ( /* IS_PED_VALID */ sub_13637( l_U1884[2] ))
    {
        SET_PED_CAN_AVOID_DEATH_ZONES( l_U1884[2], 0 );
        REMOVE_ALL_PED_WEAPONS( l_U1884[2] );
         /* F_GIVEPEDWEAPON */ sub_11429( l_U1884[2], -110877124, 25000, 0, 0 );
         /* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_35032( ref l_U1884[2], 1 );
    }
    if ( /* IS_PED_VALID */ sub_13637( l_U1884[3] ))
    {
        SET_PED_CAN_AVOID_DEATH_ZONES( l_U1884[3], 0 );
    }
    if ( /* IS_PED_VALID */ sub_13637( l_U1884[4] ))
    {
        SET_PED_CAN_AVOID_DEATH_ZONES( l_U1884[4], 0 );
    }
     /* P_DEACTIVATEPED */ sub_36338( l_U1884[3] );
     /* P_DEACTIVATEPED */ sub_36338( l_U1884[4] );
    return;
}

/* PED_ARRAY_INITIALIZE */ void sub_63008(unknown uParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5, boolean bParam6, unknown uParam7, unknown uParam8, unknown uParam9, int iParam10, unknown uParam11, unknown uParam12)
{
    int I;
    unknown uVar16;

    if ((uParam0^) != (uParam1^))
    {
        SCRIPT_ASSERT( "PED_ARRAY_INITIALIZE - Array sizes don't match!!", 0 );
        return;
    }
     /* P_SETUP_AI_GROUP */ sub_32708( uParam2, uParam4, 0 );
    if (IS_STRING_NULL( uParam12 ))
    {
        uParam12 = l_U89;
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* CLEANPED */ sub_8126( (uParam1^)[I] );
        (uParam1^)[I] =  /* CREATEPED */ sub_33185( ref (uParam0^)[I] );
        if ( /* IS_PED_VALID */ sub_13637( (uParam1^)[I] ))
        {
            SET_PED_AI_TEMPLATE( (uParam1^)[I], uParam5 );
            SET_PED_ALERTNESS( (uParam1^)[I], uParam9 );
            SET_PED_ALLOWED_TO_SURRENDER( (uParam1^)[I], 0 );
             /* P_QUICK_ADD_PED_TO_GROUP */ sub_34129( (uParam1^)[I], uParam2 );
            if (iParam3 != -1569615261)
            {
                uVar16 =  /* F_GIVEPEDWEAPON */ sub_11429( (uParam1^)[I], iParam3, uParam8, 0, 0 );
            }
            if (iParam10 != 0)
            {
                 /* F_GIVEPEDWEAPONTOHOLSTER */ sub_10634( (uParam1^)[I], iParam10, 0, uParam11, 0 );
            }
            if (bParam6)
            {
                 /* PED_SET_ENGAGEMENT_RANGES */ sub_63368( (uParam1^)[I], iParam3 );
            }
            switch (uParam7)
            {
                case 0: break;
                case 1:
                ENABLE_WEAPON_ATTACHMENT( uVar16, 13, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar16, 13, 1 );
                break;
                case 2:
                ENABLE_WEAPON_ATTACHMENT( uVar16, 14, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar16, 14, 1 );
                break;
                case 3:
                ENABLE_WEAPON_ATTACHMENT( uVar16, 12, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar16, 12, 1 );
                break;
            }
        }
    }
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_35774( uParam1, uParam12 );
    return;
}

/* PED_SET_ENGAGEMENT_RANGES */ void sub_63368(unknown uParam0, unknown uParam1)
{
    switch (uParam1)
    {
        case -1569615261:
        case 406496141:
        case -862236369:
        case 456708483:
        case -1464892298:
        case 68019059:
        case -612753081:
        case -820634585:
        SET_PED_COMBAT_RANGE_MAX( uParam0, 10.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 1.00000000 );
        break;
        case 434544317:
        case 1845102363:
        case -168327769:
        case -184942895:
        case 514118749:
        case 1964270085:
        case -691403429:
        case 1478009203:
        case -1404433099:
        case 1194438308:
        SET_PED_COMBAT_RANGE( uParam0, 1 );
        SET_PED_COMBAT_RANGE_MAX( uParam0, 20.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 1.00000000 );
        break;
        case -1013714740:
        case -1074756423:
        case 1308526797:
        case 840671040:
        case 57534114:
        case 724901397:
        case 1992962408:
        SET_PED_COMBAT_RANGE( uParam0, 2 );
        SET_PED_COMBAT_RANGE_MAX( uParam0, 30.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 1.00000000 );
        break;
        case 1224272620:
        case 10648147:
        case 377623895:
        case 319712764:
        case -110877124:
        case -1659006841:
        SET_PED_COMBAT_RANGE( uParam0, 3 );
        SET_PED_COMBAT_RANGE_MAX( uParam0, 50.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 5.00000000 );
        break;
    }
    return;
}

/* P_TASK_PIT_CHARGER */ void sub_64336()
{
    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1722, 0 );
     /* PED_SET_BLOCKING_OF_PED_TARGETTING */ sub_36676( ref l_U1722, 0 );
    REGISTER_TARGET( l_U1722,  /* PLAYER_PED_ID */ sub_4651() );
     /* PED_TASK_ATTACK_MOVE */ sub_50198( l_U1722, 1.67015500, 1.17795100, 13.06559000, 2.00000000, 1101004800, -1082130432, 3 );
    return;
}

/* GET_DISTANCE_BETWEEN_PEDS */ void sub_64957(unknown uParam0, unknown uParam1, boolean bParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;

    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        uVar5 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
    }
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        uVar8 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    }
    if (bParam2)
    {
        return VDIST( uVar5, uVar8 );
        break;
    }
    return VDIST( uVar5._fU0, uVar5._fU4, 0, uVar8._fU0, uVar8._fU4, 0 );
}

/* P_FREE_HALL_COVER_GUYS */ void sub_65147(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_FREE_HALL_COVER_GUYS", "***" );
     /* PED_SET_LOCK_TO_COVER */ sub_34784( ref uParam0, 0 );
     /* PED_SET_COMBAT_MOVEMENT */ sub_35975( ref uParam0, 2 );
    return;
}

/* P_CREATE_PLANNING_BOARD_POI */ void sub_65278()
{
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_CREATE_PLANNING_BOARD_POI", 0 );
     /* P_CREATEPOISTRUCTCOORD */ sub_65395( ref l_U2353, 1, l_U2439, l_U2439, l_U2439, 1.50000000, 3.00000000, 1, 0 );
     /* P_SET_INTERACTIVE_TEXT */ sub_31957( ref l_U2353, 30, "POI_HOT_PLANBRD" );
     /* P_SET_POI_REUSABLE */ sub_65557( ref l_U2353, 1 );
     /* P_SET_POI_FORCE_WALK */ sub_65610( ref l_U2353, 0 );
     /* P_SET_POI_AVAILABLE */ sub_65665( ref l_U2353, 0 );
    return;
}

/* P_CREATEPOISTRUCTCOORD */ void sub_65395(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14)
{
     /* P_CREATEBLANKPOISTRUCT */ sub_30886( iParam0, uParam13 );
    iParam0->_fU4 = uParam1;
    iParam0->_fU100 = {uParam5};
    iParam0->_fU112 = uParam11;
    iParam0->_fU200 = {uParam8};
    iParam0->_fU212 = uParam12;
    iParam0->_fU320 = uParam14;
    iParam0->_fU20 = {uParam2};
     /* P_CREATEPOIGLINT */ sub_31350( iParam0 );
    return;
}

/* P_SET_POI_REUSABLE */ void sub_65557(int iParam0, unknown uParam1)
{
    iParam0->_fU68 = uParam1;
    return;
}

/* P_SET_POI_FORCE_WALK */ void sub_65610(int iParam0, unknown uParam1)
{
    iParam0->_fU324 = uParam1;
    return;
}

/* P_SET_POI_AVAILABLE */ void sub_65665(int iParam0, int iParam1)
{
    if (iParam1 == 0)
    {
        iParam0->_fU60 = 1;
    }
    else
    {
        iParam0->_fU60 = 0;
    }
     /* P_UPDATEINTERACTIONTEXTAVAILABLE */ sub_57631( iParam0 );
    return;
}

/* MAL_MOVETOPOINTTHENCOMBATPED */ void sub_65821(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    unknown uVar10;

    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        CLEAR_PED_TASKS( (uParam0^) );
        SET_PED_COMBAT_MOVEMENT( (uParam0^), uParam5 );
        if (NOT (IS_PED_DEAD( uParam1 )))
        {
            OPEN_SEQUENCE_TASK( ref uVar10 );
            TASK_FOLLOW_NAV_MESH_TO_COORD( 0, uParam2, 3, uParam6, 1048576000, 0, 0 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, uParam7 );
            TASK_COMBAT_PED( 0, uParam1 );
            CLOSE_SEQUENCE_TASK( uVar10 );
            TASK_PERFORM_SEQUENCE( (uParam0^), uVar10 );
            CLEAR_SEQUENCE_TASK( uVar10 );
        }
    }
    return;
}

/* P_TURN_ON_FLASHLIGHT */ void sub_66014(unknown uParam0)
{
    unknown uVar3;

     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_TURN_ON_FLASHLIGHT", 0 );
    if ( /* IS_PED_VALID */ sub_13637( uParam0 ))
    {
        uVar3 = GET_WEAPON_FROM_HAND( uParam0, 0, 0 );
        if (GET_DOES_WEAPON_EXIST( uVar3 ))
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_TURN_ON_FLASHLIGHT: turning on", 0 );
            ENABLE_WEAPON_ATTACHMENT( uVar3, 14, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar3, 14, 1 );
            SET_WEAPON_LIGHT_DATA_BY_NAME( uVar3, "Flashlight_Hotel" );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_TURN_ON_FLASHLIGHT - ERROR: bad weapon index", 0 );
        }
    }
    return;
}

/* P_HANDLE_PIT_LOGIC */ void sub_66292()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    vector vVar5;
    vector vVar8;

    vVar5 = {14.43400000, 33.62600000, 13.05300000};
    vVar8 = {19.98446000, 30.49428000, 12.05285000};
    if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_14332( ref l_U785, 0 ))
    {
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_PIT_LOGIC: Max is in tbInPit", "***" );
        l_U208 = 14;
         /* P_TETHERPEDARRAY */ sub_66447( ref l_U1816, ref l_U1884, 1 );
         /* P_TETHERPEDARRAY */ sub_66447( ref l_U1817, ref l_U1884, 1 );
         /* P_TETHERPEDARRAY */ sub_66447( ref l_U1816, ref l_U1799, 1 );
         /* P_TETHERPEDARRAY */ sub_66447( ref l_U1817, ref l_U1799, 1 );
         /* P_REMOVEALLTETHERSFROMPED */ sub_66595( l_U1799[0] );
         /* P_REMOVEALLTETHERSFROMPED */ sub_66595( l_U1799[1] );
         /* P_TETHERPED */ sub_52938( ref l_U1815, l_U1799[0], 1 );
         /* P_TETHERPED */ sub_52938( ref l_U1815, l_U1799[1], 1 );
        RESET_PED_TETHERING( l_U1722 );
         /* P_TETHERPED */ sub_52938( ref l_U1815, l_U1722, 1 );
         /* PED_SET_COMBAT_MOVEMENT */ sub_35975( ref l_U1884[0], 2 );
         /* PED_SET_COMBAT_MOVEMENT */ sub_35975( ref l_U1884[1], 2 );
         /* PED_SET_COMBAT_MOVEMENT */ sub_35975( ref l_U1884[2], 2 );
        END_CONTEXT( "HOTEL_SECOND_FLOOR_BALCONY" );
         /* P_CREATE_PHOTOCOPY_POI */ sub_66829();
        l_U1814 = 3;
         /* P_CREATE_HALL_EXPLOSION_TANKS */ sub_67013();
        if (NOT (IS_PED_DEAD( l_U1799[2] )))
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_PIT_LOGIC: piPitCP[3] survived - sending him in", "***" );
             /* CLEANPED */ sub_8126( l_U1884[3] );
             /* TELEPORTPED */ sub_37851( l_U1799[2], vVar5, l_U1818[3]._fU12 );
             /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1799[2], g_U1306 );
             /* P_BARRICADE_GUY_IS_FREE */ sub_67461( l_U1799[2] );
             /* MAL_MOVETOPOINTTHENCOMBATPLAYER */ sub_67753( ref l_U1799[2], vVar8, 0 );
        }
        else if (IS_PED_DEAD( l_U1884[0] ))
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_PIT_LOGIC: Replacing LEFT with piPitCP[3]", "***" );
             /* P_ACTIVATEPED */ sub_36872( l_U1884[3] );
             /* TELEPORTPED */ sub_37851( l_U1884[3], vVar5, l_U1818[3]._fU12 );
             /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1884[3], g_U1306 );
             /* MAL_MOVETOPOINTTHENCOMBATPLAYER */ sub_67753( ref l_U1884[3], vVar8, 0 );
             /* PED_SET_COMBAT_MOVEMENT */ sub_35975( ref l_U1884[3], 2 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_PIT_LOGIC: No replacement - cleaning piPitCP[3]", "***" );
             /* CLEANPED */ sub_8126( l_U1884[3] );
        }
    }
    if (NOT l_U1754)
    {
        if (( /* IS_MAX_VALID */ sub_13607()) AND (l_U785._fU64))
        {
            uVar2 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS(  /* PLAYER_PED_ID */ sub_4651() )};
            if (uVar2._fU8 < 11.00000000)
            {
                 /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_PIT_LOGIC: Tranquility base here - the Max has landed", "***" );
                l_U1754 = 1;
                if (NOT (IS_PED_DEAD( l_U1884[1] )))
                {
                     /* PED_SET_COMBAT_RANGES */ sub_68390( ref l_U1884[1], 2.00000000, 5.00000000 );
                }
                if (NOT (IS_PED_DEAD( l_U1884[2] )))
                {
                     /* PED_SET_COMBAT_RANGES */ sub_68390( ref l_U1884[2], 2.00000000, 5.00000000 );
                }
                 /* P_CREATE_FINAL_GROUP */ sub_68532();
                if (IS_PED_DEAD( l_U1884[2] ))
                {
                     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_PIT_LOGIC: Replacing RIGHT with piPitCP[4]", "***" );
                     /* P_ACTIVATEPED */ sub_36872( l_U1884[4] );
                    if ( /* IS_PED_VALID */ sub_13637( l_U1884[4] ))
                    {
                         /* PED_SET_COMBAT_RANGES */ sub_68390( ref l_U1884[4], 2.00000000, 5.00000000 );
                    }
                     /* MAL_MOVETOPOINTTHENCOMBATPLAYER */ sub_67753( ref l_U1884[4], 22.67000000, 27.54000000, 13.05000000, 0 );
                     /* PED_SET_COMBAT_MOVEMENT */ sub_35975( ref l_U1884[4], 2 );
                    return;
                }
                if (IS_PED_DEAD( l_U1884[1] ))
                {
                     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_PIT_LOGIC: Replacing CENTER with piPitCP[4]", "***" );
                     /* P_ACTIVATEPED */ sub_36872( l_U1884[4] );
                    if ( /* IS_PED_VALID */ sub_13637( l_U1884[4] ))
                    {
                         /* PED_SET_COMBAT_RANGES */ sub_68390( ref l_U1884[4], 2.00000000, 5.00000000 );
                    }
                     /* MAL_MOVETOPOINTTHENCOMBATPLAYER */ sub_67753( ref l_U1884[4], l_U1818[1]._fU0, 0 );
                     /* PED_SET_COMBAT_MOVEMENT */ sub_35975( ref l_U1884[4], 2 );
                }
                else
                {
                     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_PIT_LOGIC: No replacement - cleaning piPitCP[4]", "***" );
                     /* CLEANPED */ sub_8126( l_U1884[4] );
                }
                 /* P_TURN_ON_FLASHLIGHT */ sub_66014( l_U1954[1] );
            }
        }
    }
    return;
}

/* P_TETHERPEDARRAY */ void sub_66447(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < (uParam1^); I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam1^)[I] )))
        {
             /* P_TETHERPED */ sub_52938( uParam0, (uParam1^)[I], uParam2 );
        }
    }
    return;
}

/* P_REMOVEALLTETHERSFROMPED */ void sub_66595(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        RESET_PED_TETHERING( uParam0 );
    }
    return;
}

/* P_CREATE_PHOTOCOPY_POI */ void sub_66829()
{
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_CREATE_PHOTOCOPY_POI", 0 );
     /* P_CREATEPOISTRUCTCOORD */ sub_65395( ref l_U2230, 1, l_U2316, l_U2316, l_U2316, 1.50000000, 3.00000000, 1, 0 );
     /* P_SET_INTERACTIVE_TEXT */ sub_31957( ref l_U2230, 30, "POI_HOT_PHOTCPY" );
     /* P_SET_POI_REUSABLE */ sub_65557( ref l_U2230, 1 );
     /* P_SET_POI_FORCE_WALK */ sub_65610( ref l_U2230, 0 );
     /* P_SET_POI_AVAILABLE */ sub_65665( ref l_U2230, 0 );
    return;
}

/* P_CREATE_HALL_EXPLOSION_TANKS */ void sub_67013()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_CREATE_HALL_EXPLOSION_TANKS", "***" );
    l_U342[0] = {25.78700000, 43.44900000, 13.07000000};
    l_U342[1] = {26.71700000, 42.67200000, 14.02000000};
    l_U342[2] = {26.45000000, 41.95500000, 13.19000000};
    l_U342[3] = {26.55900000, 42.42500000, 13.19000000};
    for ( I = 0; I <= 3; I++ )
    {
         /* MAL_RECREATEOBJECTWITHNOROTATIONINROOM */ sub_29754( ref l_U337[I], g_U1443, l_U342[I], ref g_U1306, 1, 0 );
        CAMERA_CAN_TARGET_OBJECT( 1, l_U337[I] );
        SET_OBJECT_ONLY_DAMAGED_BY_PLAYER( l_U337[I], 1 );
    }
    return;
}

/* P_BARRICADE_GUY_IS_FREE */ void sub_67461(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_BARRICADE_GUY_IS_FREE", 0 );
     /* MAL_CLEARACTINT */ sub_61859( ref uParam0, 10 );
     /* PED_SET_ALERTNESS */ sub_35687( ref uParam0, 3 );
     /* MAL_FREEZEPED */ sub_50702( ref uParam0, 0 );
     /* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_35032( ref uParam0, 0 );
     /* P_PED_REGISISTER_AND_LOCK_TARGET */ sub_67569( ref uParam0,  /* PLAYER_PED_ID */ sub_4651() );
     /* PED_SET_COMBAT_MOVEMENT */ sub_35975( ref uParam0, 2 );
    if ( /* IS_PED_VALID */ sub_13637( uParam0 ))
    {
        SET_PED_SUFFERS_CRITICAL_HITS( uParam0, 1 );
        SET_PED_COMBAT_ATTRIBUTES( uParam0, 1, 1 );
        SET_PED_NO_RAGDOLL_TO_BULLET_UNLESS_DEAD( uParam0, 0 );
    }
    return;
}

/* P_PED_REGISISTER_AND_LOCK_TARGET */ void sub_67569(unknown uParam0, unknown uParam1)
{
    if ((NOT (IS_PED_DEAD( (uParam0^) ))) AND (NOT (IS_PED_DEAD( uParam1 ))))
    {
        CLEAR_LOCKED_TARGET( (uParam0^) );
        REGISTER_TARGET( (uParam0^), uParam1 );
        SET_LOCKED_TARGET( (uParam0^), uParam1 );
    }
    return;
}

/* MAL_MOVETOPOINTTHENCOMBATPLAYER */ void sub_67753(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    unknown uVar7;

    if ((NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() ))) AND (NOT (IS_PED_DEAD( (uParam0^) ))))
    {
        OPEN_SEQUENCE_TASK( ref uVar7 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( 0, uParam1, 3, 20000, 1048576000, 0, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, uParam4 );
        TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_4651() );
        CLOSE_SEQUENCE_TASK( uVar7 );
        TASK_PERFORM_SEQUENCE( (uParam0^), uVar7 );
        CLEAR_SEQUENCE_TASK( uVar7 );
    }
    return;
}

/* PED_SET_COMBAT_RANGES */ void sub_68390(unknown uParam0, float fParam1, float fParam2)
{
    if ( /* IS_PED_VALID */ sub_13637( (uParam0^) ))
    {
        if (fParam1 > -1)
        {
            SET_PED_COMBAT_RANGE_MIN( (uParam0^), fParam1 );
        }
        if (fParam2 > -1)
        {
            SET_PED_COMBAT_RANGE_MAX( (uParam0^), fParam2 );
        }
    }
    return;
}

/* P_CREATE_FINAL_GROUP */ void sub_68532()
{
    int I;
    unknown uVar3;

     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_CREATE_FINAL_GROUP", "***" );
     /* PED_ARRAY_INITIALIZE */ sub_63008( ref l_U1914, ref l_U1954, ref l_U1958, -1013714740, 1.00000000, "AIT_NORMAL", 0, 0, 25000, 2, 0, 25000, 0 );
     /* PED_ARRAY_SET_ROOM_BY_NAME */ sub_68666( ref l_U1954, g_U1306 );
     /* PED_ARRAY_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_40353( ref l_U1954, 1 );
    for ( I = 0; I <= 2; I++ )
    {
        if ( /* IS_PED_VALID */ sub_13637( l_U1954[I] ))
        {
            SET_BLOCKING_OF_PED_TARGETTING( l_U1954[I], 1 );
            SET_PED_OBLIVIOUS_TO_DANGER( l_U1954[I], 1 );
        }
    }
     /* PED_ARRAY_SET_COMBAT_MOVEMENT */ sub_35909( ref l_U1954, 0 );
     /* PED_ARRAY_SET_ALERTNESS */ sub_68878( ref l_U1954, 3 );
     /* P_TETHERPEDARRAY */ sub_66447( ref l_U1964, ref l_U1954, 1 );
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_35774( ref l_U1954, "Final" );
    uVar3 = GET_WEAPON_FROM_HAND( l_U1954[1], 0, 0 );
    if (GET_DOES_WEAPON_EXIST( uVar3 ))
    {
        ENABLE_WEAPON_ATTACHMENT( uVar3, 14, 1 );
        TOGGLE_WEAPON_ATTACHMENT( uVar3, 14, 1 );
        SET_WEAPON_LIGHT_DATA_BY_NAME( GET_WEAPON_FROM_HAND( l_U1954[1], 0, 0 ), "Flashlight_Hotel" );
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "ERROR: Can't set light data for piFinalCP[1]", 0 );
    }
    return;
}

/* PED_ARRAY_SET_ROOM_BY_NAME */ void sub_68666(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ( /* IS_PED_VALID */ sub_13637( (uParam0^)[I] ))
        {
             /* PED_SET_ROOM_BY_NAME */ sub_34572( ref (uParam0^)[I], uParam1 );
        }
    }
    return;
}

/* PED_ARRAY_SET_ALERTNESS */ void sub_68878(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* PED_SET_ALERTNESS */ sub_35687( ref (uParam0^)[I], uParam1 );
    }
    return;
}

/* F_OKAY_TO_DEPLOY_AFTER_PIT_GUYS */ int sub_69659()
{
    if (NOT l_U1912)
    {
        if ( /* F_ISPLAYERINTRIGGERBOX */ sub_41582( l_U827 ))
        {
            if ((NOT (IS_PED_DEAD( l_U1799[2] ))) || (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_53462( ref l_U1884 )) > 0))
            {
                return 0;
            }
            else
            {
                l_U1912 = 1;
            }
        }
    }
    else if (NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_41582( l_U827 )))
    {
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "F_OKAY_TO_DEPLOY_AFTER_PIT_GUYS: Max left back room --> TRUE", "***" );
        return 1;
    }
    return 0;
}

/* P_CREATE_AFTER_PIT_GUYS */ void sub_69898()
{
    int I;
    unknown uVar3;

     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_CREATE_AFTER_PIT_GUYS", "***" );
    for ( I = 0; I <= 0; I++ )
    {
         /* PED_INITIALIZE */ sub_33148( ref l_U1896[I], ref l_U1910[I], -1013714740, "AIT_NORMAL", 0, 25000, 2, 0, 25000 );
        if (I == 1)
        {
             /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1910[I], g_U1338 );
            SET_PED_PATH_CAN_USE_CLIMBOVERS( l_U1910[I], 0 );
             /* P_TETHERPED */ sub_52938( ref l_U1815, l_U1910[I], 1 );
             /* PED_TASK_RUN_TO_LOCATION_AND_COMBAT_PLAYER */ sub_70125( ref l_U1910[I], 11.27118000, 16.92023000, 13.05289000, 2 );
        }
        else
        {
             /* PED_SET_ROOM_BY_NAME */ sub_34572( ref l_U1910[I], g_U1306 );
             /* PED_SET_COMBAT_RANGES */ sub_68390( ref l_U1910[I], 2.00000000, 5.00000000 );
            REMOVE_ALL_PED_WEAPONS( l_U1910[I] );
             /* F_GIVEPEDWEAPON */ sub_11429( l_U1910[I], 514118749, 25000, 0, 0 );
             /* P_TETHERPED */ sub_52938( ref l_U1817, l_U1910[I], 1 );
             /* P_TETHERPED */ sub_52938( ref l_U1816, l_U1910[I], 1 );
            OPEN_SEQUENCE_TASK( ref uVar3 );
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )))
            {
                TASK_ATTACK_MOVE_WHILE_AIMING_AT_PED( 0, 17.37431000, 31.99277000, 13.03490000,  /* PLAYER_PED_ID */ sub_4651(), 1, 4, 1101004800, -1082130432, 3 );
            }
            CLOSE_SEQUENCE_TASK( uVar3 );
            CLEAR_PED_TASKS( l_U1910[I] );
            TASK_PERFORM_SEQUENCE( l_U1910[I], uVar3 );
            CLEAR_SEQUENCE_TASK( uVar3 );
        }
    }
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_35774( ref l_U1910, "AfterPit" );
    return;
}

/* PED_TASK_RUN_TO_LOCATION_AND_COMBAT_PLAYER */ void sub_70125(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    unknown uVar7;

    if ( /* IS_PED_VALID */ sub_13637( (uParam0^) ))
    {
        CLEAR_PED_TASKS_IMMEDIATELY( (uParam0^) );
        CLEAR_LOCKED_TARGET( (uParam0^) );
         /* PED_SET_REGISTER_TARGET_PLAYER */ sub_48343( uParam0 );
         /* PED_SET_LOCKED_ON_PLAYER */ sub_35514( uParam0 );
        OPEN_SEQUENCE_TASK( ref uVar7 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( 0, uParam1, uParam4, 20000, 1048576000, 0, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        if ( /* IS_MAX_VALID */ sub_13607())
        {
            TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_4651() );
        }
        CLOSE_SEQUENCE_TASK( uVar7 );
        TASK_PERFORM_SEQUENCE( (uParam0^), uVar7 );
        CLEAR_SEQUENCE_TASK( uVar7 );
    }
    return;
}

/* F_HAS_FINAL_CP_NOTICED_MAX */ int sub_70661()
{
    int I;
    unknown uVar3;

    uVar3 =  /* PLAYER_PED_ID */ sub_4651();
    if ( /* F_ISPLAYERINTRIGGERBOX */ sub_41582( l_U848 ))
    {
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "F_HAS_FINAL_CP_NOTICED_MAX: PLAYER OUT OF PIT", 0 );
        return 1;
    }
    if ( /* F_ISPLAYERINTRIGGERBOX */ sub_41582( l_U806 ))
    {
        if (GET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1954[2] ))
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "F_HAS_FINAL_CP_NOTICED_MAX: removing event blocking", 0 );
             /* PED_ARRAY_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_40353( ref l_U1954, 0 );
        }
        for ( I = 0; I <= 2; I++ )
        {
            if ( /* IS_PED_VALID */ sub_13637( l_U1954[I] ))
            {
                if (GET_PED_AWARENESS_STATE( l_U1954[I],  /* PLAYER_PED_ID */ sub_4651(), 8 ))
                {
                     /* WRITESCRIPTLOG */ sub_1201( "SBA", "F_HAS_FINAL_CP_NOTICED_MAX: PLAYER shot at FinalCP", 0 );
                    return 1;
                }
            }
        }
        if (HAS_BULLET_IMPACTED_IN_AREA( 24.42000000, 41.86000000, 13.07000000, 5.40000000, ref uVar3 ))
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "F_HAS_FINAL_CP_NOTICED_MAX: Bullet impact", 0 );
            return 1;
        }
    }
    return 0;
}

/* PED_ARRAY_SET_BLOCKING_OF_PED_TARGETTING */ void sub_71194(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* PED_SET_BLOCKING_OF_PED_TARGETTING */ sub_36676( ref (uParam0^)[I], uParam1 );
    }
    return;
}

/* P_FINISH_MAX_EXPLOSION_REACTION */ void sub_71340()
{
    if (((PED_GET_ACTION_INTENTION_STATUS(  /* PLAYER_PED_ID */ sub_4651(), 4 )) == 1) || (((PED_GET_ACTION_INTENTION_STATUS(  /* PLAYER_PED_ID */ sub_4651(), 5 )) == 1) || ((PED_GET_ACTION_INTENTION_STATUS(  /* PLAYER_PED_ID */ sub_4651(), 3 )) == 1)))
    {
         /* WRITESCRIPTLOG */ sub_1201( "GA", "Forcing the player to prone.", 0 );
        TASK_SHOOTDODGE(  /* PLAYER_PED_ID */ sub_4651(), 1, 0, 0 );
        PED_FINISH_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_4651(), 3 );
        PED_FINISH_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_4651(), 5 );
        PED_FINISH_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_4651(), 4 );
        SET_CAMERA_OVERRIDE( "", "", 0, 1, 1 );
    }
    if ( /* ISTIMERDONE */ sub_5911( ref l_U1983 ))
    {
        if (((PED_GET_ACTION_INTENTION_STATUS(  /* PLAYER_PED_ID */ sub_4651(), 4 )) != 3) AND (((PED_GET_ACTION_INTENTION_STATUS(  /* PLAYER_PED_ID */ sub_4651(), 5 )) != 3) AND ((PED_GET_ACTION_INTENTION_STATUS(  /* PLAYER_PED_ID */ sub_4651(), 3 )) != 3)))
        {
             /* WRITESCRIPTLOG */ sub_1201( "GA", "Reaction didn't start, cancelling action intention.", 0 );
            PED_FINISH_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_4651(), 3 );
            PED_FINISH_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_4651(), 5 );
            PED_FINISH_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_4651(), 4 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_1201( "GA", "Overriding camera to HOTEL_STUMBLE_CAMERA", 0 );
            SET_CAMERA_OVERRIDE( "HOTEL_STUMBLE_CAMERA", "HOTEL_STUMBLE_CAMERA", 0, 1, 1 );
        }
    }
    if ( /* ISTIMERDONE */ sub_5911( ref l_U363 ))
    {
        DEACTIVATE_BULLET_TIME( 1, 0 );
    }
    return;
}

/* P_HANDLE_HALLWAY_PROPANE_TANKS */ void sub_71865()
{
    float fVar2;

    if (DOES_OBJECT_EXIST( l_U337[2] ))
    {
        if (IS_EXPLOSION_IN_SPHERE( -1, 25.20621000, 42.40577000, 13.25363000, 4.00000000 ))
        {
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_HALLWAY_PROPANE_TANKS: Explosion detected!", 0 );
            l_U208 = 17;
             /* P_CLEANUP_HALLWAY_PROPANE_TANKS */ sub_72033();
             /* P_PLAY_HALLWAY_EXPLOSION */ sub_72094();
            ADD_EXPLOSION( 24.20621000, 42.40577000, 13.05363000, 0, 1.00000000, 1, 0, 1065353216 );
            if ( /* F_ISPLAYERINTRIGGERBOX */ sub_41582( l_U869 ))
            {
                if (NOT (IS_PED_USING_MP3_COVER_TASK(  /* PLAYER_PED_ID */ sub_4651() )))
                {
                    fVar2 = GET_PED_HEADING(  /* PLAYER_PED_ID */ sub_4651() );
                     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_HALLWAY_PROPANE_TANKS: Max's heading:", 0 );
                     /* WRITE_FLOAT */ sub_27493( fVar2 );
                    if ((fVar2 < 200.00000000) AND (fVar2 > 60.00000000))
                    {
                         /* P_ROOF_KNOCK_PLAYER_ON_ASS */ sub_72671( 1 );
                    }
                    else if ((fVar2 < 360.00000000) AND (fVar2 > 260.00000000))
                    {
                         /* P_ROOF_KNOCK_PLAYER_ON_ASS */ sub_72671( 0 );
                    }
                    else
                    {
                         /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_HALLWAY_PROPANE_TANKS: Max stumbles!", 0 );
                        TASK_SET_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_4651(), 3, -1, 1000 );
                        l_U362 = 1;
                    }
                    if (NOT l_U362)
                    {
                         /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_HALLWAY_PROPANE_TANKS: Bullet Time Starts", 0 );
                         /* P_CREATE_AND_START_TIMER */ sub_51025( ref l_U363, 700 );
                        DEACTIVATE_BULLET_TIME( 1, 0 );
                        ACTIVATE_BULLET_TIME( 0, 1065353216, 1 );
                    }
                }
                 /* P_SHAKE_CAM */ sub_73241( "SMALL_EXPLOSION_SHAKE", 0.50000000 );
                SET_PAD_SHAKE( 0, 600, 64 );
            }
        }
    }
    return;
}

/* P_CLEANUP_HALLWAY_PROPANE_TANKS */ void sub_72033()
{
     /* CLEANOBJECTARRAY */ sub_7412( ref l_U337 );
    return;
}

/* P_PLAY_HALLWAY_EXPLOSION */ void sub_72094()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_PLAY_HALLWAY_EXPLOSION", "***" );
     /* CLEANOBJECT */ sub_7189( g_U2092 );
     /* MAL_RECREATEOBJECTINROOM */ sub_29824( ref g_U2092, 2108528827, l_U355, l_U358, ref g_U1306, 1, 1 );
     /* CLEANOBJECT */ sub_7189( l_U336 );
     /* MAL_RECREATEOBJECTWITHNOROTATIONINROOM */ sub_29754( ref l_U336, 77932492, 27.00000000, 43.60000000, 14.20000000, ref g_U1314, 1, 0 );
     /* MAL_PLAYOBJECTANIM */ sub_72309( l_U336, "P_HO_EXPDOR_AN_H", "ho_doorexplode", 0.60000000, 0 );
    for ( I = 0; I <= 2; I++ )
    {
        if (NOT (IS_PED_DEAD( l_U1954[I] )))
        {
            SET_ARCADEMODE_EVENT( 2, l_U1954[I] );
        }
         /* P_KILL_PED */ sub_14601( l_U1954[I] );
    }
    return;
}

/* MAL_PLAYOBJECTANIM */ void sub_72309(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        PLAY_OBJECT_ANIM( uParam0, uParam1, uParam2, 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_CURRENT_TIME( uParam0, uParam1, uParam2, uParam4 );
        SET_OBJECT_ANIM_SPEED( uParam0, uParam1, uParam2, uParam3 );
    }
    return;
}

/* P_ROOF_KNOCK_PLAYER_ON_ASS */ void sub_72671(boolean bParam0)
{
     /* WRITESCRIPTLOG */ sub_1201( "GA", "P_ROOF_KNOCK_PLAYER_ON_ASS start", 0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )))
    {
        if (bParam0)
        {
             /* WRITESCRIPTLOG */ sub_1201( "GA", "P_ROOF_KNOCK_PLAYER_ON_ASS: Forward", 0 );
            TASK_SET_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_4651(), 4, -1, 1000 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_1201( "GA", "P_ROOF_KNOCK_PLAYER_ON_ASS: Backward", 0 );
            TASK_SET_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_4651(), 5, -1, 1000 );
        }
         /* STARTTIMER */ sub_5778( ref l_U1983 );
    }
     /* WRITESCRIPTLOG */ sub_1201( "GA", "P_ROOF_KNOCK_PLAYER_ON_ASS end", 0 );
    return;
}

/* P_SHAKE_CAM */ void sub_73241(unknown uParam0, unknown uParam1)
{
    SHAKE_CAM( GET_RENDERING_CAM(), uParam0, uParam1 );
    SHAKE_GAMEPLAY_CAM( uParam0, uParam1 );
    return;
}

/* P_HANDLE_STAIR_IMAGEFX */ void sub_73385()
{
    if ( /* F_ISPEDINTRIGGERBOXFIRSTTIME */ sub_52279( ref l_U1095,  /* PLAYER_PED_ID */ sub_4651(), 0 ))
    {
         /* WRITESCRIPTLOG */ sub_1201( "CO", "P_HANDLE_STAIR_IMAGEFX_01", 0 );
        PLAY_IMAGEFX( "DOUBLE_MOVE_FLASH_HARD", 4, 0 );
        PLAY_IMAGEFX( "DOUBLE_TINT_BLUE_FLASH", 4, 0 );
         /* P_KILL_ALL_2ND_FLOOR_PEDS */ sub_73549();
    }
    if ( /* F_ISPEDINTRIGGERBOXFIRSTTIME */ sub_52279( ref l_U1116,  /* PLAYER_PED_ID */ sub_4651(), 0 ))
    {
         /* WRITESCRIPTLOG */ sub_1201( "CO", "P_HANDLE_STAIR_IMAGEFX_02", 0 );
        PLAY_IMAGEFX( "FLICKER_VIBRATE_INTERLACE_M", 4, 0 );
    }
    return;
}

/* P_KILL_ALL_2ND_FLOOR_PEDS */ void sub_73549()
{
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_KILL_ALL_2ND_FLOOR_PEDS", 0 );
     /* CLEANPEDARRAY */ sub_8076( ref l_U1392 );
     /* CLEANPEDARRAY */ sub_8076( ref l_U1548 );
     /* CLEANPEDARRAY */ sub_8076( ref l_U1618 );
     /* CLEANPEDARRAY */ sub_8076( ref l_U1663 );
     /* CLEANPEDARRAY */ sub_8076( ref l_U1706 );
     /* CLEANPED */ sub_8126( l_U1722 );
     /* CLEANPED */ sub_8126( l_U1736 );
     /* P_KILL_PEDS_IN_ARRAY */ sub_73696( ref l_U1799 );
     /* P_KILL_PEDS_IN_ARRAY */ sub_73696( ref l_U1884 );
     /* P_KILL_PEDS_IN_ARRAY */ sub_73696( ref l_U1910 );
     /* P_KILL_PEDS_IN_ARRAY */ sub_73696( ref l_U1954 );
    l_U1913 = 1;
    return;
}

/* P_KILL_PEDS_IN_ARRAY */ void sub_73696(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
         /* P_KILL_PED */ sub_14601( (uParam0^)[I] );
    }
    return;
}

/* P_ASSIGN_SECOND_FLOOR_PIT_BULLET_CAM */ int sub_73933()
{
    if ((l_U2350 + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_53462( ref l_U1954 ))) == 1)
    {
        if (NOT (IS_PED_DEAD( l_U1722 )))
        {
            if (NOT (GET_PED_CAN_TRIGGER_BULLET_CAM( l_U1722 )))
            {
                SET_PED_CAN_TRIGGER_BULLET_CAM( l_U1722, 1 );
            }
        }
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_ASSIGN_SECOND_FLOOR_PIT_BULLET_CAM: Assigning bullet cam", 0 );
         /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_56061( ref l_U1799 );
         /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_56061( ref l_U1884 );
         /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_56061( ref l_U1954 );
         /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_56061( ref l_U1910 );
        return 1;
    }
    return 0;
}

/* P_RESET_HOTEL_2ND_BULLET_CAM */ void sub_74217()
{
     /* P_RESET_BULLET_CAM */ sub_74262( ref l_U1799 );
     /* P_RESET_BULLET_CAM */ sub_74262( ref l_U1884 );
     /* P_RESET_BULLET_CAM */ sub_74262( ref l_U1954 );
     /* P_RESET_BULLET_CAM */ sub_74262( ref l_U1910 );
    if (NOT (IS_PED_DEAD( l_U1722 )))
    {
        if (GET_PED_CAN_TRIGGER_BULLET_CAM( l_U1722 ))
        {
            SET_PED_CAN_TRIGGER_BULLET_CAM( l_U1722, 0 );
        }
    }
    return;
}

/* P_RESET_BULLET_CAM */ void sub_74262(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            if (GET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I] ))
            {
                 /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_RESET_BULLET_CAM: Un-assigning bullet cam", 0 );
                SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I], 0 );
            }
        }
    }
    return;
}

/* TAKE_PAINKILLER_ARRAY_SNAPSHOT */ void sub_74560(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (DOES_PLACEMENT_EXIST( (uParam0^)[I] ))
        {
             /* WRITESCRIPTLOG */ sub_1201( "RJM", "DO_ANY_PAINKILLERS_STILL_EXIST - Found a pill in there, we can still play some V.O.", 0 );
            (uParam1^)[I] = 1;
        }
        else
        {
            (uParam1^)[I] = 0;
        }
    }
    return;
}

/* P_HANDLE_FINAL_EXPLOSION_HINT */ void sub_74802()
{
    if (DOES_OBJECT_EXIST( l_U337[2] ))
    {
        if (NOT ( /* HASTIMERBEENACTIVATED */ sub_5494( ref l_U1992 )))
        {
            if ((l_U2350 + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_53462( ref l_U1954 ))) == 0)
            {
                 /* WRITESCRIPTLOG */ sub_1201( "SBA", "Starting Timer: tmrExplosionHint", 0 );
                 /* P_CREATE_AND_START_TIMER */ sub_51025( ref l_U1992, 15000 );
            }
        }
        else if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_74965()))
        {
            if (( /* F_ISPLAYERINTRIGGERBOX */ sub_41582( l_U869 )) || ( /* F_ISPLAYERINTRIGGERBOX */ sub_41582( l_U848 )))
            {
                if ( /* ISTIMERDONE */ sub_5911( ref l_U1992 ))
                {
                     /* WRITESCRIPTLOG */ sub_1201( "SBA", "Playing Explosion Hint VO", 0 );
                     /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_75166( "SHOT_STFKNTA", ref l_U2617 );
                }
            }
        }
    }
    return;
}

/* IS_ANY_SPEECH_CURRENTLY_PLAYING */ void sub_74965()
{
    int Result;
    int I;

    Result = 0;
    for ( I = 0; I <= 3; I++ )
    {
        Result = (IS_SCRIPTED_CONVERSATION_ONGOING( I )) || (Result);
    }
    return Result;
}

/* P_SPEECH_PLAY_MAX_MONOLOGUE */ void sub_75166(unknown uParam0, unknown uParam1)
{
     /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_SPEECH_PLAY_MAX_MONOLOGUE", "***" );
    if ( /* IS_MAX_VALID */ sub_13607())
    {
         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_42169( uParam1 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_42293( 0,  /* PLAYER_PED_ID */ sub_4651(), "MAX", uParam1, 2, 0 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_42293( 1,  /* PLAYER_PED_ID */ sub_4651(), "MAX", uParam1, 2, 0 );
         /* PLAY_SINGLE_SPEECH */ sub_42575( uParam0, uParam1, 8, 1 );
    }
    return;
}

/* P_HANDLE_PHOTOCOPY_POI */ void sub_75381()
{
    if ( /* F_HANDLE_POI */ sub_58223( ref l_U2230 ))
    {
        l_U2229 = 0;
    }
    if ( /* HANDLE_PHOTOCOPY_POI_CAM */ sub_75436())
    {
         /* P_ENABLE_POI */ sub_57365( ref l_U2230, 1 );
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_PHOTOCOPY_POI: POI has been used", 0 );
    }
    if ( /* F_POI_CAN_PLAY_UNAVALIABLE_MONO */ sub_76465( ref l_U2230 ))
    {
         /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_75166( "EXPLORE_ITEM", ref l_U2338 );
    }
    return;
}

/* HANDLE_PHOTOCOPY_POI_CAM */ void sub_75436()
{
    int Result;

    Result = 0;
    switch (l_U2229)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "HANDLE_PHOTOCOPY_POI_CAM: ePhotocopy = ASS_SETUP", 0 );
         /* NIS_PRE_SETUP */ sub_37963( 1, 0, 0, 1 );
        l_U2229 = 3;
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "HANDLE_PHOTOCOPY_POI_CAM: ePhotocopy = ASS_WAITING_TO_PLAY", 0 );
        CAMERA_PLAY_ANIMATED( "EXPL_CAM", "EXPL_CAM_GND_15_F_CAM", 1, 25.67000000, 31.09000000, 13.54000000, 65466, 0, 0 );
        if (NOT (HAS_EXPLORATION_ITEM_BEEN_FOUND( "shot_IDCard" )))
        {
             /* KILL_ANY_MISSION_SPEECH */ sub_75768( 0 );
             /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_75166( "SHOT_MXPSSDC", ref l_U2328 );
            FOUND_EXPLORATION_ITEM( "shot_IDCard" );
        }
        else
        {
             /* CREATETIMER */ sub_5628( ref l_U2319, 4000, 1, 0 );
             /* STARTTIMER */ sub_5778( ref l_U2319 );
        }
        if ( /* IS_MAX_VALID */ sub_13607())
        {
            SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_4651(), 0 );
            SET_PED_DEFAULT_AIM_AHEAD(  /* PLAYER_PED_ID */ sub_4651() );
        }
        l_U2229 = 4;
        break;
        case 4:
        if (((NOT ( /* IS_SPEECH_CURRENTLY_PLAYING */ sub_47133( l_U2328 ))) AND (NOT l_U2319._fU20)) || ( /* ISTIMERDONE */ sub_5911( ref l_U2319 )))
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )))
            {
                SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_4651(), 1 );
            }
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "HANDLE_PHOTOCOPY_POI_CAM: Cam cut done, going to ePhotocopy = ASS_FINISHED", 0 );
            l_U2229 = 5;
        }
        break;
        case 5:
         /* NIS_POST_SETUP */ sub_38578( 1, 1 );
        if ( /* IS_MAX_VALID */ sub_13607())
        {
            CLEAR_PED_DEFAULT_AIM(  /* PLAYER_PED_ID */ sub_4651() );
        }
        Result = 1;
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "HANDLE_PHOTOCOPY_POI_CAM: going to ePhotocopy = ASS_INACTIVE", 0 );
        l_U2229 = -1;
        break;
    }
    return Result;
}

/* KILL_ANY_MISSION_SPEECH */ void sub_75768(unknown uParam0)
{
    int I;

    for ( I = 0; I <= 3; I++ )
    {
        PRINTSTRING( "\n KILL_ANY_MISSION_SPEECH CALLED***************************************" );
        if (IS_SCRIPTED_CONVERSATION_ONGOING( I ))
        {
            if ((g_U1[I] <= 8) AND (g_U1[I] >= 4))
            {
                STOP_SCRIPTED_CONVERSATION( I, uParam0, 0 );
            }
        }
    }
    return;
}

/* F_POI_CAN_PLAY_UNAVALIABLE_MONO */ int sub_76465(int iParam0)
{
    if ((iParam0->_fU8 == 2) AND ((iParam0->_fU76 == 0) AND (( /* F_IS_POI_AVAILABLE */ sub_76511( iParam0 )) == 0)))
    {
        if ((( /* F_HASACTIONBEENPRESSED */ sub_59120()) == 1) AND (((IS_PED_RELOADING(  /* PLAYER_PED_ID */ sub_4651() )) == 0) AND (((IS_PED_GETTING_UP(  /* PLAYER_PED_ID */ sub_4651() )) == 0) AND (((IS_PED_PICKING_UP_PICKUP(  /* PLAYER_PED_ID */ sub_4651() )) == 0) AND (((IS_PED_IN_COVER(  /* PLAYER_PED_ID */ sub_4651() )) == 0) AND (((IS_PED_DUCKING(  /* PLAYER_PED_ID */ sub_4651() )) == 0) AND ((IS_PLAYER_SHOOTDODGING() == 0) AND ((IS_MONOLOGUE_PLAYING() == 0) AND ((IS_INTERACTIONTEXT_AVAILABLE() == 0) AND (IS_INTERACTIONTEXT_ONSCREEN() == 1))))))))))
        {
            iParam0->_fU76 = 1;
            return 1;
        }
    }
    return 0;
}

/* F_IS_POI_AVAILABLE */ void sub_76511(int iParam0)
{
    return iParam0->_fU56;
}

/* P_HANDLE_PLANNING_BOARD_POI */ void sub_76767()
{
    if ( /* F_HANDLE_POI */ sub_58223( ref l_U2353 ))
    {
        l_U2352 = 0;
    }
    if ( /* HANDLE_PLANNING_BOARD_POI_CAM */ sub_76827())
    {
         /* P_ENABLE_POI */ sub_57365( ref l_U2353, 1 );
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "P_HANDLE_PLANNING_BOARD_POI: POI has been used", 0 );
    }
    if ( /* F_POI_CAN_PLAY_UNAVALIABLE_MONO */ sub_76465( ref l_U2353 ))
    {
         /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_75166( "EXPLORE_ITEM", ref l_U2338 );
    }
    return;
}

/* HANDLE_PLANNING_BOARD_POI_CAM */ void sub_76827()
{
    int Result;

    Result = 0;
    switch (l_U2352)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "HANDLE_PLANNING_BOARD_POI_CAM: ePlanningBoard = ASS_SETUP", 0 );
         /* NIS_PRE_SETUP */ sub_37963( 1, 0, 0, 1 );
        l_U2352 = 3;
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "HANDLE_PLANNING_BOARD_POI_CAM: ePlanningBoard = ASS_WAITING_TO_PLAY", 0 );
        CAMERA_PLAY_ANIMATED( "EXPL_CAM", "EXPL_CAMPANWAL_25_LF", 1, 24.37000000, 30.46000000, 14.98000000, 65436, 0, 0 );
        if (NOT (HAS_EXPLORATION_ITEM_BEEN_FOUND( "shot_Photos" )))
        {
             /* KILL_ANY_MISSION_SPEECH */ sub_75768( 0 );
             /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_75166( "SHOT_MXFTSDS", ref l_U2451 );
            FOUND_EXPLORATION_ITEM( "shot_Photos" );
             /* CREATETIMER */ sub_5628( ref l_U2442, 5000, 1, 0 );
             /* STARTTIMER */ sub_5778( ref l_U2442 );
        }
        else
        {
             /* CREATETIMER */ sub_5628( ref l_U2442, 4000, 1, 0 );
             /* STARTTIMER */ sub_5778( ref l_U2442 );
        }
        if ( /* IS_MAX_VALID */ sub_13607())
        {
            SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_4651(), 0 );
            CLEAR_PED_TASKS_IMMEDIATELY(  /* PLAYER_PED_ID */ sub_4651() );
            RESET_PLAYER_INPUT_GAIT( 0 );
             /* TELEPORTPED */ sub_37851(  /* PLAYER_PED_ID */ sub_4651(), 25.39800000, 29.82815000, 13.05279000, 236.00000000 );
        }
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0, 1065353216, 0 );
        l_U2352 = 4;
        break;
        case 4:
        if ( /* ISTIMERDONE */ sub_5911( ref l_U2442 ))
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_4651() )))
            {
                SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_4651(), 1 );
            }
             /* WRITESCRIPTLOG */ sub_1201( "SBA", "HANDLE_PLANNING_BOARD_POI_CAM: Cam cut done, going to ePlanningBoard = ASS_FINISHED", 0 );
            l_U2352 = 5;
        }
        break;
        case 5:
         /* NIS_POST_SETUP */ sub_38578( 1, 1 );
        Result = 1;
         /* WRITESCRIPTLOG */ sub_1201( "SBA", "HANDLE_PLANNING_BOARD_POI_CAM: going to ePlanningBoard = ASS_INACTIVE", 0 );
        l_U2352 = -1;
        break;
    }
    return Result;
}

/* UPDATE_PILL_VO */ int sub_77876(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    if ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_4689() )) == 0)
    {
        if (( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_74965()) == 0)
        {
            for ( I = 0; I <= ((uParam1^) - 1); I++ )
            {
                if ((uParam2^)[I])
                {
                    if ((HAS_PLACEMENT_BEEN_COLLECTED( (uParam1^)[I] )) || (NOT (DOES_PLACEMENT_EXIST( (uParam1^)[I] ))))
                    {
                        (uParam2^)[I] = 0;
                        if (TIME_SINCE_LAST_MONOLOGUE() > 5000)
                        {
                             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_42169( ref l_U194 );
                             /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_75166( uParam0, ref l_U194 );
                            return 1;
                        }
                    }
                }
            }
        }
    }
    return 0;
}

/* P_UNLOAD_ASSETS */ void sub_78338()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1201( "MW", "P_UNLOAD_ASSETS start", 0 );
    STOP_SCRIPT_STREAM( 0 );
    for ( I = 0; I < l_U2461; I++ )
    {
         /* UNLOADMODEL */ sub_78434( l_U2461[I] );
    }
     /* UNLOADANIMDICT */ sub_78617( "LEVEL_S_HOTEL_CP_11" );
     /* UNLOADANIMDICT */ sub_78617( "EXPL_CAM" );
     /* UNLOADWEAPON */ sub_78683( 811797242 );
     /* UNLOADWEAPON */ sub_78683( -110877124 );
     /* UNLOADWEAPON */ sub_78683( -1659006841 );
    RELEASE_NAMED_SCRIPT_AUDIO_BANK( "SCRIPT_MISSION\S_HOTEL_SECURITY_GATE" );
     /* WRITESCRIPTLOG */ sub_1201( "MW", "P_UNLOAD_ASSETS end", 0 );
    return;
}

/* UNLOADMODEL */ void sub_78434(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 1)
    {
        SET_MODEL_AS_NO_LONGER_NEEDED( uParam0 );
    }
    else
    {
         /* WRITE_STRING */ sub_11038( "[SP]### ERROR! (UnloadModel) Trying to unload a model that isn't in the img! ###" );
    }
    return;
}

/* UNLOADANIMDICT */ void sub_78617(unknown uParam0)
{
    REMOVE_ANIM_DICT( uParam0, 0 );
    return;
}

/* UNLOADWEAPON */ void sub_78683(unknown uParam0)
{
    SET_WEAPON_AS_NO_LONGER_NEEDED( uParam0 );
    return;
}

