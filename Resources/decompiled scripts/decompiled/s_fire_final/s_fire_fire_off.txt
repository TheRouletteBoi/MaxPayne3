void main()
{
    l_U0 = 1;
    l_U1 = 144;
    l_U229 = 0;
    l_U230 = 1;
    l_U231 = 0;
    l_U232 = 1.00000000;
    l_U233 = -5.00000000;
    l_U234 = 0;
    l_U235 = 0;
    l_U236 = 0;
    l_U240 = 42;
    l_U241 = 0;
    l_U242 = 0;
    l_U243 = 0;
    l_U244 = 0;
    l_U245 = 0;
    l_U246 = 90.00000000;
    l_U247 = {0.00000000, 0.00000000, 0.00000000};
    l_U250 = {0.00000000, 0.00000000, 0.00000000};
    l_U253 = 0;
    l_U254 = 0;
    l_U255 = 0;
    l_U256 = 0;
    l_U257 = 0;
    l_U258 = 0;
    l_U259 = nil;
    l_U260 = {0.00000000, 0.00000000, 0.00000000};
    l_U263 = 0;
    l_U264 = 0;
    l_U265 = 0;
    l_U429 = 0;
    l_U430 = 0;
    l_U431 = 0;
    l_U432 = 0;
    l_U433 = 0;
    l_U434 = 0;
    l_U435 = {0, 0, 0};
    l_U438 = {0, 0, 0};
    l_U441 = 1.00000000;
    l_U442 = 0.00000000;
    l_U443 = -1;
    l_U445 = 0;
    l_U446 = 0;
    l_U447 = 1500;
    l_U458 = 0;
    l_U460 = 0;
    l_U461 = 0;
    l_U462 = 0;
    StrCopy( ref l_U1035, "LEVEL_S_OFFICE_CORPSE", 32 );
    StrCopy( ref l_U1043, "MID_13C_OF_Concat", 32 );
    StrCopy( ref l_U1051, "06_OFFICE_END_concat", 32 );
    StrCopy( ref l_U1059, "LEVEL_S_OFFICE_CP_07", 32 );
    StrCopy( ref l_U1067, "SCRIPT_MISSION\S_OFFICE_POST_FIRE_1", 64 );
    StrCopy( ref l_U1083, "SCRIPT_MISSION\S_OFFICE_FLOOR_COLLAPSE", 64 );
    StrCopy( ref l_U1099, "SCRIPT_MISSION\S_OFFICE_FLAME_BURST", 64 );
    l_U1115 = -1270860199;
    l_U1229 = 1;
    l_U1248 = 8000;
    l_U1249 = 0;
    l_U1250 = 2000;
    l_U1251 = 4000;
    l_U1254 = {-988.00000000, 3.11000000, 4.80000000};
    l_U1257 = {-988.00000000, 7.33000000, 4.80000000};
    l_U1595 = 200;
    l_U1596 = 3000;
    l_U1597 = 3000;
    l_U1598 = {-993.25000000, -6.44900000, 4.71200000};
    l_U1601 = {-993.25000000, -6.44900000, 4.59300000};
    l_U1604 = {-993.25000000, 6.44900000, 4.47300000};
    l_U1607 = 113.00000000;
    l_U1608 = 95.00000000;
    l_U1609 = 0;
    l_U1610 = 1;
    l_U1611 = 2;
    l_U1612 = 3;
    l_U1613 = 4;
    l_U1614 = 1;
    l_U1615 = 1;
    l_U1616 = 0;
    l_U1617 = 0;
    l_U1618 = 0;
    l_U1619 = 0;
    l_U1620 = 0;
    l_U1621 = 0;
    sub_957( "SA", "Script s_fire_Fire_Off.sc is starting...", 0 );
    l_U460 = 1;
    while (NOT IS_EXITFLAG_SET())
    {
        sub_1025();
        if (l_U461 == 0)
        {
            sub_10202();
            sub_11789();
        }
        WAIT( 0 );
    }
    SET_EXITFLAG_RESPONSE();
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "s_fire_Fire_Off" );
    sub_957( "SA", "Script s_fire_Fire_Off.sc is terminating...", 0 );
    return;
}

void sub_957(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    return;
}

void sub_1025()
{
    if (g_U665 == 4)
    {
        switch (l_U461)
        {
            case 0:
            if (sub_1107())
            {
                l_U461 = 3;
            }
            if ((IS_PED_DEAD( sub_1379() )) == 1)
            {
                l_U461 = 1;
                sub_957( "SA", "eFailState = FAIL_WAITING_FOR_PLAYER", 0 );
            }
            if (g_U1583)
            {
                if (sub_1691())
                {
                    AUDIO_MUSIC_SUSPEND( 5000 );
                    l_U461 = 1;
                }
            }
            if ((l_U1243) || (l_U1242))
            {
                AUDIO_MUSIC_SUSPEND( 5000 );
                l_U461 = 1;
            }
            break;
            case 1:
            if (sub_2136( NOT (IS_PED_DEAD( sub_1379() )) ))
            {
                l_U461 = 2;
                sub_957( "SA", "eFailState = FAIL_WAITING_FOR_RESPAWN", 0 );
            }
            break;
            case 2:
            if ((NOT IS_BULLET_CAMERA_ACTIVE()) AND ((NOT (IS_PED_DEAD( sub_1379() ))) AND (NOT IS_LAST_MAN_STANDING_ACTIVE())))
            {
                DO_SCREEN_FADE_OUT( 0 );
                AUDIO_MUSIC_SUSPEND( 500 );
                sub_3418( 0 );
                sub_3511( 0 );
                DESTROY_ALL_CAMS();
                RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
                l_U461 = 3;
                sub_957( "SA", "eFailState = FAIL_CLEANUP_ALL", 0 );
            }
            break;
            case 3:
            sub_957( "SA", "eFailState = FAIL_CLEANUP_ALL", 0 );
            DO_SCREEN_FADE_OUT( 0 );
            if (g_U1605 == 2)
            {
                sub_3741( 3 );
            }
            sub_4138();
            sub_4356();
            sub_4486();
            sub_5541();
            l_U461 = 4;
            sub_957( "SA", "eFailState = FAIL_RESTORE_PLAYER", 0 );
            break;
            case 4:
            sub_957( "SA", "eFailState = FAIL_RESTORE_PLAYER", 0 );
            if (l_U464._fU0)
            {
                sub_5986( ref l_U464, sub_1379() );
            }
            l_U461 = 5;
            sub_957( "SA", "eFailState = FAIL_RESTART_CHECKPOINT", 0 );
            break;
            case 5:
            sub_957( "SA", "eFailState = FAIL_RESTART_CHECKPOINT", 0 );
            l_U460 = 1;
            l_U461 = 0;
            sub_957( "SA", "eFailState = FAIL_IDLE", 0 );
            break;
        }
    }
    return;
}

int sub_1107()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U0 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD( sub_1379() )))
        {
            SET_PED_FORCED_TO_WALK( sub_1379(), 0 );
            SET_PLAYER_FORCED_AIM( sub_1401(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE( sub_1401(), 1 );
            if ((IS_PED_VISIBLE( sub_1379() )) == 0)
            {
                SET_PED_VISIBLE( sub_1379(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

int sub_1379()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED( sub_1401() );
    }
    return 0;
}

void sub_1401()
{
    return GET_PLAYER_ID();
}

int sub_1691()
{
    if (sub_1705( ref g_U1556 ))
    {
        g_U743 = CREATE_CAM( "DEFAULT_BULLET_CAMERA", 1 );
        SETUP_BULLET_CAMERA_SCENE( g_U743, "MISS_DEATH_FALL_01A", 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, "", "" );
        SET_CAM_ACTIVE( g_U743, 1 );
        return 1;
    }
    return 0;
}

int sub_1705(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

int sub_2136(int iParam0)
{
    iParam0 = 1;
    switch (l_U446)
    {
        case 0:
        if (NOT (sub_2197( ref l_U448 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_1379() )))
            {
                l_U447 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
            sub_2307( ref l_U448, l_U447, 1, 1 );
            sub_2443( ref l_U448 );
        }
        if (sub_1705( ref l_U448 ))
        {
            sub_957( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD( sub_1379() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD( sub_1401() )))
            {
                SET_PLAYER_CONTROL( sub_1401(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U446 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U446 = 2;
            }
            else
            {
                l_U446 = 3;
            }
        }
        break;
        case 2:
        sub_957( "NS", "Player will QUIT", 0 );
        sub_2894();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
        sub_957( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        sub_2894();
        return 1;
        break;
    }
    return 0;
}

int sub_2197(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

void sub_2307(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

void sub_2443(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

void sub_2894()
{
    sub_957( "NS", "P_PostFailRetryCleanup", 0 );
    sub_2944( ref l_U448 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD( sub_1401() )))
    {
        SET_PLAYER_CONTROL( sub_1401(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U445 = 0;
    l_U445 = l_U445;
    l_U446 = 0;
    return;
}

void sub_2944(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

void sub_3418(unknown uParam0)
{
    int I;

    for ( I = 0; I <= 3; I++ )
    {
        if (IS_SCRIPTED_CONVERSATION_ONGOING( I ))
        {
            if ((g_U1[I] <= 8) AND (g_U1[I] >= 4))
            {
                STOP_SCRIPTED_CONVERSATION( I, uParam0, 0 );
            }
        }
    }
    return;
}

void sub_3511(unknown uParam0)
{
    int I;

    for ( I = 0; I <= 3; I++ )
    {
        if (IS_SCRIPTED_CONVERSATION_ONGOING( I ))
        {
            if ((g_U1[I] <= 3) AND (g_U1[I] >= 1))
            {
                STOP_SCRIPTED_CONVERSATION( I, uParam0, 0 );
            }
        }
    }
    return;
}

int sub_3741(unknown uParam0)
{
    sub_957( "SA", "P_LOAD_BINK_FIRE", 0 );
    switch (uParam0)
    {
        case 1:
        sub_957( "SA", "BINK_FIRE_LOADING", 0 );
        PRELOAD_MOVIE( 0, "FIRE_TEST2", 1, 0 );
        SET_MOVIE_LOOP( 0, 1 );
        PLAY_MOVIE( 0, 0 );
        g_U1605 = 2;
        return 1;
        break;
        case 2:
        sub_957( "SA", "BINK_FIRE_PLAYING", 0 );
        return 1;
        break;
        case 3:
        sub_957( "SA", "BINK_FIRE_STOPPED", 0 );
        STOP_MOVIE( 0 );
        g_U1605 = 3;
        return 1;
        break;
        case 4:
        sub_957( "SA", "BINK_FIRE_RESTART", 0 );
        PLAY_MOVIE( 0, 0 );
        g_U1605 = 2;
        return 1;
        break;
        case 5:
        sub_957( "SA", "BINK_FIRE_RELEASE", 0 );
        STOP_MOVIE( 0 );
        RELEASE_MOVIE( 0 );
        g_U1605 = 0;
        return 1;
        break;
    }
    return 0;
}

void sub_4138()
{
    sub_957( "NS", "P_CLEAN_UP_KILL_MAX_FROM_SMOKE_INHALE()", 0 );
    sub_2944( ref g_U1556 );
    sub_2944( ref g_U1574 );
    sub_4223( ref g_U743 );
    g_U1583 = 0;
    CLEAR_TIMECYCLE_MODIFIER_OVERRIDE( 0 );
    DEACTIVATE_SPECIAL_FX_MODIFIER( "LAST_MAN_STANDING_DEATH" );
    return;
}

void sub_4223(unknown uParam0)
{
    if ((DOES_CAM_EXIST( (uParam0^) )) == 1)
    {
        if ((IS_CAM_ACTIVE( (uParam0^) )) == 1)
        {
            SET_CAM_ACTIVE( (uParam0^), 0 );
        }
        DESTROY_CAM( (uParam0^) );
    }
    (uParam0^) = nil;
    return;
}

void sub_4356()
{
    sub_957( "SA", "P_STOP_COUGHING_TIMER", "###" );
    g_U1585 = 0;
    g_U1587 = 0;
    l_U267 = 0;
    l_U266 = 3;
    l_U268 = 0;
    DEACTIVATE_SPECIAL_FX_MODIFIER( "FIRE_COUGH" );
    STOP_SOUND( g_U1598, 0 );
    sub_2944( ref g_U1538 );
    return;
}

void sub_4486()
{
    int I;

    sub_957( "SA", "P_CLEANUP_ALL", 0 );
    RELEASE_SCRIPT_AUDIO_BANK();
    STOP_SCRIPT_STREAM( 0 );
    STOP_SCRIPT_STREAM( 1 );
    STOP_SCRIPT_STREAM( 2 );
    STOP_SOUND( l_U1252, 0 );
    RELEASE_NAMED_SCRIPT_AUDIO_BANK( ref l_U1083 );
    STOP_SOUND( l_U1253, 0 );
    RELEASE_NAMED_SCRIPT_AUDIO_BANK( ref l_U1099 );
    SET_CAMERA_OVERRIDE( "", "", 0, 1, 1 );
    CAMERA_USE_HANDY_CAM( 0, 0.00000000, 1 );
    DESTROY_ALL_CAMS();
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    sub_4223( ref l_U1260 );
    ISEQ_UNREGISTER_ENTITY( 431956140, "player" );
    ISEQ_UNREGISTER_ENTITY( 431956140, "enemy" );
    sub_4708( 431956140, 1 );
    ISEQ_UNREGISTER_ENTITY( 1549233931, "MAX" );
    ISEQ_UNREGISTER_ENTITY( 1549233931, "CABINET" );
    sub_4708( 1549233931, 1 );
    ISEQ_UNREGISTER_ENTITY( 736610621, "player" );
    sub_4708( 736610621, 1 );
    ISEQ_UNREGISTER_ENTITY( 1252772788, "MAX" );
    sub_4708( 1252772788, 1 );
    ISEQ_UNREGISTER_ENTITY( 1549233931, "MAX" );
    ISEQ_UNREGISTER_ENTITY( 1549233931, "CABINET" );
    sub_4708( 1549233931, 1 );
    sub_5074( ref l_U1305 );
    sub_5108( l_U1349 );
    sub_5216( l_U1261 );
    sub_5216( l_U1262 );
    sub_5216( l_U1263 );
    for ( I = 0; I < l_U1264; I++ )
    {
        sub_5216( l_U1264[I] );
    }
    sub_2944( ref l_U990 );
    sub_2944( ref l_U981 );
    sub_2944( ref l_U837 );
    sub_2944( ref l_U972 );
    sub_2944( ref l_U963 );
    sub_2944( ref l_U918 );
    sub_2944( ref l_U846 );
    sub_2944( ref l_U855 );
    sub_2944( ref l_U864 );
    sub_2944( ref l_U873 );
    sub_2944( ref l_U882 );
    sub_2944( ref l_U891 );
    sub_2944( ref l_U900 );
    sub_2944( ref l_U909 );
    sub_2944( ref l_U819 );
    sub_2944( ref l_U828 );
    sub_2944( ref l_U927 );
    sub_2944( ref l_U936 );
    sub_2944( ref l_U945 );
    sub_2944( ref l_U954 );
    sub_2944( ref l_U1008 );
    sub_2944( ref l_U1017 );
    sub_2944( ref l_U999 );
    sub_2944( ref l_U1026 );
    return;
}

void sub_4708(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to terminate does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 1)
    {
        ISEQ_TERMINATE( uParam0 );
    }
    ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
    if (iParam1 == 1)
    {
        while ((ISEQ_IS_LOADED( uParam0 )) == 1)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_5074(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
        sub_5108( (uParam0^)[I] );
    }
    return;
}

void sub_5108(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

void sub_5216(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

void sub_5541()
{
    sub_957( "SA", "P_CLEANUP_POST_ENDING_CUTSCENE", 0 );
    AUDIO_MUSIC_SUSPEND( 500 );
    if (NOT (IS_PED_DEAD( sub_1379() )))
    {
        REMOVE_ALL_PED_WEAPONS( sub_1379() );
    }
    CLEAR_TIMECYCLE_MODIFIER_OVERRIDE( 0 );
    CLEAR_NAMED_CUTSCENE( ref l_U1051 );
    sub_5108( l_U1363 );
    sub_5108( l_U1291 );
    sub_5216( l_U1289 );
    sub_5216( l_U1290 );
    sub_5216( l_U1288 );
    sub_5216( l_U1273 );
    sub_5216( l_U1274 );
    sub_5216( l_U1275 );
    sub_5216( l_U1276 );
    sub_5216( l_U1277 );
    sub_5216( l_U1278 );
    sub_5216( l_U1279 );
    sub_5216( l_U1280 );
    sub_5216( l_U1281 );
    sub_5216( l_U1282 );
    sub_5216( l_U1283 );
    sub_5216( l_U1284 );
    sub_5216( l_U1285 );
    sub_5216( l_U1286 );
    sub_5216( l_U1287 );
    return;
}

void sub_5986(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

    sub_957( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U0)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
    sub_6170( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
        sub_7247( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 = sub_7539( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
        sub_7899( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 = sub_7539( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
        sub_7899( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 = sub_7539( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
        sub_7899( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 = sub_8184( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
        sub_7899( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 = sub_8184( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
        sub_7899( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U0 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if ((sub_8677( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
    sub_8838( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING( sub_1379(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U0)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U0 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
    sub_957( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

void sub_6170(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 = sub_6202( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

int sub_6202(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

void sub_7247(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

void sub_7539(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                }
            }
        }
    }
    else
    {
        sub_7855( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

void sub_7855(unknown uParam0)
{
    return;
}

void sub_7899(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

void sub_8184(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                }
            }
        }
    }
    else
    {
        sub_7855( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

int sub_8677(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

void sub_8838(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 = sub_6202( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
    sub_8910( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

void sub_8910(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

void sub_10202()
{
    sub_10212();
    sub_10769();
    sub_11607();
    return;
}

void sub_10212()
{
    if (NOT l_U1620)
    {
        START_WIDGET_GROUP( "Fire Office Timer Adjust Widget" );
        ADD_WIDGET_INT_SLIDER( "Shimmy timer", ref l_U1248, 0, 1000000, 1 );
        ADD_WIDGET_BOOL( "Refresh timers", ref l_U1621 );
        ADD_WIDGET_INT_SLIDER( "Delay before floor smoke", ref l_U1250, 0, 1000000, 1 );
        ADD_WIDGET_FLOAT_SLIDER( "Floor smoke pos X", ref l_U1254._fU0, 55536, 10000, 0.10000000 );
        ADD_WIDGET_FLOAT_SLIDER( "Floor smoke pos Y", ref l_U1254._fU4, 55536, 10000, 0.10000000 );
        ADD_WIDGET_FLOAT_SLIDER( "Floor smoke pos Z", ref l_U1254._fU8, 55536, 10000, 0.10000000 );
        ADD_WIDGET_INT_SLIDER( "Delay before floor flames", ref l_U1251, 0, 1000000, 1 );
        ADD_WIDGET_FLOAT_SLIDER( "Floor flames pos X", ref l_U1257._fU0, 55536, 10000, 0.10000000 );
        ADD_WIDGET_FLOAT_SLIDER( "Floor flames pos Y", ref l_U1257._fU4, 55536, 10000, 0.10000000 );
        ADD_WIDGET_FLOAT_SLIDER( "Floor flames pos Z", ref l_U1257._fU8, 55536, 10000, 0.10000000 );
        STOP_WIDGET_GROUP();
        l_U1620 = 1;
    }
    if (l_U1621)
    {
        sub_2307( ref l_U819, l_U1248, 1, 0 );
        l_U1621 = 0;
    }
    return;
}

void sub_10769()
{
    if (l_U1615)
    {
        START_WIDGET_GROUP( "Cab Sound Test" );
        ADD_WIDGET_BOOL( "bcabIdle", ref l_U1616 );
        ADD_WIDGET_BOOL( "bCabPush ", ref l_U1617 );
        ADD_WIDGET_BOOL( "bCabToIdle", ref l_U1618 );
        ADD_WIDGET_BOOL( "bCabSuccess", ref l_U1619 );
        STOP_WIDGET_GROUP();
        l_U1615 = 0;
    }
    if (l_U1616 == 1)
    {
        l_U1616 = 0;
    }
    if (l_U1617 == 1)
    {
        sub_10955();
        l_U1617 = 0;
    }
    if (l_U1618 == 1)
    {
        sub_11070();
        l_U1618 = 0;
    }
    if (l_U1619 == 1)
    {
        sub_11535();
        l_U1619 = 0;
    }
    return;
}

void sub_10955()
{
    sub_957( "NS", "play push sound", 0 );
    PLAY_SOUND_FRONTEND( l_U1612, "S_OFFICE_FILING_CABINET_PUSH_MEDIUM" );
    return;
}

void sub_11070()
{
    unknown uVar2;

    sub_957( "NS", "play toidle sound", 0 );
    uVar2 = AUD_GET_ANIM_MARKER_LEVEL();
    switch (uVar2)
    {
        case 1:
        PLAY_SOUND_FRONTEND( l_U1610, "S_OFFICE_FILING_CABINET_PUSH_SMALL" );
        sub_957( "NS", "S_OFFICE_FILING_CABINET_PUSH_SMALL", 0 );
        break;
        case 2:
        PLAY_SOUND_FRONTEND( l_U1610, "S_OFFICE_FILING_CABINET_SETTLE_MEDIUM" );
        sub_957( "NS", "S_OFFICE_FILING_CABINET_SETTLE_MEDIUM", 0 );
        break;
        case 3:
        PLAY_SOUND_FRONTEND( l_U1610, "S_OFFICE_FILING_CABINET_SETTLE_LARGE" );
        sub_957( "NS", "S_OFFICE_FILING_CABINET_SETTLE_LARGE", 0 );
        break;
        default:
        sub_957( "NS", "unhandled anim marker", 0 );
        break;
    }
    return;
}

void sub_11535()
{
    sub_957( "NS", "play success sound", 0 );
    PLAY_SCRIPT_STREAM_FRONTEND( 0 );
    return;
}

void sub_11607()
{
    if (NOT l_U1222)
    {
        START_WIDGET_GROUP( "Office Timer Adjust Widget" );
        ADD_WIDGET_INT_SLIDER( "Shimmy timer", ref l_U1248, 0, 1000000, 1 );
        ADD_WIDGET_BOOL( "Refresh timers", ref l_U1221 );
        STOP_WIDGET_GROUP();
        l_U1222 = 1;
    }
    if (l_U1221)
    {
        sub_2307( ref l_U819, l_U1248, 1, 0 );
        l_U1221 = 0;
    }
    return;
}

void sub_11789()
{
    sub_11799();
    switch (l_U460)
    {
        case 0:
        sub_957( "SA", "eCheckpointState = CHECKPOINT_IDLE", 0 );
        break;
        case 1:
        sub_957( "SA", "eCheckpointState = CHECKPOINT_INIT_SCRIPT_DATA", 0 );
        if (g_U1605 == 0)
        {
            sub_3741( 1 );
        }
        else if (g_U1605 == 3)
        {
            sub_3741( 4 );
        }
        sub_12389();
        sub_16222();
        sub_19205();
        SET_WEATHER_TYPE_NOW_PERSIST( "EXTRASUNNY" );
        FREEZE_TIME_OF_DAY( 18, 0 );
        SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
        AUD_SET_IS_POWER_ON( 0 );
        sub_19659( "SOFFAUD" );
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "GRAVITY_WELL_EXPLOSION_2", 1, 0, 0, 0 );
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "GRAVITY_WELL_EXPLOSION_3", 0, 0, 0, 0 );
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "GRAVITY_WELL_PILLAR", 0, 0, 0, 0 );
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "GRAVITY_WELL_CABINET_DEBUG", 0, 0, 0, 0 );
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "GRAVITY_WELL_CABINET", 0, 0, 0, 0 );
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "GRAVITY_WELL_SHIMMY_1", 0, 0, 0, 0 );
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "GRAVITY_WELL_SHIMMY_2", 0, 0, 0, 0 );
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "GRAVITY_WELL_SHIMMY_3", 0, 0, 0, 0 );
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "GRAVITY_WELL_CUTSCENE", 0, 0, 0, 0 );
        if (g_U665 == 4)
        {
            l_U460 = 8;
        }
        else
        {
            l_U460 = 2;
        }
        break;
        case 2:
        sub_957( "SA", "eCheckpointState = CHECKPOINT_INIT_REQUEST_PRE_CUTSCENE_ASSETS", 0 );
        sub_20519();
        l_U460 = 3;
        sub_957( "SA", "eCheckpointState = CHECKPOINT_INIT_LOAD_PRE_CUTSCENE_ASSETS", 0 );
        break;
        case 3:
        if (sub_21446())
        {
            l_U460 = 4;
        }
        break;
        case 4:
        sub_957( "SA", "eCheckpointState = CHECKPOINT_INIT_SETUP_CUTSCENE", 0 );
        sub_21876();
        sub_22955();
        sub_23444();
        sub_957( "SA", "eCheckpointState = CHECKPOINT_WAIT_TO_START", 0 );
        l_U460 = 5;
        break;
        case 5:
        if (g_U750)
        {
            l_U460 = 6;
        }
        break;
        case 6:
        sub_957( "SA", "eCheckpointState = CHECKPOINT_PLAY_CUTSCENE", 0 );
        CUTSCENE_ENABLE_SKIP( 0 );
        START_SEAMLESS_CUTSCENE();
        DISPLAY_HUD( 0 );
        sub_24556();
        l_U460 = 7;
        break;
        case 7:
        sub_957( "SA", "eCheckpointState = CHECKPOINT_HANDLE_CUTSCENE", 0 );
        if (sub_24986())
        {
            l_U460 = 11;
        }
        break;
        case 8:
        sub_957( "SA", "eCheckpointState = CHECKPOINT_INIT_REQUEST_ASSETS", 0 );
        sub_24556();
        l_U460 = 9;
        sub_957( "SA", "eCheckpointState = CHECKPOINT_INIT_LOAD_ASSETS", 0 );
        break;
        case 9:
        if (sub_25598())
        {
            l_U460 = 10;
        }
        break;
        case 10:
        sub_957( "SA", "eCheckpointState = CHECKPOINT_LOAD_INT", 0 );
        sub_22955();
        sub_21876();
        sub_26237();
        l_U460 = 11;
        break;
        case 11:
        sub_957( "SA", "eCheckpointState = CHECKPOINT_START_GAMEPLAY", 0 );
        sub_26534();
        l_U460 = 12;
        break;
        case 12:
        sub_27477();
        sub_28973();
        sub_29440();
        sub_34295();
        sub_39559();
        sub_41797();
        sub_45931();
        sub_46134();
        sub_46414();
        sub_48784();
        sub_49632();
        sub_49824();
        if (g_U665 == 4)
        {
            sub_51411();
        }
        break;
        case 13:
        sub_957( "SA", "eCheckpointState = CHECKPOINT_PLAY_FINAL_CUTSCENE", 0 );
        SET_HIGHEST_ARCADE_LEVEL_UNLOCKED( 9 );
        if (IS_ARCADE_MODE_ACTIVE() == 1)
        {
            DISPLAY_ARCADE_MODE_LEVEL_END( "s_fav1" );
            sub_957( "SA", "Finished Action Report", 0 );
            DO_SCREEN_FADE_IN( 0 );
            sub_4486();
            sub_5541();
            sub_55136();
            sub_55370();
            SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        }
        else if (sub_55678())
        {
            sub_55900();
            sub_4486();
            sub_55136();
            sub_56418();
            g_U744 = 1;
            l_U460 = 14;
        }
        break;
        case 14:
        sub_957( "SA", "eCheckpointState = CHECKPOINT_HANDLE_FINAL_CUTSCENE", 0 );
        if (sub_56707())
        {
            l_U460 = 15;
        }
        break;
        case 15:
        sub_957( "SA", "eCheckpointState = CHECKPOINT_FINISHED", 0 );
        sub_4486();
        sub_5541();
        sub_55136();
        sub_55370();
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        break;
    }
    return;
}

void sub_11799()
{
    switch (l_U1377)
    {
        case 0:
        sub_957( "CCB", "eOldPainless - STATE_CHALLENGE_IDLE", 0 );
        l_U1377 = 1;
        break;
        case 1:
        if (l_U460 >= 14)
        {
            if (SCRIPT_VAR_HASH_EXISTS( 1701971384 ))
            {
                SCRIPT_VAR_HASH_SET_INT( 1701971384, 1 );
            }
            else
            {
                sub_957( "CCB", "The OldPainless script variable is NOT valid!!!", 0 );
            }
            sub_957( "CCB", "eOldPainless - STATE_CHALLENGE_COMPLETE", 0 );
            l_U1377 = 2;
        }
        break;
        case 2: break;
    }
    return;
}

void sub_12389()
{
    sub_957( "SA", "INITIALIZE_SCRIPT_DATA", 0 );
    sub_12440( ref g_U1312, 0 );
    sub_12440( ref g_U1319, 0 );
    sub_12656( ref g_U1312, 0 );
    sub_12656( ref g_U1312, 0 );
    g_U1604 = 0;
    l_U1222 = 0;
    l_U1221 = 0;
    l_U1218 = 0;
    l_U1219 = 0;
    l_U1220 = 0;
    l_U1223 = 0;
    l_U1224 = 0;
    l_U1226 = 0;
    l_U1227 = 0;
    l_U1225 = 0;
    l_U1228 = 0;
    l_U1230 = 0;
    l_U1231 = 0;
    l_U1232 = 0;
    l_U1233 = 0;
    l_U1234 = 0;
    l_U1235 = 0;
    l_U1236 = 0;
    l_U1237 = 0;
    l_U1238 = 0;
    l_U1239 = 0;
    l_U1240 = 0;
    l_U1241 = 0;
    l_U1242 = 0;
    l_U1243 = 0;
    l_U1244 = 0;
    l_U1245 = 0;
    l_U1246 = 0;
    l_U1247 = 106003;
    l_U463 = 0;
    l_U462 = 0;
    sub_2944( ref l_U972 );
    sub_2307( ref l_U972, 1200, 1, 0 );
    sub_2944( ref l_U918 );
    sub_2307( ref l_U918, 0, 1, 0 );
    sub_2944( ref l_U945 );
    sub_2307( ref l_U945, 0, 1, 0 );
    sub_2944( ref l_U819 );
    sub_2307( ref l_U819, l_U1248, 1, 0 );
    sub_2944( ref l_U828 );
    sub_2307( ref l_U828, l_U1249, 1, 0 );
    sub_2944( ref l_U846 );
    sub_2307( ref l_U846, 500, 1, 0 );
    sub_2944( ref l_U855 );
    sub_2307( ref l_U855, 1000, 1, 0 );
    sub_2944( ref l_U864 );
    sub_2307( ref l_U864, 2500, 1, 0 );
    sub_2944( ref l_U873 );
    sub_2307( ref l_U873, 500, 1, 0 );
    sub_2944( ref l_U882 );
    sub_2307( ref l_U882, 500, 1, 0 );
    sub_2944( ref l_U891 );
    sub_2307( ref l_U891, 1000, 1, 0 );
    sub_2944( ref l_U900 );
    sub_2307( ref l_U900, 1500, 1, 0 );
    sub_2944( ref l_U909 );
    sub_2307( ref l_U909, 2000, 1, 0 );
    sub_2944( ref l_U927 );
    sub_2307( ref l_U927, l_U1250, 1, 0 );
    sub_2944( ref l_U936 );
    sub_2307( ref l_U936, l_U1251, 1, 0 );
    sub_2944( ref l_U954 );
    sub_2307( ref l_U954, 500, 1, 0 );
    sub_2944( ref l_U963 );
    sub_2307( ref l_U963, 3000, 1, 0 );
    sub_2944( ref l_U837 );
    sub_2307( ref l_U837, 700, 1, 0 );
    sub_2944( ref l_U981 );
    sub_2307( ref l_U981, 2600, 1, 0 );
    sub_2944( ref l_U990 );
    sub_2307( ref l_U990, 200, 1, 0 );
    sub_2944( ref l_U999 );
    sub_2307( ref l_U999, 2500, 1, 0 );
    sub_2944( ref l_U1008 );
    sub_2307( ref l_U1008, g_U1597, 1, 0 );
    sub_2944( ref l_U1017 );
    sub_2307( ref l_U1017, 3000, 1, 0 );
    sub_2944( ref l_U1026 );
    sub_2307( ref l_U1026, 8000, 1, 0 );
    if (g_U665 == 4)
    {
        sub_13498();
    }
    sub_14397();
    return;
}

void sub_12440(int iParam0, int iParam1)
{
    int iVar4;
    float fVar5;

    if ((sub_12452( iParam0 )) == 0)
    {
        sub_12518( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
    }
    else
    {
        iVar4 = 0;
        fVar5 = 0.00000000;
        GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref iVar4, ref fVar5 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar5 );
    }
    return;
}

int sub_12452(int iParam0)
{
    int iVar3;

    iVar3 = DOES_OBJECT_OF_TYPE_EXIST_AT_COORDS( iParam0->_fU4, 1.00000000, iParam0->_fU0 );
    if (iVar3 == 1)
    {
        return 1;
    }
    return 0;
}

void sub_12518(unknown uParam0)
{
    (uParam0^) = {(uParam0^)};
    return;
}

void sub_12656(int iParam0, unknown uParam1)
{
    if ((sub_12452( iParam0 )) == 0)
    {
        sub_12518( iParam0 );
    }
    DOOR_SET_IS_AFFECTED_BY_BULLETS( DOOR_FIND_CLOSEST( iParam0->_fU0, iParam0->_fU4 ), uParam1 );
    return;
}

void sub_13498()
{
    sub_957( "SA", "P_INIT_COUGHING_LOGIC", "###" );
    g_U1585 = 0;
    g_U1587 = 1;
    g_U1598 = GET_SOUND_ID();
    l_U267 = 0;
    l_U266 = 0;
    l_U268 = 0;
    sub_13655( ref g_U1340, "InFirAtr00", -978.00000000, 32.34000000, -2.50000000, 15.00000000, 30.00000000, 19.80000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_13655( ref g_U1361, "InFirAtr01", -988.78000000, 23.59000000, -2.50000000, 15.00000000, 13.00000000, 19.80000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_13655( ref g_U1382, "InFireCub00", -991.71000000, 37.54000000, -2.50000000, 14.00000000, 15.00000000, 20.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_13655( ref g_U1403, "InFireCub01", -1010.48000000, 32.34000000, -2.50000000, 28.00000000, 30.00000000, 20.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_13655( ref g_U1424, "InFireCub02", -1028.92000000, 30.17000000, -2.50000000, 10.00000000, 7.00000000, 20.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_13655( ref g_U1445, "InFireBrd00", -1031.12000000, 15.25000000, -2.50000000, 14.00000000, 22.50000000, 20.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_13655( ref g_U1466, "InFirArc01", -1009.07000000, 5.14000000, -2.50000000, 30.00000000, 24.00000000, 20.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_13655( ref g_U1487, "InFirArc00", -1028.87000000, -0.18000000, -2.50000000, 11.00000000, 8.00000000, 20.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_13655( ref g_U1508, "InFirRods00", -987.34000000, 3.39000000, -2.50000000, 14.00000000, 28.00000000, 20.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_2944( ref g_U1547 );
    sub_2307( ref g_U1547, g_U1597, 1, 0 );
    sub_2944( ref g_U1529 );
    sub_2307( ref g_U1529, g_U1599, 1, 0 );
    sub_2944( ref g_U1538 );
    sub_2307( ref g_U1538, GET_RANDOM_INT_IN_RANGE( g_U1601, g_U1602 ), 1, 0 );
    return;
}

void sub_13655(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    StrCopy( ref iParam0->_fU0, uParam1, 64 );
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = {uParam2};
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 1, iParam0 + 0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

void sub_14397()
{
    l_U2[0] = {-975.81300000, 24.29370000, 0.20000000};
    l_U2[1] = {-976.55800000, 22.32690000, 0.20000000};
    l_U2[2] = {-977.87300000, 20.86910000, 0.20000000};
    l_U2[3] = {-986.78000000, 23.85550000, 0.20000000};
    l_U2[4] = {-986.77100000, 25.82820000, 0.20000000};
    l_U2[5] = {-986.86200000, 27.80760000, 0.20000000};
    l_U2[6] = {-978.74000000, 33.56000000, 0.20000000};
    l_U2[7] = {-975.94700000, 33.13140000, 0.20000000};
    l_U2[8] = {-973.73800000, 30.97250000, 0.20000000};
    l_U2[9] = {-975.79000000, 26.29060000, 0.20000000};
    l_U2[10] = {-979.32800000, 19.46870000, 0.20000000};
    l_U2[11] = {-976.15100000, 28.33880000, 0.20000000};
    l_U2[12] = {-986.57800000, 18.69000000, 0.20000000};
    l_U2[13] = {-985.88000000, 21.00350000, 0.20000000};
    l_U45[0] = {-1001.50000000, 22.94000000, 4.90000000};
    l_U45[1] = {-1005.94000000, 26.53000000, 5.27000000};
    l_U45[2] = {-1001.13000000, 22.81000000, 4.90000000};
    l_U45[3] = {-997.86000000, 18.44390000, 4.90000000};
    l_U45[4] = {-1008.24000000, 22.64000000, 5.23000000};
    l_U45[5] = {-1011.02000000, 30.78660000, 5.23000000};
    l_U45[6] = {-1001.09000000, 27.87930000, 4.90000000};
    l_U45[7] = {-1002.04000000, 22.75000000, 4.90000000};
    l_U45[8] = {-996.57700000, 24.18540000, 4.90000000};
    l_U45[9] = {-996.96300000, 26.56050000, 4.90000000};
    l_U45[10] = {-1000.70000000, 37.59880000, 5.06841000};
    l_U45[11] = {-998.59600000, 37.62690000, 5.06841000};
    l_U45[12] = {-987.43300000, 30.83000000, 2.24344000};
    l_U45[13] = {-987.43700000, 32.53640000, 2.24185000};
    l_U45[14] = {-987.41700000, 34.50890000, 2.24185000};
    l_U45[15] = {-987.39700000, 36.57120000, 2.24185000};
    l_U45[16] = {-988.29700000, 38.13670000, 2.24344000};
    l_U45[17] = {-990.87400000, 38.24230000, 2.24344000};
    l_U45[19] = {-1008.28000000, 22.71000000, 5.23000000};
    l_U45[20] = {-1011.42000000, 20.05670000, 5.23000000};
    l_U45[21] = {-1000.78000000, 29.16000000, 4.90000000};
    l_U45[22] = {-996.20800000, 38.47680000, 5.06841000};
    l_U45[23] = {-1006.67000000, 26.33000000, 8.91000000};
    l_U45[24] = {-1013.05000000, 24.90050000, 5.23000000};
    l_U45[25] = {-1009.73000000, 29.52650000, 5.23000000};
    l_U45[26] = {-1012.81000000, 22.84860000, 5.23000000};
    l_U45[27] = {-1001.05000000, 30.78970000, 4.90000000};
    l_U45[28] = {-1001.75000000, 37.02490000, 5.06841000};
    l_U45[29] = {-1003.65000000, 18.17000000, 5.12000000};
    l_U45[30] = {-1008.37000000, 22.79000000, 5.23000000};
    l_U45[31] = {-1008.87000000, 27.82960000, 5.23000000};
    l_U45[32] = {-1009.37000000, 18.15310000, 5.12000000};
    l_U145[0] = {-1028.76000000, 10.36350000, 5.12000000};
    l_U145[1] = {-1033.35000000, 17.81970000, 5.12000000};
    l_U145[2] = {-1028.18000000, 21.06960000, 5.12000000};
    l_U145[3] = {-1028.89000000, 23.32580000, 5.12000000};
    l_U145[4] = {-1028.18000000, 25.39780000, 5.12000000};
    l_U145[5] = {-1033.35000000, 19.14410000, 5.12000000};
    l_U145[6] = {-1033.18000000, 12.51890000, 5.12000000};
    l_U145[7] = {-1034.57000000, 23.21270000, 5.12000000};
    l_U145[8] = {-1035.38000000, 25.88970000, 5.12000000};
    l_U145[9] = {-1034.96000000, 24.39860000, 5.12000000};
    l_U145[10] = {-1033.35000000, 13.93000000, 5.12000000};
    l_U145[11] = {-1028.45000000, 8.15473000, 5.12000000};
    l_U145[12] = {-1027.82000000, 4.90000000, 5.27000000};
    l_U145[13] = {-1032.84000000, 7.41310000, 5.12000000};
    l_U145[14] = {-1032.83000000, 5.65683000, 5.12000000};
    l_U145[15] = {-1028.15000000, 6.52000000, 5.27000000};
    l_U194[0] = {-1002.87000000, 3.46000000, 5.11000000};
    l_U194[1] = {-1000.20000000, 8.51000000, 5.11000000};
    l_U194[2] = {-998.83000000, 7.76000000, 5.27000000};
    l_U194[3] = {-1013.62000000, 3.49000000, 5.11000000};
    l_U194[4] = {-1017.99000000, 3.50199000, 5.11000000};
    l_U194[5] = {-1021.71000000, 4.45000000, 5.11000000};
    l_U194[6] = {-1020.13000000, 4.54000000, 5.11000000};
    l_U194[7] = {-1023.06000000, 4.79000000, 5.11000000};
    l_U219[0] = {-988.29200000, 5.26253000, 5.11000000};
    l_U219[1] = {-988.22500000, 7.23000000, 5.11000000};
    l_U219[2] = {-988.34100000, 9.27425000, 5.11000000};
    return;
}

void sub_16222()
{
    sub_957( "SA", "LOAD_ASSETS", 0 );
    sub_16293( ref l_U1350, -989.98000000, 5.27000000, 4.93000000, -156.40300000, 407429255, 7, 3, 2, 0, 0 );
    sub_16293( ref l_U1309[0], -1013.74500000, 0.93100000, 4.92900000, 88.99000000, 1398787313, 7, 3, 2, 0, 0 );
    sub_16293( ref l_U1309[1], -1012.45000000, -0.27400000, 4.92900000, 0.00000000, -1616191146, 7, 3, 2, 0, 0 );
    sub_16293( ref l_U1309[2], -1007.97500000, 0.86300000, 4.92400000, 90.00000000, -393888614, 7, 3, 2, 0, 0 );
    sub_16293( ref l_U1364, 0, 0, 0, 0, 36051318, 7, 3, 2, 0, 0 );
    sub_16593( ref l_U1292, -6.50155400, -2.55028000, 199.22310000, 270.00000000, 1469509248, 26, 6, 0, 0, 0 );
    sub_16751( ref l_U1116, 1, -1006.33000000, 1.50000000, 6.15000000, -1006.97000000, 1.46000000, 4.92000000, -997.73000000, 3.87000000, 4.90000000, 1.50000000, 1.50000000, 0, 0 );
    sub_17598( ref l_U1116, 30, "POI_CABINET" );
    sub_17759( ref l_U1116, 1 );
    sub_17795( ref l_U1116, 0.10000000 );
    sub_17847( ref l_U1202, 40.00000000, 15.00000000, 1.00000000, 15.00000000, 30 );
    sub_13655( ref l_U500, "KILL_MAX", -989.46000000, 1.77000000, 0.00000000, 11.00000000, 18.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_13655( ref l_U521, "tbSmashGlass", -1020.94000000, -0.64000000, 4.27000000, 4.00000000, 8.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_13655( ref l_U542, "tbSmashGlass02", -1009.74000000, -0.64000000, 4.27000000, 4.00000000, 8.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_13655( ref l_U563, "tbSmashGlass03", -999.02000000, 0.16000000, 4.27000000, 7.00000000, 4.00000000, 5.00000000, 0.00000000, 0.00000000, -63.80000000, 1 );
    sub_13655( ref l_U584, "tbSmashGlass04", -997.86000000, 6.89000000, 4.27000000, 6.00000000, 4.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_13655( ref l_U605, "tbLobbyExplosionGravWellEnable", -993.53000000, 7.38000000, 4.27000000, 5.00000000, 3.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_13655( ref l_U626, "tbPostCabinetResume", -1001.08000000, 1.02000000, 4.27000000, 4.00000000, 4.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_13655( ref l_U647, "tbCabinetPushArea", -1005.64000000, 1.02000000, 4.27000000, 4.00000000, 4.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_13655( ref l_U668, "tbImageFX_OFF_03", -989.23200000, 0.25425700, 4.39000000, 5.00000000, 10.00000000, 2.00000000, 0.00000000, 0.00000000, -62.69000000, 1 );
    sub_13655( ref l_U710, "tbImageFX_OFF_05", -987.52900000, -4.59782000, 4.39000000, 5.00000000, 2.00000000, 2.00000000, 0.00000000, 0.00000000, 39.38000000, 1 );
    sub_13655( ref l_U689, "tbImageFX_OFF_04", -989.75900000, -1.67619000, 4.39000000, 5.00000000, 2.00000000, 2.00000000, 0.00000000, 0.00000000, 18.67000000, 1 );
    sub_13655( ref l_U731, "tbImageFX_OFF_06", -988.74600000, -3.41914000, 4.39000000, 5.00000000, 2.00000000, 2.00000000, 0.00000000, 0.00000000, 34.67000000, 1 );
    sub_13655( ref l_U752, "tbImageFX_OFF_07", -990.51500000, 3.23310000, 4.39000000, 5.00000000, 2.00000000, 2.00000000, 0.00000000, 0.00000000, 21.60940000, 1 );
    sub_13655( ref l_U773, "tbCabinetPushStartFX", -1011.91000000, 3.67000000, 4.27000000, 4.00000000, 8.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_13655( ref l_U794, "tbCabinetPushStopFX", -1005.17000000, 1.01000000, 4.27000000, 4.00000000, 4.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    sub_19143( ref l_U818, "teCab01", -1015.67000000, -0.01000000, 4.36000000, 20.00000000, 8.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    return;
}

void sub_16293(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

void sub_16593(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU12 = uParam4;
    iParam0->_fU16 = uParam5;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU48 = uParam10;
    return;
}

void sub_16751(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14)
{
    sub_16766( iParam0, uParam13 );
    iParam0->_fU4 = uParam1;
    iParam0->_fU100 = {uParam5};
    iParam0->_fU112 = uParam11;
    iParam0->_fU200 = {uParam8};
    iParam0->_fU212 = uParam12;
    iParam0->_fU320 = uParam14;
    iParam0->_fU20 = {uParam2};
    sub_17134( iParam0 );
    return;
}

void sub_16766(int iParam0, unknown uParam1)
{
    iParam0->_fU0 = uParam1;
    iParam0->_fU4 = 0;
    iParam0->_fU8 = 0;
    iParam0->_fU12 = nil;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU52 = 1;
    iParam0->_fU56 = 1;
    iParam0->_fU60 = 0;
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = 0;
    iParam0->_fU76 = 0;
    iParam0->_fU80 = 0;
    iParam0->_fU84 = 0;
    iParam0->_fU100 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU112 = 0.00000000;
    iParam0->_fU88 = 0;
    iParam0->_fU92 = 0;
    iParam0->_fU96 = 0;
    iParam0->_fU200 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU212 = 0.00000000;
    iParam0->_fU300 = 0;
    iParam0->_fU304 = 1;
    iParam0->_fU308 = 0;
    iParam0->_fU324 = 1;
    iParam0->_fU328 = 0;
    iParam0->_fU340 = 0;
    iParam0->_fU336 = 0.20000000;
    return;
}

void sub_17134(int iParam0)
{
    if (iParam0->_fU12 != nil)
    {
        if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
        {
            REMOVE_GLINT( iParam0->_fU12 );
        }
    }
    iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
    sub_17213( iParam0 );
    return;
}

void sub_17213(int iParam0)
{
    if (iParam0->_fU0 == 1)
    {
        if (iParam0->_fU320 == 1)
        {
            if ((iParam0->_fU8 > 0) AND (iParam0->_fU4 == 0))
            {
                sub_17272( iParam0, 1 );
            }
            else if ((iParam0->_fU8 < 2) AND (iParam0->_fU4 == 1))
            {
                sub_17272( iParam0, 1 );
            }
            else if ((iParam0->_fU8 == 1) AND (iParam0->_fU4 == 2))
            {
                sub_17272( iParam0, 1 );
            }
            else
            {
                sub_17272( iParam0, 0 );
            };;;
        }
        else
        {
            sub_17272( iParam0, 0 );
        }
    }
    else
    {
        sub_17272( iParam0, 0 );
    }
    return;
}

void sub_17272(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        if (iParam0->_fU12 != nil)
        {
            if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
            {
                ENABLE_GLINT( iParam0->_fU12, 1 );
            }
            else
            {
                iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
            }
        }
        else
        {
            iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
        }
    }
    else if (iParam0->_fU12 != nil)
    {
        if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
        {
            ENABLE_GLINT( iParam0->_fU12, 0 );
        }
    }
    return;
}

void sub_17598(int iParam0, unknown uParam1, unknown uParam2)
{
    StrCopy( ref iParam0->_fU32, uParam2, 16 );
    iParam0->_fU48 = uParam1;
    sub_17629( iParam0 );
    return;
}

void sub_17629(int iParam0)
{
    if ((iParam0->_fU8 == 2) AND (iParam0->_fU0 == 1))
    {
        if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
        {
            SET_INTERACTIONTEXT_BUTTON( iParam0->_fU48 );
            SET_INTERACTIONTEXT_TEXT( iParam0 + 32 );
            SET_INTERACTIONTEXT_VISIBLE( 1 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 1 );
            SET_INTERACTIONTEXT_AVAILABLE( 1 );
            iParam0->_fU56 = 1;
        }
    }
    return;
}

void sub_17759(int iParam0, unknown uParam1)
{
    iParam0->_fU332 = uParam1;
    return;
}

void sub_17795(int iParam0, unknown uParam1)
{
    iParam0->_fU336 = uParam1;
    return;
}

void sub_17847(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    iParam0->_fU0 = uParam1;
    iParam0->_fU4 = uParam1;
    iParam0->_fU8 = uParam2;
    iParam0->_fU12 = uParam3;
    iParam0->_fU16 = uParam4;
    iParam0->_fU24 = uParam5;
    iParam0->_fU20 = 0.00000000;
    sub_2307( iParam0 + 28, iParam0->_fU24, 1, 0 );
    sub_2443( iParam0 + 28 );
    return;
}

void sub_19143(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 2, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

void sub_19205()
{
    sub_957( "CCB", "P_INITIALIZE_SP_CHALLENGES", 0 );
    l_U1377 = 0;
    if (NOT (SCRIPT_VAR_HASH_EXISTS( 1701971384 )))
    {
        sub_957( "CCB", "Creating the OldPainless script variable...", 0 );
        SCRIPT_VAR_HASH_ADD_INT( 1701971384 );
        if (SCRIPT_VAR_HASH_EXISTS( 1701971384 ))
        {
            sub_957( "CCB", "The OldPainless script variable was successfully created...", 0 );
        }
        else
        {
            sub_957( "CCB", "The OldPainless script variable is NOT valid!!!", 0 );
        }
    }
    else
    {
        sub_957( "CCB", "The OldPainless script variable was already created...", 0 );
        SCRIPT_VAR_HASH_SET_INT( 1701971384, 0 );
    }
    return;
}

void sub_19659(unknown uParam0)
{
    StrCopy( ref g_U157._fU0, uParam0, 16 );
    sub_19679();
    return;
}

void sub_19679()
{
    int I;

    for ( I = 0; I <= 8; I++ )
    {
        g_U157._fU16[I]._fU0 = nil;
        g_U157._fU16[I]._fU4 = 0;
        g_U157._fU92[I] = 0;
    }
    return;
}

void sub_20519()
{
    sub_957( "SA", "P_REQUEST_PRE_CUTSCENE_ASSETS", 0 );
    sub_20577( ref l_U1043, 0 );
    sub_20831( l_U1115, 0 );
    sub_21002( ref l_U1059, 0, 1 );
    sub_21079( -862236369, 0 );
    sub_20831( 1734252999, 0 );
    sub_21159( 431956140, 0 );
    return;
}

void sub_20577(unknown uParam0, int iParam1)
{
    if (HAS_CUTSCENE_LOADED())
    {
        if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
        {
            SCRIPT_ASSERT( "Another cutscene is already loaded.  You can only load one cutscene into memory.  Your current cutscene will not load into memory.", 0 );
        }
    }
    if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
    {
        PRE_STREAM_SEAMLESS_CUTSCENE( uParam0 );
        if (iParam1 == 1)
        {
            while ((CUTSCENE_IS_LOADED( uParam0 )) == 0)
            {
                WAIT( 0 );
            }
        }
    }
    return;
}

void sub_20831(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
        sub_7855( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_21002(unknown uParam0, unknown uParam1, int iParam2)
{
    REQUEST_ANIM_DICT( uParam0, uParam1 );
    "[doubled result, dropped if not asigned]";
    if (iParam2 == 1)
    {
        while ((HAS_ANIM_DICT_LOADED( uParam0, uParam1 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_21079(unknown uParam0, boolean bParam1)
{
    REQUEST_WEAPON( uParam0 );
    if (bParam1)
    {
        while ((HAS_WEAPON_LOADED( uParam0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_21159(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to load does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 0)
    {
        ISEQ_REQUEST( uParam0 );
        ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
        if (iParam1 == 1)
        {
            while ((ISEQ_QUERY_STATE( uParam0, 1 )) == 1)
            {
                WAIT( 0 );
            }
        }
    }
    return;
}

int sub_21446()
{
    if (CUTSCENE_IS_LOADED( ref l_U1043 ))
    {
        sub_957( "SA", "Opening cutscene loaded...", 0 );
    }
    else
    {
        return 0;
    }
    if (HAS_WEAPON_LOADED( -862236369 ))
    {
        sub_957( "SA", "Weapon's loaded...", 0 );
    }
    else
    {
        return 0;
    }
    if ((HAS_MODEL_LOADED( l_U1115 )) AND (HAS_MODEL_LOADED( 1734252999 )))
    {
        sub_957( "SA", "Models loaded...", 0 );
    }
    else
    {
        return 0;
    }
    if ((ISEQ_QUERY_STATE( 431956140, 2 )) AND (ISEQ_IS_LOADED( 431956140 )))
    {
        sub_957( "SA", "ISeq's loaded and ready...", 0 );
    }
    else
    {
        return 0;
    }
    if (HAS_ANIM_DICT_LOADED( ref l_U1059, 0 ))
    {
        sub_957( "SA", "Anim Dicts loaded...", 0 );
    }
    else
    {
        return 0;
    }
    return 1;
}

void sub_21876()
{
    int I;

    sub_957( "SA", "P_CREATE_CABINET_ENEMIES", 0 );
    sub_5074( ref l_U1305 );
    for ( I = 0; I < 3; I++ )
    {
        l_U1305[I] = sub_21953( ref l_U1309[I] );
        if (NOT (IS_PED_DEAD( l_U1305[I] )))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1305[I], 1 );
            SET_ROOM_FOR_PED_BY_NAME( l_U1305[I], ref g_U1145 );
            SET_PED_COMBAT_MOVEMENT( l_U1305[I], 1 );
            sub_22703( ref l_U818, l_U1305[I], 3 );
            if (I == 0)
            {
                SET_PED_FLAG_BLOCK_WOUNDED_MOVEMENT( l_U1305[I], 1 );
            }
        }
        sub_8184( l_U1305[I], -862236369, 25000, 0, 0 );
    }
    sub_22853( ref l_U1305, "piCabinet_" );
    return;
}

void sub_21953(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
        sub_20831( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
    sub_22432( iParam0->_fU40 );
    sub_22512( iParam0->_fU40 );
    return iParam0->_fU40;
}

void sub_22432(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

void sub_22512(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

void sub_22703(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_TETHERING_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_TETHERING_OPTION( uParam1, uParam2 );
    }
    return;
}

void sub_22853(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

void sub_22955()
{
    sub_957( "SA", "P_SETUP_CABINET", 0 );
    l_U1262 = sub_23034( l_U1115, -1005.53000000, 1.40000000, 5.01000000, 0.00000000, 0.00000000, -101.13000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U1262 ))
    {
        FREEZE_OBJECT_POSITION( l_U1262, 1 );
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1262, ref g_U1145 );
        if (g_U665 != 4)
        {
            SET_OBJECT_VISIBLE( l_U1262, 0 );
        }
    }
    l_U1263 = sub_23034( l_U1115, -1006.00000000, 1.40000000, 5.01000000, 0.00000000, 0.00000000, -101.13000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U1263 ))
    {
        FREEZE_OBJECT_POSITION( l_U1263, 1 );
        SET_OBJECT_VISIBLE( l_U1263, 0 );
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1263, ref g_U1145 );
    }
    return;
}

void sub_23034(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
        sub_20831( uParam0, 1 );
    }
    Result = CREATE_OBJECT_NO_OFFSET( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

void sub_23444()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    sub_957( "SA", "P_SETUP_MID_13C_OFFICE", 0 );
    if ((NOT (IS_PED_DEAD( l_U1305[0] ))) AND (DOES_PED_EXIST( l_U1305[0] )))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U1305[0], "M_Crac_Sold_Z2^2", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( l_U1305[0], -1013.74500000, 0.93100000, 4.92900000, 88.99000000 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( l_U1305[0], "/Global/PLGE/PLGE_Root/PLGE_INITIALIZE_IDLE" );
        uVar2 = GET_WEAPON_FROM_HAND( l_U1305[0], 0, 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( uVar2, "W_PI_Clt1911_Aa_H^2", 0 );
    }
    if ((NOT (IS_PED_DEAD( l_U1305[1] ))) AND (DOES_PED_EXIST( l_U1305[1] )))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U1305[1], "M_Crac_Sold_Z2^1", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( l_U1305[1], -1012.45000000, -0.27400000, 4.92900000, 0.00000000 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( l_U1305[1], "/Global/PLGE/PLGE_Root/PLGE_INITIALIZE_IDLE" );
        uVar3 = GET_WEAPON_FROM_HAND( l_U1305[1], 0, 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( uVar3, "W_PI_Clt1911_Aa_H^1", 0 );
    }
    if ((NOT (IS_PED_DEAD( l_U1305[2] ))) AND (DOES_PED_EXIST( l_U1305[2] )))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U1305[2], "M_Crac_Sold_Z2", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( l_U1305[2], -1007.97500000, 0.86300000, 4.92400000, 90.00000000 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( l_U1305[2], "/Global/PLGE/PLGE_Root/PLGE_INITIALIZE_IDLE" );
        uVar4 = GET_WEAPON_FROM_HAND( l_U1305[2], 0, 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( uVar4, "W_PI_Clt1911_Aa_H", 0 );
    }
    if (NOT (IS_PED_DEAD( sub_1379() )))
    {
        CUTSCENE_REGISTER_PED_TELEPORT( sub_1379(), -1020.11100000, -0.43000000, 4.93400000, 0.00000000 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( sub_1379(), "Global/Player/PlayerRoot/PLAYER_INITIALIZE_LOCO" );
        uVar5 = GET_WEAPON_FROM_HAND( sub_1379(), 0, 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( uVar5, "W_PI_Clt1911_Aa_H^3", 0 );
    }
    ISEQ_REGISTER_ENTITY( 431956140, "player", sub_1379(), 0 );
    ISEQ_REGISTER_ENTITY( 431956140, "enemy", l_U1305[0], 0 );
    CUTSCENE_REGISTER_ISEQ( 431956140 );
    return;
}

void sub_24556()
{
    sub_957( "SA", "LOAD_ASSETS", 0 );
    sub_21079( -862236369, 0 );
    sub_20831( 1734252999, 0 );
    sub_21002( ref l_U1059, 0, 1 );
    sub_21002( "PLGE_PSTL_FULLBODY", 0, 1 );
    sub_21159( 431956140, 0 );
    sub_20831( l_U1115, 0 );
    sub_21159( 1549233931, 0 );
    sub_24690( ref l_U1067, 0 );
    sub_24690( ref l_U1083, 0 );
    sub_24801( "S_OFFICE_FILING_CABINET_FINAL", 0, 0 );
    sub_24801( "SOFF_OFFICES_EXPLOSION", 2, 0 );
    return;
}

void sub_24690(unknown uParam0, int iParam1)
{
    LOAD_SCRIPT_AUDIO_BANK( uParam0 );
    if (iParam1 == 1)
    {
        while ((IS_SCRIPT_AUDIO_BANK_LOADED( uParam0, 0 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

void sub_24801(unknown uParam0, unknown uParam1, int iParam2)
{
    if (iParam2 == 0)
    {
        REQUEST_SCRIPT_STREAM( uParam0, uParam1 );
    }
    else
    {
        while ((LOAD_SCRIPT_STREAM( uParam0, uParam1 )) == 0)
        {
            WAIT( 0 );
        }
    }
    return;
}

int sub_24986()
{
    vector vVar2;
    float fVar5;
    unknown uVar6;
    unknown uVar7;
    int iVar8;

    if (HAS_CUTSCENE_FINISHED())
    {
        if (DOES_OBJECT_EXIST( l_U1262 ))
        {
            SET_OBJECT_VISIBLE( l_U1262, 1 );
        }
        vVar2 = {0, 0, 0};
        fVar5 = 0.00000000;
        CAMERA_PLAY_ANIMATED( ref l_U1059, "B_OUT_MID_13C_OFF_AIM_FWD_UFE_CAMERA", 0, vVar2, fVar5, 1, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U885[4], 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U919[4], 1065353216, 0 );
        return 1;
    }
    else
    {
        uVar6 = GET_CUTSCENE_SECTION_PLAYING();
        uVar7 = GET_CUTSCENE_TIME();
        iVar8 = GET_CUTSCENE_TIME_MS();
        if (NOT l_U1228)
        {
            if (iVar8 > 1000)
            {
                sub_957( "SA", "Opening Fire Arch doors", 0 );
                sub_25262( ref g_U1312, 1, 1, 1065353216 );
                sub_25262( ref g_U1319, 0, 1, 1065353216 );
                l_U1228 = 1;
            }
        }
        return 0;
    }
    return 0;
}

void sub_25262(int iParam0, int iParam1, int iParam2, unknown uParam3)
{
    float fVar6;

    if ((sub_12452( iParam0 )) == 0)
    {
        sub_12518( iParam0 );
    }
    fVar6 = 0.00000000;
    if (iParam1 == 1)
    {
        fVar6 = uParam3;
    }
    else
    {
        fVar6 = -uParam3;
    }
    if (iParam2 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, fVar6 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    return;
}

int sub_25598()
{
    if (HAS_ANIM_DICT_LOADED( ref l_U1059, 0 ))
    {
        sub_957( "SA", "Anim Dicts loaded...", 0 );
    }
    else
    {
        return 0;
    }
    if (HAS_WEAPON_LOADED( -862236369 ))
    {
        sub_957( "SA", "Weapon's loaded...", 0 );
    }
    else
    {
        return 0;
    }
    if ((HAS_MODEL_LOADED( 1734252999 )) AND (HAS_MODEL_LOADED( l_U1115 )))
    {
        sub_957( "SA", "Models loaded...", 0 );
    }
    else
    {
        return 0;
    }
    if ((IS_SCRIPT_AUDIO_BANK_LOADED( ref l_U1083, 0 )) AND (IS_SCRIPT_AUDIO_BANK_LOADED( ref l_U1067, 0 )))
    {
        sub_957( "SA", "Audio Bank's loaded...", 0 );
    }
    else
    {
        return 0;
    }
    if (((ISEQ_QUERY_STATE( 431956140, 3 )) || (ISEQ_QUERY_STATE( 431956140, 2 ))) AND ((ISEQ_IS_LOADED( 431956140 )) AND ((ISEQ_QUERY_STATE( 1549233931, 2 )) AND (ISEQ_IS_LOADED( 1549233931 )))))
    {
        sub_957( "SA", "ISeq's loaded and ready...", 0 );
    }
    else
    {
        return 0;
    }
    if ((LOAD_SCRIPT_STREAM( "SOFF_OFFICES_EXPLOSION", 2 )) AND ((LOAD_SCRIPT_STREAM( "SOFF_CATWALK_COLLAPSE", 1 )) AND (LOAD_SCRIPT_STREAM( "S_OFFICE_FILING_CABINET_FINAL", 0 ))))
    {
        sub_957( "SA", "Script Streams loaded...", 0 );
    }
    else
    {
        return 0;
    }
    return 1;
}

void sub_26237()
{
    unknown uVar2;
    unknown uVar3;

    if (NOT (IS_PED_DEAD( sub_1379() )))
    {
        sub_26287( sub_1379(), g_U751[4], g_U851[4] );
        if ((IS_PED_DEAD( sub_1379() )) == 0)
        {
            FREEZE_PED_POSITION( sub_1379(), 1 );
        }
        uVar2 = GET_HASH_KEY( ref g_U1145 );
        uVar3 = GET_INTERIOR_FROM_NAME( ref g_U1105, 0 );
        SET_INTERIOR_ACTIVE( uVar3, 1, 0 );
        LOAD_SCENE_FOR_ROOM_BY_KEY( uVar3, uVar2 );
        if ((IS_PED_DEAD( sub_1379() )) == 0)
        {
            FREEZE_PED_POSITION( sub_1379(), 0 );
        }
    }
    return;
}

void sub_26287(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

void sub_26534()
{
    vector vVar2;
    float fVar5;

    sub_957( "SA", "P_START_GAMEPLAY", 0 );
    sub_4356();
    ENABLE_DUAL_WIELD_IN_INVENTORY( 0 );
    DISPLAY_HUD( 0 );
    sub_12440( ref g_U1312, 1 );
    sub_12440( ref g_U1319, 1 );
    sub_26615();
    sub_26876();
    AUDIO_MUSIC_FORCE_TRACK( "OFFICE_ACTION_SONG_02", "OFFICE_ACTION_2_4", "", 0.00000000, 0, 0, -1082130432, 0 );
    if (g_U665 == 4)
    {
        ISEQ_REGISTER_ENTITY( 431956140, "player", sub_1379(), 0 );
        ISEQ_REGISTER_ENTITY( 431956140, "enemy", l_U1305[0], 0 );
        ISEQ_START( 431956140 );
        vVar2 = {0, 0, 0};
        fVar5 = 0.00000000;
        CAMERA_PLAY_ANIMATED( ref l_U1059, "B_OUT_MID_13C_OFF_AIM_FWD_UFE_CAMERA", 0, vVar2, fVar5, 1, 0 );
    }
    sub_2443( ref l_U837 );
    DO_SCREEN_FADE_IN( 0 );
    return;
}

void sub_26615()
{
    sub_957( "SA", "P_SETUP_MAX", 0 );
    if (NOT (IS_PED_DEAD( sub_1379() )))
    {
        SET_BULLET_CAM_PREF( sub_1379(), "", "", "", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
        SET_ROOM_FOR_PED_BY_NAME( sub_1379(), ref g_U1145 );
        SET_PED_PROOFS( sub_1379(), 0, 0, 0, 0, 0 );
        SET_PLAYER_CAN_USE_COVER( sub_1401(), 1 );
        SET_PED_FORCED_TO_WALK( sub_1379(), 0 );
        SET_PLAYER_CAN_USE_SHOOTDODGE( sub_1401(), 0 );
        SET_CAM_VIEW_MODE( 0 );
        AUDIO_SET_PED_FOOTSTEPS_VOLUME( sub_1379(), g_U1588 );
    }
    SET_PAYNEKILLER_AMT( 0 );
    SET_ADRENALINE_NOT_ALLOW( 0 );
    SET_TIMECYCLE_MODIFIER_OVERRIDE( "SMOKE_DAMAGE_LOW", "SMOKE_DAMAGE_HIGH", g_U1590, 1.00000000, 0 );
    return;
}

void sub_26876()
{
    if (NOT (IS_PED_DEAD( sub_1379() )))
    {
        sub_26287( sub_1379(), g_U751[4], g_U851[4] );
        if (g_U665 == 4)
        {
            if ((sub_26947( ref l_U464 )) == 0)
            {
                sub_8184( sub_1379(), -862236369, 50, 0, 0 );
                SET_PED_HEALTH( sub_1379(), g_U1595, 0 );
            }
        }
    }
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U885[4], 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U919[4], 1065353216, 0 );
    return;
}

int sub_26947(unknown uParam0)
{
    sub_957( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U0 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U1 );
            sub_5986( uParam0, sub_1379() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

void sub_27477()
{
    if (l_U1245)
    {
        if (sub_27497())
        {
            sub_27814();
            sub_28172();
            sub_28390();
            sub_957( "SA", "Stage 2 assets loaded", 0 );
            l_U1245 = 0;
        }
    }
    return;
}

int sub_27497()
{
    if ((HAS_MODEL_LOADED( 1061947701 )) AND ((HAS_MODEL_LOADED( -345618171 )) AND ((HAS_MODEL_LOADED( 497233282 )) AND ((HAS_MODEL_LOADED( 326670637 )) AND ((HAS_MODEL_LOADED( 1170308542 )) AND ((HAS_MODEL_LOADED( 1481155276 )) AND ((HAS_MODEL_LOADED( 1245447859 )) AND ((HAS_MODEL_LOADED( 789704993 )) AND ((HAS_MODEL_LOADED( 297242865 )) AND ((HAS_MODEL_LOADED( 1931667416 )) AND (HAS_MODEL_LOADED( 1587617883 ))))))))))))
    {
        sub_957( "SA", "Models loaded...", 0 );
    }
    else
    {
        return 0;
    }
    if ((ISEQ_QUERY_STATE( 1252772788, 2 )) AND ((ISEQ_IS_LOADED( 1252772788 )) AND ((ISEQ_QUERY_STATE( 736610621, 2 )) AND (ISEQ_IS_LOADED( 736610621 )))))
    {
        sub_957( "SA", "ISeq's loaded and ready...", 0 );
    }
    else
    {
        return 0;
    }
    return 1;
}

void sub_27814()
{
    sub_957( "SA", "P_SETUP_LOBBY_FLOOR", 0 );
    l_U1261 = sub_27896( 1587617883, -991.25000000, 5.01000000, 4.19900000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U1261 ))
    {
        FREEZE_OBJECT_POSITION( l_U1261, 1 );
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1261, ref g_U1153 );
    }
    return;
}

void sub_27896(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
        sub_20831( uParam0, 1 );
    }
    Result = CREATE_OBJECT( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

void sub_28172()
{
    sub_957( "SA", "P_SETUP_BRIDGE_OBJECTS", 0 );
    l_U1289 = sub_23034( 1931667416, 64558, -8, -0.50000000, 0, 0, 0, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U1289 ))
    {
        FREEZE_OBJECT_POSITION( l_U1289, 1 );
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1289, ref g_U1153 );
    }
    l_U1290 = sub_23034( 297242865, 64558, -8, -0.50000000, 0, 0, 0, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U1290 ))
    {
        FREEZE_OBJECT_POSITION( l_U1290, 1 );
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1290, ref g_U1153 );
    }
    return;
}

void sub_28390()
{
    int I;

    sub_957( "SP", "P_CREATE_SHIMMY_PROPS", 0 );
    for ( I = 0; I < l_U1264; I++ )
    {
        sub_5216( l_U1264[I] );
    }
    l_U1264[0] = sub_23034( 789704993, l_U1598, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    l_U1264[1] = sub_23034( 1245447859, l_U1601, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    l_U1264[2] = sub_23034( 1481155276, l_U1601, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    l_U1264[3] = sub_23034( 1170308542, l_U1601, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    l_U1264[4] = sub_23034( 326670637, l_U1601, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    l_U1264[5] = sub_23034( 497233282, l_U1601, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    l_U1264[6] = sub_23034( -345618171, l_U1601, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    l_U1264[7] = sub_23034( 1061947701, l_U1604, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0 );
    for ( I = 0; I < l_U1264; I++ )
    {
        if ((DOES_OBJECT_EXIST( l_U1264[I] )) == 1)
        {
            ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1264[I], ref g_U1153 );
            FREEZE_OBJECT_POSITION( l_U1264[I], 1 );
            SET_OBJECT_COLLISION( l_U1264[I], 1 );
        }
    }
    return;
}

void sub_28973()
{
    if (l_U1246)
    {
        if (sub_28993())
        {
            sub_29099();
            sub_957( "SA", "Stage 3 assets loaded", 0 );
            l_U1246 = 0;
        }
    }
    return;
}

int sub_28993()
{
    if ((HAS_MODEL_LOADED( 1469509248 )) AND ((HAS_MODEL_LOADED( 255375026 )) AND (HAS_MODEL_LOADED( -343887938 ))))
    {
        sub_957( "SA", "Models loaded...", 0 );
    }
    else
    {
        return 0;
    }
    return 1;
}

void sub_29099()
{
    sub_957( "SA", "P_LOAD_ENDING_CUTSCENE_ASSETS", 0 );
    l_U1363 = sub_21953( ref l_U1364 );
    if (NOT (IS_PED_DEAD( l_U1363 )))
    {
        SET_ROOM_FOR_PED_BY_NAME( l_U1363, ref g_U1153 );
        FREEZE_PED_POSITION( l_U1363, 1 );
    }
    l_U1288 = sub_23034( 255375026, 64559, 4.50000000, 2, 0, 0, 0, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U1288 ))
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1288, ref g_U1153 );
        FREEZE_OBJECT_POSITION( l_U1288, 1 );
    }
    l_U1291 = sub_21953( ref l_U1292 );
    if (((IS_PED_DEAD( l_U1291 )) == 0) AND ((DOES_PED_EXIST( l_U1291 )) == 1))
    {
        FREEZE_PED_POSITION( l_U1291, 1 );
        SET_PED_NAME_DEBUG( l_U1291, "piMirroredMax" );
    }
    return;
}

void sub_29440()
{
    int iVar2;

    if (ISEQ_IS_LOADED( 431956140 ))
    {
        if (ISEQ_QUERY_STATE( 431956140, 3 ))
        {
            sub_957( "SA", "B_OUT_MID_13C_OFF - Playing", 0 );
            if (NOT l_U1225)
            {
                if (IS_ANIMATED_CAMERA_PLAYING() == 1)
                {
                    if (CAMERA_ANIMATED_CURRENT_TIME() >= 800)
                    {
                        sub_957( "SA", "Stopping blend cam", 0 );
                        DISPLAY_HUD( 1 );
                        ENABLE_DUAL_WIELD_IN_INVENTORY( 0 );
                        CAMERA_ANIMATED_STOP( 1000, 1 );
                        l_U1225 = 1;
                    }
                }
            }
            if (NOT l_U1224)
            {
                sub_957( "SA", "bMid13CBlendMaxSnappedToCover", 0 );
                if (NOT (IS_PED_DEAD( sub_1379() )))
                {
                    sub_957( "SA", "Snapping Max to cover", 0 );
                    SNAP_PLAYER_TO_COVERPOINT( sub_1401(), "GenCover", "8F3ECDA9_C3E45C7_Corner1", 1 );
                    PED_FINISH_ACTION_INTENTION( sub_1379(), 48 );
                    l_U1224 = 1;
                }
            }
            if (NOT l_U1226)
            {
                sub_957( "SA", "bMid13CBlendEnemy0SnappedToCover", 0 );
                if ((NOT (IS_PED_DEAD( l_U1305[0] ))) AND (DOES_PED_EXIST( l_U1305[0] )))
                {
                    if ((PED_GET_ACTION_INTENTION_STATUS( l_U1305[0], 47 )) == 3)
                    {
                        sub_957( "SA", "Snapping piCabinet_0 to cover", 0 );
                        if (NOT (IS_PED_DEAD( sub_1379() )))
                        {
                            TASK_COMBAT_SNAP_TO_COVER( l_U1305[0], "GenCover", "8F3ECDA9_4E6B48DC_Corner2", sub_1379() );
                        }
                        PED_FINISH_ACTION_INTENTION( l_U1305[0], 47 );
                        if ((NOT (IS_PED_DEAD( l_U1305[1] ))) AND (NOT (IS_PED_DEAD( sub_1379() ))))
                        {
                            TASK_COMBAT_SNAP_TO_COVER_COORDS( l_U1305[1], -1012.85000000, 0.02000000, 4.92000000, sub_1379() );
                        }
                        l_U1226 = 1;
                    }
                }
            }
        }
    }
    if (NOT l_U1227)
    {
        sub_957( "SA", "bMid13CBlendEnemiesToAI", 0 );
        if ((PED_GET_ACTION_INTENTION_STATUS( sub_1379(), 49 )) == 3)
        {
            sub_957( "SA", "Releasing enemies to AI & giving Max control", 0 );
            if (NOT (IS_PED_DEAD( l_U1305[0] )))
            {
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1305[0], 0 );
            }
            if (NOT (IS_PED_DEAD( l_U1305[1] )))
            {
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1305[1], 0 );
            }
            if (NOT (IS_PED_DEAD( l_U1305[2] )))
            {
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1305[2], 0 );
                if (NOT (IS_PED_DEAD( sub_1379() )))
                {
                    TASK_COMBAT_PED( l_U1305[2], sub_1379() );
                }
            }
            SET_PLAYER_CONTROL( sub_1401(), 1, 0 );
            PED_FINISH_ACTION_INTENTION( sub_1379(), 49 );
            if (l_U1229)
            {
                sub_957( "SA", "Saving checkpoint", 0 );
                iVar2 = 1;
                if (g_U665 == 4)
                {
                    iVar2 = 0;
                }
                g_U665 = 4;
                g_U666 = 4;
                sub_30572( ref l_U464, g_U665, sub_1379(), g_U751[4], g_U851[4], g_U885[4], g_U919[4], iVar2 );
                l_U1229 = 0;
            }
            sub_34192();
            l_U1227 = 1;
        }
    }
    return;
}

void sub_30572(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

    sub_957( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
        sub_957( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
        sub_8838( iParam1 );
        sub_30831( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
            sub_31282( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
            sub_31282( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_31514( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
            sub_31282( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_31514( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_31514( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
            sub_31282( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_31514( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_31514( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_31514( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
            sub_31282( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if (sub_31514( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if (sub_31514( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if (sub_31514( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if (sub_31514( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
            sub_33072( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U1, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
    sub_957( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

void sub_30831(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 = sub_6202( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
        sub_957( "TEH", "Ending context", 0 );
        sub_957( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

void sub_31282(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

void sub_31514(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

void sub_33072(int iParam0)
{
    sub_7855( "CHECKPOINT DATA" );
    sub_33111( iParam0->_fU4 );
    sub_33134( iParam0->_fU16 );
    sub_33134( iParam0->_fU20 );
    sub_33134( iParam0->_fU24 );
    sub_33177( iParam0->_fU28 );
    sub_33177( iParam0->_fU56 );
    sub_33177( iParam0->_fU60 );
    sub_33177( iParam0->_fU64 );
    sub_33177( iParam0->_fU68 );
    sub_33177( iParam0->_fU72 );
    sub_33177( iParam0->_fU76 );
    sub_33177( iParam0->_fU80 );
    sub_33177( iParam0->_fU84 );
    sub_33177( iParam0->_fU88 );
    sub_33177( iParam0->_fU92 );
    sub_33134( iParam0->_fU32 );
    sub_33177( iParam0->_fU36 );
    sub_33177( iParam0->_fU40 );
    sub_33177( iParam0->_fU44 );
    sub_33134( iParam0->_fU136 );
    sub_33382( iParam0->_fU140 );
    sub_33177( iParam0->_fU52 );
    sub_7855( "---nRightHolsterAttachmentEnabled: " );
    sub_33177( iParam0->_fU96 );
    sub_7855( "---nRightHolsterAttachmentToggled: " );
    sub_33177( iParam0->_fU100 );
    sub_7855( "---nLeftHolsterAttachmentEnabled: " );
    sub_33177( iParam0->_fU104 );
    sub_7855( "---nLeftHolsterAttachmentToggled: " );
    sub_33177( iParam0->_fU108 );
    sub_7855( "---nRifleHolsterAttachmentEnabled: " );
    sub_33177( iParam0->_fU112 );
    sub_7855( "---nRifleHolsterAttachmentToggled: " );
    sub_33177( iParam0->_fU116 );
    sub_7855( "---nRightHandAttachmentEnabled: " );
    sub_33177( iParam0->_fU120 );
    sub_7855( "---nRightHandAttachmentToggled: " );
    sub_33177( iParam0->_fU124 );
    sub_7855( "---nLeftHandAttachmentEnabled: " );
    sub_33177( iParam0->_fU128 );
    sub_7855( "---nLeftHandAttachmentToggled: " );
    sub_33177( iParam0->_fU132 );
    sub_33177( l_U1 );
    sub_33177( 144 );
    return;
}

void sub_33111(unknown uParam0, unknown uParam1, unknown uParam2)
{
    return;
}

void sub_33134(unknown uParam0)
{
    return;
}

void sub_33177(unknown uParam0)
{
    return;
}

void sub_33382(boolean bParam0)
{
    if (bParam0)
    {
        ;
    }
    return;
}

void sub_34192()
{
    sub_957( "SA", "P_RESET_COUGHING_TIMER", "###" );
    g_U1585 = 1;
    g_U1587 = 1;
    l_U267 = 0;
    l_U266 = 3;
    l_U268 = 1;
    return;
}

void sub_34295()
{
    int iVar2;

    if (l_U1218 == 0)
    {
        if (sub_34321( ref l_U1116 ))
        {
            if (NOT (IS_PED_DEAD( sub_1379() )))
            {
                ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "GRAVITY_WELL_CABINET", 0, 0, 0, 0 );
                CAMERA_USE_HANDY_CAM( 1, 10.00000000, 1 );
                sub_2944( ref l_U1026 );
                sub_36950();
                sub_37388();
                l_U1245 = 1;
                l_U1218 = 1;
            }
        }
    }
    else
    {
        SET_RAIL_RELATIVE_DIR( 5, 60.95300000 );
        if ((ISEQ_QUERY_STATE( 1549233931, 3 )) == 1)
        {
            if (sub_37637())
            {
                iVar2 = sub_37771( ref l_U1202 );
                if (iVar2 == 0)
                {
                    if (l_U462 == 0)
                    {
                        sub_2944( ref l_U1008 );
                        sub_2944( ref l_U1017 );
                        DEACTIVATE_SPECIAL_FX_MODIFIER( "FIRE_COUGH" );
                        if (((IS_PED_DEAD( sub_1379() )) == 0) AND ((DOES_PED_EXIST( sub_1379() )) == 1))
                        {
                            PED_SET_ACTION_INTENTION( sub_1379(), 48, 1000, 0.00000000, 0.00000000, 0.00000000 );
                            sub_10955();
                        }
                        l_U462 = 1;
                    }
                }
                else if (iVar2 == 1)
                {
                    if (l_U462 == 1)
                    {
                        if (((IS_PED_DEAD( sub_1379() )) == 0) AND ((DOES_PED_EXIST( sub_1379() )) == 1))
                        {
                            PED_SET_ACTION_INTENTION( sub_1379(), 49, 1000, 0.00000000, 0.00000000, 0.00000000 );
                            sub_11535();
                            PLAY_IMAGEFX( "GAMMA_SATURATION_COLOR_ZOOM", 4, 1 );
                            sub_2443( ref l_U864 );
                            sub_2443( ref l_U981 );
                            sub_35715( ref l_U1116, 0 );
                        }
                        sub_2443( ref l_U828 );
                        l_U462 = 2;
                    }
                }
                else if (iVar2 == 2)
                {
                    if (l_U462 == 0)
                    {
                        if ((NOT l_U1008._fU16) AND (NOT l_U1008._fU20))
                        {
                            sub_2443( ref l_U1017 );
                        }
                    }
                    if (l_U462 == 1)
                    {
                        if (((IS_PED_DEAD( sub_1379() )) == 0) AND ((DOES_PED_EXIST( sub_1379() )) == 1))
                        {
                            PED_SET_ACTION_INTENTION( sub_1379(), 47, 1000, 0.00000000, 0.00000000, 0.00000000 );
                            sub_11070();
                        }
                        l_U462 = 0;
                    }
                };;;
            }
            if (sub_1705( ref l_U1017 ))
            {
                ADD_SPECIAL_FX_MODIFIER( "FIRE_COUGH", 1.00000000, 0.00000000, g_U1591, g_U1592 );
                sub_2443( ref l_U1008 );
            }
            if (sub_1705( ref l_U1008 ))
            {
                if ((GET_PED_HEALTH( sub_1379() )) < g_U1594)
                {
                    PED_SET_ACTION_INTENTION( sub_1379(), 52, 1000, 0.00000000, 0.00000000, 0.00000000 );
                    SET_PLAYER_CONTROL( sub_1401(), 0, 0 );
                    sub_4356();
                    DISPLAY_HUD( 0 );
                    sub_2443( ref l_U999 );
                }
                else
                {
                    SET_PED_HEALTH( sub_1379(), (GET_PED_HEALTH( sub_1379() )) - g_U1596, 0 );
                    sub_2944( ref l_U1008 );
                    sub_2443( ref l_U1008 );
                    sub_35715( ref l_U1116, 1 );
                }
            }
            if (sub_1705( ref l_U999 ))
            {
                g_U743 = CREATE_CAM( "DEFAULT_BULLET_CAMERA", 1 );
                SETUP_BULLET_CAMERA_SCENE( g_U743, "MISS_DEATH_FALL_01A", 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, "", "" );
                SET_CAM_ACTIVE( g_U743, 1 );
                l_U1243 = 1;
            }
            if (NOT (IS_PED_DEAD( sub_1379() )))
            {
                if ((PED_GET_ACTION_INTENTION_STATUS( sub_1379(), 51 )) == 3)
                {
                    sub_957( "NS", "ACTION INTENTION FOR FINISH HIT!!!", 0 );
                    PED_FINISH_ACTION_INTENTION( sub_1379(), 51 );
                    sub_34192();
                    l_U1218 = 0;
                }
            }
            if (sub_1705( ref l_U828 ))
            {
                sub_957( "NS", "tmrCabPushSuccessReturnToGameplay is finished", 0 );
                sub_35644( ref l_U1116, 0 );
                l_U1219 = 1;
                SET_CAMERA_OVERRIDE( "", "", 1, 1, 1 );
                CAMERA_USE_HANDY_CAM( 1, 5.00000000, 1 );
                SET_GAMEPLAY_CAM_RELATIVE_HEADING( 6.84637000, 1, 1 );
                SET_PLAYER_CONTROL( sub_1401(), 0, 256 );
                REENABLE_PLAYER_INPUT( 8 );
                REENABLE_PLAYER_INPUT( 9 );
                REENABLE_PLAYER_INPUT( 12 );
                REENABLE_PLAYER_INPUT( 19 );
                REENABLE_PLAYER_INPUT( 28 );
                sub_39197();
                sub_2443( ref l_U963 );
            }
            if (sub_1705( ref l_U963 ))
            {
                SET_CAM_VIEW_MODE( 0 );
            }
        }
    }
    if (sub_1705( ref l_U981 ))
    {
        PLAY_IMAGEFX( "FLASH_WHITE", 4, 0 );
        SHAKE_GAMEPLAY_CAM( "SMALL_EXPLOSION_SHAKE", 1065353216 );
        SET_GAMEPLAY_CAM_SHAKE_AMPLITUDE( "SMALL_EXPLOSION_SHAKE", 0.24000000 );
    }
    if (sub_39371( ref l_U626, 0 ))
    {
        sub_957( "SA", "Resuming full control after dropping from cabinet", 0 );
        SET_PLAYER_CONTROL( sub_1401(), 1, 256 );
    }
    return;
}

int sub_34321(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    int iVar6;
    int iVar7;
    int iVar8;

    if ((IS_PED_DEAD( sub_1379() )) == 0)
    {
        if (iParam0->_fU0 == 1)
        {
            uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( sub_1379() )};
            iVar6 = 0;
            if (iParam0->_fU80 == 1)
            {
                if ((sub_34407( sub_1379(), iParam0->_fU116 )) == 1)
                {
                    if (iParam0->_fU300 == 1)
                    {
                        if (((IS_OBJECT_ON_SCREEN( iParam0->_fU312 )) == 1) AND ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1))
                        {
                            iVar6 = 1;
                        }
                    }
                    else
                    {
                        iVar6 = 1;
                    }
                }
            }
            else if ((iParam0->_fU308 == 1) AND (iParam0->_fU84 == 1))
            {
                if ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU312 ), 1 )) <= iParam0->_fU112)
                    {
                        if (iParam0->_fU300 == 1)
                        {
                            if ((IS_OBJECT_ON_SCREEN( iParam0->_fU312 )) == 1)
                            {
                                iVar6 = 1;
                            }
                        }
                        else
                        {
                            iVar6 = 1;
                        }
                    }
                }
            }
            else if (iParam0->_fU96 == 1)
            {
                if ((DOES_PED_EXIST( iParam0->_fU316 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU316 ), 1 )) <= iParam0->_fU112)
                    {
                        if (iParam0->_fU300 == 1)
                        {
                            if ((IS_PED_ON_SCREEN( iParam0->_fU316, 0 )) == 1)
                            {
                                iVar6 = 1;
                            }
                        }
                        else
                        {
                            iVar6 = 1;
                        }
                    }
                }
            }
            else if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, iParam0->_fU100, 1 )) <= iParam0->_fU112)
            {
                if (iParam0->_fU300 == 1)
                {
                    if (((IS_OBJECT_ON_SCREEN( iParam0->_fU312 )) == 1) AND ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1))
                    {
                        iVar6 = 1;
                    }
                }
                else
                {
                    iVar6 = 1;
                }
            };;;;
            iVar7 = 0;
            if (iParam0->_fU88 == 1)
            {
                if ((sub_34407( sub_1379(), iParam0->_fU216 )) == 1)
                {
                    iVar7 = 1;
                }
            }
            else if ((iParam0->_fU308 == 1) AND (iParam0->_fU92 == 1))
            {
                if ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU312 ), 1 )) <= iParam0->_fU212)
                    {
                        iVar7 = 1;
                    }
                }
            }
            else if (iParam0->_fU96 == 1)
            {
                if ((DOES_PED_EXIST( iParam0->_fU316 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU316 ), 1 )) <= iParam0->_fU212)
                    {
                        iVar7 = 1;
                    }
                }
            }
            else if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, iParam0->_fU200, 1 )) <= iParam0->_fU212)
            {
                iVar7 = 1;
            };;;;
            if (iVar6 == 1)
            {
                if ((iParam0->_fU4 != 3) AND (iParam0->_fU52 == 1))
                {
                    if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                    {
                        sub_35196( iParam0 );
                    }
                    iVar8 = 0;
                    if ((IS_WEAPON_PICKUP_VISIBLE() == 0) AND ((iParam0->_fU60 == 0) AND ((sub_35257( iParam0 )) == 1)))
                    {
                        SET_ACTION_CONSUMED( 0, 1 );
                        if (sub_35567() == 1)
                        {
                            iVar8 = 1;
                        }
                    }
                    if (iVar8 == 1)
                    {
                        if (iParam0->_fU332 == 0)
                        {
                            sub_35644( iParam0, 0 );
                            iParam0->_fU64 = 1;
                        }
                        if (iParam0->_fU68 == 1)
                        {
                            iParam0->_fU72 = 0;
                        }
                        return 1;
                    }
                    else if (iParam0->_fU8 != 2)
                    {
                        if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                        {
                            sub_17272( iParam0, 0 );
                            sub_35715( iParam0, 1 );
                        }
                        else if (iParam0->_fU320 == 1)
                        {
                            sub_17272( iParam0, 1 );
                        }
                        iParam0->_fU8 = 2;
                    }
                    if ((iParam0->_fU328 == 0) AND (iParam0->_fU324 == 1))
                    {
                        if ((IS_PED_DEAD( sub_1379() )) == 0)
                        {
                            SET_PED_FORCED_TO_WALK( sub_1379(), 1 );
                            iParam0->_fU328 = 1;
                        }
                    }
                }
            }
            else if (iVar7 == 1)
            {
                if (iParam0->_fU8 != 1)
                {
                    if ((iParam0->_fU4 != 3) AND (iParam0->_fU320 == 1))
                    {
                        sub_17272( iParam0, 1 );
                    }
                    if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                    {
                        sub_35715( iParam0, 0 );
                    }
                    if (iParam0->_fU96 == 1)
                    {
                        if (((IS_PED_DEAD( sub_1379() )) == 0) AND ((((IS_PED_DEAD( iParam0->_fU316 )) == 1) || ((IS_PED_DEAD( iParam0->_fU316 )) == 0)) AND ((DOES_PED_EXIST( iParam0->_fU316 )) == 1)))
                        {
                            TASK_LOOK_AT_PED( sub_1379(), iParam0->_fU316, -1, 0 );
                        }
                    }
                    else if ((IS_PED_DEAD( sub_1379() )) == 0)
                    {
                        TASK_LOOK_AT_COORD( sub_1379(), iParam0->_fU100, -1, 0 );
                    }
                    iParam0->_fU340 = 1;
                    if ((iParam0->_fU72 == 0) AND ((iParam0->_fU68 == 1) AND ((iParam0->_fU64 == 1) AND (iParam0->_fU8 == 2))))
                    {
                        iParam0->_fU72 = 1;
                    }
                    iParam0->_fU8 = 1;
                }
                if ((iParam0->_fU328 == 0) AND (iParam0->_fU324 == 1))
                {
                    if ((IS_PED_DEAD( sub_1379() )) == 0)
                    {
                        SET_PED_FORCED_TO_WALK( sub_1379(), 1 );
                        iParam0->_fU328 = 1;
                    }
                }
            }
            else if ((iParam0->_fU4 == 1) || (iParam0->_fU4 == 3))
            {
                ;
            }
            else if (iParam0->_fU8 != 0)
            {
                if (iParam0->_fU320 == 1)
                {
                    sub_17272( iParam0, 0 );
                }
            }
            if (iParam0->_fU8 == 2)
            {
                if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                {
                    sub_35715( iParam0, 0 );
                }
            }
            if (iParam0->_fU340)
            {
                if ((IS_PED_DEAD( sub_1379() )) == 0)
                {
                    TASK_CLEAR_LOOK_AT( sub_1379() );
                    iParam0->_fU340 = 0;
                }
            }
            if ((iParam0->_fU328 == 1) AND (iParam0->_fU324 == 1))
            {
                if ((IS_PED_DEAD( sub_1379() )) == 0)
                {
                    SET_PED_FORCED_TO_WALK( sub_1379(), 0 );
                    iParam0->_fU328 = 0;
                }
            }
            if (iParam0->_fU332 == 1)
            {
                sub_35715( iParam0, 0 );
            }
            iParam0->_fU8 = 0;;;
        }
    }
    return 0;
}

int sub_34407(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, ref uParam1._fU0 );
    }
    return 0;
}

void sub_35196(int iParam0)
{
    if (iParam0->_fU60 == 1)
    {
        SET_INTERACTIONTEXT_AVAILABLE( 0 );
        iParam0->_fU56 = 0;
    }
    else if (iParam0->_fU56 == 1)
    {
        if ((sub_35257( iParam0 )) == 0)
        {
            SET_INTERACTIONTEXT_AVAILABLE( 0 );
            iParam0->_fU56 = 0;
        }
    }
    else if ((sub_35257( iParam0 )) == 1)
    {
        SET_INTERACTIONTEXT_AVAILABLE( 1 );
        iParam0->_fU56 = 1;
    };;;
    return;
}

int sub_35257(int iParam0)
{
    if (((IS_PED_DEAD( sub_1379() )) == 0) AND ((IS_PLAYER_DEAD( sub_1401() )) == 0))
    {
        if (((IS_PED_RELOADING( sub_1379() )) == 1) || (((IS_PED_GETTING_UP( sub_1379() )) == 1) || (((IS_PED_PICKING_UP_PICKUP( sub_1379() )) == 1) || (((IS_PED_IN_COVER( sub_1379() )) == 1) || (((IS_PED_DUCKING( sub_1379() )) == 1) || (IS_PLAYER_SHOOTDODGING() == 1))))))
        {
            return 0;
        }
        if (iParam0->_fU304 == 0)
        {
            if ((IS_MONOLOGUE_PLAYING() == 1) || ((IS_ANY_SPEECH_PLAYING( sub_1379() )) == 1))
            {
                return 0;
            }
        }
        return 1;
    }
    return 0;
}

int sub_35567()
{
    if ((IS_CONTROL_JUST_PRESSED( 0, 30 )) == 1)
    {
        return 1;
    }
    return 0;
}

void sub_35644(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        if ((iParam0->_fU4 == 1) AND (iParam0->_fU320 == 1))
        {
            sub_17272( iParam0, 1 );
        }
        iParam0->_fU0 = 1;
    }
    else
    {
        sub_17272( iParam0, 0 );
        sub_35715( iParam0, 0 );
        if ((IS_PED_DEAD( sub_1379() )) == 0)
        {
            TASK_CLEAR_LOOK_AT( sub_1379() );
            if ((iParam0->_fU328 == 1) AND (iParam0->_fU324 == 1))
            {
                SET_PED_FORCED_TO_WALK( sub_1379(), 0 );
                iParam0->_fU328 = 0;
            }
        }
        iParam0->_fU8 = 0;
        iParam0->_fU0 = 0;
    }
    return;
}

void sub_35715(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        SET_INTERACTIONTEXT_TEXT( iParam0 + 32 );
        SET_INTERACTIONTEXT_BUTTON( iParam0->_fU48 );
        if ((iParam0->_fU72 == 0) AND ((iParam0->_fU64 == 1) AND (iParam0->_fU68 == 1)))
        {
            SET_INTERACTIONTEXT_VISIBLE( 0 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 0 );
            SET_INTERACTIONTEXT_AVAILABLE( 0 );
            iParam0->_fU56 = 0;
        }
        else
        {
            SET_INTERACTIONTEXT_VISIBLE( 1 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 1 );
            SET_INTERACTIONTEXT_AVAILABLE( 1 );
            iParam0->_fU56 = 1;
        }
        sub_35196( iParam0 );
        if (iParam0->_fU332 == 1)
        {
            SET_INTERACTIONTEXT_PULSE( 1 );
            SET_INTERACTIONTEXT_PULSE_PERIOD( iParam0->_fU336 );
        }
    }
    else
    {
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        SET_INTERACTIONTEXT_BUTTON_VISIBLE( 0 );
    }
    return;
}

void sub_36950()
{
    sub_957( "SA", "P_START_CABINET_PUSH", 0 );
    sub_4356();
    SET_CAM_VIEW_MODE( 1 );
    SET_CAMERA_OVERRIDE( "S_OFFICE_FIRE_CABINET1", "S_OFFICE_FIRE_CABINET1", 0, 1, 1 );
    SET_CAMERA_OVERRIDE( "S_OFFICE_FIRE_CABINET1", "S_OFFICE_FIRE_CABINET1", 0, 1, 1 );
    SET_RAIL_RELATIVE_DIR( 5, 60.95300000 );
    if (NOT (IS_PLAYER_DEAD( sub_1401() )))
    {
        SET_PLAYER_CONTROL( sub_1401(), 0, 0 );
        REENABLE_PLAYER_INPUT( 14 );
        REENABLE_PLAYER_INPUT( 15 );
        REENABLE_PLAYER_INPUT( 16 );
        REENABLE_PLAYER_INPUT( 17 );
    }
    REMOVE_PICKUPS_OF_TYPE_IN_GAMEPLAY_HELPER_BOX( -343443786, ref l_U647._fU0 );
    l_U462 = 0;
    sub_5216( l_U1263 );
    SET_PED_SYNC_POINT( sub_1379(), -1006.97000000, 1.53000000, 4.92000000, -102.00000000 );
    if (NOT (IS_PED_DEAD( sub_1379() )))
    {
        SET_ROOM_FOR_PED_BY_NAME( sub_1379(), ref g_U1145 );
    }
    ISEQ_REGISTER_ENTITY( 1549233931, "MAX", sub_1379(), 0 );
    ISEQ_REGISTER_ENTITY( 1549233931, "CABINET", l_U1262, 1 );
    ISEQ_START( 1549233931 );
    DO_SCREEN_FADE_IN( 0 );
    return;
}

void sub_37388()
{
    sub_957( "SA", "P_REQUEST_ASSETS_STAGE_2", 0 );
    sub_20831( 1587617883, 0 );
    sub_20831( 1931667416, 0 );
    sub_20831( 297242865, 0 );
    sub_20831( 789704993, 0 );
    sub_20831( 1245447859, 0 );
    sub_20831( 1481155276, 0 );
    sub_20831( 1170308542, 0 );
    sub_20831( 326670637, 0 );
    sub_20831( 497233282, 0 );
    sub_20831( -345618171, 0 );
    sub_20831( 1061947701, 0 );
    sub_21159( 1252772788, 0 );
    sub_21159( 736610621, 0 );
    return;
}

int sub_37637()
{
    if (((IS_PED_DEAD( sub_1379() )) == 0) AND ((DOES_PED_EXIST( sub_1379() )) == 1))
    {
        if ((PED_GET_ACTION_INTENTION_STATUS( sub_1379(), 55 )) == 3)
        {
            sub_957( "NS", "player not ready for button mash", 0 );
            return 0;
        }
    }
    return 1;
}

int sub_37771(int iParam0)
{
    float fVar3;

    SET_ACTION_CONSUMED( 2, 1 );
    if ((IS_CONTROL_JUST_PRESSED( 2, 30 )) == 1)
    {
        iParam0->_fU0 += iParam0->_fU8;
        iParam0->_fU20 = 0;
    }
    else
    {
        iParam0->_fU20 += GET_REAL_FRAME_TIME();
    }
    if ((sub_1705( iParam0 + 28 )) == 1)
    {
        fVar3 = iParam0->_fU12 + (iParam0->_fU20 * iParam0->_fU16);
        iParam0->_fU0 -= fVar3;
        sub_2944( iParam0 + 28 );
        sub_2443( iParam0 + 28 );
    }
    if (iParam0->_fU0 >= 100.00000000)
    {
        iParam0->_fU0 = 100.00000000;
        return 1;
    }
    else if (iParam0->_fU0 <= 0.00000000)
    {
        iParam0->_fU0 = 0.00000000;
        return 2;
    }
    return 0;
}

void sub_39197()
{
    sub_20577( ref l_U1051, 0 );
    return;
}

void sub_39371(int iParam0, unknown uParam1)
{
    if (iParam0->_fU64 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU64 = sub_34407( sub_1379(), (iParam0^) );
        if ((iParam0->_fU64) AND (uParam1))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU64;
}

void sub_39559()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    float fVar5;
    float fVar6;
    float fVar7;

    if (sub_39371( ref l_U605, 0 ))
    {
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "GRAVITY_WELL_EXPLOSION_3", 1, 0, 0, 0 );
    }
    if (GET_PED_REACHED_TARGETED_GRAVWELL_CENTER( sub_1379(), "s_office_fireatrium_gravitywells", "GRAVITY_WELL_EXPLOSION_3", 1 ))
    {
        sub_39737();
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "GRAVITY_WELL_EXPLOSION_3", 0, 0, 0, 0 );
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "GRAVITY_WELL_SHIMMY_1", 1, 0, 0, 0 );
        sub_4356();
        SET_PLAYER_CONTROL( sub_1401(), 0, 0 );
        sub_2443( ref l_U990 );
        SET_CAM_VIEW_MODE( 1 );
        uVar2 = {(vector( -993.50000000, 7.36000000, 4.92000000)) + (vector( -3.23000000, 0.00000000, 1.58000000))};
        fVar5 = -93.41400000;
        CAMERA_PLAY_ANIMATED( ref l_U1059, "VIG_18_OFF_EXPL_MED_FWD_CAM", 1, uVar2, fVar5, 1, 500 );
        ISEQ_UNREGISTER_ENTITY( 736610621, "player" );
        ISEQ_REGISTER_ENTITY( 736610621, "player", sub_1379(), 0 );
        ISEQ_START( 736610621 );
        l_U1223 = 1;
        sub_2443( ref l_U945 );
    }
    if (sub_1705( ref l_U945 ))
    {
        PLAY_SCRIPT_STREAM_FRONTEND( 2 );
        START_PARTICLE_FX_NON_LOOPED_AT_COORD( "Of_Rayfire_Explo_01", -983.15000000, 7.03000000, 4.21000000, 0, 0, 0, 1.00000000 );
        sub_2443( ref l_U918 );
    }
    if (sub_1705( ref l_U918 ))
    {
        sub_957( "SA", "Triggering Collapse", 0 );
        PLAY_OBJECT_ANIM( l_U1261, "rf_ofc_cllps01", "of_objModels", 0.00000000, 0, 1 );
        SET_OBJECT_ANIM_SPEED( l_U1261, "rf_ofc_cllps01", "of_objModels", 1.50000000 );
        l_U1252 = GET_SOUND_ID();
        l_U1253 = GET_SOUND_ID();
        STOP_SOUND( l_U1252, 0 );
        STOP_SOUND( l_U1253, 0 );
        PLAY_SOUND_FROM_COORD( l_U1252, "S_OFFICE_FLOOR_COLLAPSE", -991.25000000, 5.01000000, 4.19900000 );
        PLAY_SOUND_FROM_COORD( l_U1253, "S_OFFICE_FLAME_BURST", -991.25000000, 5.01000000, 4.19900000 );
        sub_2443( ref l_U927 );
        sub_2443( ref l_U936 );
        sub_5074( ref l_U1305 );
    }
    if (sub_1705( ref l_U927 ))
    {
        sub_957( "SA", "Triggering Rods Floor Smoke", 0 );
        START_PARTICLE_FX_NON_LOOPED_AT_COORD( "OF_FloorSmoke_S", l_U1254, 0, 0, 0, 1065353216 );
    }
    if (sub_1705( ref l_U936 ))
    {
        sub_957( "SA", "Triggering Rods Floor Flame", 0 );
        START_PARTICLE_FX_NON_LOOPED_AT_COORD( "OF_FlameSurge_S", l_U1257, 0, 0, 0, 1065353216 );
    }
    if (l_U1223)
    {
        if (IS_ANIMATED_CAMERA_PLAYING() == 1)
        {
            if (CAMERA_ANIMATED_CURRENT_TIME() >= 7500)
            {
                sub_957( "SA", "Stoping Animated cam", 0 );
                if (NOT (IS_PED_DEAD( sub_1379() )))
                {
                    SET_PED_FORCED_TO_WALK( sub_1379(), 1 );
                }
                SET_PLAYER_CONTROL( sub_1401(), 1, 0 );
                fVar6 = 4.35547500;
                fVar7 = -5.40631800;
                SET_GAMEPLAY_CAM_RELATIVE_HEADING( fVar6, 1065353216, 0 );
                SET_GAMEPLAY_CAM_RELATIVE_PITCH( fVar7, 1065353216, 0 );
                CAMERA_ANIMATED_STOP( 1000, 1 );
                sub_2443( ref l_U972 );
                l_U1223 = 0;
            }
        }
    }
    if (sub_1705( ref l_U972 ))
    {
        sub_957( "SA", "Resuming coughing timer", 0 );
        sub_34192();
    }
    return;
}

void sub_39737()
{
    sub_957( "CO", "P_INITIALIZE_ImageFX_EFFECTS01", 0 );
    sub_39795( ref l_U1378 );
    l_U1378[0]._fU4 = "FLASH_YELLOW_RIGHT";
    l_U1378[0]._fU12 = 0;
    l_U1378[0]._fU32 = 0;
    l_U1378[0]._fU8 = 4;
    l_U1378[1]._fU4 = "DOUBLE_WIDE_INTERLACE_FLASH_06";
    l_U1378[1]._fU12 = l_U1595;
    l_U1378[1]._fU32 = 0;
    l_U1378[1]._fU8 = 4;
    l_U1378[2]._fU4 = "DOUBLE_TINT_BLUE_FLASH";
    l_U1378[2]._fU12 = l_U1595 + l_U1596;
    l_U1378[2]._fU20 = 1;
    l_U1378[2]._fU32 = 0;
    l_U1378[2]._fU8 = 4;
    l_U1378[3]._fU4 = "INTERLACE_GLITCH_FAST_01";
    l_U1378[3]._fU32 = 0;
    l_U1378[3]._fU8 = 4;
    l_U1378[4]._fU4 = "INTERLACE_GLITCH_FAST_03";
    l_U1378[4]._fU12 = (l_U1595 + l_U1596) + 500;
    l_U1378[4]._fU32 = 0;
    l_U1378[4]._fU8 = 4;
    l_U1378[5]._fU4 = "GRADE_RED_FAST";
    l_U1378[5]._fU12 = ((l_U1595 + l_U1596) + 500) + l_U1597;
    l_U1378[5]._fU32 = 0;
    l_U1378[5]._fU8 = 4;
    l_U1378[6]._fU4 = "FLICKER_VIBRATE_01";
    l_U1378[6]._fU12 = (((l_U1595 + l_U1596) + 500) + l_U1597) + 100;
    l_U1378[6]._fU32 = 0;
    l_U1378[6]._fU20 = 1;
    l_U1378[6]._fU8 = 4;
    l_U1378[7]._fU4 = "TRIPLE_MOVE_RIGHT";
    l_U1378[7]._fU32 = 0;
    l_U1378[7]._fU8 = 4;
    l_U457 = 0;
    return;
}

void sub_39795(unknown uParam0)
{
    int I;

    sub_957( "CO", "P_INIT_IMAGEFX", 0 );
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        (uParam0^)[I]._fU4 = "";
        (uParam0^)[I]._fU12 = 0;
        (uParam0^)[I]._fU16 = 0;
        (uParam0^)[I]._fU20 = 0;
        (uParam0^)[I]._fU24 = 0;
        (uParam0^)[I]._fU28 = 0;
        (uParam0^)[I]._fU32 = 1;
    }
    return;
}

void sub_41797()
{
    if (GET_PED_REACHED_TARGETED_GRAVWELL_CENTER( sub_1379(), "s_office_fireatrium_gravitywells", "GRAVITY_WELL_SHIMMY_1", 1 ))
    {
        sub_957( "SA", "Gravity Well Activated: GRAVITY_WELL_SHIMMY_1", 0 );
        if (NOT (IS_PED_DEAD( sub_1379() )))
        {
            ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "GRAVITY_WELL_SHIMMY_1", 0, 0, 0, 0 );
            sub_4356();
            if (NOT (IS_PED_DEAD( sub_1379() )))
            {
                sub_42059( sub_1379() );
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( sub_1379(), 1 );
            }
            l_U1220 = 1;
            l_U463 = 1;
            SET_PLAYER_CONTROL( sub_1401(), 0, 256 );
            CAMERA_USE_HANDY_CAM( 1, 5.00000000, 1 );
            SET_CAMERA_OVERRIDE( "S_OFFICE_FIRE_BEAM1", "S_OFFICE_FIRE_BEAM1", 1, 1, 1 );
            SET_RAIL_RELATIVE_DIR( 5, l_U1607 );
            START_WIDGET_GROUP( "Beam angle tuning" );
            ADD_WIDGET_FLOAT_SLIDER( "Beam 1 angle offset", ref l_U1607, 1.00000000, 360.00000000, 1.00000000 );
            ADD_WIDGET_FLOAT_SLIDER( "Beam 2 angle offset", ref l_U1608, 1.00000000, 360.00000000, 1.00000000 );
            STOP_WIDGET_GROUP();
            REENABLE_PLAYER_INPUT( 10 );
            REENABLE_PLAYER_INPUT( 11 );
            REENABLE_PLAYER_INPUT( 12 );
            REENABLE_PLAYER_INPUT( 13 );
            REENABLE_PLAYER_INPUT( 14 );
            REENABLE_PLAYER_INPUT( 15 );
            REENABLE_PLAYER_INPUT( 16 );
            REENABLE_PLAYER_INPUT( 17 );
            ISEQ_UNREGISTER_ENTITY( 1252772788, "MAX" );
            SET_PED_SYNC_POINT( sub_1379(), -991.31400000, 3.80300000, 4.93000000, -180.00000000 );
            ISEQ_REGISTER_ENTITY( 1252772788, "MAX", sub_1379(), 0 );
            ISEQ_START( 1252772788 );
            sub_42721();
            sub_43017();
            l_U1246 = 1;
        }
    }
    if (l_U1220)
    {
        if (NOT (IS_PED_DEAD( sub_1379() )))
        {
            switch (l_U463)
            {
                case 0: break;
                case 1:
                sub_957( "SA", "SHIMMY_WALKING", 0 );
                sub_2944( ref l_U819 );
                if (NOT l_U1241)
                {
                    sub_43245();
                    l_U1241 = 1;
                }
                if ((PED_GET_ACTION_INTENTION_STATUS( sub_1379(), 47 )) == 3)
                {
                    l_U463 = 2;
                }
                if (ISEQ_QUERY_ENTITY_STATE( 1252772788, "MAX", 6 ))
                {
                    SET_PLAYER_CONTROL( sub_1401(), 0, 0 );
                    l_U463 = 4;
                }
                break;
                case 2:
                sub_957( "SA", "SHIMMY_IDLE", 0 );
                if (NOT l_U819._fU20)
                {
                    sub_2443( ref l_U819 );
                }
                if (sub_1705( ref l_U819 ))
                {
                    PED_SET_ACTION_INTENTION( sub_1379(), 48, 1000, 0.00000000, 0.00000000, 0.00000000 );
                    sub_44617();
                    l_U463 = 3;
                }
                if ((PED_GET_ACTION_INTENTION_STATUS( sub_1379(), 47 )) == 1)
                {
                    l_U463 = 1;
                }
                break;
                case 3:
                sub_957( "SA", "SHIMMY_FALLING", 0 );
                if (l_U819._fU16)
                {
                    if (ISEQ_QUERY_ENTITY_STATE( 1252772788, "MAX", 6 ))
                    {
                        l_U463 = 0;
                    }
                }
                break;
                case 4:
                sub_957( "SA", "SHIMMY_FINISHED", 0 );
                if (NOT (IS_PED_DEAD( sub_1379() )))
                {
                    SET_PLAYER_CONTROL( sub_1401(), 1, 0 );
                    SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( sub_1379(), 0 );
                }
                sub_2944( ref l_U819 );
                ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "GRAVITY_WELL_CUTSCENE", 1, 0, 0, 0 );
                sub_34192();
                SET_CAMERA_OVERRIDE( "", "", 1, 1, 1 );
                CAMERA_USE_HANDY_CAM( 1, 5.00000000, 1 );
                SET_GAMEPLAY_CAM_RELATIVE_HEADING( 43.92348000, 1, 1 );
                SET_GAMEPLAY_CAM_RELATIVE_PITCH( 5.03469300, 1, 1 );
                l_U1220 = 0;
                l_U463 = 0;
                break;
            }
        }
    }
    if (l_U1609 == 0)
    {
        SET_RAIL_RELATIVE_DIR( 5, l_U1607 );
    }
    else
    {
        SET_RAIL_RELATIVE_DIR( 5, l_U1608 );
    }
    return;
}

void sub_42059(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        sub_957( "[SA]", "Clearing ACT_INT_SEQ_ACTION01 - ACT_INT_SEQ_ACTION12 for ped.", 0 );
        PED_FINISH_ACTION_INTENTION( uParam0, 47 );
        PED_FINISH_ACTION_INTENTION( uParam0, 48 );
        PED_FINISH_ACTION_INTENTION( uParam0, 49 );
        PED_FINISH_ACTION_INTENTION( uParam0, 50 );
        PED_FINISH_ACTION_INTENTION( uParam0, 51 );
        PED_FINISH_ACTION_INTENTION( uParam0, 52 );
        PED_FINISH_ACTION_INTENTION( uParam0, 53 );
        PED_FINISH_ACTION_INTENTION( uParam0, 54 );
        PED_FINISH_ACTION_INTENTION( uParam0, 55 );
        PED_FINISH_ACTION_INTENTION( uParam0, 56 );
        PED_FINISH_ACTION_INTENTION( uParam0, 57 );
        PED_FINISH_ACTION_INTENTION( uParam0, 58 );
    }
    return;
}

void sub_42721()
{
    sub_957( "SA", "P_UNLOAD_PRE_SHIMMY_ASSETS", 0 );
    sub_5074( ref l_U1305 );
    sub_42785( 1734252999 );
    sub_42785( l_U1115 );
    sub_5216( l_U1262 );
    sub_5216( l_U1263 );
    sub_42955( ref l_U1059 );
    sub_42955( "PLGE_PSTL_FULLBODY" );
    return;
}

void sub_42785(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 1)
    {
        SET_MODEL_AS_NO_LONGER_NEEDED( uParam0 );
    }
    else
    {
        sub_7855( "[SP]### ERROR! (UnloadModel) Trying to unload a model that isn't in the img! ###" );
    }
    return;
}

void sub_42955(unknown uParam0)
{
    REMOVE_ANIM_DICT( uParam0, 0 );
    return;
}

void sub_43017()
{
    sub_957( "SA", "P_REQUEST_ASSETS_STAGE_3", 0 );
    sub_20831( 1469509248, 0 );
    sub_20831( -343887938, 0 );
    sub_20831( 255375026, 0 );
    return;
}

void sub_43245()
{
    sub_957( "SA", "P_PLAY_SOFF_MWALNGB", 0 );
    if (NOT (IS_PED_DEAD( sub_1379() )))
    {
        if (NOT (IS_SCRIPTED_SPEECH_PLAYING( sub_1379() )))
        {
            sub_43328( ref l_U399 );
            sub_43410( 0, sub_1379(), "MAX", ref l_U399, 2, 0 );
            sub_43410( 1, sub_1379(), "MAX", ref l_U399, 2, 0 );
            sub_43652( "SOFF_MWALNGB", ref l_U399, 2, 1 );
        }
    }
    return;
}

void sub_43328(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

void sub_43410(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

void sub_43652(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return sub_43676( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

void sub_43676(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return sub_43731( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

int sub_43731(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT (sub_43766( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
    sub_44260( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

int sub_43766(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

void sub_44260(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

void sub_44617()
{
    int iVar2;

    sub_957( "SA", "P_SHIMMY_COLLAPSE", 0 );
    PLAY_OBJECT_ANIM( l_U1264[0], "RF_TMDCLLPS_PRP", "of_tmdCllps", 0.00000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U1264[1], "RF_TMDCLLPS_WD_ROOTA", "of_tmdCllps", 0.00000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U1264[2], "RF_TMDCLLPS_WD_ROOTB", "of_tmdCllps", 0.00000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U1264[3], "RF_TMDCLLPS_WD_ROOTC", "of_tmdCllps", 0.00000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U1264[4], "RF_TMDCLLPS_WD_ROOTD", "of_tmdCllps", 0.00000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U1264[5], "RF_TMDCLLPS_WD_ROOTE", "of_tmdCllps", 0.00000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U1264[6], "RF_TMDCLLPS_WD_ROOTF", "of_tmdCllps", 0.00000000, 0, 1 );
    PLAY_OBJECT_ANIM( l_U1264[7], "RF_TMDCLLPS_FR", "of_tmdCllps", 0.00000000, 0, 1 );
    iVar2 = GET_RANDOM_INT_IN_RANGE( 0, 3 );
    if (iVar2 == 0)
    {
        sub_957( "SA", "Setting Bullet Cam Pref: MISS_DEATH_CUSTOM_FIRE_01", 0 );
        SET_BULLET_CAM_PREF( sub_1379(), "MISS_DEATH_CUSTOM_FIRE_01", "", "", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
    }
    else if (iVar2 == 1)
    {
        sub_957( "SA", "Setting Bullet Cam Pref: MISS_DEATH_CUSTOM_FIRE_02", 0 );
        SET_BULLET_CAM_PREF( sub_1379(), "MISS_DEATH_CUSTOM_FIRE_02", "", "", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
    }
    else
    {
        sub_957( "SA", "Setting Bullet Cam Pref: MISS_DEATH_CUSTOM_FIRE_03", 0 );
        SET_BULLET_CAM_PREF( sub_1379(), "MISS_DEATH_CUSTOM_FIRE_03", "", "", 0, 1, 0, 0, 0, 0, 0, 0, 0 );
    }
    return;
}

void sub_45931()
{
    if (GET_PED_REACHED_TARGETED_GRAVWELL_CENTER( sub_1379(), "s_office_fireatrium_gravitywells", "GRAVITY_WELL_CUTSCENE", 1 ))
    {
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "GRAVITY_WELL_CUTSCENE", 0, 0, 0, 0 );
        if (NOT (IS_PED_DEAD( sub_1379() )))
        {
            SET_PLAYER_CONTROL( sub_1401(), 0, 0 );
        }
        l_U460 = 13;
    }
    return;
}

void sub_46134()
{
    if (sub_39371( ref l_U500, 0 ))
    {
        SET_PLAYER_CONTROL( sub_1401(), 0, 0 );
        sub_4356();
        ISEQ_UNREGISTER_ENTITY( 1252772788, "MAX" );
        sub_4708( 1252772788, 1 );
        sub_3418( 0 );
        sub_3511( 0 );
        g_U743 = CREATE_CAM( "DEFAULT_BULLET_CAMERA", 1 );
        SETUP_BULLET_CAMERA_SCENE( g_U743, "MISS_DEATH_FALL_01A", 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, "", "" );
        SET_CAM_ACTIVE( g_U743, 1 );
        l_U1242 = 1;
    }
    return;
}

void sub_46414()
{
    if (sub_39371( ref l_U521, 0 ))
    {
        sub_957( "SA", "Triggering Glass Smash 01", 0 );
        sub_2443( ref l_U846 );
        sub_2443( ref l_U855 );
    }
    if (sub_39371( ref l_U773, 0 ))
    {
        l_U815[0] = PLAY_IMAGEFX( "FLICKER_VIBRATE_LONG", 4, 0 );
        l_U815[1] = PLAY_IMAGEFX( "GRADE_YELLOW_2", 4, 0 );
    }
    if (sub_39371( ref l_U794, 0 ))
    {
        STOP_IMAGEFX( l_U815[0], 1 );
        STOP_IMAGEFX( l_U815[1], 1 );
    }
    if (sub_39371( ref l_U542, 0 ))
    {
        sub_957( "SA", "Triggering Glass Smash 02", 0 );
        sub_2443( ref l_U864 );
        sub_2443( ref l_U873 );
    }
    if (sub_39371( ref l_U563, 0 ))
    {
        sub_957( "SA", "Triggering Glass Smash 03", 0 );
        sub_2443( ref l_U882 );
        sub_2443( ref l_U891 );
    }
    if (sub_39371( ref l_U584, 0 ))
    {
        sub_957( "SA", "Triggering Glass Smash 04", 0 );
        sub_2443( ref l_U900 );
        sub_2443( ref l_U909 );
    }
    if (sub_1705( ref l_U846 ))
    {
        sub_957( "SA", "Triggering Glass Smash 01", 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1015.36000000, 3.65000000, 7.64000000, -1015.36000000, 2.00000000, 7.64000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1015.38000000, 3.65000000, 6.10000000, -1015.38000000, 2.00000000, 6.10000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1014.64000000, 3.65000000, 6.61000000, -1014.64000000, 2.00000000, 6.61000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1012.73000000, 3.65000000, 7.53000000, -1012.73000000, 2.00000000, 7.53000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1011.77000000, 3.65000000, 7.50000000, -1011.77000000, 2.00000000, 7.50000000, 0, 1, 434544317, 0 );
    }
    if (sub_1705( ref l_U855 ))
    {
        sub_957( "SA", "Triggering Glass Smash 02", 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1011.33000000, 3.65000000, 6.45000000, -1011.33000000, 2.00000000, 6.45000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1010.68000000, 3.65000000, 7.53000000, -1010.68000000, 2.00000000, 7.53000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1007.38000000, 3.65000000, 5.62000000, -1007.38000000, 2.00000000, 5.62000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1007.56000000, 3.65000000, 7.70000000, -1007.56000000, 2.00000000, 7.70000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1006.83000000, 3.65000000, 6.92000000, -1006.83000000, 2.00000000, 6.92000000, 0, 1, 434544317, 0 );
    }
    if (sub_1705( ref l_U864 ))
    {
        sub_957( "SA", "Triggering Glass Smash 03", 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1001.58000000, 3.44000000, 5.97000000, -999.93000000, 3.44000000, 5.97000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1001.58000000, 3.91000000, 6.61000000, -999.93000000, 3.91000000, 6.61000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1001.58000000, 4.48000000, 6.09000000, -999.93000000, 4.48000000, 6.09000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -998.59000000, 3.71000000, 6.49000000, -1003.19000000, 3.71000000, 6.49000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1001.58000000, 5.28000000, 5.50000000, -999.93000000, 5.28000000, 5.50000000, 0, 1, 434544317, 0 );
    }
    if (sub_1705( ref l_U873 ))
    {
        sub_957( "SA", "Triggering Glass Smash 04", 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1001.65000000, 5.32000000, 7.53000000, -1000.18000000, 5.35000000, 7.34000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1000.46000000, 4.75000000, 7.39000000, -1000.46000000, 6.40000000, 7.39000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -999.65000000, 4.75000000, 7.20000000, -999.65000000, 6.40000000, 7.20000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -999.97000000, 4.75000000, 5.94000000, -999.97000000, 6.40000000, 5.94000000, 0, 1, 434544317, 0 );
    }
    if (sub_1705( ref l_U882 ))
    {
        sub_957( "SA", "Triggering Glass Smash 05", 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -996.08000000, 8.83000000, 7.07000000, -996.08000000, 11.68000000, 7.07000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -996.55000000, 8.83000000, 5.76000000, -996.55000000, 11.68000000, 5.76000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -997.12000000, 8.83000000, 6.38000000, -997.12000000, 11.68000000, 6.38000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -997.81000000, 8.83000000, 7.39000000, -997.81000000, 11.68000000, 7.39000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -998.16000000, 2.64000000, 7.75000000, -997.81000000, 11.68000000, 7.39000000, 0, 1, 434544317, 0 );
    }
    if (sub_1705( ref l_U891 ))
    {
        sub_957( "SA", "Triggering Glass Smash 06", 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -998.56000000, 8.83000000, 7.23000000, -998.56000000, 11.68000000, 7.23000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -999.23000000, 8.83000000, 6.22000000, -999.23000000, 11.68000000, 6.22000000, 0, 1, 434544317, 0 );
    }
    if (sub_1705( ref l_U900 ))
    {
        sub_957( "SA", "Triggering Glass Smash 07", 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1002.13000000, 10.22000000, 6.02000000, -1000.13000000, 10.22000000, 6.02000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1002.13000000, 9.78000000, 7.09000000, -1000.13000000, 9.78000000, 7.09000000, 0, 1, 434544317, 0 );
    }
    if (sub_1705( ref l_U909 ))
    {
        sub_957( "SA", "Triggering Glass Smash 08", 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1002.13000000, 14.06000000, 7.17000000, -1000.13000000, 14.06000000, 7.17000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1002.13000000, 14.06000000, 7.17000000, -1000.13000000, 14.06000000, 7.17000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1002.13000000, 15.26000000, 6.30000000, -1000.13000000, 15.26000000, 6.30000000, 0, 1, 434544317, 0 );
        SHOOT_SINGLE_BULLET_BETWEEN_COORDS( -1002.13000000, 15.36000000, 6.50000000, -1000.13000000, 15.26000000, 6.30000000, 0, 1, 434544317, 0 );
    }
    return;
}

void sub_48784()
{
    unknown[3] uVar2;

    array(ref uVar2, 3);
    uVar2[0] = l_U1305[0];
    uVar2[1] = l_U1305[1];
    uVar2[2] = l_U1305[2];
    sub_48838( ref uVar2 );
    if ((l_U1219 == 0) AND ((l_U1116._fU0 == 0) AND ((NOT (IS_BULLET_CAMERA_RUNNING( 0 ))) AND ((sub_48850( ref l_U1305 )) == 0))))
    {
        sub_35644( ref l_U1116, 1 );
        ENABLE_GRAVITY_WELL( "s_office_fireatrium_gravitywells", "GRAVITY_WELL_CABINET", 1, 0, 0, 0 );
        AUDIO_MUSIC_FORCE_TRACK( "OFFICE_ACTION_SONG_02", "OFFICE_ACTION_2", "", 0.00000000, 5000, 5000, -1082130432, 0 );
        sub_2443( ref l_U1026 );
    }
    if (sub_1705( ref l_U1026 ))
    {
        if ((GET_RANDOM_FLOAT_IN_RANGE( 0, 1 )) > 0.50000000)
        {
            sub_49277();
        }
        else
        {
            sub_49453();
        }
    }
    return;
}

void sub_48838(unknown uParam0)
{
    int I;

    if ((sub_48850( uParam0 )) == 1)
    {
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
            {
                if (NOT (GET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I] )))
                {
                    SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I], 1 );
                    return (uParam0^)[I];
                }
            }
        }
    }
    return nil;
}

void sub_48850(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result++;
        }
    }
    return Result;
}

void sub_49277()
{
    sub_957( "SA", "P_PLAY_SOFF_MSTFCBNA", 0 );
    if (NOT (IS_PED_DEAD( sub_1379() )))
    {
        if (NOT (IS_SCRIPTED_SPEECH_PLAYING( sub_1379() )))
        {
            sub_43328( ref l_U379 );
            sub_43410( 0, sub_1379(), "MAX", ref l_U379, 2, 0 );
            sub_43410( 1, sub_1379(), "MAX", ref l_U379, 2, 0 );
            sub_43652( "SOFF_MSTFCBNA", ref l_U379, 2, 1 );
        }
    }
    return;
}

void sub_49453()
{
    sub_957( "SA", "P_PLAY_SOFF_MSTFCBNB", 0 );
    if (NOT (IS_PED_DEAD( sub_1379() )))
    {
        if (NOT (IS_SCRIPTED_SPEECH_PLAYING( sub_1379() )))
        {
            sub_43328( ref l_U389 );
            sub_43410( 0, sub_1379(), "MAX", ref l_U389, 2, 0 );
            sub_43410( 1, sub_1379(), "MAX", ref l_U389, 2, 0 );
            sub_43652( "SOFF_MSTFCBNB", ref l_U389, 2, 1 );
        }
    }
    return;
}

void sub_49632()
{
    if (NOT (IS_PED_DEAD( sub_1379() )))
    {
        if ((NOT g_U1604) AND (IS_PED_IN_COVER( sub_1379() )))
        {
            sub_957( "SA", "Max Entering Cover", 0 );
            CAMERA_USE_HANDY_CAM( 0, 0.00000000, 1 );
            g_U1604 = 1;
        }
        else if ((g_U1604) AND (NOT (IS_PED_IN_COVER( sub_1379() ))))
        {
            sub_957( "SA", "Max Exiting Cover", 0 );
            CAMERA_USE_HANDY_CAM( 1, 5.00000000, 1 );
            g_U1604 = 0;
        }
    }
    return;
}

void sub_49824()
{
    if (sub_39371( ref l_U668, 0 ))
    {
        sub_49849();
    }
    if (sub_39371( ref l_U689, 0 ))
    {
        sub_50066();
    }
    if (sub_39371( ref l_U710, 0 ))
    {
        sub_50310();
    }
    if (sub_39371( ref l_U731, 0 ))
    {
        PLAY_IMAGEFX( "TRIPLE_MOVE_RIGHT_COLOR_SPLIT5", 4, 0 );
    }
    if (sub_39371( ref l_U752, 0 ))
    {
        PLAY_IMAGEFX( "TRIPLE_MOVE_RIGHT_COLOR_SPLIT4", 4, 0 );
    }
    sub_50648( ref l_U1378 );
    return;
}

void sub_49849()
{
    sub_957( "CO", "P_INITIALIZE_ImageFX_EFFECTS03", 0 );
    sub_39795( ref l_U1378 );
    l_U1378[0]._fU4 = "FLICKER_VIBRATE_01";
    l_U1378[0]._fU32 = 0;
    l_U1378[0]._fU20 = 1;
    l_U1378[0]._fU8 = 4;
    l_U1378[1]._fU4 = "DOUBLE_TINT_BLUE_FLASH";
    l_U1378[1]._fU32 = 0;
    l_U1378[1]._fU8 = 4;
    l_U457 = 0;
    return;
}

void sub_50066()
{
    sub_957( "CO", "P_INITIALIZE_ImageFX_EFFECTS04", 0 );
    sub_39795( ref l_U1378 );
    l_U1378[0]._fU4 = "DOUBLE_TINT_BLUE_FLASH_FLICKER";
    l_U1378[0]._fU32 = 0;
    l_U1378[0]._fU20 = 1;
    l_U1378[0]._fU16 = 2500;
    l_U1378[0]._fU24 = 1;
    l_U1378[0]._fU8 = 4;
    l_U1378[1]._fU4 = "FLASH_WHITE_2";
    l_U1378[1]._fU32 = 0;
    l_U1378[1]._fU8 = 4;
    l_U457 = 0;
    return;
}

void sub_50310()
{
    sub_957( "CO", "P_INITIALIZE_ImageFX_EFFECTS05", 0 );
    sub_39795( ref l_U1378 );
    l_U1378[0]._fU4 = "EXPOSURE_DARKEN_CONTRAST";
    l_U1378[0]._fU32 = 0;
    l_U1378[0]._fU8 = 4;
    l_U1378[1]._fU4 = "DOUBLE_WIDE_INTERLACE_FLASH_02";
    l_U1378[1]._fU12 = 3200;
    l_U1378[1]._fU32 = 0;
    l_U1378[1]._fU8 = 4;
    l_U457 = 0;
    return;
}

void sub_50648(unknown uParam0)
{
    int I;
    int J;

    switch (l_U457)
    {
        case 0:
        sub_957( "CO", "P_HANDLE_IMAGEFX", 0 );
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (uParam0^)[I]._fU32)
            {
                sub_2307( ref (uParam0^)[I]._fU36, (uParam0^)[I]._fU12, 1, 0 );
                sub_2443( ref (uParam0^)[I]._fU36 );
                if ((uParam0^)[I]._fU20 > 0)
                {
                    I += (uParam0^)[I]._fU20;
                }
            }
        }
        l_U457 = 1;
        break;
        case 1:
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (sub_1705( ref (uParam0^)[I]._fU36 ))
            {
                (uParam0^)[I]._fU0 = PLAY_IMAGEFX( (uParam0^)[I]._fU4, (uParam0^)[I]._fU8, (uParam0^)[I]._fU28 );
                if ((uParam0^)[I]._fU16 > 0)
                {
                    sub_2307( ref (uParam0^)[I]._fU72, (uParam0^)[I]._fU16, 1, 0 );
                    sub_2443( ref (uParam0^)[I]._fU72 );
                }
                if ((uParam0^)[I]._fU20 > 0)
                {
                    for ( J = I + 1; J <= (I + (uParam0^)[I]._fU20); J++ )
                    {
                        (uParam0^)[J]._fU0 = PLAY_IMAGEFX( (uParam0^)[J]._fU4, (uParam0^)[J]._fU8, (uParam0^)[I]._fU28 );
                        if ((uParam0^)[J]._fU16 > 0)
                        {
                            sub_2307( ref (uParam0^)[J]._fU72, (uParam0^)[J]._fU16, 1, 0 );
                            sub_2443( ref (uParam0^)[J]._fU72 );
                        }
                    }
                    I += (uParam0^)[I]._fU20;
                }
            }
            if (sub_1705( ref (uParam0^)[I]._fU72 ))
            {
                STOP_IMAGEFX( (uParam0^)[I]._fU0, (uParam0^)[I]._fU24 );
                (uParam0^)[I]._fU32 = 1;
                if ((uParam0^)[I]._fU20 > 0)
                {
                    if ((uParam0^)[I]._fU20 == 1)
                    {
                        STOP_IMAGEFX( (uParam0^)[I + 1]._fU0, (uParam0^)[I + 1]._fU24 );
                        (uParam0^)[I + 1]._fU32 = 1;
                    }
                    else
                    {
                        for ( J = I + 1; J <= (uParam0^)[I]._fU20; J++ )
                        {
                            STOP_IMAGEFX( (uParam0^)[J]._fU0, (uParam0^)[J]._fU24 );
                            (uParam0^)[J]._fU32 = 1;
                        }
                    }
                    I += (uParam0^)[I]._fU20;
                }
            }
        }
        break;
    }
    return;
}

void sub_51411()
{
    sub_51421();
    sub_52119();
    if (g_U1587)
    {
        sub_52388();
    }
    if ((g_U1584) AND (g_U1585))
    {
        sub_52845();
        sub_53075();
        sub_53924();
    }
    return;
}

void sub_51421()
{
    if (NOT l_U429)
    {
        START_WIDGET_GROUP( "Fire Widget" );
        ADD_WIDGET_BOOL( "Enable/Disable Smoke/Coughing", ref g_U1584 );
        ADD_WIDGET_FLOAT_SLIDER( "Fire react distance", ref g_U1589, 0, 1000000, 1 );
        ADD_WIDGET_INT_SLIDER( "Max's starting health (in Fire Atrium)", ref g_U1594, 0, 1000000, 1 );
        ADD_WIDGET_INT_SLIDER( "Max's dying health (triggers coughing death)", ref g_U1595, 0, 1000000, 1 );
        ADD_WIDGET_INT_SLIDER( "Delay before idle state begins", ref g_U1599, 0, 1000000, 1 );
        ADD_WIDGET_INT_SLIDER( "Time between coughs when idling", ref g_U1600, 0, 1000000, 1 );
        ADD_WIDGET_INT_SLIDER( "The length of each cycle where Max loose a bit of health", ref g_U1597, 0, 1000000, 1 );
        ADD_WIDGET_INT_SLIDER( "How much health Max loose each cycle", ref g_U1596, 0, 1000000, 1 );
        ADD_WIDGET_FLOAT_SLIDER( "Smoke Blend in rate", ref g_U1591, 0, 1, 0.01000000 );
        ADD_WIDGET_FLOAT_SLIDER( "Smoke Blend out rate", ref g_U1592, 0, 1, 0.01000000 );
        ADD_WIDGET_INT_SLIDER( "Min Time for Max's cough", ref g_U1601, 0, 1000000, 1 );
        ADD_WIDGET_INT_SLIDER( "Max Time for Max's cough", ref g_U1602, 0, 1000000, 1 );
        STOP_WIDGET_GROUP();
        l_U429 = 1;
    }
    return;
}

void sub_52119()
{
    if (sub_52129())
    {
        if (g_U1584)
        {
            sub_957( "SA", "Disabling Oxygen Drain", 0 );
            PRINT_STRING_WITH_LITERAL_STRING( "STRING", "Disabling Oxygen Drain", 2000, 1 );
            g_U1584 = 0;
        }
        else
        {
            sub_957( "SA", "Enabling Oxygen Drain", 0 );
            PRINT_STRING_WITH_LITERAL_STRING( "STRING", "Enabling Oxygen Drain", 2000, 1 );
            g_U1584 = 1;
        }
    }
    return;
}

int sub_52129()
{
    if ((IS_MARKETING_KEYBOARD_KEY_JUST_PRESSED( 49 )) || (IS_KEYBOARD_KEY_JUST_PRESSED( 49 )))
    {
        return 1;
    }
    return 0;
}

void sub_52388()
{
    if ((sub_34407( sub_1379(), g_U1361 )) || (sub_34407( sub_1379(), g_U1340 )))
    {
        sub_52439( ref l_U2, 14 );
    }
    else if ((sub_34407( sub_1379(), g_U1424 )) || ((sub_34407( sub_1379(), g_U1403 )) || (sub_34407( sub_1379(), g_U1382 ))))
    {
        sub_52439( ref l_U45, 33 );
    }
    else if (sub_34407( sub_1379(), g_U1445 ))
    {
        sub_52439( ref l_U145, 16 );
    }
    else if ((sub_34407( sub_1379(), g_U1466 )) || (sub_34407( sub_1379(), g_U1487 )))
    {
        sub_52439( ref l_U194, 8 );
    }
    else if (sub_34407( sub_1379(), g_U1508 ))
    {
        sub_52439( ref l_U219, 3 );
    };;;;;
    return;
}

void sub_52439(unknown uParam0, int iParam1)
{
    int I;

    I = 0;
    for ( I = 0; I < iParam1; I++ )
    {
        if (NOT (IS_PED_DEAD( sub_1379() )))
        {
            if ((sub_52496( sub_1379(), (uParam0^)[I] )) <= g_U1589)
            {
                PED_SET_ACTION_INTENTION( sub_1379(), 55, 1000, (uParam0^)[I] );
            }
        }
    }
    return;
}

void sub_52496(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;

    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        uVar6 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
    }
    else
    {
        return -1.00000000;
    }
    return VDIST( uVar6, uParam1 );
}

void sub_52845()
{
    switch (l_U267)
    {
        case 0:
        if (l_U268 == 2)
        {
            l_U267 = 1;
        }
        break;
        case 1:
        sub_957( "SA", "SMKFX_BLEND_IN", 0 );
        l_U267 = 2;
        break;
        case 2:
        if (l_U268 != 2)
        {
            l_U267 = 3;
        }
        break;
        case 3:
        sub_957( "SA", "SMKFX_BLEND_OUT", 0 );
        l_U267 = 4;
        break;
        case 4:
        sub_957( "SA", "SMKFX_IDLE", 0 );
        l_U267 = 0;
        break;
    }
    return;
}

void sub_53075()
{
    switch (l_U266)
    {
        case 0: break;
        case 1:
        sub_957( "SA", "CL_SETUP", 0 );
        sub_2944( ref g_U1538 );
        sub_2307( ref g_U1538, GET_RANDOM_INT_IN_RANGE( g_U1601, g_U1602 ), 1, 0 );
        sub_2443( ref g_U1538 );
        l_U266 = 2;
        break;
        case 2:
        if (sub_1705( ref g_U1538 ))
        {
            sub_957( "SA", "CL_MAX_CAN_COUGH", 0 );
            if ((GET_PED_HEALTH( sub_1379() )) > g_U1593)
            {
                sub_53280();
            }
            else
            {
                sub_53633();
            }
            l_U266 = 1;
        }
        break;
        case 3:
        sub_957( "SA", "CL_MAX_CANNOT_COUGH", 0 );
        sub_2944( ref g_U1538 );
        l_U266 = 0;
        break;
    }
    return;
}

void sub_53280()
{
    sub_957( "SA", "P_RANDOM_COUGH_STAGE_1", 0 );
    if ((GET_RANDOM_INT_IN_RANGE( 1, 3 )) == 1)
    {
        sub_53342();
    }
    else
    {
        sub_53484();
    }
    return;
}

void sub_53342()
{
    sub_957( "SA", "P_LIGHT_COUGH", "###" );
    PED_SET_ACTION_INTENTION( sub_1379(), 51, 1000, 0.00000000, 0.00000000, 0.00000000 );
    if (NOT (IS_PED_DEAD( sub_1379() )))
    {
        PLAY_SOUND_FROM_PED( g_U1598, "MAX_COUGHS_SMALL", sub_1379() );
    }
    return;
}

void sub_53484()
{
    sub_957( "SA", "P_MED_COUGH", "###" );
    PED_SET_ACTION_INTENTION( sub_1379(), 52, 1000, 0.00000000, 0.00000000, 0.00000000 );
    if (NOT (IS_PED_DEAD( sub_1379() )))
    {
        PLAY_SOUND_FROM_PED( g_U1598, "MAX_COUGHS_MEDIUM", sub_1379() );
    }
    return;
}

void sub_53633()
{
    sub_957( "SA", "P_RANDOM_COUGH_STAGE_2", 0 );
    if ((GET_RANDOM_INT_IN_RANGE( 1, 4 )) == 1)
    {
        sub_53484();
    }
    else
    {
        sub_53705();
    }
    return;
}

void sub_53705()
{
    sub_957( "SA", "P_HEAVY_COUGH", "###" );
    PED_SET_ACTION_INTENTION( sub_1379(), 53, 1000, 0.00000000, 0.00000000, 0.00000000 );
    if (NOT (IS_PED_DEAD( sub_1379() )))
    {
        PLAY_SOUND_FROM_PED( g_U1598, "MAX_COUGHS_LARGE_A", sub_1379() );
    }
    return;
}

void sub_53924()
{
    boolean bVar2;

    bVar2 = true;
    switch (l_U268)
    {
        case 0: break;
        case 1:
        if ((GET_PED_SPEED( sub_1379() )) > 0.10000000)
        {
            bVar2 = false;
        }
        if (bVar2)
        {
            if ((NOT g_U1529._fU16) AND (NOT g_U1529._fU20))
            {
                sub_2443( ref g_U1529 );
            }
        }
        else
        {
            sub_2944( ref g_U1529 );
        }
        if (sub_1705( ref g_U1529 ))
        {
            sub_54078();
            sub_2944( ref g_U1529 );
            l_U266 = 1;
            l_U268 = 2;
        }
        break;
        case 2:
        if ((NOT g_U1547._fU16) AND (NOT g_U1547._fU20))
        {
            sub_2443( ref g_U1547 );
        }
        if (sub_1705( ref g_U1547 ))
        {
            SET_PED_HEALTH( sub_1379(), (GET_PED_HEALTH( sub_1379() )) - g_U1596, 0 );
            sub_2944( ref g_U1547 );
            sub_2443( ref g_U1547 );
        }
        if ((GET_PED_HEALTH( sub_1379() )) < g_U1594)
        {
            l_U268 = 3;
        }
        if ((GET_PED_SPEED( sub_1379() )) > 0.10000000)
        {
            sub_2944( ref g_U1529 );
            sub_2944( ref g_U1547 );
            l_U266 = 3;
            l_U268 = 1;
        }
        break;
        case 3:
        sub_54666();
        l_U268 = 0;
        break;
    }
    return;
}

void sub_54078()
{
    if ((GET_RANDOM_FLOAT_IN_RANGE( 0, 1 )) > 0.50000000)
    {
        sub_54110();
    }
    else
    {
        sub_54282();
    }
    return;
}

void sub_54110()
{
    sub_957( "SA", "P_PLAY_SOFF_MDSNTM", 0 );
    if (NOT (IS_PED_DEAD( sub_1379() )))
    {
        if (NOT (IS_SCRIPTED_SPEECH_PLAYING( sub_1379() )))
        {
            sub_43328( ref l_U409 );
            sub_43410( 0, sub_1379(), "MAX", ref l_U409, 2, 0 );
            sub_43410( 1, sub_1379(), "MAX", ref l_U409, 2, 0 );
            sub_43652( "SOFF_MDSNTM", ref l_U409, 2, 1 );
        }
    }
    return;
}

void sub_54282()
{
    sub_957( "SA", "P_PLAY_SOFF_SHTPRMP", 0 );
    if (NOT (IS_PED_DEAD( sub_1379() )))
    {
        if (NOT (IS_SCRIPTED_SPEECH_PLAYING( sub_1379() )))
        {
            sub_43328( ref l_U419 );
            sub_43410( 0, sub_1379(), "MAX", ref l_U419, 2, 0 );
            sub_43410( 1, sub_1379(), "MAX", ref l_U419, 2, 0 );
            sub_43652( "SOFF_SHTPRMP", ref l_U419, 2, 1 );
        }
    }
    return;
}

void sub_54666()
{
    sub_957( "SA", "P_KILL_MAX_FROM_SMOKE_INHALE", "###" );
    SET_PLAYER_CONTROL( sub_1401(), 0, 0 );
    DISPLAY_HUD( 0 );
    ADD_SPECIAL_FX_MODIFIER( "FIRE_COUGH", 1.00000000, 0.00000000, g_U1591, g_U1592 );
    if (g_U665 == 1)
    {
        ISEQ_REGISTER_ENTITY( -654795811, "MAX", sub_1379(), 0 );
        ISEQ_START( -654795811 );
    }
    else
    {
        SET_PLAYER_CAN_USE_COVER( sub_1401(), 0 );
        if (NOT (IS_PED_DEAD( sub_1379() )))
        {
            PED_SET_ACTION_INTENTION( sub_1379(), 47, 1000, 0.00000000, 0.00000000, 0.00000000 );
        }
    }
    g_U1583 = 1;
    sub_2944( ref g_U1556 );
    sub_2307( ref g_U1556, 2500, 1, 0 );
    sub_2443( ref g_U1556 );
    return;
}

void sub_55136()
{
    sub_957( "SP", "P_UNLOAD_ASSETS", 0 );
    sub_42955( ref l_U1059 );
    sub_42955( "PLGE_PSTL_FULLBODY" );
    sub_55215( -862236369 );
    sub_42785( 1734252999 );
    sub_42785( -569568960 );
    sub_42785( l_U1115 );
    sub_42785( 1587617883 );
    sub_42785( 789704993 );
    sub_42785( 1245447859 );
    sub_42785( 1481155276 );
    sub_42785( 1170308542 );
    sub_42785( 326670637 );
    sub_42785( 497233282 );
    sub_42785( -345618171 );
    sub_42785( 1061947701 );
    return;
}

void sub_55215(unknown uParam0)
{
    SET_WEAPON_AS_NO_LONGER_NEEDED( uParam0 );
    return;
}

void sub_55370()
{
    sub_957( "SP", "P_UNLOAD_ASSETS_POST_ENDING_CUTSCENE", 0 );
    sub_42785( 1931667416 );
    sub_42785( 297242865 );
    sub_42785( 255375026 );
    sub_42785( 1469509248 );
    sub_42785( -343887938 );
    sub_42785( -655764980 );
    sub_42785( -362056433 );
    sub_42785( -62023461 );
    sub_42785( 1158534095 );
    sub_42785( 979615355 );
    sub_42785( 1666434344 );
    sub_42785( -1853135683 );
    sub_42785( -1976110301 );
    sub_42785( -1611522407 );
    sub_42785( -1382041100 );
    sub_42785( -1286224544 );
    sub_42785( -247238789 );
    sub_42785( -335436391 );
    sub_42785( -305605011 );
    sub_42785( -1783114826 );
    sub_42955( "boz_objmodels" );
    return;
}

int sub_55678()
{
    if ((HAS_CUTSCENE_LOADED()) AND ((DOES_OBJECT_EXIST( l_U1288 )) AND ((DOES_OBJECT_EXIST( l_U1290 )) AND ((DOES_OBJECT_EXIST( l_U1289 )) AND ((NOT (IS_PED_DEAD( l_U1291 ))) AND (NOT (IS_PED_DEAD( l_U1363 ))))))))
    {
        sub_957( "SA", "F_ARE_ENDING_CUTSCENE_ASSETS_LOADED(): True", 0 );
        return 1;
    }
    sub_957( "SA", "F_ARE_ENDING_CUTSCENE_ASSETS_LOADED(): False", 0 );
    return 0;
}

void sub_55900()
{
    sub_957( "SA", "P_PLAY_ENDING_CUTSCENE", 0 );
    SET_PLAYER_CONTROL( sub_1401(), 0, 0 );
    AUDIO_MUSIC_REQUEST_ONESHOT( "OFFICE_ONESHOT_01", 0 );
    if (NOT (IS_PED_DEAD( l_U1363 )))
    {
        FREEZE_PED_POSITION( l_U1363, 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U1363, "M_Crac_W_Sold_Avg", 0 );
    }
    if (((IS_PED_DEAD( l_U1291 )) == 0) AND ((DOES_PED_EXIST( l_U1291 )) == 1))
    {
        sub_957( "SA", "P_PLAY_ENDING_CUTSCENE: piMirroredMax", 0 );
        FREEZE_PED_POSITION( l_U1291, 0 );
        SET_PED_COMPONENT_VARIATION( l_U1291, 1, 0, 0, 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U1291, "MaxPayne_Mirrored", 0 );
    }
    if ((IS_IN_STORY_MODE()) AND (IS_XBOX360_VERSION()))
    {
        SAVE_STORY_DISC_SWAP( "s_fav0" );
        SET_END_OF_PART_ONE();
    }
    CUTSCENE_DISABLE_FADE_IN_GAME_AT_END( 1 );
    CUTSCENE_ENABLE_SKIP( 0 );
    CUTSCENE_REGISTER_SWITCH_TO_LEVEL_NAME( "s_fav0" );
    DISABLE_FADE_BETWEEN_SP_LEVELS();
    AUD_ENABLE_PRE_BINK_SHUTDOWN( 1 );
    START_SEAMLESS_CUTSCENE();
    AUDIO_MUSIC_SUSPEND( 2000 );
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    DESTROY_ALL_CAMS();
    SET_TIMECYCLE_MODIFIER_OVERRIDE( "SMOKE_DAMAGE_LOW", "SMOKE_DAMAGE_HIGH", g_U1590, 1.00000000, 0 );
    SET_CAMERA_OVERRIDE( "", "", 1, 1, 1 );
    return;
}

void sub_56418()
{
    sub_957( "SA", "P_REQUEST_BNP_ASSETS", 0 );
    sub_20831( 1158534095, 0 );
    sub_20831( 979615355, 0 );
    sub_20831( 1666434344, 0 );
    sub_20831( -1853135683, 0 );
    sub_20831( -1976110301, 0 );
    sub_20831( -1611522407, 0 );
    sub_20831( -1382041100, 0 );
    sub_20831( -1286224544, 0 );
    sub_20831( -247238789, 0 );
    sub_20831( -335436391, 0 );
    sub_20831( -305605011, 0 );
    sub_20831( -1783114826, 0 );
    sub_21002( "boz_objmodels", 0, 0 );
    return;
}

int sub_56707()
{
    unknown uVar2;
    unknown uVar3;
    int iVar4;

    if (HAS_CUTSCENE_FINISHED())
    {
        DO_SCREEN_FADE_OUT( 0 );
        CLEAR_NAMED_CUTSCENE( ref l_U1051 );
        if (NOT (IS_PED_DEAD( sub_1379() )))
        {
            RESET_PED_GORE( sub_1379() );
        }
        return 1;
    }
    else
    {
        sub_957( "SA", "Playing - 06_OFFICE_END_concat", 0 );
        if (NOT l_U1244)
        {
            if (sub_56842())
            {
                sub_57055();
                l_U1244 = 1;
            }
        }
        uVar2 = GET_CUTSCENE_SECTION_PLAYING();
        uVar3 = GET_CUTSCENE_TIME();
        iVar4 = GET_CUTSCENE_TIME_MS();
        if (NOT l_U1231)
        {
            if (GET_CUTSCENE_TIME_MS() > 1300)
            {
                sub_957( "SA", "Dropping bridge", 0 );
                PLAY_OBJECT_ANIM( l_U1289, "P_AN_MTLWLK_AA_H", "of_stairs", 0.00000000, 0, 1 );
                PLAY_OBJECT_ANIM( l_U1290, "P_AN_MTLWLK_AB_H", "of_stairs", 0.00000000, 0, 1 );
                AUDIO_MUSIC_SUSPEND( 500 );
                AUDIO_MUSIC_PLAY_ONESHOT();
                if (NOT (IS_PED_DEAD( sub_1379() )))
                {
                    REMOVE_ALL_PED_WEAPONS( sub_1379() );
                }
                l_U1231 = 1;
            }
        }
        if (NOT l_U1230)
        {
            if (GET_CUTSCENE_TIME_MS() > 7360)
            {
                sub_957( "SA", "Triggering sign fall", 0 );
                PLAY_OBJECT_ANIM( l_U1288, "P_AN_BRANCO_AA_H", "of_stairs", 0.00000000, 0, 1 );
                l_U1230 = 1;
            }
        }
        if (NOT l_U1238)
        {
            if (GET_CUTSCENE_TIME_MS() > 8000)
            {
                sub_957( "KA", "PRELOAD OFFICE_ONESHOT_02", 0 );
                AUDIO_MUSIC_REQUEST_ONESHOT( "OFFICE_ONESHOT_02", 0 );
                CUTSCENE_ENABLE_SKIP( 1 );
                l_U1238 = 1;
            }
        }
        if (NOT l_U1237)
        {
            if (GET_CUTSCENE_TIME_MS() > 21084)
            {
                sub_957( "KA", "PLAYING ONSHOT WHEN GUY LOOKS BACK AT MAX", 0 );
                AUDIO_MUSIC_PLAY_ONESHOT();
                l_U1237 = 1;
            }
        }
        if (NOT l_U1232)
        {
            if (GET_CUTSCENE_TIME_MS() > 103400)
            {
                sub_957( "SA", "Scene swap - 06_OFFICE_END_concat", 0 );
                STOP_MOVIE( 0 );
                RELEASE_MOVIE( 0 );
                AUDIO_MUSIC_SUSPEND( 5000 );
                if (NOT (IS_PED_DEAD( sub_1379() )))
                {
                    RESET_PED_GORE( sub_1379() );
                    APPLY_PLAYER_PRELOAD_VARIATION( sub_1379(), 0 );
                }
                RELEASE_TIME_OF_DAY();
                SET_WEATHER_TYPE_NOW_PERSIST( "SUNNY" );
                FREEZE_TIME_OF_DAY( 21, 0 );
                l_U1232 = 1;
            }
        }
        if (NOT l_U1233)
        {
            if (GET_CUTSCENE_TIME_MS() > 104400)
            {
                PRELOAD_MOVIE( 1, "boozemirror", 0, 0 );
                sub_5108( l_U1363 );
                sub_5216( l_U1289 );
                sub_5216( l_U1290 );
                sub_5216( l_U1288 );
                sub_42785( 1931667416 );
                sub_42785( 297242865 );
                sub_42785( 255375026 );
                sub_42785( -343887938 );
                l_U1233 = 1;
            }
        }
        if (NOT l_U1234)
        {
            if (GET_CUTSCENE_TIME_MS() > 201410)
            {
                if (NOT (IS_PED_DEAD( sub_1379() )))
                {
                    APPLY_PLAYER_PRELOAD_VARIATION( sub_1379(), 2 );
                }
                l_U1234 = 1;
            }
        }
        if (l_U1239 == 0)
        {
            if (iVar4 >= 143760)
            {
                sub_957( "SA", "MOVIESLOT_1", 0 );
                SET_MOVIE_LOOP( 1, 0 );
                PLAY_MOVIE( 1, 0 );
                l_U1239 = 1;
            }
        }
        if (l_U1240 == 0)
        {
            if (iVar4 >= (80700 + l_U1247))
            {
                sub_957( "SA", "APPLY_PLAYER_PRELOAD_VARIATION", 0 );
                APPLY_PLAYER_PRELOAD_VARIATION( sub_1379(), 1 );
                if (((IS_PED_DEAD( l_U1291 )) == 0) AND ((DOES_PED_EXIST( l_U1291 )) == 1))
                {
                    sub_957( "SA", "piMirroredMax", 0 );
                    SET_PED_COMPONENT_VARIATION( l_U1291, 1, 0, 1, 0 );
                }
                l_U1240 = 1;
            }
        }
    }
    return 0;
}

int sub_56842()
{
    if ((HAS_ANIM_DICT_LOADED( "boz_objmodels", 0 )) AND ((HAS_MODEL_LOADED( -1783114826 )) AND ((HAS_MODEL_LOADED( -305605011 )) AND ((HAS_MODEL_LOADED( -335436391 )) AND ((HAS_MODEL_LOADED( -247238789 )) AND ((HAS_MODEL_LOADED( -1286224544 )) AND ((HAS_MODEL_LOADED( -1382041100 )) AND ((HAS_MODEL_LOADED( -1611522407 )) AND ((HAS_MODEL_LOADED( -1976110301 )) AND ((HAS_MODEL_LOADED( -1853135683 )) AND ((HAS_MODEL_LOADED( 1666434344 )) AND ((HAS_MODEL_LOADED( 979615355 )) AND (HAS_MODEL_LOADED( 1158534095 ))))))))))))))
    {
        return 1;
    }
    return 0;
}

void sub_57055()
{
    vector vVar2;
    vector vVar5;
    vector vVar8;
    vector vVar11;
    vector vVar14;
    vector vVar17;
    vector vVar20;
    vector vVar23;
    vector vVar26;
    vector vVar29;
    vector vVar32;
    vector vVar35;
    vector vVar38;
    vector vVar41;
    vector vVar44;
    vector vVar47;
    vector vVar50;
    vector vVar53;

    sub_957( "SA", "P_CREATE_BNP_CLUTTER", 0 );
    vVar2 = {-2.31000000, 4.53200000, 201.27900000};
    vVar5 = {0.00000000, 0.00000000, 0.00000000};
    vVar8 = {-1.26400000, 4.53200000, 201.27900000};
    vVar11 = {0.00000000, 0.00000000, 0.00000000};
    vVar14 = {0.51100000, 4.53200000, 201.27900000};
    vVar17 = {0.00000000, 0.00000000, 0.00000000};
    vVar20 = {-2.01400000, 4.10700000, 200.06500000};
    vVar23 = {0.00000000, 0.00000000, 0.00000000};
    sub_5216( l_U1276 );
    l_U1276 = sub_23034( 1158534095, vVar20, vVar23, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( l_U1276 )) == 1)
    {
        FREEZE_OBJECT_POSITION( l_U1276, 1 );
    }
    vVar26 = {0.90500000, 4.10500000, 200.06500000};
    vVar29 = {0.00000000, 0.00000000, 0.00000000};
    sub_5216( l_U1277 );
    l_U1277 = sub_23034( 979615355, vVar26, vVar29, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( l_U1277 )) == 1)
    {
        FREEZE_OBJECT_POSITION( l_U1277, 1 );
    }
    vVar32 = {-2.19900000, 0.94200000, 200.42500000};
    vVar35 = {0.00000000, 0.00000000, 0.00000000};
    sub_5216( l_U1278 );
    if ((DOES_OBJECT_EXIST( l_U1278 )) == 1)
    {
        FREEZE_OBJECT_POSITION( l_U1278, 1 );
    }
    sub_5216( l_U1279 );
    l_U1279 = sub_23034( -1853135683, vVar32, vVar35, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( l_U1279 )) == 1)
    {
        FREEZE_OBJECT_POSITION( l_U1279, 1 );
    }
    sub_5216( l_U1280 );
    l_U1280 = sub_23034( -1976110301, vVar32, vVar35, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( l_U1280 )) == 1)
    {
        FREEZE_OBJECT_POSITION( l_U1280, 1 );
    }
    sub_5216( l_U1281 );
    l_U1281 = sub_23034( -1611522407, vVar32, vVar35, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( l_U1281 )) == 1)
    {
        FREEZE_OBJECT_POSITION( l_U1281, 1 );
    }
    sub_5216( l_U1282 );
    l_U1282 = sub_23034( -1382041100, vVar32, vVar35, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( l_U1282 )) == 1)
    {
        FREEZE_OBJECT_POSITION( l_U1282, 1 );
    }
    sub_5216( l_U1283 );
    l_U1283 = sub_23034( -1286224544, vVar32, vVar35, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( l_U1283 )) == 1)
    {
        FREEZE_OBJECT_POSITION( l_U1283, 1 );
    }
    vVar38 = {-3.78400000, 0.41800000, 199.74500000};
    vVar41 = {0.00000000, 0.00000000, 0.00000000};
    vVar44 = {-1.99100000, 1.32800000, 200.03900000};
    vVar47 = {-14.37200000, 0.00000000, -16.65000000};
    vVar50 = {-2.37300000, -1.62700000, 202.56800000};
    vVar53 = {0.00000000, 0.00000000, 0.00000000};
    sub_5216( l_U1284 );
    l_U1284 = sub_23034( -247238789, vVar38, vVar41, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( l_U1284 )) == 1)
    {
        FREEZE_OBJECT_POSITION( l_U1284, 1 );
    }
    sub_5216( l_U1285 );
    l_U1285 = sub_23034( -335436391, vVar38, vVar41, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( l_U1285 )) == 1)
    {
        FREEZE_OBJECT_POSITION( l_U1285, 1 );
    }
    sub_5216( l_U1286 );
    l_U1286 = sub_23034( -1783114826, vVar50, vVar53, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( l_U1286 )) == 1)
    {
        PLAY_OBJECT_ANIM( l_U1286, "mpas_cfanbase", "boz_objmodels", 0.00000000, 1, 0 );
        SET_OBJECT_ANIM_CURRENT_TIME( l_U1286, "mpas_cfanbase", "boz_objmodels", 0.00000000 );
        SET_OBJECT_ANIM_SPEED( l_U1286, "mpas_cfanbase", "boz_objmodels", 1.00000000 );
    }
    sub_5216( l_U1287 );
    l_U1287 = sub_23034( -305605011, vVar44, vVar47, 0, 0, 0 );
    if ((DOES_OBJECT_EXIST( l_U1287 )) == 1)
    {
        PLAY_OBJECT_ANIM( l_U1287, "mpas_deskfan", "boz_objmodels", 0.00000000, 1, 0 );
        SET_OBJECT_ANIM_CURRENT_TIME( l_U1287, "mpas_deskfan", "boz_objmodels", 0.00000000 );
        SET_OBJECT_ANIM_SPEED( l_U1287, "mpas_deskfan", "boz_objmodels", 1.00000000 );
    }
    return;
}

