void main()
{
    l_U0 = 1;
    l_U1 = 144;
    l_U21 = 0;
    l_U22 = 0;
    l_U23 = 1500;
    l_U34 = 0;
    l_U36 = 0;
    l_U37 = 0;
    l_U38 = 0;
    l_U39 = 0;
    l_U40 = 0;
    l_U41 = 0;
    l_U42 = 0;
    l_U43 = 0;
    l_U44 = 0;
    l_U45 = 0;
    l_U807 = -1;
    l_U808 = {64536, 64536, 64536};
    l_U847 = 0;
    l_U848 = 0;
    l_U850 = 0;
    l_U1022 = 2;
    l_U1023 = 3;
    l_U1024 = 4;
    l_U1025 = 5;
    l_U1026 = 8;
    StrCopy( ref l_U1530, "02_NC_RANDOM1_concat", 32 );
    StrCopy( ref l_U1719, "MID_04_NC_concat", 32 );
    l_U1755 = 1000;
    l_U1756 = 300;
    l_U1757 = 0;
    l_U1776 = 1900;
    l_U1777 = 800;
    l_U1779 = {6.82400000, 52.33700000, -0.78300000};
    l_U1782 = {0.00000000, 0.00000000, 65.00000000};
     /* WRITESCRIPTLOG */ sub_365( "CR", "Script s_club_Theme_room is starting...", 0 );
    l_U848 = 1;
    l_U34 = 0;
    while (IS_EXITFLAG_SET() == 0)
    {
         /* P_HANDLE_FAILURE */ sub_509();
        if (l_U850 == 0)
        {
             /* P_HANDLE_EVENTS */ sub_10571();
             /* P_LNG_HANDLE_DEBUG */ sub_63865();
        }
        WAIT( 0 );
    }
     /* P_CLEANUP_ALL */ sub_3303();
     /* P_UNLOAD_ASSETS */ sub_64711();
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "s_club_Theme_room" );
    SET_EXITFLAG_RESPONSE();
     /* WRITESCRIPTLOG */ sub_365( "CR", "Script s_club_Theme_room is terminating...", 0 );
    return;
}

/* WRITESCRIPTLOG */ void sub_365(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    DISPLAYF( "[{0}][{1}]{3} {2} {3}", 4, 513, uVar5, 1537, uParam0, 1537, uParam1, 1537, sParam2 );
    return;
}

/* P_HANDLE_FAILURE */ void sub_509()
{
    if (g_U892 == 3)
    {
        switch (l_U850)
        {
            case 0:
            if ((g_U3360) || (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
            {
                l_U850 = 1;
                 /* WRITESCRIPTLOG */ sub_365( "CR", "eFailState = FAIL_WAITING_FOR_PLAYER", 0 );
            }
            else if ( /* RESTARTING_CHECKPOINT */ sub_783())
            {
                l_U850 = 3;
                 /* WRITESCRIPTLOG */ sub_365( "CR", "eFailState = FAIL_CLEANUP_ALL", 0 );
            }
            break;
            case 1:
            if ((( /* F_CHECK_QUIT_RETRY */ sub_1337( 0 )) == 1) || ( /* IS_RESTART_ACTIVE */ sub_1293()))
            {
                if ( /* IS_RESTART_ACTIVE */ sub_1293())
                {
                    ;
                }
                l_U850 = 2;
            }
            break;
            case 2:
             /* WRITESCRIPTLOG */ sub_365( "CR", "eFailState = FAIL_WAITING_FOR_PLAYER", 0 );
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
            {
                l_U850 = 3;
                 /* WRITESCRIPTLOG */ sub_365( "CR", "eFailState = FAIL_CLEANUP_ALL", 0 );
            }
            break;
            case 3:
             /* WRITESCRIPTLOG */ sub_365( "CR", "eFailState = FAIL_CLEANUP_ALL", 0 );
            if ((NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() ))) AND (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_648() ))))
            {
                SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_648(), 0, 0 );
                if (GET_IS_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_610() ))
                {
                    SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_610(), 0 );
                }
            }
            DO_SCREEN_FADE_OUT( 0 );
             /* P_IMAGEFX_STOP_BULLETCAM */ sub_3057( "CLUB_TIMEOUT_SCRIPTED_FAIL_FX" );
            DESTROY_ALL_CAMS();
            RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
            AUDIO_MUSIC_SUSPEND( 500 );
             /* P_CLEANUP_ALL */ sub_3303();
            if (g_U893[4]._fU36 == 1)
            {
                SET_EXITFLAG_FOR_SCRIPT( g_U893[4]._fU32 );
                 /* P_RESET_CHECKPOINT_THREAD */ sub_5640( ref g_U893[4] );
            }
            l_U850 = 4;
             /* WRITESCRIPTLOG */ sub_365( "CR", "eFailState = FAIL_RESTORE_PLAYER", 0 );
            break;
            case 4:
             /* WRITESCRIPTLOG */ sub_365( "CR", "eFailState = FAIL_RESTORE_PLAYER", 0 );
             /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_5814( ref l_U811,  /* PLAYER_PED_ID */ sub_610() );
            SET_INTERIOR_ACTIVE( GET_INTERIOR_FROM_NAME( ref g_U2488, 0 ), 1, 0 );
            LOAD_SCENE_FOR_ROOM_BY_KEY( GET_INTERIOR_FROM_NAME( ref g_U2488, 0 ), GET_HASH_KEY( ref g_U2544 ) );
            LOAD_SCENE_FOR_ROOM_BY_KEY( GET_INTERIOR_FROM_NAME( ref g_U2488, 0 ), GET_HASH_KEY( ref g_U2536 ) );
            l_U850 = 5;
             /* WRITESCRIPTLOG */ sub_365( "CR", "eFailState = FAIL_RESTART_CHECKPOINT", 0 );
            break;
            case 5:
             /* WRITESCRIPTLOG */ sub_365( "CR", "eFailState = FAIL_RESTART_CHECKPOINT", 0 );
            l_U848 = 1;
            l_U850 = 0;
             /* WRITESCRIPTLOG */ sub_365( "CR", "eFailState = FAIL_IDLE", 0 );
            break;
        }
    }
    return;
}

/* PLAYER_PED_ID */ int sub_610()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED(  /* PLAYER_ID */ sub_648() );
    }
    return 0;
}

/* PLAYER_ID */ void sub_648()
{
    return GET_PLAYER_ID();
}

/* RESTARTING_CHECKPOINT */ int sub_783()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U0 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
        {
            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_610(), 0 );
            SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_648(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE(  /* PLAYER_ID */ sub_648(), 1 );
            if ((IS_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_610() )) == 0)
            {
                SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_610(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

/* IS_RESTART_ACTIVE */ void sub_1293()
{
    return g_U648;
}

/* F_CHECK_QUIT_RETRY */ int sub_1337(int iParam0)
{
    iParam0 = 1;
    switch (l_U22)
    {
        case 0:
        if (NOT ( /* HASTIMERBEENACTIVATED */ sub_1415( ref l_U24 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
            {
                l_U23 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
             /* CREATETIMER */ sub_1543( ref l_U24, l_U23, 1, 1 );
             /* STARTTIMER */ sub_1691( ref l_U24 );
        }
        if ( /* ISTIMERDONE */ sub_1822( ref l_U24 ))
        {
             /* WRITESCRIPTLOG */ sub_365( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_648() )))
            {
                SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_648(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U22 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U22 = 2;
            }
            else
            {
                l_U22 = 3;
            }
        }
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_365( "NS", "Player will QUIT", 0 );
         /* P_POSTQUITRETRYCLEANUP */ sub_2317();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_365( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
         /* P_POSTQUITRETRYCLEANUP */ sub_2317();
        return 1;
        break;
    }
    return 0;
}

/* HASTIMERBEENACTIVATED */ int sub_1415(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

/* CREATETIMER */ void sub_1543(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

/* STARTTIMER */ void sub_1691(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

/* ISTIMERDONE */ int sub_1822(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

/* P_POSTQUITRETRYCLEANUP */ void sub_2317()
{
     /* WRITESCRIPTLOG */ sub_365( "NS", "P_PostFailRetryCleanup", 0 );
     /* RESETTIMER */ sub_2390( ref l_U24 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_648() )))
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_648(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U21 = 0;
    l_U21 = l_U21;
    l_U22 = 0;
    return;
}

/* RESETTIMER */ void sub_2390(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

/* P_IMAGEFX_STOP_BULLETCAM */ void sub_3057(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_365( "CO", "P_IMAGEFX_STOP_BULLETCAM:  Cameras Deleted", 0 );
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
     /* CLEANCAMERA */ sub_3167( ref l_U35 );
    l_U34 = 1;
    return;
}

/* CLEANCAMERA */ void sub_3167(unknown uParam0)
{
    if ((DOES_CAM_EXIST( (uParam0^) )) == 1)
    {
        if ((IS_CAM_ACTIVE( (uParam0^) )) == 1)
        {
            SET_CAM_ACTIVE( (uParam0^), 0 );
        }
        DESTROY_CAM( (uParam0^) );
    }
    (uParam0^) = nil;
    return;
}

/* P_CLEANUP_ALL */ void sub_3303()
{
     /* WRITESCRIPTLOG */ sub_365( "CR", "P_CLEANUP", 0 );
    ISEQ_UNREGISTER_ENTITY( -2013155889, "CS_01" );
    ISEQ_UNREGISTER_ENTITY( -2013155889, "CS_02" );
    ISEQ_UNREGISTER_ENTITY( -2013155889, "CIV" );
    ISEQ_TERMINATE( -2013155889 );
     /* TERMINATEISEQ */ sub_3428( 1446597130, 1 );
     /* TERMINATEISEQ */ sub_3428( -87549151, 1 );
     /* TERMINATEISEQ */ sub_3428( -1591711785, 1 );
     /* TERMINATEISEQ */ sub_3428( -1921859460, 1 );
     /* TERMINATEISEQ */ sub_3428( 1134570712, 1 );
     /* TERMINATEISEQ */ sub_3428( 1396472282, 1 );
    ISEQ_UNREGISTER_ENTITY( -1218938405, "player" );
    ISEQ_TERMINATE( -1218938405 );
    ISEQ_UNREGISTER_ENTITY( 1830675819, "player" );
    ISEQ_TERMINATE( 1830675819 );
    ISEQ_UNREGISTER_ENTITY( 1591920885, "player" );
    ISEQ_TERMINATE( 1591920885 );
     /* CLEANPEDARRAY */ sub_3887( ref l_U1027 );
     /* CLEANPEDARRAY */ sub_3887( ref l_U894 );
     /* CLEANPEDARRAY */ sub_3887( ref l_U1043 );
     /* CLEANPEDARRAY */ sub_3887( ref l_U1073 );
     /* CLEANPEDARRAY */ sub_3887( ref l_U1154 );
     /* CLEANPEDARRAY */ sub_3887( ref l_U1282 );
     /* CLEANPEDARRAY */ sub_3887( ref l_U1445 );
     /* CLEANPEDARRAY */ sub_3887( ref l_U1482 );
     /* CLEANPEDARRAY */ sub_3887( ref l_U1089 );
     /* CLEANPLACEMENTARRAY */ sub_4117( ref l_U1589 );
     /* CLEANPLACEMENT */ sub_4172( g_U795._fU0 );
     /* CLEANOBJECT */ sub_4268( l_U1778 );
     /* P_ENABLE_POI */ sub_4327( ref l_U1787, 0 );
     /* CLEANOBJECT */ sub_4268( l_U1587 );
     /* DISABLETIMER */ sub_5344( ref g_U3340 );
     /* DISABLETIMER */ sub_5344( ref g_U3350 );
    ENABLE_WALLA_ZONE( "S_CLUB_WZ_LOUNGE_CS", 0 );
    ENABLE_WALLA_ZONE( "S_CLUB_WZ_LOUNGE_HOSTAGES", 0 );
    if ((CUTSCENE_NAMED_IS_LOADING( ref l_U1719 )) || (CUTSCENE_IS_LOADED( ref l_U1719 )))
    {
        CLEAR_NAMED_CUTSCENE( ref l_U1719 );
    }
    if ((CUTSCENE_NAMED_IS_LOADING( ref l_U1530 )) || (CUTSCENE_IS_LOADED( ref l_U1530 )))
    {
        CLEAR_NAMED_CUTSCENE( ref l_U1530 );
    }
    if (g_U892 == 3)
    {
        ENABLE_STATIC_EMITTER( "S_CLUB_SE_LOUNGE_MUSIC", 0 );
    }
    return;
}

/* TERMINATEISEQ */ void sub_3428(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to terminate does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 1)
    {
        ISEQ_TERMINATE( uParam0 );
    }
    ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
    if (iParam1 == 1)
    {
        while ((ISEQ_IS_LOADED( uParam0 )) == 1)
        {
            DISPLAYF( "[SP]### Waiting for interactive sequence to terminate: {0} {1} ###", 2, 1281, ref uVar4, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* CLEANPEDARRAY */ void sub_3887(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
         /* CLEANPED */ sub_3937( (uParam0^)[I] );
    }
    return;
}

/* CLEANPED */ void sub_3937(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

/* CLEANPLACEMENTARRAY */ void sub_4117(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* CLEANPLACEMENT */ sub_4172( (uParam0^)[I] );
    }
    return;
}

/* CLEANPLACEMENT */ void sub_4172(unknown uParam0)
{
    if ((DOES_PLACEMENT_EXIST( uParam0 )) == 1)
    {
        REMOVE_PLACEMENT( uParam0 );
    }
    return;
}

/* CLEANOBJECT */ void sub_4268(unknown uParam0)
{
    if (DOES_OBJECT_EXIST( uParam0 ))
    {
        DELETE_OBJECT( ref uParam0 );
    }
    return;
}

/* P_ENABLE_POI */ void sub_4327(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        if ((iParam0->_fU4 == 1) AND (iParam0->_fU320 == 1))
        {
             /* P_ENABLEPOIGLINT */ sub_4386( iParam0, 1 );
        }
        iParam0->_fU0 = 1;
    }
    else
    {
         /* P_ENABLEPOIGLINT */ sub_4386( iParam0, 0 );
         /* P_ENABLEPOIINTERACTIONTEXT */ sub_4605( iParam0, 0 );
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )) == 0)
        {
            TASK_CLEAR_LOOK_AT(  /* PLAYER_PED_ID */ sub_610() );
            if ((iParam0->_fU328 == 1) AND (iParam0->_fU324 == 1))
            {
                SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_610(), 0 );
                iParam0->_fU328 = 0;
            }
        }
        iParam0->_fU8 = 0;
        iParam0->_fU0 = 0;
    }
    return;
}

/* P_ENABLEPOIGLINT */ void sub_4386(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        if (iParam0->_fU12 != nil)
        {
            if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
            {
                ENABLE_GLINT( iParam0->_fU12, 1 );
            }
            else
            {
                iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
            }
        }
        else
        {
            iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
        }
    }
    else if (iParam0->_fU12 != nil)
    {
        if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
        {
            ENABLE_GLINT( iParam0->_fU12, 0 );
        }
    }
    return;
}

/* P_ENABLEPOIINTERACTIONTEXT */ void sub_4605(int iParam0, int iParam1)
{
    if (iParam1 == 1)
    {
        SET_INTERACTIONTEXT_TEXT( iParam0 + 32 );
        SET_INTERACTIONTEXT_BUTTON( iParam0->_fU48 );
        if ((iParam0->_fU72 == 0) AND ((iParam0->_fU64 == 1) AND (iParam0->_fU68 == 1)))
        {
            SET_INTERACTIONTEXT_VISIBLE( 0 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 0 );
            SET_INTERACTIONTEXT_AVAILABLE( 0 );
            iParam0->_fU56 = 0;
        }
        else
        {
            SET_INTERACTIONTEXT_VISIBLE( 1 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 1 );
            SET_INTERACTIONTEXT_AVAILABLE( 1 );
            iParam0->_fU56 = 1;
        }
         /* P_UPDATEINTERACTIONTEXTAVAILABLE */ sub_4785( iParam0 );
        if (iParam0->_fU332 == 1)
        {
            SET_INTERACTIONTEXT_PULSE( 1 );
            SET_INTERACTIONTEXT_PULSE_PERIOD( iParam0->_fU336 );
        }
    }
    else
    {
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        SET_INTERACTIONTEXT_BUTTON_VISIBLE( 0 );
    }
    return;
}

/* P_UPDATEINTERACTIONTEXTAVAILABLE */ void sub_4785(int iParam0)
{
    if (iParam0->_fU60 == 1)
    {
        SET_INTERACTIONTEXT_AVAILABLE( 0 );
        iParam0->_fU56 = 0;
    }
    else if (iParam0->_fU56 == 1)
    {
        if (( /* F_ISACTIONINGAVAILABLE */ sub_4881( iParam0 )) == 0)
        {
            SET_INTERACTIONTEXT_AVAILABLE( 0 );
            iParam0->_fU56 = 0;
        }
    }
    else if (( /* F_ISACTIONINGAVAILABLE */ sub_4881( iParam0 )) == 1)
    {
        SET_INTERACTIONTEXT_AVAILABLE( 1 );
        iParam0->_fU56 = 1;
    };;;
    return;
}

/* F_ISACTIONINGAVAILABLE */ int sub_4881(int iParam0)
{
    if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )) == 0) AND ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_648() )) == 0))
    {
        if (((IS_PED_RELOADING(  /* PLAYER_PED_ID */ sub_610() )) == 1) || (((IS_PED_GETTING_UP(  /* PLAYER_PED_ID */ sub_610() )) == 1) || (((IS_PED_PICKING_UP_PICKUP(  /* PLAYER_PED_ID */ sub_610() )) == 1) || (((IS_PED_IN_COVER(  /* PLAYER_PED_ID */ sub_610() )) == 1) || (((IS_PED_DUCKING(  /* PLAYER_PED_ID */ sub_610() )) == 1) || (IS_PLAYER_SHOOTDODGING() == 1))))))
        {
            return 0;
        }
        if (iParam0->_fU304 == 0)
        {
            if ((IS_MONOLOGUE_PLAYING() == 1) || ((IS_ANY_SPEECH_PLAYING(  /* PLAYER_PED_ID */ sub_610() )) == 1))
            {
                return 0;
            }
        }
        return 1;
    }
    return 0;
}

/* DISABLETIMER */ void sub_5344(int iParam0)
{
    iParam0->_fU20 = 0;
    iParam0->_fU16 = 0;
    return;
}

/* P_RESET_CHECKPOINT_THREAD */ void sub_5640(int iParam0)
{
    iParam0->_fU36 = 0;
    iParam0->_fU40 = 0;
    return;
}

/* P_RESTORE_PLAYER_DATA_CHECKPOINT */ void sub_5814(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

     /* WRITESCRIPTLOG */ sub_365( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U0)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
     /* CLOSE_CURRENT_LEVEL_CONTEXT */ sub_6033( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
         /* LOADCOLLISIONFORPED */ sub_7197( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_7511( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_7990( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_7511( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_7990( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_7511( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_7990( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPON */ sub_8306( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_7990( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPON */ sub_8306( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_7990( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U0 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if (( /* F_CAN_GIVE_AMMO_TO_REGULAR_WEAPON_TYPE */ sub_8878( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
     /* START_NEW_LEVEL_CONTEXT */ sub_9080( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING(  /* PLAYER_PED_ID */ sub_610(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U0)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U0 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
     /* WRITESCRIPTLOG */ sub_365( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

/* CLOSE_CURRENT_LEVEL_CONTEXT */ void sub_6033(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_6095( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

/* GET_MISSION_INDEX_FROM_NAME */ int sub_6095(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    }
    else
    {
        PRINTSTRING( uParam0 );
        PRINTSTRING( uParam0 );
        PRINTSTRING( uParam0 );
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

/* LOADCOLLISIONFORPED */ void sub_7197(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

/* F_GIVEPEDWEAPONTOHOLSTER */ void sub_7511(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_7915( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* WRITE_STRING */ void sub_7915(unknown uParam0)
{
    PRINTSTRING( uParam0 );
    PRINTNL();
    return;
}

/* P_RESTORE_WEAPON_ATTACHMENTS */ void sub_7990(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

/* F_GIVEPEDWEAPON */ void sub_8306(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_7915( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* F_CAN_GIVE_AMMO_TO_REGULAR_WEAPON_TYPE */ int sub_8878(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

/* START_NEW_LEVEL_CONTEXT */ void sub_9080(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_6095( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
     /* CLEAR_GG_CONTEXTS */ sub_9178( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

/* CLEAR_GG_CONTEXTS */ void sub_9178(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

/* P_HANDLE_EVENTS */ void sub_10571()
{
    int iVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;

    iVar2 = l_U848;
    switch (l_U848)
    {
        case 0: break;
        case 1:
         /* WRITESCRIPTLOG */ sub_365( "CR", "eCheckpointState = CP_INITIALIZE_SCRIPT_DATA", 0 );
         /* P_INIT_SCRIPT_VARIABLES */ sub_10809();
         /* P_INIT_GAMEPLAY_STRUCTS */ sub_11037();
         /* SETUP_SCRIPTED_SPEECH */ sub_17205( "SCLBAUD" );
        SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
        l_U848 = 2;
         /* WRITESCRIPTLOG */ sub_365( "CR", "eCheckpointState = CP_INITIAL_REQUEST_ASSETS", 0 );
        case 2:
         /* WRITESCRIPTLOG */ sub_365( "SP", "eCheckpointState = CP_INITIAL_REQUEST_ASSETS", 0 );
         /* P_REQUEST_ASSETS */ sub_17499();
        l_U848 = 3;
         /* WRITESCRIPTLOG */ sub_365( "SP", "eCheckpointState = CP_INITIAL_LOADING_ASSETS", 0 );
        case 3:
        if (( /* F_HAVE_ASSETS_LOADED */ sub_18845()) == 1)
        {
            l_U848 = 4;
             /* WRITESCRIPTLOG */ sub_365( "SP", "eCheckpointState = CP_SETUP_START_POINT", 0 );
            break;
        }
        return;
        case 4:
         /* WRITESCRIPTLOG */ sub_365( "SP", "eCheckpointState = CP_SETUP_START_POINT", 0 );
        if ((l_U847 == 0) AND (g_U891 == 3))
        {
            l_U847 = 1;
            if (NOT ( /* HAS_SAVEFILE_LOADED */ sub_19398( ref l_U811 )))
            {
                 /* F_GIVEPEDWEAPON */ sub_8306(  /* PLAYER_PED_ID */ sub_610(), 1194438308, 200, 0, 0 );
                l_U848 = 5;
                 /* WRITESCRIPTLOG */ sub_365( "MF", "eCheckpointState = CP_WAIT_FOR_PLAYER_WEAPONS", 0 );
            }
            else
            {
                l_U848 = 6;
                 /* WRITESCRIPTLOG */ sub_365( "MF", "eCheckpointState = CP_HANDLE_SPAWN_ENTITIES", 0 );
            }
            g_U1074[3] = 1;
        }
        else
        {
            l_U848 = 6;
             /* WRITESCRIPTLOG */ sub_365( "CR", "eCheckpointState = CP_HANDLE_SPAWN_ENTITIES", 0 );
        }
        break;
        case 5:
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )) == 0)
        {
            if ((GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_610(), 0, 0 ) )) == 1)
            {
                l_U848 = 6;
                 /* WRITESCRIPTLOG */ sub_365( "CR", "eCheckpointState = CP_HANDLE_SPAWN_ENTITIES", 0 );
            }
        }
        break;
        case 6:
        if (l_U849)
        {
            ENABLE_STATIC_EMITTER( "S_CLUB_SE_LOUNGE_MUSIC", 1 );
        }
        if (g_U892 != 3)
        {
            if ( /* F_LNG_HANDLE_PRE_MID_04_PED_SPAWNING */ sub_20007())
            {
                l_U848 = 7;
                 /* WRITESCRIPTLOG */ sub_365( "CR", "eCheckpointState = CP_WAITING_TO_ACTIVATE", 0 );
            }
        }
        else if ( /* F_LNG_HANDLE_DURING_MID_04_PED_SPAWNING */ sub_21806())
        {
             /* P_LNG_SETUP_HALLWAY_CS */ sub_21928();
             /* P_LNG_SETUP_BOUNCER */ sub_23934();
             /* P_ACTIVATEPED */ sub_24063( l_U894[0] );
             /* P_ACTIVATEPED */ sub_24063( l_U894[1] );
            l_U848 = 7;
             /* WRITESCRIPTLOG */ sub_365( "CR", "eCheckpointState = CP_WAITING_TO_ACTIVATE", 0 );
        }
        break;
        case 7:
        if (g_U1074[3] == 1)
        {
            l_U848 = 8;
             /* WRITESCRIPTLOG */ sub_365( "CR", "eCheckpointState = CP_START_MID_04_CUTSCENE", 0 );
            break;
        }
        return;
        case 8:
         /* WRITESCRIPTLOG */ sub_365( "SP", "eCheckpointState = CP_START_MID_04_CUTSCENE", 0 );
         /* CUTSYS_CREATECUTSCENEWITHBLENDOUT */ sub_29906( ref l_U1727, "MID_04_NC_concat", 24841, 24888, 25768, 26285, 28371, 28985, 250, 0 );
         /* CUTSYS_SETCUTSCENELOADINTERIORONSKIP */ sub_30436( ref l_U1727, ref g_U2488, ref g_U2544 );
        l_U1727._fU64 = 0;
        if (g_U892 < 3)
        {
            l_U1727._fU4 = 2;
            l_U1727._fU104 = 0;
        }
        else
        {
            l_U1727._fU4 = 7;
        }
        l_U848 = 9;
         /* WRITESCRIPTLOG */ sub_365( "SP", "eCheckpointState = CP_HANDLE_MID_04_CUTSCENE", 0 );
        case 9:
        if (( /* CUTSYS_HANDLECUTSCENE */ sub_30654( ref l_U1727 )) == 1)
        {
            RESET_FORCED_AIM_INTENTION_DIRECTION();
            l_U848 = 10;
             /* WRITESCRIPTLOG */ sub_365( "SP", "eCheckpointState = CP_HANDLE_LOUNGE_GAMEPLAY", 0 );
        }
        else
        {
            return;
        }
        break;
        case 10:
        if (l_U849 == 1)
        {
            if (NOT (IS_PED_DEAD( l_U894[1] )))
            {
                 /* WRITESCRIPTLOG */ sub_365( "RJM", "CP_HANDLE_LOUNGE_GAMEPLAY - First update, setting the runner to not use injured movement", 0 );
                SET_PED_FLAG_BLOCK_WOUNDED_MOVEMENT( l_U894[1], 1 );
            }
             /* P_CREATE_PLACEMENTS */ sub_33430();
             /* P_LNG_START_VIG_04_B_CIVS */ sub_35282();
            if (l_U811._fU0 == 0)
            {
                g_U892 = 3;
                 /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_35488( ref l_U811, g_U892,  /* PLAYER_PED_ID */ sub_610(), g_U2216[3], g_U2331[3], g_U2370[3], g_U2409[3], 0 );
            }
            if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_648() )))
            {
                SET_PLAYER_FORCED_AIM_MAINTAIN_DIRECTION(  /* PLAYER_ID */ sub_648(), 0, 0 );
            }
             /* P_LNG_SPEECH_MRSB */ sub_40077();
             /* P_LNG_CREATE_ANDERS_DOOR */ sub_41474();
            CAMERA_CLEAR_POINT_AT_TARGET();
            PRE_STREAM_SEAMLESS_CUTSCENE( "02_NC_RANDOM1_concat" );
        }
        if (NOT l_U1711)
        {
            if ((ISEQ_QUERY_ENTITY_STATE( -2013155889, "CS_01", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -2013155889, "CS_01", 5 )))
            {
                 /* P_LNG_CREATE_BODYGUARD_BODY */ sub_41785();
                 /* P_START_GAMEPLAY */ sub_42011();
                l_U1711 = 1;
            }
        }
        if (NOT l_U1588)
        {
            if (DOES_OBJECT_EXIST( DOOR_FIND_CLOSEST( g_U3171._fU0, g_U3171._fU4 ) ))
            {
                 /* WRITESCRIPTLOG */ sub_365( "MF", "Doing intial setup for Anders Locked Door", 0 );
                SET_OBJECT_VISIBLE( DOOR_FIND_CLOSEST( g_U3171._fU0, g_U3171._fU4 ), 0 );
                 /* P_OPENDOOR */ sub_43198( ref g_U3171, 1, 1, 1065353216 );
                l_U1588 = 1;
            }
        }
         /* P_PED_ARRAY_Z_SAFETY_CHECK */ sub_43374( ref l_U894, -1054867456, 0, 1 );
         /* P_PED_ARRAY_Z_SAFETY_CHECK */ sub_43374( ref l_U1027, -1054867456, 0, 1 );
         /* P_HANDLE_ENEMY_BULLET_CAM */ sub_43589();
         /* P_GBL_HANDLE_PED_AIMED_AT_FLINCH */ sub_44010( ref l_U1073[0], 58, 1069547520, 1101004800, 0, -1082130432 );
         /* F_HANDLE_POI */ sub_44369( ref l_U1787 );
        if (DOOR_GET_IS_AFFECTED_BY_BULLETS( DOOR_FIND_CLOSEST( g_U3185._fU0, g_U3185._fU4 ) ))
        {
             /* P_SETDOORAFFECTEDBYBULLETS */ sub_46283( ref g_U3185, 0 );
        }
        if (DOOR_GET_IS_AFFECTED_BY_BULLETS( DOOR_FIND_CLOSEST( g_U3192._fU0, g_U3192._fU4 ) ))
        {
             /* P_SETDOORAFFECTEDBYBULLETS */ sub_46283( ref g_U3192, 0 );
        }
        if (l_U1713 == 1)
        {
             /* P_DF_HANDLE_CLEAN_VIG_04_C_PEDS */ sub_46434();
             /* P_DF_HANDLE_CLEAN_VIG_04_D_BAR_PEDS */ sub_46978();
        }
        if (NOT l_U1712)
        {
            if ((IS_SPHERE_VISIBLE( 26.71000000, 19.62000000, 0.97000000, 0.50000000, 1 )) || ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_47542( ref l_U1636, 0 )))
            {
                 /* P_LNG_START_VIG_04_A */ sub_47706();
                ENABLE_WALLA_ZONE( "S_CLUB_WZ_LOUNGE_CS", 1 );
                ENABLE_WALLA_ZONE( "S_CLUB_WZ_LOUNGE_HOSTAGES", 1 );
                l_U1712 = 1;
            }
        }
        if (NOT l_U1713)
        {
            if ((IS_SPHERE_VISIBLE( 21.25624000, 46.39191000, 1.23702000, 1.00000000, 1 )) || (( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_47542( ref l_U1133, 0 )) == 1))
            {
                 /* P_LNG_START_VIG_04_C */ sub_48309();
                 /* P_LNG_START_VIG_04_D_FROZEN */ sub_48633();
                 /* P_LNG_START_VIG_04_D_BAR_PEDS */ sub_49200();
                 /* P_UPPER_FLOOR_CS_ENGAGE */ sub_49456();
                 /* CREATETIMER */ sub_1543( ref l_U1702, 9000, 1, 0 );
                 /* STARTTIMER */ sub_1691( ref l_U1702 );
                l_U1713 = 1;
                break;
            }
        }
        if (NOT l_U1714)
        {
            if (( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_47542( ref l_U1261, 0 )) || ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_47542( ref l_U1240, 0 )))
            {
                 /* P_LNG_START_VIG_04_D_BOOTH_AND_CS */ sub_50085();
                l_U1714 = 1;
            }
        }
        else
        {
             /* P_DF_HANDLE_TASKING_VIG_04_D_CS */ sub_50428();
             /* P_DF_HANDLE_CLEAN_VIG_04_D_BOOTH_PEDS */ sub_51124();
        }
        if (NOT l_U1715)
        {
            if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_47542( ref l_U1424, 0 ))
            {
                 /* P_LNG_START_VIG_04_E */ sub_51536();
                l_U1715 = 1;
            }
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_47542( ref l_U1461, 0 ))
        {
             /* P_LNG_START_VIG_04_F */ sub_51782();
             /* CREATETIMER */ sub_1543( ref l_U1512, 1200, 1, 0 );
             /* CREATETIMER */ sub_1543( ref l_U1521, 1600, 1, 0 );
             /* STARTTIMER */ sub_1691( ref l_U1512 );
             /* STARTTIMER */ sub_1691( ref l_U1521 );
        }
        if ( /* HASTIMERBEENACTIVATED */ sub_1415( ref l_U1512 ))
        {
            if ( /* ISTIMERDONE */ sub_1822( ref l_U1512 ))
            {
                 /* WRITESCRIPTLOG */ sub_365( "RJM", "VIG_04F - Shooting girl", 0 );
                SHOOT_SINGLE_BULLET_BETWEEN_COORDS( 13.46000000, 22.40000000, 1.10000000, 30.66000000, 15.04000000, 0.55000000, 100, 1, -1074756423, 0 );
                 /* DISABLETIMER */ sub_5344( ref l_U1512 );
            }
        }
        if ( /* HASTIMERBEENACTIVATED */ sub_1415( ref l_U1521 ))
        {
            if ( /* ISTIMERDONE */ sub_1822( ref l_U1521 ))
            {
                 /* WRITESCRIPTLOG */ sub_365( "RJM", "VIG_04F - Shooting guy", 0 );
                SHOOT_SINGLE_BULLET_BETWEEN_COORDS( 13.46000000, 22.40000000, 1.10000000, 31.19000000, 12.99000000, 0.70000000, 100, 1, -1074756423, 0 );
                 /* DISABLETIMER */ sub_5344( ref l_U1521 );
            }
        }
        if (( /* ISTIMERDONE */ sub_1822( ref l_U1702 )) == 1)
        {
            ENABLE_WALLA_ZONE( "S_CLUB_WZ_LOUNGE_CS", 0 );
            ENABLE_WALLA_ZONE( "S_CLUB_WZ_LOUNGE_HOSTAGES", 0 );
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_47542( ref l_U1594, 0 ))
        {
             /* P_STARTING_CS_SECONDARY_COMBAT */ sub_52487();
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_47542( ref l_U1657, 0 ))
        {
             /* P_LOWER_FLOOR_CS_ENGAGE */ sub_52861();
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_47542( ref l_U851, 0 ))
        {
             /* P_START_CHECKPOINT_THREAD */ sub_53616( ref g_U893[4] );
        }
        if ( /* F_IS_PED_ARRAY_DEFEATED */ sub_53675( ref l_U894, 1 ))
        {
            if (NOT IS_BULLET_CAMERA_ACTIVE())
            {
                l_U848 = 11;
                 /* WRITESCRIPTLOG */ sub_365( "CR", "eCheckpointState = CP_POST_LOUNGE_GAMEPLAY", 0 );
            }
        }
        if ( /* F_POI_CAN_PLAY_UNAVALIABLE_MONO */ sub_53996( ref l_U1787 ))
        {
             /* P_SPEECH_PLAY_MONOLOGUE */ sub_54285( "EXPLORE_ITEM", ref l_U1974 );
        }
        if (g_U1102 == 0)
        {
             /* P_HANDLE_MISSION_FAIL_LOGIC */ sub_54402();
        }
        if (g_U892 == 4)
        {
            l_U848 = 15;
             /* WRITESCRIPTLOG */ sub_365( "CR", "eCheckpointState = CP_FINISHED", 0 );
        }
        break;
        case 11:
        if (l_U849)
        {
             /* CREATETIMER */ sub_1543( ref l_U1912, 2500, 1, 0 );
             /* STARTTIMER */ sub_1691( ref l_U1912 );
             /* P_SET_POI_AVAILABLE */ sub_17110( ref l_U1787, 1 );
             /* F_GBL_HAS_PLAYER_JUST_ACQUIRED_PAIN_KILLERS */ sub_55711();
        }
        if (NOT l_U1588)
        {
            if (DOES_OBJECT_EXIST( DOOR_FIND_CLOSEST( g_U3171._fU0, g_U3171._fU4 ) ))
            {
                 /* WRITESCRIPTLOG */ sub_365( "MF", "Doing intial setup for Anders Locked Door", 0 );
                SET_OBJECT_VISIBLE( DOOR_FIND_CLOSEST( g_U3171._fU0, g_U3171._fU4 ), 0 );
                 /* P_OPENDOOR */ sub_43198( ref g_U3171, 1, 1, 1065353216 );
                l_U1588 = 1;
            }
        }
         /* P_DF_HANDLE_CLEAN_VIG_04_C_PEDS */ sub_46434();
         /* P_DF_HANDLE_CLEAN_VIG_04_D_BAR_PEDS */ sub_46978();
         /* P_DF_HANDLE_CLEAN_VIG_04_D_BOOTH_PEDS */ sub_51124();
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_47542( ref l_U851, 0 ))
        {
             /* P_START_CHECKPOINT_THREAD */ sub_53616( ref g_U893[4] );
        }
        if ( /* F_GBL_HAS_PLAYER_JUST_ACQUIRED_PAIN_KILLERS */ sub_55711())
        {
            if (TIME_SINCE_LAST_MONOLOGUE() > 1500)
            {
                 /* WRITESCRIPTLOG */ sub_365( "MF", "Playing Speech: SSTD_MFSP", 0 );
                 /* P_SPEECH_PLAY_MONOLOGUE */ sub_54285( ref g_U3540, ref uVar3 );
            }
        }
        if (NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U1678 )))
        {
            if ( /* ISTIMERDONE */ sub_1822( ref l_U1912 ))
            {
                 /* P_LNG_SPEECH_MAOLCD */ sub_56220();
            }
        }
        if (NOT l_U1921)
        {
            if ( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U1678 ))
            {
                if (TIME_SINCE_LAST_MONOLOGUE() > 1500)
                {
                    if (( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_47542( ref l_U1953, 0 )) || ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_47542( ref l_U1932, 0 )))
                    {
                         /* P_LNG_SPEECH_MVOGB */ sub_56432();
                        l_U1921 = 1;
                    }
                }
            }
            else if (l_U1912._fU16)
            {
                if (TIME_SINCE_LAST_MONOLOGUE() > 1500)
                {
                    if (( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_47542( ref l_U1953, 0 )) || ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_47542( ref l_U1932, 0 )))
                    {
                         /* P_LNG_SPEECH_MVOGB */ sub_56432();
                        l_U1921 = 1;
                    }
                }
            }
        }
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_47542( ref l_U1538, 0 ))
        {
             /* CUTSYS_CREATESTANDALONECUTSCENE */ sub_58339( ref l_U1559, "02_NC_RANDOM1_concat", 56689, 57237, 57578, 57773, 250, 0 );
            l_U1559._fU4 = 2;
        }
        if (l_U1559._fU4 != 0)
        {
             /* CUTSYS_HANDLECUTSCENE */ sub_30654( ref l_U1559 );
        }
        if ( /* F_HANDLE_POI */ sub_44369( ref l_U1787 ))
        {
            g_U1102 = 1;
             /* NIS_PRE_SETUP */ sub_31880( 1, 0, 0, 1 );
            if (NOT l_U1785)
            {
                 /* WRITESCRIPTLOG */ sub_365( "MF", "Starting Dress POI Dialogue Delay Timer", 0 );
                 /* STARTTIMER */ sub_1691( ref l_U1883 );
            }
            FOUND_EXPLORATION_ITEM( "sclb_FabsDress" );
            CAMERA_PLAY_ANIMATED( "EXPL_CAM", "EXPL_CAM_GND_25_F_CAM", 1, 7.34000000, 52.34000000, 0.26000000, 101.00000000, 0, 0 );
            l_U1786 = 1;
             /* P_TELEPORT_PLAYER */ sub_58863( 8.02124500, 51.94488000, -1.21169500, 88.23753000, -33.67590000, -7.25327200 );
        }
        if (l_U1786)
        {
            if (NOT l_U1785)
            {
                if ( /* ISTIMERDONE */ sub_1822( ref l_U1883 ))
                {
                     /* KILL_ANY_MISSION_SPEECH */ sub_56731( 0 );
                     /* KILL_SPEECH */ sub_56935( ref l_U1873, 0 );
                     /* RESET_SCRIPT_SPEECH_STRUCT */ sub_40150( ref l_U1873 );
                     /* P_SPEECH_PLAY_MONOLOGUE */ sub_54285( "SCLB_MTPFD", ref l_U1873 );
                    l_U1785 = 1;
                }
            }
            if (NOT IS_ANIMATED_CAMERA_PLAYING())
            {
                 /* NIS_POST_SETUP */ sub_32804( 1, 1 );
                g_U1102 = 0;
                l_U1786 = 0;
                 /* P_CREATE_AND_START_TIMER */ sub_59079( ref g_U3350, 25000 );
                 /* P_CREATE_AND_START_TIMER */ sub_59079( ref g_U3340, 55000 );
                 /* P_ENABLE_POI */ sub_4327( ref l_U1787, 1 );
            }
        }
        if (TIME_SINCE_LAST_MONOLOGUE() > 1000)
        {
            if (g_U1102 == 0)
            {
                 /* P_HANDLE_MISSION_FAIL_LOGIC */ sub_54402();
            }
        }
        if (g_U892 == 4)
        {
            l_U848 = 15;
             /* WRITESCRIPTLOG */ sub_365( "CR", "eCheckpointState = CP_FINISHED", 0 );
        }
        break;
        case 12:
         /* WRITESCRIPTLOG */ sub_365( "SP", "eCheckpointState = CP_HANDLE_MID_02_FAIL1", 0 );
        if (( /* F_HANDLE_MID_02_FAIL1 */ sub_59321()) == 1)
        {
            g_U3360 = 1;
        }
        break;
        case 13:
         /* WRITESCRIPTLOG */ sub_365( "SP", "eCheckpointState = CP_HANDLE_MID_02_FAIL7", 0 );
        if (( /* F_HANDLE_MID_02_FAIL7 */ sub_61213()) == 1)
        {
            g_U3360 = 1;
        }
        break;
        case 14:
         /* WRITESCRIPTLOG */ sub_365( "SP", "eCheckpointState = CP_HANDLE_MID_02_FAIL8", 0 );
        if (( /* F_HANDLE_MID_02_FAIL8 */ sub_62493()) == 1)
        {
            g_U3360 = 1;
        }
        break;
        case 15:
         /* WRITESCRIPTLOG */ sub_365( "CR", "eCheckpointState = CP_FINISHED", 0 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        l_U848 = 0;
         /* WRITESCRIPTLOG */ sub_365( "CR", "eCheckpointState = CP_IDLE", 0 );
        break;
    }
    if (l_U848 != iVar2)
    {
        l_U849 = 1;
    }
    else
    {
        l_U849 = 0;
    }
    return;
}

/* P_INIT_SCRIPT_VARIABLES */ void sub_10809()
{
     /* WRITESCRIPTLOG */ sub_365( "CR", "P_INIT_SCRIPT_VARIABLES", 0 );
    g_U3360 = 0;
    l_U1711 = 0;
    l_U1712 = 0;
    l_U1714 = 0;
    l_U1715 = 0;
    l_U1716 = 0;
    l_U1717 = 0;
    l_U1718 = 0;
    l_U1754 = 0;
    l_U1713 = 0;
    l_U1588 = 0;
    l_U1921 = 0;
    l_U1786 = 0;
    l_U1757 = 0;
     /* CREATETIMER */ sub_1543( ref l_U1767, l_U1776, 1, 0 );
     /* CREATETIMER */ sub_1543( ref l_U1883, 250, 1, 0 );
     /* RESETTIMER */ sub_2390( ref g_U3340 );
     /* RESETTIMER */ sub_2390( ref g_U3350 );
     /* RESETTIMER */ sub_2390( ref l_U1702 );
    l_U1586 = 0;
    return;
}

/* P_INIT_GAMEPLAY_STRUCTS */ void sub_11037()
{
     /* WRITESCRIPTLOG */ sub_365( "CR", "P_INIT_GAMEPLAY_STRUCTS", 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U874[0], 26.86000000, -24.82000000, 1.09000000, 0.00000000, -1689330283, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1029[0], 18.35000000, -8.65900000, 0.70000000, 225, 1068647474, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U904[0], 16.31100000, -5.39500000, 0.65148000, -158.28000000, 194950328, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U904[1], 15.24500000, -4.09500000, 0.65148000, -135.00000000, -790048821, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U904[l_U1022], 7.37435800, 31.44125000, 0.68724100, 251.54340000, 756729003, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U904[l_U1023], 14.98000000, 22.55000000, -0.45000000, 65446, -718455963, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U904[l_U1024], 10.05000000, 49.94000000, -1.00000000, 127.80430000, 636210537, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U904[l_U1025], 11.71000000, 50.71000000, -1.00000000, 200.80350000, 438052860, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U904[6], 11.23944000, 52.42245000, -1.00000000, 311.51830000, -1774410422, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U904[7], 12.93489000, 50.94887000, -1.00000000, 297.34100000, 1134956680, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U904[l_U1026], 11.74000000, 23.58000000, -0.42000000, 267.99600000, -1506536291, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1046[0], 21.82000000, 19.21000000, -0.44000000, 90.00000000, -1578892574, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1046[1], 26.67000000, 20.37000000, -0.39000000, 144.00000000, 1738291095, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1075[0], 28.25700000, 5.53800000, 0.82100000, 135.00000000, 1282246441, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1093[0], 28.65300000, 7.64200000, 0.90900000, 135.00000000, 402215138, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1093[1], 26.72300000, 7.45100000, 0.88800000, -135.00000000, 382429915, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1093[2], 28.91000000, 6.97000000, 0.94000000, 135.00000000, 788603424, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1161[0], 11.35584000, 26.68100000, 0.09968300, 135.00000000, -1997216999, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1161[1], 18.08811000, 41.03663000, -0.65995300, -25.00000000, -630948878, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1161[2], 18.82108000, 31.72095000, -0.63986300, 135.00000000, 69523236, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1161[3], 11.32768000, 25.80405000, -0.03825200, -25.00000000, 1677327236, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1161[4], 16.32753000, 40.72527000, -0.82696200, 135.00000000, -1079255482, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1161[5], 20.55524000, 24.03795000, -0.22375600, -25.00000000, -90210801, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1293[0], 14.34000000, 43.94000000, -0.66000000, 135.00000000, -889283596, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1293[1], 23.37000000, 41.87000000, -0.83000000, -25.00000000, 1277064123, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1293[2], 24.86000000, 39.56000000, -1.02000000, 135.00000000, -1695873755, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1293[3], 20.34000000, 43.08000000, -1.08000000, -25.00000000, 377356498, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1293[4], 14.20000000, 42.55000000, -0.72000000, 135.00000000, -1079255482, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1293[5], 13.72000000, 37.84000000, -0.39000000, -25.00000000, -583858812, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1293[6], 12.62000000, 44.29000000, -0.44000000, 135.00000000, 788603424, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1293[7], 21.54000000, 43.38000000, -0.97000000, -25.00000000, 997406204, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1293[8], 25.22000000, 38.41000000, -1.04000000, 135.00000000, -90210801, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1293[9], 22.85000000, 42.72000000, -1.10000000, -25.00000000, 382429915, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1447[0], 11.23000000, 31.79000000, 0.69000000, 0.00000000, -719873220, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1485[0], 14.75700000, 14.19308000, -0.52213900, 270, -1465564334, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_11148( ref l_U1485[1], 14.59900000, 15.26863000, -0.52213900, 270, -67362843, 5, 2, 0, 0, 0 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U1594, "Start_RetreatingCS", 21.37000000, -9.14000000, 0.80000000, 7.00000000, 4.00000000, 6.38000000, -0.06349340, 0.00296988, 44.89000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U1636, "start_vig_04A", 20.33000000, 0.59000000, -1.47000000, 5.15000000, 5.20000000, 8.00000000, 0.00000000, 0.00000000, -137.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U1133, "start_vig_04C", 27.31000000, 7.72000000, -1.47000000, 5.15000000, 14.56000000, 8.00000000, 0.00000000, 0.00000000, -90.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U1240, "start_vig_04D", 18.84000000, 26.71000000, -1.47000000, 10.83000000, 19.64000000, 8.00000000, 0.00000000, 0.00000000, -90.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U1261, "start_vig_04D2", 8.18000000, 31.39000000, -1.47000000, 5.00000000, 5.00000000, 8.00000000, 0.00000000, 0.00000000, 65446, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U1424, "start_vig_04E", 27.42000000, 7.72000000, -1.47000000, 5.25000000, 14.40000000, 8.00000000, 0.00000000, 0.00000000, -90.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U1461, "start_vig_04F", 27.38000000, 7.72000000, -1.47000000, 5.41000000, 16.28000000, 8.00000000, 0.00000000, 0.00000000, -90.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U1615, "unlock_vig04D_cover", 19.71000000, 38.60000000, -1.47000000, 10.00000000, 20.00000000, 8.00000000, 0.00000000, 0.00000000, -99.40000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U1657, "Start_LowerLevelCS", 20.31000000, 32.39000000, -1.77000000, 18.50000000, 28.00000000, 8.00000000, 0.00000000, 0.00000000, -1.33000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U1953, "Speech SCLB_MVOGB Upper Bar", 24.70000000, 47.82000000, -1.47000000, 3.49000000, 9.15000000, 3.00000000, 0.00000000, 0.00000000, -142.42000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U1932, "Speech SCLB_MVOGB Lower Bar", 23.41000000, 20.32000000, -1.47000000, 4.90000000, 7.12000000, 3.00000000, 0.00000000, 0.00000000, -89.65000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U1538, "02_NC_RANDOM1_concat", 9.03000000, 47.78000000, -1.64000000, 1.92000000, 2.89000000, 4.10000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U1678, "supress speech MAOLCD", 10.80000000, 44.54000000, -1.56000000, 25.70000000, 42.26000000, 3.60000000, 0.00000000, 0.00000000, -89.40000000, 1 );
     /* P_SETUP_MID_02_FAIL_STRUCTS */ sub_13911();
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U851, "Load Kitchen Script", 19.32000000, 38.90000000, -1.47000000, 5.00000000, 20.00000000, 8.00000000, 0.00000000, 0.00000000, -99.40000000, 1 );
     /* P_CREATETETHERBOX */ sub_15787( ref l_U1699, "DJ Area", 12.10000000, 31.67000000, 0.05000000, 5.00000000, 5.80000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_15787( ref l_U1700, "Upper Area", 20.25000000, 20.75000000, -1.97000000, 24.00000000, 20.00000000, 8.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_15787( ref l_U1701, "Lower Area", 20.15000000, 40.60000000, -2.03000000, 20.00000000, 21.23000000, 8.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATEPOISTRUCTCOORD */ sub_16034( ref l_U1787, 2, l_U1779, l_U1779, l_U1779, 1.50000000, 3.00000000, 1, 0 );
     /* P_SET_POI_FORCE_WALK */ sub_16780( ref l_U1787, 0 );
     /* P_SET_POI_REUSABLE */ sub_16835( ref l_U1787, 1 );
     /* P_SET_INTERACTIVE_TEXT */ sub_16900( ref l_U1787, 30, "POI_DRESS" );
     /* P_SET_POI_AVAILABLE */ sub_17110( ref l_U1787, 0 );
    return;
}

/* P_CREATEPEDSTRUCTWITHNAME */ void sub_11148(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

/* P_CREATETRIGGERBOX */ void sub_12881(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    StrCopy( ref iParam0->_fU0, uParam1, 64 );
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = {uParam2};
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 1, iParam0 + 0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* P_SETUP_MID_02_FAIL_STRUCTS */ void sub_13911()
{
     /* WRITESCRIPTLOG */ sub_365( "SP", "P_SETUP_MID_02_FAIL_STRUCTS", 0 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U356, "TRIG_FAIL_DANCE_1", 26.97000000, -65.77000000, -5.32000000, 24.62000000, 21.82000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U377, "TRIG_FAIL_DANCE_1B", 26.26000000, -54.19000000, -5.07000000, 9.00000000, 6.00000000, 4.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U398, "TRIG_FAIL_DANCE_1C", 27.15000000, -73.02000000, -5.07000000, 11.65000000, 6.81000000, 4.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U419, "TRIG_FAIL_DANCE_1D", 37.51000000, -76.03000000, -3.59000000, 4.00000000, 4.00000000, 4.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U440, "TRIG_FAIL_DANCE_2", 24.88000000, -47.96000000, -5.08000000, 20.38000000, 21.81000000, 10.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U461, "TRIG_FAIL_DANCE_2A", 34.84000000, -52.84000000, -5.08000000, 4.00000000, 4.51000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U482, "TRIG_FAIL_LOUNGE", 40.67000000, -66.68000000, -2.22000000, 14.28000000, 21.46000000, 4.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U503, "TRIG_FAIL_LOUNGE_A", 43.51000000, -52.82000000, -2.24000000, 10.00000000, 6.79000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U524, "TRIG_FAIL_PATIO", 43.08000000, -39.79000000, -0.44000000, 15.00000000, 19.30000000, 4.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U545, "TRIG_FAIL_PATIO_A", 32.55000000, -33.47000000, -0.44000000, 6.56000000, 3.71000000, 4.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U566, "TRIG_FAIL_ORBITAS_1", 18.68000000, 5.70000000, -1.94000000, 35.81000000, 47.05000000, 10.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U587, "TRIG_FAIL_ORBITAS_1A", 14.74000000, 28.10000000, -1.94000000, 29.29000000, 10.00000000, 10.00000000, 0.00000000, 0.00000000, -16.02000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U608, "TRIG_FAIL_ORBITAS_2", 22.34000000, 41.28000000, -1.94000000, 19.64000000, 20.00000000, 10.00000000, 0.00000000, 0.00000000, -16.09000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U629, "TRIG_FAIL_ORBITAS_2A", 12.80000000, 43.40000000, -1.94000000, 8.35000000, 16.52000000, 10.00000000, 0.00000000, 0.00000000, -44.41000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U650, "TRIG_FAIL_BATHROOM", 9.15000000, 52.69000000, -1.94000000, 6.52000000, 8.24000000, 10.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U671, "TRIG_FAIL_BATHROOM_A", 12.49000000, 53.09000000, -1.94000000, 5.66000000, 5.97000000, 10.00000000, 0.00000000, 0.00000000, -44.57000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U692, "TRIG_FAIL_KITCHEN_LOCKER", -0.83000000, 53.97000000, -1.94000000, 13.61000000, 8.49000000, 10.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U713, "TRIG_FAIL_KITCHEN", -9.52000000, 63.81000000, -1.94000000, 18.08000000, 11.18000000, 10.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U734, "TRIG_FAIL_KITCHEN_A", -20.47000000, 65.70000000, -1.94000000, 4.00000000, 9.51000000, 10.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U755, "TRIG_FAIL_RESTAURANT", -16.16000000, 90.72000000, -1.94000000, 42.04000000, 40.80000000, 10.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_12881( ref l_U776, "TRIG_FAIL_RESTAURANT_A", -14.35000000, 70.13000000, -1.94000000, 8.00000000, 1.00000000, 10.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    return;
}

/* P_CREATETETHERBOX */ void sub_15787(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 2, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* P_CREATEPOISTRUCTCOORD */ void sub_16034(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14)
{
     /* P_CREATEBLANKPOISTRUCT */ sub_16074( iParam0, uParam13 );
    iParam0->_fU4 = uParam1;
    iParam0->_fU100 = {uParam5};
    iParam0->_fU112 = uParam11;
    iParam0->_fU200 = {uParam8};
    iParam0->_fU212 = uParam12;
    iParam0->_fU320 = uParam14;
    iParam0->_fU20 = {uParam2};
     /* P_CREATEPOIGLINT */ sub_16467( iParam0 );
    return;
}

/* P_CREATEBLANKPOISTRUCT */ void sub_16074(int iParam0, unknown uParam1)
{
    iParam0->_fU0 = uParam1;
    iParam0->_fU4 = 0;
    iParam0->_fU8 = 0;
    iParam0->_fU12 = nil;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU52 = 1;
    iParam0->_fU56 = 1;
    iParam0->_fU60 = 0;
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = 0;
    iParam0->_fU76 = 0;
    iParam0->_fU80 = 0;
    iParam0->_fU84 = 0;
    iParam0->_fU100 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU112 = 0.00000000;
    iParam0->_fU88 = 0;
    iParam0->_fU92 = 0;
    iParam0->_fU96 = 0;
    iParam0->_fU200 = {0.00000000, 0.00000000, 0.00000000};
    iParam0->_fU212 = 0.00000000;
    iParam0->_fU300 = 0;
    iParam0->_fU304 = 1;
    iParam0->_fU308 = 0;
    iParam0->_fU324 = 1;
    iParam0->_fU328 = 0;
    iParam0->_fU340 = 0;
    iParam0->_fU336 = 0.20000000;
    return;
}

/* P_CREATEPOIGLINT */ void sub_16467(int iParam0)
{
    if (iParam0->_fU12 != nil)
    {
        if ((DOES_GLINT_EXIST( iParam0->_fU12 )) == 1)
        {
            REMOVE_GLINT( iParam0->_fU12 );
        }
    }
    iParam0->_fU12 = CREATE_GLINT( iParam0->_fU16, iParam0->_fU20 );
     /* P_INITPOIGLINT */ sub_16565( iParam0 );
    return;
}

/* P_INITPOIGLINT */ void sub_16565(int iParam0)
{
    if (iParam0->_fU0 == 1)
    {
        if (iParam0->_fU320 == 1)
        {
            if ((iParam0->_fU8 > 0) AND (iParam0->_fU4 == 0))
            {
                 /* P_ENABLEPOIGLINT */ sub_4386( iParam0, 1 );
            }
            else if ((iParam0->_fU8 < 2) AND (iParam0->_fU4 == 1))
            {
                 /* P_ENABLEPOIGLINT */ sub_4386( iParam0, 1 );
            }
            else if ((iParam0->_fU8 == 1) AND (iParam0->_fU4 == 2))
            {
                 /* P_ENABLEPOIGLINT */ sub_4386( iParam0, 1 );
            }
            else
            {
                 /* P_ENABLEPOIGLINT */ sub_4386( iParam0, 0 );
            };;;
        }
        else
        {
             /* P_ENABLEPOIGLINT */ sub_4386( iParam0, 0 );
        }
    }
    else
    {
         /* P_ENABLEPOIGLINT */ sub_4386( iParam0, 0 );
    }
    return;
}

/* P_SET_POI_FORCE_WALK */ void sub_16780(int iParam0, unknown uParam1)
{
    iParam0->_fU324 = uParam1;
    return;
}

/* P_SET_POI_REUSABLE */ void sub_16835(int iParam0, unknown uParam1)
{
    iParam0->_fU68 = uParam1;
    return;
}

/* P_SET_INTERACTIVE_TEXT */ void sub_16900(int iParam0, unknown uParam1, unknown uParam2)
{
    StrCopy( ref iParam0->_fU32, uParam2, 16 );
    iParam0->_fU48 = uParam1;
     /* P_INITINTERACTIVETEXT */ sub_16956( iParam0 );
    return;
}

/* P_INITINTERACTIVETEXT */ void sub_16956(int iParam0)
{
    if ((iParam0->_fU8 == 2) AND (iParam0->_fU0 == 1))
    {
        if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
        {
            SET_INTERACTIONTEXT_BUTTON( iParam0->_fU48 );
            SET_INTERACTIONTEXT_TEXT( iParam0 + 32 );
            SET_INTERACTIONTEXT_VISIBLE( 1 );
            SET_INTERACTIONTEXT_BUTTON_VISIBLE( 1 );
            SET_INTERACTIONTEXT_AVAILABLE( 1 );
            iParam0->_fU56 = 1;
        }
    }
    return;
}

/* P_SET_POI_AVAILABLE */ void sub_17110(int iParam0, int iParam1)
{
    if (iParam1 == 0)
    {
        iParam0->_fU60 = 1;
    }
    else
    {
        iParam0->_fU60 = 0;
    }
     /* P_UPDATEINTERACTIONTEXTAVAILABLE */ sub_4785( iParam0 );
    return;
}

/* SETUP_SCRIPTED_SPEECH */ void sub_17205(unknown uParam0)
{
    StrCopy( ref g_U157._fU0, uParam0, 16 );
     /* CLEARPEDCONVERSATIONDATA */ sub_17249();
    return;
}

/* CLEARPEDCONVERSATIONDATA */ void sub_17249()
{
    int I;

    for ( I = 0; I <= 8; I++ )
    {
        g_U157._fU16[I]._fU0 = nil;
        g_U157._fU16[I]._fU4 = 0;
        g_U157._fU92[I] = 0;
    }
    return;
}

/* P_REQUEST_ASSETS */ void sub_17499()
{
     /* WRITESCRIPTLOG */ sub_365( "SP", "P_REQUEST_ASSETS", 0 );
    if (g_U892 < 3)
    {
        if ((NOT (CUTSCENE_NAMED_IS_LOADING( "MID_04_NC_concat" ))) AND (NOT (CUTSCENE_IS_LOADED( "MID_04_NC_concat" ))))
        {
            PRE_STREAM_SEAMLESS_CUTSCENE( "MID_04_NC_concat" );
        }
         /* LOADMODEL */ sub_17662( -398091261, 0 );
    }
     /* LOADMODEL */ sub_17662( g_U2472, 0 );
     /* LOADMODEL */ sub_17662( g_U2470, 0 );
    if (g_U892 == 3)
    {
         /* LOADMODEL */ sub_17662( g_U2465, 0 );
         /* LOADMODEL */ sub_17662( g_U2461, 0 );
    }
     /* LOADMODEL */ sub_17662( g_U886, 0 );
     /* LOADMODEL */ sub_17662( -1490220040, 0 );
     /* LOADMODEL */ sub_17662( -1409914275, 0 );
     /* LOADMODEL */ sub_17662( 520427342, 0 );
     /* LOADISEQ */ sub_18013( -2013155889, 0 );
     /* LOADISEQ */ sub_18013( 1446597130, 0 );
     /* LOADISEQ */ sub_18013( -87549151, 0 );
     /* LOADISEQ */ sub_18013( -1591711785, 0 );
     /* LOADISEQ */ sub_18013( -1921859460, 0 );
     /* LOADISEQ */ sub_18013( 1134570712, 0 );
     /* LOADISEQ */ sub_18013( -1218938405, 0 );
     /* LOADISEQ */ sub_18013( 1830675819, 0 );
     /* LOADISEQ */ sub_18013( 1591920885, 0 );
     /* LOADISEQ */ sub_18013( 1396472282, 0 );
     /* LOADANIMDICT */ sub_18417( "EXPL_CAM", 0, 0 );
     /* LOADANIMDICT */ sub_18417( "LEVEL_S_CLUB_CP_03", 0, 0 );
     /* LOADWEAPON */ sub_18617( 1194438308, 0 );
     /* LOADWEAPON */ sub_18617( 406496141, 0 );
    return;
}

/* LOADMODEL */ void sub_17662(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
         /* WRITE_STRING */ sub_7915( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADISEQ */ void sub_18013(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to load does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 0)
    {
        ISEQ_REQUEST( uParam0 );
        ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
        if (iParam1 == 1)
        {
            while ((ISEQ_QUERY_STATE( uParam0, 1 )) == 1)
            {
                DISPLAYF( "[SP]### Waiting for interactive sequence to be loaded: {0} {1} ###", 2, 1281, ref uVar4, 513, uParam0 );
                WAIT( 0 );
            }
        }
    }
    return;
}

/* LOADANIMDICT */ void sub_18417(unknown uParam0, unknown uParam1, int iParam2)
{
    REQUEST_ANIM_DICT( uParam0, uParam1 );
    "[doubled result, dropped if not asigned]";
    if (iParam2 == 1)
    {
        while ((HAS_ANIM_DICT_LOADED( uParam0, uParam1 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an animation dictionary to be loaded: {} ###", 1, 1537, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADWEAPON */ void sub_18617(unknown uParam0, boolean bParam1)
{
    REQUEST_WEAPON( uParam0 );
    if (bParam1)
    {
        while ((HAS_WEAPON_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load weapon: {!f1} : {1} ###", 2, 1, 199730165, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* F_HAVE_ASSETS_LOADED */ int sub_18845()
{
    if ((HAS_ANIM_DICT_LOADED( "LEVEL_S_CLUB_CP_03", 0 )) AND ((HAS_WEAPON_LOADED( 1194438308 )) AND ((HAS_WEAPON_LOADED( 406496141 )) AND ((ISEQ_IS_LOADED( 1591920885 )) AND ((ISEQ_IS_LOADED( 1830675819 )) AND ((ISEQ_IS_LOADED( -1218938405 )) AND ((ISEQ_IS_LOADED( 1134570712 )) AND ((ISEQ_IS_LOADED( -1921859460 )) AND ((ISEQ_IS_LOADED( -1591711785 )) AND ((ISEQ_IS_LOADED( -87549151 )) AND ((ISEQ_IS_LOADED( 1446597130 )) AND ((ISEQ_IS_LOADED( -2013155889 )) AND ((HAS_MODEL_LOADED( 520427342 )) AND ((HAS_MODEL_LOADED( -1409914275 )) AND ((HAS_MODEL_LOADED( -1490220040 )) AND ((HAS_MODEL_LOADED( g_U886 )) AND ((HAS_MODEL_LOADED( g_U2470 )) AND (HAS_MODEL_LOADED( g_U2472 )))))))))))))))))))
    {
        if (g_U892 < 3)
        {
            if ((HAS_MODEL_LOADED( -398091261 )) AND (CUTSCENE_IS_LOADED( "MID_04_NC_concat" )))
            {
                return 1;
            }
        }
        else if ((HAS_MODEL_LOADED( g_U2461 )) AND (HAS_MODEL_LOADED( g_U2465 )))
        {
            return 1;
        }
    }
    return 0;
}

/* HAS_SAVEFILE_LOADED */ int sub_19398(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_365( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U0 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U1 );
             /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_5814( uParam0,  /* PLAYER_PED_ID */ sub_610() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

/* F_LNG_HANDLE_PRE_MID_04_PED_SPAWNING */ int sub_20007()
{
    if (NOT ( /* F_HANDLE_PED_ARRAY_SPAWN */ sub_20069( ref l_U872, ref l_U874, -1, 0, 1, 1, 1 )))
    {
        return 0;
    }
    return 1;
}

/* F_HANDLE_PED_ARRAY_SPAWN */ int sub_20069(unknown uParam0, unknown uParam1, int iParam2, boolean bParam3, boolean bParam4, int iParam5, unknown uParam6)
{
    int iVar9;
    int iVar10;
    int Result;

    iVar9 =  /* F_GET_NUM_SPAWNED_PED_IN_ARRAY */ sub_20110( uParam0, uParam1 );
    if (iParam2 == -1)
    {
        iVar10 = (uParam0^);
    }
    else
    {
        iVar10 = iParam2;
    }
    if (iVar9 < iVar10)
    {
        if ((uParam1^)[iVar9]._fU16 == 0)
        {
            SCRIPT_ASSERT( "Invalid Ped Struct!  No Model Defined! Aborting Ped Spawn", 0 );
             /* WRITESCRIPTLOG */ sub_365( "MF", "Invalid Ped Struct!  No Model Defined! Aborting Ped Spawn", 0 );
            PRINTSTRING( "INVALID SPAWN INDEX: " );
             /* WRITE_INT */ sub_20473( iVar9 );
            return 0;
        }
        if (NOT (DOES_PED_EXIST( (uParam0^)[iVar9] )))
        {
             /* LOADMODEL */ sub_17662( (uParam1^)[iVar9]._fU16, uParam6 );
            (uParam0^)[iVar9] =  /* CREATEPED */ sub_20568( ref (uParam1^)[iVar9] );
            if (NOT bParam4)
            {
                SET_PED_VISIBLE( (uParam0^)[iVar9], bParam4 );
                 /* WRITE_STRING */ sub_7915( "SPAWNING INVISIBLE PED!!!" );
            }
            if (iParam5 == 1)
            {
                 /* P_DEACTIVATEPED */ sub_21359( (uParam0^)[iVar9] );
                 /* WRITE_STRING */ sub_7915( "Deactivating Ped..." );
            }
        }
    }
    if (bParam3)
    {
        if (iVar9 == (iVar10 - 1))
        {
             /* WRITESCRIPTLOG */ sub_365( "MF", "F_HANDLE_PED_ARRAY_SPAWN: Returning true Once.  If you see this looping, you likely have unitialized ped model data in your pedstruct array.", 0 );
            Result = 1;
        }
        return Result;
    }
    else if (iVar9 >= iVar10)
    {
        return 1;
    }
    return 0;
}

/* F_GET_NUM_SPAWNED_PED_IN_ARRAY */ void sub_20110(unknown uParam0, unknown uParam1)
{
    int I;
    int Result;

    Result = (uParam1^);
    for ( I = 0; I < (uParam0^); I++ )
    {
        if (NOT (DOES_PED_EXIST( (uParam0^)[I] )))
        {
            if ((uParam1^)[I]._fU16 != 0)
            {
                if (I < Result)
                {
                    Result = I;
                }
            }
        }
    }
    return Result;
}

/* WRITE_INT */ void sub_20473(unknown uParam0)
{
    PRINTINT( uParam0 );
    PRINTNL();
    return;
}

/* CREATEPED */ void sub_20568(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_17662( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
     /* SETPEDDEFAULTSTATS */ sub_21059( iParam0->_fU40 );
     /* SETPEDDEFAULTTEMPLATE */ sub_21160( iParam0->_fU40 );
    return iParam0->_fU40;
}

/* SETPEDDEFAULTSTATS */ void sub_21059(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

/* SETPEDDEFAULTTEMPLATE */ void sub_21160(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

/* P_DEACTIVATEPED */ void sub_21359(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 1 );
        SET_PED_VISIBLE( uParam0, 0 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 0 );
        FREEZE_PED_POSITION( uParam0, 1 );
        SET_PED_COLLISION( uParam0, 0 );
        SET_PED_PROOFS( uParam0, 1, 1, 1, 1, 1 );
    }
    return;
}

/* F_LNG_HANDLE_DURING_MID_04_PED_SPAWNING */ int sub_21806()
{
    if (NOT ( /* F_HANDLE_PED_ARRAY_SPAWN */ sub_20069( ref l_U894, ref l_U904, -1, 0, 1, 1, 1 )))
    {
        return 0;
    }
    if (NOT ( /* F_HANDLE_PED_ARRAY_SPAWN */ sub_20069( ref l_U1027, ref l_U1029, -1, 0, 1, 1, 1 )))
    {
        return 0;
    }
    return 1;
}

/* P_LNG_SETUP_HALLWAY_CS */ void sub_21928()
{
    int I;

     /* WRITESCRIPTLOG */ sub_365( "CR", "P_LNG_SETUP_HALLWAY_CS", 0 );
     /* P_SETUP_AI_GROUP */ sub_22009( ref l_U888, 0.60000000, 0 );
    for ( I = 0; I < l_U894; I++ )
    {
        if (NOT (IS_PED_DEAD( l_U894[I] )))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U894[I], 1 );
            SET_PED_AI_TEMPLATE( l_U894[I], "AIT_NORMAL" );
            SET_PED_ALERTNESS( l_U894[I], 3 );
             /* P_QUICK_ADD_PED_TO_GROUP */ sub_22508( l_U894[I], ref l_U888 );
             /* P_PED_SET_VAULTING */ sub_22900( l_U894[I], 0, 0 );
            switch (I)
            {
                case 0:
                GIVE_WEAPON_TO_PED_HAND( l_U894[I], 406496141, 25000, 0 );
                SET_ROOM_FOR_PED_BY_NAME( l_U894[I], ref g_U2544 );
                SET_BLOCKING_OF_PED_TARGETTING( l_U894[I], 1 );
                break;
                case 1:
                GIVE_WEAPON_TO_PED_HAND( l_U894[I], 406496141, 25000, 0 );
                SET_ROOM_FOR_PED_BY_NAME( l_U894[I], ref g_U2544 );
                SET_PED_COMBAT_ATTRIBUTES( l_U894[I], 1, 0 );
                SET_BLOCKING_OF_PED_TARGETTING( l_U894[I], 1 );
                break;
                case 2:
                GIVE_WEAPON_TO_PED_HAND( l_U894[I], 1194438308, 25000, 0 );
                SET_ROOM_FOR_PED_BY_NAME( l_U894[I], "rm_clb_backroom" );
                SET_PED_COMBAT_ATTRIBUTES( l_U894[I], 1, 0 );
                break;
                case 3:
                GIVE_WEAPON_TO_PED_HAND( l_U894[I], 406496141, 25000, 0 );
                SET_ROOM_FOR_PED_BY_NAME( l_U894[I], ref g_U2536 );
                break;
                case 4:
                GIVE_WEAPON_TO_PED_HAND( l_U894[I], 406496141, 25000, 0 );
                SET_ROOM_FOR_PED_BY_NAME( l_U894[I], ref g_U2536 );
                SET_PED_FLAG_LOCK_TO_COVER( l_U894[I], 1 );
                break;
                case 5:
                GIVE_WEAPON_TO_PED_HAND( l_U894[I], 406496141, 25000, 0 );
                SET_ROOM_FOR_PED_BY_NAME( l_U894[I], ref g_U2536 );
                SET_PED_FLAG_LOCK_TO_COVER( l_U894[I], 1 );
                break;
                case 6:
                GIVE_WEAPON_TO_PED_HAND( l_U894[I], 406496141, 25000, 0 );
                SET_ROOM_FOR_PED_BY_NAME( l_U894[I], "rm_clb_bathrmlobby" );
                break;
                case 7:
                GIVE_WEAPON_TO_PED_HAND( l_U894[I], 406496141, 25000, 0 );
                SET_ROOM_FOR_PED_BY_NAME( l_U894[I], "rm_clb_bathrmlobby" );
                break;
                case 8:
                GIVE_WEAPON_TO_PED_HAND( l_U894[I], 406496141, 25000, 0 );
                SET_ROOM_FOR_PED_BY_NAME( l_U894[I], ref g_U2536 );
                SET_PED_COMBAT_ATTRIBUTES( l_U894[I], 1, 0 );
                break;
            }
        }
    }
     /* P_DEACTIVATEPEDARRAY */ sub_23701( ref l_U894 );
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_23796( ref l_U894, "pi_lng_cs_" );
    return;
}

/* P_SETUP_AI_GROUP */ void sub_22009(int iParam0, unknown uParam1, boolean bParam2)
{
    iParam0->_fU4 = uParam1;
    iParam0->_fU0 = CREATE_GROUP( 3, 1 );
    if (bParam2)
    {
        PRINTSTRING( "[MSWW]### P_SETUP_AI_GROUP TOLD TO WAIT FOR GROUP TO EXIST ###" );
        PRINTNL();
        while (NOT (DOES_GROUP_EXIST( iParam0->_fU0 )))
        {
            WAIT( 0 );
            PRINTSTRING( "[MSWW]### GROUP ###" );
            PRINTNL();
        }
        PRINTSTRING( "[MSWW]### P_SETUP_AI_GROUP created group with ID: " );
        PRINTINT( iParam0->_fU0 );
        PRINTNL();
    }
    SET_GROUP_RATIO_FIRING_AT_VISIBLE( iParam0->_fU0, iParam0->_fU4 );
    SET_GROUP_RATIO_FIRING_AT_INVISIBLE( iParam0->_fU0, iParam0->_fU4 );
    if (iParam0->_fU8)
    {
        SET_GROUP_FORMATION( iParam0->_fU0, iParam0->_fU12 );
        SET_GROUP_FORMATION_SPACING( iParam0->_fU0, iParam0->_fU16 );
        SET_GROUP_FORMATION_MAX_MOVE_SPEED( iParam0->_fU0, iParam0->_fU20 );
    }
    return;
}

/* P_QUICK_ADD_PED_TO_GROUP */ void sub_22508(unknown uParam0, int iParam1)
{
    int iVar4;
    unknown uVar5;

    if ((DOES_GROUP_EXIST( iParam1->_fU0 )) == 0)
    {
         /* WRITE_STRING */ sub_7915( "[SP]### Warning!!! Group does not exist. Creating new group specified attributes. ###" );
        if (iParam1->_fU4 > 0)
        {
             /* P_SETUP_AI_GROUP */ sub_22009( iParam1, iParam1->_fU4, 0 );
        }
        else
        {
             /* P_SETUP_AI_GROUP */ sub_22009( iParam1, 1056964608, 0 );
        }
    }
    else
    {
        PRINTSTRING( "[MSWW]### P_QUICK_ADD_PED_TO_GROUP adding ped to group with ID: " );
        PRINTINT( iParam1->_fU0 );
        PRINTNL();
    }
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        GET_GROUP_SIZE( iParam1->_fU0, ref iVar4, ref uVar5 );
        if (iVar4 == 0)
        {
            SET_PED_AS_GROUP_LEADER( uParam0, iParam1->_fU0 );
        }
        else
        {
            SET_PED_AS_GROUP_MEMBER( uParam0, iParam1->_fU0 );
        }
        SET_PED_NEVER_LEAVES_GROUP( uParam0, 1 );
    }
    return;
}

/* P_PED_SET_VAULTING */ void sub_22900(unknown uParam0, unknown uParam1, unknown uParam2)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_PATH_CAN_USE_CLIMBOVERS( uParam0, uParam1 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( uParam0, uParam2 );
    }
    return;
}

/* P_DEACTIVATEPEDARRAY */ void sub_23701(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
         /* P_DEACTIVATEPED */ sub_21359( (uParam0^)[I] );
    }
    return;
}

/* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ void sub_23796(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

/* P_LNG_SETUP_BOUNCER */ void sub_23934()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SETUP_BOUNCER - START", 0 );
     /* P_ACTIVATEPEDARRAY */ sub_24011( ref l_U1027 );
     /* P_GBL_SETUP_CIVS */ sub_24220( ref l_U1027, "pi_lng_bouncer", ref g_U2544 );
    if (NOT (IS_PED_DEAD( l_U1027[0] )))
    {
        SET_PED_PROOFS( l_U1027[0], 1, 0, 0, 0, 0 );
    }
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SETUP_BOUNCER - END", 0 );
    return;
}

/* P_ACTIVATEPEDARRAY */ void sub_24011(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
         /* P_ACTIVATEPED */ sub_24063( (uParam0^)[I] );
    }
    return;
}

/* P_ACTIVATEPED */ void sub_24063(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 0 );
        SET_PED_VISIBLE( uParam0, 1 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 1 );
        FREEZE_PED_POSITION( uParam0, 0 );
        SET_PED_COLLISION( uParam0, 1 );
        SET_PED_PROOFS( uParam0, 0, 0, 0, 0, 0 );
    }
    return;
}

/* P_GBL_SETUP_CIVS */ void sub_24220(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_23796( uParam0, uParam1 );
    for ( I = 0; I < (uParam0^); I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            SET_PED_AS_ONE_SHOT_KILL( (uParam0^)[I], 1 );
            SET_PED_STAND_GROUND_ON_PLAYER_IMPACT( (uParam0^)[I], 1 );
            SET_PED_DIES_WHEN_INJURED( (uParam0^)[I], 1 );
            SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( (uParam0^)[I], 0 );
            SET_PED_RELATIONSHIP( (uParam0^)[I], 0, 0 );
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
            {
                SET_PED_PRIMARY_LOOKAT( (uParam0^)[I],  /* PLAYER_PED_ID */ sub_610() );
            }
            SET_ROOM_FOR_PED_BY_NAME( (uParam0^)[I], uParam2 );
            if ((IS_GERMAN_VERSION() == 1) || (IS_JAPANESE_GAME() == 1))
            {
                SET_PED_CAN_BE_DAMAGED_BY_RELATIONSHIP_GROUP( (uParam0^)[I], 0, 0 );
                SET_PED_GORE_FROM_PLAYER( (uParam0^)[I], 0 );
            }
        }
    }
    return;
}

/* CUTSYS_DEFAULT_POSTCUTSCENE */ int sub_24841()
{
    return 1;
}

/* P_LNG_MID_04_REGISTER */ void sub_24888()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_MID_04_REGISTER - START", 0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
    {
        CUTSCENE_REGISTER_PED_TELEPORT(  /* PLAYER_PED_ID */ sub_610(), g_U2216[3], g_U2331[3] );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_610(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_610(), 0, 0 ), "W_PI_PT92_Aa_H", 0 );
    }
    REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "F_NC_MISC_C", -1058932863 );
    REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "F_NC_MISC_C^1", -1559429327 );
    REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "F_NC_MISC_C^2", -122539353 );
    REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "F_NC_MISC_C^3", -522008999 );
    REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "F_NC_MISC_C^4", 1677327236 );
    REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "F_NC_MISC_C^5", -351850950 );
    REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "F_NC_MISC_C^6", 1907262892 );
    REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_NC_CIVS_C", 1365359846 );
    REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_NC_CIVS_C^1", 536623463 );
    REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_NC_CIVS_C^2", -1741800805 );
    REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_NC_CIVS_C^3", -1072806887 );
    REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_NC_CIVS_C^4", -1221741293 );
    REGISTER_SCENE_PED_SEAMLESS_CUTSCENE( "M_NC_CIVS_C^5", -907706080 );
    if (NOT (IS_PED_DEAD( l_U872[0] )))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U872[0], "Alph_Club", 1 );
    }
    CUTSCENE_ENABLE_SKIP( 0 );
    CUTSCENE_REGISTER_ISEQ( -2013155889 );
    REGISTER_OBJECT_PRE_SEAMLESS_CUTSCENE( DOOR_FIND_CLOSEST( g_U3115._fU0, g_U3115._fU4 ), "p_clb_door_int_ca", 0 );
    REGISTER_OBJECT_PRE_SEAMLESS_CUTSCENE( DOOR_FIND_CLOSEST( g_U3136._fU0, g_U3136._fU4 ), "p_clb_door_int_bb", 0 );
    REGISTER_OBJECT_PRE_SEAMLESS_CUTSCENE( DOOR_FIND_CLOSEST( g_U3143._fU0, g_U3143._fU4 ), "p_clb_door_int_bb^1", 0 );
    CAMERA_POINT_AT_COORD( 18.48000000, -6.28000000, 2.00000000, 1000 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_MID_04_REGISTER - END", 0 );
    return;
}

/* P_LNG_MID_04_HANDLE */ void sub_25768()
{
    if (l_U1727._fU52)
    {
         /* LOADMODEL */ sub_17662( g_U2465, 0 );
         /* LOADMODEL */ sub_17662( g_U2461, 0 );
    }
    if (NOT l_U1754)
    {
        if ((HAS_MODEL_LOADED( g_U2461 )) AND (HAS_MODEL_LOADED( g_U2465 )))
        {
            if ( /* F_HANDLE_PED_ARRAY_SPAWN */ sub_20069( ref l_U1027, ref l_U1029, -1, 1, 1, 0, 1 ))
            {
                 /* P_LNG_SETUP_BOUNCER */ sub_23934();
                ISEQ_REGISTER_ENTITY( -2013155889, "CIV", l_U1027[0], 0 );
            }
            if ( /* F_HANDLE_PED_ARRAY_SPAWN */ sub_20069( ref l_U894, ref l_U904, -1, 1, 1, 0, 1 ))
            {
                 /* P_LNG_SETUP_HALLWAY_CS */ sub_21928();
                 /* P_ACTIVATEPED */ sub_24063( l_U894[0] );
                 /* P_ACTIVATEPED */ sub_24063( l_U894[1] );
                ISEQ_REGISTER_ENTITY( -2013155889, "CS_01", l_U894[0], 0 );
                ISEQ_REGISTER_ENTITY( -2013155889, "CS_02", l_U894[1], 0 );
            }
        }
        if (( /* F_HAS_PED_ARRAY_SPAWNED */ sub_26052( ref l_U894, 1 )) AND ( /* F_HAS_PED_ARRAY_SPAWNED */ sub_26052( ref l_U1027, 1 )))
        {
            CUTSCENE_ENABLE_SKIP( 1 );
            l_U1754 = 1;
        }
    }
    if ((GET_CUTSCENE_TIME_MS() > 6760) AND (NOT g_U1104))
    {
         /* WRITESCRIPTLOG */ sub_365( "SA", "Setting b_Global_CleanUpVIP to TRUE.", 0 );
        g_U1104 = 1;
    }
    return;
}

/* F_HAS_PED_ARRAY_SPAWNED */ void sub_26052(unknown uParam0, boolean bParam1)
{
    int I;
    int Result;

    Result = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
        if ((DOES_PED_EXIST( (uParam0^)[I] )) == 1)
        {
            Result = 1;
            if (NOT bParam1)
            {
                return 1;
            }
        }
        else
        {
            Result = 0;
        }
    }
    return Result;
}

/* F_LNG_MID_04_POST */ int sub_26285()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "F_LNG_MID_04_POST", 0 );
     /* CLEANPEDARRAY */ sub_3887( ref l_U872 );
     /* UNLOADMODEL */ sub_26360( -398091261 );
     /* P_LNG_SETUP_VIG_04_A_CIVS */ sub_26510();
     /* P_LNG_SETUP_VIG_04_B_CIVS */ sub_26683();
     /* P_LNG_SETUP_VIG_04_C_CIVS */ sub_26821();
     /* P_LNG_SETUP_VIG_04_D_CIVS */ sub_26994();
     /* P_LNG_SETUP_VIG_04_E_CIV */ sub_27167();
     /* P_LNG_SETUP_VIG_04_F_CIV */ sub_27336();
     /* P_LNG_SETUP_VIG_04_B_DEAD_CIVS */ sub_27505();
    g_U1104 = 1;
    return 1;
}

/* UNLOADMODEL */ void sub_26360(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 1)
    {
        SET_MODEL_AS_NO_LONGER_NEEDED( uParam0 );
    }
    else
    {
         /* WRITE_STRING */ sub_7915( "[SP]### ERROR! (UnloadModel) Trying to unload a model that isn't in the img! ###" );
    }
    return;
}

/* P_LNG_SETUP_VIG_04_A_CIVS */ void sub_26510()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SETUP_VIG_04_A_CIVS - START", 0 );
     /* P_GBL_SETUP_CIVS */ sub_24220( ref l_U1043, "pi_lng_VIG_04A_CIVS", ref g_U2536 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SETUP_VIG_04_A_CIVS - END", 0 );
    return;
}

/* P_LNG_SETUP_VIG_04_B_CIVS */ void sub_26683()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SETUP_VIG_04_B_CIVS - START", 0 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SETUP_VIG_04_B_CIVS - END", 0 );
    return;
}

/* P_LNG_SETUP_VIG_04_C_CIVS */ void sub_26821()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SETUP_VIG_04_C_CIVS - START", 0 );
     /* P_GBL_SETUP_CIVS */ sub_24220( ref l_U1154, "pi_lng_VIG_04C_Civs", ref g_U2536 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SETUP_VIG_04_C_CIVS - END", 0 );
    return;
}

/* P_LNG_SETUP_VIG_04_D_CIVS */ void sub_26994()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SETUP_VIG_04_D_CIVS - START", 0 );
     /* P_GBL_SETUP_CIVS */ sub_24220( ref l_U1282, "pi_lng_VIG_04D_civs", ref g_U2536 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SETUP_VIG_04_C_CIVS - END", 0 );
    return;
}

/* P_LNG_SETUP_VIG_04_E_CIV */ void sub_27167()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SETUP_VIG_04_E_CIV - START", 0 );
     /* P_GBL_SETUP_CIVS */ sub_24220( ref l_U1445, "pi_lng_VIG_04E_civ", ref g_U2536 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SETUP_VIG_04_E_CIV - END", 0 );
    return;
}

/* P_LNG_SETUP_VIG_04_F_CIV */ void sub_27336()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SETUP_VIG_04_F_CIV - START", 0 );
     /* P_GBL_SETUP_CIVS */ sub_24220( ref l_U1482, "pi_lng_VIG_04F_civ", ref g_U2536 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SETUP_VIG_04_F_CIV - END", 0 );
    return;
}

/* P_LNG_SETUP_VIG_04_B_DEAD_CIVS */ void sub_27505()
{
    int I;

     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SETUP_VIG_04_B_DEAD_CIVS - START", 0 );
     /* P_ACTIVATEPEDARRAY */ sub_24011( ref l_U1089 );
     /* MAL_FREEZEPEDARRAY */ sub_27614( ref l_U1089, 1 );
    SET_PED_COLLISION( l_U1089[0], 0 );
    SET_PED_COLLISION( l_U1089[1], 0 );
    SET_PED_COLLISION( l_U1089[2], 0 );
     /* MAL_TELEPORTPEDARRAYTOSPAWN */ sub_27806( ref l_U1089, ref l_U1093 );
    SET_PED_CORPSE_FROM_ANIM( l_U1089[0], "LEVEL_S_CLUB_CP_03", "VIG_04B_NC_DEAD_CIV1", 1.00000000, 1 );
    SET_PED_CORPSE_FROM_ANIM( l_U1089[1], "LEVEL_S_CLUB_CP_03", "VIG_04B_NC_DEAD_CIV2", 1.00000000, 1 );
    SET_PED_CORPSE_FROM_ANIM( l_U1089[2], "LEVEL_S_CLUB_CP_03", "VIG_04B_NC_DEAD_CIV3", 1.00000000, 1 );
     /* MAL_FREEZEPEDARRAY */ sub_27614( ref l_U1089, 0 );
    SET_PED_COLLISION( l_U1089[0], 1 );
    SET_PED_COLLISION( l_U1089[1], 1 );
    SET_PED_COLLISION( l_U1089[2], 1 );
    for ( I = 0; I < l_U1089; I++ )
    {
        ADD_BLOOD_POOL( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( l_U1089[I] ), 1.00000000, 4.00000000, 60.00000000 );
    }
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SETUP_VIG_04_B_DEAD_CIVS - END", 0 );
    return;
}

/* MAL_FREEZEPEDARRAY */ void sub_27614(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* MAL_FREEZEPED */ sub_27669( ref (uParam0^)[I], uParam1 );
    }
    return;
}

/* MAL_FREEZEPED */ void sub_27669(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        FREEZE_PED_POSITION( (uParam0^), uParam1 );
    }
    return;
}

/* MAL_TELEPORTPEDARRAYTOSPAWN */ void sub_27806(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* MAL_TELEPORTPED */ sub_27888( (uParam0^)[I], (uParam1^)[I]._fU0, (uParam1^)[I]._fU12 );
    }
    return;
}

/* MAL_TELEPORTPED */ void sub_27888(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

/* P_LNG_MID_04_BLEND_OUT_SETUP */ void sub_28371()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_MID_04_BLEND_OUT_SETUP - START", 0 );
     /* MAL_TELEPORTPEDARRAYTOSPAWN */ sub_27806( ref l_U1027, ref l_U1029 );
     /* MAL_TELEPORTPEDARRAYTOSPAWN */ sub_27806( ref l_U894, ref l_U904 );
    if (NOT (IS_PED_DEAD( l_U894[0] )))
    {
        SET_BLOCKING_OF_PED_TARGETTING( l_U894[0], 0 );
    }
    if (NOT (IS_PED_DEAD( l_U894[1] )))
    {
        SET_BLOCKING_OF_PED_TARGETTING( l_U894[1], 0 );
    }
    if (NOT (ISEQ_QUERY_ENTITY_STATE( -2013155889, "CS_01", 3 )))
    {
        if (NOT (IS_PED_DEAD( l_U894[0] )))
        {
            ISEQ_REGISTER_ENTITY( -2013155889, "CS_01", l_U894[0], 0 );
        }
        if (NOT (IS_PED_DEAD( l_U894[1] )))
        {
            ISEQ_REGISTER_ENTITY( -2013155889, "CS_02", l_U894[1], 0 );
        }
        if (NOT (IS_PED_DEAD( l_U1027[0] )))
        {
            ISEQ_REGISTER_ENTITY( -2013155889, "CIV", l_U1027[0], 0 );
        }
        ISEQ_START( -2013155889 );
        CAMERA_POINT_AT_COORD( 18.48000000, -6.28000000, 2.00000000, 1000 );
    }
    SET_PLAYER_FORCED_AIM_MAINTAIN_DIRECTION(  /* PLAYER_ID */ sub_648(), 1, 0 );
    CAMERA_PLAY_ANIMATED( "LEVEL_S_CLUB_CP_03", "B_OUT_MID_04_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
    SET_FORCED_AIM_INTENTION_DIRECTION( -0.68078600, 0.73247100, -0.00407400 );
    ENABLE_STATIC_EMITTER( "S_CLUB_SE_DANCE_CLUB_DJ_BOOTH_GEAR", 0 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_MID_04_BLEND_OUT_SETUP - END", 0 );
    return;
}

/* F_LNG_MID_04_BLEND_OUT_HANDLE */ int sub_28985()
{
    if (l_U1727._fU52)
    {
        if (NOT ( /* F_IMAGEFX_FADE_IN */ sub_29041()))
        {
            DO_SCREEN_FADE_IN( 100 );
        }
         /* STARTTIMER */ sub_1691( ref l_U1767 );
    }
    if (NOT (IS_PED_DEAD( l_U894[0] )))
    {
        if ((PED_GET_ACTION_INTENTION_STATUS( l_U894[0], 47 )) == 3)
        {
             /* WRITESCRIPTLOG */ sub_365( "MF", "Having CS Shoot bouncer in the head...", 0 );
            if (NOT (IS_PED_DEAD( l_U1027[0] )))
            {
                SET_PED_SHOOTS_AT_COORD( l_U894[0], "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_BONE_COORDS( l_U1027[0], 65488, 0.00000000, -0.20000000, 0.00000000 ) );
            }
            PED_FINISH_ACTION_INTENTION( l_U894[0], 47 );
        }
    }
    if ( /* ISTIMERDONE */ sub_1822( ref l_U1767 ))
    {
        SIMULATE_PLAYER_INPUT_GAIT(  /* PLAYER_ID */ sub_648(), 3, l_U1777, 0 );
    }
    if (NOT l_U1757)
    {
        if (CAMERA_ANIMATED_CURRENT_TIME() > ((CAMERA_ANIMATED_LENGTH( "LEVEL_S_CLUB_CP_03", "B_OUT_MID_04_CAM" )) - l_U1755))
        {
            CAMERA_ANIMATED_STOP( l_U1756, 1 );
             /* CREATETIMER */ sub_1543( ref l_U1758, l_U1756 + 10, 1, 0 );
             /* STARTTIMER */ sub_1691( ref l_U1758 );
            l_U1757 = 1;
        }
    }
    if ( /* F_LNG_HANDLE_POST_MID_04_PED_SPAWNING */ sub_29645())
    {
        if ( /* ISTIMERDONE */ sub_1822( ref l_U1758 ))
        {
            return 1;
        }
    }
    return 0;
}

/* F_IMAGEFX_FADE_IN */ int sub_29041()
{
    if (l_U34)
    {
         /* WRITESCRIPTLOG */ sub_365( "CO", "F_IMAGEFX_FADE_IN: IMAGEFX START", 0 );
        START_PANEL_WIPE( 0, 6 );
        PLAY_IMAGEFX( "BULLETCAM_IMPACT", 3, 1 );
        PLAY_IMAGEFX( "BLACK_FADE_UP_FAST_01", 3, 1 );
        DO_SCREEN_FADE_IN( 0 );
        l_U34 = 0;
        return 1;
        break;
    }
     /* WRITESCRIPTLOG */ sub_365( "CO", "F_IMAGEFX_FADE_IN: NORMAL START", 0 );
    return 0;
}

/* F_LNG_HANDLE_POST_MID_04_PED_SPAWNING */ int sub_29645()
{
    if (NOT ( /* F_HANDLE_PED_ARRAY_SPAWN */ sub_20069( ref l_U1043, ref l_U1046, -1, 0, 1, 1, 1 )))
    {
        return 0;
    }
    if (NOT ( /* F_HANDLE_PED_ARRAY_SPAWN */ sub_20069( ref l_U1154, ref l_U1161, -1, 0, 1, 1, 1 )))
    {
        return 0;
    }
    if (NOT ( /* F_HANDLE_PED_ARRAY_SPAWN */ sub_20069( ref l_U1282, ref l_U1293, -1, 0, 1, 1, 1 )))
    {
        return 0;
    }
    if (NOT ( /* F_HANDLE_PED_ARRAY_SPAWN */ sub_20069( ref l_U1445, ref l_U1447, -1, 0, 1, 1, 1 )))
    {
        return 0;
    }
    if (NOT ( /* F_HANDLE_PED_ARRAY_SPAWN */ sub_20069( ref l_U1482, ref l_U1485, -1, 0, 1, 1, 1 )))
    {
        return 0;
    }
    if (NOT ( /* F_HANDLE_PED_ARRAY_SPAWN */ sub_20069( ref l_U1089, ref l_U1093, -1, 0, 1, 1, 1 )))
    {
        return 0;
    }
    return 1;
}

/* CUTSYS_CREATECUTSCENEWITHBLENDOUT */ void sub_29906(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
     /* WRITESCRIPTLOG */ sub_365( "MSWW", "CutSys_CreateCutsceneWithBlendOut", "###" );
    return  /* CUTSYS_PRIVATE_CREATECUTSCENE */ sub_30126( uParam0, uParam1, uParam2, uParam3, uParam4, uParam5, uParam9, 1, uParam6, uParam7, 0, 30027, 30075, uParam8 );
}

/* CUTSYS_DEFAULT_PREPAREBLENDIN */ void sub_30027()
{
    return;
}

/* CUTSYS_DEFAULT_HANDLEBLENDIN */ int sub_30075()
{
    return 1;
}

/* CUTSYS_PRIVATE_CREATECUTSCENE */ void sub_30126(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13)
{
    iParam0->_fU0 = uParam1;
    iParam0->_fU8 = uParam2;
    iParam0->_fU12 = uParam3;
    iParam0->_fU16 = uParam4;
    iParam0->_fU20 = uParam5;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU32 = uParam8;
    iParam0->_fU36 = uParam9;
    iParam0->_fU40 = uParam10;
    iParam0->_fU44 = uParam11;
    iParam0->_fU48 = uParam12;
    iParam0->_fU52 = 1;
    iParam0->_fU56 = uParam13;
    iParam0->_fU60 = 1;
    iParam0->_fU64 = 1;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = 0;
    iParam0->_fU76 = "Pants";
    iParam0->_fU80 = "Pants";
    iParam0->_fU84 = {0, 0, 0};
    iParam0->_fU100 = 1;
    iParam0->_fU104 = 1;
    return (iParam0^);
}

/* CUTSYS_SETCUTSCENELOADINTERIORONSKIP */ void sub_30436(int iParam0, unknown uParam1, unknown uParam2)
{
    iParam0->_fU68 = 1;
    iParam0->_fU72 = 1;
    iParam0->_fU76 = uParam1;
    iParam0->_fU80 = uParam2;
    iParam0->_fU24 = 1;
    return;
}

/* CUTSYS_HANDLECUTSCENE */ void sub_30654(int iParam0)
{
    int iVar3;
    int Result;
    unknown uVar5;

    iVar3 = iParam0->_fU4;
    Result = 0;
    switch (iParam0->_fU4)
    {
        case 0: break;
        case 1:
        if (IS_ARCADE_MODE_ACTIVE())
        {
             /* WRITESCRIPTLOG */ sub_365( "AT", "ARCADE MODE ACTIVE. SKIPPING BINK STATE.", "###" );
            iParam0->_fU4 = 2;
        }
        else if (iParam0->_fU52)
        {
             /* WRITESCRIPTLOG */ sub_365( "AT", "Setting CUTSCENE_SET_WAIT_FOR_MOVIE.", "###" );
            CUTSCENE_SET_WAIT_FOR_MOVIE( 9 );
            SET_TRANSITION_MOVIE_SKIPPABLE( 0 );
            iParam0->_fU96 = 0;
        }
        if (NOT iParam0->_fU96)
        {
            if (GET_NUMBER_OF_STREAMING_REQUESTS() == 0)
            {
                if (IS_SCREEN_FADED_OUT())
                {
                    DO_SCREEN_FADE_IN( 0 );
                }
                 /* WRITESCRIPTLOG */ sub_365( "AT", "Streaming requests complete! Cutscene can be skipped!", "###" );
                SET_TRANSITION_MOVIE_SKIPPABLE( 1 );
                iParam0->_fU96 = 1;
                break;
                iParam0->_fU12;
                break;
            }
        }
        if ((NOT IS_TRANSITION_MOVIE_PLAYING()) || (NOT CUTSCENE_IS_WAITING_FOR_MOVIE()))
        {
             /* WRITESCRIPTLOG */ sub_365( "AT", "Bink is complete! Playing cutscene!", "###" );
            iParam0->_fU4 = 5;
        }
        break;
        case 2:
        if (NOT HAS_CUTSCENE_LOADED())
        {
             /* WRITESCRIPTLOG */ sub_365( "MSWW", "CutSys reports cutscene not already loaded.", "###" );
        }
        else if ((NOT (CUTSCENE_IS_LOADED( iParam0->_fU0 ))) AND (HAS_CUTSCENE_LOADED()))
        {
             /* WRITESCRIPTLOG */ sub_365( "MSWW", "CutSys reports wrong cutscene is loaded.", "###" );
            CLEAR_NAMED_CUTSCENE( "ThisStringDoesNothing" );
            break;
        }
        if (CUTSCENE_IS_LOADED( iParam0->_fU0 ))
        {
            iParam0->_fU4 = 4;
        }
        else if (NOT CUTSCENE_IS_LOADING())
        {
             /* LOADSEAMLESSCUTSCENE */ sub_31456( iParam0->_fU0, 0 );
             /* WRITESCRIPTLOG */ sub_365( "MSWW", "CutSys trying to load cutscene.", "###" );
        }
        break;
        case 4:
        if (iParam0->_fU8)
        {
             /* NIS_PRE_SETUP */ sub_31880( iParam0->_fU60, 0, 0, iParam0->_fU104 );
            if (iParam0->_fU40)
            {
                iParam0->_fU4 = 3;
                break;
                iParam0->_fU44;
                break;
            }
            else
            {
                iParam0->_fU4 = 5;
                break;
                iParam0->_fU12;
                break;
            }
        }
        break;
        case 3:
        if (iParam0->_fU48)
        {
            iParam0->_fU4 = 5;
            break;
            iParam0->_fU12;
            break;
        }
        break;
        case 5:
         /* NIS_PRE_SETUP */ sub_31880( 1, 0, 0, iParam0->_fU104 );
        if (NOT iParam0->_fU100)
        {
            CUTSCENE_ENABLE_SKIP( 0 );
        }
         /* WRITESCRIPTLOG */ sub_365( "MSWW", "CUTSCENE SYSTEM STARTING CUTSCENE!", "###" );
        START_SEAMLESS_CUTSCENE();
        if (iParam0->_fU24)
        {
            CUTSCENE_DISABLE_FADE_IN_GAME_AT_END( 1 );
        }
        iParam0->_fU4 = 6;
        break;
        case 6:
        if (iParam0->_fU52)
        {
            DO_SCREEN_FADE_IN( iParam0->_fU56 );
        }
        if (HAS_CUTSCENE_FINISHED())
        {
            if (iParam0->_fU68)
            {
                if (WAS_CUTSCENE_SKIPPED())
                {
                    if (iParam0->_fU72)
                    {
                        uVar5 = GET_INTERIOR_FROM_NAME( iParam0->_fU76, 0 );
                        SET_INTERIOR_ACTIVE( uVar5, 1, 0 );
                        LOAD_SCENE_FOR_ROOM_BY_KEY( uVar5, GET_HASH_KEY( iParam0->_fU80 ) );
                    }
                    else
                    {
                        LOAD_SCENE( iParam0->_fU84 );
                    }
                }
            }
            if (iParam0->_fU64)
            {
                 /* P_SET_PLAYER_WEAPONS_VISIBLE */ sub_32424( 1 );
            }
            if (iParam0->_fU28)
            {
                iParam0->_fU4 = 8;
                break;
                iParam0->_fU32;
                break;
            }
            else
            {
                iParam0->_fU4 = 9;
            }
        }
        break;
        break;
        iParam0->_fU16;
        break;
        case 7:
         /* NIS_PRE_SETUP */ sub_31880( 1, 0, 0, iParam0->_fU104 );
        iParam0->_fU4 = 8;
        break;
        break;
        iParam0->_fU32;
        break;
        case 8:
        if (iParam0->_fU36)
        {
            iParam0->_fU4 = 9;
        }
        break;
        case 9:
        if (iParam0->_fU20)
        {
             /* NIS_POST_SETUP */ sub_32804( 1, 1 );
            iParam0->_fU4 = 0;
            Result = 1;
        }
        break;
        case 10:
         /* NIS_POST_SETUP */ sub_32804( 1, 1 );
        iParam0->_fU4 = 0;
        Result = 1;
        break;
    }
    if (iParam0->_fU4 != iVar3)
    {
        iParam0->_fU52 = 1;
    }
    else
    {
        iParam0->_fU52 = 0;
    }
    return Result;
}

/* LOADSEAMLESSCUTSCENE */ void sub_31456(unknown uParam0, int iParam1)
{
    if (HAS_CUTSCENE_LOADED())
    {
        if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
        {
            SCRIPT_ASSERT( "Another cutscene is already loaded.  You can only load one cutscene into memory.  Your current cutscene will not load into memory.", 0 );
        }
    }
    if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
    {
        PRE_STREAM_SEAMLESS_CUTSCENE( uParam0 );
        if (iParam1 == 1)
        {
            while ((CUTSCENE_IS_LOADED( uParam0 )) == 0)
            {
                DISPLAYF( "[SP]### Waiting for seamless cutscene to load: {} ###", 1, 1537, uParam0 );
                WAIT( 0 );
            }
        }
    }
    return;
}

/* NIS_PRE_SETUP */ void sub_31880(int iParam0, int iParam1, unknown uParam2, boolean bParam3)
{
    END_POSTFX_BLENDER( 12, 0 );
    if (bParam3)
    {
        STOP_ALL_IMAGEFX( 0 );
    }
    SET_WIDESCREEN_BORDERS( 1, 500 );
    DISPLAY_HUD( 0 );
    if (iParam0 == 1)
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
        {
            SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_648(), 0, uParam2 );
            SET_PED_DUCKING(  /* PLAYER_PED_ID */ sub_610(), 0 );
            if (iParam1 == 1)
            {
                CLEAR_PED_TASKS_IMMEDIATELY(  /* PLAYER_PED_ID */ sub_610() );
            }
            SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_610(), 1 );
        }
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    return;
}

/* P_SET_PLAYER_WEAPONS_VISIBLE */ void sub_32424(unknown uParam0)
{
    unknown uVar3;

    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
    {
        uVar3 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_610(), 0, 0 );
        if (GET_DOES_WEAPON_EXIST( uVar3 ))
        {
            SET_WEAPON_VISIBLE( uVar3, uParam0 );
        }
        uVar3 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_610(), 1, 0 );
        if (GET_DOES_WEAPON_EXIST( uVar3 ))
        {
            SET_WEAPON_VISIBLE( uVar3, uParam0 );
        }
        uVar3 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_610(), 0 );
        if (GET_DOES_WEAPON_EXIST( uVar3 ))
        {
            SET_WEAPON_VISIBLE( uVar3, uParam0 );
        }
        uVar3 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_610(), 1 );
        if (GET_DOES_WEAPON_EXIST( uVar3 ))
        {
            SET_WEAPON_VISIBLE( uVar3, uParam0 );
        }
        uVar3 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_610(), 2 );
        if (GET_DOES_WEAPON_EXIST( uVar3 ))
        {
            SET_WEAPON_VISIBLE( uVar3, uParam0 );
        }
    }
    return;
}

/* NIS_POST_SETUP */ void sub_32804(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_648(), 1, 0 );
        SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_610(), 0 );
        if (bParam0)
        {
             /* P_MAX_RELOAD_WEAPONS */ sub_32902();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

/* P_MAX_RELOAD_WEAPONS */ void sub_32902()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_610(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_610(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP(  /* PLAYER_PED_ID */ sub_610(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP(  /* PLAYER_PED_ID */ sub_610(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

/* P_CREATE_PLACEMENTS */ void sub_33430()
{
     /* WRITESCRIPTLOG */ sub_365( "CR", "P_CREATE_PLACEMENTS start", 0 );
    l_U1589[0] =  /* CREATEPLACEMENT */ sub_33545( -4072149, 19.40000000, 20.10000000, -0.08000000, 0.00000000, 0.00000000, 4.70000000, 0, 1, 1, 90.00000000 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1589[0], "rm_clb_secondclub" );
    l_U1589[1] =  /* CREATEPLACEMENT */ sub_33545( -4072149, 12.20000000, 30.22500000, 1.69000000, 0.00000000, 0.00000000, 0.00000000, 0, 1, 0, 90.00000000 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1589[1], "rm_clb_secondclub" );
    l_U1589[2] =  /* CREATEPLACEMENT */ sub_33545( -4072149, 28.25000000, 47.37500000, -0.35000000, 0.00000000, 0.00000000, 0.75000000, 0, 1, 1, 90.00000000 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1589[2], "rm_clb_secondclub" );
    l_U1589[3] =  /* CREATEPLACEMENT */ sub_33545( -4072149, 28.65000000, 47.40000000, -0.35000000, 0.00000000, 0.00000000, 0.75000000, 0, 1, 1, 90.00000000 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1589[3], "rm_clb_secondclub" );
     /* P_CREATE_S_CLB_GG_38_02 */ sub_34033();
    l_U1778 =  /* CREATEOBJECTNOOFFSET */ sub_34875( -1490220040, l_U1779, l_U1782, 0, 1, 0 );
    if (DOES_OBJECT_EXIST( l_U1778 ))
    {
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1778, ref g_U2568 );
        FREEZE_OBJECT_POSITION( l_U1778, 1 );
    }
     /* WRITESCRIPTLOG */ sub_365( "CR", "P_CREATE_PLACEMENTS end", 0 );
    return;
}

/* CREATEPLACEMENT */ void sub_33545(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, int iParam8, unknown uParam9, unknown uParam10)
{
    unknown Result;

    Result = CREATE_PLACEMENT_ROTATE( uParam0, uParam1, uParam4, uParam7, 0, uParam9, uParam10 );
    if (iParam8 == 1)
    {
        while ((DOES_PLACEMENT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for a placement to exist: {} ###", 1, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return Result;
}

/* P_CREATE_S_CLB_GG_38_02 */ void sub_34033()
{
     /* WRITESCRIPTLOG */ sub_365( "CO", "P_CREATE_S_CLB_GG_38_02", 0 );
     /* P_CREATECOLLECTIBLESTRUCT */ sub_34176( ref g_U795, g_U886, 2068951281, -1048610577, 11.63000000, 30.92000000, 0.90000000, 1.50000000, 0.00000000, g_U776, "GtaMILO_clb_Int_02" );
     /* P_CREATECOLLECTIBLE */ sub_34333( ref g_U795 );
    return;
}

/* P_CREATECOLLECTIBLESTRUCT */ void sub_34176(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    if (NOT IS_ARCADE_MODE_ACTIVE())
    {
        iParam0->_fU4 = uParam1;
        iParam0->_fU8 = uParam2;
        iParam0->_fU12 = uParam3;
        iParam0->_fU16 = {uParam4};
        iParam0->_fU28 = {uParam7};
        StrCopy( ref iParam0->_fU40, uParam10, 32 );
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_365( "CO", "NO GOLDEN GUNS FOR ARCADE", 0 );
    }
    return;
}

/* P_CREATECOLLECTIBLE */ void sub_34333(int iParam0)
{
     /* WRITESCRIPTLOG */ sub_365( "CO", "P_CreateCollectible", 0 );
    if (NOT IS_ARCADE_MODE_ACTIVE())
    {
        if (( /* F_HAS_COLLECTIBLE_BEEN_COLLECTED */ sub_34416( iParam0->_fU12 )) == 1)
        {
             /* WRITESCRIPTLOG */ sub_365( "CO", "HAS BEEN COLLECTED.", 0 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_365( "CO", "has never been collected.", 0 );
        }
        if (( /* F_HAS_COLLECTIBLE_BEEN_COLLECTED */ sub_34416( iParam0->_fU12 )) == 0)
        {
             /* CLEANPLACEMENT */ sub_4172( iParam0->_fU0 );
            iParam0->_fU0 =  /* CREATEPLACEMENT */ sub_33545( iParam0->_fU8, iParam0->_fU16, iParam0->_fU28, 1, 0, 0, 1119092736 );
            if (NOT (IS_STRING_NULL( iParam0 + 40 )))
            {
                if ((DOES_PLACEMENT_EXIST( iParam0->_fU0 )) == 1)
                {
                     /* WRITESCRIPTLOG */ sub_365( "CO", "Added collectible to interior", 0 );
                    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( iParam0->_fU0, iParam0 + 40 );
                }
            }
        }
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_365( "CO", "NO GOLDEN GUNS FOR ARCADE", 0 );
    }
    return;
}

/* F_HAS_COLLECTIBLE_BEEN_COLLECTED */ int sub_34416(unknown uParam0)
{
    unknown uVar3;
    float fVar4;

    if (IS_COLLECTABLE_ENABLED() == 0)
    {
        return 1;
    }
    uVar3 = uParam0;
    fVar4 = STAT_HASH_GET_FLOAT( uVar3 );
    if (ARE_SP_STATS_LOADED() == 1)
    {
        if ((STAT_HASH_EXISTS( uVar3 )) == 1)
        {
            if (fVar4 > 0.00000000)
            {
                return 1;
            }
        }
    }
    return 0;
}

/* CREATEOBJECTNOOFFSET */ void sub_34875(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, boolean bParam7, int iParam8, unknown uParam9)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a object with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_17662( uParam0, 1 );
    }
    Result = CREATE_OBJECT_NO_OFFSET( uParam0, uParam1, NOT bParam7, uParam9 );
    if (iParam8 == 1)
    {
        while ((DOES_OBJECT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an object to exist: {!f1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    if ((DOES_OBJECT_EXIST( Result )) == 1)
    {
        SET_OBJECT_ROTATION( Result, uParam4 );
    }
    return Result;
}

/* P_LNG_START_VIG_04_B_CIVS */ void sub_35282()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_START_VIG_04_B_CIVS - START", 0 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_START_VIG_04_B_CIVS - END", 0 );
    return;
}

/* P_SAVE_PLAYER_DATA_CHECKPOINT */ void sub_35488(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

     /* WRITESCRIPTLOG */ sub_365( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
         /* WRITESCRIPTLOG */ sub_365( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
         /* START_NEW_LEVEL_CONTEXT */ sub_9080( iParam1 );
         /* CLOSE_OLD_LEVEL_CONTEXT */ sub_35779( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_36256( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_36256( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_36516( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_36256( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_36516( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_36516( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_36256( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_36516( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_36516( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_36516( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_36256( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_36516( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_36516( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_36516( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_36516( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
             /* P_PRINT_CHECKPOINT_DATA */ sub_38096( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U1, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
     /* WRITESCRIPTLOG */ sub_365( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

/* CLOSE_OLD_LEVEL_CONTEXT */ void sub_35779(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_6095( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
         /* WRITESCRIPTLOG */ sub_365( "TEH", "Ending context", 0 );
         /* WRITESCRIPTLOG */ sub_365( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

/* P_SAVE_WEAPON_ATTACHMENTS */ void sub_36256(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

/* F_WEAPONS_SAME_AMMO */ void sub_36516(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

/* P_PRINT_CHECKPOINT_DATA */ void sub_38096(int iParam0)
{
     /* WRITE_STRING */ sub_7915( "CHECKPOINT DATA" );
    PRINTSTRING( "---Position: " );
     /* WRITE_VECTOR */ sub_38184( iParam0->_fU4 );
    PRINTSTRING( "---Heading: " );
     /* WRITE_FLOAT */ sub_38261( iParam0->_fU16 );
    PRINTSTRING( "---fRelativeGameCamHeading: " );
     /* WRITE_FLOAT */ sub_38261( iParam0->_fU20 );
    PRINTSTRING( "---fRelativeGameCamPitch: " );
     /* WRITE_FLOAT */ sub_38261( iParam0->_fU24 );
    PRINTSTRING( "---nHealth: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU28 );
    PRINTSTRING( "---wtRightHolster: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU56 );
    PRINTSTRING( "---wtLeftHolster: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU60 );
    PRINTSTRING( "---wtRifleHolster: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU64 );
    PRINTSTRING( "---wtRightHand: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU68 );
    PRINTSTRING( "---wtLeftHand: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU72 );
    PRINTSTRING( "---nWeaponRightHolsterAmmo: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU76 );
    PRINTSTRING( "---nWeaponLeftHolsterAmmo: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU80 );
    PRINTSTRING( "---nWeaponRifleHolsterAmmo: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU84 );
    PRINTSTRING( "---nWeaponRightHandAmmo: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU88 );
    PRINTSTRING( "---nWeaponLeftHandAmmo: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU92 );
    PRINTSTRING( "---fAdrenaline: " );
     /* WRITE_FLOAT */ sub_38261( iParam0->_fU32 );
    PRINTSTRING( "---nPayneKillers: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU36 );
    PRINTSTRING( "---nHour: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU40 );
    PRINTSTRING( "---nMinute: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU44 );
    PRINTSTRING( "---fSweatAmount: " );
     /* WRITE_FLOAT */ sub_38261( iParam0->_fU136 );
    PRINTSTRING( "---bTimeFrozen: " );
     /* WRITE_BOOL */ sub_39090( iParam0->_fU140 );
    PRINTSTRING( "---checkpointIndex: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU52 );
     /* WRITE_STRING */ sub_7915( "---nRightHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU96 );
     /* WRITE_STRING */ sub_7915( "---nRightHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU100 );
     /* WRITE_STRING */ sub_7915( "---nLeftHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU104 );
     /* WRITE_STRING */ sub_7915( "---nLeftHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU108 );
     /* WRITE_STRING */ sub_7915( "---nRifleHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU112 );
     /* WRITE_STRING */ sub_7915( "---nRifleHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU116 );
     /* WRITE_STRING */ sub_7915( "---nRightHandAttachmentEnabled: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU120 );
     /* WRITE_STRING */ sub_7915( "---nRightHandAttachmentToggled: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU124 );
     /* WRITE_STRING */ sub_7915( "---nLeftHandAttachmentEnabled: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU128 );
     /* WRITE_STRING */ sub_7915( "---nLeftHandAttachmentToggled: " );
     /* WRITE_INT */ sub_20473( iParam0->_fU132 );
    PRINTSTRING( "[CHECKPOINT DATA SIZE]: " );
     /* WRITE_INT */ sub_20473( l_U1 );
    PRINTSTRING( "[CHECKPOINT DATA REF SIZE]: " );
     /* WRITE_INT */ sub_20473( 144 );
    return;
}

/* WRITE_VECTOR */ void sub_38184(unknown uParam0, unknown uParam1, unknown uParam2)
{
    PRINTVECTOR( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_FLOAT */ void sub_38261(unknown uParam0)
{
    PRINTFLOAT( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_BOOL */ void sub_39090(boolean bParam0)
{
    if (bParam0)
    {
        PRINTSTRING( "TRUE" );
    }
    else
    {
        PRINTSTRING( "FALSE" );
    }
    PRINTNL();
    return;
}

/* P_LNG_SPEECH_MRSB */ void sub_40077()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SPEECH_MRSB - START", 0 );
     /* RESET_SCRIPT_SPEECH_STRUCT */ sub_40150( ref l_U1892 );
     /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_40261( 0,  /* PLAYER_PED_ID */ sub_610(), "MAX", ref l_U1892, 2, 0 );
     /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_40261( 1, l_U1027[0], "MAX", ref l_U1892, 2, 0 );
     /* PLAY_SINGLE_SPEECH */ sub_40531( "SCLB_MRSB", ref l_U1892, 8, 1 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SPEECH_MRSB - END", 0 );
    return;
}

/* RESET_SCRIPT_SPEECH_STRUCT */ void sub_40150(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

/* ADD_PED_FOR_SCRIPT_SPEECH */ void sub_40261(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

/* PLAY_SINGLE_SPEECH */ void sub_40531(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return  /* PLAY_SINGLE_SPEECH_FROM_BLOCK */ sub_40576( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

/* PLAY_SINGLE_SPEECH_FROM_BLOCK */ void sub_40576(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return  /* PLAYSPEECHMAIN */ sub_40663( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

/* PLAYSPEECHMAIN */ int sub_40663(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT ( /* CANTHISSPEECHBEPLAYED */ sub_40715( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
     /* COPYHIDDENSPEECHSTUCT */ sub_41233( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

/* CANTHISSPEECHBEPLAYED */ int sub_40715(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

/* COPYHIDDENSPEECHSTUCT */ void sub_41233(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

/* P_LNG_CREATE_ANDERS_DOOR */ void sub_41474()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_CREATE_ANDERS_DOOR - start", 0 );
    l_U1587 =  /* CREATEOBJECTNOOFFSET */ sub_34875( 520427342, g_U3171._fU4, g_U3171._fU16, 0, 0, 0 );
    if (DOES_OBJECT_EXIST( l_U1587 ))
    {
        FREEZE_OBJECT_POSITION( l_U1587, 1 );
        ADD_OBJECT_TO_INTERIOR_ROOM_BY_NAME( l_U1587, ref g_U2568 );
    }
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_CREATE_ANDERS_DOOR - end", 0 );
    return;
}

/* P_LNG_CREATE_BODYGUARD_BODY */ void sub_41785()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_CREATE_BODYGUARD_BODY - START", 0 );
    if (NOT (IS_PED_DEAD( l_U1027[0] )))
    {
        SET_PED_CORPSE_FROM_ANIM( l_U1027[0], "LEVEL_S_CLUB_CP_03", "b_out_mid_04_civ", 1.00000000, 0 );
    }
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_CREATE_BODYGUARD_BODY - END", 0 );
    return;
}

/* P_START_GAMEPLAY */ void sub_42011()
{
     /* WRITESCRIPTLOG */ sub_365( "CR", "P_START_GAMEPLAY - Start", 0 );
     /* P_STARTING_CS_ENGAGE */ sub_42078();
     /* P_SETDOORLOCKED */ sub_42708( ref g_U3136, 1 );
     /* P_SETDOORLOCKED */ sub_42708( ref g_U3143, 1 );
     /* P_SETDOORLOCKED */ sub_42708( ref g_U3150, 1 );
     /* P_SETDOORLOCKED */ sub_42708( ref g_U3157, 1 );
     /* P_SETDOORLOCKED */ sub_42708( ref g_U3115, 1 );
     /* WRITESCRIPTLOG */ sub_365( "CR", "P_START_GAMEPLAY - End", 0 );
    return;
}

/* P_STARTING_CS_ENGAGE */ void sub_42078()
{
    unknown uVar2;
    unknown uVar3;

     /* WRITESCRIPTLOG */ sub_365( "CR", "P_STARTING_CS_ENGAGE - Start", 0 );
    if ((NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() ))) AND (NOT (IS_PED_DEAD( l_U894[0] ))))
    {
        SET_PED_FLAG_LOCK_TO_COVER( l_U894[0], 0 );
        REGISTER_TARGET( l_U894[0],  /* PLAYER_PED_ID */ sub_610() );
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_ATTACK_MOVE_WHILE_AIMING_AT_PED( 0, 18.61000000, -5.57000000, 0.70000000,  /* PLAYER_PED_ID */ sub_610(), 1, 1.00000000, -1.00000000, -1082130432, 3 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_610() );
        CLOSE_SEQUENCE_TASK( uVar2 );
        TASK_PERFORM_SEQUENCE( l_U894[0], uVar2 );
        CLEAR_SEQUENCE_TASK( uVar2 );
    }
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
    {
        OPEN_SEQUENCE_TASK( ref uVar3 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( 0, 17.81494000, -4.62247100, 0.79402200, 3, 20000, 1048576000, 0, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_610() );
        CLOSE_SEQUENCE_TASK( uVar3 );
    }
    if (NOT (IS_PED_DEAD( l_U894[1] )))
    {
        REGISTER_TARGET( l_U894[1],  /* PLAYER_PED_ID */ sub_610() );
        SET_LOCKED_TARGET( l_U894[1],  /* PLAYER_PED_ID */ sub_610() );
        SET_PED_AS_ONE_SHOT_KILL( l_U894[1], 1 );
        CLEAR_PED_TASKS( l_U894[1] );
         /* TELEPORTPED */ sub_42558( l_U894[1], 21.71000000, 4.20000000, 0.65000000, -16.00000000 );
        TASK_PERFORM_SEQUENCE( l_U894[1], uVar3 );
        CLEAR_SEQUENCE_TASK( uVar3 );
    }
     /* WRITESCRIPTLOG */ sub_365( "CR", "P_STARTING_CS_ENGAGE - End", 0 );
    return;
}

/* TELEPORTPED */ void sub_42558(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

/* P_SETDOORLOCKED */ void sub_42708(int iParam0, int iParam1)
{
    int iVar4;
    float fVar5;

    if (( /* F_DOESDOOREXIST */ sub_42738( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_42822( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
    }
    else
    {
        iVar4 = 0;
        fVar5 = 0.00000000;
        GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref iVar4, ref fVar5 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar5 );
    }
    return;
}

/* F_DOESDOOREXIST */ int sub_42738(int iParam0)
{
    int iVar3;

    iVar3 = DOES_OBJECT_OF_TYPE_EXIST_AT_COORDS( iParam0->_fU4, 1.00000000, iParam0->_fU0 );
    if (iVar3 == 1)
    {
        return 1;
    }
    return 0;
}

/* P_PRINTDOORNOTEXIST */ void sub_42822(unknown uParam0)
{
    (uParam0^) = {(uParam0^)};
    return;
}

/* P_OPENDOOR */ void sub_43198(int iParam0, int iParam1, int iParam2, unknown uParam3)
{
    float fVar6;

    if (( /* F_DOESDOOREXIST */ sub_42738( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_42822( iParam0 );
    }
    fVar6 = 0.00000000;
    if (iParam1 == 1)
    {
        fVar6 = uParam3;
    }
    else
    {
        fVar6 = -uParam3;
    }
    if (iParam2 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, fVar6 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    return;
}

/* P_PED_ARRAY_Z_SAFETY_CHECK */ void sub_43374(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
         /* P_PED_Z_SAFETY_CHECK */ sub_43440( (uParam0^)[I], uParam1, uParam2, uParam3 );
    }
    return;
}

/* P_PED_Z_SAFETY_CHECK */ void sub_43440(unknown uParam0, float fParam1, int iParam2, boolean bParam3)
{
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;

    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        uVar6 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        if (uVar6._fU8 < fParam1)
        {
            if (iParam2 == 1)
            {
                SET_PED_HEALTH( uParam0, 0, 0 );
            }
            if (bParam3)
            {
                 /* CLEANPED */ sub_3937( uParam0 );
            }
        }
    }
    return;
}

/* P_HANDLE_ENEMY_BULLET_CAM */ void sub_43589()
{
    if (( /* F_GET_NUM_LIVING_COMBAT_PEDS */ sub_43627()) == 1)
    {
         /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_43808( ref l_U894 );
    }
    return;
}

/* F_GET_NUM_LIVING_COMBAT_PEDS */ void sub_43627()
{
    unknown Result;

    Result =  /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_43672( ref l_U894 );
    return Result;
}

/* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ void sub_43672(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result++;
        }
    }
    return Result;
}

/* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ void sub_43808(unknown uParam0)
{
    int I;

    if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_43672( uParam0 )) == 1)
    {
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
            {
                if (NOT (GET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I] )))
                {
                    SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I], 1 );
                    return (uParam0^)[I];
                }
            }
        }
    }
    return nil;
}

/* P_GBL_HANDLE_PED_AIMED_AT_FLINCH */ void sub_44010(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        if (IS_PED_IN_CROSSHAIR_CYLINDER( (uParam0^), uParam2, uParam3, uParam4, uParam5 ))
        {
            if (IS_CONTROL_PRESSED( 0, 6 ))
            {
                if (NOT (( /* MAL_GETACTINTSTATUS */ sub_44113( (uParam0^), uParam1 )) == 3))
                {
                     /* MAL_SETACTINT */ sub_44201( (uParam0^), uParam1, 9999999 );
                }
            }
            else
            {
                 /* MAL_FINISHACTINT */ sub_44278( uParam0, uParam1 );
            }
        }
        else
        {
             /* MAL_FINISHACTINT */ sub_44278( uParam0, uParam1 );
        }
    }
    return;
}

/* MAL_GETACTINTSTATUS */ int sub_44113(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        return PED_GET_ACTION_INTENTION_STATUS( uParam0, uParam1 );
    }
    return 0;
}

/* MAL_SETACTINT */ void sub_44201(unknown uParam0, unknown uParam1, unknown uParam2)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        PED_SET_ACTION_INTENTION( uParam0, uParam1, uParam2, g_U665 );
    }
    return;
}

/* MAL_FINISHACTINT */ void sub_44278(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        PED_FINISH_ACTION_INTENTION( (uParam0^), uParam1 );
    }
    return;
}

/* F_HANDLE_POI */ int sub_44369(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    int iVar6;
    int iVar7;
    int iVar8;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )) == 0)
    {
        if (iParam0->_fU0 == 1)
        {
            uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS(  /* PLAYER_PED_ID */ sub_610() )};
            iVar6 = 0;
            if (iParam0->_fU80 == 1)
            {
                if (( /* F_ISPEDINTRIGGERBOX */ sub_44470(  /* PLAYER_PED_ID */ sub_610(), iParam0->_fU116 )) == 1)
                {
                    if (iParam0->_fU300 == 1)
                    {
                        if (((IS_OBJECT_ON_SCREEN( iParam0->_fU312 )) == 1) AND ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1))
                        {
                            iVar6 = 1;
                        }
                    }
                    else
                    {
                        iVar6 = 1;
                    }
                }
            }
            else if ((iParam0->_fU308 == 1) AND (iParam0->_fU84 == 1))
            {
                if ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU312 ), 1 )) <= iParam0->_fU112)
                    {
                        if (iParam0->_fU300 == 1)
                        {
                            if ((IS_OBJECT_ON_SCREEN( iParam0->_fU312 )) == 1)
                            {
                                iVar6 = 1;
                            }
                        }
                        else
                        {
                            iVar6 = 1;
                        }
                    }
                }
            }
            else if (iParam0->_fU96 == 1)
            {
                if ((DOES_PED_EXIST( iParam0->_fU316 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU316 ), 1 )) <= iParam0->_fU112)
                    {
                        if (iParam0->_fU300 == 1)
                        {
                            if ((IS_PED_ON_SCREEN( iParam0->_fU316, 0 )) == 1)
                            {
                                iVar6 = 1;
                            }
                        }
                        else
                        {
                            iVar6 = 1;
                        }
                    }
                }
            }
            else if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, iParam0->_fU100, 1 )) <= iParam0->_fU112)
            {
                if (iParam0->_fU300 == 1)
                {
                    if (((IS_OBJECT_ON_SCREEN( iParam0->_fU312 )) == 1) AND ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1))
                    {
                        iVar6 = 1;
                    }
                }
                else
                {
                    iVar6 = 1;
                }
            };;;;
            iVar7 = 0;
            if (iParam0->_fU88 == 1)
            {
                if (( /* F_ISPEDINTRIGGERBOX */ sub_44470(  /* PLAYER_PED_ID */ sub_610(), iParam0->_fU216 )) == 1)
                {
                    iVar7 = 1;
                }
            }
            else if ((iParam0->_fU308 == 1) AND (iParam0->_fU92 == 1))
            {
                if ((DOES_OBJECT_EXIST( iParam0->_fU312 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_OBJECT_COORDS( iParam0->_fU312 ), 1 )) <= iParam0->_fU212)
                    {
                        iVar7 = 1;
                    }
                }
            }
            else if (iParam0->_fU96 == 1)
            {
                if ((DOES_PED_EXIST( iParam0->_fU316 )) == 1)
                {
                    if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU316 ), 1 )) <= iParam0->_fU212)
                    {
                        iVar7 = 1;
                    }
                }
            }
            else if ((GET_DISTANCE_BETWEEN_COORDS( uVar3, iParam0->_fU200, 1 )) <= iParam0->_fU212)
            {
                iVar7 = 1;
            };;;;
            if (iVar6 == 1)
            {
                if ((iParam0->_fU4 != 3) AND (iParam0->_fU52 == 1))
                {
                    if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                    {
                         /* P_UPDATEINTERACTIONTEXTAVAILABLE */ sub_4785( iParam0 );
                    }
                    iVar8 = 0;
                    if ((IS_WEAPON_PICKUP_VISIBLE() == 0) AND ((iParam0->_fU60 == 0) AND (( /* F_ISACTIONINGAVAILABLE */ sub_4881( iParam0 )) == 1)))
                    {
                        SET_ACTION_CONSUMED( 0, 1 );
                        if (( /* F_HASACTIONBEENPRESSED */ sub_45333()) == 1)
                        {
                            iVar8 = 1;
                        }
                    }
                    if (iVar8 == 1)
                    {
                        if (iParam0->_fU332 == 0)
                        {
                             /* P_ENABLE_POI */ sub_4327( iParam0, 0 );
                            iParam0->_fU64 = 1;
                        }
                        if (iParam0->_fU68 == 1)
                        {
                            iParam0->_fU72 = 0;
                        }
                        return 1;
                    }
                    else if (iParam0->_fU8 != 2)
                    {
                        if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                        {
                             /* P_ENABLEPOIGLINT */ sub_4386( iParam0, 0 );
                             /* P_ENABLEPOIINTERACTIONTEXT */ sub_4605( iParam0, 1 );
                        }
                        else if (iParam0->_fU320 == 1)
                        {
                             /* P_ENABLEPOIGLINT */ sub_4386( iParam0, 1 );
                        }
                        iParam0->_fU8 = 2;
                    }
                    if ((iParam0->_fU328 == 0) AND (iParam0->_fU324 == 1))
                    {
                        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )) == 0)
                        {
                            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_610(), 1 );
                            iParam0->_fU328 = 1;
                        }
                    }
                }
            }
            else if (iVar7 == 1)
            {
                if (iParam0->_fU8 != 1)
                {
                    if ((iParam0->_fU4 != 3) AND (iParam0->_fU320 == 1))
                    {
                         /* P_ENABLEPOIGLINT */ sub_4386( iParam0, 1 );
                    }
                    if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                    {
                         /* P_ENABLEPOIINTERACTIONTEXT */ sub_4605( iParam0, 0 );
                    }
                    if (iParam0->_fU96 == 1)
                    {
                        if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )) == 0) AND ((((IS_PED_DEAD( iParam0->_fU316 )) == 1) || ((IS_PED_DEAD( iParam0->_fU316 )) == 0)) AND ((DOES_PED_EXIST( iParam0->_fU316 )) == 1)))
                        {
                            TASK_LOOK_AT_PED(  /* PLAYER_PED_ID */ sub_610(), iParam0->_fU316, -1, 0 );
                        }
                    }
                    else if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )) == 0)
                    {
                        TASK_LOOK_AT_COORD(  /* PLAYER_PED_ID */ sub_610(), iParam0->_fU100, -1, 0 );
                    }
                    iParam0->_fU340 = 1;
                    if ((iParam0->_fU72 == 0) AND ((iParam0->_fU68 == 1) AND ((iParam0->_fU64 == 1) AND (iParam0->_fU8 == 2))))
                    {
                        iParam0->_fU72 = 1;
                    }
                    iParam0->_fU8 = 1;
                }
                if ((iParam0->_fU328 == 0) AND (iParam0->_fU324 == 1))
                {
                    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )) == 0)
                    {
                        SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_610(), 1 );
                        iParam0->_fU328 = 1;
                    }
                }
            }
            else if ((iParam0->_fU4 == 1) || (iParam0->_fU4 == 3))
            {
                ;
            }
            else if (iParam0->_fU8 != 0)
            {
                if (iParam0->_fU320 == 1)
                {
                     /* P_ENABLEPOIGLINT */ sub_4386( iParam0, 0 );
                }
            }
            if (iParam0->_fU8 == 2)
            {
                if ((iParam0->_fU4 == 2) || (iParam0->_fU4 == 1))
                {
                     /* P_ENABLEPOIINTERACTIONTEXT */ sub_4605( iParam0, 0 );
                }
            }
            if (iParam0->_fU340)
            {
                if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )) == 0)
                {
                    TASK_CLEAR_LOOK_AT(  /* PLAYER_PED_ID */ sub_610() );
                    iParam0->_fU340 = 0;
                }
            }
            if ((iParam0->_fU328 == 1) AND (iParam0->_fU324 == 1))
            {
                if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )) == 0)
                {
                    SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_610(), 0 );
                    iParam0->_fU328 = 0;
                }
            }
            if (iParam0->_fU332 == 1)
            {
                 /* P_ENABLEPOIINTERACTIONTEXT */ sub_4605( iParam0, 0 );
            }
            iParam0->_fU8 = 0;;;
        }
    }
    return 0;
}

/* F_ISPEDINTRIGGERBOX */ int sub_44470(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, ref uParam1._fU0 );
    }
    return 0;
}

/* F_HASACTIONBEENPRESSED */ int sub_45333()
{
    if ((IS_CONTROL_JUST_PRESSED( 0, 30 )) == 1)
    {
        return 1;
    }
    return 0;
}

/* P_SETDOORAFFECTEDBYBULLETS */ void sub_46283(int iParam0, unknown uParam1)
{
    if (( /* F_DOESDOOREXIST */ sub_42738( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_42822( iParam0 );
    }
    DOOR_SET_IS_AFFECTED_BY_BULLETS( DOOR_FIND_CLOSEST( iParam0->_fU0, iParam0->_fU4 ), uParam1 );
    return;
}

/* P_DF_HANDLE_CLEAN_VIG_04_C_PEDS */ void sub_46434()
{
    if (NOT (IS_PED_DEAD( l_U1154[0] )))
    {
        if ((ISEQ_QUERY_ENTITY_STATE( -87549151, "GMED1", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -87549151, "GMED1", 5 )))
        {
             /* CLEANPED */ sub_3937( l_U1154[0] );
        }
    }
    if (NOT (IS_PED_DEAD( l_U1154[1] )))
    {
        if ((ISEQ_QUERY_ENTITY_STATE( -87549151, "GMED2", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -87549151, "GMED2", 5 )))
        {
             /* CLEANPED */ sub_3937( l_U1154[1] );
        }
    }
    if (NOT (IS_PED_DEAD( l_U1154[2] )))
    {
        if ((ISEQ_QUERY_ENTITY_STATE( -87549151, "GMED3", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -87549151, "GMED3", 5 )))
        {
             /* CLEANPED */ sub_3937( l_U1154[2] );
        }
    }
    if (NOT (IS_PED_DEAD( l_U1154[3] )))
    {
        if ((ISEQ_QUERY_ENTITY_STATE( -87549151, "FLGE1", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -87549151, "FLGE1", 5 )))
        {
             /* CLEANPED */ sub_3937( l_U1154[3] );
        }
    }
    if (NOT (IS_PED_DEAD( l_U1154[4] )))
    {
        if ((ISEQ_QUERY_ENTITY_STATE( -87549151, "FLGE2", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -87549151, "FLGE2", 5 )))
        {
             /* CLEANPED */ sub_3937( l_U1154[4] );
        }
    }
    if (NOT (IS_PED_DEAD( l_U1154[5] )))
    {
        if ((ISEQ_QUERY_ENTITY_STATE( -87549151, "FLGE3", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -87549151, "FLGE3", 5 )))
        {
             /* CLEANPED */ sub_3937( l_U1154[5] );
        }
    }
    return;
}

/* P_DF_HANDLE_CLEAN_VIG_04_D_BAR_PEDS */ void sub_46978()
{
    if (NOT (IS_PED_DEAD( l_U1282[1] )))
    {
        if ((ISEQ_QUERY_ENTITY_STATE( -1591711785, "GMED4", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -1591711785, "GMED4", 5 )))
        {
             /* CLEANPED */ sub_3937( l_U1282[1] );
        }
    }
    if (NOT (IS_PED_DEAD( l_U1282[2] )))
    {
        if ((ISEQ_QUERY_ENTITY_STATE( -1591711785, "GMED5", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -1591711785, "GMED5", 5 )))
        {
             /* CLEANPED */ sub_3937( l_U1282[2] );
        }
    }
    if (NOT (IS_PED_DEAD( l_U1282[3] )))
    {
        if ((ISEQ_QUERY_ENTITY_STATE( -1591711785, "GMED6", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -1591711785, "GMED6", 5 )))
        {
             /* CLEANPED */ sub_3937( l_U1282[3] );
        }
    }
    if (NOT (IS_PED_DEAD( l_U1282[7] )))
    {
        if ((ISEQ_QUERY_ENTITY_STATE( -1591711785, "FLGE4", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -1591711785, "FLGE4", 5 )))
        {
             /* CLEANPED */ sub_3937( l_U1282[7] );
        }
    }
    if (NOT (IS_PED_DEAD( l_U1282[8] )))
    {
        if ((ISEQ_QUERY_ENTITY_STATE( -1591711785, "FLGE5", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -1591711785, "FLGE5", 5 )))
        {
             /* CLEANPED */ sub_3937( l_U1282[8] );
        }
    }
    if (NOT (IS_PED_DEAD( l_U1282[9] )))
    {
        if ((ISEQ_QUERY_ENTITY_STATE( -1591711785, "FLGE6", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -1591711785, "FLGE6", 5 )))
        {
             /* CLEANPED */ sub_3937( l_U1282[9] );
        }
    }
    return;
}

/* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ void sub_47542(int iParam0, unknown uParam1)
{
    if (iParam0->_fU64 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU64 =  /* F_ISPEDINTRIGGERBOX */ sub_44470(  /* PLAYER_PED_ID */ sub_610(), (iParam0^) );
        if ((iParam0->_fU64) AND (uParam1))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU64;
}

/* P_LNG_START_VIG_04_A */ void sub_47706()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_START_VIG_04_A - START", 0 );
     /* P_ACTIVATEPED */ sub_24063( l_U894[l_U1023] );
     /* P_ACTIVATEPEDARRAY */ sub_24011( ref l_U1043 );
    if (NOT (IS_PED_DEAD( l_U894[l_U1023] )))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U894[l_U1023], 0 );
        REGISTER_TARGET( l_U894[l_U1023],  /* PLAYER_PED_ID */ sub_610() );
        SET_LOCKED_TARGET( l_U894[l_U1023],  /* PLAYER_PED_ID */ sub_610() );
        TASK_COMBAT_PED( l_U894[l_U1023],  /* PLAYER_PED_ID */ sub_610() );
    }
     /* P_TETHERPED */ sub_47941( ref l_U1700, l_U894[l_U1023], 3 );
    ISEQ_REGISTER_ENTITY( 1446597130, "GMED1", l_U894[l_U1023], 0 );
    ISEQ_REGISTER_ENTITY( 1446597130, "GMED2", l_U1043[0], 0 );
    ISEQ_REGISTER_ENTITY( 1446597130, "GMED3", l_U1043[1], 0 );
    ISEQ_START( 1446597130 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_START_VIG_04_A - END", 0 );
    return;
}

/* P_TETHERPED */ void sub_47941(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_TETHERING_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_TETHERING_OPTION( uParam1, uParam2 );
    }
    return;
}

/* P_LNG_START_VIG_04_C */ void sub_48309()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_START_VIG_04_C - START", 0 );
     /* P_ACTIVATEPEDARRAY */ sub_24011( ref l_U1154 );
    ISEQ_REGISTER_ENTITY( -87549151, "GMED1", l_U1154[0], 0 );
    ISEQ_REGISTER_ENTITY( -87549151, "GMED2", l_U1154[1], 0 );
    ISEQ_REGISTER_ENTITY( -87549151, "GMED3", l_U1154[2], 0 );
    ISEQ_REGISTER_ENTITY( -87549151, "FLGE1", l_U1154[3], 0 );
    ISEQ_REGISTER_ENTITY( -87549151, "FLGE2", l_U1154[4], 0 );
    ISEQ_REGISTER_ENTITY( -87549151, "FLGE3", l_U1154[5], 0 );
    ISEQ_START( -87549151 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_START_VIG_04_A - END", 0 );
    return;
}

/* P_LNG_START_VIG_04_D_FROZEN */ void sub_48633()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_START_VIG_04_D_FROZEN - START", 0 );
     /* P_ACTIVATEPEDARRAY */ sub_24011( ref l_U1282 );
     /* P_ACTIVATEPED */ sub_24063( l_U894[l_U1024] );
     /* P_ACTIVATEPED */ sub_24063( l_U894[l_U1025] );
    ISEQ_REGISTER_ENTITY( -1591711785, "GMED1", l_U894[l_U1024], 0 );
    ISEQ_REGISTER_ENTITY( -1591711785, "GMED2", l_U894[l_U1025], 0 );
    ISEQ_REGISTER_ENTITY( -1591711785, "GMED3", l_U1282[0], 0 );
    ISEQ_REGISTER_ENTITY( -1591711785, "GMED4", l_U1282[1], 0 );
    ISEQ_REGISTER_ENTITY( -1591711785, "GMED5", l_U1282[2], 0 );
    ISEQ_REGISTER_ENTITY( -1591711785, "GMED6", l_U1282[3], 0 );
    ISEQ_REGISTER_ENTITY( -1591711785, "FLGE1", l_U1282[4], 0 );
    ISEQ_REGISTER_ENTITY( -1591711785, "FLGE2", l_U1282[5], 0 );
    ISEQ_REGISTER_ENTITY( -1591711785, "FLGE3", l_U1282[6], 0 );
    ISEQ_REGISTER_ENTITY( -1591711785, "FLGE4", l_U1282[7], 0 );
    ISEQ_REGISTER_ENTITY( -1591711785, "FLGE5", l_U1282[8], 0 );
    ISEQ_REGISTER_ENTITY( -1591711785, "FLGE6", l_U1282[9], 0 );
    ISEQ_START( -1591711785 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_START_VIG_04_D_FROZEN - END", 0 );
    return;
}

/* P_LNG_START_VIG_04_D_BAR_PEDS */ void sub_49200()
{
     /* WRITESCRIPTLOG */ sub_365( "RJM", "P_LNG_START_VIG_04_D_BAR_PEDS", 0 );
    PED_SET_ACTION_INTENTION( l_U1282[1], 47, 1000, 0, 0, 0 );
    PED_SET_ACTION_INTENTION( l_U1282[2], 47, 1000, 0, 0, 0 );
    PED_SET_ACTION_INTENTION( l_U1282[3], 47, 1000, 0, 0, 0 );
    PED_SET_ACTION_INTENTION( l_U1282[7], 47, 1000, 0, 0, 0 );
    PED_SET_ACTION_INTENTION( l_U1282[8], 47, 1000, 0, 0, 0 );
    PED_SET_ACTION_INTENTION( l_U1282[9], 47, 1000, 0, 0, 0 );
    return;
}

/* P_UPPER_FLOOR_CS_ENGAGE */ void sub_49456()
{
    unknown uVar2;

     /* WRITESCRIPTLOG */ sub_365( "CR", "P_UPPER_FLOOR_CS_ENGAGE - Start", 0 );
     /* P_ACTIVATEPED */ sub_24063( l_U894[l_U1022] );
     /* P_ACTIVATEPED */ sub_24063( l_U894[l_U1023] );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
    {
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( 0, 12.42508000, 31.27825000, 0.68724100, 3, 20000, 1048576000, 0, 0 );
        TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_610() );
        CLOSE_SEQUENCE_TASK( uVar2 );
    }
    if (NOT (IS_PED_DEAD( l_U894[l_U1022] )))
    {
        REGISTER_TARGET( l_U894[l_U1022],  /* PLAYER_PED_ID */ sub_610() );
        SET_LOCKED_TARGET( l_U894[l_U1022],  /* PLAYER_PED_ID */ sub_610() );
        TASK_PERFORM_SEQUENCE( l_U894[l_U1022], uVar2 );
         /* P_TETHERPED */ sub_47941( ref l_U1699, l_U894[l_U1022], 1 );
    }
    CLEAR_SEQUENCE_TASK( uVar2 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
    {
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_610() );
        CLOSE_SEQUENCE_TASK( uVar2 );
    }
    CLEAR_SEQUENCE_TASK( uVar2 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
    {
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( 0, 15.10369000, 24.48327000, -0.52216100, 3, 20000, 1048576000, 0, 0 );
        TASK_COMBAT_PED( 0,  /* PLAYER_PED_ID */ sub_610() );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        CLOSE_SEQUENCE_TASK( uVar2 );
    }
    CLEAR_SEQUENCE_TASK( uVar2 );
     /* WRITESCRIPTLOG */ sub_365( "CR", "P_UPPER_FLOOR_CS_ENGAGE - End", 0 );
    return;
}

/* P_LNG_START_VIG_04_D_BOOTH_AND_CS */ void sub_50085()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_START_VIG_04_D_BOOTH_AND_CS - START", 0 );
    PED_SET_ACTION_INTENTION( l_U894[l_U1024], 47, 1000, 0, 0, 0 );
    PED_SET_ACTION_INTENTION( l_U894[l_U1025], 47, 1000, 0, 0, 0 );
    PED_SET_ACTION_INTENTION( l_U1282[0], 47, 1000, 0, 0, 0 );
    PED_SET_ACTION_INTENTION( l_U1282[4], 47, 1000, 0, 0, 0 );
    PED_SET_ACTION_INTENTION( l_U1282[5], 47, 1000, 0, 0, 0 );
    PED_SET_ACTION_INTENTION( l_U1282[6], 47, 1000, 0, 0, 0 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_START_VIG_04_D_BOOTH_AND_CS - END", 0 );
    return;
}

/* P_DF_HANDLE_TASKING_VIG_04_D_CS */ void sub_50428()
{
    if (NOT l_U1716)
    {
        if (NOT (IS_PED_DEAD( l_U894[l_U1024] )))
        {
            if ((ISEQ_QUERY_ENTITY_STATE( -1591711785, "GMED1", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -1591711785, "GMED1", 5 )))
            {
                 /* WRITESCRIPTLOG */ sub_365( "RJM", "VIG_04D GMED1 is done playing his vignette, engage the player", 0 );
                l_U1716 = 1;
                REGISTER_TARGET( l_U894[l_U1024],  /* PLAYER_PED_ID */ sub_610() );
                SET_LOCKED_TARGET( l_U894[l_U1024],  /* PLAYER_PED_ID */ sub_610() );
                TASK_COMBAT_PED( l_U894[l_U1024],  /* PLAYER_PED_ID */ sub_610() );
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U894[l_U1024], 0 );
            }
        }
    }
    if (NOT l_U1717)
    {
        if (NOT (IS_PED_DEAD( l_U894[l_U1025] )))
        {
            if ((ISEQ_QUERY_ENTITY_STATE( -1591711785, "GMED2", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -1591711785, "GMED2", 5 )))
            {
                 /* WRITESCRIPTLOG */ sub_365( "RJM", "VIG_04D GMED2 is done playing his vignette, engage the player", 0 );
                l_U1717 = 1;
                REGISTER_TARGET( l_U894[l_U1025],  /* PLAYER_PED_ID */ sub_610() );
                SET_LOCKED_TARGET( l_U894[l_U1025],  /* PLAYER_PED_ID */ sub_610() );
                TASK_COMBAT_PED( l_U894[l_U1025],  /* PLAYER_PED_ID */ sub_610() );
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U894[l_U1025], 0 );
            }
        }
    }
    if (NOT l_U1718)
    {
        if ((l_U1717) AND (l_U1716))
        {
            if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_47542( ref l_U1615, 0 ))
            {
                 /* WRITESCRIPTLOG */ sub_365( "RJM", "Unlocking guys from cover", 0 );
                SET_PED_FLAG_LOCK_TO_COVER( l_U894[l_U1024], 0 );
                SET_PED_FLAG_LOCK_TO_COVER( l_U894[l_U1025], 0 );
                l_U1718 = 1;
            }
        }
    }
    return;
}

/* P_DF_HANDLE_CLEAN_VIG_04_D_BOOTH_PEDS */ void sub_51124()
{
    if (NOT (IS_PED_DEAD( l_U1282[0] )))
    {
        if ((ISEQ_QUERY_ENTITY_STATE( -1591711785, "GMED3", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -1591711785, "GMED3", 5 )))
        {
             /* CLEANPED */ sub_3937( l_U1282[0] );
        }
    }
    if (NOT (IS_PED_DEAD( l_U1282[4] )))
    {
        if ((ISEQ_QUERY_ENTITY_STATE( -1591711785, "FLGE1", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -1591711785, "FLGE1", 5 )))
        {
             /* CLEANPED */ sub_3937( l_U1282[4] );
        }
    }
    if (NOT (IS_PED_DEAD( l_U1282[5] )))
    {
        if ((ISEQ_QUERY_ENTITY_STATE( -1591711785, "FLGE2", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -1591711785, "FLGE2", 5 )))
        {
             /* CLEANPED */ sub_3937( l_U1282[5] );
        }
    }
    if (NOT (IS_PED_DEAD( l_U1282[6] )))
    {
        if ((ISEQ_QUERY_ENTITY_STATE( -1591711785, "FLGE3", 6 )) || (ISEQ_QUERY_ENTITY_STATE( -1591711785, "FLGE3", 5 )))
        {
             /* CLEANPED */ sub_3937( l_U1282[6] );
        }
    }
    return;
}

/* P_LNG_START_VIG_04_E */ void sub_51536()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_START_VIG_04_E - START", 0 );
     /* P_ACTIVATEPEDARRAY */ sub_24011( ref l_U1445 );
     /* P_ACTIVATEPED */ sub_24063( l_U894[l_U1022] );
    ISEQ_REGISTER_ENTITY( -1921859460, "GMED1", l_U894[l_U1022], 0 );
    ISEQ_REGISTER_ENTITY( -1921859460, "GMED2", l_U1445[0], 0 );
    ISEQ_START( -1921859460 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_START_VIG_04_E - END", 0 );
    return;
}

/* P_LNG_START_VIG_04_F */ void sub_51782()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_START_VIG_04_F - START", 0 );
     /* P_ACTIVATEPED */ sub_24063( l_U894[l_U1026] );
     /* P_ACTIVATEPEDARRAY */ sub_24011( ref l_U1482 );
    if ((NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() ))) AND (NOT (IS_PED_DEAD( l_U894[l_U1026] ))))
    {
        REGISTER_TARGET( l_U894[l_U1026],  /* PLAYER_PED_ID */ sub_610() );
        TASK_COMBAT_PED( l_U894[l_U1026],  /* PLAYER_PED_ID */ sub_610() );
    }
     /* LOADISEQ */ sub_18013( 1134570712, 1 );
    ISEQ_REGISTER_ENTITY( 1134570712, "GMED1", l_U1482[0], 0 );
    ISEQ_REGISTER_ENTITY( 1134570712, "FLGE1", l_U1482[1], 0 );
    ISEQ_START( 1134570712 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_START_VIG_04_F - END", 0 );
    return;
}

/* P_STARTING_CS_SECONDARY_COMBAT */ void sub_52487()
{
    unknown uVar2;

     /* WRITESCRIPTLOG */ sub_365( "CR", "P_STARTING_CS_SECONDARY_COMBAT - Start", 0 );
    if (NOT (IS_PED_DEAD( l_U894[0] )))
    {
        SET_PED_FLAG_LOCK_TO_COVER( l_U894[0], 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U894[0], 0 );
    }
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
    {
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( 0, 13.90000000, 23.66000000, -0.52000000, 4, 20000, 1048576000, 0, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        CLOSE_SEQUENCE_TASK( uVar2 );
    }
    if (NOT (IS_PED_DEAD( l_U894[1] )))
    {
        TASK_PERFORM_SEQUENCE( l_U894[1], uVar2 );
         /* P_TETHERPED */ sub_47941( ref l_U1700, l_U894[1], 3 );
        CLEAR_SEQUENCE_TASK( uVar2 );
    }
     /* WRITESCRIPTLOG */ sub_365( "CR", "P_STARTING_CS_SECONDARY_COMBAT - End", 0 );
    return;
}

/* P_LOWER_FLOOR_CS_ENGAGE */ void sub_52861()
{
    unknown uVar2;

     /* WRITESCRIPTLOG */ sub_365( "CR", "P_LOWER_FLOOR_CS_ENGAGE - Start", 0 );
     /* P_ACTIVATEPED */ sub_24063( l_U894[6] );
     /* P_ACTIVATEPED */ sub_24063( l_U894[7] );
    if (NOT (IS_PED_DEAD( l_U894[l_U1022] )))
    {
        SET_PED_COMBAT_ATTRIBUTES( l_U894[l_U1022], 1, 0 );
        REGISTER_TARGET( l_U894[l_U1022],  /* PLAYER_PED_ID */ sub_610() );
        SET_LOCKED_TARGET( l_U894[l_U1022],  /* PLAYER_PED_ID */ sub_610() );
    }
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
    {
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( 0, 18.22180000, 47.22741000, -1.24236400, 3, 20000, 1048576000, 0, 0 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        TASK_COMBAT_MOVE_TO_COVER( 0, "GenCover", "21C6B18_84CA0313_Popover1", 0 );
        CLOSE_SEQUENCE_TASK( uVar2 );
    }
    if (NOT (IS_PED_DEAD( l_U894[6] )))
    {
        SET_PED_SUGGESTED_COVER_POINT( l_U894[6], "GenCover", "21C6B18_84CA0313_Popover1" );
        TASK_PERFORM_SEQUENCE( l_U894[6], uVar2 );
        REGISTER_TARGET( l_U894[6],  /* PLAYER_PED_ID */ sub_610() );
        SET_LOCKED_TARGET( l_U894[6],  /* PLAYER_PED_ID */ sub_610() );
         /* P_TETHERPED */ sub_47941( ref l_U1701, l_U894[6], 3 );
        CLEAR_SEQUENCE_TASK( uVar2 );
    }
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
    {
        OPEN_SEQUENCE_TASK( ref uVar2 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
        TASK_GO_STRAIGHT_TO_COORD( 0, 15.72436000, 49.54628000, -1.21312100, 4, 20000 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 0 );
        CLOSE_SEQUENCE_TASK( uVar2 );
    }
    if (NOT (IS_PED_DEAD( l_U894[7] )))
    {
        TASK_PERFORM_SEQUENCE( l_U894[7], uVar2 );
        REGISTER_TARGET( l_U894[7],  /* PLAYER_PED_ID */ sub_610() );
        SET_LOCKED_TARGET( l_U894[7],  /* PLAYER_PED_ID */ sub_610() );
         /* P_TETHERPED */ sub_47941( ref l_U1701, l_U894[7], 3 );
        CLEAR_SEQUENCE_TASK( uVar2 );
    }
     /* WRITESCRIPTLOG */ sub_365( "CR", "P_LOWER_FLOOR_CS_ENGAGE - End", 0 );
    return;
}

/* P_START_CHECKPOINT_THREAD */ void sub_53616(int iParam0)
{
    iParam0->_fU36 = 1;
    return;
}

/* F_IS_PED_ARRAY_DEFEATED */ int sub_53675(unknown uParam0, boolean bParam1)
{
    if (( /* F_HAS_PED_ARRAY_SPAWNED */ sub_26052( uParam0, 0 )) == 1)
    {
        if (NOT bParam1)
        {
            if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_43672( uParam0 )) == 0)
            {
                return 1;
            }
        }
        if (bParam1)
        {
            if (( /* F_GET_NUM_DEAD_PEDS_IN_ARRAY */ sub_53761( uParam0 )) == (uParam0^))
            {
                return 1;
            }
        }
    }
    return 0;
}

/* F_GET_NUM_DEAD_PEDS_IN_ARRAY */ void sub_53761(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            if (IS_PED_DEAD( (uParam0^)[I] ))
            {
                Result++;
            }
        }
    }
    return Result;
}

/* F_POI_CAN_PLAY_UNAVALIABLE_MONO */ int sub_53996(int iParam0)
{
    if ((iParam0->_fU8 == 2) AND ((iParam0->_fU76 == 0) AND (( /* F_IS_POI_AVAILABLE */ sub_54042( iParam0 )) == 0)))
    {
        if ((( /* F_HASACTIONBEENPRESSED */ sub_45333()) == 1) AND (((IS_PED_RELOADING(  /* PLAYER_PED_ID */ sub_610() )) == 0) AND (((IS_PED_GETTING_UP(  /* PLAYER_PED_ID */ sub_610() )) == 0) AND (((IS_PED_PICKING_UP_PICKUP(  /* PLAYER_PED_ID */ sub_610() )) == 0) AND (((IS_PED_IN_COVER(  /* PLAYER_PED_ID */ sub_610() )) == 0) AND (((IS_PED_DUCKING(  /* PLAYER_PED_ID */ sub_610() )) == 0) AND ((IS_PLAYER_SHOOTDODGING() == 0) AND ((IS_MONOLOGUE_PLAYING() == 0) AND ((IS_INTERACTIONTEXT_AVAILABLE() == 0) AND (IS_INTERACTIONTEXT_ONSCREEN() == 1))))))))))
        {
            iParam0->_fU76 = 1;
            return 1;
        }
    }
    return 0;
}

/* F_IS_POI_AVAILABLE */ void sub_54042(int iParam0)
{
    return iParam0->_fU56;
}

/* P_SPEECH_PLAY_MONOLOGUE */ void sub_54285(unknown uParam0, unknown uParam1)
{
     /* RESET_SCRIPT_SPEECH_STRUCT */ sub_40150( uParam1 );
     /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_40261( 0,  /* PLAYER_PED_ID */ sub_610(), "MAX", uParam1, 2, 0 );
     /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_40261( 1,  /* PLAYER_PED_ID */ sub_610(), "MAX", uParam1, 2, 0 );
     /* PLAY_SINGLE_SPEECH */ sub_40531( uParam0, uParam1, 8, 1 );
    return;
}

/* P_HANDLE_MISSION_FAIL_LOGIC */ void sub_54402()
{
    if (( /* HASTIMERBEENACTIVATED */ sub_1415( ref g_U3340 )) == 0)
    {
        if (( /* F_IS_PED_ARRAY_DEFEATED */ sub_53675( ref l_U894, 1 )) == 1)
        {
             /* CREATETIMER */ sub_1543( ref g_U3350, 25000, 1, 0 );
             /* STARTTIMER */ sub_1691( ref g_U3350 );
             /* CREATETIMER */ sub_1543( ref g_U3340, g_U3349, 1, 0 );
             /* STARTTIMER */ sub_1691( ref g_U3340 );
        }
    }
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
    {
        if (NOT (IS_ANY_SPEECH_PLAYING(  /* PLAYER_PED_ID */ sub_610() )))
        {
            if (( /* ISTIMERDONE */ sub_1822( ref g_U3350 )) == 1)
            {
                 /* WRITESCRIPTLOG */ sub_365( "MF", "Playing warning monologue...", 0 );
                 /* P_SPEECH_PLAY_MONOLOGUE */ sub_54285( "SCLB_MPDCS", ref g_U3361 );
            }
        }
    }
    if (( /* ISTIMERDONE */ sub_1822( ref g_U3340 )) == 1)
    {
         /* P_ENABLE_POI */ sub_4327( ref l_U1787, 0 );
        if (( /* F_WHERE_DID_MAX_FAIL */ sub_54665()) == 7)
        {
            l_U36 = 2;
            l_U848 = 12;
             /* WRITESCRIPTLOG */ sub_365( "SP", "eCheckpointState = CP_HANDLE_MID_02_FAIL1", 0 );
        }
        else if (( /* F_WHERE_DID_MAX_FAIL */ sub_54665()) == 5)
        {
            l_U42 = 2;
            l_U848 = 13;
             /* WRITESCRIPTLOG */ sub_365( "SP", "eCheckpointState = CP_HANDLE_MID_02_FAIL7", 0 );
        }
        else if (( /* F_WHERE_DID_MAX_FAIL */ sub_54665()) == 6)
        {
            l_U43 = 2;
            l_U848 = 14;
             /* WRITESCRIPTLOG */ sub_365( "SP", "eCheckpointState = CP_HANDLE_MID_02_FAIL8", 0 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_365( "SP", "Player is outside of any fail trigger... defaulting...", 0 );
            l_U42 = 2;
            l_U848 = 13;
             /* WRITESCRIPTLOG */ sub_365( "SP", "eCheckpointState = CP_HANDLE_MID_02_FAIL7", 0 );
        };;;
    }
    return;
}

/* F_WHERE_DID_MAX_FAIL */ int sub_54665()
{
     /* WRITESCRIPTLOG */ sub_365( "SP", "F_WHERE_DID_MAX_FAIL", 0 );
    if ((( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U419 )) == 1) || ((( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U398 )) == 1) || ((( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U377 )) == 1) || (( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U356 )) == 1))))
    {
        return 1;
    }
    else if ((( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U461 )) == 1) || (( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U440 )) == 1))
    {
        return 2;
    }
    else if ((( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U503 )) == 1) || (( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U482 )) == 1))
    {
        return 3;
    }
    else if ((( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U545 )) == 1) || (( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U524 )) == 1))
    {
        return 4;
    }
    else if ((( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U587 )) == 1) || (( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U566 )) == 1))
    {
        return 5;
    }
    else if ((( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U629 )) == 1) || (( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U608 )) == 1))
    {
        return 6;
    }
    else if ((( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U671 )) == 1) || (( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U650 )) == 1))
    {
        return 7;
    }
    else if (( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U692 )) == 1)
    {
        return 8;
    }
    else if ((( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U734 )) == 1) || (( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U713 )) == 1))
    {
        return 9;
    }
    else if ((( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U776 )) == 1) || (( /* F_ISPLAYERINTRIGGERBOX */ sub_54738( l_U755 )) == 1))
    {
        return 10;
    };;;;;;;;;;
    return 0;
}

/* F_ISPLAYERINTRIGGERBOX */ void sub_54738(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20)
{
    return  /* F_ISPEDINTRIGGERBOX */ sub_44470(  /* PLAYER_PED_ID */ sub_610(), uParam0 );
}

/* F_GBL_HAS_PLAYER_JUST_ACQUIRED_PAIN_KILLERS */ int sub_55711()
{
    if (GET_PAYNEKILLER_AMT() > g_U3539)
    {
         /* WRITESCRIPTLOG */ sub_365( "MF", "Player picked up Payne Killers!", 0 );
        PRINTSTRING( "HAD: " );
         /* WRITE_INT */ sub_20473( g_U3539 );
        PRINTSTRING( "NOW: " );
         /* WRITE_INT */ sub_20473( GET_PAYNEKILLER_AMT() );
        g_U3539 = GET_PAYNEKILLER_AMT();
        return 1;
    }
    g_U3539 = GET_PAYNEKILLER_AMT();
    return 0;
}

/* P_LNG_SPEECH_MAOLCD */ void sub_56220()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SPEECH_MAOLCD - START", 0 );
     /* P_SPEECH_PLAY_MONOLOGUE */ sub_54285( "SCLB_MAOLCD", ref l_U1902 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SPEECH_MAOLCD - END", 0 );
    return;
}

/* P_LNG_SPEECH_MVOGB */ void sub_56432()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SPEECH_MVOGB - START", 0 );
     /* P_SPEECH_PLAY_MONOLOGUE */ sub_54285( "SCLB_MVOGB", ref l_U1922 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_SPEECH_MVOGB - END", 0 );
    return;
}

/* F_LNG_02_NC_RANDOM_PRE */ int sub_56689()
{
    g_U1102 = 1;
     /* KILL_ANY_MISSION_SPEECH */ sub_56731( 0 );
     /* KILL_SPEECH */ sub_56935( ref l_U1902, 0 );
     /* KILL_SPEECH */ sub_56935( ref l_U1892, 0 );
     /* KILL_SPEECH */ sub_56935( ref l_U1873, 0 );
     /* KILL_SPEECH */ sub_56935( ref l_U1922, 0 );
    return 1;
}

/* KILL_ANY_MISSION_SPEECH */ void sub_56731(unknown uParam0)
{
    int I;

    for ( I = 0; I <= 3; I++ )
    {
        PRINTSTRING( "\n KILL_ANY_MISSION_SPEECH CALLED***************************************" );
        if (IS_SCRIPTED_CONVERSATION_ONGOING( I ))
        {
            if ((g_U1[I] <= 8) AND (g_U1[I] >= 4))
            {
                STOP_SCRIPTED_CONVERSATION( I, uParam0, 0 );
            }
        }
    }
    return;
}

/* KILL_SPEECH */ void sub_56935(int iParam0, unknown uParam1)
{
    if (NOT ( /* IS_SCRIPT_SPEECH_STRUCT_VALID */ sub_56963( (iParam0^) )))
    {
        ;
    }
    else
    {
        PRINTSTRING( "\n KILL SPEECH CALLED***************************************" );
        if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
        {
            if (iParam0->_fU8 == g_U6[iParam0->_fU4])
            {
                STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, uParam1, 0 );
            }
        }
    }
    return;
}

/* IS_SCRIPT_SPEECH_STRUCT_VALID */ boolean sub_56963(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    int iVar12;

    if (uParam0._fU4 < 0)
    {
        return 0;
    }
    iVar12 = GET_CHECK_HASH_FROM_CONVERSATION_ID( uParam0._fU4 );
    return (uParam0._fU16 == iVar12) AND (iVar12 != 0);
}

/* P_LNG_02_NC_RANDOM_REGISTER */ void sub_57237()
{
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_02_NC_RANDOM_REGISTER - START", 0 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )))
    {
        CUTSCENE_REGISTER_ISEQ( 1396472282 );
        ISEQ_REGISTER_ENTITY( 1396472282, "player",  /* PLAYER_PED_ID */ sub_610(), 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_610(), 0, 0 ), "W_PI_Clt1911_Aa_H", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT(  /* PLAYER_PED_ID */ sub_610(), 9.12456500, 49.33229000, -1.21169500, 19.07391000 );
        if (DOES_OBJECT_EXIST( DOOR_FIND_CLOSEST( g_U3171._fU0, g_U3171._fU4 ) ))
        {
            SET_OBJECT_VISIBLE( DOOR_FIND_CLOSEST( g_U3171._fU0, g_U3171._fU4 ), 0 );
        }
    }
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_LNG_02_NC_RANDOM_REGISTER - END", 0 );
    return;
}

/* P_LNG_02_NC_RANDOM_HANDLE */ void sub_57578()
{
    if (l_U1559._fU52)
    {
        CAMERA_SNAP_POINT_AT_COORD( 6.92000000, 53.16000000, 0.44000000 );
         /* CLEANOBJECT */ sub_4268( l_U1587 );
    }
    if (NOT l_U1586)
    {
        if ((IS_SCREEN_FADING_OUT()) || (GET_CUTSCENE_TIME_MS() > 45500))
        {
             /* WRITESCRIPTLOG */ sub_365( "MF", "Starting player input gait...", 0 );
            SIMULATE_PLAYER_INPUT_GAIT(  /* PLAYER_ID */ sub_648(), 2, 1100, 0 );
            l_U1586 = 1;
        }
    }
    return;
}

/* F_LNG_02_NC_RANDOM_POST */ int sub_57773()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    g_U1102 = 0;
     /* CREATETIMER */ sub_1543( ref g_U3350, 25000, 1, 0 );
     /* STARTTIMER */ sub_1691( ref g_U3350 );
     /* CREATETIMER */ sub_1543( ref g_U3340, g_U3349, 1, 0 );
     /* STARTTIMER */ sub_1691( ref g_U3340 );
     /* P_SPEECH_PLAY_MONOLOGUE */ sub_54285( "SCLB_MXFRENCA", ref uVar2 );
    CAMERA_CLEAR_POINT_AT_TARGET();
    if (DOES_OBJECT_EXIST( DOOR_FIND_CLOSEST( g_U3171._fU0, g_U3171._fU4 ) ))
    {
        SET_OBJECT_VISIBLE( DOOR_FIND_CLOSEST( g_U3171._fU0, g_U3171._fU4 ), 1 );
         /* P_CLOSEDOOR */ sub_57961( ref g_U3171, 1 );
         /* P_SETDOORLOCKED */ sub_42708( ref g_U3171, 1 );
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_365( "MF", "dsLoungeBathroomAndersLocked  DOES NOT EXIST", 0 );
        SCRIPT_ASSERT( "dsLoungeBathroomAndersLocked  DOES NOT EXIST", 0 );
    }
    if (NOT (HAS_EXPLORATION_ITEM_BEEN_FOUND( "sclb_Anders1" )))
    {
         /* WRITESCRIPTLOG */ sub_365( "MF", "Setting 'sclb_Anders1' to FOUND...", 0 );
        FOUND_EXPLORATION_ITEM( "sclb_Anders1" );
    }
    return 1;
}

/* P_CLOSEDOOR */ void sub_57961(int iParam0, int iParam1)
{
    if (( /* F_DOESDOOREXIST */ sub_42738( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_42822( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    return;
}

/* CUTSYS_CREATESTANDALONECUTSCENE */ void sub_58339(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
     /* WRITESCRIPTLOG */ sub_365( "MSWW", "CutSys_CreateStandaloneCutscene", "###" );
    return  /* CUTSYS_PRIVATE_CREATECUTSCENE */ sub_30126( uParam0, uParam1, uParam2, uParam3, uParam4, uParam5, uParam7, 0, 58450, 58501, 0, 30027, 30075, uParam6 );
}

/* CUTSYS_DEFAULT_PREPAREBLENDOUT */ void sub_58450()
{
    return;
}

/* CUTSYS_DEFAULT_HANDLEBLENDOUT */ int sub_58501()
{
    return 1;
}

/* P_TELEPORT_PLAYER */ void sub_58863(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    unknown uVar8;

    uVar8 =  /* PLAYER_PED_ID */ sub_610();
     /* TELEPORTPED */ sub_42558( uVar8, uParam0, uParam3 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( uParam4, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( uParam5, 1065353216, 0 );
    return;
}

/* P_CREATE_AND_START_TIMER */ void sub_59079(unknown uParam0, unknown uParam1)
{
     /* CREATETIMER */ sub_1543( uParam0, uParam1, 1, 0 );
     /* STARTTIMER */ sub_1691( uParam0 );
    return;
}

/* F_HANDLE_MID_02_FAIL1 */ int sub_59321()
{
    vector vVar2;
    vector vVar5;
    vector vVar8;
    vector vVar11;
    vector vVar14;
    float fVar17;

    vVar2 = {-0.47300000, 55.73700000, -1.21169500};
    vVar5 = {0.00000000, 0.00000000, 0.00000000};
    vVar8 = {0.09100000, 0.03900000, -0.03400000};
    vVar11 = {1.60000000, -2.50000000, -3.10000000};
    vVar14 = {9.59500000, 52.62800000, -1.20700000};
    fVar17 = -180.00000000;
    switch (l_U36)
    {
        case 0: break;
        case 2:
         /* WRITESCRIPTLOG */ sub_365( "SP", "eMid02Fail1State = MIDSCENE_SETUP", 0 );
         /* NIS_PRE_SETUP */ sub_31880( 1, 0, 0, 1 );
        DO_SCREEN_FADE_OUT( 500 );
        l_U36 = 1;
         /* WRITESCRIPTLOG */ sub_365( "SP", "eMid02Fail1State = MIDSCENE_FIRST_FRAME", 0 );
        break;
        case 1:
        if (IS_SCREEN_FADED_OUT())
        {
             /* TELEPORTPED */ sub_42558(  /* PLAYER_PED_ID */ sub_610(), vVar14, fVar17 );
            if ((GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_610(), 1, 0 ) )) AND (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() ))))
            {
                REMOVE_PED_WEAPON(  /* PLAYER_PED_ID */ sub_610(), GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_610(), 1, 0 ) );
            }
             /* CLEANOBJECT */ sub_4268( l_U806 );
            l_U806 =  /* CREATEOBJECTNOOFFSET */ sub_34875( g_U2479, vVar2, vVar5, 0, 0, 0 );
            if ((DOES_OBJECT_EXIST( l_U806 )) == 1)
            {
                if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )) == 0)
                {
                    ATTACH_OBJECT_TO_PED( l_U806,  /* PLAYER_PED_ID */ sub_610(), 25310, vVar8, vVar11, 0 );
                }
            }
            ISEQ_REGISTER_ENTITY( -1218938405, "player",  /* PLAYER_PED_ID */ sub_610(), 0 );
            ISEQ_START( -1218938405 );
            l_U36 = 3;
        }
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_365( "SP", "eMid02Fail1State = MIDSCENE_FIRST_FRAME", 0 );
        CAMERA_PLAY_ANIMATED( "LEVEL_S_CLUB_FAIL", "MID_02_NC_FAIL_BATHROOM_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
        DO_SCREEN_FADE_IN( 500 );
         /* P_FAIL_PLAY_PHONE_DIALOGUE_POST_MID_04 */ sub_60048();
        l_U36 = 4;
         /* WRITESCRIPTLOG */ sub_365( "SP", "eMid02Fail1State = MIDSCENE_PLAYING", 0 );
        break;
        case 4:
        if (NOT ( /* HASTIMERBEENACTIVATED */ sub_1415( ref l_U797 )))
        {
            if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_60402()))
            {
                 /* WRITESCRIPTLOG */ sub_365( "MF", "Max is finished talking, starting fade delay timer...", 0 );
                 /* CREATETIMER */ sub_1543( ref l_U797, 800, 1, 0 );
                 /* STARTTIMER */ sub_1691( ref l_U797 );
            }
        }
        if ((CAMERA_ANIMATED_CURRENT_TIME() > ((CAMERA_ANIMATED_LENGTH( "LEVEL_S_CLUB_FAIL", "MID_02_NC_FAIL_BATHROOM_CAM" )) - 100)) || ( /* ISTIMERDONE */ sub_1822( ref l_U797 )))
        {
             /* P_IMAGEFX_START_BULLETCAM */ sub_60704( "MISS_DEATH_FAIL_FAST_01A", 0 );
            l_U36 = 5;
        }
        break;
        case 5:
        CAMERA_ANIMATED_STOP( 3000, 0 );
         /* CLEANOBJECT */ sub_4268( l_U806 );
        ISEQ_UNREGISTER_ENTITY( -1218938405, "player" );
        ISEQ_TERMINATE( -1218938405 );
        l_U36 = 0;
         /* WRITESCRIPTLOG */ sub_365( "SP", "eMid02Fail1State = MIDSCENE_IDLE", 0 );
        return 1;
        break;
    }
    return 0;
}

/* P_FAIL_PLAY_PHONE_DIALOGUE_POST_MID_04 */ void sub_60048()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    int iVar12;
    string sVar13;

     /* WRITESCRIPTLOG */ sub_365( "MF", "P_FAIL_PLAY_PHONE_DIALOGUE_POST_MID_04 - START", 0 );
    iVar12 = GET_RANDOM_INT_IN_RANGE( 0, 3 );
    if (iVar12 == 0)
    {
        sVar13 = "SCLB_MID02C";
    }
    else if (iVar12 == 1)
    {
        sVar13 = "SCLB_MID02F";
    }
    else
    {
        sVar13 = "SCLB_MID02J";
    }
     /* P_SPEECH_PLAY_MONOLOGUE */ sub_54285( sVar13, ref uVar2 );
     /* WRITESCRIPTLOG */ sub_365( "MF", "P_FAIL_PLAY_PHONE_DIALOGUE_POST_MID_04 - END", 0 );
    return;
}

/* IS_ANY_SPEECH_CURRENTLY_PLAYING */ void sub_60402()
{
    int Result;
    int I;

    Result = 0;
    for ( I = 0; I <= 3; I++ )
    {
        Result = (IS_SCRIPTED_CONVERSATION_ONGOING( I )) || (Result);
    }
    return Result;
}

/* P_IMAGEFX_START_BULLETCAM */ void sub_60704(unknown uParam0, boolean bParam1)
{
    PRINTSTRING( "[CO] P_IMAGEFX_START_BULLETCAM: Starting BulletCam: " );
    PRINTSTRING( uParam0 );
    PRINTNL();
     /* CLEANCAMERA */ sub_3167( ref l_U35 );
    l_U35 = CREATE_CAM( "DEFAULT_BULLET_CAMERA", 1 );
    SETUP_BULLET_CAMERA_SCENE( l_U35, uParam0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, "", "" );
    if (bParam1)
    {
        RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    }
    return;
}

/* F_HANDLE_MID_02_FAIL7 */ int sub_61213()
{
    vector vVar2;
    float fVar5;
    vector vVar6;
    vector vVar9;
    vector vVar12;
    vector vVar15;

    vVar2 = {13.41500000, 24.86300000, -0.51200000};
    fVar5 = -180.00000000;
    vVar6 = {-0.47300000, 55.73700000, -1.21169500};
    vVar9 = {0.00000000, 0.00000000, 0.00000000};
    vVar12 = {0.09100000, 0.03900000, -0.03400000};
    vVar15 = {1.60000000, -2.50000000, -3.10000000};
    switch (l_U42)
    {
        case 0: break;
        case 2:
         /* WRITESCRIPTLOG */ sub_365( "SP", "eMid02Fail7State = MIDSCENE_SETUP", 0 );
         /* NIS_PRE_SETUP */ sub_31880( 1, 0, 0, 1 );
        DO_SCREEN_FADE_OUT( 500 );
        l_U42 = 1;
         /* WRITESCRIPTLOG */ sub_365( "SP", "eMid02Fail7State = MIDSCENE_START_FADE", 0 );
        break;
        case 1:
        if (IS_SCREEN_FADED_OUT())
        {
             /* TELEPORTPED */ sub_42558(  /* PLAYER_PED_ID */ sub_610(), vVar2, fVar5 );
            if ((GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_610(), 1, 0 ) )) AND (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() ))))
            {
                REMOVE_PED_WEAPON(  /* PLAYER_PED_ID */ sub_610(), GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_610(), 1, 0 ) );
            }
            ISEQ_REGISTER_ENTITY( 1830675819, "player",  /* PLAYER_PED_ID */ sub_610(), 0 );
            ISEQ_START( 1830675819 );
            l_U42 = 3;
             /* CLEANOBJECT */ sub_4268( l_U806 );
            l_U806 =  /* CREATEOBJECTNOOFFSET */ sub_34875( g_U2479, vVar6, vVar9, 0, 0, 0 );
            if ((DOES_OBJECT_EXIST( l_U806 )) == 1)
            {
                if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )) == 0)
                {
                    ATTACH_OBJECT_TO_PED( l_U806,  /* PLAYER_PED_ID */ sub_610(), 25310, vVar12, vVar15, 0 );
                }
            }
        }
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_365( "SP", "eMid02Fail7State = MIDSCENE_FIRST_FRAME", 0 );
        CAMERA_PLAY_ANIMATED( "LEVEL_S_CLUB_FAIL", "MID_02_NC_FAIL_ORBITAS1_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
        DO_SCREEN_FADE_IN( 500 );
         /* P_FAIL_PLAY_PHONE_DIALOGUE_POST_MID_04 */ sub_60048();
        l_U42 = 4;
         /* WRITESCRIPTLOG */ sub_365( "SP", "eMid02Fail6State = MIDSCENE_PLAYING", 0 );
        break;
        case 4:
        if (NOT ( /* HASTIMERBEENACTIVATED */ sub_1415( ref l_U797 )))
        {
            if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_60402()))
            {
                 /* WRITESCRIPTLOG */ sub_365( "MF", "Max is finished talking, starting fade delay timer...", 0 );
                 /* CREATETIMER */ sub_1543( ref l_U797, 800, 1, 0 );
                 /* STARTTIMER */ sub_1691( ref l_U797 );
            }
        }
        if ((CAMERA_ANIMATED_CURRENT_TIME() > ((CAMERA_ANIMATED_LENGTH( "LEVEL_S_CLUB_FAIL", "MID_02_NC_FAIL_ORBITAS1_CAM" )) - 100)) || ( /* ISTIMERDONE */ sub_1822( ref l_U797 )))
        {
             /* P_IMAGEFX_START_BULLETCAM */ sub_60704( "MISS_DEATH_FAIL_FAST_01A", 0 );
            l_U42 = 5;
             /* WRITESCRIPTLOG */ sub_365( "SP", "eMid02Fail7State = MIDSCENE_END_FADE", 0 );
        }
        break;
        case 5:
        CAMERA_ANIMATED_STOP( 3000, 0 );
         /* CLEANOBJECT */ sub_4268( l_U806 );
        ISEQ_UNREGISTER_ENTITY( 1830675819, "player" );
        ISEQ_TERMINATE( 1830675819 );
        l_U42 = 0;
         /* WRITESCRIPTLOG */ sub_365( "SP", "eMid02Fail7State = MIDSCENE_IDLE", 0 );
        return 1;
        break;
    }
    return 0;
}

/* F_HANDLE_MID_02_FAIL8 */ int sub_62493()
{
    vector vVar2;
    float fVar5;
    vector vVar6;
    vector vVar9;
    vector vVar12;
    vector vVar15;

    vVar2 = {17.85900000, 43.53000000, -1.18700000};
    fVar5 = -180.00000000;
    vVar6 = {-0.47300000, 55.73700000, -1.21169500};
    vVar9 = {0.00000000, 0.00000000, 0.00000000};
    vVar12 = {0.09100000, 0.03900000, -0.03400000};
    vVar15 = {1.60000000, -2.50000000, -3.10000000};
    switch (l_U43)
    {
        case 0: break;
        case 2:
         /* WRITESCRIPTLOG */ sub_365( "SP", "eMid02Fail8State = MIDSCENE_SETUP", 0 );
         /* NIS_PRE_SETUP */ sub_31880( 1, 0, 0, 1 );
        DO_SCREEN_FADE_OUT( 500 );
        l_U43 = 1;
         /* WRITESCRIPTLOG */ sub_365( "SP", "eMid02Fail8State = MIDSCENE_START_FADE", 0 );
        break;
        case 1:
        if (IS_SCREEN_FADED_OUT())
        {
             /* TELEPORTPED */ sub_42558(  /* PLAYER_PED_ID */ sub_610(), vVar2, fVar5 );
            if ((GET_DOES_WEAPON_EXIST( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_610(), 1, 0 ) )) AND (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() ))))
            {
                REMOVE_PED_WEAPON(  /* PLAYER_PED_ID */ sub_610(), GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_610(), 1, 0 ) );
            }
             /* CLEANOBJECT */ sub_4268( l_U806 );
            l_U806 =  /* CREATEOBJECTNOOFFSET */ sub_34875( g_U2479, vVar6, vVar9, 0, 0, 0 );
            if ((DOES_OBJECT_EXIST( l_U806 )) == 1)
            {
                if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_610() )) == 0)
                {
                    ATTACH_OBJECT_TO_PED( l_U806,  /* PLAYER_PED_ID */ sub_610(), 25310, vVar12, vVar15, 0 );
                }
            }
            ISEQ_REGISTER_ENTITY( 1591920885, "player",  /* PLAYER_PED_ID */ sub_610(), 0 );
            ISEQ_START( 1591920885 );
            l_U43 = 3;
        }
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_365( "SP", "eMid02Fail8State = MIDSCENE_FIRST_FRAME", 0 );
        CAMERA_PLAY_ANIMATED( "LEVEL_S_CLUB_FAIL", "MID_02_NC_FAIL_ORBITAS2_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
        DO_SCREEN_FADE_IN( 500 );
         /* P_FAIL_PLAY_PHONE_DIALOGUE_POST_MID_04 */ sub_60048();
        l_U43 = 4;
         /* WRITESCRIPTLOG */ sub_365( "SP", "eMid02Fail8State = MIDSCENE_PLAYING", 0 );
        break;
        case 4:
        if (NOT ( /* HASTIMERBEENACTIVATED */ sub_1415( ref l_U797 )))
        {
            if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_60402()))
            {
                 /* WRITESCRIPTLOG */ sub_365( "MF", "Max is finished talking, starting fade delay timer...", 0 );
                 /* CREATETIMER */ sub_1543( ref l_U797, 800, 1, 0 );
                 /* STARTTIMER */ sub_1691( ref l_U797 );
            }
        }
        if ((CAMERA_ANIMATED_CURRENT_TIME() > ((CAMERA_ANIMATED_LENGTH( "LEVEL_S_CLUB_FAIL", "MID_02_NC_FAIL_ORBITAS2_CAM" )) - 100)) || ( /* ISTIMERDONE */ sub_1822( ref l_U797 )))
        {
             /* P_IMAGEFX_START_BULLETCAM */ sub_60704( "MISS_DEATH_FAIL_FAST_01A", 0 );
            l_U43 = 5;
             /* WRITESCRIPTLOG */ sub_365( "SP", "eMid02Fail8State = MIDSCENE_END_FADE", 0 );
        }
        break;
        case 5:
        CAMERA_ANIMATED_STOP( 3000, 0 );
         /* CLEANOBJECT */ sub_4268( l_U806 );
        ISEQ_UNREGISTER_ENTITY( 1591920885, "player" );
        ISEQ_TERMINATE( 1591920885 );
        l_U43 = 0;
         /* WRITESCRIPTLOG */ sub_365( "SP", "eMid02Fail8State = MIDSCENE_IDLE", 0 );
        return 1;
        break;
    }
    return 0;
}

/* P_LNG_HANDLE_DEBUG */ void sub_63865()
{
    if (NOT l_U1984)
    {
        START_WIDGET_GROUP( "Script Variable Tuner" );
        ADD_WIDGET_INT_SLIDER( "Animated Cam Interp Time", ref l_U1755, 0, 10000, 100 );
        ADD_WIDGET_BOOL( "Activate Giovanna Dress Placement Debug", ref l_U1985 );
         /* P_ADD_WIDGET_VECTOR_SLIDER */ sub_64069( ref l_U1779, "Giovanna Dress Loc", 0.01000000 );
         /* P_ADD_WIDGET_VECTOR_SLIDER */ sub_64069( ref l_U1782, "Giovanna Dress Rot", 0.10000000 );
        START_WIDGET_GROUP( "MID_04 Blend Out Tuner" );
        ADD_WIDGET_INT_SLIDER( "Input Start Time", ref l_U1776, 0, 3000, 100 );
        ADD_WIDGET_INT_SLIDER( "Input Gait Length", ref l_U1777, 0, 2000, 100 );
        ADD_WIDGET_INT_SLIDER( "Camera Stop Time", ref l_U1755, 0, 3000, 100 );
        ADD_WIDGET_INT_SLIDER( "Camera Interp Duration", ref l_U1756, 0, 3000, 100 );
        STOP_WIDGET_GROUP();
        ADD_WIDGET_BOOL( "Force Anders Cutscene", ref l_U1986 );
        STOP_WIDGET_GROUP();
        l_U1984 = 1;
    }
    if (l_U1985)
    {
        if (DOES_OBJECT_EXIST( l_U1778 ))
        {
            SET_OBJECT_COORDS( l_U1778, l_U1779 );
            SET_OBJECT_ROTATION( l_U1778, l_U1782 );
        }
    }
    if (l_U1986)
    {
         /* CLEANPEDARRAY */ sub_3887( ref l_U894 );
        l_U848 = 11;
         /* CUTSYS_CREATESTANDALONECUTSCENE */ sub_58339( ref l_U1559, "02_NC_RANDOM1_concat", 56689, 57237, 57578, 57773, 250, 0 );
        l_U1559._fU4 = 2;
        l_U1986 = 0;
        l_U1586 = 0;
    }
    return;
}

/* P_ADD_WIDGET_VECTOR_SLIDER */ void sub_64069(int iParam0, unknown uParam1, unknown uParam2)
{
    START_WIDGET_GROUP( uParam1 );
    ADD_WIDGET_FLOAT_SLIDER( "x", iParam0 + 0, 60536, 5000, uParam2 );
    ADD_WIDGET_FLOAT_SLIDER( "y", iParam0 + 4, 60536, 5000, uParam2 );
    ADD_WIDGET_FLOAT_SLIDER( "z", iParam0 + 8, 60536, 5000, uParam2 );
    STOP_WIDGET_GROUP();
    return;
}

/* P_UNLOAD_ASSETS */ void sub_64711()
{
     /* WRITESCRIPTLOG */ sub_365( "CR", "P_UNLOAD_ASSETS", 0 );
     /* UNLOADMODEL */ sub_26360( g_U2461 );
     /* UNLOADMODEL */ sub_26360( g_U886 );
     /* UNLOADMODEL */ sub_26360( g_U2465 );
     /* UNLOADMODEL */ sub_26360( g_U2472 );
     /* UNLOADMODEL */ sub_26360( g_U2470 );
     /* UNLOADMODEL */ sub_26360( -1490220040 );
     /* UNLOADMODEL */ sub_26360( 520427342 );
     /* UNLOADWEAPON */ sub_64843( 406496141 );
     /* UNLOADWEAPON */ sub_64843( 1194438308 );
     /* UNLOADMODEL */ sub_26360( -1409914275 );
     /* UNLOADANIMDICT */ sub_64916( "EXPL_CAM" );
     /* UNLOADANIMDICT */ sub_64916( "LEVEL_S_CLUB_CP_03" );
    return;
}

/* UNLOADWEAPON */ void sub_64843(unknown uParam0)
{
    SET_WEAPON_AS_NO_LONGER_NEEDED( uParam0 );
    return;
}

/* UNLOADANIMDICT */ void sub_64916(unknown uParam0)
{
    REMOVE_ANIM_DICT( uParam0, 0 );
    return;
}

