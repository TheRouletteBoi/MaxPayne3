void main()
{
    l_U0 = 1;
    l_U1 = 144;
    l_U2 = "PED_DEF";
    l_U44 = 1.00000000;
    l_U56 = 0;
    l_U97 = 0;
    l_U117 = 1;
    l_U118 = 1;
    l_U158 = 0;
    l_U170 = 0;
    l_U171 = 1;
    l_U172 = 0;
    l_U173 = 1.00000000;
    l_U174 = -5.00000000;
    l_U175 = 0;
    l_U176 = 0;
    l_U177 = 0;
    l_U181 = 42;
    l_U182 = 0;
    l_U183 = 0;
    l_U184 = 0;
    l_U185 = 0;
    l_U186 = 0;
    l_U187 = 90.00000000;
    l_U188 = {0.00000000, 0.00000000, 0.00000000};
    l_U191 = {0.00000000, 0.00000000, 0.00000000};
    l_U194 = 0;
    l_U195 = 0;
    l_U196 = 0;
    l_U197 = 0;
    l_U198 = 0;
    l_U199 = 0;
    l_U200 = nil;
    l_U201 = {0.00000000, 0.00000000, 0.00000000};
    l_U204 = 0;
    l_U205 = 0;
    l_U206 = 0;
    l_U258 = 0;
    l_U259 = 0;
    l_U260 = 1;
    l_U262 = 0;
    l_U263 = 0;
    l_U264 = 1500;
    StrCopy( ref l_U276, "04_02_nybar_concat", 32 );
    l_U284 = "04_02_nybar_sh1";
    l_U388 = 0;
    l_U389 = 0;
    l_U390 = {0, 0, 0};
    StrCopy( ref l_U393, "DUMMY", 32 );
    l_U401 = 1;
    l_U406 = 0;
    l_U407 = 0;
    l_U408 = 0;
    l_U411 = 0;
    l_U457 = 0;
    l_U459 = 1;
    l_U460 = 0;
    l_U461 = 1;
    l_U462 = 0;
    StrCopy( ref l_U473, "mid_01_nybar_concat", 32 );
    l_U499 = 4;
    l_U559 = 0;
    l_U560 = {g_U2253[5]._fU0};
    l_U563 = g_U2253[5]._fU12;
    l_U567 = 0;
    l_U568 = 0;
    l_U768 = 0;
    l_U769 = 0;
    l_U1356 = 112;
    l_U1357 = 207;
    l_U1358 = 210;
    l_U1359 = 213;
    l_U1360 = 228;
    l_U1361 = 0;
    l_U1362 = 1;
    l_U1363 = "S_NYC_ALLEY_CAR_RUNDOWN_B";
    l_U1364 = "S_NYC_ALLEY_CAR_RUNDOWN_C";
    l_U1377 = 0;
    l_U1378 = 0;
    l_U1379 = 0;
    l_U1380 = 0;
    l_U1384 = 0;
    l_U1385 = 0;
    l_U1386 = {-53.82198000, -338.01680000, 4.20000000};
    l_U1389 = 66.36501000;
    l_U1390 = 0;
    l_U1391 = 0;
    l_U1392 = 0;
    l_U1393 = 0;
    l_U1394 = {-60.12000000, -341.15000000, 3.63000000};
    l_U1397 = 90.00000000;
    l_U1398 = 0;
    l_U1399 = 0;
    l_U1400 = "PASSOS~n~Go check it out, Max.  I've got your back.";
    l_U1401 = "SNYC_PLPB";
    l_U1402 = "PASSOS~n~Max, down the alley. I'll cover you.";
    l_U1735 = {-75.67000000, -328.13000000, 0.25000000};
    l_U1759 = -1;
    l_U1760 = 0;
    l_U1876 = 0;
    l_U1877 = 0;
    l_U1878 = 0;
    l_U1879 = 0;
    l_U1889 = 0;
    l_U1890 = 0;
    l_U1891 = 1;
    l_U1892 = 0;
    l_U1893 = 0;
    l_U1894 = 0;
    l_U1895 = 0;
     /* WRITESCRIPTLOG */ sub_1129( "RJM", "Script s_nyc_alley.sc is starting...", " " );
     /* LOAD_ASSETS_ALLEY */ sub_1247();
     /* SETUP_ALLEY_STATIC_DATA */ sub_2467();
     /* P_LOAD_WEAPONS */ sub_5835( 4, 1 );
     /* INITIALIZE_ALLEY_SCRIPT_DATA */ sub_6092();
     /* INITIALIZE_PLAYER_BY_DEBUG_MENU_CHECKPOINT */ sub_6784();
    if ((SCRIPT_VAR_EXISTS( "SP_SV_PASSOS_KILLS" )) == 0)
    {
        SCRIPT_VAR_ADD_INT( "SP_SV_PASSOS_KILLS" );
        SCRIPT_VAR_SET_INT( "SP_SV_PASSOS_KILLS", 0 );
    }
    l_U457 = 0;
    while (NOT IS_EXITFLAG_SET())
    {
        if (g_U2454[1])
        {
            SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        }
        else if (l_U45)
        {
             /* P_HANDLE_CAR_RECORDING_TESTS */ sub_23362();
        }
        else if (g_U2198)
        {
             /* P_HANDLE_MUSIC */ sub_25697();
        }
         /* P_HANDLE_CHECKPOINTS */ sub_29154();
         /* P_HANDLE_START_EVENTS */ sub_38519();;;
        WAIT( 0 );
    }
     /* CLEANUP_ALLEY */ sub_36188( 1 );
     /* UNLOAD_ALL_ASSETS_ALLEY */ sub_90037();
     /* P_UNLOAD_WEAPONS */ sub_90217( 4 );
     /* WRITESCRIPTLOG */ sub_1129( "RJM", "Script s_nyc_alley.sc is ending", " " );
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "s_nyc_alley" );
    SET_EXITFLAG_RESPONSE();
    if (NOT g_U2201)
    {
        if (IS_MAGDEMO())
        {
             /* P_FADE_OUT_AND_WAIT */ sub_89481( 500 );
            g_U1929._fU64 = 0;
            g_U2454[0] = 0;
            g_U2454[1] = 0;
            g_U2454[9] = 0;
            g_U2198 = 0;
            g_U2199 = 0;
            g_U2200 = 0;
            g_U2201 = 0;
             /* P_RESET_CHECKPOINT_THREAD */ sub_90476( ref g_U751[2] );
             /* P_RESET_CHECKPOINT_THREAD */ sub_90476( ref g_U751[3] );
             /* P_RESET_CHECKPOINT_THREAD */ sub_90476( ref g_U751[4] );
             /* P_RESET_CHECKPOINT_THREAD */ sub_90476( ref g_U751[5] );
            g_U723 = 2;
            g_U724 = 2;
            g_U751[2]._fU36 = 1;
        }
        else if (IS_ARCADE_MODE_ACTIVE() == 0)
        {
            SWITCH_TO_LEVEL_NAME( "s_nyc2" );
        }
    }
    return;
}

/* WRITESCRIPTLOG */ void sub_1129(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    DISPLAYF( "[{0}][{1}]{3} {2} {3}", 4, 513, uVar5, 1537, uParam0, 1537, uParam1, 1537, sParam2 );
    return;
}

/* LOAD_ASSETS_ALLEY */ void sub_1247()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "LOAD_ASSETS_ALLEY", "***" );
     /* LOADMODEL */ sub_1320( 557810561, 1 );
     /* LOADMODEL */ sub_1320( 1839686620, 1 );
     /* LOADMODEL */ sub_1320( g_U2249, 1 );
     /* LOADMODEL */ sub_1320( g_U722, 1 );
     /* LOAD_NYC_CAR_RECORDINGS */ sub_1642();
     /* SETUP_SCRIPTED_SPEECH */ sub_1917( "SNYCAUD" );
     /* LOADANIMDICT */ sub_2096( "FACE_PASNYB", 0, 1 );
     /* LOADACTIONTREE */ sub_2305( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act", 1 );
    return;
}

/* LOADMODEL */ void sub_1320(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
         /* WRITE_STRING */ sub_1437( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* WRITE_STRING */ void sub_1437(unknown uParam0)
{
    PRINTSTRING( uParam0 );
    PRINTNL();
    return;
}

/* LOAD_NYC_CAR_RECORDINGS */ void sub_1642()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "LOAD_NYC_CAR_RECORDINGS", "***" );
     /* LOADVEHICLERECORDING */ sub_1727( l_U1359, 1 );
     /* LOADVEHICLERECORDING */ sub_1727( l_U1360, 1 );
    return;
}

/* LOADVEHICLERECORDING */ void sub_1727(unknown uParam0, int iParam1)
{
    REQUEST_VEHICLE_RECORDING( uParam0 );
    if (iParam1 == 1)
    {
        while ((HAS_VEHICLE_RECORDING_BEEN_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for a recording to be loaded: Rec# {} ###", 1, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* SETUP_SCRIPTED_SPEECH */ void sub_1917(unknown uParam0)
{
    StrCopy( ref g_U157._fU0, uParam0, 16 );
     /* CLEARPEDCONVERSATIONDATA */ sub_1961();
    return;
}

/* CLEARPEDCONVERSATIONDATA */ void sub_1961()
{
    int I;

    for ( I = 0; I <= 8; I++ )
    {
        g_U157._fU16[I]._fU0 = nil;
        g_U157._fU16[I]._fU4 = 0;
        g_U157._fU92[I] = 0;
    }
    return;
}

/* LOADANIMDICT */ void sub_2096(unknown uParam0, unknown uParam1, int iParam2)
{
    REQUEST_ANIM_DICT( uParam0, uParam1 );
    "[doubled result, dropped if not asigned]";
    if (iParam2 == 1)
    {
        while ((HAS_ANIM_DICT_LOADED( uParam0, uParam1 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an animation dictionary to be loaded: {} ###", 1, 1537, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADACTIONTREE */ void sub_2305(unknown uParam0, int iParam1)
{
    ACTION_TREE_LOAD( uParam0 );
    if (iParam1 == 1)
    {
        while ((IS_ACTION_TREE_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an Action Tree to be loaded: {} ###", 1, 1537, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* SETUP_ALLEY_STATIC_DATA */ void sub_2467()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "SETUP_ALLEY_STATIC_DATA", "***" );
     /* P_CREATETRIGGERBOX */ sub_2623( ref l_U1011, "TRIG_ALLEY_CHECKPOINT", -11.49000000, -323.90000000, -4.26000000, 7.00000000, 10.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_2623( ref l_U1032, "TRIG_ALLEY_TOP_STAIRS", -11.34000000, -316.45000000, -1.00000000, 7.00000000, 4.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATEVARIANTBOX */ sub_2885( ref l_U1158, "TRIG_PARK_PASSOS_SHOOT", -21.27000000, -321.19000000, -1.00000000, 9.00000000, 7.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_2623( ref l_U1159, "TRIG_ALLEY_PASSOS_SHOOT", -74.20000000, -326.76000000, 0.00000000, 12.00000000, 9.75000000, 4.00000000, 0.00000000, 0.00000000, -16.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_2623( ref l_U1180, "TRIG_ALLEY_PASSOS_SHOOT2", -68.32000000, -327.30000000, 0.00000000, 4.00000000, 6.00000000, 4.00000000, 0.00000000, 0.00000000, 10.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_2623( ref l_U1243, "TRIG_SAFE_FOR_VIG07B", -37.30000000, -326.63000000, -0.60000000, 30.00000000, 17.61000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_2623( ref l_U1053, "TRIG_MID01_START_NYBAR", -39.00000000, -326.99000000, -0.50000000, 20.00000000, 9.00000000, 4.38000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_2623( ref l_U1074, "TRIG_MID01_WALK_NYBAR", -28.97000000, -327.46000000, -0.04000000, 8.00000000, 9.00000000, 4.38000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_2623( ref l_U1137, "TRIG_ALLEY_MAX_LEAVE_COVER", -45.74000000, -333.34000000, -0.10000000, 4.50000000, 4.50000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_2623( ref l_U1095, "TRIG_ALLEY_START_FINAL_BLOCKERS", -54.96000000, -328.40000000, -0.50000000, 10.00000000, 14.00000000, 4.00000000, 0.00000000, 0.00000000, -7.50000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_2623( ref l_U1116, "TRIG_SWITCH_1ST_TETHER", -78.71000000, -330.40000000, 0.00000000, 35.00000000, 25.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_2623( ref l_U1222, "KILL_VOLUME_ALLEY", -61.63000000, -330.00000000, -1.08000000, 114.19000000, 57.00000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_2623( ref l_U1264, "TRIG_PASSOS_FIRE_ESCAPE", -73.96000000, -333.43000000, 2.65000000, 3.00000000, 3.00000000, 3.25000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_2623( ref l_U1201, "TRIG_DUMMY_PASSOS", 1000, 1000, 1000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_2623( ref l_U1285, "PASSOS_N1_COVER_WARNING", -17.92000000, -320.36000000, -5.00000000, 23.00000000, 34.00000000, 9.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_2623( ref l_U1306, "PASSOS_N3_4_COVER_WARNING", -53.15600000, -333.40000000, -0.20000000, 49.00000000, 30.00000000, 6.00000000, 0.00000000, 0.00000000, -180.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_2623( ref l_U1327, "PASSOS_N3_4_COVER_DEATH", -52.64800000, -333.40000000, -0.60000000, 67.00000000, 36.00000000, 6.00000000, 0.00000000, 0.00000000, 180.00000000, 1 );
     /* P_CREATEVARIANTBOX */ sub_2885( ref l_U1348, "TRIG_ALLEY_DEATH_SHOT", -76.59000000, -327.51000000, 0.00000000, 6.00000000, 5.50000000, 4.00000000, 0.00000000, 0.00000000, -5.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_4280( ref l_U1349, "TETH_ALLEY_PARKING", -21.94000000, -317.00000000, -1.50000000, 13.00000000, 25.00000000, 6.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_4280( ref l_U1350, "TETH_ALLEY_PARKING2", -20.47000000, -330.70000000, -1.50000000, 16.00000000, 4.00000000, 4.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_4280( ref l_U1351, "TETH_ALLEY_PARKING3", -18.90000000, -310.66000000, -1.50000000, 10.45000000, 8.00000000, 4.50000000, 0.00000000, 0.00000000, 5.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_4280( ref l_U1352, "TETH_ALLEY_1ST_BLOCKER_FWD", -48.07000000, -328.59000000, 0.00000000, 40.00000000, 12.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_4280( ref l_U1353, "TETH_ALLEY_1ST_BLOCKER_SWITCH", -69.94000000, -328.14300000, 0.00000000, 15.00000000, 9.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_4280( ref l_U1354, "TETH_ALLEY_2ND_BLOCKER", -71.86000000, -328.56000000, 0.00000000, 10.29000000, 9.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_4280( ref l_U1355, "TETH_ALLEY_LAST_BLOCKER", -78.73000000, -328.03000000, 0.00000000, 10.00000000, 9.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U786[0], -39.37376000, -324.44660000, 0.38853000, -84.31000000, 812785529, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U786[1], -37.45781000, -324.95080000, 0.27814100, -84.31000000, -1813863951, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U786[2], -35.46360000, -325.20510000, 0.26579800, -74.31000000, -573870471, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U836[0], -96.16000000, -322.94000000, 0.26000000, -84.31000000, -1633679208, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U836[1], -95.19000000, -323.17000000, 0.26000000, -84.31000000, 1143414953, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U836[2], -93.24000000, -323.63000000, 0.26000000, -74.31000000, 2108318266, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U894[0], -95.11967000, -319.21370000, 0.26429200, -70.90000000, -1305081679, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U894[1], -94.11967000, -319.21370000, 0.26429200, -70.90000000, -584940451, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U939[0], -95.11967000, -317.21370000, 0.26429200, -70.90000000, -101589531, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U939[1], -94.11967000, -317.21370000, 0.26429200, -70.90000000, 1709395105, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U998, g_U725[4]._fU0, g_U725[4]._fU12, -1756913695, 26, 6, 0, 0, 0 );
    l_U1511[0] = {-1, -1, -1};
    l_U1527[0] = -1.00000000;
    l_U1533[0] = 107.79710000;
    l_U1539[0] = -10.92217000;
    l_U1511[1] = {-16.75502000, -313.14930000, -0.66228500};
    l_U1527[1] = 133.70000000;
    l_U1533[1] = 18.57515000;
    l_U1539[1] = -11.77375000;
    l_U1511[2] = {-20.21702000, -317.11740000, -0.66228500};
    l_U1527[2] = 138.30900000;
    l_U1533[2] = 2.59308100;
    l_U1539[2] = -6.63165600;
    l_U1511[3] = {-16.01090000, -329.35120000, -0.59761100};
    l_U1527[3] = 79.81203000;
    l_U1533[3] = 1.75007200;
    l_U1539[3] = -4.30872200;
    l_U1511[4] = {-23.04764000, -328.13320000, -0.57280300};
    l_U1527[4] = 341.24210000;
    l_U1533[4] = -31.27048000;
    l_U1539[4] = -15.53709000;
    l_U1545 = l_U1533[0];
    l_U1546 = l_U1539[0];
    return;
}

/* P_CREATETRIGGERBOX */ void sub_2623(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    StrCopy( ref iParam0->_fU0, uParam1, 64 );
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = {uParam2};
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 1, iParam0 + 0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* P_CREATEVARIANTBOX */ void sub_2885(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 4, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* P_CREATETETHERBOX */ void sub_4280(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 2, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* P_CREATEPEDSTRUCTWITHNAME */ void sub_4894(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

/* P_LOAD_WEAPONS */ void sub_5835(unknown uParam0, unknown uParam1)
{
     /* LOADWEAPON */ sub_5868( -862236369, 1 );
    switch (uParam0)
    {
        case 0:
        case 2:
        case 4:
        case 5:
         /* LOADWEAPON */ sub_5868( 434544317, uParam1 );
        break;
        case 3: break;
    }
    return;
}

/* LOADWEAPON */ void sub_5868(unknown uParam0, boolean bParam1)
{
    REQUEST_WEAPON( uParam0 );
    if (bParam1)
    {
        while ((HAS_WEAPON_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load weapon: {!f1} : {1} ###", 2, 1, 199730165, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* INITIALIZE_ALLEY_SCRIPT_DATA */ void sub_6092()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "INITIALIZE_ALLEY_SCRIPT_DATA", "***" );
    l_U1758 = 0;
    l_U1757 = 0;
    l_U1756 = 0;
    l_U1749 = 0;
    l_U1750 = 0;
    l_U1751 = -1;
    l_U1752 = -1;
    l_U1753 = -1;
    l_U1754 = -1;
    l_U1748 = -1;
    l_U1755 = 0;
    l_U559 = 0;
    l_U1366 = 0;
    l_U1367 = 0;
    l_U1368 = 0;
    l_U1369 = 0;
    l_U1370 = 0;
    l_U1371 = 0;
    l_U1372 = 0;
    l_U1373 = 0;
    l_U1374 = 0;
    l_U1375 = 0;
    l_U1390 = 0;
    l_U1391 = 0;
    l_U1392 = 0;
    l_U1393 = 0;
    l_U1365 = 0;
    l_U1398 = 0;
    l_U1376 = 0;
    l_U1377 = 0;
    l_U1378 = 0;
    l_U1379 = 0;
    l_U1380 = 0;
    l_U1381 = 0;
    l_U1382 = 0;
    l_U1385 = 0;
    l_U1384 = 0;
    l_U1399 = 0;
    l_U1759 = -1;
    l_U1760 = 0;
    l_U1865 = 2;
    l_U1747 = 0;
    l_U1869 = 0;
    l_U568 = 0;
    l_U1383 = 0;
     /* RESETTIMER */ sub_6455( ref l_U1412 );
     /* RESETTIMER */ sub_6455( ref l_U1493 );
     /* RESETTIMER */ sub_6455( ref l_U1502 );
    l_U1877 = 0;
    l_U1878 = 0;
    l_U1879 = 0;
    l_U1889 = 0;
     /* CREATETIMER */ sub_6630( ref l_U1880, 1000, 1, 0 );
    return;
}

/* RESETTIMER */ void sub_6455(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

/* CREATETIMER */ void sub_6630(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

/* INITIALIZE_PLAYER_BY_DEBUG_MENU_CHECKPOINT */ void sub_6784()
{
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
    if (g_U723 == 4)
    {
         /* WRITESCRIPTLOG */ sub_1129( "RJM", "INITIALIZE_PLAYER_BY_DEBUG_MENU_CHECKPOINT says we're in MCE_BACK_ALLEY", " " );
        l_U459 = 1;
        if (NOT ( /* HAS_SAVEFILE_LOADED */ sub_6959( ref l_U569 )))
        {
             /* F_GIVEPEDWEAPON */ sub_9648(  /* PLAYER_PED_ID */ sub_7106(),  /* GET_STARTING_WEAPON */ sub_11700( 4 ), 200, 0, 1 );
        }
         /* P_CREATE_S_NY1_GG_19_03 */ sub_11760();
        g_U724 = 4;
        g_U2198 = 1;
    }
    else if (g_U723 == 5)
    {
         /* WRITESCRIPTLOG */ sub_1129( "RJM", "INITIALIZE_PLAYER_BY_DEBUG_MENU_CHECKPOINT says we're in MCE_ALLEY_FIGHT", " " );
        l_U459 = 3;
        if (NOT ( /* HAS_SAVEFILE_LOADED */ sub_6959( ref l_U605 )))
        {
             /* F_GIVEPEDWEAPON */ sub_9648(  /* PLAYER_PED_ID */ sub_7106(),  /* GET_STARTING_WEAPON */ sub_11700( 5 ), 200, 0, 1 );
        }
        g_U724 = 5;
         /* P_PREPARE_ALLEY_FIGHT_START */ sub_12955();
        g_U2198 = 1;
        l_U1758 = 8;
    }
    else
    {
         /* P_CREATE_S_NY1_GG_19_03 */ sub_11760();
    }
    return;
}

/* HAS_SAVEFILE_LOADED */ int sub_6959(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_1129( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U0 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U1 );
             /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_7200( uParam0,  /* PLAYER_PED_ID */ sub_7106() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

/* PLAYER_PED_ID */ int sub_7106()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED(  /* PLAYER_ID */ sub_7144() );
    }
    return 0;
}

/* PLAYER_ID */ void sub_7144()
{
    return GET_PLAYER_ID();
}

/* P_RESTORE_PLAYER_DATA_CHECKPOINT */ void sub_7200(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

     /* WRITESCRIPTLOG */ sub_1129( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U0)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
     /* CLOSE_CURRENT_LEVEL_CONTEXT */ sub_7419( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
         /* LOADCOLLISIONFORPED */ sub_8583( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_8897( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_9332( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_8897( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_9332( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_8897( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_9332( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPON */ sub_9648( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_9332( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPON */ sub_9648( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_9332( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U0 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if (( /* F_CAN_GIVE_AMMO_TO_REGULAR_WEAPON_TYPE */ sub_10220( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
     /* START_NEW_LEVEL_CONTEXT */ sub_10422( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING(  /* PLAYER_PED_ID */ sub_7106(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U0)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U0 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
     /* WRITESCRIPTLOG */ sub_1129( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

/* CLOSE_CURRENT_LEVEL_CONTEXT */ void sub_7419(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_7481( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

/* GET_MISSION_INDEX_FROM_NAME */ int sub_7481(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    }
    else
    {
        PRINTSTRING( uParam0 );
        PRINTSTRING( uParam0 );
        PRINTSTRING( uParam0 );
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

/* LOADCOLLISIONFORPED */ void sub_8583(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

/* F_GIVEPEDWEAPONTOHOLSTER */ void sub_8897(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_1437( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* P_RESTORE_WEAPON_ATTACHMENTS */ void sub_9332(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

/* F_GIVEPEDWEAPON */ void sub_9648(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_1437( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* F_CAN_GIVE_AMMO_TO_REGULAR_WEAPON_TYPE */ int sub_10220(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

/* START_NEW_LEVEL_CONTEXT */ void sub_10422(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_7481( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
     /* CLEAR_GG_CONTEXTS */ sub_10520( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

/* CLEAR_GG_CONTEXTS */ void sub_10520(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

/* GET_STARTING_WEAPON */ int sub_11700(unknown uParam0)
{
    uParam0 = uParam0;
    return -862236369;
}

/* P_CREATE_S_NY1_GG_19_03 */ void sub_11760()
{
     /* WRITESCRIPTLOG */ sub_1129( "CO", "P_CREATE_S_NY1_GG_19_03", 0 );
     /* P_CREATECOLLECTIBLESTRUCT */ sub_11888( ref g_U701, g_U722, 875640035, -559255354, -10.09000000, -322.03000000, -4.09000000, 1.50000000, 0.00000000, g_U719, "" );
     /* P_CREATECOLLECTIBLE */ sub_12045( ref g_U701 );
    return;
}

/* P_CREATECOLLECTIBLESTRUCT */ void sub_11888(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    if (NOT IS_ARCADE_MODE_ACTIVE())
    {
        iParam0->_fU4 = uParam1;
        iParam0->_fU8 = uParam2;
        iParam0->_fU12 = uParam3;
        iParam0->_fU16 = {uParam4};
        iParam0->_fU28 = {uParam7};
        StrCopy( ref iParam0->_fU40, uParam10, 32 );
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_1129( "CO", "NO GOLDEN GUNS FOR ARCADE", 0 );
    }
    return;
}

/* P_CREATECOLLECTIBLE */ void sub_12045(int iParam0)
{
     /* WRITESCRIPTLOG */ sub_1129( "CO", "P_CreateCollectible", 0 );
    if (NOT IS_ARCADE_MODE_ACTIVE())
    {
        if (( /* F_HAS_COLLECTIBLE_BEEN_COLLECTED */ sub_12128( iParam0->_fU12 )) == 1)
        {
             /* WRITESCRIPTLOG */ sub_1129( "CO", "HAS BEEN COLLECTED.", 0 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_1129( "CO", "has never been collected.", 0 );
        }
        if (( /* F_HAS_COLLECTIBLE_BEEN_COLLECTED */ sub_12128( iParam0->_fU12 )) == 0)
        {
             /* CLEANPLACEMENT */ sub_12368( iParam0->_fU0 );
            iParam0->_fU0 =  /* CREATEPLACEMENT */ sub_12453( iParam0->_fU8, iParam0->_fU16, iParam0->_fU28, 1, 0, 0, 1119092736 );
            if (NOT (IS_STRING_NULL( iParam0 + 40 )))
            {
                if ((DOES_PLACEMENT_EXIST( iParam0->_fU0 )) == 1)
                {
                     /* WRITESCRIPTLOG */ sub_1129( "CO", "Added collectible to interior", 0 );
                    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( iParam0->_fU0, iParam0 + 40 );
                }
            }
        }
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_1129( "CO", "NO GOLDEN GUNS FOR ARCADE", 0 );
    }
    return;
}

/* F_HAS_COLLECTIBLE_BEEN_COLLECTED */ int sub_12128(unknown uParam0)
{
    unknown uVar3;
    float fVar4;

    if (IS_COLLECTABLE_ENABLED() == 0)
    {
        return 1;
    }
    uVar3 = uParam0;
    fVar4 = STAT_HASH_GET_FLOAT( uVar3 );
    if (ARE_SP_STATS_LOADED() == 1)
    {
        if ((STAT_HASH_EXISTS( uVar3 )) == 1)
        {
            if (fVar4 > 0.00000000)
            {
                return 1;
            }
        }
    }
    return 0;
}

/* CLEANPLACEMENT */ void sub_12368(unknown uParam0)
{
    if ((DOES_PLACEMENT_EXIST( uParam0 )) == 1)
    {
        REMOVE_PLACEMENT( uParam0 );
    }
    return;
}

/* CREATEPLACEMENT */ void sub_12453(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, int iParam8, unknown uParam9, unknown uParam10)
{
    unknown Result;

    Result = CREATE_PLACEMENT_ROTATE( uParam0, uParam1, uParam4, uParam7, 0, uParam9, uParam10 );
    if (iParam8 == 1)
    {
        while ((DOES_PLACEMENT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for a placement to exist: {} ###", 1, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return Result;
}

/* P_PREPARE_ALLEY_FIGHT_START */ void sub_12955()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_PREPARE_ALLEY_FIGHT_START", "***" );
    STOP_SCRIPT_STREAM( l_U1361 );
    STOP_SCRIPT_STREAM( l_U1362 );
     /* LOADSCRIPTSTREAM */ sub_13077( l_U1363, l_U1361, 1 );
     /* LOADSCRIPTSTREAM */ sub_13077( l_U1364, l_U1362, 1 );
     /* P_INIT_PASSOS_WARNING_DEATH */ sub_13267();
     /* CREATE_MIDSCENE_01_CARS_AND_ENEMIES */ sub_13368();
     /* CREATE_PARKING_LOT_ENEMIES */ sub_17282();
     /* P_FREEZE_PED_ARRAY */ sub_19220( ref l_U668, 0 );
     /* P_FREEZE_PED_ARRAY */ sub_19220( ref l_U698, 0 );
     /* P_FREEZE_PED_ARRAY */ sub_19220( ref l_U715, 0 );
     /* LOADISEQ */ sub_20055( -850158086, 1 );
     /* LOADANIMDICT */ sub_2096( "LEVEL_S_NYBAR_MID_01_BLENDOUT", 0, 1 );
     /* P_KILL_PEDS_IN_ARRAY */ sub_20390( ref l_U668 );
     /* P_KILL_PEDS_IN_ARRAY */ sub_20390( ref l_U698 );
     /* P_KILL_PEDS_IN_ARRAY */ sub_20390( ref l_U715 );
     /* P_KILL_PEDS_IN_ARRAY */ sub_20390( ref l_U826 );
    if (( /* IS_VEHICLE_VALID */ sub_14464( l_U779 )) == 1)
    {
        SET_VEHICLE_COORDS( l_U779, -59.98630000, -328.48000000, 0.62083100 );
        SET_VEHICLE_HEADING( l_U779, 314.14600000 );
        SET_VEHICLE_ON_GROUND_PROPERLY( l_U779 );
    }
     /* TELEPORTPED */ sub_20673( l_U876[2], -61.24000000, -327.30000000, 0.28000000, 270 );
     /* P_EXIT_1ST_BLOCKER_CAR */ sub_20744();
    l_U559 = 1;
    ISEQ_REGISTER_ENTITY( -850158086, "max",  /* PLAYER_PED_ID */ sub_7106(), 0 );
     /* TELEPORTPED */ sub_20673(  /* PLAYER_PED_ID */ sub_7106(), g_U2253[5]._fU0, g_U2253[5]._fU12 );
    ISEQ_START( -850158086 );
     /* F_HANDLE_MID_01_BLEND */ sub_21546();
     /* NIS_PRE_SETUP */ sub_22735( 1, 0, 0, 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (NOT ( /* F_IMAGEFX_FADE_IN */ sub_22922()))
        {
            DO_SCREEN_FADE_IN( 0 );
        }
    }
    return;
}

/* LOADSCRIPTSTREAM */ void sub_13077(unknown uParam0, unknown uParam1, int iParam2)
{
    if (iParam2 == 0)
    {
        REQUEST_SCRIPT_STREAM( uParam0, uParam1 );
    }
    else
    {
        while ((LOAD_SCRIPT_STREAM( uParam0, uParam1 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for script stream to be loaded: {} : {} ###", 2, 1537, uParam0, 513, uParam1 );
            WAIT( 0 );
        }
    }
    return;
}

/* P_INIT_PASSOS_WARNING_DEATH */ void sub_13267()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_INIT_PASSOS_WARNING_DEATH", "***" );
    l_U97 = 1;
    return;
}

/* CREATE_MIDSCENE_01_CARS_AND_ENEMIES */ void sub_13368()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1129( "SBA", "CREATE_MIDSCENE_01_CARS_AND_ENEMIES", "***" );
     /* P_INIT_CAR_ENEMY_VARS */ sub_13471();
     /* P_LOAD_VIG08B_ASSETS */ sub_13841();
    l_U779 =  /* CREATEVEHICLE */ sub_14039( 557810561, -108.86600000, -316.92500000, 2.40000000, 0.00000000, 0, 0, 0 );
     /* P_SET_STANDARD_VEHICLE_OPTIONS */ sub_14359( l_U779, 1, 1 );
     /* P_SET_VEHICLE_LIGHTS */ sub_14796( ref l_U779, 1, 0.25000000 );
    if ( /* IS_VEHICLE_VALID */ sub_14464( l_U779 ))
    {
        SET_VEHICLE_COLOUR_COMBINATION( l_U779, 5 );
        SET_VEHICLE_EXTRA( l_U779, 1, 0 );
        SET_VEHICLE_EXTRA( l_U779, 2, 0 );
        SET_VEHICLE_EXTRA( l_U779, 3, 1 );
        SET_VEHICLE_EXTRA( l_U779, 4, 1 );
        SET_VEHICLE_EXTRA( l_U779, 5, 1 );
        SET_VEHICLE_EXTRA( l_U779, 6, 1 );
        SET_VEHICLE_EXTRA( l_U779, 7, 1 );
        SET_VEHICLE_EXTRA( l_U779, 8, 1 );
    }
     /* P_SETUP_AI_GROUP */ sub_15168( ref l_U880, 1056964608, 0 );
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "CREATE_MIDSCENE_01_CARS_AND_ENEMIES: Setup first car enemies", "***" );
    for ( I = 0; I <= 2; I++ )
    {
         /* CLEANPED */ sub_15654( l_U876[I] );
         /* PED_INITIALIZE */ sub_15782( ref l_U836[I], ref l_U876[I], -862236369, "AIT_NORMAL", 0, 25000, 2, 0, 25000 );
        if ( /* IS_PED_VALID */ sub_16533( l_U876[I] ))
        {
             /* P_QUICK_ADD_PED_TO_GROUP */ sub_16840( l_U876[I], ref l_U880 );
            SET_PED_NAME_DEBUG( l_U876[I], l_U886[I] );
            SET_PED_ONLY_DAMAGED_BY_PLAYER( l_U876[I], 1 );
        }
    }
    return;
}

/* P_INIT_CAR_ENEMY_VARS */ void sub_13471()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_INIT_CAR_ENEMY_VARS", "***" );
    l_U890[0] = -1;
    l_U890[1] = 0;
    l_U890[2] = 2;
    l_U933[0] = -1;
    l_U933[1] = 0;
    l_U978[0] = -1;
    l_U978[1] = 0;
    l_U886[0] = "piEnemyCar1[0]";
    l_U886[1] = "piEnemyCar1[1]";
    l_U886[2] = "piEnemyCar1[2]";
    l_U930[0] = "GMED3";
    l_U930[1] = "GMED";
    l_U975[0] = "GMED7";
    l_U975[1] = "GMED4";
     /* SET_BOOL_ARRAY */ sub_13752( ref l_U936, 0 );
     /* SET_BOOL_ARRAY */ sub_13752( ref l_U981, 0 );
    return;
}

/* SET_BOOL_ARRAY */ void sub_13752(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        (uParam0^)[I] = uParam1;
    }
    return;
}

/* P_LOAD_VIG08B_ASSETS */ void sub_13841()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_LOAD_VIG08B_ASSETS", "***" );
     /* LOADANIMDICT */ sub_2096( "LEVEL_S_NYBAR_CP_02", 0, 1 );
     /* LOADANIMDICT */ sub_2096( "VEH@CAR_GENSEDAN", 0, 1 );
     /* LOADACTIONTREE */ sub_2305( "Vehicle/Vehicle_Car.act", 1 );
    return;
}

/* CREATEVEHICLE */ void sub_14039(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, int iParam5, unknown uParam6, unknown uParam7)
{
    unknown Result;

    if ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a vehicle with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_1320( uParam0, 1 );
    }
    Result = CREATE_VEHICLE( uParam0, uParam1, uParam4, uParam6, uParam7 );
    if (iParam5 == 1)
    {
        while ((DOES_VEHICLE_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for vehicle to exist: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    if (DOES_VEHICLE_EXIST( Result ))
    {
        SET_PETROLTANK_BURN_RATE( Result, 125.00000000 );
    }
    return Result;
}

/* P_SET_STANDARD_VEHICLE_OPTIONS */ void sub_14359(unknown uParam0, boolean bParam1, unknown uParam2)
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_SET_STANDARD_VEHICLE_OPTIONS: Starting", "***" );
    if ( /* IS_VEHICLE_VALID */ sub_14464( uParam0 ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_SET_STANDARD_VEHICLE_OPTIONS: Car Valid - setting options", "***" );
        SET_VEHICLE_ON_GROUND_PROPERLY( uParam0 );
        SET_VEHICLE_CAN_BE_DAMAGED( uParam0, 1 );
        if (bParam1)
        {
            SET_VEHICLE_ENGINE_ON( uParam0, 1, 1 );
        }
        SET_VEHICLE_ENGINE_HEALTH( uParam0, 600.00000000 );
        SET_VEHICLE_PETROL_TANK_HEALTH( uParam0, 300.00000000 );
        SET_VEHICLE_PROOFS( uParam0, 0, 1, 1, 0, 0 );
        SET_VEHICLE_ONLY_DAMAGED_BY_PLAYER( uParam0, uParam2 );
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_SET_STANDARD_VEHICLE_OPTIONS: CAR IS INVALID!", "***" );
    }
    return;
}

/* IS_VEHICLE_VALID */ int sub_14464(unknown uParam0)
{
    if ((NOT (IS_VEHICLE_DEAD( uParam0 ))) AND (DOES_VEHICLE_EXIST( uParam0 )))
    {
        return 1;
    }
    return 0;
}

/* P_SET_VEHICLE_LIGHTS */ void sub_14796(unknown uParam0, boolean bParam1, unknown uParam2)
{
    if (bParam1)
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_SET_VEHICLE_LIGHTS: turning vehicle lights ON", "***" );
        SET_VEHICLE_LIGHTS( (uParam0^), 2 );
        SET_VEHICLE_LIGHT_MULTIPLIER( (uParam0^), uParam2 );
    }
    else
    {
        SET_VEHICLE_LIGHTS( (uParam0^), 1 );
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_SET_VEHICLE_LIGHTS: turning vehicle lights OFF", "***" );
    }
    return;
}

/* P_SETUP_AI_GROUP */ void sub_15168(int iParam0, unknown uParam1, boolean bParam2)
{
    iParam0->_fU4 = uParam1;
    iParam0->_fU0 = CREATE_GROUP( 3, 1 );
    if (bParam2)
    {
        PRINTSTRING( "[MSWW]### P_SETUP_AI_GROUP TOLD TO WAIT FOR GROUP TO EXIST ###" );
        PRINTNL();
        while (NOT (DOES_GROUP_EXIST( iParam0->_fU0 )))
        {
            WAIT( 0 );
            PRINTSTRING( "[MSWW]### GROUP ###" );
            PRINTNL();
        }
        PRINTSTRING( "[MSWW]### P_SETUP_AI_GROUP created group with ID: " );
        PRINTINT( iParam0->_fU0 );
        PRINTNL();
    }
    SET_GROUP_RATIO_FIRING_AT_VISIBLE( iParam0->_fU0, iParam0->_fU4 );
    SET_GROUP_RATIO_FIRING_AT_INVISIBLE( iParam0->_fU0, iParam0->_fU4 );
    if (iParam0->_fU8)
    {
        SET_GROUP_FORMATION( iParam0->_fU0, iParam0->_fU12 );
        SET_GROUP_FORMATION_SPACING( iParam0->_fU0, iParam0->_fU16 );
        SET_GROUP_FORMATION_MAX_MOVE_SPEED( iParam0->_fU0, iParam0->_fU20 );
    }
    return;
}

/* CLEANPED */ void sub_15654(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

/* PED_INITIALIZE */ void sub_15782(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, int iParam7, unknown uParam8)
{
    unknown uVar11;

     /* CLEANPED */ sub_15654( (uParam1^) );
    (uParam1^) =  /* CREATEPED */ sub_15819( uParam0 );
    if ( /* IS_PED_VALID */ sub_16533( (uParam1^) ))
    {
        uVar11 =  /* F_GIVEPEDWEAPON */ sub_9648( (uParam1^), uParam2, uParam5, 0, 1 );
        if (iParam7 != 0)
        {
             /* F_GIVEPEDWEAPONTOHOLSTER */ sub_8897( (uParam1^), iParam7, 0, uParam8, 0 );
        }
        SET_PED_AI_TEMPLATE( (uParam1^), uParam3 );
        SET_PED_ALERTNESS( (uParam1^), uParam6 );
        switch (uParam4)
        {
            case 0: break;
            case 1:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 13, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 13, 1 );
            break;
            case 2:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 14, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 14, 1 );
            break;
            case 3:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 12, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 12, 1 );
            break;
        }
    }
    return;
}

/* CREATEPED */ void sub_15819(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_1320( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
     /* SETPEDDEFAULTSTATS */ sub_16310( iParam0->_fU40 );
     /* SETPEDDEFAULTTEMPLATE */ sub_16411( iParam0->_fU40 );
    return iParam0->_fU40;
}

/* SETPEDDEFAULTSTATS */ void sub_16310(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

/* SETPEDDEFAULTTEMPLATE */ void sub_16411(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

/* IS_PED_VALID */ int sub_16533(unknown uParam0)
{
    if ((NOT (IS_PED_DEAD( uParam0 ))) AND (DOES_PED_EXIST( uParam0 )))
    {
        return 1;
    }
    return 0;
}

/* P_QUICK_ADD_PED_TO_GROUP */ void sub_16840(unknown uParam0, int iParam1)
{
    int iVar4;
    unknown uVar5;

    if ((DOES_GROUP_EXIST( iParam1->_fU0 )) == 0)
    {
         /* WRITE_STRING */ sub_1437( "[SP]### Warning!!! Group does not exist. Creating new group specified attributes. ###" );
        if (iParam1->_fU4 > 0)
        {
             /* P_SETUP_AI_GROUP */ sub_15168( iParam1, iParam1->_fU4, 0 );
        }
        else
        {
             /* P_SETUP_AI_GROUP */ sub_15168( iParam1, 1056964608, 0 );
        }
    }
    else
    {
        PRINTSTRING( "[MSWW]### P_QUICK_ADD_PED_TO_GROUP adding ped to group with ID: " );
        PRINTINT( iParam1->_fU0 );
        PRINTNL();
    }
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        GET_GROUP_SIZE( iParam1->_fU0, ref iVar4, ref uVar5 );
        if (iVar4 == 0)
        {
            SET_PED_AS_GROUP_LEADER( uParam0, iParam1->_fU0 );
        }
        else
        {
            SET_PED_AS_GROUP_MEMBER( uParam0, iParam1->_fU0 );
        }
        SET_PED_NEVER_LEAVES_GROUP( uParam0, 1 );
    }
    return;
}

/* CREATE_PARKING_LOT_ENEMIES */ void sub_17282()
{
    unknown uVar2;

     /* WRITESCRIPTLOG */ sub_1129( "SBA", "CREATE_PARKING_LOT_ENEMIES", "***" );
     /* CREATE_VIG_6_PEDS_AND_OBJECTS */ sub_17367();
     /* CREATE_PARKING_LOT_REINFORCEMENTS */ sub_18626();
     /* P_FREEZE_PED_ARRAY */ sub_19220( ref l_U668, 1 );
     /* P_FREEZE_PED_ARRAY */ sub_19220( ref l_U698, 1 );
     /* P_FREEZE_PED_ARRAY */ sub_19220( ref l_U715, 1 );
     /* P_SET_PARKING_ENEMY_ARRAY_TETHERS */ sub_19547( ref l_U668 );
     /* P_SET_PARKING_ENEMY_ARRAY_TETHERS */ sub_19547( ref l_U698 );
     /* P_SET_PARKING_ENEMY_ARRAY_TETHERS */ sub_19547( ref l_U715 );
     /* P_SET_PARKING_ENEMY_ARRAY_HATE_PASSOS */ sub_19817( ref l_U668 );
     /* P_SET_PARKING_ENEMY_ARRAY_HATE_PASSOS */ sub_19817( ref l_U698 );
     /* P_SET_PARKING_ENEMY_ARRAY_HATE_PASSOS */ sub_19817( ref l_U715 );
    return;
}

/* CREATE_VIG_6_PEDS_AND_OBJECTS */ void sub_17367()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1129( "TEH", "CREATE_VIG_6_PEDS_AND_OBJECTS - start", 0 );
    l_U782[0] =  /* CREATEVEHICLE */ sub_14039( 1839686620, -19.22000000, -322.87500000, -0.61000000, -95.00000000, 1, 0, 0 );
    WAIT( 10 );
     /* P_SET_STANDARD_VEHICLE_OPTIONS */ sub_14359( l_U782[0], 0, 1 );
    FREEZE_VEHICLE_POSITION( l_U782[0], 1 );
    SET_VEHICLE_COLOUR_COMBINATION( l_U782[0], 1 );
    SET_VEHICLE_DIRT_LEVEL( l_U782[0], 10.90000000 );
    l_U782[1] =  /* CREATEVEHICLE */ sub_14039( 557810561, -18.25000000, -317.25000000, -0.61000000, 4.00000000, 1, 0, 0 );
    WAIT( 10 );
     /* P_SET_STANDARD_VEHICLE_OPTIONS */ sub_14359( l_U782[1], 0, 1 );
    FREEZE_VEHICLE_POSITION( l_U782[1], 1 );
    SET_VEHICLE_COLOUR_COMBINATION( l_U782[1], 2 );
    SET_VEHICLE_DIRT_LEVEL( l_U782[1], 15.90000000 );
    SET_VEHICLE_EXTRA( l_U782[1], 1, 1 );
    SET_VEHICLE_EXTRA( l_U782[1], 2, 1 );
    SET_VEHICLE_EXTRA( l_U782[1], 3, 1 );
    SET_VEHICLE_EXTRA( l_U782[1], 4, 1 );
    SET_VEHICLE_EXTRA( l_U782[1], 5, 1 );
    SET_VEHICLE_EXTRA( l_U782[1], 6, 1 );
    SET_VEHICLE_EXTRA( l_U782[1], 7, 0 );
    SET_VEHICLE_EXTRA( l_U782[1], 8, 0 );
     /* P_SETUP_AI_GROUP */ sub_15168( ref l_U717, 1.00000000, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U641[0], -18.95000000, -321.40000000, -0.66000000, -9.54500000, -486921312, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U641[1], -20.61000000, -321.20000000, -0.66000000, -54.54500000, -863385930, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U671[0], -20.53000000, -318.67000000, -0.66000000, -148.43000000, -203706296, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U671[1], -19.65000000, -318.42000000, -0.66000000, -99.54500000, 1716597788, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U701[0], -19.65771000, -315.34370000, -0.66237900, 266.61710000, -2038190238, 7, 3, 2, 0, 0 );
     /* PED_INITIALIZE */ sub_15782( ref l_U641[0], ref l_U668[0], 434544317, "AIT_NORMAL", 0, 25000, 2, 0, 25000 );
     /* P_QUICK_ADD_PED_TO_GROUP */ sub_16840( l_U668[0], ref l_U717 );
     /* SETUP_GARAGE_GUY */ sub_18150( ref l_U668[0] );
     /* PED_INITIALIZE */ sub_15782( ref l_U641[1], ref l_U668[1], -862236369, "AIT_NORMAL", 0, 25000, 2, 0, 25000 );
     /* P_QUICK_ADD_PED_TO_GROUP */ sub_16840( l_U668[1], ref l_U717 );
     /* SETUP_GARAGE_GUY */ sub_18150( ref l_U668[1] );
    for ( I = 0; I <= (l_U698 - 1); I++ )
    {
         /* PED_INITIALIZE */ sub_15782( ref l_U671[I], ref l_U698[I], -862236369, "AIT_NORMAL", 0, 25000, 2, 0, 25000 );
         /* P_QUICK_ADD_PED_TO_GROUP */ sub_16840( l_U698[I], ref l_U717 );
         /* SETUP_GARAGE_GUY */ sub_18150( ref l_U698[I] );
    }
    for ( I = 0; I <= (l_U715 - 1); I++ )
    {
         /* PED_INITIALIZE */ sub_15782( ref l_U701[I], ref l_U715[I], -862236369, "AIT_NORMAL", 0, 25000, 2, 0, 25000 );
         /* P_QUICK_ADD_PED_TO_GROUP */ sub_16840( l_U715[I], ref l_U717 );
         /* SETUP_GARAGE_GUY */ sub_18150( ref l_U715[I] );
    }
     /* P_SETUP_AI_GROUP */ sub_15168( ref l_U717, 1.00000000, 0 );
     /* WRITESCRIPTLOG */ sub_1129( "TEH", "CREATE_VIG_6_PEDS_AND_OBJECTS - end", 0 );
    return;
}

/* SETUP_GARAGE_GUY */ void sub_18150(unknown uParam0)
{
    if ( /* IS_PED_VALID */ sub_16533( (uParam0^) ))
    {
        SET_PED_ONLY_DAMAGED_BY_PLAYER( (uParam0^), 1 );
        SET_PED_GORE_FROM_NPC( (uParam0^), 0 );
        SET_PED_CHANCE_TO_REACT_TO_IMMINENT_DANGER( (uParam0^), 75 );
        SET_PED_COMBAT_ATTRIBUTES( (uParam0^), 131072, 0 );
        SET_PED_ALERTNESS( (uParam0^), 1 );
    }
    return;
}

/* CREATE_PARKING_LOT_REINFORCEMENTS */ void sub_18626()
{
    int I;

     /* P_SETUP_AI_GROUP */ sub_15168( ref l_U830, 1056964608, 0 );
     /* WRITESCRIPTLOG */ sub_1129( "BSW", "CREATE_PARKING_LOT_REINFORCEMENTS: creating reinforcements", "***" );
    for ( I = 0; I <= 2; I++ )
    {
         /* CLEANPED */ sub_15654( l_U826[I] );
         /* PED_INITIALIZE */ sub_15782( ref l_U786[I], ref l_U826[I], -862236369, "AIT_NORMAL", 0, 25000, 2, 0, 25000 );
        WAIT( 1 );
        if ( /* IS_PED_VALID */ sub_16533( l_U826[I] ))
        {
             /* P_QUICK_ADD_PED_TO_GROUP */ sub_16840( l_U826[I], ref l_U830 );
             /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_18908( ref l_U826, "parking_lot_reinf" );
            SET_PED_GORE_FROM_NPC( l_U826[I], 0 );
            SET_PED_ONLY_DAMAGED_BY_PLAYER( l_U826[I], 1 );
        }
         /* P_DEACTIVATEPED */ sub_19081( l_U826[I] );
    }
    return;
}

/* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ void sub_18908(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

/* P_DEACTIVATEPED */ void sub_19081(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 1 );
        SET_PED_VISIBLE( uParam0, 0 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 0 );
        FREEZE_PED_POSITION( uParam0, 1 );
        SET_PED_COLLISION( uParam0, 0 );
        SET_PED_PROOFS( uParam0, 1, 1, 1, 1, 1 );
    }
    return;
}

/* P_FREEZE_PED_ARRAY */ void sub_19220(unknown uParam0, unknown uParam1)
{
    int I;

     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_FREEZE_PED_ARRAY", "***" );
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* P_FREEZE_PED */ sub_19314( (uParam0^)[I], uParam1 );
    }
    return;
}

/* P_FREEZE_PED */ void sub_19314(unknown uParam0, boolean bParam1)
{
    if ( /* IS_PED_VALID */ sub_16533( uParam0 ))
    {
        FREEZE_PED_POSITION( uParam0, bParam1 );
    }
    if (bParam1)
    {
         /* P_DEACTIVATEPED */ sub_19081( uParam0 );
    }
    else
    {
         /* P_ACTIVATEPED */ sub_19383( uParam0 );
    }
    return;
}

/* P_ACTIVATEPED */ void sub_19383(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 0 );
        SET_PED_VISIBLE( uParam0, 1 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 1 );
        FREEZE_PED_POSITION( uParam0, 0 );
        SET_PED_COLLISION( uParam0, 1 );
        SET_PED_PROOFS( uParam0, 0, 0, 0, 0, 0 );
    }
    return;
}

/* P_SET_PARKING_ENEMY_ARRAY_TETHERS */ void sub_19547(unknown uParam0)
{
    int I;

     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_SET_PARKING_ENEMY_ARRAY_TETHERS", "***" );
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* P_TETHERPED */ sub_19674( ref l_U1349, (uParam0^)[I], 1 );
         /* P_TETHERPED */ sub_19674( ref l_U1351, (uParam0^)[I], 1 );
    }
    return;
}

/* P_TETHERPED */ void sub_19674(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_TETHERING_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_TETHERING_OPTION( uParam1, uParam2 );
    }
    return;
}

/* P_SET_PARKING_ENEMY_ARRAY_HATE_PASSOS */ void sub_19817(unknown uParam0)
{
    int I;

     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_SET_PARKING_ENEMY_ARRAY_THATE_PASSOS", "***" );
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ( /* IS_PED_VALID */ sub_16533( (uParam0^)[I] ))
        {
            SET_PED_RELATIONSHIP( (uParam0^)[I], 2, 6 );
        }
    }
    return;
}

/* LOADISEQ */ void sub_20055(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to load does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 0)
    {
        ISEQ_REQUEST( uParam0 );
        ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
        if (iParam1 == 1)
        {
            while ((ISEQ_QUERY_STATE( uParam0, 1 )) == 1)
            {
                DISPLAYF( "[SP]### Waiting for interactive sequence to be loaded: {0} {1} ###", 2, 1281, ref uVar4, 513, uParam0 );
                WAIT( 0 );
            }
        }
    }
    return;
}

/* P_KILL_PEDS_IN_ARRAY */ void sub_20390(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
         /* P_KILL_PED */ sub_20444( (uParam0^)[I] );
    }
    return;
}

/* P_KILL_PED */ void sub_20444(unknown uParam0)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        STOP_PED_SPEAKING( uParam0, 1 );
        SET_PED_HEALTH( uParam0, 0, 0 );
        SET_PED_CORPSE( uParam0, 0 );
    }
    return;
}

/* TELEPORTPED */ void sub_20673(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

/* P_EXIT_1ST_BLOCKER_CAR */ void sub_20744()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_EXIT_1ST_BLOCKER_CAR", "***" );
     /* PED_ARRAY_SET_REGISTER_TARGET */ sub_20830( ref l_U876,  /* PLAYER_PED_ID */ sub_7106() );
     /* PED_ARRAY_SET_TETHERBOX */ sub_21019( ref l_U876, l_U1352, 1 );
    if ( /* IS_PED_VALID */ sub_16533( l_U876[0] ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "Setting piEnemyCar1[0] in cover", 0 );
        SET_PED_FLAG_LOCK_TO_COVER( l_U876[0], 1 );
        TASK_COMBAT_SNAP_TO_COVER( l_U876[0], "GenCover", "47E254B1_FB353B5A_Popover2", 0 );
    }
    if ( /* IS_PED_VALID */ sub_16533( l_U876[1] ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "Setting piEnemyCar1[1] in cover", 0 );
        SET_PED_FLAG_LOCK_TO_COVER( l_U876[1], 1 );
        if (NOT (IS_PED_USING_MP3_COVER_TASK( l_U876[1] )))
        {
            TASK_COMBAT_SNAP_TO_COVER( l_U876[1], "GenCover", "47E254B1_DC2D39A6_Corner2", 0 );
        }
    }
    return;
}

/* PED_ARRAY_SET_REGISTER_TARGET */ void sub_20830(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ( /* IS_PED_VALID */ sub_16533( (uParam0^)[I] ))
        {
             /* PED_SET_REGISTER_TARGET */ sub_20913( ref (uParam0^)[I], uParam1 );
        }
    }
    return;
}

/* PED_SET_REGISTER_TARGET */ void sub_20913(unknown uParam0, unknown uParam1)
{
    if (( /* IS_PED_VALID */ sub_16533( uParam1 )) AND ( /* IS_PED_VALID */ sub_16533( (uParam0^) )))
    {
        REGISTER_TARGET( (uParam0^), uParam1 );
    }
    return;
}

/* PED_ARRAY_SET_TETHERBOX */ void sub_21019(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* PED_SET_TETHERBOX */ sub_21081( ref (uParam0^)[I], uParam1, uParam2 );
    }
    return;
}

/* PED_SET_TETHERBOX */ void sub_21081(unknown uParam0, unknown uParam1, unknown uParam2)
{
    if ( /* IS_PED_VALID */ sub_16533( (uParam0^) ))
    {
        RESET_PED_TETHERING( (uParam0^) );
         /* P_TETHERPED */ sub_19674( ref uParam1, (uParam0^), uParam2 );
    }
    return;
}

/* F_HANDLE_MID_01_BLEND */ int sub_21546()
{
    switch (l_U559)
    {
        case 0: break;
        case 1:
         /* WRITESCRIPTLOG */ sub_1129( "SP", "eMid01BlendState = BLEND_SETUP", 0 );
         /* SNAP_PLAYER_TO_MID_01_COVER */ sub_21681();
         /* SETUP_INITIAL_MID_01_BLENDOUT_CAM */ sub_21816();
        l_U459 = 13;
        l_U460 = 13;
         /* WRITESCRIPTLOG */ sub_1129( "SP", "eMid01BlendState = advancing to BLEND_FIRST_FRAME", 0 );
        l_U559 = 2;
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_1129( "bsw", "eMid01BlendState = cam1MID01_Blendout shot finished, advancing to BLEND_PLAYING", 0 );
        l_U559 = 3;
        break;
        case 3:
        if (NOT l_U564)
        {
            if (CAMERA_ANIMATED_CURRENT_TIME() >= ((CAMERA_ANIMATED_LENGTH( "LEVEL_S_NYBAR_MID_01_BLENDOUT", "BLEND_OUT_MID_01_NYBAR_CAM" )) - 1))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "GA", "Animated camera is complete, freezing cam frame.", 0 );
                SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U2448, 1065353216, 0 );
                SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U2449, 1065353216, 0 );
                CAMERA_FREEZE_FRAME( 1, 500, 0, 0 );
                l_U564 = 1;
            }
        }
        if ((l_U564) AND ((ISEQ_QUERY_ENTITY_STATE( -850158086, "max", 6 )) == 1))
        {
            l_U559 = 4;
        }
        break;
        case 4:
         /* NIS_POST_SETUP */ sub_22402( 1, 1 );
        l_U559 = 0;
        return 1;
        break;
    }
    return 0;
}

/* SNAP_PLAYER_TO_MID_01_COVER */ void sub_21681()
{
    if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )) == 0) AND ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_7144() )) == 0))
    {
        SNAP_PLAYER_TO_COVERPOINT(  /* PLAYER_ID */ sub_7144(), "GenCover", "47E254B1_556B395F_Corner2", 0 );
    }
    return;
}

/* SETUP_INITIAL_MID_01_BLENDOUT_CAM */ void sub_21816()
{
    CAMERA_PLAY_ANIMATED( "LEVEL_S_NYBAR_MID_01_BLENDOUT", "BLEND_OUT_MID_01_NYBAR_CAM", 0, 0, 0, 0, 0, 0, 0 );
    l_U564 = 0;
    return;
}

/* NIS_POST_SETUP */ void sub_22402(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )))
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_7144(), 1, 0 );
        SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_7106(), 0 );
        if (bParam0)
        {
             /* P_MAX_RELOAD_WEAPONS */ sub_22500();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

/* P_MAX_RELOAD_WEAPONS */ void sub_22500()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_7106(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_7106(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP(  /* PLAYER_PED_ID */ sub_7106(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP(  /* PLAYER_PED_ID */ sub_7106(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

/* NIS_PRE_SETUP */ void sub_22735(int iParam0, int iParam1, unknown uParam2, boolean bParam3)
{
    END_POSTFX_BLENDER( 12, 0 );
    if (bParam3)
    {
        STOP_ALL_IMAGEFX( 0 );
    }
    SET_WIDESCREEN_BORDERS( 1, 500 );
    DISPLAY_HUD( 0 );
    if (iParam0 == 1)
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )))
        {
            SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_7144(), 0, uParam2 );
            SET_PED_DUCKING(  /* PLAYER_PED_ID */ sub_7106(), 0 );
            if (iParam1 == 1)
            {
                CLEAR_PED_TASKS_IMMEDIATELY(  /* PLAYER_PED_ID */ sub_7106() );
            }
            SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_7106(), 1 );
        }
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    return;
}

/* F_IMAGEFX_FADE_IN */ int sub_22922()
{
    if (l_U457)
    {
         /* WRITESCRIPTLOG */ sub_1129( "CO", "F_IMAGEFX_FADE_IN: IMAGEFX START", 0 );
        START_PANEL_WIPE( 0, 6 );
        PLAY_IMAGEFX( "BULLETCAM_IMPACT", 3, 1 );
        PLAY_IMAGEFX( "BLACK_FADE_UP_FAST_01", 3, 1 );
        DO_SCREEN_FADE_IN( 0 );
        l_U457 = 0;
        return 1;
        break;
    }
     /* WRITESCRIPTLOG */ sub_1129( "CO", "F_IMAGEFX_FADE_IN: NORMAL START", 0 );
    return 0;
}

/* P_HANDLE_CAR_RECORDING_TESTS */ void sub_23362()
{
    if (NOT l_U1890)
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_CAR_RECORDING_TESTS is ACTIVE!!", "*****" );
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "Normal gameplay for the Alley is OFF!!", "*****" );
        START_WIDGET_GROUP( "Alley Car Recordings" );
        START_NEW_WIDGET_COMBO();
        ADD_TO_WIDGET_COMBO( "0. Ram Car (full)" );
        ADD_TO_WIDGET_COMBO( "1. Lead Blocking Car" );
        ADD_TO_WIDGET_COMBO( "2. Second Blocking Car" );
        ADD_TO_WIDGET_COMBO( "3. Last Blocking Car" );
        STOP_WIDGET_COMBO( "Car Being Used", ref l_U1891 );
        ADD_WIDGET_BOOL( "Create Car and Put in Player", ref l_U1892 );
        ADD_WIDGET_BOOL( "Remove Player from Car", ref l_U1893 );
        ADD_WIDGET_BOOL( "Run Playback", ref l_U1894 );
        ADD_WIDGET_BOOL( "Stop Playback", ref l_U1895 );
        ADD_WIDGET_FLOAT_SLIDER( "Playback Speed", ref l_U44, 0.00000000, 10.00000000, 0.10000000 );
        STOP_WIDGET_GROUP();
         /* P_INIT_CAR_REC_DATA */ sub_23908();
        l_U1890 = 1;
    }
    switch (l_U1891)
    {
        case 0:
        if (l_U1892 == 1)
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "Setting up RAM CAR", 0 );
             /* P_RESET_CAR */ sub_24339( ref l_U1896[0], g_U2253[4]._fU0, g_U2253[4]._fU12 );
            l_U1892 = 0;
        }
        if (l_U1894 == 1)
        {
             /* P_START_VEHICLE_PLAYBACKCAR_RECORDING_INFO */ sub_24821( ref l_U1896[0] );
            l_U1894 = 0;
        }
        break;
        case 1:
        if (l_U1892 == 1)
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "Setting up FIRST BLOCKER CAR", 0 );
             /* P_RESET_CAR */ sub_24339( ref l_U1896[1], g_U2253[4]._fU0, g_U2253[4]._fU12 );
            l_U1892 = 0;
        }
        if (l_U1894 == 1)
        {
             /* P_START_VEHICLE_PLAYBACKCAR_RECORDING_INFO */ sub_24821( ref l_U1896[1] );
            l_U1894 = 0;
        }
        break;
        case 2:
        if (l_U1892 == 1)
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "Setting up SECOND BLOCKER CAR", 0 );
             /* P_RESET_CAR */ sub_24339( ref l_U1896[2], g_U2253[4]._fU0, g_U2253[4]._fU12 );
            l_U1892 = 0;
        }
        if (l_U1894 == 1)
        {
             /* P_START_VEHICLE_PLAYBACKCAR_RECORDING_INFO */ sub_24821( ref l_U1896[2] );
            l_U1894 = 0;
        }
        break;
        case 3:
        if (l_U1892 == 1)
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "Setting up LAST BLOCKER CAR", 0 );
             /* P_RESET_CAR */ sub_24339( ref l_U1896[3], g_U2253[4]._fU0, g_U2253[4]._fU12 );
            l_U1892 = 0;
        }
        if (l_U1894 == 1)
        {
             /* P_START_VEHICLE_PLAYBACKCAR_RECORDING_INFO */ sub_24821( ref l_U1896[3] );
            l_U1894 = 0;
        }
        break;
    }
    if (l_U1893)
    {
         /* P_REMOVE_PLAYER_FROM_VEHICLE */ sub_25463( ref l_U1896[l_U1891] );
        l_U1893 = 0;
    }
    if (l_U1895)
    {
        if ( /* IS_VEHICLE_VALID */ sub_14464( l_U1896[l_U1891]._fU0 ))
        {
            if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( l_U1896[l_U1891]._fU0 ))
            {
                STOP_PLAYBACK_RECORDED_VEHICLE( l_U1896[l_U1891]._fU0 );
            }
        }
        l_U1895 = 0;
    }
    return;
}

/* P_INIT_CAR_REC_DATA */ void sub_23908()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_INIT_CAR_REC_DATA", 0 );
    l_U1896[0]._fU8 = l_U1357;
    l_U1896[0]._fU12 = {-110.00000000, -352.97000000, 1.20000000};
    l_U1896[0]._fU24 = -0.91000000;
    l_U1896[1]._fU8 = l_U1356;
    l_U1896[1]._fU12 = {-109.54000000, -315.88000000, 0.45000000};
    l_U1896[1]._fU24 = -176.00000000;
    l_U1896[2]._fU8 = l_U1359;
    l_U1896[2]._fU12 = {-110.00000000, -348.79000000, 0.84000000};
    l_U1896[2]._fU24 = 0.84000000;
    l_U1896[3]._fU8 = l_U1360;
    l_U1896[3]._fU12 = {-110.00000000, -355.90000000, 0.94000000};
    l_U1896[3]._fU24 = 0.94000000;
    return;
}

/* P_RESET_CAR */ void sub_24339(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "Use Car Rec #:", 0 );
     /* WRITE_INT */ sub_24397( iParam0->_fU8 );
    l_U45 = l_U45;
    if ( /* IS_PED_VALID */ sub_16533(  /* PLAYER_PED_ID */ sub_7106() ))
    {
        if ( /* IS_VEHICLE_VALID */ sub_14464( iParam0->_fU0 ))
        {
            if (IS_PED_IN_VEHICLE(  /* PLAYER_PED_ID */ sub_7106(), iParam0->_fU0 ))
            {
                TASK_LEAVE_VEHICLE_IMMEDIATELY(  /* PLAYER_PED_ID */ sub_7106(), iParam0->_fU0 );
                SET_PED_COORDS(  /* PLAYER_PED_ID */ sub_7106(), uParam1, 1 );
                SET_PED_HEADING(  /* PLAYER_PED_ID */ sub_7106(), uParam4 );
            }
        }
    }
    WAIT( 100 );
     /* CLEANVEHICLE */ sub_24567( iParam0->_fU0 );
     /* LOADMODEL */ sub_1320( iParam0->_fU4, 1 );
    iParam0->_fU0 = CREATE_VEHICLE( iParam0->_fU4, iParam0->_fU12, iParam0->_fU24, 1, 0 );
    if ( /* IS_VEHICLE_VALID */ sub_14464( iParam0->_fU0 ))
    {
        SET_VEHICLE_COORDS( iParam0->_fU0, iParam0->_fU12 );
        SET_VEHICLE_HEADING( iParam0->_fU0, iParam0->_fU24 );
        SET_VEHICLE_ON_GROUND_PROPERLY( iParam0->_fU0 );
    }
    if ( /* IS_PED_VALID */ sub_16533(  /* PLAYER_PED_ID */ sub_7106() ))
    {
        if ( /* IS_VEHICLE_VALID */ sub_14464( iParam0->_fU0 ))
        {
            SET_PED_INTO_VEHICLE(  /* PLAYER_PED_ID */ sub_7106(), iParam0->_fU0, -1 );
        }
    }
    return;
}

/* WRITE_INT */ void sub_24397(unknown uParam0)
{
    PRINTINT( uParam0 );
    PRINTNL();
    return;
}

/* CLEANVEHICLE */ void sub_24567(unknown uParam0)
{
    if (IS_VEHICLE_DEAD( uParam0 ))
    {
        ;
    }
    if (DOES_VEHICLE_EXIST( uParam0 ))
    {
        DELETE_VEHICLE( ref uParam0 );
    }
    return;
}

/* P_START_VEHICLE_PLAYBACKCAR_RECORDING_INFO */ void sub_24821(int iParam0)
{
    if ( /* IS_VEHICLE_VALID */ sub_14464( iParam0->_fU0 ))
    {
        if (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( iParam0->_fU0 ))
        {
            STOP_PLAYBACK_RECORDED_VEHICLE( iParam0->_fU0 );
        }
    }
    WAIT( 0 );
     /* LOADVEHICLERECORDING */ sub_1727( iParam0->_fU8, 1 );
    if ( /* IS_VEHICLE_VALID */ sub_14464( iParam0->_fU0 ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "Playing Back Car Rec #:", 0 );
         /* WRITE_INT */ sub_24397( iParam0->_fU8 );
        START_PLAYBACK_RECORDED_VEHICLE( iParam0->_fU0, iParam0->_fU8 );
        SET_PLAYBACK_SPEED( iParam0->_fU0, l_U44 );
    }
    return;
}

/* P_REMOVE_PLAYER_FROM_VEHICLE */ void sub_25463(int iParam0)
{
    if ( /* IS_PED_VALID */ sub_16533(  /* PLAYER_PED_ID */ sub_7106() ))
    {
        if ( /* IS_VEHICLE_VALID */ sub_14464( iParam0->_fU0 ))
        {
            if (IS_PED_IN_VEHICLE(  /* PLAYER_PED_ID */ sub_7106(), iParam0->_fU0 ))
            {
                TASK_LEAVE_VEHICLE_IMMEDIATELY(  /* PLAYER_PED_ID */ sub_7106(), iParam0->_fU0 );
            }
        }
    }
    return;
}

/* P_HANDLE_MUSIC */ void sub_25697()
{
    if (l_U461 != l_U459)
    {
         /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music:changed CUR FLAG", 0 );
         /* WRITE_INT */ sub_24397( l_U459 );
         /* WRITE_INT */ sub_24397( l_U460 );
        l_U461 = l_U459;
    }
    else if (l_U462 != l_U460)
    {
         /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music:changed NEW FLAG", 0 );
         /* WRITE_INT */ sub_24397( l_U459 );
         /* WRITE_INT */ sub_24397( l_U460 );
        l_U462 = l_U460;
    }
    switch (l_U459)
    {
        case 1:
         /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: STARTUP PArking lot  ", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_2_3", "", 0, 5000, 5000, -1082130432, 0 );
        l_U472 = 0;
        l_U459 = 4;
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: restart parking lot ", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_2_3", "", 0, 5000, 5000, -1082130432, 0 );
        l_U472 = 0;
        l_U459 = 4;
        break;
        case 4:
        if (l_U460 == 4)
        {
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_2", "", 0, 0, 4000, -1082130432, 0 );
            l_U459 = 5;
            l_U460 = 5;
        }
        break;
        case 5:
        if (l_U460 == 5)
        {
            if (l_U472 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_OS_4", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                     /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: Succesfully preloaded NYBAR_OS_4", 0 );
                    l_U472 = 1;
                }
            }
            else
            {
                l_U459 = 6;
            }
        }
        break;
        case 6:
        if (l_U460 == 6)
        {
             /* WRITESCRIPTLOG */ sub_1129( "TEH", "Playing music: Playing NYBAR_02_2_4_6 ", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_2_4_6", "", 0, 4000, 5000, -1082130432, 0 );
            AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_OS_4", 0 );
            l_U459 = 7;
            l_U460 = 7;
        }
        break;
        case 7:
        if (l_U460 == 7)
        {
            if (l_U472 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_ONESHOT_8", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                     /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: Succesfully preloaded oneshot_08 ", 0 );
                    l_U472 = 1;
                }
            }
            else
            {
                l_U459 = 8;
            }
        }
        break;
        case 8:
        if (l_U460 == 8)
        {
            if (l_U472 == 1)
            {
                 /* WRITESCRIPTLOG */ sub_1129( "BSW", "playing music: oneshot_08 script thinks we're loaded", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                     /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: Sussesfully played oneshot_08 ", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                }
                else
                {
                     /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: FAILED to play oneshot_08 becuase AUDIO_MUSIC_IS_ONESHOT_PREPARED was false", 0 );
                }
            }
            l_U472 = 0;
            l_U459 = 9;
        }
        break;
        case 9:
        if (l_U460 == 9)
        {
             /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music:  played NYBAR_02_6", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_6", "", 0, 7000, 5000, -1082130432, 0 );
            l_U459 = 10;
        }
        break;
        case 10:
        if (l_U460 == 10)
        {
            AUDIO_MUSIC_SUSPEND( 6000 );
            l_U459 = 11;
        }
        break;
        case 11:
        if (l_U460 == 11)
        {
             /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: MC_CUTSCENE_CARSKID ", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_4", "", 0, 1000, -1, -1082130432, 0 );
            l_U459 = 12;
        }
        break;
        case 12:
        if (l_U460 == 12)
        {
             /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: MC_CUTSCENE_SETTING_UP_FOR_FALL_LINE", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_4", "", 0, 4000, -1, -1082130432, 0 );
            l_U459 = 13;
        }
        break;
        case 13:
        if (l_U460 == 13)
        {
             /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: MC_ALLEY_FIGHT_STARTS ", 0 );
            l_U472 = 0;
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_2_4_6", "", 0, 1000, -1, -1082130432, 0 );
            l_U459 = 14;
            l_U460 = 14;
        }
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: restart alley ", 0 );
        AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_2_4", "", 0, 1000, -1, -1082130432, 0 );
        l_U472 = 0;
        l_U459 = 14;
        l_U460 = 14;
        break;
        case 14:
        if (l_U460 == 14)
        {
            if (l_U472 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_ONESHOT_13", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                     /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: Succesfully preloaded oneshot_13 ", 0 );
                    l_U472 = 1;
                }
            }
            else
            {
                l_U459 = 15;
            }
        }
        break;
        case 15:
        if (l_U460 == 15)
        {
            if (l_U472 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                     /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: Sussesfully played oneshot_13 ", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                }
            }
            l_U472 = 0;
            l_U459 = 16;
            l_U460 = 16;
        }
        break;
        case 16:
        if ((AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 )) == 0)
        {
            l_U459 = 17;
            l_U460 = 17;
        }
        break;
        case 17:
        if (l_U460 == 17)
        {
            if (l_U472 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_ONESHOT_16", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_ONESHOT_16" ))
                {
                     /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: Succesfully preloaded oneshot_16 ", 0 );
                    l_U472 = 1;
                }
            }
            else
            {
                l_U459 = 18;
            }
        }
        break;
        case 18:
        if (l_U460 == 18)
        {
             /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: trying to play oneshot 16", 0 );
            if (l_U472 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_ONESHOT_16" ))
                {
                     /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: Sussesfully played oneshot_16 ", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                }
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: failed to play oneshot 16 no oneshot prepared", 0 );
            }
            l_U472 = 0;
            l_U459 = 19;
            l_U460 = 19;
        }
        break;
        case 19:
        if ((AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 )) == 0)
        {
            l_U459 = 20;
            l_U460 = 20;
        }
        break;
        case 20:
        if (l_U460 == 20)
        {
            if (l_U472 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_ONESHOT_6", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_ONESHOT_6" ))
                {
                     /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: Succesfully preloaded oneshot_6", 0 );
                    l_U472 = 1;
                }
            }
            else
            {
                l_U459 = 21;
            }
        }
        break;
        case 21:
        if (l_U460 == 21)
        {
            if (l_U472 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_ONESHOT_6" ))
                {
                     /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: Sussesfully played oneshot_6", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                }
            }
            l_U472 = 0;
            l_U459 = 22;
        }
        break;
        case 22:
        if (l_U460 == 22)
        {
             /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: AUDIO_MUSIC_SUSPEND(12000) ", 0 );
            AUDIO_MUSIC_SUSPEND( 6000 );
            l_U459 = 23;
        }
        break;
        case 23:
        if (l_U460 == 23)
        {
             /* WRITESCRIPTLOG */ sub_1129( "TEH", "playing music: AUDIO_MUSIC_SUSPEND(500) ", 0 );
            AUDIO_MUSIC_SUSPEND( 0 );
            l_U459 = 24;
        }
        break;
    }
    return;
}

/* P_HANDLE_CHECKPOINTS */ void sub_29154()
{
    if ((g_U724 == 5) || (g_U724 == 4))
    {
        if (l_U1866 == 0)
        {
            if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )) == 1)
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_CHECKPOINTS: player is dead, setting eFailure = STATE_FAIL_WAITING", "***" );
                l_U1866 = 2;
                 /* P_SETUP_PLAYER_DEATH_CAM */ sub_29340( 1 );
            }
            else if ( /* RESTARTING_CHECKPOINT */ sub_29434())
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "HANDLE_CHECKPOINTS - Restart, setting eFailure = STATE_FAIL_WAITING", 0 );
                l_U1866 = 2;
            }
            else if (((l_U1758 < 13) AND (l_U1758 > 8)) || ((l_U1758 < 7) AND (l_U1758 > 2)))
            {
                if (NOT IS_LAST_MAN_STANDING_ACTIVE())
                {
                    if ((NOT IS_LAST_MAN_STANDING_ACTIVE()) AND (IS_PED_DEAD( g_U750 )))
                    {
                         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_CHECKPOINTS: Passos killed, setting eFailure = STATE_FAIL_DEATH_CAM_PASSOS", "***" );
                        SET_PED_GORE( g_U750, 1 );
                        l_U1866 = 1;
                    }
                    else if (g_U2199)
                    {
                         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_CHECKPOINTS: Passos abandoned, setting eFailure = STATE_FAIL_DEATH_CAM_PASSOS", "***" );
                        l_U1866 = 1;
                    }
                }
            };;;
        }
         /* P_HANDLE_FAILURE */ sub_30307();
    }
    return;
}

/* P_SETUP_PLAYER_DEATH_CAM */ void sub_29340(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_1129( "NS", "P_SETUP_PLAYER_DEATH_CAM()", 0 );
    uParam0 = uParam0;
    return;
}

/* RESTARTING_CHECKPOINT */ int sub_29434()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U0 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )))
        {
            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_7106(), 0 );
            SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_7144(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE(  /* PLAYER_ID */ sub_7144(), 1 );
            if ((IS_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_7106() )) == 0)
            {
                SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_7106(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

/* P_HANDLE_FAILURE */ void sub_30307()
{
    switch (l_U1866)
    {
        case 0: break;
        case 1:
        if ( /* IS_MAX_VALID */ sub_30409())
        {
            SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_7106(), 1 );
        }
        if (l_U1865 == 2)
        {
            l_U1866 = 2;
             /* P_SETUP_PASSOS_DEATH */ sub_30499( 0 );
             /* WRITESCRIPTLOG */ sub_1129( "CCB", "ePassosDeathState = PE_MOVING; eFailure - STATE_FAIL_WAITING", 0 );
        }
        else if ( /* F_HANDLE_DEATH_CAM_PASSOS */ sub_31447())
        {
            l_U1866 = 2;
             /* WRITESCRIPTLOG */ sub_1129( "CCB", "eFailure - STATE_FAIL_WAITING", 0 );
        }
        break;
        case 2:
        if ( /* IS_RESTART_ACTIVE */ sub_34631())
        {
            l_U1866 = 3;
             /* WRITESCRIPTLOG */ sub_1129( "CCB", "eFailure - STATE_FAIL_WAITING_PLAYER_RESPAWN", 0 );
        }
        else if (( /* F_CHECK_QUIT_RETRY */ sub_34750( 0 )) == 1)
        {
            l_U1866 = 3;
             /* WRITESCRIPTLOG */ sub_1129( "CCB", "eFailure - STATE_FAIL_WAITING_PLAYER_RESPAWN", 0 );
        }
        break;
        case 3:
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )))
        {
             /* WRITESCRIPTLOG */ sub_1129( "CCB", "Deactivating bullettime...", 0 );
            DEACTIVATE_BULLET_TIME( 1, 0 );
            END_POSTFX_BLENDER( 3, 0 );
            l_U1866 = 4;
             /* WRITESCRIPTLOG */ sub_1129( "CCB", "eFailure - STATE_FAIL_CLEANUP", 0 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_1129( "NS", "Waiting For Player Respawn", 0 );
        }
        break;
        case 4:
        if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_7144() )))
        {
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )))
            {
                SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_7144(), 0, 0 );
            }
        }
         /* P_IMAGEFX_STOP_BULLETCAM */ sub_35970( "NY_PASSOS3_SCRIPTED_FAIL_FX" );
        DESTROY_ALL_CAMS();
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        if ( /* IS_MAX_VALID */ sub_30409())
        {
            SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_7106(), 1 );
        }
         /* WRITESCRIPTLOG */ sub_1129( "CCB", "Destroying Passos...", 0 );
         /* CLEANPED */ sub_15654( g_U750 );
         /* CLEANUP_ALLEY */ sub_36188( 1 );
        l_U1866 = 5;
         /* WRITESCRIPTLOG */ sub_1129( "CCB", "eFailure - STATE_FAIL_RESTORE", 0 );
        break;
        case 5:
         /* SETUP_ALLEY_STATIC_DATA */ sub_2467();
         /* INITIALIZE_ALLEY_SCRIPT_DATA */ sub_6092();
        SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
        if (NOT IS_BULLET_CAMERA_TO_GAMEPLAY_ALLOWED())
        {
            ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
        }
         /* P_SETUP_PLAYER_RELATIONSHIPS */ sub_37951();
         /* LOAD_NYC_CAR_RECORDINGS */ sub_1642();
        g_U2199 = 0;
        l_U1866 = 6;
         /* WRITESCRIPTLOG */ sub_1129( "CCB", "eFailure - STATE_FAIL_RESTART", 0 );
        break;
        case 6:
        if (GET_NUMBER_OF_STREAMING_REQUESTS() == 0)
        {
             /* WRITESCRIPTLOG */ sub_1129( "CCB", "eFailure - STATE_FAIL_IDLE", 0 );
            g_U2198 = 1;
             /* P_CREATE_S_NY1_GG_19_03 */ sub_11760();
            if ( /* IS_MAX_VALID */ sub_30409())
            {
                SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_7106(), 0 );
            }
            if (g_U724 == 5)
            {
                 /* WRITESCRIPTLOG */ sub_1129( "CCB", "eFailure - STATE_FAIL_IDLE", 0 );
                 /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_7200( ref l_U605,  /* PLAYER_PED_ID */ sub_7106() );
                 /* P_PREPARE_ALLEY_FIGHT_START */ sub_12955();
                l_U459 = 3;
                l_U1758 = 8;
            }
            else
            {
                 /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_7200( ref l_U569,  /* PLAYER_PED_ID */ sub_7106() );
                l_U459 = 2;
                l_U1758 = 0;
            }
            l_U1866 = 0;
             /* WRITESCRIPTLOG */ sub_1129( "CCB", "eCheckpoint - STATE_CHECKPOINT_INIT", 0 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_1129( "CCB", "Waiting for stream requests...", 0 );
        }
        break;
    }
    return;
}

/* IS_MAX_VALID */ int sub_30409()
{
    if ( /* IS_PED_VALID */ sub_16533(  /* PLAYER_PED_ID */ sub_7106() ))
    {
        return 1;
    }
    return 0;
}

/* P_SETUP_PASSOS_DEATH */ void sub_30499(unknown uParam0)
{
    string sVar3;
    string sVar4;
    string sVar5;
    string sVar6;
    string sVar7;

     /* WRITESCRIPTLOG */ sub_1129( "NS", "P_SETUP_PASSOS_DEATH()", 0 );
    sVar3 = "";
    sVar4 = "";
    sVar5 = "";
    sVar6 = "";
    sVar7 = "";
    switch (l_U275)
    {
        case 0:
        sVar4 = "S_NYB_FAIL_09A";
        sVar5 = "S_NYB_FAIL_09B";
        sVar6 = "S_NYB_FAIL_09C";
        sVar7 = "S_NYB_FAIL_09D";
        sVar3 = "MISS_FAIL_04";
        break;
        case 1:
        sVar4 = "S_NYB_FAIL_10A";
        sVar5 = "S_NYB_FAIL_10B";
        sVar3 = "MISS_FAIL_08";
        break;
        case 2:
        sVar4 = "S_NYB_FAIL_11A";
        sVar5 = "S_NYB_FAIL_11B";
        sVar6 = "S_NYB_FAIL_11C";
        sVar7 = "S_NYB_FAIL_11D";
        sVar3 = "MISS_FAIL_04";
        break;
        case 3:
        sVar4 = "S_NYB_FAIL_12A";
        sVar5 = "S_NYB_FAIL_12B";
        sVar6 = "S_NYB_FAIL_12C";
        sVar7 = "S_NYB_FAIL_12D";
        sVar3 = "MISS_FAIL_04";
        break;
        case 4:
        sVar4 = "S_NYB_FAIL_13A";
        sVar5 = "S_NYB_FAIL_13B";
        sVar6 = "S_NYB_FAIL_13C";
        sVar7 = "S_NYB_FAIL_13D";
        sVar3 = "MISS_FAIL_05";
        break;
    }
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
     /* P_RUN_AND_PLAY_DEATH_CAM */ sub_31118( sVar3, sVar4, sVar5, sVar6, sVar7, uParam0 );
    l_U275++;
    if (l_U275 == 5)
    {
        l_U275 = 0;
    }
    return;
}

/* P_RUN_AND_PLAY_DEATH_CAM */ void sub_31118(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
     /* WRITESCRIPTLOG */ sub_1129( "NS", "P_SETUP_AND_PLAY_DEATH_CAM()", 0 );
    uParam5 = uParam5;
    if (NOT (IS_STRING_NULL( uParam1 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 0, "" );
    }
    if (NOT (IS_STRING_NULL( uParam2 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 1, "" );
    }
    if (NOT (IS_STRING_NULL( uParam3 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 2, "" );
    }
    if (NOT (IS_STRING_NULL( uParam4 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 3, "" );
    }
    return;
}

/* F_HANDLE_DEATH_CAM_PASSOS */ int sub_31447()
{
    switch (l_U1747)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_1129( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_INIT", 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
         /* NIS_PRE_SETUP */ sub_22735( 1, 0, 0, 1 );
         /* P_DEACTIVATEPEDARRAY */ sub_31616( ref l_U876 );
         /* P_DEACTIVATEPEDARRAY */ sub_31616( ref l_U921 );
         /* P_DEACTIVATEPEDARRAY */ sub_31616( ref l_U966 );
         /* P_DEACTIVATEPEDARRAY */ sub_31616( ref l_U668 );
         /* P_DEACTIVATEPEDARRAY */ sub_31616( ref l_U698 );
         /* P_DEACTIVATEPEDARRAY */ sub_31616( ref l_U715 );
         /* P_DEACTIVATEPEDARRAY */ sub_31616( ref l_U826 );
        if ( /* IS_MAX_VALID */ sub_30409())
        {
            SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_7106(), 0 );
        }
        if ( /* IS_PASSOS_VALID */ sub_31771())
        {
            CLEAR_PED_TASKS_IMMEDIATELY( g_U750 );
             /* SETUP_PASSOS_FOR_FAILURE_SCENE */ sub_31864( ref g_U750 );
        }
        if (l_U1865 == 0)
        {
             /* NIS_CREATE_STATIC_CAM */ sub_32246( ref l_U1825, -11.52072000, -322.28160000, -0.13818200, 6.70345700, -0.14873900, 24.14595000, 45, 6000 );
             /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U984, -12.55000000, -317.08000000, -0.66000000, 180, 812785529, 7, 3, 2, 0, 0 );
             /* CLEANPED */ sub_15654( l_U997 );
            l_U997 =  /* CREATEPED */ sub_15819( ref l_U984 );
            if ( /* IS_PED_VALID */ sub_16533( l_U997 ))
            {
                 /* SETUP_KILLER_FOR_FAILURE_CUTSCENES */ sub_32561( ref l_U997 );
                 /* F_GIVEPEDWEAPON */ sub_9648( l_U997, -862236369, 25000, 0, 0 );
                REGISTER_TARGET( l_U997, g_U750 );
                SET_PED_DEFAULT_AIM_AT_PED( l_U997, g_U750 );
                TASK_AIM_GUN_AT_PED( l_U997, g_U750, -1, 0 );
            }
        }
        else if (l_U1865 == 1)
        {
             /* NIS_CREATE_STATIC_CAM */ sub_32246( ref l_U1825, -74.80502000, -335.44190000, 5.30490800, -31.82968000, -0.35267100, -41.85088000, 45, 6000 );
            if (NOT ( /* F_MOVE_PASSOS_TO_POSITION */ sub_32829( ref g_U750, -74.66553000, -333.98280000, 2.97000000, 90.00000000 )))
            {
                PED_SET_ACTION_INTENTION( g_U750, 58, 1000, 0, 0, 0 );
                PED_SET_ACTION_INTENTION( g_U750, 55, -1, 0, 0, 0 );
            }
             /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U984, -65.24000000, -329.29000000, 0.23000000, 90, 812785529, 7, 3, 2, 0, 0 );
             /* CLEANPED */ sub_15654( l_U997 );
            l_U997 =  /* CREATEPED */ sub_15819( ref l_U984 );
            if ( /* IS_PED_VALID */ sub_16533( l_U997 ))
            {
                 /* SETUP_KILLER_FOR_FAILURE_CUTSCENES */ sub_32561( ref l_U997 );
                 /* F_GIVEPEDWEAPON */ sub_9648( l_U997, -862236369, 25000, 0, 0 );
                REGISTER_TARGET( l_U997, g_U750 );
                SET_PED_DEFAULT_AIM_AT_PED( l_U997, g_U750 );
                TASK_AIM_GUN_AT_PED( l_U997, g_U750, -1, 0 );
            }
        }
        l_U1747 = 3;
         /* WRITESCRIPTLOG */ sub_1129( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_START", 0 );
        case 3:
         /* NIS_PLAY_STATIC_CAMERA */ sub_33206( ref l_U1825 );
        if (l_U1865 == 0)
        {
             /* P_IMAGEFX_START_BULLETCAM */ sub_33482( "NY_PASSOS2_SCRIPTED_FAIL_FX", 0 );
        }
        else
        {
             /* P_IMAGEFX_START_BULLETCAM */ sub_33482( "NY_PASSOS3_SCRIPTED_FAIL_FX", 0 );
        }
        SHAKE_CAM( l_U1825._fU0,  /* F_CAM_SHAKE_WOBBLY */ sub_33918(), 0.25000000 );
         /* CREATETIMER */ sub_6630( ref l_U1856, 500, 1, 0 );
         /* STARTTIMER */ sub_33286( ref l_U1856 );
        l_U1747 = 2;
         /* WRITESCRIPTLOG */ sub_1129( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_WAITING", 0 );
        break;
        case 2:
        if ( /* ISTIMERDONE */ sub_34082( ref l_U1856 ))
        {
            if (( /* IS_PED_VALID */ sub_16533( g_U750 )) AND ( /* IS_PED_VALID */ sub_16533( l_U997 )))
            {
                SET_PED_SHOOTS_AT_COORD( l_U997, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_BONE_COORDS( g_U750, 65488, 0, 0, 0 ) );
                SHAKE_CAM( l_U1825._fU0, "SMALL_EXPLOSION_SHAKE", 1 );
                 /* P_KILL_PED */ sub_20444( g_U750 );
                 /* CREATETIMER */ sub_6630( ref l_U1856, 250, 1, 0 );
                 /* STARTTIMER */ sub_33286( ref l_U1856 );
                l_U1747 = 5;
                 /* WRITESCRIPTLOG */ sub_1129( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_PLAYING", 0 );
            }
        }
        break;
        case 5:
        if ( /* ISTIMERDONE */ sub_34082( ref l_U1856 ))
        {
            l_U1747 = 6;
             /* WRITESCRIPTLOG */ sub_1129( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_FINISHED", 0 );
        }
        break;
        case 6:
        return 1;
        break;
    }
    return 0;
}

/* P_DEACTIVATEPEDARRAY */ void sub_31616(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
         /* P_DEACTIVATEPED */ sub_19081( (uParam0^)[I] );
    }
    return;
}

/* IS_PASSOS_VALID */ int sub_31771()
{
    if ((NOT (IS_PED_DEAD( g_U750 ))) AND (DOES_PED_EXIST( g_U750 )))
    {
        return 1;
    }
    return 0;
}

/* SETUP_PASSOS_FOR_FAILURE_SCENE */ void sub_31864(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_1129( "RJM", "P_SETUP_PASSOS_FOR_FAILURE_SCENE", "***" );
    if ( /* IS_PED_VALID */ sub_16533( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), 1 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^), 0 );
        SET_PED_VALIDATE_BULLET_CAM_HIT( (uParam0^), 1 );
        SET_AI_SHOULD_ALWAYS_MISS_PED( (uParam0^), 0 );
        SET_CAN_AI_KICK_THROUGH_CORPSES( (uParam0^), 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_AI_TEMPLATE( (uParam0^), "AIT_NORMAL" );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( (uParam0^), 0 );
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^), 1 );
        SET_PED_GORE( (uParam0^), 1 );
        SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( (uParam0^), 0 );
        SET_PED_PROOFS( (uParam0^), 0, 1, 1, 1, 1 );
        SET_PED_ALLOWED_TO_SURRENDER( (uParam0^), 0 );
        SET_PED_CAN_AVOID_DEATH_ZONES( (uParam0^), 0 );
        SET_PED_STAND_GROUND_ON_PLAYER_IMPACT( (uParam0^), 1 );
        SET_PED_CAN_PUSH_PLAYER( (uParam0^), 1 );
        SET_PED_RESIST_TO_OBJECT_COLLISION( (uParam0^), 0 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_CAN_BE_TARGETTED( (uParam0^), 1 );
    }
    return;
}

/* NIS_CREATE_STATIC_CAM */ void sub_32246(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    iParam0->_fU4 = {uParam4};
    iParam0->_fU16 = {uParam1};
    iParam0->_fU28 = uParam7;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    iParam0->_fU84 = uParam8;
    iParam0->_fU88 = 0;
    iParam0->_fU92 = 0;
    iParam0->_fU40 = 0;
    iParam0->_fU44 = 0;
    iParam0->_fU100 = 1;
    iParam0->_fU104 = 1;
    iParam0->_fU96 = 0;
     /* CREATETIMER */ sub_6630( iParam0 + 48, uParam8, 1, 0 );
    iParam0->_fU0 = CREATE_CAM_WITH_PARAMS( ref g_U649, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 1 );
    SET_CAM_PARAMS( iParam0->_fU0, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 0, 1, 1 );
    return;
}

/* SETUP_KILLER_FOR_FAILURE_CUTSCENES */ void sub_32561(unknown uParam0)
{
    if ( /* IS_PED_VALID */ sub_16533( (uParam0^) ))
    {
        CLEAR_PED_TASKS_IMMEDIATELY( (uParam0^) );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), 1 );
        SET_PED_COMBAT_MOVEMENT( (uParam0^), 0 );
    }
    return;
}

/* F_MOVE_PASSOS_TO_POSITION */ int sub_32829(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (IS_PED_AT_COORD( (uParam0^), uParam1, 2, 2, 2, 0, 1 ))
    {
        return 1;
    }
    else
    {
         /* TELEPORTPED */ sub_20673( (uParam0^), uParam1, uParam4 );
    }
    return 0;
}

/* NIS_PLAY_STATIC_CAMERA */ void sub_33206(int iParam0)
{
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    SET_CAM_ACTIVE( iParam0->_fU0, 1 );
    RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
     /* STARTTIMER */ sub_33286( iParam0 + 48 );
    iParam0->_fU32 = 1;
    iParam0->_fU40 = 1;
    return;
}

/* STARTTIMER */ void sub_33286(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

/* P_IMAGEFX_START_BULLETCAM */ void sub_33482(unknown uParam0, boolean bParam1)
{
    PRINTSTRING( "[CO] P_IMAGEFX_START_BULLETCAM: Starting BulletCam: " );
    PRINTSTRING( uParam0 );
    PRINTNL();
     /* CLEANCAMERA */ sub_33602( ref l_U458 );
    l_U458 = CREATE_CAM( "DEFAULT_BULLET_CAMERA", 1 );
    SETUP_BULLET_CAMERA_SCENE( l_U458, uParam0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, "", "" );
    if (bParam1)
    {
        RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    }
    return;
}

/* CLEANCAMERA */ void sub_33602(unknown uParam0)
{
    if ((DOES_CAM_EXIST( (uParam0^) )) == 1)
    {
        if ((IS_CAM_ACTIVE( (uParam0^) )) == 1)
        {
            SET_CAM_ACTIVE( (uParam0^), 0 );
        }
        DESTROY_CAM( (uParam0^) );
    }
    (uParam0^) = nil;
    return;
}

/* F_CAM_SHAKE_WOBBLY */ string sub_33918()
{
    return "WOBBLY_SHAKE";
}

/* ISTIMERDONE */ int sub_34082(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

/* IS_RESTART_ACTIVE */ void sub_34631()
{
    return g_U648;
}

/* F_CHECK_QUIT_RETRY */ int sub_34750(int iParam0)
{
    iParam0 = 1;
    switch (l_U263)
    {
        case 0:
        if (NOT ( /* HASTIMERBEENACTIVATED */ sub_34832( ref l_U265 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )))
            {
                l_U264 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
             /* CREATETIMER */ sub_6630( ref l_U265, l_U264, 1, 1 );
             /* STARTTIMER */ sub_33286( ref l_U265 );
        }
        if ( /* ISTIMERDONE */ sub_34082( ref l_U265 ))
        {
             /* WRITESCRIPTLOG */ sub_1129( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_7144() )))
            {
                SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_7144(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U263 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U263 = 2;
            }
            else
            {
                l_U263 = 3;
            }
        }
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_1129( "NS", "Player will QUIT", 0 );
         /* P_POSTQUITRETRYCLEANUP */ sub_35315();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_1129( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
         /* P_POSTQUITRETRYCLEANUP */ sub_35315();
        return 1;
        break;
    }
    return 0;
}

/* HASTIMERBEENACTIVATED */ int sub_34832(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

/* P_POSTQUITRETRYCLEANUP */ void sub_35315()
{
     /* WRITESCRIPTLOG */ sub_1129( "NS", "P_PostFailRetryCleanup", 0 );
     /* RESETTIMER */ sub_6455( ref l_U265 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_7144() )))
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_7144(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U262 = 0;
    l_U262 = l_U262;
    l_U263 = 0;
    return;
}

/* P_IMAGEFX_STOP_BULLETCAM */ void sub_35970(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_1129( "CO", "P_IMAGEFX_STOP_BULLETCAM:  Cameras Deleted", 0 );
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
     /* CLEANCAMERA */ sub_33602( ref l_U458 );
    l_U457 = 1;
    return;
}

/* CLEANUP_ALLEY */ void sub_36188(boolean bParam0)
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "CLEANUP_ALLEY", "***" );
     /* UNREGISTER_PEDS_VIG_06 */ sub_36247();
     /* UNREGISTER_PEDS_BLENDOUT_MID_00 */ sub_36454();
     /* TERMINATEISEQ */ sub_36543( -1988558453, 1 );
    ISEQ_UNREGISTER_ENTITY( 320396699, "passos" );
     /* TERMINATEISEQ */ sub_36543( 320396699, 1 );
    ISEQ_UNREGISTER_ENTITY( -236629402, "passos" );
     /* TERMINATEISEQ */ sub_36543( -236629402, 1 );
    ENABLE_WALLA_ZONE( "S_NYC_WZ_ALLEY_GET_READY", 0 );
     /* CLEANUP_BEFORE_CUT_04_02 */ sub_36962();
    if (g_U2198)
    {
         /* CLEANPED */ sub_15654( g_U750 );
    }
     /* CLEANPLACEMENT */ sub_12368( g_U701._fU0 );
    l_U768 = 0;
    l_U769 = 0;
    l_U1762 = nil;
     /* CLEANPED */ sub_15654( l_U997 );
     /* CLEANPEDARRAY */ sub_37123( ref l_U876 );
     /* CLEANPEDARRAY */ sub_37123( ref l_U921 );
     /* CLEANPEDARRAY */ sub_37123( ref l_U966 );
     /* CLEANVEHICLE */ sub_24567( l_U779 );
     /* CLEANVEHICLE */ sub_24567( l_U780 );
     /* CLEANVEHICLE */ sub_24567( l_U781 );
     /* CLEANVEHICLEARRAY */ sub_37255( ref l_U782 );
    STOP_SCRIPT_STREAM( l_U1361 );
    STOP_SCRIPT_STREAM( l_U1362 );
    if ( /* IS_MAX_VALID */ sub_30409())
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "CLEANUP_ALLEY: player no longer invincible", "***" );
        SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_7106(), 0 );
    }
     /* UNLOADANIMDICT */ sub_37587( "PAS_INT" );
     /* UNLOADACTIONTREE */ sub_37674( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act" );
    if (bParam0)
    {
        if (CUTSCENE_IS_LOADED( "mid_01_nybar_concat" ))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "CLEANUP_ALLEY: clearing nybar mid_01", "***" );
            CLEAR_NAMED_CUTSCENE( "mid_01_nybar_concat" );
        }
    }
    return;
}

/* UNREGISTER_PEDS_VIG_06 */ void sub_36247()
{
    ISEQ_UNREGISTER_ENTITY( -1988558453, "VIG_06_NYBAR_GMED" );
    ISEQ_UNREGISTER_ENTITY( -1988558453, "VIG_06_NYBAR_GMED1" );
    ISEQ_UNREGISTER_ENTITY( -1988558453, "VIG_06_NYBAR_GMED2" );
    ISEQ_UNREGISTER_ENTITY( -1988558453, "VIG_06_NYBAR_GMED3" );
    ISEQ_UNREGISTER_ENTITY( -1988558453, "VIG_06_NYBAR_GMED4" );
    return;
}

/* UNREGISTER_PEDS_BLENDOUT_MID_00 */ void sub_36454()
{
    ISEQ_UNREGISTER_ENTITY( 984969677, "max" );
    ISEQ_UNREGISTER_ENTITY( 984969677, "passos" );
     /* TERMINATEISEQ */ sub_36543( 984969677, 1 );
    return;
}

/* TERMINATEISEQ */ void sub_36543(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to terminate does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 1)
    {
        ISEQ_TERMINATE( uParam0 );
    }
    ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
    if (iParam1 == 1)
    {
        while ((ISEQ_IS_LOADED( uParam0 )) == 1)
        {
            DISPLAYF( "[SP]### Waiting for interactive sequence to terminate: {0} {1} ###", 2, 1281, ref uVar4, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* CLEANUP_BEFORE_CUT_04_02 */ void sub_36962()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "CLEANUP_BEFORE_CUT_04_02", "***" );
     /* CLEANVEHICLERECORDING */ sub_37048( l_U1359 );
     /* CLEANVEHICLERECORDING */ sub_37048( l_U1360 );
     /* CLEANPED */ sub_15654( l_U997 );
     /* CLEANPEDARRAY */ sub_37123( ref l_U876 );
     /* CLEANPEDARRAY */ sub_37123( ref l_U921 );
     /* CLEANPEDARRAY */ sub_37123( ref l_U966 );
     /* CLEANPEDARRAY */ sub_37123( ref l_U668 );
     /* CLEANPEDARRAY */ sub_37123( ref l_U698 );
     /* CLEANPEDARRAY */ sub_37123( ref l_U715 );
     /* CLEANPEDARRAY */ sub_37123( ref l_U826 );
     /* CLEANVEHICLEARRAY */ sub_37255( ref l_U782 );
    return;
}

/* CLEANVEHICLERECORDING */ void sub_37048(unknown uParam0)
{
    REMOVE_VEHICLE_RECORDING( uParam0 );
    return;
}

/* CLEANPEDARRAY */ void sub_37123(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
         /* CLEANPED */ sub_15654( (uParam0^)[I] );
    }
    return;
}

/* CLEANVEHICLEARRAY */ void sub_37255(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
         /* CLEANVEHICLE */ sub_24567( (uParam0^)[I] );
    }
    return;
}

/* UNLOADANIMDICT */ void sub_37587(unknown uParam0)
{
    REMOVE_ANIM_DICT( uParam0, 0 );
    return;
}

/* UNLOADACTIONTREE */ void sub_37674(unknown uParam0)
{
    ACTION_TREE_UNLOAD( uParam0 );
    return;
}

/* P_SETUP_PLAYER_RELATIONSHIPS */ void sub_37951()
{
     /* WRITESCRIPTLOG */ sub_1129( "SP", "P_SETUP_PLAYER_RELATIONSHIPS", "###" );
    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )) == 0)
    {
        SET_PED_RELATIONSHIP(  /* PLAYER_PED_ID */ sub_7106(), 0, 1 );
        SET_PED_RELATIONSHIP(  /* PLAYER_PED_ID */ sub_7106(), 0, 2 );
        SET_PED_RELATIONSHIP(  /* PLAYER_PED_ID */ sub_7106(), 0, 6 );
        SET_PED_RELATIONSHIP(  /* PLAYER_PED_ID */ sub_7106(), 0, 7 );
    }
    return;
}

/* P_HANDLE_START_EVENTS */ void sub_38519()
{
    int iVar2;
    int iVar3;
    int iVar4;
    unknown uVar5;
    unknown uVar6;

    if (l_U1866 == 0)
    {
        switch (l_U1758)
        {
            case 0:
             /* CREATE_PARKING_LOT_ENEMIES */ sub_17282();
             /* P_SETUP_INITIAL_ISEQS */ sub_38686();
             /* REGISTER_PEDS_VIG_06 */ sub_38867();
            l_U1758 = 1;
            break;
            case 1:
            if (g_U2198)
            {
                 /* SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR */ sub_39227( 4 );
                if (g_U723 != 4)
                {
                    g_U2454[0] = 1;
                    l_U1385 = 1;
                }
                 /* P_CLOSEDOOR */ sub_39622( ref g_U2055, 1 );
                 /* P_SETDOORLOCKED */ sub_39879( ref g_U2055, 1 );
                 /* P_CLOSEDOOR */ sub_39622( ref g_U2062, 1 );
                 /* P_SETDOORLOCKED */ sub_39879( ref g_U2062, 1 );
                 /* TELEPORTPED */ sub_20673(  /* PLAYER_PED_ID */ sub_7106(), g_U2253[4]._fU0, g_U2253[4]._fU12 );
                 /* P_NYBAR_PARKING_LOT_VIGNETTE */ sub_40076();
                 /* HANDLE_MID00_BLENDOUT */ sub_48605();
                l_U1758 = 2;
            }
            break;
            case 2:
            if ( /* HANDLE_MID00_BLENDOUT */ sub_48605())
            {
                g_U724 = 4;
                START_CONTEXT( "NYBAR_PARKING_LOT_TO_ALLEY" );
                if (NOT l_U569._fU0)
                {
                     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_START_EVENTS: saving CPAlleyCheckpoint (parking lot)", "***" );
                     /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_49723( ref l_U569, 4,  /* PLAYER_PED_ID */ sub_7106(), g_U2253[4]._fU0, g_U2253[4]._fU12, g_U2253[4]._fU16, g_U2253[4]._fU20, l_U1385 );
                }
                 /* P_NYBAR_PARKING_LOT_VIGNETTE */ sub_40076();
                 /* P_HANDLE_PASSOS_PARKING_VIGS */ sub_54285();
                 /* P_INIT_PASSOS_WARNING_DEATH */ sub_13267();
                l_U1758 = 3;
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_START_EVENTS - Going to ALLEY_PARKINGLOT", "***" );
            }
            break;
            case 3:
             /* P_NYBAR_PARKING_LOT_VIGNETTE */ sub_40076();
             /* P_HANDLE_PASSOS_PARKING_VIGS */ sub_54285();
            if ( /* KILLMEMBERSNOTINTRIGGER */ sub_61513( ref l_U668, l_U1222 ))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "RJM", "KILLING PARKING LEFT ENEMY - outside trigger", 0 );
            }
            if ( /* KILLMEMBERSNOTINTRIGGER */ sub_61513( ref l_U698, l_U1222 ))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "RJM", "KILLING PARKING MIDDLE ENEMY - outside trigger", 0 );
            }
            if ( /* KILLMEMBERSNOTINTRIGGER */ sub_61513( ref l_U715, l_U1222 ))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "RJM", "KILLING PARKING RIGHT ENEMY - outside trigger", 0 );
            }
            if ( /* F_HANDLE_PASSOS_WARNING_DEATH_WITH_TIMER */ sub_61964( l_U1285, 10000, 0 ))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "Player has abandoned Passos in the parking lot", "***" );
                g_U2199 = 1;
                l_U1865 = 0;
                PED_SET_ACTION_INTENTION( g_U750, 55, -1, 0, 0, 0 );
            }
            iVar4 = ((( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_63166( ref l_U668 )) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_63166( ref l_U698 ))) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_63166( ref l_U715 ))) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_63166( ref l_U826 ));
            if ((NOT l_U1378) AND (iVar4 == 1))
            {
                l_U1762 =  /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_63331( ref l_U668 );
                if (( /* IS_PED_VALID */ sub_16533( l_U1762 )) == 0)
                {
                    l_U1762 =  /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_63331( ref l_U698 );
                }
                if (( /* IS_PED_VALID */ sub_16533( l_U1762 )) == 0)
                {
                    l_U1762 =  /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_63331( ref l_U715 );
                }
                if (( /* IS_PED_VALID */ sub_16533( l_U1762 )) == 0)
                {
                    l_U1762 =  /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_63331( ref l_U826 );
                }
                if (( /* IS_PED_VALID */ sub_16533( l_U1762 )) == 1)
                {
                    l_U1378 = 1;
                    l_U1399 = 1;
                     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_START_EVENTS - Stopping bullet cam transition", "***" );
                    BULLET_CAMERA_TRACK_UNTIL_GROUNDED( 1 );
                    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 0 );
                }
            }
            else if (iVar4 == 0)
            {
                 /* WRITESCRIPTLOG */ sub_1129( "RJM", "P_HANDLE_START_EVENTS - (enemies dead) setting bStart_Vig07B = TRUE & Going to ALLEY_MID_01_BLEND_IN", 0 );
                l_U460 = 9;
                l_U1391 = 1;
                l_U1758 = 5;
            }
            else if (iVar4 < 4)
            {
                l_U460 = 8;
            };;;
            break;
            case 5:
             /* P_HANDLE_PASSOS_PARKING_VIGS */ sub_54285();
             /* HANDLE_PASSOS_WAITING_SPEECH */ sub_63899( 15000, 2500 );
            if (NOT IS_BULLET_CAMERA_TO_GAMEPLAY_ALLOWED())
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "ALLOW_BULLET_CAMERA_TO_GAMEPLAY to TRUE", 0 );
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
            }
            if (( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( l_U1053 )) || ( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( l_U1074 )))
            {
                uVar6 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_7106(), 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar6 )) == 1)
                {
                    if (( /* IS_WEAPON_TWO_HANDED */ sub_64827( uVar6 )) == 1)
                    {
                         /* P_EQUIP_PLAYER_WITH_SINGLE_HANDED_WEAPON */ sub_65137( 0 );
                    }
                }
            }
             /* UPDATE_FORCEWALK_AND_TRIGGER_PAIR */ sub_65790( l_U1074, l_U1053, 1 );
            if (l_U1750 == -1)
            {
                 /* CREATETIMER */ sub_6630( ref l_U1457, 1500, 1, 0 );
                 /* STARTTIMER */ sub_33286( ref l_U1457 );
                 /* LOADSEAMLESSCUTSCENE */ sub_66161( ref l_U473, 0 );
                 /* CREATE_MIDSCENE_01_CARS_AND_ENEMIES */ sub_13368();
                 /* LOADISEQ */ sub_20055( -850158086, 0 );
                 /* LOADANIMDICT */ sub_2096( "LEVEL_S_NYBAR_MID_01_BLENDOUT", 0, 0 );
                 /* WRITESCRIPTLOG */ sub_1129( "RJM", "P_HANDLE_START_EVENTS - Going to ALLEY_WAIT_FOR_MIDSCENE", 0 );
                l_U1758 = 6;
            }
            break;
            case 6:
             /* P_HANDLE_PASSOS_PARKING_VIGS */ sub_54285();
            if (( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( l_U1053 )) || ( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( l_U1074 )))
            {
                uVar6 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_7106(), 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar6 )) == 1)
                {
                    if (( /* IS_WEAPON_TWO_HANDED */ sub_64827( uVar6 )) == 1)
                    {
                         /* P_EQUIP_PLAYER_WITH_SINGLE_HANDED_WEAPON */ sub_65137( 0 );
                    }
                }
            }
            if ( /* UPDATE_FORCEWALK_AND_TRIGGER_PAIR */ sub_65790( l_U1074, l_U1053, 1 ))
            {
                 /* KILL_HANDLE_PASSOS_WAITING_SPEECH */ sub_66747( 1 );
                if ( /* ISTIMERDONE */ sub_34082( ref l_U1457 ))
                {
                    l_U1749 = -1;
                    STOP_SCRIPT_STREAM( l_U1361 );
                    STOP_SCRIPT_STREAM( l_U1362 );
                     /* LOADSCRIPTSTREAM */ sub_13077( l_U1363, l_U1361, 0 );
                     /* LOADSCRIPTSTREAM */ sub_13077( l_U1364, l_U1362, 0 );
                    l_U460 = 10;
                     /* WRITESCRIPTLOG */ sub_1129( "RJM", "P_HANDLE_START_EVENTS - Going to ALLEY_MIDSCENE", 0 );
                    l_U1758 = 7;
                }
            }
            else if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_56624()))
            {
                if ( /* ISTIMERDONE */ sub_34082( ref l_U1646 ))
                {
                     /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_67121( "SNYC_MVOP", ref l_U1597 );
                }
            }
            break;
            case 7:
            if (( /* PLAY_NYC_MID_01 */ sub_67302( 1, ref l_U876, ref l_U779, 0 )) == 1)
            {
                if (NOT IS_BULLET_CAMERA_TO_GAMEPLAY_ALLOWED())
                {
                    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
                }
                if ( /* IS_MAX_VALID */ sub_30409())
                {
                    SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_7106(), 0 );
                }
                if (( /* IS_VEHICLE_VALID */ sub_14464( l_U779 )) == 1)
                {
                    SET_VEHICLE_COORDS( l_U779, -59.98630000, -328.48000000, 0.62083100 );
                    SET_VEHICLE_HEADING( l_U779, 314.14600000 );
                    SET_VEHICLE_ON_GROUND_PROPERLY( l_U779 );
                }
                 /* WRITESCRIPTLOG */ sub_1129( "SP", "eMid01BlendState = BLEND_SETUP", 0 );
                l_U559 = 1;
                 /* F_HANDLE_MID_01_BLEND */ sub_21546();
                 /* P_EXIT_1ST_BLOCKER_CAR */ sub_20744();
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_START_EVENTS - Going to ALLEY_BATTLE_SETUP", 0 );
                l_U1758 = 8;
            }
            break;
            case 8:
             /* SETUP_VIG_08B_CARS_AND_ENEMIES */ sub_72824();
            l_U1752 = 1;
            l_U1753 = 1;
             /* SETUP_PASSOS_FOR_ALLEY */ sub_75471();
             /* F_HANDLE_MID_01_BLEND */ sub_21546();
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_START_EVENTS - Going to ALLEY_MIDSCENE_BLENDOUT", 0 );
            l_U1758 = 9;
            break;
            case 9:
            if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 500 );
            }
            if (( /* F_HANDLE_MID_01_BLEND */ sub_21546()) == 1)
            {
                if (NOT l_U605._fU0)
                {
                    g_U724 = 5;
                     /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_49723( ref l_U605, 5,  /* PLAYER_PED_ID */ sub_7106(), g_U2253[5]._fU0, g_U2253[5]._fU12, g_U2253[5]._fU16, g_U2253[5]._fU20, 1 );
                }
                 /* LOADISEQ */ sub_20055( -236629402, 0 );
                 /* LOADSEAMLESSCUTSCENE */ sub_66161( l_U284, 0 );
                SET_PED_VISIBLE( g_U750, 0 );
                l_U1761 = nil;
                 /* CREATETIMER */ sub_6630( ref l_U1403, 250, 1, 0 );
                 /* STARTTIMER */ sub_33286( ref l_U1403 );
                 /* WRITESCRIPTLOG */ sub_1129( "RJM", "P_HANDLE_START_EVENTS - Going to ALLEY_MIDSCENE_CLEANUP", 0 );
                l_U1758 = 10;
            }
             /* P_HANDLE_2ND_BLOCKER_CAR */ sub_76096();
             /* P_HANDLE_LAST_BLOCKER_CAR */ sub_77971();
            break;
            case 10:
             /* CREATETIMER */ sub_6630( ref l_U1466, 7000, 1, 0 );
             /* CREATETIMER */ sub_6630( ref l_U1475, 20000, 1, 0 );
             /* CREATETIMER */ sub_6630( ref l_U1484, 30000, 1, 0 );
             /* STARTTIMER */ sub_33286( ref l_U1466 );
             /* STARTTIMER */ sub_33286( ref l_U1475 );
             /* STARTTIMER */ sub_33286( ref l_U1484 );
             /* WRITESCRIPTLOG */ sub_1129( "RJM", "P_HANDLE_START_EVENTS - Going to ALLEY_BATTLE", 0 );
            l_U1758 = 11;
            break;
            case 11:
            if ( /* KILLMEMBERSNOTINTRIGGER */ sub_61513( ref l_U876, l_U1222 ))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "RJM", "KILLING piEnemyCar1 ENEMY - outside trigger", 0 );
            }
            if ( /* KILLMEMBERSNOTINTRIGGER */ sub_61513( ref l_U921, l_U1222 ))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "RJM", "KILLING piEnemyCar3 ENEMY - outside trigger", 0 );
            }
            if ( /* KILLMEMBERSNOTINTRIGGER */ sub_61513( ref l_U966, l_U1222 ))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "RJM", "KILLING piEnemyCar4 ENEMY - outside trigger", 0 );
            }
            if ((NOT l_U1382) AND (NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( l_U1137 ))))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "Player in tbAlleyMaxLeaveCover", "***" );
                 /* PED_SET_LOCK_TO_COVER */ sub_79220( ref l_U876[0], 0 );
                 /* PED_SET_LOCK_TO_COVER */ sub_79220( ref l_U876[1], 0 );
                l_U1382 = 1;
            }
            if ( /* ISTIMERDONE */ sub_34082( ref l_U1466 ))
            {
                l_U460 = 15;
            }
            else if ( /* ISTIMERDONE */ sub_34082( ref l_U1475 ))
            {
                l_U460 = 18;
            }
            else if ( /* ISTIMERDONE */ sub_34082( ref l_U1484 ))
            {
                l_U460 = 21;
            };;;
            iVar2 =  /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_63166( ref l_U876 );
            iVar3 = (iVar2 + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_63166( ref l_U921 ))) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_63166( ref l_U966 ));
             /* P_HANDLE_2ND_BLOCKER_CAR */ sub_76096();
             /* P_HANDLE_LAST_BLOCKER_CAR */ sub_77971();
            if ( /* ISTIMERDONE */ sub_34082( ref l_U1403 ))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "Starting VIG09", "***" );
                if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
                {
                    PED_FINISH_ACTION_INTENTION( g_U750, 55 );
                    PED_ACTION_TREE_PLAY_NODE( g_U750, ref g_U2203 );
                    SET_PED_VISIBLE( g_U750, 1 );
                }
                l_U1754 = 0;
                l_U1365 = 1;
            }
            if ((NOT l_U1373) AND (iVar3 == 1))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "ALLEY: 1 enemy left - setting bullet cam", 0 );
                 /* MAKE_ALLEY_CARS_NOT_BLOWUP */ sub_79613( 1 );
                l_U1762 =  /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_63331( ref l_U876 );
                if (( /* IS_PED_VALID */ sub_16533( l_U1762 )) == 0)
                {
                    l_U1762 =  /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_63331( ref l_U921 );
                }
                if (( /* IS_PED_VALID */ sub_16533( l_U1762 )) == 0)
                {
                    l_U1762 =  /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_63331( ref l_U966 );
                }
                l_U1373 = 1;
                FORCE_CUSTOM_WIPE_BULLET_CAMERA( 1 );
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 0 );
            }
            if (( /* IS_MAX_VALID */ sub_30409()) AND ((NOT (IS_BULLET_CAMERA_RUNNING( 0 ))) AND ((l_U1748 < 2) AND (iVar3 == 0))))
            {
                END_CONTEXT( "NYBAR_TO_END_OF_ALLEY" );
                END_CONTEXT( "NYBAR_PARKING_LOT_TO_ALLEY" );
                 /* CLOSE_CURRENT_LEVEL_CONTEXT */ sub_7419( l_U605._fU52 );
                 /* UNLOALD_PRE_04_02_ASSETS_ALLEY */ sub_80276();
                 /* P_UNLOAD_VIG08B_ASSETS */ sub_80407();
                l_U459 = 22;
                l_U460 = 22;
                 /* P_HANDLE_MUSIC */ sub_25697();
                l_U1758 = 12;
            }
             /* P_HANDLE_SWAP_1ST_BLOCKER_TETHERS */ sub_80770();
             /* P_HANDLE_VIG09 */ sub_81224( iVar3 );
            if ( /* F_HANDLE_PASSOS_WARNING_DEATH */ sub_84006( l_U1306, l_U1327, 0 ))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "Player has abandoned Passos in the alley: fire escape", "***" );
                g_U2199 = 1;
                l_U1865 = 1;
            }
            break;
            case 12:
            SET_HIGHEST_ARCADE_LEVEL_UNLOCKED( 4 );
            if (IS_ARCADE_MODE_ACTIVE() == 1)
            {
                DISPLAY_ARCADE_MODE_LEVEL_END( "s_nyc2" );
                DO_SCREEN_FADE_IN( 0 );
            }
            else
            {
                 /* LOADSEAMLESSCUTSCENE */ sub_66161( l_U284, 1 );
                if (NOT IS_MAGDEMO())
                {
                    DISABLE_FADE_BETWEEN_SP_LEVELS();
                }
                 /* PLAY_INDIVIDUAL_04_02_SHOT */ sub_85192( l_U284, 0, 1 );
            }
             /* CLEANUP_ALLEY */ sub_36188( 0 );
             /* UNLOALD_PRE_04_02_ASSETS_ALLEY */ sub_80276();
             /* WRITESCRIPTLOG */ sub_1129( "RJM", "P_HANDLE_START_EVENTS - Going to ALLEY_DONE", 0 );
            g_U2454[1] = 1;
            g_U2201 = 0;
            l_U1758 = 13;
            break;
            case 13: break;
        }
    }
    return;
}

/* P_SETUP_INITIAL_ISEQS */ void sub_38686()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_SETUP_INITIAL_ISEQS", "***" );
     /* LOADISEQ */ sub_20055( 984969677, 1 );
     /* LOADISEQ */ sub_20055( 320396699, 1 );
     /* LOADISEQ */ sub_20055( -1988558453, 1 );
     /* LOADACTIONTREE */ sub_2305( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act", 1 );
     /* LOADANIMDICT */ sub_2096( "PAS_INT", 0, 1 );
    return;
}

/* REGISTER_PEDS_VIG_06 */ void sub_38867()
{
     /* WRITESCRIPTLOG */ sub_1129( "TEH", "REGISTER_PEDS_VIG_06- start", 0 );
    ISEQ_REGISTER_ENTITY( -1988558453, "VIG_06_NYBAR_GMED", l_U668[0], 0 );
    ISEQ_REGISTER_ENTITY( -1988558453, "VIG_06_NYBAR_GMED1", l_U668[1], 0 );
    ISEQ_REGISTER_ENTITY( -1988558453, "VIG_06_NYBAR_GMED2", l_U698[0], 0 );
    ISEQ_REGISTER_ENTITY( -1988558453, "VIG_06_NYBAR_GMED3", l_U698[1], 0 );
    ISEQ_REGISTER_ENTITY( -1988558453, "VIG_06_NYBAR_GMED4", l_U715[0], 0 );
     /* WRITESCRIPTLOG */ sub_1129( "TEH", "REGISTER_PEDS_VIG_06 - end", 0 );
    return;
}

/* SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR */ void sub_39227(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_1129( "BSW", "SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR start...", 0 );
    PRINTSTRING( "Setting weather for checkpoint: " );
    PRINTINT( uParam0 );
    PRINTNL();
    switch (uParam0)
    {
        case 0:
        case 2:
        case 3:
        case 26:
        SET_TIME_OF_DAY( 12, 0 );
        FREEZE_TIME_OF_DAY( 12, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
        break;
        case 4:
        case 5:
        case 21:
        SET_TIME_OF_DAY( 12, 0 );
        FREEZE_TIME_OF_DAY( 12, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "snow_light" );
        break;
        default:
        SET_TIME_OF_DAY( 12, 0 );
        FREEZE_TIME_OF_DAY( 12, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
        break;
    }
    return;
}

/* P_CLOSEDOOR */ void sub_39622(int iParam0, int iParam1)
{
    if (( /* F_DOESDOOREXIST */ sub_39648( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_39732( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    return;
}

/* F_DOESDOOREXIST */ int sub_39648(int iParam0)
{
    int iVar3;

    iVar3 = DOES_OBJECT_OF_TYPE_EXIST_AT_COORDS( iParam0->_fU4, 1.00000000, iParam0->_fU0 );
    if (iVar3 == 1)
    {
        return 1;
    }
    return 0;
}

/* P_PRINTDOORNOTEXIST */ void sub_39732(unknown uParam0)
{
    (uParam0^) = {(uParam0^)};
    return;
}

/* P_SETDOORLOCKED */ void sub_39879(int iParam0, int iParam1)
{
    int iVar4;
    float fVar5;

    if (( /* F_DOESDOOREXIST */ sub_39648( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_39732( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
    }
    else
    {
        iVar4 = 0;
        fVar5 = 0.00000000;
        GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref iVar4, ref fVar5 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar5 );
    }
    return;
}

/* P_NYBAR_PARKING_LOT_VIGNETTE */ void sub_40076()
{
    int I;
    boolean bVar3;
    boolean bVar4;

    if ((ISEQ_QUERY_ENTITY_ANIMATION_PHASE( -1988558453, "VIG_06_NYBAR_GMED4", "VIGNETTE_A" )) > 0.90000000)
    {
        if ( /* IS_PED_VALID */ sub_16533( l_U668[0] ))
        {
            SET_PED_ALERTNESS( l_U668[0], 4 );
        }
        if ( /* IS_PED_VALID */ sub_16533( l_U668[1] ))
        {
            SET_PED_ALERTNESS( l_U668[1], 4 );
        }
        if ( /* IS_PED_VALID */ sub_16533( l_U698[0] ))
        {
            SET_PED_ALERTNESS( l_U698[0], 4 );
        }
        if ( /* IS_PED_VALID */ sub_16533( l_U698[1] ))
        {
            SET_PED_ALERTNESS( l_U698[1], 4 );
        }
        if ( /* IS_PED_VALID */ sub_16533( l_U715[0] ))
        {
            SET_PED_ALERTNESS( l_U715[0], 4 );
        }
        if (NOT l_U1367)
        {
             /* P_DIAL_PARKING_THUG_SPOTS_MAX */ sub_40355();
            l_U1367 = 1;
        }
    }
    if ((ISEQ_QUERY_ENTITY_ANIMATION_PHASE( -1988558453, "VIG_06_NYBAR_GMED4", "VIGNETTE_A" )) >= 0.95000000)
    {
        if ( /* IS_PED_VALID */ sub_16533( l_U668[0] ))
        {
             /* PED_SET_REGISTER_TARGET_PLAYER */ sub_41846( ref l_U668[0] );
            SET_PED_COMBAT_ATTRIBUTES( l_U668[0], 131072, 1 );
        }
        if ( /* IS_PED_VALID */ sub_16533( l_U668[1] ))
        {
             /* PED_SET_REGISTER_TARGET_PLAYER */ sub_41846( ref l_U668[1] );
            SET_PED_COMBAT_ATTRIBUTES( l_U668[1], 131072, 1 );
        }
        if ( /* IS_PED_VALID */ sub_16533( l_U698[0] ))
        {
             /* PED_SET_REGISTER_TARGET_PLAYER */ sub_41846( ref l_U698[0] );
            SET_PED_COMBAT_ATTRIBUTES( l_U698[0], 131072, 1 );
        }
        if ( /* IS_PED_VALID */ sub_16533( l_U698[1] ))
        {
             /* PED_SET_REGISTER_TARGET_PLAYER */ sub_41846( ref l_U698[1] );
            SET_PED_COMBAT_ATTRIBUTES( l_U698[1], 131072, 1 );
        }
        if ( /* IS_PED_VALID */ sub_16533( l_U715[0] ))
        {
             /* PED_SET_REGISTER_TARGET_PLAYER */ sub_41846( ref l_U715[0] );
            SET_PED_COMBAT_ATTRIBUTES( l_U715[0], 131072, 1 );
        }
    }
    bVar3 = false;
    if ((NOT l_U1366) AND (l_U1756 != 0))
    {
        I = 0;
        if (bVar3 == 0)
        {
            while ((I < 2) AND (NOT bVar3))
            {
                if ( /* HAS_THUG_SPOTTED_PLAYER */ sub_42208( ref l_U668[I] ))
                {
                    bVar3 = true;
                }
                else
                {
                    I++;
                }
            }
            I = 0;
            while ((I < 2) AND (NOT bVar3))
            {
                if ( /* HAS_THUG_SPOTTED_PLAYER */ sub_42208( ref l_U698[I] ))
                {
                    bVar3 = true;
                }
                else
                {
                    I++;
                }
            }
            I = 0;
            while ((I < 1) AND (NOT bVar3))
            {
                if ( /* HAS_THUG_SPOTTED_PLAYER */ sub_42208( ref l_U715[I] ))
                {
                    bVar3 = true;
                }
                else
                {
                    I++;
                }
            }
        }
        if (bVar3)
        {
            if ( /* IS_PED_VALID */ sub_16533( l_U668[0] ))
            {
                SET_PED_COMBAT_ATTRIBUTES( l_U668[0], 131072, 1 );
            }
            if ( /* IS_PED_VALID */ sub_16533( l_U668[1] ))
            {
                SET_PED_COMBAT_ATTRIBUTES( l_U668[1], 131072, 1 );
            }
            if ( /* IS_PED_VALID */ sub_16533( l_U698[0] ))
            {
                SET_PED_COMBAT_ATTRIBUTES( l_U698[0], 131072, 1 );
            }
            if ( /* IS_PED_VALID */ sub_16533( l_U698[1] ))
            {
                SET_PED_COMBAT_ATTRIBUTES( l_U698[1], 131072, 1 );
            }
            if ( /* IS_PED_VALID */ sub_16533( l_U715[0] ))
            {
                SET_PED_COMBAT_ATTRIBUTES( l_U715[0], 131072, 1 );
            }
            if ( /* IS_SPEECH_CURRENTLY_PLAYING */ sub_43567( l_U1547 ))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_NYBAR_PARKING_LOT_VIGNETTE: Kill thug speech", "***" );
                 /* KILL_SPEECH */ sub_43861( ref l_U1547, 0 );
            }
            l_U1366 = 1;
            l_U1756 = 3;
        }
    }
    switch (l_U1756)
    {
        case 0:
        l_U1870[0] = 0;
        l_U1870[1] = 0;
        l_U1873[0] = 0;
        l_U1873[1] = 0;
        l_U1876 = 0;
         /* P_FREEZE_PED_ARRAY */ sub_19220( ref l_U668, 0 );
         /* P_FREEZE_PED_ARRAY */ sub_19220( ref l_U698, 0 );
         /* P_FREEZE_PED_ARRAY */ sub_19220( ref l_U715, 0 );
         /* TELPORT_PEDS_VIG_06 */ sub_44172();
         /* SETUP_PASSOS_FOR_PARKING_LOT */ sub_44471();
        ISEQ_START( -1988558453 );
        FREEZE_VEHICLE_POSITION( l_U782[0], 0 );
        SET_VEHICLE_FREEZE_AFTER_BLOWING_UP( l_U782[0], 1 );
        FREEZE_VEHICLE_POSITION( l_U782[1], 0 );
        SET_VEHICLE_FREEZE_AFTER_BLOWING_UP( l_U782[1], 1 );
         /* P_DIAL_PARKING_THUG_VIG */ sub_45151();
        l_U1756 = 1;
        break;
        case 1:
        if (((ISEQ_QUERY_ENTITY_STATE( -1988558453, "VIG_06_NYBAR_GMED4", 3 )) == 0) || (NOT ( /* IS_SPEECH_CURRENTLY_PLAYING */ sub_43567( l_U1547 ))))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_NYBAR_PARKING_LOT_VIGNETTE: Thug speech completed", "***" );
            l_U1756 = 2;
        }
        break;
        case 2:
        if ((ISEQ_QUERY_ENTITY_STATE( -1988558453, "VIG_06_NYBAR_GMED4", 3 )) == 0)
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_NYBAR_PARKING_LOT_VIGNETTE: Iseq completed", "***" );
             /* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_45688( ref l_U715[0], 0 );
            l_U1366 = 1;
            l_U1756 = 3;
        }
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_NYBAR_PARKING_LOT_VIGNETTE: Max has been spotted", "***" );
        if (NOT l_U1367)
        {
             /* P_DIAL_PARKING_THUG_SPOTS_MAX */ sub_40355();
        }
        l_U1390 = 1;
         /* STARTTIMER */ sub_33286( ref l_U1430 );
         /* LOADMODEL */ sub_1320( g_U2250, 0 );
         /* CREATETIMER */ sub_6630( ref l_U723, 0, 1, 0 );
         /* CREATETIMER */ sub_6630( ref l_U732, 0, 1, 0 );
         /* CREATETIMER */ sub_6630( ref l_U741, 0, 1, 0 );
         /* CREATETIMER */ sub_6630( ref l_U750, 0, 1, 0 );
         /* CREATETIMER */ sub_6630( ref l_U759, 0, 1, 0 );
         /* STARTTIMER */ sub_33286( ref l_U723 );
         /* STARTTIMER */ sub_33286( ref l_U732 );
         /* STARTTIMER */ sub_33286( ref l_U741 );
         /* STARTTIMER */ sub_33286( ref l_U750 );
         /* STARTTIMER */ sub_33286( ref l_U759 );
        l_U460 = 6;
        l_U1756 = 4;
        break;
        case 4:
        if (l_U768 < 5)
        {
            if ( /* ISTIMERDONE */ sub_34082( ref l_U723 ))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "TEH", "P_NYBAR_PARKING_LOT_VIGNETTE: Max has been spotted Handling alert timers: 0", "***" );
                if ( /* IS_PED_VALID */ sub_16533( l_U668[0] ))
                {
                    PED_SET_ACTION_INTENTION( l_U668[0], 47, 1000, 0.00000000, 0.00000000, 0.00000000 );
                }
                l_U768++;
            }
            if ( /* ISTIMERDONE */ sub_34082( ref l_U732 ))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "TEH", "P_NYBAR_PARKING_LOT_VIGNETTE: Max has been spotted Handling alert timers: 1", "***" );
                if ( /* IS_PED_VALID */ sub_16533( l_U668[1] ))
                {
                    PED_SET_ACTION_INTENTION( l_U668[1], 48, 1000, 0.00000000, 0.00000000, 0.00000000 );
                }
                l_U768++;
            }
            if ( /* ISTIMERDONE */ sub_34082( ref l_U741 ))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "TEH", "P_NYBAR_PARKING_LOT_VIGNETTE: Max has been spotted Handling alert timers: 2", "***" );
                if ( /* IS_PED_VALID */ sub_16533( l_U715[0] ))
                {
                    PED_SET_ACTION_INTENTION( l_U715[0], 51, 1000, 0.00000000, 0.00000000, 0.00000000 );
                }
                l_U768++;
            }
            if ( /* ISTIMERDONE */ sub_34082( ref l_U750 ))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "TEH", "P_NYBAR_PARKING_LOT_VIGNETTE: Max has been spotted Handling alert timers: 3", "***" );
                if ( /* IS_PED_VALID */ sub_16533( l_U698[0] ))
                {
                    PED_SET_ACTION_INTENTION( l_U698[0], 49, 1000, 0.00000000, 0.00000000, 0.00000000 );
                }
                l_U768++;
            }
            if ( /* ISTIMERDONE */ sub_34082( ref l_U759 ))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "TEH", "P_NYBAR_PARKING_LOT_VIGNETTE: Max has been spotted Handling alert timers: 4", "***" );
                if ( /* IS_PED_VALID */ sub_16533( l_U698[1] ))
                {
                    PED_SET_ACTION_INTENTION( l_U698[1], 50, 1000, 0.00000000, 0.00000000, 0.00000000 );
                }
                l_U768++;
            }
        }
        else if (l_U768 <= l_U769)
        {
             /* WRITESCRIPTLOG */ sub_1129( "TEH", "P_NYBAR_PARKING_LOT_VIGNETTE: Max has been spotted Handling alert timers: everybody alerted", "***" );
            l_U1756 = 7;
            ENABLE_WALLA_ZONE( "S_NYC_WZ_ALLEY_GET_READY", 1 );
             /* P_ACTIVATEPEDARRAY */ sub_47089( ref l_U826 );
             /* TASK_PARKING_LOT_REINFORCEMENTS */ sub_47165();
        }
        else
        {
             /* WRITE_INT */ sub_24397( l_U769 );
        }
        for ( I = 0; I <= 1; I++ )
        {
            if (l_U1870[I] == 0)
            {
                if ( /* IS_PED_VALID */ sub_16533( l_U668[I] ))
                {
                    if (I == 0)
                    {
                        bVar4 = ((IS_PED_RAGDOLL( l_U668[I], 0 )) == 1) || ((ISEQ_QUERY_ENTITY_STATE( -1988558453, "VIG_06_NYBAR_GMED", 3 )) == 0);
                    }
                    else
                    {
                        bVar4 = ((IS_PED_RAGDOLL( l_U668[I], 0 )) == 1) || ((ISEQ_QUERY_ENTITY_STATE( -1988558453, "VIG_06_NYBAR_GMED1", 3 )) == 0);
                    }
                    if (bVar4 == 1)
                    {
                         /* WRITESCRIPTLOG */ sub_1129( "TEH", "P_NYBAR_PARKING_LOT_VIGNETTE: Guy finished", "***" );
                        l_U1870[I] = 1;
                        l_U769++;
                         /* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_45688( ref l_U668[I], 0 );
                        SET_PED_SUGGESTED_COVER_POINT( l_U668[1], "GenCover", "47E254B1_D6D5F28C_Popover1" );
                    }
                }
                else
                {
                    l_U1870[I] = 1;
                    l_U769++;
                }
            }
        }
        for ( I = 0; I <= (l_U698 - 1); I++ )
        {
            if (l_U1873[I] == 0)
            {
                if ( /* IS_PED_VALID */ sub_16533( l_U698[I] ))
                {
                    if (I == 0)
                    {
                        bVar4 = ((IS_PED_RAGDOLL( l_U698[I], 0 )) == 1) || ((ISEQ_QUERY_ENTITY_STATE( -1988558453, "VIG_06_NYBAR_GMED2", 3 )) == 0);
                    }
                    else
                    {
                        bVar4 = ((IS_PED_RAGDOLL( l_U698[I], 0 )) == 1) || ((ISEQ_QUERY_ENTITY_STATE( -1988558453, "VIG_06_NYBAR_GMED3", 3 )) == 0);
                    }
                    if (bVar4 == 1)
                    {
                         /* WRITESCRIPTLOG */ sub_1129( "TEH", "P_NYBAR_PARKING_LOT_VIGNETTE: Guy finished", "***" );
                        l_U1873[I] = 1;
                        l_U769++;
                         /* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_45688( ref l_U698[I], 0 );
                        SET_PED_SUGGESTED_COVER_POINT( l_U698[1], "GenCover", "47E254B1_401E7D77_Popover1" );
                    }
                }
                else
                {
                    l_U1873[I] = 1;
                    l_U769++;
                }
            }
        }
        if (l_U1876 == 0)
        {
            if ( /* IS_PED_VALID */ sub_16533( l_U715[0] ))
            {
                if (((IS_PED_RAGDOLL( l_U715[0], 0 )) == 1) || ((ISEQ_QUERY_ENTITY_STATE( -1988558453, "VIG_06_NYBAR_GMED4", 3 )) == 0))
                {
                     /* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_45688( ref l_U715[0], 0 );
                    l_U1876 = 1;
                    l_U769++;
                }
            }
            else
            {
                l_U1876 = 1;
                l_U769++;
            }
        }
        break;
    }
    return;
}

/* P_DIAL_PARKING_THUG_SPOTS_MAX */ void sub_40355()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_DIAL_PARKING_THUG_SPOTS_MAX", 0 );
    if ((NOT (IS_PED_DEAD( l_U715[0] ))) AND (NOT (IS_PED_DEAD( l_U698[0] ))))
    {
         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_40483( ref l_U1557 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_40606( 1, l_U715[0], "M4_NY_15_Mus", ref l_U1557, 2, 0 );
         /* PLAY_SINGLE_SPEECH */ sub_40852( "SNYC_VIG06B", ref l_U1557, 8, 1 );
    }
    return;
}

/* RESET_SCRIPT_SPEECH_STRUCT */ void sub_40483(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

/* ADD_PED_FOR_SCRIPT_SPEECH */ void sub_40606(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

/* PLAY_SINGLE_SPEECH */ void sub_40852(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return  /* PLAY_SINGLE_SPEECH_FROM_BLOCK */ sub_40897( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

/* PLAY_SINGLE_SPEECH_FROM_BLOCK */ void sub_40897(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return  /* PLAYSPEECHMAIN */ sub_40984( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

/* PLAYSPEECHMAIN */ int sub_40984(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT ( /* CANTHISSPEECHBEPLAYED */ sub_41036( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
     /* COPYHIDDENSPEECHSTUCT */ sub_41554( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

/* CANTHISSPEECHBEPLAYED */ int sub_41036(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

/* COPYHIDDENSPEECHSTUCT */ void sub_41554(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

/* PED_SET_REGISTER_TARGET_PLAYER */ void sub_41846(unknown uParam0)
{
    if (( /* IS_MAX_VALID */ sub_30409()) AND ( /* IS_PED_VALID */ sub_16533( (uParam0^) )))
    {
         /* PED_SET_REGISTER_TARGET */ sub_20913( uParam0,  /* PLAYER_PED_ID */ sub_7106() );
    }
    return;
}

/* HAS_THUG_SPOTTED_PLAYER */ int sub_42208(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    float fVar7;

    fVar7 = 12.00000000;
    if (( /* IS_MAX_VALID */ sub_30409()) AND ( /* IS_PED_VALID */ sub_16533( (uParam0^) )))
    {
        uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( (uParam0^) )};
        HAS_SHOT_BEEN_FIRED_IN_AREA( uVar4, fVar7, 0, ref iVar3 );
        if ((iVar3 == ( /* PLAYER_PED_ID */ sub_7106())) || (HAS_PED_BEEN_DAMAGED_BY_PED( (uParam0^),  /* PLAYER_PED_ID */ sub_7106(), 0 )))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "HAS_THUG_SPOTTED_PLAYER: The player's has damaged the AI", " " );
            return 1;
        }
        if ((IS_CONTROL_PRESSED( 0, 6 )) AND (l_U1758 >= 3))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "HAS_THUG_SPOTTED_PLAYER: Enemy saw player pop up", " " );
            return 1;
        }
        if (GET_PED_AWARENESS_STATE( (uParam0^),  /* PLAYER_PED_ID */ sub_7106(), 8 ))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "HAS_THUG_SPOTTED_PLAYER: Bullet flew by the ped", " " );
            return 1;
        }
        if (HAS_BULLET_IMPACTED_IN_AREA( uVar4, fVar7, ref iVar3 ))
        {
            if (iVar3 == ( /* PLAYER_PED_ID */ sub_7106()))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "HAS_THUG_SPOTTED_PLAYER: The player's bullet has impacted close to the AI", " " );
                return 1;
            }
        }
        if (( /* F_ISPEDINTRIGGERBOXFIRSTTIME */ sub_42929( ref l_U1032, l_U715[0], 0 )) || ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_42719( ref l_U1032, 0 )))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "HAS_THUG_SPOTTED_PLAYER: Player or thug entered trigger", 0 );
            return 1;
        }
        if (NOT (IS_PED_USING_MP3_COVER_TASK(  /* PLAYER_PED_ID */ sub_7106() )))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "HAS_THUG_SPOTTED_PLAYER: Player no longer in cover", 0 );
            return 1;
        }
    }
    return 0;
}

/* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ void sub_42719(int iParam0, unknown uParam1)
{
    if (iParam0->_fU64 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU64 =  /* F_ISPEDINTRIGGERBOX */ sub_42795(  /* PLAYER_PED_ID */ sub_7106(), (iParam0^) );
        if ((iParam0->_fU64) AND (uParam1))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU64;
}

/* F_ISPEDINTRIGGERBOX */ int sub_42795(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, ref uParam1._fU0 );
    }
    return 0;
}

/* F_ISPEDINTRIGGERBOXFIRSTTIME */ void sub_42929(int iParam0, unknown uParam1, unknown uParam2)
{
    if (iParam0->_fU68 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU68 =  /* F_ISPEDINTRIGGERBOX */ sub_42795( uParam1, (iParam0^) );
        if ((iParam0->_fU68) AND (uParam2))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU68;
}

/* IS_SPEECH_CURRENTLY_PLAYING */ int sub_43567(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    if (NOT ( /* IS_SCRIPT_SPEECH_STRUCT_VALID */ sub_43610( uParam0 )))
    {
        return 0;
    }
    if ((g_U11[uParam0._fU4] == 2) || ((g_U11[uParam0._fU4] == 1) || (IS_SCRIPTED_CONVERSATION_ONGOING( uParam0._fU4 ))))
    {
        if (uParam0._fU8 == g_U6[uParam0._fU4])
        {
            return 1;
        }
    }
    return 0;
}

/* IS_SCRIPT_SPEECH_STRUCT_VALID */ boolean sub_43610(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    int iVar12;

    if (uParam0._fU4 < 0)
    {
        return 0;
    }
    iVar12 = GET_CHECK_HASH_FROM_CONVERSATION_ID( uParam0._fU4 );
    return (uParam0._fU16 == iVar12) AND (iVar12 != 0);
}

/* KILL_SPEECH */ void sub_43861(int iParam0, unknown uParam1)
{
    if (NOT ( /* IS_SCRIPT_SPEECH_STRUCT_VALID */ sub_43610( (iParam0^) )))
    {
        ;
    }
    else
    {
        PRINTSTRING( "\n KILL SPEECH CALLED***************************************" );
        if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
        {
            if (iParam0->_fU8 == g_U6[iParam0->_fU4])
            {
                STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, uParam1, 0 );
            }
        }
    }
    return;
}

/* TELPORT_PEDS_VIG_06 */ void sub_44172()
{
     /* TELEPORTPED */ sub_20673( l_U668[0], -19.15000000, -321.40000000, -0.66000000, -9.54500000 );
     /* TELEPORTPED */ sub_20673( l_U668[1], -20.61000000, -321.65000000, -0.66000000, -54.54500000 );
     /* TELEPORTPED */ sub_20673( l_U698[0], -20.53000000, -318.67000000, -0.66000000, -148.43000000 );
     /* TELEPORTPED */ sub_20673( l_U698[1], -19.65000000, -318.42000000, -0.66000000, -99.54500000 );
     /* TELEPORTPED */ sub_20673( l_U715[0], -19.65771000, -316.54370000, -0.66237900, 266.61710000 );
    CLEAR_PED_TASKS_IMMEDIATELY( l_U668[0] );
    CLEAR_PED_TASKS_IMMEDIATELY( l_U668[1] );
    CLEAR_PED_TASKS_IMMEDIATELY( l_U698[0] );
    CLEAR_PED_TASKS_IMMEDIATELY( l_U698[1] );
    CLEAR_PED_TASKS_IMMEDIATELY( l_U715[0] );
    return;
}

/* SETUP_PASSOS_FOR_PARKING_LOT */ void sub_44471()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "SETUP_PASSOS_FOR_PARKING_LOT", "***" );
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "SETUP_PASSOS_FOR_PARKING_LOT: Creating Passos", "***" );
    if (NOT ( /* IS_PED_VALID */ sub_16533( g_U750 )))
    {
         /* CLEANPED */ sub_15654( g_U750 );
        g_U750 =  /* CREATEPED */ sub_15819( ref l_U998 );
        if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
        {
             /* F_GIVEPEDWEAPON */ sub_9648( g_U750, -862236369, 25000, 0, 0 );
             /* P_SETUP_PASSOS_GENERAL_ATTRIBUTES */ sub_44705( ref g_U750 );
        }
    }
    return;
}

/* P_SETUP_PASSOS_GENERAL_ATTRIBUTES */ void sub_44705(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_SETUP_PASSOS_GENERAL_ATTRIBUTES", "***" );
    if ( /* IS_PED_VALID */ sub_16533( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), 1 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^), 1 );
        SET_PED_VALIDATE_BULLET_CAM_HIT( (uParam0^), 0 );
        SET_AI_SHOULD_ALWAYS_MISS_PED( (uParam0^), 1 );
        SET_CAN_AI_KICK_THROUGH_CORPSES( (uParam0^), 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_AI_TEMPLATE( (uParam0^), "AIT_NORMAL" );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( (uParam0^), 1 );
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^), 1 );
        SET_PED_GORE( (uParam0^), 0 );
        SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( (uParam0^), 0 );
        SET_PED_PROOFS( (uParam0^), 0, 1, 1, 1, 1 );
        SET_PED_ALLOWED_TO_SURRENDER( (uParam0^), 0 );
        SET_PED_CAN_AVOID_DEATH_ZONES( (uParam0^), 0 );
        SET_PED_STAND_GROUND_ON_PLAYER_IMPACT( (uParam0^), 1 );
        SET_PED_CAN_PUSH_PLAYER( (uParam0^), 1 );
        SET_PED_RESIST_TO_OBJECT_COLLISION( (uParam0^), 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_CAN_BE_TARGETTED( (uParam0^), 0 );
        SET_PED_CONSUMING_AMMO( (uParam0^), 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^), 1 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^), 1 );
    }
    return;
}

/* P_DIAL_PARKING_THUG_VIG */ void sub_45151()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_DIAL_PARKING_THUG_VIG", 0 );
    if ((NOT (IS_PED_DEAD( l_U715[0] ))) AND ((NOT (IS_PED_DEAD( l_U698[1] ))) AND (NOT (IS_PED_DEAD( l_U698[0] )))))
    {
         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_40483( ref l_U1547 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_40606( 0, l_U668[0], "M4_NY_14_Avg", ref l_U1547, 2, 0 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_40606( 1, l_U715[0], "M4_NY_15_Mus", ref l_U1547, 2, 0 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_40606( 2, l_U698[1], "M4_NY_16_Avg", ref l_U1547, 2, 0 );
         /* PLAY_SINGLE_SPEECH */ sub_40852( "SNYC_VIG06A", ref l_U1547, 7, 1 );
    }
    return;
}

/* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ void sub_45688(unknown uParam0, unknown uParam1)
{
    if ( /* IS_PED_VALID */ sub_16533( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), uParam1 );
    }
    return;
}

/* P_ACTIVATEPEDARRAY */ void sub_47089(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
         /* P_ACTIVATEPED */ sub_19383( (uParam0^)[I] );
    }
    return;
}

/* TASK_PARKING_LOT_REINFORCEMENTS */ void sub_47165()
{
     /* WRITESCRIPTLOG */ sub_1129( "bsw", "TASK_PARKING_LOT_REINFORCEMENTS sending in parking lot reinforcements", 0 );
     /* P_SET_PARKING_ENEMY_ARRAY_TETHERS */ sub_19547( ref l_U826 );
     /* PED_ARRAY_TASK_COMBAT_PLAYER */ sub_47306( ref l_U826 );
    return;
}

/* PED_ARRAY_TASK_COMBAT_PLAYER */ void sub_47306(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* PED_TASK_COMBAT_PLAYER */ sub_47371( (uParam0^)[I], 1 );
    }
    return;
}

/* PED_TASK_COMBAT_PLAYER */ void sub_47371(unknown uParam0, boolean bParam1)
{
    if ((NOT (IS_PED_RAGDOLL( uParam0, 0 ))) AND ((NOT (IS_PED_INJURED( uParam0 ))) AND (( /* IS_MAX_VALID */ sub_30409()) AND ( /* IS_PED_VALID */ sub_16533( uParam0 )))))
    {
        if (bParam1)
        {
            CLEAR_PED_TASKS_IMMEDIATELY( uParam0 );
        }
        CLEAR_LOCKED_TARGET( uParam0 );
         /* PED_SET_REGISTER_TARGET_PLAYER */ sub_41846( ref uParam0 );
         /* PED_SET_LOCKED_ON_PLAYER */ sub_47479( ref uParam0 );
        TASK_COMBAT_PED( uParam0,  /* PLAYER_PED_ID */ sub_7106() );
    }
    return;
}

/* PED_SET_LOCKED_ON_PLAYER */ void sub_47479(unknown uParam0)
{
    if (( /* IS_MAX_VALID */ sub_30409()) AND ( /* IS_PED_VALID */ sub_16533( (uParam0^) )))
    {
         /* PED_SET_LOCKED_ON_PED */ sub_47542( uParam0,  /* PLAYER_PED_ID */ sub_7106() );
    }
    return;
}

/* PED_SET_LOCKED_ON_PED */ void sub_47542(unknown uParam0, unknown uParam1)
{
    if (( /* IS_PED_VALID */ sub_16533( uParam1 )) AND ( /* IS_PED_VALID */ sub_16533( (uParam0^) )))
    {
        SET_LOCKED_TARGET( (uParam0^), uParam1 );
    }
    return;
}

/* HANDLE_MID00_BLENDOUT */ void sub_48605()
{
    int Result;
    unknown uVar3;
    unknown uVar4;

    Result = 0;
    switch (l_U1755)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "HANDLE_MID00_BLENDOUT: Starting Blendout", "***" );
         /* NIS_PRE_SETUP */ sub_22735( 1, 0, 0, 1 );
        if ((ISEQ_QUERY_STATE( 984969677, 3 )) == 0)
        {
             /* REGISTER_PEDS_NYC_MID_00_BLENDOUT */ sub_48767();
            CAMERA_PLAY_ANIMATED( "LEVEL_S_NYBAR_CP_02", "BLEND_OUT_MID_00_NYBAR_RIFLE_CAM", 0, -13.01500000, -318.12700000, 0.04400000, 0.00000000, 0, 0 );
             /* TELEPORTPED */ sub_20673( g_U750, g_U2436, g_U2439 );
            ISEQ_START( 984969677 );
        }
        if ( /* IS_MAX_VALID */ sub_30409())
        {
            SNAP_PLAYER_TO_COVERPOINT(  /* PLAYER_ID */ sub_7144(), "GenCover", "47E254B1_B2027730_Popover1", 0 );
        }
        if (IS_DEATH_PANEL_WIPE_ALLOWED())
        {
            if (NOT ( /* F_IMAGEFX_FADE_IN */ sub_22922()))
            {
                DO_SCREEN_FADE_IN( 250 );
            }
        }
        l_U1755 = 2;
        break;
        case 2:
        DISPLAYF( "Cam time: {}", 1, 513, CAMERA_ANIMATED_CURRENT_TIME() );
        if ((CAMERA_ANIMATED_CURRENT_TIME() + 1) >= (CAMERA_ANIMATED_LENGTH( "LEVEL_S_NYBAR_CP_02", "BLEND_OUT_MID_00_NYBAR_RIFLE_CAM" )))
        {
             /* WRITESCRIPTLOG */ sub_1129( "BSW", "Blendout cam finished, freezing cam", 0 );
            SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U2253[4]._fU16, 1065353216, 0 );
            SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U2253[4]._fU20, 1065353216, 0 );
            CAMERA_FREEZE_FRAME( 1, 500, 0, 0 );
            l_U460 = 4;
            l_U1755 = 9;
        }
        break;
        case 9:
         /* WRITESCRIPTLOG */ sub_1129( "SP", "eBlend0401State = BLEND_IDLE", 0 );
        Result = 1;
         /* NIS_POST_SETUP */ sub_22402( 1, 1 );
        l_U1755 = 10;
        break;
    }
    return Result;
}

/* REGISTER_PEDS_NYC_MID_00_BLENDOUT */ void sub_48767()
{
    if ( /* IS_MAX_VALID */ sub_30409())
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "Registering player with NYC_MID_00", "***" );
        if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
        {
            ISEQ_REGISTER_ENTITY( 984969677, "passos", g_U750, 0 );
        }
        if ( /* IS_PED_VALID */ sub_16533(  /* PLAYER_PED_ID */ sub_7106() ))
        {
            ISEQ_REGISTER_ENTITY( 984969677, "max",  /* PLAYER_PED_ID */ sub_7106(), 0 );
        }
    }
    return;
}

/* P_SAVE_PLAYER_DATA_CHECKPOINT */ void sub_49723(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

     /* WRITESCRIPTLOG */ sub_1129( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
         /* WRITESCRIPTLOG */ sub_1129( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
         /* START_NEW_LEVEL_CONTEXT */ sub_10422( iParam1 );
         /* CLOSE_OLD_LEVEL_CONTEXT */ sub_50014( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_50491( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_50491( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_50751( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_50491( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_50751( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_50751( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_50491( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_50751( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_50751( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_50751( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_50491( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_50751( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_50751( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_50751( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_50751( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
             /* P_PRINT_CHECKPOINT_DATA */ sub_52331( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U1, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
     /* WRITESCRIPTLOG */ sub_1129( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

/* CLOSE_OLD_LEVEL_CONTEXT */ void sub_50014(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_7481( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
         /* WRITESCRIPTLOG */ sub_1129( "TEH", "Ending context", 0 );
         /* WRITESCRIPTLOG */ sub_1129( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

/* P_SAVE_WEAPON_ATTACHMENTS */ void sub_50491(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

/* F_WEAPONS_SAME_AMMO */ void sub_50751(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

/* P_PRINT_CHECKPOINT_DATA */ void sub_52331(int iParam0)
{
     /* WRITE_STRING */ sub_1437( "CHECKPOINT DATA" );
    PRINTSTRING( "---Position: " );
     /* WRITE_VECTOR */ sub_52419( iParam0->_fU4 );
    PRINTSTRING( "---Heading: " );
     /* WRITE_FLOAT */ sub_52496( iParam0->_fU16 );
    PRINTSTRING( "---fRelativeGameCamHeading: " );
     /* WRITE_FLOAT */ sub_52496( iParam0->_fU20 );
    PRINTSTRING( "---fRelativeGameCamPitch: " );
     /* WRITE_FLOAT */ sub_52496( iParam0->_fU24 );
    PRINTSTRING( "---nHealth: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU28 );
    PRINTSTRING( "---wtRightHolster: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU56 );
    PRINTSTRING( "---wtLeftHolster: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU60 );
    PRINTSTRING( "---wtRifleHolster: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU64 );
    PRINTSTRING( "---wtRightHand: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU68 );
    PRINTSTRING( "---wtLeftHand: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU72 );
    PRINTSTRING( "---nWeaponRightHolsterAmmo: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU76 );
    PRINTSTRING( "---nWeaponLeftHolsterAmmo: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU80 );
    PRINTSTRING( "---nWeaponRifleHolsterAmmo: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU84 );
    PRINTSTRING( "---nWeaponRightHandAmmo: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU88 );
    PRINTSTRING( "---nWeaponLeftHandAmmo: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU92 );
    PRINTSTRING( "---fAdrenaline: " );
     /* WRITE_FLOAT */ sub_52496( iParam0->_fU32 );
    PRINTSTRING( "---nPayneKillers: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU36 );
    PRINTSTRING( "---nHour: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU40 );
    PRINTSTRING( "---nMinute: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU44 );
    PRINTSTRING( "---fSweatAmount: " );
     /* WRITE_FLOAT */ sub_52496( iParam0->_fU136 );
    PRINTSTRING( "---bTimeFrozen: " );
     /* WRITE_BOOL */ sub_53325( iParam0->_fU140 );
    PRINTSTRING( "---checkpointIndex: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU52 );
     /* WRITE_STRING */ sub_1437( "---nRightHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU96 );
     /* WRITE_STRING */ sub_1437( "---nRightHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU100 );
     /* WRITE_STRING */ sub_1437( "---nLeftHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU104 );
     /* WRITE_STRING */ sub_1437( "---nLeftHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU108 );
     /* WRITE_STRING */ sub_1437( "---nRifleHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU112 );
     /* WRITE_STRING */ sub_1437( "---nRifleHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU116 );
     /* WRITE_STRING */ sub_1437( "---nRightHandAttachmentEnabled: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU120 );
     /* WRITE_STRING */ sub_1437( "---nRightHandAttachmentToggled: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU124 );
     /* WRITE_STRING */ sub_1437( "---nLeftHandAttachmentEnabled: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU128 );
     /* WRITE_STRING */ sub_1437( "---nLeftHandAttachmentToggled: " );
     /* WRITE_INT */ sub_24397( iParam0->_fU132 );
    PRINTSTRING( "[CHECKPOINT DATA SIZE]: " );
     /* WRITE_INT */ sub_24397( l_U1 );
    PRINTSTRING( "[CHECKPOINT DATA REF SIZE]: " );
     /* WRITE_INT */ sub_24397( 144 );
    return;
}

/* WRITE_VECTOR */ void sub_52419(unknown uParam0, unknown uParam1, unknown uParam2)
{
    PRINTVECTOR( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_FLOAT */ void sub_52496(unknown uParam0)
{
    PRINTFLOAT( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_BOOL */ void sub_53325(boolean bParam0)
{
    if (bParam0)
    {
        PRINTSTRING( "TRUE" );
    }
    else
    {
        PRINTSTRING( "FALSE" );
    }
    PRINTNL();
    return;
}

/* P_HANDLE_PASSOS_PARKING_VIGS */ void sub_54285()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    switch (l_U1749)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_PASSOS_PARKING_VIGS: Starting VIG07", "***" );
         /* TELEPORTPED */ sub_20673( g_U750, g_U2436, g_U2439 );
         /* LOADISEQ */ sub_20055( 320396699, 1 );
         /* CREATETIMER */ sub_6630( ref l_U1430, 8000, 1, 0 );
         /* CREATETIMER */ sub_6630( ref l_U1439, 8000, 1, 0 );
         /* CREATETIMER */ sub_6630( ref l_U1448, 1000, 1, 0 );
         /* CREATETIMER */ sub_6630( ref l_U1637, 1500, 1, 0 );
         /* CREATETIMER */ sub_6630( ref l_U1646, 4000, 1, 0 );
        l_U1749 = 3;
        break;
        case 3:
        if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
        {
            if (l_U1391 == 1)
            {
                l_U1391 = 0;
                 /* RESETTIMER */ sub_6455( ref l_U1646 );
                 /* PLAY_VIG_07B */ sub_54589();
                l_U1749 = 8;
                 /* MAL_FINISHACTINT */ sub_56421( ref g_U750, 47 );
                 /* MAL_FINISHACTINT */ sub_56421( ref g_U750, 57 );
            }
            else if ((l_U1383 == 0) AND (l_U1390 == 1))
            {
                 /* STARTTIMER */ sub_33286( ref l_U1637 );
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "VIG_07 - Passos start shooting", "***" );
                PED_SET_ACTION_INTENTION( g_U750, 47, 1000, 0, 0, 0 );
                l_U1383 = 1;
            }
            if (l_U1383 == 1)
            {
                if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_56624()))
                {
                    if ( /* ISTIMERDONE */ sub_34082( ref l_U1637 ))
                    {
                         /* STARTTIMER */ sub_33286( ref l_U1646 );
                    }
                }
                 /* P_HANDLE_PASSOS_INCIDENTAL_SHOOT_VO */ sub_56747();
                if (( /* FIND_TARGET_IN_PARKING_LOT */ sub_57106()) == 1)
                {
                    if (l_U568 < 2)
                    {
                        if ( /* ISTIMERDONE */ sub_34082( ref l_U1430 ))
                        {
                            l_U1377 = 1;
                        }
                    }
                    PED_SET_ACTION_INTENTION( g_U750, 55, 1000, 0, 0, 0 );
                    if (PED_ANIM_EVENT( g_U750, -1531652494 ))
                    {
                         /* WRITESCRIPTLOG */ sub_1129( "SBA", "VIG_07 - Weapon fired", "***" );
                        if (l_U1377 == 1)
                        {
                             /* WRITESCRIPTLOG */ sub_1129( "SBA", "VIG_07 - Passos KILLING TARGET", "***" );
                             /* PED_KILL_HEADSOUP */ sub_58397( l_U1761 );
                            SCRIPT_VAR_SET_INT( "SP_SV_PASSOS_KILLS", 1 );
                            l_U568++;
                            if (l_U568 < 2)
                            {
                                 /* RESETTIMER */ sub_6455( ref l_U1430 );
                                 /* STARTTIMER */ sub_33286( ref l_U1430 );
                            }
                            l_U1377 = 0;
                        }
                        PED_FINISH_ACTION_INTENTION( g_U750, 55 );
                    }
                }
            }
        }
        break;
        case 8:
         /* PLAY_VIG_07B */ sub_54589();
        if (l_U1750 == -1)
        {
             /* INIT_HANDLE_PASSOS_WAITING_SPEECH */ sub_58622();
            l_U1749 = 9;
        }
        break;
        case 9:
        if ( /* F_ISPEDINTRIGGERBOXFIRSTTIME */ sub_42929( ref l_U1243, g_U750, 0 ))
        {
             /* MAKE_CARS_NOT_BLOWUP */ sub_55215( 0 );
        }
        if ( /* ISTIMERDONE */ sub_34082( ref l_U1655 ))
        {
             /* P_DIAL_PASSOS_STAND */ sub_58819();
             /* CREATETIMER */ sub_6630( ref l_U1646, 1000, 1, 0 );
             /* STARTTIMER */ sub_33286( ref l_U1646 );
        }
         /* P_HANDLE_PASSOS_INTERRUPTIONS */ sub_59061( g_U750, ref l_U1877, ref l_U1879, ref l_U1878, ref l_U1889, ref l_U1880 );
        break;
    }
    return;
}

/* PLAY_VIG_07B */ void sub_54589()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    switch (l_U1750)
    {
        case 0:
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )))
        {
            if (NOT (IS_PED_RAGDOLL(  /* PLAYER_PED_ID */ sub_7106(), 0 )))
            {
                if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
                {
                    PED_FINISH_ACTION_INTENTION( g_U750, 55 );
                }
                if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
                {
                     /* WRITESCRIPTLOG */ sub_1129( "SBA", "PLAY_VIG_07B: No bullet cam: Going to eISS_WAITING_TO_PLAY", "***" );
                    l_U1750 = 1;
                }
                else
                {
                     /* UNREGISTER_PEDS_BLENDOUT_MID_00 */ sub_36454();
                     /* WRITESCRIPTLOG */ sub_1129( "SBA", "PLAY_VIG_07B: Going to eISS_LAST_GUY_DEATH_CAM", "***" );
                    l_U1750 = 6;
                }
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "PLAY_VIG_07B: Waiting for player to be out of ragdoll", "***" );
            }
        }
        break;
        case 1:
        if (( /* IS_PED_VALID */ sub_16533( g_U750 )) AND ( /* IS_MAX_VALID */ sub_30409()))
        {
            if (( /* GET_DISTANCE_BETWEEN_PEDS */ sub_55020(  /* PLAYER_PED_ID */ sub_7106(), g_U750, 1 )) > 3.00000000)
            {
                if (NOT (IS_PED_ON_SCREEN( g_U750, 0 )))
                {
                     /* UNREGISTER_PEDS_BLENDOUT_MID_00 */ sub_36454();
                     /* MAKE_CARS_NOT_BLOWUP */ sub_55215( 1 );
                     /* WRITESCRIPTLOG */ sub_1129( "SBA", "PLAY_VIG_07B: Playing VIG_07B *FULL*", "***" );
                     /* START_PASSOS_MOVING_OUT_OF_STAIRS_COVER */ sub_55498( g_U2440, g_U2443, 0 );
                     /* CREATETIMER */ sub_6630( ref l_U1655, 750, 1, 0 );
                     /* STARTTIMER */ sub_33286( ref l_U1655 );
                     /* WRITESCRIPTLOG */ sub_1129( "SBA", "PLAY_VIG_07B: Going to eISS_INACTIVE", "***" );
                    l_U1750 = -1;
                }
                else
                {
                     /* WRITESCRIPTLOG */ sub_1129( "SBA", "PLAY_VIG_07B: Waiting for Passos to be off screen", "***" );
                }
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "PLAY_VIG_07B: Waiting for Player to be away from Passos", "***" );
            }
        }
        break;
        case 6:
        if (NOT IS_BULLET_CAMERA_ACTIVE())
        {
            if ( /* IS_MAX_VALID */ sub_30409())
            {
                if ((NOT (IS_PED_USING_MP3_COVER_TASK(  /* PLAYER_PED_ID */ sub_7106() ))) AND (IS_PED_AT_COORD(  /* PLAYER_PED_ID */ sub_7106(), g_U2444, 1.00000000, 1.00000000, 2.00000000, 0, 1 )))
                {
                     /* WRITESCRIPTLOG */ sub_1129( "SBA", "PLAY_VIG_07B: Moving Max out of the way", "***" );
                     /* TELEPORTPED */ sub_20673(  /* PLAYER_PED_ID */ sub_7106(), g_U2444._fU0, g_U2444._fU4 + 1.30000000, g_U2444._fU8, 90 );
                }
            }
             /* MAKE_CARS_NOT_BLOWUP */ sub_55215( 1 );
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "PLAY_VIG_07B: Playing VIG_07B *SHORT*", "***" );
             /* START_PASSOS_MOVING_OUT_OF_STAIRS_COVER */ sub_55498( g_U2444._fU0, g_U2444._fU4 + 0.65000000, g_U2444._fU8, g_U2447, 1 );
             /* CREATETIMER */ sub_6630( ref l_U1655, 750, 1, 0 );
             /* STARTTIMER */ sub_33286( ref l_U1655 );
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "PLAY_VIG_07B: Going to eISS_INACTIVE", "***" );
            l_U1750 = -1;
        }
        break;
        case -1:
         /* WRITE_VECTOR */ sub_52419( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( g_U750 ) );
        break;
    }
    return;
}

/* GET_DISTANCE_BETWEEN_PEDS */ void sub_55020(unknown uParam0, unknown uParam1, boolean bParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;

    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        uVar5 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
    }
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        uVar8 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    }
    if (bParam2)
    {
        return VDIST( uVar5, uVar8 );
        break;
    }
    return VDIST( uVar5._fU0, uVar5._fU4, 0, uVar8._fU0, uVar8._fU4, 0 );
}

/* MAKE_CARS_NOT_BLOWUP */ void sub_55215(boolean bParam0)
{
    int I;

     /* WRITESCRIPTLOG */ sub_1129( "TEH", "MAKE_CARS_NOT_BLOWUP", "***" );
     /* WRITE_BOOL */ sub_53325( bParam0 );
    for ( I = 0; I <= 2; I++ )
    {
        if ( /* IS_VEHICLE_VALID */ sub_14464( l_U782[I] ))
        {
            SET_VEHICLE_PROOFS( l_U782[I], 0, bParam0, bParam0, 0, 0 );
            SET_VEHICLE_ENGINE_CAN_BE_DAMAGED( l_U782[I], NOT bParam0 );
            if (bParam0)
            {
                STOP_VEHICLE_FIRE( l_U782[I] );
                SET_VEHICLE_PETROL_TANK_HEALTH( l_U782[I], 1000 );
            }
        }
    }
    return;
}

/* START_PASSOS_MOVING_OUT_OF_STAIRS_COVER */ void sub_55498(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, boolean bParam4)
{
     /* WRITESCRIPTLOG */ sub_1129( "bsw", "START_PASSOS_MOVING_OUT_OF_STAIRS_COVER", 0 );
     /* TELEPORTPED */ sub_20673( g_U750, uParam0, uParam3 );
    WAIT( 1 );
    if (NOT (IS_PED_DEAD( g_U750 )))
    {
        if (bParam4)
        {
            PED_SET_ACTION_INTENTION( g_U750, 54, -1, 0, 0, 0 );
        }
        else
        {
            PED_SET_ACTION_INTENTION( g_U750, 56, -1, 0, 0, 0 );
        }
        SET_PED_SYNC_POINT( g_U750, uParam0, uParam3 );
    }
    ISEQ_REGISTER_ENTITY( 320396699, "passos", g_U750, 0 );
    ISEQ_START( 320396699 );
    return;
}

/* MAL_FINISHACTINT */ void sub_56421(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        PED_FINISH_ACTION_INTENTION( (uParam0^), uParam1 );
    }
    return;
}

/* IS_ANY_SPEECH_CURRENTLY_PLAYING */ void sub_56624()
{
    int Result;
    int I;

    Result = 0;
    for ( I = 0; I <= 3; I++ )
    {
        Result = (IS_SCRIPTED_CONVERSATION_ONGOING( I )) || (Result);
    }
    return Result;
}

/* P_HANDLE_PASSOS_INCIDENTAL_SHOOT_VO */ void sub_56747()
{
    if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_56624()))
    {
        if ( /* ISTIMERDONE */ sub_34082( ref l_U1646 ))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_PASSOS_INCIDENTAL_SHOOT_VO", "***" );
             /* P_PLAY_DIAL_PASSOS */ sub_56891( "SNYC_PSDC", ref l_U1577 );
             /* CREATETIMER */ sub_6630( ref l_U1646, GET_RANDOM_INT_IN_RANGE( 15000, 18000 ), 1, 0 );
             /* STARTTIMER */ sub_33286( ref l_U1646 );
        }
    }
    return;
}

/* P_PLAY_DIAL_PASSOS */ void sub_56891(unknown uParam0, unknown uParam1)
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_PLAY_DIAL_PASSOS", "***" );
    if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )))
        {
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_40483( uParam1 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_40606( 1, g_U750, "PASSOS", uParam1, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_40606( 0,  /* PLAYER_PED_ID */ sub_7106(), "MAX", uParam1, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_40852( uParam0, uParam1, 8, 1 );
        }
    }
    return;
}

/* FIND_TARGET_IN_PARKING_LOT */ int sub_57106()
{
    int I;

    l_U1760 = 0;
    if (l_U1399 == 1)
    {
        return 0;
    }
    if ( /* IS_PED_VALID */ sub_16533( l_U668[0] ))
    {
        if ( /* F_ISPEDINVARIANTBOX */ sub_57198( l_U668[0], l_U1158 ))
        {
            l_U1760 = 1;
            if (l_U1760 != l_U1759)
            {
                 /* P_REGISTER_TARGET_FOR_PASSOS */ sub_57311( g_U750, l_U668[0] );
                l_U1761 = l_U668[0];
                l_U567 = GET_PED_HEALTH( l_U1761 );
                l_U1759 = 1;
            }
            return 1;
        }
    }
    if ( /* IS_PED_VALID */ sub_16533( l_U668[1] ))
    {
        if ( /* F_ISPEDINVARIANTBOX */ sub_57198( l_U668[1], l_U1158 ))
        {
            l_U1760 = 2;
            if (l_U1760 != l_U1759)
            {
                 /* P_REGISTER_TARGET_FOR_PASSOS */ sub_57311( g_U750, l_U668[1] );
                l_U1761 = l_U668[1];
                l_U567 = GET_PED_HEALTH( l_U1761 );
                l_U1759 = l_U1760;
            }
            return 1;
        }
    }
    if ( /* IS_PED_VALID */ sub_16533( l_U698[0] ))
    {
        if ( /* F_ISPEDINVARIANTBOX */ sub_57198( l_U698[0], l_U1158 ))
        {
            l_U1760 = 3;
            if (l_U1760 != l_U1759)
            {
                 /* P_REGISTER_TARGET_FOR_PASSOS */ sub_57311( g_U750, l_U698[0] );
                l_U1761 = l_U698[0];
                l_U567 = GET_PED_HEALTH( l_U1761 );
                l_U1759 = l_U1760;
            }
            return 1;
        }
    }
    if ( /* IS_PED_VALID */ sub_16533( l_U698[1] ))
    {
        if ( /* F_ISPEDINVARIANTBOX */ sub_57198( l_U698[1], l_U1158 ))
        {
            l_U1760 = 4;
            if (l_U1760 != l_U1759)
            {
                 /* P_REGISTER_TARGET_FOR_PASSOS */ sub_57311( g_U750, l_U698[1] );
                l_U1761 = l_U698[1];
                l_U567 = GET_PED_HEALTH( l_U1761 );
                l_U1759 = l_U1760;
            }
            return 1;
        }
    }
    if ( /* IS_PED_VALID */ sub_16533( l_U715[0] ))
    {
        if ( /* F_ISPEDINVARIANTBOX */ sub_57198( l_U715[0], l_U1158 ))
        {
            l_U1760 = 5;
            if (l_U1760 != l_U1759)
            {
                 /* P_REGISTER_TARGET_FOR_PASSOS */ sub_57311( g_U750, l_U715[0] );
                l_U1761 = l_U715[0];
                l_U567 = GET_PED_HEALTH( l_U1761 );
                l_U1759 = l_U1760;
            }
            return 1;
        }
    }
    for ( I = 0; I <= 2; I++ )
    {
        if ( /* IS_PED_VALID */ sub_16533( l_U826[I] ))
        {
            if ( /* F_ISPEDINVARIANTBOX */ sub_57198( l_U826[I], l_U1158 ))
            {
                l_U1760 = 6 + I;
                if (l_U1760 != l_U1759)
                {
                     /* P_REGISTER_TARGET_FOR_PASSOS */ sub_57311( g_U750, l_U826[I] );
                    l_U1761 = l_U826[I];
                    l_U567 = GET_PED_HEALTH( l_U1761 );
                    l_U1759 = l_U1760;
                }
                return 1;
            }
        }
    }
    return 0;
}

/* F_ISPEDINVARIANTBOX */ int sub_57198(unknown uParam0, unknown uParam1)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, uParam1._fU0 );
    }
    return 0;
}

/* P_REGISTER_TARGET_FOR_PASSOS */ void sub_57311(unknown uParam0, unknown uParam1)
{
    if ( /* IS_PED_VALID */ sub_16533( uParam0 ))
    {
        if ( /* IS_PED_VALID */ sub_16533( uParam1 ))
        {
             /* P_UNREGISTER_TARGET_FOR_PASSOS */ sub_57378( uParam0 );
            REGISTER_TARGET( uParam0, uParam1 );
            SET_LOCKED_TARGET( uParam0, uParam1 );
            SET_PED_DEFAULT_AIM_AT_PED( uParam0, uParam1 );
        }
    }
    return;
}

/* P_UNREGISTER_TARGET_FOR_PASSOS */ void sub_57378(unknown uParam0)
{
    if ( /* IS_PED_VALID */ sub_16533( uParam0 ))
    {
        CLEAR_LOCKED_TARGET( uParam0 );
        CLEAR_PED_DEFAULT_AIM( uParam0 );
    }
    return;
}

/* PED_KILL_HEADSOUP */ void sub_58397(unknown uParam0)
{
    if ( /* IS_PED_VALID */ sub_16533( uParam0 ))
    {
        START_PARTICLE_FX_NON_LOOPED_ON_PED_BONE( "Blood_headsoup_S_01", uParam0, 0.25000000, 0, 0, 0, 0, 0, 57704, 2 );
         /* P_KILL_PED */ sub_20444( uParam0 );
    }
    return;
}

/* INIT_HANDLE_PASSOS_WAITING_SPEECH */ void sub_58622()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "INIT_HANDLE_PASSOS_WAITING_SPEECH: Setting ePWS_State = ePWS_SetupState", 0 );
    l_U117 = 1;
    return;
}

/* P_DIAL_PASSOS_STAND */ void sub_58819()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_DIAL_PASSOS_STAND", "***" );
    if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )))
        {
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_40483( ref l_U1587 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_40606( 0, g_U750, "PASSOS", ref l_U1587, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_40606( 1,  /* PLAYER_PED_ID */ sub_7106(), "MAX", ref l_U1587, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_40852( "SNYC_ATGD", ref l_U1587, 8, 1 );
        }
    }
    return;
}

/* P_HANDLE_PASSOS_INTERRUPTIONS */ void sub_59061(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
     /* MAL_HANDLEPASSOSINTERRUPTIONSWITHDIALOGUE */ sub_59187( uParam0, uParam1, uParam2, uParam3, uParam4, uParam5, 59115, 1077936128, 1069547520, 1065353216 );
    return;
}

/* MAL_DUMMYPASSOSINTERRUPTDIALOGUECALL */ void sub_59115(unknown uParam0)
{
    return;
}

/* MAL_HANDLEPASSOSINTERRUPTIONSWITHDIALOGUE */ void sub_59187(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, int iParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    unknown uVar12;

    if (( /* MAL_GETACTINTSTATUS */ sub_59244( uParam0, 29 )) == 3)
    {
        uVar12 = nil;
        if ((( /* MAL_HASPLAYERFIRED */ sub_59431( 1 )) AND (IS_PED_IN_CROSSHAIR_CYLINDER( uParam0, 2, 10000, 0, -1082130432 ))) || (HAS_BULLET_IMPACTED_IN_AREA(  /* MAL_GETPEDCOORDS */ sub_59328( uParam0 ), 3, ref uVar12 )))
        {
             /* MAL_WRITESCRIPTLOG */ sub_59545( "PLAYER SHOT AT PASSOS" );
             /* MAL_SETACTINWITHFOCUSPOS */ sub_59720( ref uParam0,  /* MAL_GETPEDCOORDS */ sub_59328(  /* PLAYER_PED_ID */ sub_7106() ), 34, 1000 );
            SET_PED_PRIMARY_LOOKAT( uParam0,  /* PLAYER_PED_ID */ sub_7106() );
            (uParam1^) = 1;
            break;
            uParam6;
            0;
            break;
        }
        if (NOT (uParam2^))
        {
            if ((( /* MAL_GETACTINTSTATUS */ sub_59244( uParam0, 32 )) != 3) AND ((( /* MAL_GETACTINTSTATUS */ sub_59244( uParam0, 33 )) != 3) AND (IS_PED_TOUCHING_PED(  /* PLAYER_PED_ID */ sub_7106(), uParam0 ))))
            {
                 /* MAL_WRITESCRIPTLOG */ sub_59545( "BAD TOUCH!!" );
                (uParam2^) = 1;
                (uParam1^) = 1;
                 /* MAL_SETACTINWITHFOCUSPOS */ sub_59720( ref uParam0,  /* MAL_GETPEDCOORDS */ sub_59328(  /* PLAYER_PED_ID */ sub_7106() ), 35, 1000 );
                SET_PED_PRIMARY_LOOKAT( uParam0,  /* PLAYER_PED_ID */ sub_7106() );
                break;
                uParam6;
                1;
                break;
            }
        }
        else if (NOT (IS_PED_TOUCHING_PED(  /* PLAYER_PED_ID */ sub_7106(), uParam0 )))
        {
            (uParam2^) = 0;
        }
        if (NOT (uParam3^))
        {
            if ( /* MAL_CHECKANGLEANDDISTANCEBETWEENPEDANDPLAYER */ sub_59993( ref uParam0, 300, 100, -1, 0, 0 ))
            {
                if ((IS_CONTROL_PRESSED( 0, 6 )) AND (IS_PED_IN_CROSSHAIR_CYLINDER( uParam0, 1, 10000, 0, -1082130432 )))
                {
                    (uParam1^) = 1;
                    (uParam3^) = 1;
                     /* MAL_SETACTINWITHFOCUSPOS */ sub_59720( ref uParam0,  /* MAL_GETPEDCOORDS */ sub_59328(  /* PLAYER_PED_ID */ sub_7106() ), 32, 1000 );
                    SET_PED_PRIMARY_LOOKAT( uParam0,  /* PLAYER_PED_ID */ sub_7106() );
                     /* MAL_WRITESCRIPTLOG */ sub_59545( "PLAYER AIMING AT PASSOS" );
                    break;
                    uParam6;
                    2;
                    break;
                }
            }
        }
        else if ((NOT (IS_CONTROL_PRESSED( 0, 6 ))) || (NOT (IS_PED_IN_CROSSHAIR_CYLINDER( uParam0, 1.50000000, 10000, 0, -1082130432 ))))
        {
            if (( /* MAL_GETACTINTSTATUS */ sub_59244( uParam0, 32 )) != 3)
            {
                (uParam3^) = 0;
                 /* MAL_WRITESCRIPTLOG */ sub_59545( "PLAYER NO LONGER AIMING AT PASSOS" );
            }
        }
        if (NOT (uParam1^))
        {
            if (( /* MAL_CHECKANGLEANDDISTANCEBETWEENPEDANDPLAYER */ sub_59993( ref uParam0, uParam9, 180, -1, 46, 0 )) || (( /* MAL_CHECKANGLEANDDISTANCEBETWEENPEDANDPLAYER */ sub_59993( ref uParam0, uParam8, 45, -1, 31, 0 )) || ( /* MAL_CHECKANGLEANDDISTANCEBETWEENPEDANDPLAYER */ sub_59993( ref uParam0, uParam7, 30, -1, 0, 0 ))))
            {
                 /* MAL_WRITESCRIPTLOG */ sub_59545( "INTERRUPTING PASSOS" );
                 /* MAL_SETACTINWITHFOCUSPOS */ sub_59720( ref uParam0,  /* MAL_GETPEDCOORDS */ sub_59328(  /* PLAYER_PED_ID */ sub_7106() ), 33, 1000 );
                SET_PED_PRIMARY_LOOKAT( uParam0,  /* PLAYER_PED_ID */ sub_7106() );
                (uParam1^) = 1;
            }
        }
        else if (( /* MAL_CHECKANGLEANDDISTANCEBETWEENPEDANDPLAYER */ sub_59993( ref uParam0, -1, 180, uParam8 + 1, 91, 0 )) || ( /* MAL_CHECKANGLEANDDISTANCEBETWEENPEDANDPLAYER */ sub_59993( ref uParam0, -1, 90, uParam7 + 1, 0, 0 )))
        {
            if ((NOT (uParam2^)) AND (NOT (uParam3^)))
            {
                if (( /* MAL_ISACTINTCOMPLETED */ sub_60886( ref uParam0, 35, 1 )) || (( /* MAL_ISACTINTCOMPLETED */ sub_60886( ref uParam0, 32, 1 )) || (( /* MAL_ISACTINTCOMPLETED */ sub_60886( ref uParam0, 34, 1 )) || ( /* MAL_ISACTINTCOMPLETED */ sub_60886( ref uParam0, 33, 1 )))))
                {
                     /* MAL_FINISHACTINT */ sub_56421( ref uParam0, 33 );
                     /* MAL_FINISHACTINT */ sub_56421( ref uParam0, 34 );
                     /* MAL_FINISHACTINT */ sub_56421( ref uParam0, 32 );
                     /* MAL_FINISHACTINT */ sub_56421( ref uParam0, 35 );
                     /* MAL_FINISHACTINT */ sub_56421( ref uParam0, 31 );
                     /* MAL_SETACTINT */ sub_61055( uParam0, 36, 1000 );
                    CLEAR_PED_PRIMARY_LOOKAT( uParam0 );
                    (uParam1^) = 0;
                    (uParam3^) = 0;
                    (uParam2^) = 0;
                    (uParam4^) = 0;
                     /* CREATETIMER */ sub_6630( iParam5,  /* F_GETRANDOMINTINRANGE */ sub_61156( 10000, 15000 ), 1, 0 );
                    return;
                }
            }
        }
        if (( /* MAL_GETACTINTSTATUS */ sub_59244( uParam0, 30 )) == 3)
        {
            if ( /* ISTIMERDONE */ sub_34082( iParam5 ))
            {
                 /* MAL_SETACTINWITHFOCUSPOS */ sub_59720( ref uParam0,  /* MAL_GETPEDCOORDS */ sub_59328(  /* PLAYER_PED_ID */ sub_7106() ), 31, 1000 );
                (uParam4^)++;
                break;
                uParam6;
                3;
                break;
            }
            else if ((uParam4^) < 3)
            {
                if ((iParam5->_fU16) || (NOT ( /* HASTIMERBEENACTIVATED */ sub_34832( iParam5 ))))
                {
                     /* CREATETIMER */ sub_6630( iParam5,  /* F_GETRANDOMINTINRANGE */ sub_61156( 10000, 15000 ), 1, 0 );
                     /* STARTTIMER */ sub_33286( iParam5 );
                }
            }
        }
    }
     /* MAL_ISACTINTCOMPLETED */ sub_60886( ref uParam0, 31, 1 );
     /* MAL_ISACTINTCOMPLETED */ sub_60886( ref uParam0, 36, 1 );
    return;
}

/* MAL_GETACTINTSTATUS */ int sub_59244(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        return PED_GET_ACTION_INTENTION_STATUS( uParam0, uParam1 );
    }
    return 0;
}

/* MAL_GETPEDCOORDS */ vector sub_59328(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        return "[dynamic result, ret vals = 3]";
        break;
        GET_PED_COORDS( uParam0 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        break;
    }
    return vector( 0, 0, 0);
}

/* MAL_HASPLAYERFIRED */ int sub_59431(unknown uParam0)
{
    int iVar3;

    iVar3 = nil;
    if (HAS_SHOT_BEEN_FIRED_IN_AREA(  /* MAL_GETPEDCOORDS */ sub_59328(  /* PLAYER_PED_ID */ sub_7106() ), 2.00000000, uParam0, ref iVar3 ))
    {
        if (iVar3 == ( /* PLAYER_PED_ID */ sub_7106()))
        {
             /* MAL_WRITESCRIPTLOG */ sub_59545( "MAL_HasPlayerFired RETURNING TRUE" );
            return 1;
        }
    }
    return 0;
}

/* MAL_WRITESCRIPTLOG */ void sub_59545(unknown uParam0)
{
    unknown uVar3;

    uVar3 = GET_REAL_GAME_TIMER();
    DISPLAYF( "[{0}][{1}]{3} {2} {3}", 4, 513, uVar3, 1537, "MSWW", 1537, uParam0, 1537, "###" );
    return;
}

/* MAL_SETACTINWITHFOCUSPOS */ void sub_59720(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        PED_SET_ACTION_INTENTION( (uParam0^), uParam4, uParam5, uParam1 );
    }
    return;
}

/* MAL_CHECKANGLEANDDISTANCEBETWEENPEDANDPLAYER */ int sub_59993(unknown uParam0, float fParam1, unknown uParam2, float fParam3, float fParam4, boolean bParam5)
{
    float fVar8;

    if ((NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() ))) AND (NOT (IS_PED_DEAD( (uParam0^) ))))
    {
        fVar8 =  /* GET_DISTANCE_BETWEEN_PEDS */ sub_55020( (uParam0^),  /* PLAYER_PED_ID */ sub_7106(), 0 );
        if ((fVar8 > fParam1) AND (fParam1 > -1))
        {
            return 0;
        }
        else if ((fVar8 < fParam3) AND (fParam3 > -1))
        {
            return 0;
        }
        else if (NOT (IS_PED_FACING_PED( (uParam0^),  /* PLAYER_PED_ID */ sub_7106(), uParam2 )))
        {
            return 0;
        }
        else if ((IS_PED_FACING_PED( (uParam0^),  /* PLAYER_PED_ID */ sub_7106(), fParam4 )) AND (fParam4 > 0))
        {
            return 0;
        }
        else if (bParam5)
        {
            PRINTSTRING( "MAL_CheckAngleAndDistanceBetweenPedAndPlayer: Actual Distance: " );
            PRINTFLOAT( fVar8 );
            PRINTSTRING( " MAX DISTANCE: " );
            PRINTFLOAT( fParam1 );
            PRINTSTRING( " MIN DISTANCE: " );
            PRINTFLOAT( fParam3 );
            PRINTSTRING( " MAX ANGLE: " );
            PRINTFLOAT( uParam2 );
            PRINTSTRING( " MIN ANGLE: " );
             /* WRITE_FLOAT */ sub_52496( fParam4 );
        }
        return 1;;;;;
    }
    return 0;
}

/* MAL_ISACTINTCOMPLETED */ int sub_60886(unknown uParam0, unknown uParam1, boolean bParam2)
{
    if (( /* MAL_GETACTINTSTATUS */ sub_59244( (uParam0^), uParam1 )) == 1)
    {
        if (bParam2)
        {
             /* MAL_FINISHACTINT */ sub_56421( uParam0, uParam1 );
        }
        return 1;
    }
    return 0;
}

/* MAL_SETACTINT */ void sub_61055(unknown uParam0, unknown uParam1, unknown uParam2)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        PED_SET_ACTION_INTENTION( uParam0, uParam1, uParam2, l_U390 );
    }
    return;
}

/* F_GETRANDOMINTINRANGE */ void sub_61156(unknown uParam0, int iParam1)
{
    int Result;

    Result = GET_RANDOM_INT_IN_RANGE( uParam0, iParam1 + 1 );
    if (Result > iParam1)
    {
        Result = iParam1;
    }
    return Result;
}

/* KILLMEMBERSNOTINTRIGGER */ void sub_61513(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    int Result;
    int I;
    int iVar26;

    Result = 0;
    I = 0;
    iVar26 = (uParam0^);
    for ( I = 0; I < iVar26; I++ )
    {
        if ( /* KILLPEDNOTINTRIGGER */ sub_61589( ref (uParam0^)[I], uParam1 ))
        {
            Result = 1;
        }
    }
    return Result;
}

/* KILLPEDNOTINTRIGGER */ int sub_61589(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((DOES_PED_EXIST( (uParam0^) )) == 1)
    {
        if ((IS_PED_DEAD( (uParam0^) )) == 0)
        {
            if ((IS_PED_IN_GAMEPLAY_HELPER_BOX( (uParam0^), ref uParam1._fU0 )) == 0)
            {
                 /* P_KILL_PED */ sub_20444( (uParam0^) );
                return 1;
            }
        }
    }
    return 0;
}

/* F_HANDLE_PASSOS_WARNING_DEATH_WITH_TIMER */ int sub_61964(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21, boolean bParam22)
{
    switch (l_U97)
    {
        case 0: break;
        case 1:
         /* CREATETIMER */ sub_6630( ref l_U98, uParam21, 0, 0 );
        l_U97 = 2;
        case 2:
        if (bParam22)
        {
            if ( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( uParam0 ))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "F_HANDLE_PASSOS_WARNING_DEATH_WITH_TIMER: Player entered Passos warning box, passos in danger", "***" );
                 /* STARTTIMER */ sub_33286( ref l_U98 );
                 /* P_DIAL_PASSOS_WARNING */ sub_62288();
                l_U97 = 3;
            }
        }
        else if (NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( uParam0 )))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "F_HANDLE_PASSOS_WARNING_DEATH_WITH_TIMER: Player exited Passos warning box, passos in danger", "***" );
             /* STARTTIMER */ sub_33286( ref l_U98 );
             /* P_DIAL_PASSOS_WARNING */ sub_62288();
            l_U97 = 3;
        }
        break;
        case 3:
        if ( /* ISTIMERDONE */ sub_34082( ref l_U98 ))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "F_HANDLE_PASSOS_WARNING_DEATH_WITH_TIMER: Passos death timer has expired (as will passos)", "***" );
            l_U97 = 4;
        }
        else if ((( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( uParam0 )) AND (NOT bParam22)) || ((NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( uParam0 ))) AND (bParam22)))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "F_HANDLE_PASSOS_WARNING_DEATH_WITH_TIMER: Player returned from warning box, Passos out of danger", "***" );
             /* RESETTIMER */ sub_6455( ref l_U98 );
            l_U97 = 2;
        }
        break;
        case 4:
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "F_HANDLE_PASSOS_WARNING_DEATH_WITH_TIMER: returning TRUE - going to ePWDS_Idle", "***" );
        l_U97 = 0;
        return 1;
        break;
    }
    return 0;
}

/* F_ISPLAYERINTRIGGERBOX */ void sub_62105(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20)
{
    return  /* F_ISPEDINTRIGGERBOX */ sub_42795(  /* PLAYER_PED_ID */ sub_7106(), uParam0 );
}

/* P_DIAL_PASSOS_WARNING */ void sub_62288()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_DIAL_PASSOS_WARNING", "***" );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )))
    {
         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_40483( ref l_U46 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_40606( 1,  /* PLAYER_PED_ID */ sub_7106(), "PASSOS", ref l_U46, 2, 0 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_40606( 0,  /* PLAYER_PED_ID */ sub_7106(), "MAX", ref l_U46, 2, 0 );
         /* PLAY_SINGLE_SPEECH */ sub_40852( "SNYC_HBPH", ref l_U46, 8, 1 );
    }
    return;
}

/* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ void sub_63166(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result++;
        }
    }
    return Result;
}

/* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ void sub_63331(unknown uParam0)
{
    int I;

    if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_63166( uParam0 )) == 1)
    {
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
            {
                if (NOT (GET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I] )))
                {
                    SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I], 1 );
                    return (uParam0^)[I];
                }
            }
        }
    }
    return nil;
}

/* HANDLE_PASSOS_WAITING_SPEECH */ void sub_63899(int iParam0, unknown uParam1)
{
    switch (l_U117)
    {
        case 0: break;
        case 1:
         /* CREATETIMER */ sub_6630( ref l_U149, iParam0 + (GET_RANDOM_INT_IN_RANGE( -uParam1, uParam1 )), 1, 0 );
         /* STARTTIMER */ sub_33286( ref l_U149 );
        l_U158 = 0;
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: Going to ePWS_ChooseSpeechState", 0 );
        l_U117 = 2;
        break;
        case 2:
        if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_56624()))
        {
            if ( /* ISTIMERDONE */ sub_34082( ref l_U149 ))
            {
                l_U118 = l_U158;
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: Going to ePWS_PlaySpeechState", 0 );
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: iPassosSpeechLevel = ", 0 );
                 /* WRITE_INT */ sub_24397( l_U158 );
                l_U117 = 3;
            }
        }
        break;
        case 3:
        switch (l_U118)
        {
            case 0:
             /* P_PLAY_DIAL_PASSOS */ sub_56891( "SNYC_PSDS", ref l_U129 );
            break;
            case 1:
             /* P_PLAY_DIAL_PASSOS */ sub_56891( "SNYC_CMMF", ref l_U119 );
            break;
            case 2:
             /* P_PLAY_DIAL_PASSOS */ sub_56891( "SNYC_TMFL", ref l_U139 );
            break;
        }
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: Going to ePWS_ResetState", 0 );
        l_U117 = 4;
        break;
        case 4:
         /* CREATETIMER */ sub_6630( ref l_U149, iParam0 + (GET_RANDOM_INT_IN_RANGE( -uParam1, uParam1 )), 1, 0 );
         /* STARTTIMER */ sub_33286( ref l_U149 );
        l_U158++;
        if (l_U158 > 2)
        {
            l_U158 = 0;
        }
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: Returning to ePWS_ChooseSpeechState", 0 );
        l_U117 = 2;
        break;
    }
    return;
}

/* IS_WEAPON_TWO_HANDED */ int sub_64827(unknown uParam0)
{
    int iVar3;

    if ((GET_DOES_WEAPON_EXIST( uParam0 )) == 1)
    {
        iVar3 = GET_WEAPON_TYPE( uParam0 );
        if ((iVar3 == -2075384407) || ((iVar3 == 10648147) || ((iVar3 == 1224272620) || ((iVar3 == 1478009203) || ((iVar3 == 1964270085) || ((iVar3 == -110877124) || ((iVar3 == 427207702) || ((iVar3 == 319712764) || ((iVar3 == 514118749) || ((iVar3 == -184942895) || ((iVar3 == -168327769) || ((iVar3 == 434544317) || ((iVar3 == -1659006841) || ((iVar3 == 930042831) || ((iVar3 == 1001413062) || ((iVar3 == 377623895) || ((iVar3 == -1312131151) || ((iVar3 == -1787162676) || ((iVar3 == 724901397) || ((iVar3 == 57534114) || ((iVar3 == 840671040) || ((iVar3 == 1308526797) || ((iVar3 == -1074756423) || ((iVar3 == 1992962408) || (iVar3 == -1013714740)))))))))))))))))))))))))
        {
            return 1;
        }
    }
    return 0;
}

/* P_EQUIP_PLAYER_WITH_SINGLE_HANDED_WEAPON */ void sub_65137(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )) == 0)
    {
        iVar3 = 0;
        uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_7106(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar4 )) == 0)
        {
            iVar3 = 1;
        }
        if ((( /* IS_WEAPON_SINGLE_HANDED */ sub_65260( uVar4 )) == 0) AND ((GET_DOES_WEAPON_EXIST( uVar4 )) == 1))
        {
            iVar3 = 1;
        }
        if (iVar3 == 1)
        {
            uVar5 =  /* F_GET_SINGLE_HANDED_WEAPON_FROM_PLAYER */ sub_65495();
            if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
            {
                SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_7106(), uVar5, 0, uParam0 );
            }
        }
    }
    return;
}

/* IS_WEAPON_SINGLE_HANDED */ int sub_65260(unknown uParam0)
{
    int iVar3;

    if ((GET_DOES_WEAPON_EXIST( uParam0 )) == 1)
    {
        iVar3 = GET_WEAPON_TYPE( uParam0 );
        if ((iVar3 == 1194438308) || ((iVar3 == -76667461) || ((iVar3 == -1404433099) || ((iVar3 == 1131969637) || ((iVar3 == -691403429) || ((iVar3 == 1845102363) || ((iVar3 == 150541352) || ((iVar3 == -820634585) || ((iVar3 == -612753081) || ((iVar3 == 811797242) || ((iVar3 == 68019059) || ((iVar3 == -1464892298) || ((iVar3 == 456708483) || ((iVar3 == -862236369) || (iVar3 == 406496141)))))))))))))))
        {
            return 1;
        }
    }
    return 0;
}

/* F_GET_SINGLE_HANDED_WEAPON_FROM_PLAYER */ int sub_65495()
{
    unknown Result;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )) == 0)
    {
        Result = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_7106(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( Result )) == 1)
        {
            if (( /* IS_WEAPON_SINGLE_HANDED */ sub_65260( Result )) == 1)
            {
                return Result;
            }
        }
        uVar3 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_7106(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            return uVar3;
        }
        uVar4 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_7106(), 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar4 )) == 1)
        {
            return uVar4;
        }
        uVar5 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_7106(), 1 );
        if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
        {
            return uVar5;
        }
    }
    return 0;
}

/* UPDATE_FORCEWALK_AND_TRIGGER_PAIR */ int sub_65790(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21, unknown uParam22, unknown uParam23, unknown uParam24, unknown uParam25, unknown uParam26, unknown uParam27, unknown uParam28, unknown uParam29, unknown uParam30, unknown uParam31, unknown uParam32, unknown uParam33, unknown uParam34, unknown uParam35, unknown uParam36, unknown uParam37, unknown uParam38, unknown uParam39, unknown uParam40, unknown uParam41, boolean bParam42)
{
    if ( /* IS_MAX_VALID */ sub_30409())
    {
        if ((NOT (GET_IS_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_7106() ))) AND ( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( uParam0 )))
        {
             /* WRITESCRIPTLOG */ sub_1129( "RJM", "UPDATE_FORCEWALK_AND_TRIGGER_PAIR - Force walk enabled", 0 );
            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_7106(), 1 );
        }
        else if ((GET_IS_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_7106() )) AND (NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( uParam0 ))))
        {
             /* WRITESCRIPTLOG */ sub_1129( "RJM", "UPDATE_FORCEWALK_AND_TRIGGER_PAIR - Force walk disabled", 0 );
            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_7106(), 0 );
        }
    }
    if ( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( uParam21 ))
    {
        if (bParam42)
        {
            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_7106(), 0 );
        }
        return 1;
    }
    return 0;
}

/* LOADSEAMLESSCUTSCENE */ void sub_66161(unknown uParam0, int iParam1)
{
    if (HAS_CUTSCENE_LOADED())
    {
        if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
        {
            SCRIPT_ASSERT( "Another cutscene is already loaded.  You can only load one cutscene into memory.  Your current cutscene will not load into memory.", 0 );
        }
    }
    if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
    {
        PRE_STREAM_SEAMLESS_CUTSCENE( uParam0 );
        if (iParam1 == 1)
        {
            while ((CUTSCENE_IS_LOADED( uParam0 )) == 0)
            {
                DISPLAYF( "[SP]### Waiting for seamless cutscene to load: {} ###", 1, 1537, uParam0 );
                WAIT( 0 );
            }
        }
    }
    return;
}

/* KILL_HANDLE_PASSOS_WAITING_SPEECH */ void sub_66747(unknown uParam0)
{
     /* KILL_SPEECH */ sub_43861( ref l_U119, uParam0 );
     /* KILL_SPEECH */ sub_43861( ref l_U129, uParam0 );
     /* KILL_SPEECH */ sub_43861( ref l_U139, uParam0 );
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "KILL_HANDLE_PASSOS_WAITING_SPEECH: Setting ePWS_State = ePWS_IdleState", 0 );
    l_U117 = 0;
    return;
}

/* P_SPEECH_PLAY_MAX_MONOLOGUE */ void sub_67121(unknown uParam0, unknown uParam1)
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_SPEECH_PLAY_MAX_MONOLOGUE", "***" );
    if ( /* IS_MAX_VALID */ sub_30409())
    {
         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_40483( uParam1 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_40606( 0,  /* PLAYER_PED_ID */ sub_7106(), "MAX", uParam1, 2, 0 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_40606( 1,  /* PLAYER_PED_ID */ sub_7106(), "MAX", uParam1, 2, 0 );
         /* PLAY_SINGLE_SPEECH */ sub_40852( uParam0, uParam1, 8, 1 );
    }
    return;
}

/* PLAY_NYC_MID_01 */ void sub_67302(boolean bParam0, unknown uParam1, unknown uParam2, boolean bParam3)
{
    int I;
    int Result;
    unknown uVar8;

    Result = 0;
    switch (l_U499)
    {
        case 4:
         /* LOADSEAMLESSCUTSCENE */ sub_66161( ref l_U473, 1 );
         /* LOADISEQ */ sub_20055( -850158086, 1 );
         /* LOADANIMDICT */ sub_2096( "LEVEL_S_NYBAR_MID_01_BLENDOUT", 0, 1 );
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "PLAY_NYC_MID_01 start", "*****" );
         /* NIS_PRE_SETUP */ sub_22735( 1, 0, 0, 1 );
        if (NOT bParam0)
        {
             /* BLOCKLOAD_NYC_MID_01_ASSETS */ sub_67481();
             /* P_SETUP_NYC_MID_01 */ sub_68301();
            l_U459 = 11;
        }
        else
        {
            CUTSCENE_SET_COVER_CAMERA_DIRECTION( g_U2448, g_U2449 );
        }
        if ( /* IS_PED_VALID */ sub_16533(  /* PLAYER_PED_ID */ sub_7106() ))
        {
             /* P_PLAYER_HOLSTER_WEAPONS */ sub_68862( ref l_U481, 0, 1 );
             /* P_SET_TWO_HANDED_WEAPON_VISIBLE */ sub_69719( l_U481, 0 );
             /* P_EQUIP_PLAYER_WITH_SINGLE_HANDED_WEAPON */ sub_65137( 1 );
            uVar8 =  /* F_GET_SINGLE_HANDED_WEAPON_FROM_PLAYER */ sub_65495();
        }
         /* REGISTER_PEDS_NYC_MID_01 */ sub_69873( bParam0, uParam1, uParam2, ref uVar8 );
        if (bParam3)
        {
            START_CUTSCENE_CAPTURE( ref l_U473 );
        }
        CUTSCENE_ENABLE_SKIP( 0 );
        START_SEAMLESS_CUTSCENE();
        l_U566 = 0;
        l_U565 = 0;
        l_U499 = 6;
        break;
        case 6:
        if (HAS_CUTSCENE_FINISHED())
        {
            if (bParam3)
            {
                STOP_CUTSCENE_CAPTURE();
            }
            if (GET_DOES_WEAPON_EXIST(  /* F_GET_TWO_HANDED_WEAPON_FROM_PLAYER */ sub_71319() ))
            {
                 /* P_SET_TWO_HANDED_WEAPON_VISIBLE */ sub_69719( l_U481, 1 );
            }
            else
            {
                 /* P_PLAYER_UNHOLSTER_WEAPONS */ sub_71518( l_U481, 1 );
            }
            for ( I = 0; I <= ((uParam1^) - 1); I++ )
            {
                if ( /* IS_PED_VALID */ sub_16533( (uParam1^)[I] ))
                {
                    SET_PED_CURRENT_WEAPON_VISIBLE( (uParam1^)[I], 1 );
                }
            }
            if (NOT bParam0)
            {
                 /* CLEAN_UP_MID01_ASSETS */ sub_71786();
                 /* UNLOAD_NYC_MID_01_ASSETS */ sub_71898();
            }
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "PLAY_NYC_MID_01 end", "*****" );
            Result = 1;
            l_U499 = 0;
        }
        else if ((NOT l_U566) AND (l_U459 == 11))
        {
            if (GET_CUTSCENE_TIME_MS() >= 2700)
            {
                 /* WRITESCRIPTLOG */ sub_1129( "BSW", "playing music: mid_01 setting newMusicStage = MC_CUTSCENE_CARSKID", 0 );
                l_U460 = 11;
                CUTSCENE_ENABLE_SKIP( 1 );
                l_U566 = 1;
            }
        }
        if ((NOT l_U565) AND (l_U459 == 12))
        {
            if (GET_CUTSCENE_TIME_MS() >= 17000)
            {
                 /* WRITESCRIPTLOG */ sub_1129( "BSW", "playing music: mid_01 setting newMusicStage = MC_CUTSCENE_SETTING_UP_FOR_FALL_LINE", 0 );
                l_U460 = 12;
                l_U565 = 1;
            }
        }
        break;
    }
    return Result;
}

/* BLOCKLOAD_NYC_MID_01_ASSETS */ void sub_67481()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "BLOCKLOAD_NYC_MID_01_ASSETS", "***" );
     /* BLOCKLOADMODEL */ sub_67573( 2024698471 );
     /* BLOCKLOADMODEL */ sub_67573( g_U2250 );
     /* BLOCKLOADMODEL */ sub_67573( 557810561 );
     /* BLOCKLOADWEAPON */ sub_68000( -862236369 );
    return;
}

/* BLOCKLOADMODEL */ void sub_67573(unknown uParam0)
{
    DISPLAYF( "[MSWW]### Trying to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
         /* WRITE_STRING */ sub_1437( "[SP]### ERROR! (BlockLoadModel) Trying to block load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    LOAD_ALL_OBJECTS_NOW();
    while ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        LOAD_ALL_OBJECTS_NOW();
        DISPLAYF( "[SP]### Waiting to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
        WAIT( 0 );
    }
    DISPLAYF( "[MSWW]### Has loaded model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
    return;
}

/* BLOCKLOADWEAPON */ void sub_68000(unknown uParam0)
{
    DISPLAYF( "[MSWW]### Trying to load weapon: {!f1} : {1} ###", 2, 1, 199730165, 513, uParam0 );
    REQUEST_WEAPON( uParam0 );
    LOAD_ALL_OBJECTS_NOW();
    while ((HAS_WEAPON_LOADED( uParam0 )) == 0)
    {
        LOAD_ALL_OBJECTS_NOW();
        DISPLAYF( "[SP]### Waiting to load weapon: {!f1} : {1} ###", 2, 1, 199730165, 513, uParam0 );
        WAIT( 0 );
    }
    DISPLAYF( "[MSWW]### Has loaded weapon: {!f1} : {1} ###", 2, 1, 199730165, 513, uParam0 );
    return;
}

/* P_SETUP_NYC_MID_01 */ void sub_68301()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_SETUP_NYC_MID_01", "***" );
    if ( /* IS_MAX_VALID */ sub_30409())
    {
         /* F_GIVEPEDWEAPON */ sub_9648(  /* PLAYER_PED_ID */ sub_7106(), -862236369, 200, 0, 1 );
    }
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U501, 0, 0, 0, 0.00000000, -1756913695, 26, 6, 0, 0, 0 );
     /* CLEANPED */ sub_15654( l_U500 );
    l_U500 =  /* CREATEPED */ sub_15819( ref l_U501 );
     /* F_GIVEPEDWEAPON */ sub_9648( l_U500, -862236369, 200, 0, 1 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U518[0], -96.16000000, -322.94000000, 0.26000000, -84.31000000, -1633679208, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U518[1], -95.19000000, -323.17000000, 0.26000000, -84.31000000, 1143414953, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U518[2], -93.24000000, -323.63000000, 0.26000000, -74.31000000, 2108318266, 7, 3, 2, 0, 0 );
    for ( I = 0; I <= 2; I++ )
    {
         /* CLEANPED */ sub_15654( l_U514[I] );
        l_U514[I] =  /* CREATEPED */ sub_15819( ref l_U518[I] );
         /* PREP_PED_FOR_NYC_MID_01 */ sub_68668( l_U514[I] );
    }
     /* CLEANVEHICLE */ sub_24567( l_U558 );
    l_U558 =  /* CREATEVEHICLE */ sub_14039( 557810561, -108.86600000, -316.92500000, 2.40000000, 0.00000000, 0, 0, 0 );
    return;
}

/* PREP_PED_FOR_NYC_MID_01 */ void sub_68668(unknown uParam0)
{
    if ( /* IS_PED_VALID */ sub_16533( uParam0 ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( uParam0, 1 );
        SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( uParam0, 0 );
    }
    return;
}

/* P_PLAYER_HOLSTER_WEAPONS */ void sub_68862(int iParam0, int iParam1, unknown uParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;

     /* RESET_WEAPON_CONFIG */ sub_68901( iParam0 );
    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )) == 0)
    {
        uVar5 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_7106(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
        {
            if (( /* IS_WEAPON_SINGLE_HANDED */ sub_65260( uVar5 )) == 1)
            {
                ref iParam0->_fU0->_fU0 = uVar5;
                ref iParam0->_fU0->_fU4 = GET_WEAPON_TYPE( uVar5 );
            }
            else if (( /* IS_WEAPON_TWO_HANDED */ sub_64827( uVar5 )) == 1)
            {
                ref iParam0->_fU24->_fU0 = uVar5;
                ref iParam0->_fU24->_fU4 = GET_WEAPON_TYPE( uVar5 );
            }
        }
        uVar6 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_7106(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar6 )) == 1)
        {
            ref iParam0->_fU12->_fU0 = uVar6;
            ref iParam0->_fU12->_fU4 = GET_WEAPON_TYPE( uVar6 );
        }
        uVar7 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_7106(), 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
        {
            ref iParam0->_fU36->_fU0 = uVar7;
            ref iParam0->_fU36->_fU4 = GET_WEAPON_TYPE( uVar7 );
        }
        uVar8 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_7106(), 1 );
        if ((GET_DOES_WEAPON_EXIST( uVar8 )) == 1)
        {
            ref iParam0->_fU48->_fU0 = uVar8;
            ref iParam0->_fU48->_fU4 = GET_WEAPON_TYPE( uVar8 );
        }
        uVar9 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_7106(), 2 );
        if ((GET_DOES_WEAPON_EXIST( uVar9 )) == 1)
        {
            ref iParam0->_fU60->_fU0 = uVar9;
            ref iParam0->_fU60->_fU4 = GET_WEAPON_TYPE( uVar9 );
        }
    }
    if (iParam1 == 0)
    {
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )) == 0)
        {
            uVar10 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_7106(), 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar10 )) == 1)
            {
                SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_7106(), 0, 0, uParam2 );
            }
            uVar11 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_7106(), 1, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar11 )) == 1)
            {
                SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_7106(), 0, 1, uParam2 );
            }
        }
    }
    else if (iParam1 == 1)
    {
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )) == 0)
        {
            uVar12 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_7106(), 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar12 )) == 1)
            {
                if (( /* IS_WEAPON_TWO_HANDED */ sub_64827( uVar12 )) == 1)
                {
                    SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_7106(), 0, 0, uParam2 );
                }
            }
            uVar13 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_7106(), 1, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar13 )) == 1)
            {
                SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_7106(), 0, 1, uParam2 );
            }
        }
    }
    return;
}

/* RESET_WEAPON_CONFIG */ void sub_68901(int iParam0)
{
    ref iParam0->_fU0->_fU0 = 0;
    ref iParam0->_fU0->_fU4 = 0;
    ref iParam0->_fU12->_fU0 = 0;
    ref iParam0->_fU12->_fU4 = 0;
    ref iParam0->_fU24->_fU0 = 0;
    ref iParam0->_fU24->_fU4 = 0;
    ref iParam0->_fU36->_fU0 = 0;
    ref iParam0->_fU36->_fU4 = 0;
    ref iParam0->_fU48->_fU0 = 0;
    ref iParam0->_fU48->_fU4 = 0;
    ref iParam0->_fU60->_fU0 = 0;
    ref iParam0->_fU60->_fU4 = 0;
    return;
}

/* P_SET_TWO_HANDED_WEAPON_VISIBLE */ void sub_69719(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18)
{
    unknown uVar21;
    unknown uVar22;

    uVar21 = uParam0._fU24._fU0;
    if ((GET_DOES_WEAPON_EXIST( uVar21 )) == 1)
    {
        SET_WEAPON_VISIBLE( uVar21, uParam18 );
    }
    uVar22 = uParam0._fU60._fU0;
    if ((GET_DOES_WEAPON_EXIST( uVar22 )) == 1)
    {
        SET_WEAPON_VISIBLE( uVar22, uParam18 );
    }
    return;
}

/* REGISTER_PEDS_NYC_MID_01 */ void sub_69873(boolean bParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "REGISTER_PEDS_NYC_MID_01", "***" );
    if ( /* IS_MAX_VALID */ sub_30409())
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "Registering player with NYC_MID_01", "***" );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( (uParam3^), "W_PI_Clt1911_Aa_H^1", 0 );
        CUTSCENE_REGISTER_PED_TELEPORT(  /* PLAYER_PED_ID */ sub_7106(), l_U560, l_U563 );
        ISEQ_REGISTER_ENTITY( -850158086, "max",  /* PLAYER_PED_ID */ sub_7106(), 0 );
        CUTSCENE_REGISTER_ISEQ( -850158086 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_7106(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
        CUTSCENE_REGISTER_SET_PLAYER_IN_COVER( "GenCover", "47E254B1_556B395F_Corner2", 1, 0 );
    }
    if (bParam0)
    {
        if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "FROM FLOW: Registering passos with NYC_MID_01", "***" );
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( g_U750, "FB_Pass_NY", 0 );
            REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( g_U750, 0, 0 ), "W_PI_Clt1911_Aa_H", 0 );
            CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( g_U750, ref g_U2203 );
            CUTSCENE_REGISTER_PED_TELEPORT( g_U750, -53.82198000, -338.01680000, 4.20000000, 66.36500000 );
        }
    }
    else if ( /* IS_PED_VALID */ sub_16533( l_U500 ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "FROM CUTSCENE SCRIPT: Registering passos with NYC_MID_01", "***" );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U500, "FB_Pass_NY", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U500, 0, 0 ), "W_PI_Clt1911_Aa_H", 0 );
    }
    if (DOES_VEHICLE_EXIST( (uParam2^) ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "FROM CUTSCENE SCRIPT: Registering thug car with NYC_MID_01", "***" );
        REGISTER_VEHICLE_PRE_SEAMLESS_CUTSCENE( (uParam2^), "car_gensedan", 0 );
    }
    if ( /* IS_PED_VALID */ sub_16533( (uParam1^)[0] ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "Registering piThugs[0] with NYC_MID_01", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam1^)[0], "G_NY_T_Sold_BB", 0 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( (uParam1^)[0], ref g_U2203 );
        CUTSCENE_REGISTER_PED_TELEPORT( (uParam1^)[0], -60.16000000, -326.58000000, 0.32000000, 230 );
        SET_PED_CURRENT_WEAPON_VISIBLE( (uParam1^)[0], 0 );
    }
    if ( /* IS_PED_VALID */ sub_16533( (uParam1^)[1] ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "Registering piThugs[1] with NYC_MID_01", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam1^)[1], "G_NY_T_Sold_BB^1", 0 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( (uParam1^)[1], ref g_U2203 );
        CUTSCENE_REGISTER_SET_PED_IN_COVER( (uParam1^)[1], "GenCover", "47E254B1_DC2D39A6_Corner2", 0, 0 );
        SET_PED_CURRENT_WEAPON_VISIBLE( (uParam1^)[1], 0 );
    }
    if ( /* IS_PED_VALID */ sub_16533( (uParam1^)[2] ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "Registering piThugs[2] with NYC_MID_01", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam1^)[2], "G_NY_T_Sold_BB^2", 0 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( (uParam1^)[2], ref g_U2203 );
        CUTSCENE_REGISTER_PED_TELEPORT( (uParam1^)[2], -61.24000000, -327.30000000, 0.28000000, 270 );
        SET_PED_CURRENT_WEAPON_VISIBLE( (uParam1^)[2], 0 );
    }
    return;
}

/* F_GET_TWO_HANDED_WEAPON_FROM_PLAYER */ int sub_71319()
{
    unknown Result;
    unknown uVar3;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )) == 0)
    {
        Result = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_7106(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( Result )) == 1)
        {
            if (( /* IS_WEAPON_TWO_HANDED */ sub_64827( Result )) == 1)
            {
                return Result;
            }
        }
        uVar3 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_7106(), 2 );
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            return uVar3;
        }
    }
    return 0;
}

/* P_PLAYER_UNHOLSTER_WEAPONS */ void sub_71518(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18)
{
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )) == 0)
    {
        uVar21 = uParam0._fU0._fU0;
        if ((GET_DOES_WEAPON_EXIST( uVar21 )) == 1)
        {
            SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_7106(), uVar21, 0, uParam18 );
        }
        uVar22 = uParam0._fU12._fU0;
        if ((GET_DOES_WEAPON_EXIST( uVar22 )) == 1)
        {
            SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_7106(), uVar22, 1, uParam18 );
        }
        uVar23 = uParam0._fU24._fU0;
        if ((GET_DOES_WEAPON_EXIST( uVar23 )) == 1)
        {
            SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_7106(), uVar23, 0, uParam18 );
        }
    }
    return;
}

/* CLEAN_UP_MID01_ASSETS */ void sub_71786()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "CLEAN_UP_MID01_ASSETS", "***" );
     /* CLEANPEDARRAY */ sub_37123( ref l_U514 );
     /* CLEANVEHICLE */ sub_24567( l_U558 );
     /* CLEANPED */ sub_15654( l_U500 );
    return;
}

/* UNLOAD_NYC_MID_01_ASSETS */ void sub_71898()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "UNLOAD_NYC_MID_01_ASSETS", "***" );
     /* UNLOADMODEL */ sub_71984( 2024698471 );
     /* UNLOADMODEL */ sub_71984( g_U2250 );
     /* UNLOADMODEL */ sub_71984( 557810561 );
     /* UNLOADWEAPON */ sub_72159( -862236369 );
    return;
}

/* UNLOADMODEL */ void sub_71984(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 1)
    {
        SET_MODEL_AS_NO_LONGER_NEEDED( uParam0 );
    }
    else
    {
         /* WRITE_STRING */ sub_1437( "[SP]### ERROR! (UnloadModel) Trying to unload a model that isn't in the img! ###" );
    }
    return;
}

/* UNLOADWEAPON */ void sub_72159(unknown uParam0)
{
    SET_WEAPON_AS_NO_LONGER_NEEDED( uParam0 );
    return;
}

/* SETUP_VIG_08B_CARS_AND_ENEMIES */ void sub_72824()
{
    int I;

     /* WRITESCRIPTLOG */ sub_1129( "SBA", "SETUP_VIG_08B_CARS_AND_ENEMIES", "***" );
     /* CLEANVEHICLE */ sub_24567( l_U780 );
    l_U780 =  /* CREATEVEHICLE */ sub_14039( 557810561, -108.40000000, -345.00000000, 1.20000000, 13.26648000, 0, 0, 0 );
     /* CLEANVEHICLE */ sub_24567( l_U781 );
    l_U781 =  /* CREATEVEHICLE */ sub_14039( 557810561, -108.40000000, -350.00000000, 1.20000000, 13.26648000, 0, 0, 0 );
     /* P_SET_STANDARD_VEHICLE_OPTIONS */ sub_14359( l_U780, 1, 1 );
     /* P_SET_VEHICLE_LIGHTS */ sub_14796( ref l_U780, 1, 0.25000000 );
    if ( /* IS_VEHICLE_VALID */ sub_14464( l_U780 ))
    {
        SET_VEHICLE_COLOUR_COMBINATION( l_U780, 2 );
        SET_VEHICLE_EXTRA( l_U780, 1, 1 );
        SET_VEHICLE_EXTRA( l_U780, 2, 1 );
        SET_VEHICLE_EXTRA( l_U780, 3, 0 );
        SET_VEHICLE_EXTRA( l_U780, 4, 0 );
        SET_VEHICLE_EXTRA( l_U780, 5, 1 );
        SET_VEHICLE_EXTRA( l_U780, 6, 1 );
        SET_VEHICLE_EXTRA( l_U780, 7, 1 );
        SET_VEHICLE_EXTRA( l_U780, 8, 1 );
    }
     /* P_SET_STANDARD_VEHICLE_OPTIONS */ sub_14359( l_U781, 1, 1 );
     /* P_SET_VEHICLE_LIGHTS */ sub_14796( ref l_U781, 1, 0.25000000 );
    if ( /* IS_VEHICLE_VALID */ sub_14464( l_U780 ))
    {
        SET_VEHICLE_COLOUR_COMBINATION( l_U781, 4 );
        SET_VEHICLE_EXTRA( l_U781, 1, 1 );
        SET_VEHICLE_EXTRA( l_U781, 2, 1 );
        SET_VEHICLE_EXTRA( l_U781, 3, 1 );
        SET_VEHICLE_EXTRA( l_U781, 4, 1 );
        SET_VEHICLE_EXTRA( l_U781, 5, 0 );
        SET_VEHICLE_EXTRA( l_U781, 6, 0 );
        SET_VEHICLE_EXTRA( l_U781, 7, 1 );
        SET_VEHICLE_EXTRA( l_U781, 8, 1 );
    }
     /* P_SETUP_AI_GROUP */ sub_15168( ref l_U924, 1.00000000, 0 );
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "SETUP_VIG_08B_CARS_AND_ENEMIES: Setup second blocking car enemies", "***" );
     /* CLEANPEDARRAY */ sub_37123( ref l_U921 );
    for ( I = 0; I <= 1; I++ )
    {
        l_U921[I] =  /* CREATEPEDINVEHICLE */ sub_74103( ref l_U894[I], l_U780, l_U933[I], 0,  /* FIND_PATH_FOR_CAR_SEAT */ sub_73504( l_U933[I] ) );
        if ( /* IS_PED_VALID */ sub_16533( l_U921[I] ))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U921[I], 1 );
            SET_PED_ALERTNESS( l_U921[I], 3 );
             /* P_QUICK_ADD_PED_TO_GROUP */ sub_16840( l_U921[I], ref l_U924 );
            SET_PED_NAME_DEBUG( l_U921[I], l_U930[I] );
            SET_PED_ONLY_DAMAGED_BY_PLAYER( l_U921[I], 1 );
             /* F_GIVEPEDWEAPON */ sub_9648( l_U921[I], -862236369, 25000, 0, 0 );
        }
    }
     /* P_SETUP_AI_GROUP */ sub_15168( ref l_U969, 1.00000000, 0 );
     /* CLEANPEDARRAY */ sub_37123( ref l_U966 );
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "CREATE_VIG08b cars and enemies: Setup last blocking car enemies", "***" );
    for ( I = 0; I <= 1; I++ )
    {
        l_U966[I] =  /* CREATEPEDINVEHICLE */ sub_74103( ref l_U939[I], l_U781, l_U978[I], 0, 0 );
        if ( /* IS_PED_VALID */ sub_16533( l_U966[I] ))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U966[I], 1 );
            SET_PED_ALERTNESS( l_U966[I], 3 );
             /* P_QUICK_ADD_PED_TO_GROUP */ sub_16840( l_U966[I], ref l_U969 );
            SET_PED_NAME_DEBUG( l_U966[I], l_U975[I] );
            SET_PED_ONLY_DAMAGED_BY_PLAYER( l_U966[I], 1 );
             /* F_GIVEPEDWEAPON */ sub_9648( l_U966[I], -862236369, 25000, 0, 0 );
        }
    }
    if ( /* IS_VEHICLE_VALID */ sub_14464( l_U780 ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "Setting up second blocker car recording to play: PAUSED", "***" );
        START_PLAYBACK_RECORDED_VEHICLE( l_U780, l_U1359 );
        PAUSE_PLAYBACK_RECORDED_VEHICLE( l_U780 );
        SKIP_TIME_IN_PLAYBACK_RECORDED_VEHICLE( l_U780, 2000 );
        SET_PLAYBACK_SPEED( l_U780, 1.25000000 );
    }
    if ( /* IS_VEHICLE_VALID */ sub_14464( l_U781 ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "Setting up Last blocker car recording to play: PAUSED", "***" );
        START_PLAYBACK_RECORDED_VEHICLE( l_U781, l_U1360 );
        PAUSE_PLAYBACK_RECORDED_VEHICLE( l_U781 );
        SET_PLAYBACK_SPEED( l_U781, 1.10000000 );
    }
     /* LOADSCRIPTSTREAM */ sub_13077( l_U1363, l_U1361, 1 );
     /* LOADSCRIPTSTREAM */ sub_13077( l_U1364, l_U1362, 1 );
    return;
}

/* FIND_PATH_FOR_CAR_SEAT */ string sub_73504(unknown uParam0)
{
    switch (uParam0)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "FIND_PATH_FOR_CAR_SEAT: Setting path for VS_FRONT_RIGHT", "***" );
        return "/Global/VehicleCar/Passenger_FrontRight/CAR_GENSEDAN2";
        break;
        case 1:
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "FIND_PATH_FOR_CAR_SEAT: Setting path for VS_BACK_LEFT", "***" );
        return "/Global/VehicleCar/Passenger_BackLeft/CAR_GENSEDAN2";
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "FIND_PATH_FOR_CAR_SEAT: Setting path for VS_BACK_RIGHT", "***" );
        return "/Global/VehicleCar/Passenger_BackRight/CAR_GENSEDAN2";
        break;
    }
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "FIND_PATH_FOR_CAR_SEAT: Setting path for VS_DRIVER", "***" );
    return "/Global/VehicleCar/Driver/CAR_GENSEDAN2";
}

/* CREATEPEDINVEHICLE */ void sub_74103(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4)
{
    if ((HAS_MODEL_LOADED( iParam0->_fU16 )) == 0)
    {
        SCRIPT_ASSERT( "The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_1320( iParam0->_fU16, 1 );
    }
    if (((IS_VEHICLE_DEAD( uParam1 )) == 0) AND ((DOES_VEHICLE_EXIST( uParam1 )) == 1))
    {
        iParam0->_fU40 = CREATE_PED_INSIDE_VEHICLE( uParam1, iParam0->_fU24, iParam0->_fU16, uParam2, uParam4, iParam0->_fU48 );
    }
    else
    {
        SCRIPT_ASSERT( "The vehicle your trying to create a ped inside of is not valid!!!", 0 );
    }
    if (iParam3 == 1)
    {
        while ((DOES_PED_EXIST( iParam0->_fU40 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for ped created inside a vehicle to exist... ###", 0 );
            WAIT( 0 );
        }
    }
     /* SETPEDDEFAULTSTATS */ sub_16310( iParam0->_fU40 );
     /* SETPEDDEFAULTTEMPLATE */ sub_16411( iParam0->_fU40 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        iParam0->_fU44 = 1;
    }
    return iParam0->_fU40;
}

/* SETUP_PASSOS_FOR_ALLEY */ void sub_75471()
{
     /* WRITESCRIPTLOG */ sub_1129( "TEH", "SETUP_PASSOS_FOR_ALLEY - start", 0 );
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "SETUP_PASSOS_PRE_MIDSCENE_ALLEYWAY_NODES: Creating Passos", "***" );
    if (NOT ( /* IS_PED_VALID */ sub_16533( g_U750 )))
    {
         /* CLEANPED */ sub_15654( g_U750 );
        g_U750 =  /* CREATEPED */ sub_15819( ref l_U998 );
        if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
        {
             /* F_GIVEPEDWEAPON */ sub_9648( g_U750, -862236369, 25000, 0, 0 );
             /* P_SETUP_PASSOS_GENERAL_ATTRIBUTES */ sub_44705( ref g_U750 );
        }
    }
    if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
    {
         /* TELEPORTPED */ sub_20673( g_U750, l_U1394, l_U1397 );
    }
    return;
}

/* P_HANDLE_2ND_BLOCKER_CAR */ void sub_76096()
{
    switch (l_U1752)
    {
        case 1:
        if ( /* IS_VEHICLE_VALID */ sub_14464( l_U780 ))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_2ND_BLOCKER_CAR: starting second blocker car recording: UNPAUSED!", "***" );
            UNPAUSE_PLAYBACK_RECORDED_VEHICLE( l_U780 );
            if ( /* IS_PED_VALID */ sub_16533( l_U921[0] ))
            {
                PLAY_SCRIPT_STREAM_FROM_PED( l_U921[0], l_U1361 );
            }
             /* CREATETIMER */ sub_6630( ref l_U1493, 2150, 1, 0 );
             /* STARTTIMER */ sub_33286( ref l_U1493 );
            l_U1752 = 2;
        }
        break;
        case 2:
        if ( /* ISTIMERDONE */ sub_34082( ref l_U1493 ))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_2ND_BLOCKER_CAR: Starting Exit Anims!", "***" );
             /* TASK_VIG08B_PED_TO_LEAVE_CAR */ sub_76456( l_U921[0], l_U780, 0 );
             /* TASK_VIG08B_PED_TO_LEAVE_CAR */ sub_76456( l_U921[1], l_U780, 0 );
        }
        if ( /* IS_VEHICLE_VALID */ sub_14464( l_U780 ))
        {
            if (NOT (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( l_U780 )))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_2ND_BLOCKER_CAR: car 3 recording is done!", "***" );
                STOP_SCRIPT_STREAM( l_U1361 );
                 /* CREATETIMER */ sub_6630( ref l_U1493, 1000, 1, 0 );
                 /* STARTTIMER */ sub_33286( ref l_U1493 );
                SET_VEHICLE_ENGINE_ON( l_U780, 1, 1 );
                l_U1752 = 10;
            }
        }
        break;
        case 10:
        if ( /* ISTIMERDONE */ sub_34082( ref l_U1493 ))
        {
             /* P_PLAY_DIAL_CAR_EXIT */ sub_76944( l_U921[1], "M4_NY_26_Avg", "SNYC_VIG08E", ref l_U1925 );
        }
        if (( /* F_IS_PED_DONE_EXITING_VEHICLE */ sub_77117( l_U921[1] )) AND ( /* F_IS_PED_DONE_EXITING_VEHICLE */ sub_77117( l_U921[0] )))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_2ND_BLOCKER_CAR: Passengers have left vehicle!", "***" );
             /* P_PLAY_DIAL_CAR_EXIT */ sub_76944( l_U921[0], "M4_NY_28_Avg", "SNYC_VIG08G", ref l_U1935 );
             /* PED_ARRAY_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_77556( ref l_U921, 0 );
             /* PED_ARRAY_SET_TETHERBOX */ sub_21019( ref l_U921, l_U1354, 1 );
             /* PED_ARRAY_SET_REGISTER_TARGET_PLAYER */ sub_77682( ref l_U921 );
             /* LATCH_CLOSED_CAR_DOOR */ sub_77764( l_U780, 0, ref l_U936[0] );
            l_U1752 = -1;
        }
        break;
    }
    return;
}

/* TASK_VIG08B_PED_TO_LEAVE_CAR */ void sub_76456(unknown uParam0, unknown uParam1, boolean bParam2)
{
    if (( /* IS_VEHICLE_VALID */ sub_14464( uParam1 )) AND ( /* IS_PED_VALID */ sub_16533( uParam0 )))
    {
        if (bParam2)
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "TASK_PED_TO_LEAVE_CAR: Exitting car but NOT closing door", "***" );
            TASK_LEAVE_VEHICLE_DONT_CLOSE_DOOR( uParam0, uParam1 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "TASK_PED_TO_LEAVE_CAR: Exitting car and closing door", "***" );
            TASK_LEAVE_VEHICLE_IMMEDIATELY( uParam0, uParam1 );
        }
    }
    return;
}

/* P_PLAY_DIAL_CAR_EXIT */ void sub_76944(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_PLAY_DIAL_CAR_EXIT", "***" );
    if ( /* IS_PED_VALID */ sub_16533( uParam0 ))
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_7106() )))
        {
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_40483( uParam3 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_40606( 1, uParam0, uParam1, uParam3, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_40606( 0,  /* PLAYER_PED_ID */ sub_7106(), "MAX", uParam3, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_40852( uParam2, uParam3, 8, 1 );
        }
    }
    return;
}

/* F_IS_PED_DONE_EXITING_VEHICLE */ int sub_77117(unknown uParam0)
{
    if (( /* F_GET_SCRIPT_TASK_STATUS */ sub_77164( uParam0, 32 )) == 7)
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "F_IS_PED_DONE_EXITING_VEHICLE:  TRUE!", "***" );
        return 1;
    }
    if (IS_PED_DEAD( uParam0 ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "F_IS_PED_DONE_EXITING_VEHICLE:  Ped is dead!", "***" );
        return 1;
    }
    return 0;
}

/* F_GET_SCRIPT_TASK_STATUS */ int sub_77164(unknown uParam0, unknown uParam1)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        return GET_SCRIPT_TASK_STATUS( uParam0, uParam1 );
    }
    return 0;
}

/* PED_ARRAY_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ void sub_77556(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_45688( ref (uParam0^)[I], uParam1 );
    }
    return;
}

/* PED_ARRAY_SET_REGISTER_TARGET_PLAYER */ void sub_77682(unknown uParam0)
{
     /* PED_ARRAY_SET_REGISTER_TARGET */ sub_20830( uParam0,  /* PLAYER_PED_ID */ sub_7106() );
    return;
}

/* LATCH_CLOSED_CAR_DOOR */ void sub_77764(unknown uParam0, unknown uParam1, unknown uParam2)
{
    float fVar5;

    fVar5 = 0.05000000;
    if (NOT (uParam2^))
    {
        if ( /* IS_VEHICLE_VALID */ sub_14464( uParam0 ))
        {
            if ((GET_VEHICLE_DOOR_ANGLE_RATIO( uParam0, uParam1 )) <= fVar5)
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "LATCH_CLOSED_CAR_DOOR: shuting and latching door!", "***" );
                SET_VEHICLE_DOOR_SHUT( uParam0, uParam1, 0, 0 );
                SET_VEHICLE_DOOR_LATCHED( uParam0, uParam1, 1, 1 );
                (uParam2^) = 1;
            }
        }
    }
    return;
}

/* P_HANDLE_LAST_BLOCKER_CAR */ void sub_77971()
{
    switch (l_U1753)
    {
        case 1:
        if ( /* IS_VEHICLE_VALID */ sub_14464( l_U781 ))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_LAST_BLOCKER_CAR: starting last blocker car recording: UNPAUSED!", "***" );
            UNPAUSE_PLAYBACK_RECORDED_VEHICLE( l_U781 );
            if ( /* IS_PED_VALID */ sub_16533( l_U966[0] ))
            {
                PLAY_SCRIPT_STREAM_FROM_PED( l_U966[0], l_U1362 );
            }
             /* CREATETIMER */ sub_6630( ref l_U1502, 6300, 1, 0 );
             /* STARTTIMER */ sub_33286( ref l_U1502 );
            l_U1753 = 2;
        }
        break;
        case 2:
        if ( /* ISTIMERDONE */ sub_34082( ref l_U1502 ))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_LAST_BLOCKER_CAR: Starting Exit Anims!", "***" );
             /* TASK_VIG08B_PED_TO_LEAVE_CAR */ sub_76456( l_U966[0], l_U781, 0 );
             /* TASK_VIG08B_PED_TO_LEAVE_CAR */ sub_76456( l_U966[1], l_U781, 0 );
        }
        if ( /* IS_VEHICLE_VALID */ sub_14464( l_U781 ))
        {
            if (NOT (IS_PLAYBACK_GOING_ON_FOR_VEHICLE( l_U781 )))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_LAST_BLOCKER_CAR: car 4 recording is done!", "***" );
                STOP_SCRIPT_STREAM( l_U1362 );
                SET_VEHICLE_ENGINE_ON( l_U781, 1, 1 );
                 /* CREATETIMER */ sub_6630( ref l_U1502, 1000, 1, 0 );
                 /* STARTTIMER */ sub_33286( ref l_U1502 );
                l_U1753 = 10;
            }
        }
        break;
        case 10:
        if ( /* ISTIMERDONE */ sub_34082( ref l_U1502 ))
        {
            ;
        }
        if (( /* F_IS_PED_DONE_EXITING_VEHICLE */ sub_77117( l_U966[1] )) AND ( /* F_IS_PED_DONE_EXITING_VEHICLE */ sub_77117( l_U966[0] )))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_LAST_BLOCKER_CAR: Passengers have left vehicle!", "***" );
             /* P_PLAY_DIAL_CAR_EXIT */ sub_76944( l_U966[1], "M4_NY_25_Avg", "SNYC_VIG08D", ref l_U1955 );
             /* PED_ARRAY_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_77556( ref l_U966, 0 );
             /* PED_ARRAY_SET_TETHERBOX */ sub_21019( ref l_U966, l_U1355, 1 );
             /* PED_ARRAY_SET_REGISTER_TARGET_PLAYER */ sub_77682( ref l_U966 );
             /* LATCH_CLOSED_CAR_DOOR */ sub_77764( l_U781, 0, ref l_U981[0] );
            l_U1753 = -1;
        }
        break;
    }
    return;
}

/* PED_SET_LOCK_TO_COVER */ void sub_79220(unknown uParam0, unknown uParam1)
{
    if ( /* IS_PED_VALID */ sub_16533( (uParam0^) ))
    {
        SET_PED_FLAG_LOCK_TO_COVER( (uParam0^), uParam1 );
    }
    return;
}

/* MAKE_ALLEY_CARS_NOT_BLOWUP */ void sub_79613(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "MAKE_ALLEY_CARS_NOT_BLOWUP", "***" );
    if ( /* IS_VEHICLE_VALID */ sub_14464( l_U779 ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "viEnemyCar1", "***" );
        STOP_VEHICLE_FIRE( l_U779 );
        SET_VEHICLE_PETROL_TANK_HEALTH( l_U779, 1000 );
        SET_VEHICLE_HEALTH( l_U779, 999 );
        SET_VEHICLE_ENGINE_CAN_BE_DAMAGED( l_U779, 0 );
        SET_VEHICLE_DIRT_LEVEL( l_U779, 15.90000000 );
    }
    if ( /* IS_VEHICLE_VALID */ sub_14464( l_U780 ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "viEnemyCar3", "***" );
        STOP_VEHICLE_FIRE( l_U780 );
        SET_VEHICLE_PETROL_TANK_HEALTH( l_U780, 1000 );
        SET_VEHICLE_HEALTH( l_U780, 999 );
        SET_VEHICLE_ENGINE_CAN_BE_DAMAGED( l_U780, 0 );
        SET_VEHICLE_DIRT_LEVEL( l_U780, 15.90000000 );
    }
    if ( /* IS_VEHICLE_VALID */ sub_14464( l_U781 ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "viEnemyCar4", "***" );
        STOP_VEHICLE_FIRE( l_U781 );
        SET_VEHICLE_PETROL_TANK_HEALTH( l_U781, 1000 );
        SET_VEHICLE_HEALTH( l_U781, 999 );
        SET_VEHICLE_ENGINE_CAN_BE_DAMAGED( l_U781, 0 );
        SET_VEHICLE_DIRT_LEVEL( l_U781, 15.90000000 );
    }
    return;
}

/* UNLOALD_PRE_04_02_ASSETS_ALLEY */ void sub_80276()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "UNLOALD_PRE_04_02_ASSETS_ALLEY", "***" );
     /* UNLOADMODEL */ sub_71984( g_U2249 );
     /* UNLOADMODEL */ sub_71984( g_U2250 );
     /* UNLOADMODEL */ sub_71984( 1839686620 );
    return;
}

/* P_UNLOAD_VIG08B_ASSETS */ void sub_80407()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_UNLOAD_VIG08B_ASSETS", "***" );
     /* UNLOADANIMDICT */ sub_37587( "LEVEL_S_NYBAR_CP_02" );
     /* UNLOADANIMDICT */ sub_37587( "VEH@CAR_GENSEDAN" );
     /* TERMINATEINTERACTIVESEQUENCE */ sub_80550( "vehicle_car", 1 );
    return;
}

/* TERMINATEINTERACTIVESEQUENCE */ void sub_80550(unknown uParam0, int iParam1)
{
    if ((I_SEQUENCE_IS_LOADED( uParam0 )) == 1)
    {
        I_SEQUENCE_TERMINATE( uParam0 );
    }
    if (iParam1 == 1)
    {
        while ((I_SEQUENCE_IS_LOADED( uParam0 )) == 1)
        {
            DISPLAYF( "[SP]### Waiting for interactive sequence to terminate: {} ###", 1, 1537, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* P_HANDLE_SWAP_1ST_BLOCKER_TETHERS */ void sub_80770()
{
    if (NOT l_U1381)
    {
        if ( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( l_U1116 ))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_SWAP_1ST_BLOCKER_TETHERS: Max past car1 - switch enemy tether", "***" );
             /* PED_ARRAY_SET_TETHERBOX */ sub_21019( ref l_U876, l_U1353, 1 );
            l_U1381 = 1;
            if (NOT l_U1382)
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "Failsafe for freeing car1 peds - stop hiding!", "***" );
                 /* PED_SET_LOCK_TO_COVER */ sub_79220( ref l_U876[0], 0 );
                 /* PED_SET_LOCK_TO_COVER */ sub_79220( ref l_U876[1], 0 );
                l_U1382 = 1;
            }
        }
    }
    else if (NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( l_U1116 )))
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_SWAP_1ST_BLOCKER_TETHERS: Max returned to before car1 - switch enemy tether back", "***" );
         /* PED_ARRAY_SET_TETHERBOX */ sub_21019( ref l_U876, l_U1352, 1 );
        l_U1381 = 0;
    }
    return;
}

/* P_HANDLE_VIG09 */ void sub_81224(int iParam0)
{
    switch (l_U1754)
    {
        case -1: break;
        case 0:
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_VIG09: state = eISS_SETUP", "***" );
         /* CREATETIMER */ sub_6630( ref l_U1421, 7000, 1, 0 );
         /* P_MOVE_PASSOS_FOR_VIG09 */ sub_81382( l_U1394 );
         /* LOADISEQ */ sub_20055( -236629402, 1 );
        ISEQ_REGISTER_ENTITY( -236629402, "passos", g_U750, 0 );
        l_U1754 = 1;
        break;
        case 1:
        if ((NOT l_U1376) AND (( /* F_GET_SCRIPT_TASK_STATUS */ sub_77164( g_U750, 31 )) == 7))
        {
            if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
            {
                CLEAR_PED_TASKS_IMMEDIATELY( g_U750 );
                SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U750, 1 );
                 /* CREATETIMER */ sub_6630( ref l_U1412, 500, 1, 0 );
                 /* STARTTIMER */ sub_33286( ref l_U1412 );
                l_U1376 = 1;
            }
        }
        if ( /* ISTIMERDONE */ sub_34082( ref l_U1412 ))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_HANDLE_VIG09 - Registering piPassos_Vig09", "***" );
            SET_PED_EMOTION_STATE( g_U750, 3 );
            CLEAR_PED_DEFAULT_AIM( g_U750 );
            PED_ACTION_TREE_PLAY_NODE( g_U750, ref g_U2203 );
             /* TELEPORTPED */ sub_20673( g_U750, l_U1394, l_U1397 );
            ISEQ_START( -236629402 );
            l_U1377 = 1;
             /* CREATETIMER */ sub_6630( ref l_U1664, 1000, 1, 0 );
             /* CREATETIMER */ sub_6630( ref l_U1421, 7000, 1, 0 );
             /* STARTTIMER */ sub_33286( ref l_U1421 );
            l_U1754 = 2;
        }
        break;
        case 2:
        if (iParam0 == 1)
        {
             /* P_UNREGISTER_TARGET_FOR_PASSOS */ sub_57378( g_U750 );
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "Last enemy!  Advancing to eISS_FINISHED!", "***" );
            l_U1754 = 10;
            return;
        }
        if ( /* F_ISPEDINTRIGGERBOXFIRSTTIME */ sub_42929( ref l_U1264, g_U750, 0 ))
        {
             /* P_PLAY_DIAL_PASSOS */ sub_56891( "SNYC_SFTB", ref l_U1617 );
             /* STARTTIMER */ sub_33286( ref l_U1664 );
        }
        if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_56624()))
        {
            if ( /* ISTIMERDONE */ sub_34082( ref l_U1664 ))
            {
                 /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_67121( "SNYC_PSUF", ref l_U1627 );
            }
        }
        if (NOT l_U1398)
        {
            if (( /* CAN_PASSOS_KILL */ sub_82877( g_U750, l_U1761, ref l_U567 )) AND ( /* FIND_TARGET_IN_ALLEY */ sub_82112()))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "Alley: Passos can fire!", "***" );
                if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
                {
                    PED_SET_ACTION_INTENTION( g_U750, 55, -1, 0, 0, 0 );
                }
                l_U1398 = 1;
            }
        }
        else if (NOT (( /* CAN_PASSOS_KILL */ sub_82877( g_U750, l_U1761, ref l_U567 )) AND ( /* FIND_TARGET_IN_ALLEY */ sub_82112())))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "Alley: Passos stops firing!", "***" );
            if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
            {
                PED_FINISH_ACTION_INTENTION( g_U750, 55 );
            }
            l_U1398 = 0;
        }
        if (l_U1398 == 0)
        {
            l_U1377 = 0;
             /* RESETTIMER */ sub_6455( ref l_U1421 );
             /* STARTTIMER */ sub_33286( ref l_U1421 );
        }
        else if ( /* ISTIMERDONE */ sub_34082( ref l_U1421 ))
        {
            if (NOT l_U1377)
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "Alley: Passos is deadly!", "***" );
                l_U1377 = 1;
                PED_SET_ACTION_INTENTION( g_U750, 52, -1, 0, 0, 0 );
            }
             /* RESETTIMER */ sub_6455( ref l_U1421 );
             /* STARTTIMER */ sub_33286( ref l_U1421 );
        }
        if ((l_U1398) AND ( /* IS_PED_VALID */ sub_16533( g_U750 )))
        {
            if (PED_ANIM_EVENT( g_U750, 1477325977 ))
            {
                 /* P_PLAY_DIAL_PASSOS */ sub_56891( "SNYC_SGFB", ref l_U1607 );
            }
        }
        if (l_U1377)
        {
            if (PED_ANIM_EVENT( g_U750, -1531652494 ))
            {
                if ( /* IS_PED_VALID */ sub_16533( l_U1761 ))
                {
                     /* WRITESCRIPTLOG */ sub_1129( "SBA", "VIG_09 - Passos KILLING TARGET, resetting to not deadly", "***" );
                     /* PED_KILL_HEADSOUP */ sub_58397( l_U1761 );
                    SCRIPT_VAR_SET_INT( "SP_SV_PASSOS_KILLS", 1 );
                    if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
                    {
                        PED_FINISH_ACTION_INTENTION( g_U750, 52 );
                    }
                    l_U1377 = 0;
                }
            }
        }
        break;
        case 10:
        if (NOT l_U1398)
        {
            if (( /* CAN_PASSOS_KILL */ sub_82877( g_U750, l_U1761, ref l_U567 )) AND ( /* FIND_TARGET_IN_ALLEY */ sub_82112()))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "Alley: Passos can fire!", "***" );
                if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
                {
                    PED_SET_ACTION_INTENTION( g_U750, 55, -1, 0, 0, 0 );
                }
                l_U1398 = 1;
            }
        }
        else if (NOT (( /* CAN_PASSOS_KILL */ sub_82877( g_U750, l_U1761, ref l_U567 )) AND ( /* FIND_TARGET_IN_ALLEY */ sub_82112())))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "Alley: Passos stops firing!", "***" );
            if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
            {
                PED_FINISH_ACTION_INTENTION( g_U750, 55 );
            }
            l_U1398 = 0;
        }
        if ((l_U1398) AND ( /* IS_PED_VALID */ sub_16533( g_U750 )))
        {
            if (PED_ANIM_EVENT( g_U750, 1477325977 ))
            {
                 /* P_PLAY_DIAL_PASSOS */ sub_56891( "SNYC_SGFB", ref l_U1607 );
            }
        }
        break;
    }
    return;
}

/* P_MOVE_PASSOS_FOR_VIG09 */ void sub_81382(unknown uParam0, unknown uParam1, unknown uParam2)
{
    unknown uVar5;

     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_MOVE_PASSOS_FOR_VIG09", "***" );
    if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
    {
        OPEN_SEQUENCE_TASK( ref uVar5 );
        TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( 0, 1 );
        TASK_FOLLOW_NAV_MESH_TO_COORD( 0, uParam0, 3, -1, 0.25000000, 64, 0 );
        CLOSE_SEQUENCE_TASK( uVar5 );
        CLEAR_PED_TASKS( g_U750 );
        TASK_PERFORM_SEQUENCE( g_U750, uVar5 );
        CLEAR_SEQUENCE_TASK( uVar5 );
    }
    return;
}

/* FIND_TARGET_IN_ALLEY */ int sub_82112()
{
    int I;

    if ( /* IS_PED_VALID */ sub_16533( l_U1761 ))
    {
        if (( /* F_ISPEDINTRIGGERBOX */ sub_42795( l_U1761, l_U1180 )) || ( /* F_ISPEDINTRIGGERBOX */ sub_42795( l_U1761, l_U1159 )))
        {
            return 1;
        }
    }
     /* P_UNREGISTER_TARGET_FOR_PASSOS */ sub_57378( g_U750 );
    for ( I = 0; I <= 1; I++ )
    {
        if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
        {
            if ( /* IS_PED_VALID */ sub_16533( l_U921[I] ))
            {
                if (( /* F_ISPEDINTRIGGERBOX */ sub_42795( l_U921[I], l_U1180 )) || ( /* F_ISPEDINTRIGGERBOX */ sub_42795( l_U921[I], l_U1159 )))
                {
                     /* WRITESCRIPTLOG */ sub_1129( "SBA", "Selecting piEnemyCar3 target: ", "***" );
                     /* WRITE_INT */ sub_24397( I );
                     /* P_REGISTER_TARGET_FOR_PASSOS */ sub_57311( g_U750, l_U921[I] );
                    l_U1761 = l_U921[I];
                    l_U567 = GET_PED_HEALTH( l_U1761 );
                    return 1;
                }
            }
        }
    }
    for ( I = 0; I <= 1; I++ )
    {
        if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
        {
            if ( /* IS_PED_VALID */ sub_16533( l_U966[I] ))
            {
                if (( /* F_ISPEDINTRIGGERBOX */ sub_42795( l_U966[I], l_U1180 )) || ( /* F_ISPEDINTRIGGERBOX */ sub_42795( l_U966[I], l_U1159 )))
                {
                     /* WRITESCRIPTLOG */ sub_1129( "SBA", "Selecting piEnemyCar4 target: ", "***" );
                     /* WRITE_INT */ sub_24397( I );
                     /* P_REGISTER_TARGET_FOR_PASSOS */ sub_57311( g_U750, l_U966[I] );
                    l_U1761 = l_U966[I];
                    l_U567 = GET_PED_HEALTH( l_U1761 );
                    return 1;
                }
            }
        }
    }
    for ( I = 0; I <= 2; I++ )
    {
        if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
        {
            if ( /* IS_PED_VALID */ sub_16533( l_U876[I] ))
            {
                if (( /* F_ISPEDINTRIGGERBOX */ sub_42795( l_U876[I], l_U1180 )) || ( /* F_ISPEDINTRIGGERBOX */ sub_42795( l_U876[I], l_U1159 )))
                {
                     /* WRITESCRIPTLOG */ sub_1129( "SBA", "Selecting piEnemyCar1 target: ", "***" );
                     /* WRITE_INT */ sub_24397( I );
                     /* P_REGISTER_TARGET_FOR_PASSOS */ sub_57311( g_U750, l_U876[I] );
                    l_U1761 = l_U876[I];
                    l_U567 = GET_PED_HEALTH( l_U1761 );
                    return 1;
                }
            }
        }
    }
    return 0;
}

/* CAN_PASSOS_KILL */ int sub_82877(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int iVar5;

    if ( /* IS_PED_VALID */ sub_16533( uParam0 ))
    {
        if ( /* IS_PED_VALID */ sub_16533( uParam1 ))
        {
            if ( /* IS_MAX_VALID */ sub_30409())
            {
                iVar5 = GET_PED_HEALTH( uParam1 );
                if (iVar5 != (uParam2^))
                {
                    (uParam2^) = iVar5;
                    return 0;
                }
                if (IS_PED_IN_MELEE_COMBAT(  /* PLAYER_PED_ID */ sub_7106() ))
                {
                    return 0;
                }
                if (IS_LAST_MAN_STANDING_ACTIVE())
                {
                    return 0;
                }
                if (IS_BULLET_CAMERA_RUNNING( 0 ))
                {
                    return 0;
                }
                return 1;
            }
        }
    }
    return 0;
}

/* F_HANDLE_PASSOS_WARNING_DEATH */ int sub_84006(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21, unknown uParam22, unknown uParam23, unknown uParam24, unknown uParam25, unknown uParam26, unknown uParam27, unknown uParam28, unknown uParam29, unknown uParam30, unknown uParam31, unknown uParam32, unknown uParam33, unknown uParam34, unknown uParam35, unknown uParam36, unknown uParam37, unknown uParam38, unknown uParam39, unknown uParam40, unknown uParam41, boolean bParam42)
{
    switch (l_U97)
    {
        case 0: break;
        case 1: l_U97 = 2;
        case 2:
        if (bParam42)
        {
            if ( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( uParam21 ))
            {
                SCRIPT_ASSERT( "F_HANDLE_PASSOS_WARNING_DEATH: How did player hit death box before warning box?", 0 );
                l_U97 = 4;
            }
            else if ( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( uParam0 ))
            {
                 /* WRITESCRIPTLOG */ sub_1129( "SBA", "F_HANDLE_PASSOS_WARNING_DEATH: Player entered Passos warning box, passos in danger", "***" );
                 /* P_DIAL_PASSOS_WARNING */ sub_62288();
                l_U97 = 3;
            }
        }
        else if (NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( uParam21 )))
        {
            SCRIPT_ASSERT( "F_HANDLE_PASSOS_WARNING_DEATH: How did player hit death box before warning box?", 0 );
            l_U97 = 4;
        }
        else if (NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( uParam0 )))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "F_HANDLE_PASSOS_WARNING_DEATH: Player exited Passos warning box, passos in danger", "***" );
             /* P_DIAL_PASSOS_WARNING */ sub_62288();
            l_U97 = 3;
        };;;
        break;
        case 3:
        if (((NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( uParam21 ))) AND (NOT bParam42)) || (( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( uParam21 )) AND (bParam42)))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "F_HANDLE_PASSOS_WARNING_DEATH: Player entered Passos death box", "***" );
            l_U97 = 4;
        }
        else if ((( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( uParam0 )) AND (NOT bParam42)) || ((NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_62105( uParam0 ))) AND (bParam42)))
        {
             /* WRITESCRIPTLOG */ sub_1129( "SBA", "F_HANDLE_PASSOS_WARNING_DEATH: Player returned from warning box, Passos out of danger", "***" );
            l_U97 = 2;
        }
        break;
        case 4:
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "F_HANDLE_PASSOS_WARNING_DEATH: returning TRUE - going to ePWDS_Idle", "***" );
        l_U97 = 0;
        return 1;
        break;
    }
    return 0;
}

/* PLAY_INDIVIDUAL_04_02_SHOT */ void sub_85192(unknown uParam0, boolean bParam1, boolean bParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;

     /* WRITESCRIPTLOG */ sub_1129( "BSW", "PLAY_INDIVIDUAL_04_02_SHOT start", 0 );
    SET_TIME_OF_DAY( 18, 0 );
    FREEZE_TIME_OF_DAY( 18, 0 );
    SET_WEATHER_TYPE_NOW_PERSIST( "snow_light" );
     /* NIS_PRE_SETUP */ sub_22735( 1, 0, 0, 1 );
    if (NOT bParam2)
    {
        if (ARE_STRINGS_EQUAL( uParam0, "04_02_nybar_sh1" ))
        {
             /* WAIT_FOR_ALLEY_STREAMING */ sub_85365();
        }
        else if (ARE_STRINGS_EQUAL( uParam0, "04_02_nybar_sh12" ))
        {
             /* WAIT_FOR_HALLWAY_STREAMING */ sub_85632();
        }
        else
        {
             /* WAIT_FOR_APARTMENT_STREAMING */ sub_85868();
        }
         /* BLOCKLOAD_04_02_ASSETS */ sub_86101();
         /* LOADSEAMLESSCUTSCENE */ sub_66161( uParam0, 1 );
         /* CREATE_04_02_PEDS_AND_OBJECTS */ sub_86182();
         /* REGISTER_PEDS_CUT_04_02 */ sub_87074( 0 );
        if (ARE_STRINGS_EQUAL( uParam0, "04_02_nybar_concat" ))
        {
             /* WRITESCRIPTLOG */ sub_1129( "BSW", "giving lasers", 0 );
            if ( /* IS_PED_VALID */ sub_16533( l_U341[0] ))
            {
                uVar5 =  /* F_GIVEPEDWEAPON */ sub_9648( l_U341[0], -691403429, 200, 0, 1 );
                ENABLE_WEAPON_ATTACHMENT( uVar5, 13, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar5, 13, 1 );
                SET_LASER_SIGHT_ATTACHMENT( uVar5, -938171172 );
                REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( uVar5, "W_SB_M10_Aa_H", 0 );
            }
            if ( /* IS_PED_VALID */ sub_16533( l_U341[1] ))
            {
                uVar6 =  /* F_GIVEPEDWEAPON */ sub_9648( l_U341[1], -691403429, 200, 0, 1 );
                ENABLE_WEAPON_ATTACHMENT( uVar6, 13, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar6, 13, 1 );
                SET_LASER_SIGHT_ATTACHMENT( uVar6, -938171172 );
                REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( uVar6, "W_SB_M10_Aa_H^1", 0 );
            }
            if ( /* IS_PED_VALID */ sub_16533( l_U341[2] ))
            {
                uVar7 =  /* F_GIVEPEDWEAPON */ sub_9648( l_U341[2], -691403429, 200, 0, 1 );
                ENABLE_WEAPON_ATTACHMENT( uVar7, 13, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar7, 13, 1 );
                SET_LASER_SIGHT_ATTACHMENT( uVar7, -938171172 );
                REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( uVar7, "W_SB_M10_Aa_H^2", 0 );
            }
        }
    }
    else if ( /* IS_MAX_VALID */ sub_30409())
    {
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_7106(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
         /* P_SET_PED_ALL_WEAPON_VISIBILITY */ sub_88520(  /* PLAYER_PED_ID */ sub_7106(), 0 );
    }
    if ( /* IS_PED_VALID */ sub_16533( g_U750 ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "RJM", "Registering piPassos with 04_02_nybar_concat", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( g_U750, "FB_Pass_NY", 0 );
    }
    if (bParam1)
    {
        START_CUTSCENE_CAPTURE( uParam0 );
    }
    if (bParam2)
    {
        CUTSCENE_ENABLE_SKIP( 0 );
        AUD_ENABLE_PRE_BINK_SHUTDOWN( 1 );
    }
    START_SEAMLESS_CUTSCENE();
    if ((NOT IS_BULLET_CAMERA_TO_GAMEPLAY_ALLOWED()) AND ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0))
    {
        START_PANEL_WIPE( 500, 5 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    }
    WAIT( 1 );
    while (NOT HAS_CUTSCENE_FINISHED())
    {
        WAIT( 0 );
    }
    if (IS_MAGDEMO())
    {
         /* P_FADE_OUT_AND_WAIT */ sub_89481( 500 );
    }
    if (bParam1)
    {
        STOP_CUTSCENE_CAPTURE();
    }
    if (NOT bParam2)
    {
         /* CLEANUP_04_02_ASSETS */ sub_89659();
         /* UNLOAD_04_02_ASSETS */ sub_89779();
    }
     /* WRITESCRIPTLOG */ sub_1129( "GA", "P_PLAY_CUTSCENE_04_02_SH7 end", 0 );
    return;
}

/* WAIT_FOR_ALLEY_STREAMING */ void sub_85365()
{
    vector vVar2;

    vVar2 = {-93.97318000, -328.75470000, 0.22057500};
     /* TELEPORTPED */ sub_20673(  /* PLAYER_PED_ID */ sub_7106(), vVar2, 270.00000000 );
    FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_7106(), 1 );
    LOAD_SCENE( vVar2 );
    WAIT( 1000 );
    while (GET_NUMBER_OF_STREAMING_REQUESTS() > 0)
    {
         /* WRITESCRIPTLOG */ sub_1129( "BSW", "P_PLAY_CUTSCENE_04_02_CONCAT waiting for streaming", 0 );
        WAIT( 0 );
    }
    FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_7106(), 0 );
    DO_SCREEN_FADE_IN( 0 );
    return;
}

/* WAIT_FOR_HALLWAY_STREAMING */ void sub_85632()
{
    vector vVar2;

    vVar2 = {-367.22040000, -18.84670000, 2.67698700};
     /* TELEPORTPED */ sub_20673(  /* PLAYER_PED_ID */ sub_7106(), vVar2, 270.00000000 );
    FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_7106(), 1 );
    LOAD_SCENE( vVar2 );
    WAIT( 1000 );
    while (GET_NUMBER_OF_STREAMING_REQUESTS() > 0)
    {
         /* WRITESCRIPTLOG */ sub_1129( "BSW", "P_PLAY_CUTSCENE_04_02_CONCAT waiting for streaming", 0 );
        WAIT( 0 );
    }
    FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_7106(), 0 );
    DO_SCREEN_FADE_IN( 0 );
    return;
}

/* WAIT_FOR_APARTMENT_STREAMING */ void sub_85868()
{
    vector vVar2;

    vVar2 = {-368.95310000, -19.21590000, 2.65213200};
     /* TELEPORTPED */ sub_20673(  /* PLAYER_PED_ID */ sub_7106(), vVar2, 116.00000000 );
    FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_7106(), 1 );
    LOAD_SCENE( vVar2 );
    WAIT( 1000 );
    while (GET_NUMBER_OF_STREAMING_REQUESTS() > 0)
    {
         /* WRITESCRIPTLOG */ sub_1129( "BSW", "P_PLAY_CUTSCENE_04_02_CONCAT waiting for streaming", 0 );
        WAIT( 0 );
    }
    FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_7106(), 0 );
    DO_SCREEN_FADE_IN( 0 );
    return;
}

/* BLOCKLOAD_04_02_ASSETS */ void sub_86101()
{
     /* BLOCKLOADMODEL */ sub_67573( 2024698471 );
     /* BLOCKLOADMODEL */ sub_67573( 557810561 );
     /* BLOCKLOADMODEL */ sub_67573( g_U2251 );
    return;
}

/* CREATE_04_02_PEDS_AND_OBJECTS */ void sub_86182()
{
     /* WRITESCRIPTLOG */ sub_1129( "RJM", "CREATE_04_02_PEDS_AND_OBJECTS - start", 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U286, 0, 0, 0, 0.00000000, -1756913695, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U300, 0, 0, 0, 0.00000000, 1582120812, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U314, 0, 0, 0, 0.00000000, -1566018181, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U328, 0, 0, 0, 0.00000000, 90626805, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U345[0], 0, 0, 0, 0.00000000, 90626805, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U345[1], 0, 0, 0, 0.00000000, 90626805, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_4894( ref l_U345[2], 0, 0, 0, 0.00000000, 90626805, 26, 6, 0, 0, 0 );
     /* CLEANPED */ sub_15654( l_U285 );
     /* CLEANPED */ sub_15654( l_U299 );
     /* CLEANPED */ sub_15654( l_U313 );
     /* CLEANPED */ sub_15654( l_U327 );
     /* CLEANVEHICLE */ sub_24567( l_U385 );
    l_U385 =  /* CREATEVEHICLE */ sub_14039( 557810561, -370.49000000, -43.91900000, -10.85071000, 270.00000000, 0, 0, 0 );
    SET_VEHICLE_ON_GROUND_PROPERLY( l_U385 );
    FREEZE_VEHICLE_POSITION( l_U385, 1 );
    SET_VEHICLE_COLOUR_COMBINATION( l_U385, 0 );
    l_U285 =  /* CREATEPED */ sub_15819( ref l_U286 );
    l_U299 =  /* CREATEPED */ sub_15819( ref l_U300 );
    l_U313 =  /* CREATEPED */ sub_15819( ref l_U314 );
    l_U327 =  /* CREATEPED */ sub_15819( ref l_U328 );
    l_U341[0] =  /* CREATEPED */ sub_15819( ref l_U345[0] );
    l_U341[1] =  /* CREATEPED */ sub_15819( ref l_U345[1] );
    l_U341[2] =  /* CREATEPED */ sub_15819( ref l_U345[2] );
     /* PED_ARRAY_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_77556( ref l_U341, 1 );
     /* CREATE_04_02_VEHICLES */ sub_86751();
     /* WRITESCRIPTLOG */ sub_1129( "RJM", "CREATE_04_02_PEDS_AND_OBJECTS - end", 0 );
    return;
}

/* CREATE_04_02_VEHICLES */ void sub_86751()
{
     /* WRITESCRIPTLOG */ sub_1129( "BSW", "CREATE_04_02_VEHICLES start", 0 );
     /* CLEANVEHICLE */ sub_24567( l_U386 );
     /* CLEANVEHICLE */ sub_24567( l_U387 );
    l_U386 =  /* CREATEVEHICLE */ sub_14039( 557810561, -377.00680000, -43.43409000, -10.92423000, 285.57250000, 0, 0, 0 );
    SET_VEHICLE_ON_GROUND_PROPERLY( l_U386 );
    l_U387 =  /* CREATEVEHICLE */ sub_14039( 557810561, -387.44910000, -41.10949000, -11.09846000, 252.99710000, 0, 0, 0 );
    SET_VEHICLE_ON_GROUND_PROPERLY( l_U387 );
    SET_VEHICLE_COLOUR_COMBINATION( l_U386, 1 );
    FREEZE_VEHICLE_POSITION( l_U386, 1 );
    SET_VEHICLE_COLOUR_COMBINATION( l_U387, 2 );
    FREEZE_VEHICLE_POSITION( l_U387, 1 );
    return;
}

/* REGISTER_PEDS_CUT_04_02 */ void sub_87074(boolean bParam0)
{
     /* WRITESCRIPTLOG */ sub_1129( "RJM", "REGISTER_PEDS_CUT_04_02 - start", 0 );
    if ( /* IS_MAX_VALID */ sub_30409())
    {
         /* WRITESCRIPTLOG */ sub_1129( "RJM", "Registering player with 04_01_pt01", 0 );
        if (bParam0)
        {
             /* WRITESCRIPTLOG */ sub_1129( "RJM", "REGISTER_PEDS_CUT_04_02 - Playing from flow, registering teleport for the player", 0 );
            HIDE_PED_WEAPON_FOR_SCRIPTED_CUTSCENE(  /* PLAYER_PED_ID */ sub_7106(), 1 );
        }
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_7106(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
        ISEQ_REGISTER_ENTITY( 439675427, "max",  /* PLAYER_PED_ID */ sub_7106(), 0 );
    }
    if ( /* IS_PED_VALID */ sub_16533( l_U285 ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "RJM", "Registering piCut04_02Passos with 04_02_nybar_concat", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U285, "FB_Pass_NY", 0 );
    }
    if ( /* IS_PED_VALID */ sub_16533( l_U299 ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "RJM", "Registering piCut04_02Guy1 with 04_02_nybar_concat", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U299, "G_NY_T_Sold_C", 0 );
    }
    if ( /* IS_PED_VALID */ sub_16533( l_U313 ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "RJM", "Registering piCut04_02Guy2 with 04_02_nybar_concat", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U313, "G_NY_T_Sold_C^1", 0 );
    }
    if ( /* IS_PED_VALID */ sub_16533( l_U327 ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "RJM", "Registering piCut04_02Guy3 with 04_02_nybar_concat", 0 );
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U327, "G_NY_T_Sold_C^2", 0 );
    }
    if ( /* IS_VEHICLE_VALID */ sub_14464( l_U385 ))
    {
         /* WRITESCRIPTLOG */ sub_1129( "RJM", "Registering viCar with 04_02_nybar_concat", 0 );
        REGISTER_VEHICLE_PRE_SEAMLESS_CUTSCENE( l_U385, "car_gensedan", 0 );
    }
    REGISTER_HIDE_ENTITY_AT_POSITION( g_U2188._fU0, g_U2188._fU4 );
    CUTSCENE_REGISTER_STREAM_HELPER( -368.70210000, -20.18708000, 2.65209300 );
     /* WRITESCRIPTLOG */ sub_1129( "RJM", "REGISTER_PEDS_CUT_04_02 - end", 0 );
    return;
}

/* P_SET_PED_ALL_WEAPON_VISIBILITY */ void sub_88520(unknown uParam0, unknown uParam1)
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_SET_PED_ALL_WEAPON_VISIBILITY", 0 );
     /* WRITE_BOOL */ sub_53325( uParam1 );
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_SET_PED_ALL_WEAPON_VISIBILITY: WEAPONHAND_LEFT", 0 );
         /* WRITE_INT */ sub_24397( GET_WEAPON_FROM_HAND( uParam0, 1, 0 ) );
        if ((GET_WEAPON_FROM_HAND( uParam0, 1, 0 )) != 0)
        {
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( uParam0, 1, 0 ), uParam1 );
        }
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_SET_PED_ALL_WEAPON_VISIBILITY: WEAPONHAND_RIGHT", 0 );
         /* WRITE_INT */ sub_24397( GET_WEAPON_FROM_HAND( uParam0, 0, 0 ) );
        if ((GET_WEAPON_FROM_HAND( uParam0, 0, 0 )) != 0)
        {
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HAND( uParam0, 0, 0 ), uParam1 );
        }
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_SET_PED_ALL_WEAPON_VISIBILITY: WEAPONHOLSTER_PISTOL_LEFT", 0 );
         /* WRITE_INT */ sub_24397( GET_WEAPON_FROM_HOLSTER( uParam0, 1 ) );
        if ((GET_WEAPON_FROM_HOLSTER( uParam0, 1 )) != 0)
        {
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HOLSTER( uParam0, 1 ), uParam1 );
        }
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_SET_PED_ALL_WEAPON_VISIBILITY: WEAPONHOLSTER_PISTOL_RIGHT", 0 );
         /* WRITE_INT */ sub_24397( GET_WEAPON_FROM_HOLSTER( uParam0, 0 ) );
        if ((GET_WEAPON_FROM_HOLSTER( uParam0, 0 )) != 0)
        {
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HOLSTER( uParam0, 0 ), uParam1 );
        }
         /* WRITESCRIPTLOG */ sub_1129( "SBA", "P_SET_PED_ALL_WEAPON_VISIBILITY: WEAPONHOLSTER_RIFLE", 0 );
         /* WRITE_INT */ sub_24397( GET_WEAPON_FROM_HOLSTER( uParam0, 2 ) );
        if ((GET_WEAPON_FROM_HOLSTER( uParam0, 2 )) != 0)
        {
            SET_WEAPON_VISIBLE( GET_WEAPON_FROM_HOLSTER( uParam0, 2 ), uParam1 );
        }
    }
    return;
}

/* P_FADE_OUT_AND_WAIT */ void sub_89481(unknown uParam0)
{
    if ((IS_SCREEN_FADING_OUT() == 0) AND (IS_SCREEN_FADED_OUT() == 0))
    {
        DO_SCREEN_FADE_OUT( uParam0 );
        while (IS_SCREEN_FADED_OUT() == 0)
        {
            DISPLAYF( "[SP]### Waiting for screen to fade out... ###", 0 );
            WAIT( 0 );
        }
    }
    return;
}

/* CLEANUP_04_02_ASSETS */ void sub_89659()
{
     /* CLEANPED */ sub_15654( l_U285 );
     /* CLEANPED */ sub_15654( l_U299 );
     /* CLEANPED */ sub_15654( l_U313 );
     /* CLEANPED */ sub_15654( l_U327 );
     /* CLEANPEDARRAY */ sub_37123( ref l_U341 );
     /* CLEANVEHICLE */ sub_24567( l_U385 );
     /* CLEANVEHICLE */ sub_24567( l_U386 );
     /* CLEANVEHICLE */ sub_24567( l_U387 );
    return;
}

/* UNLOAD_04_02_ASSETS */ void sub_89779()
{
     /* UNLOADMODEL */ sub_71984( 2024698471 );
     /* UNLOADMODEL */ sub_71984( 557810561 );
     /* UNLOADMODEL */ sub_71984( -2001569790 );
     /* UNLOADMODEL */ sub_71984( g_U2251 );
    return;
}

/* UNLOAD_ALL_ASSETS_ALLEY */ void sub_90037()
{
     /* WRITESCRIPTLOG */ sub_1129( "SBA", "UNLOAD_ALL_ASSETS_ALLEY", "***" );
     /* UNLOALD_PRE_04_02_ASSETS_ALLEY */ sub_80276();
     /* P_UNLOAD_VIG08B_ASSETS */ sub_80407();
     /* UNLOADMODEL */ sub_71984( 557810561 );
     /* UNLOADMODEL */ sub_71984( 557810561 );
     /* UNLOADMODEL */ sub_71984( g_U722 );
     /* UNLOADANIMDICT */ sub_37587( "PAS_INT" );
     /* UNLOADANIMDICT */ sub_37587( "LEVEL_S_NYBAR_MID_01_BLENDOUT" );
    return;
}

/* P_UNLOAD_WEAPONS */ void sub_90217(unknown uParam0)
{
    switch (uParam0)
    {
        case 0:
        case 2:
        case 4:
        case 5: break;
    }
    return;
}

/* P_RESET_CHECKPOINT_THREAD */ void sub_90476(int iParam0)
{
    iParam0->_fU36 = 0;
    iParam0->_fU40 = 0;
    return;
}

