void main()
{
    l_U0 = 1;
    l_U1 = 144;
    l_U2 = -1;
    l_U3 = {64536, 64536, 64536};
    l_U6 = "PED_DEF";
    l_U48 = 1.00000000;
    l_U60 = 0;
    l_U101 = 0;
    l_U121 = 1;
    l_U122 = 1;
    l_U162 = 0;
    l_U174 = 0;
    l_U175 = 1;
    l_U176 = 0;
    l_U177 = 1.00000000;
    l_U178 = -5.00000000;
    l_U179 = 0;
    l_U180 = 0;
    l_U181 = 0;
    l_U185 = 42;
    l_U186 = 0;
    l_U187 = 0;
    l_U188 = 0;
    l_U189 = 0;
    l_U190 = 0;
    l_U191 = 90.00000000;
    l_U192 = {0.00000000, 0.00000000, 0.00000000};
    l_U195 = {0.00000000, 0.00000000, 0.00000000};
    l_U198 = 0;
    l_U199 = 0;
    l_U200 = 0;
    l_U201 = 0;
    l_U202 = 0;
    l_U203 = 0;
    l_U204 = nil;
    l_U205 = {0.00000000, 0.00000000, 0.00000000};
    l_U208 = 0;
    l_U209 = 0;
    l_U210 = 0;
    l_U262 = 0;
    l_U263 = 0;
    l_U264 = 1;
    l_U266 = 0;
    l_U267 = 0;
    l_U268 = 1500;
    l_U281 = 0;
    l_U283 = "BLEND_OUT_04_01_NYBAR_CAM";
    l_U284 = "LEVEL_S_NYBAR_04_01_BLENDOUT";
    l_U533 = 100;
    l_U534 = {0, 0, 0};
    StrCopy( ref l_U537, "DUMMY", 32 );
    l_U545 = 1;
    l_U550 = 0;
    l_U551 = 0;
    l_U552 = 0;
    l_U555 = 0;
    l_U609 = 1;
    l_U610 = 0;
    l_U611 = 1;
    l_U612 = 0;
    StrCopy( ref l_U614, "MID_00_NYBAR", 32 );
    l_U640 = 4;
    l_U890 = 1853260236;
    l_U905 = 1864850433;
    l_U992 = 0;
    l_U1213 = 0;
    l_U1214 = 0;
    l_U1739 = 0;
    l_U1742 = 0;
    l_U1743 = 0;
    l_U1744 = 0;
    l_U1754 = 0;
    l_U1755 = 0;
    l_U1996 = {4.05000000, -329.74000000, -4.01297000};
    l_U1999 = "04_01_nybar_concat";
    l_U2000 = 0;
    l_U2001 = 0;
    l_U2118 = 0;
     /* WRITESCRIPTLOG */ sub_745( "RJM", "Script s_nyc_bar.sc is starting...", 0 );
    DO_SCREEN_FADE_OUT( 0 );
    if (NOT (SCRIPT_VAR_EXISTS( "SP_SV_PASSOS_KILLS" )))
    {
        SCRIPT_VAR_ADD_INT( "SP_SV_PASSOS_KILLS" );
    }
    SCRIPT_VAR_SET_INT( "SP_SV_PASSOS_KILLS", 0 );
    l_U281 = 0;
     /* INITIALIZE_PLAYER_BY_DEBUG_CHECKPOINT */ sub_968();
    while (NOT IS_EXITFLAG_SET())
    {
        if (g_U2454[0])
        {
            SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        }
         /* P_HANDLE_MUSIC */ sub_23222();
         /* HANDLE_CHECKPOINTS */ sub_25517();
        if (l_U655 == 0)
        {
             /* HANDLE_EVENTS */ sub_39994();
        }
        WAIT( 0 );
    }
     /* WRITESCRIPTLOG */ sub_745( "RJM", "Script s_nyc_bar.sc main loop has finished", " " );
     /* CLEANUP_BAR */ sub_36959( 0 );
     /* UNLOAD_ASSETS_BAR */ sub_91241();
     /* P_UNLOAD_WEAPONS */ sub_94405( 2 );
    SET_SCRIPT_AS_NO_LONGER_NEEDED( "s_nyc_bar" );
    SET_EXITFLAG_RESPONSE();
     /* WRITESCRIPTLOG */ sub_745( "RJM", "Script s_nyc_bar.sc is terminating...", 0 );
    return;
}

/* WRITESCRIPTLOG */ void sub_745(unknown uParam0, unknown uParam1, string sParam2)
{
    unknown uVar5;

    if (IS_STRING_NULL( sParam2 ))
    {
        sParam2 = "###";
    }
    uVar5 = GET_REAL_GAME_TIMER();
    DISPLAYF( "[{0}][{1}]{3} {2} {3}", 4, 513, uVar5, 1537, uParam0, 1537, uParam1, 1537, sParam2 );
    return;
}

/* INITIALIZE_PLAYER_BY_DEBUG_CHECKPOINT */ void sub_968()
{
    unknown uVar2;

    if ((g_U723 == 2) || ((g_U723 == 1) || (g_U723 == 0)))
    {
         /* P_LOAD_WEAPONS */ sub_1048( 2, 1 );
        if ((NOT ( /* HAS_SAVEFILE_LOADED */ sub_1309( ref l_U768 ))) AND (NOT ( /* HAS_SAVEFILE_LOADED */ sub_1309( ref l_U804 ))))
        {
            if (IS_MAGDEMO())
            {
                REMOVE_ALL_PED_WEAPONS(  /* PLAYER_PED_ID */ sub_1456() );
            }
             /* F_GIVEPEDWEAPON */ sub_4042(  /* PLAYER_PED_ID */ sub_1456(),  /* GET_STARTING_WEAPON */ sub_6129( 0 ), 100, 0, 1 );
            if (IS_MAGDEMO())
            {
                 /* LOADWEAPON */ sub_1081( 1194438308, 1 );
                 /* F_GIVEPEDWEAPONTOHOLSTER */ sub_3247(  /* PLAYER_PED_ID */ sub_1456(), 1194438308, 0, 256, 1 );
                SET_PAYNEKILLER_AMT( 6 );
                SET_PED_HEALTH(  /* PLAYER_PED_ID */ sub_1456(), GET_PED_MAX_HEALTH(  /* PLAYER_PED_ID */ sub_1456() ), 0 );
                 /* TELEPORTPED */ sub_6292(  /* PLAYER_PED_ID */ sub_1456(), g_U2253[2]._fU0, g_U2253[2]._fU12 );
                FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_1456(), 1 );
                uVar2 = GET_INTERIOR_FROM_NAME( "GtaMlo_BarGrnd_MILO", 0 );
                SET_INTERIOR_ACTIVE( uVar2, 1, 0 );
                LOAD_SCENE_FOR_ROOM_BY_KEY( uVar2, GET_HASH_KEY( ref g_U2473 ) );
                SET_ROOM_FOR_PED_BY_KEY(  /* PLAYER_PED_ID */ sub_1456(), GET_HASH_KEY( ref g_U2473 ) );
                while (GET_NUMBER_OF_STREAMING_REQUESTS() > 0)
                {
                    WAIT( 0 );
                }
                FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_1456(), 0 );
            }
        }
        START_CONTEXT( "NYBAR_TO_END_OF_ALLEY" );
        if (g_U723 == 1)
        {
             /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_6597( ref l_U804, 1,  /* PLAYER_PED_ID */ sub_1456(), g_U2253[1]._fU0, g_U2253[1]._fU12, g_U2253[1]._fU16, g_U2253[1]._fU20, 0 );
        }
        else if (g_U723 == 2)
        {
             /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_6597( ref l_U768, 2,  /* PLAYER_PED_ID */ sub_1456(), g_U2253[2]._fU0, g_U2253[2]._fU12, g_U2253[2]._fU16, g_U2253[2]._fU20, 0 );
        }
        l_U609 = 1;
        l_U761 = 0;
    }
    else if (g_U723 == 3)
    {
         /* P_LOAD_WEAPONS */ sub_1048( 3, 1 );
        if (NOT ( /* HAS_SAVEFILE_LOADED */ sub_1309( ref l_U840 )))
        {
             /* F_GIVEPEDWEAPON */ sub_4042(  /* PLAYER_PED_ID */ sub_1456(),  /* GET_STARTING_WEAPON */ sub_6129( 0 ), 100, 0, 1 );
        }
         /* LOAD_ASSETS_BASEMENT */ sub_11343( 1 );
         /* LOADSEAMLESSCUTSCENE */ sub_12444( "MID_00_NYBAR", 0 );
         /* INIT_SCRIPT_VARIABLES */ sub_12784();
         /* INIT_SCRIPT_STRUCTS */ sub_13463();
         /* P_CLOSEDOOR */ sub_17001( ref g_U2048, 1 );
         /* P_SETDOORLOCKED */ sub_17258( ref g_U2048, 1 );
         /* SETUP_SCRIPTED_SPEECH */ sub_17414( "SNYCAUD" );
        l_U609 = 4;
         /* SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR */ sub_17584( 3 );
        g_U724 = 3;
         /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_6597( ref l_U840, 3,  /* PLAYER_PED_ID */ sub_1456(), g_U2253[3]._fU0, g_U2253[3]._fU12, g_U2253[3]._fU16, g_U2253[3]._fU20, 0 );
         /* CREATE_BASEMENT_GUYS */ sub_18010();
         /* CREATE_BASEMENT_PAINKILLERS */ sub_21607();
         /* LOCK_ALLEY_DOORS */ sub_22015();
        MARK_COVEREDGEMP3_FORCE_FACE_RIGHT_ON_ENTRY( "ny_bar", "GrabSpline01-1", 1 );
        l_U1966 = 1;
         /* CREATE_BAR_PASSOS */ sub_22168();
         /* TELEPORTPED */ sub_6292( g_U750, l_U1996, 0.00000000 );
        CLEAR_PED_TASKS_IMMEDIATELY( g_U750 );
        SET_ROOM_FOR_PED_BY_NAME( g_U750, ref g_U2489 );
         /* PED_CLEAR_ALL_ACTION_INTENTIONS */ sub_22845( g_U750 );
        ISEQ_REGISTER_ENTITY( 1432420195, "passos", g_U750, 0 );
        ISEQ_START( 1432420195 );
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U2253[3]._fU16, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U2253[3]._fU20, 1065353216, 0 );
        FREEZE_PED_POSITION(  /* PLAYER_PED_ID */ sub_1456(), 0 );
        DO_SCREEN_FADE_IN( 500 );
        l_U763 = 7;
        l_U761 = 19;
    }
    return;
}

/* P_LOAD_WEAPONS */ void sub_1048(unknown uParam0, unknown uParam1)
{
     /* LOADWEAPON */ sub_1081( -862236369, 1 );
    switch (uParam0)
    {
        case 0:
        case 2:
        case 4:
        case 5:
         /* LOADWEAPON */ sub_1081( 434544317, uParam1 );
        break;
        case 3: break;
    }
    return;
}

/* LOADWEAPON */ void sub_1081(unknown uParam0, boolean bParam1)
{
    REQUEST_WEAPON( uParam0 );
    if (bParam1)
    {
        while ((HAS_WEAPON_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load weapon: {!f1} : {1} ###", 2, 1, 199730165, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* HAS_SAVEFILE_LOADED */ int sub_1309(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_745( "rw", "HAS_SAVEFILE_LOADED()", 0 );
    if (IS_ARCADE_MODE_ACTIVE())
    {
        return 0;
    }
    if (HAS_LOAD_JUST_OCCURRED())
    {
        if ((GET_CHECKPOINT_SELECTED() == 1) || (GET_CHECKPOINT_SELECTED() == 0))
        {
            return 0;
        }
        else
        {
            l_U0 = 0;
            CHECKPOINT_STORAGE_LOAD( uParam0, l_U1 );
             /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_1550( uParam0,  /* PLAYER_PED_ID */ sub_1456() );
        }
        if (IS_IN_STORY_MODE())
        {
            START_CONTEXT( "LEVEL" );
        }
        return 1;
    }
    return 0;
}

/* PLAYER_PED_ID */ int sub_1456()
{
    if (DOES_MAIN_PLAYER_EXIST())
    {
        return GET_PLAYER_PED(  /* PLAYER_ID */ sub_1494() );
    }
    return 0;
}

/* PLAYER_ID */ void sub_1494()
{
    return GET_PLAYER_ID();
}

/* P_RESTORE_PLAYER_DATA_CHECKPOINT */ void sub_1550(int iParam0, unknown uParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    unknown uVar12;
    unknown uVar13;

     /* WRITESCRIPTLOG */ sub_745( "GA", "Restoring the player to the checkpoint - Start", 0 );
    if (l_U0)
    {
        INCREMENT_CHECKPOINT_ATTEMPT();
    }
    g_U648 = 0;
    if (iParam0->_fU0 == 0)
    {
        SCRIPT_ASSERT( "ERROR: Trying to restore a checkpoint that hasn't been saved!!!", 0 );
    }
     /* CLOSE_CURRENT_LEVEL_CONTEXT */ sub_1769( iParam0->_fU52 );
    if (SCRIPT_VAR_EXISTS( "SV_LOAD_CNT" ))
    {
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", (SCRIPT_VAR_GET_INT( "SV_LOAD_CNT" )) + 1 );
    }
    else
    {
        SCRIPT_VAR_ADD_INT( "SV_LOAD_CNT" );
        SCRIPT_VAR_SET_INT( "SV_LOAD_CNT", 1 );
    }
    CLEAR_KILL_STREAK_RECORDS();
    AUDIO_MUSIC_SUSPEND( 0 );
    DEACTIVATE_BULLET_TIME( 1, 0 );
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
    REMOVE_ALL_ENVIRONMENT_BLOOD();
    RESET_BLOOD_EFFECTS();
    REMOVE_ALL_GLINTS();
    RESET_DESTROYED_COVER();
    RESET_ALL_PTFX();
    uVar4 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    CLEAR_AREA( iParam0->_fU4, 10000.00000000, 1 );
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        SET_PED_COORDS( uParam1, iParam0->_fU4, 1 );
         /* LOADCOLLISIONFORPED */ sub_2933( uParam1 );
        SET_PED_HEADING( uParam1, iParam0->_fU16 );
    }
    CLEAR_AREA( uVar4, 3.00000000, 1 );
    LOAD_SCENE( iParam0->_fU4 );
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( 0.00000000, 1065353216, 0 );
    iParam0->_fU28 = GET_PED_MAX_HEALTH( uParam1 );
    SET_PED_HEALTH( uParam1, iParam0->_fU28, 0 );
    RESET_PED_GORE( uParam1 );
    RESET_PED_VISIBLE_DAMAGE( uParam1 );
    REMOVE_ALL_PED_WEAPONS( uParam1 );
    if (NOT (iParam0->_fU56 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_3247( uParam1, iParam0->_fU56, 0, iParam0->_fU76, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_3726( uVar7, iParam0 + 96, iParam0 + 100 );
    }
    if (NOT (iParam0->_fU60 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_3247( uParam1, iParam0->_fU60, 1, iParam0->_fU80, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_3726( uVar7, iParam0 + 104, iParam0 + 108 );
    }
    if (NOT (iParam0->_fU64 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPONTOHOLSTER */ sub_3247( uParam1, iParam0->_fU64, 2, iParam0->_fU84, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_3726( uVar7, iParam0 + 112, iParam0 + 116 );
    }
    if (NOT (iParam0->_fU68 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPON */ sub_4042( uParam1, iParam0->_fU68, iParam0->_fU88, 0, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_3726( uVar7, iParam0 + 120, iParam0 + 124 );
    }
    if (NOT (iParam0->_fU72 == -1569615261))
    {
        uVar7 =  /* F_GIVEPEDWEAPON */ sub_4042( uParam1, iParam0->_fU72, iParam0->_fU92, 1, 1 );
         /* P_RESTORE_WEAPON_ATTACHMENTS */ sub_3726( uVar7, iParam0 + 128, iParam0 + 132 );
    }
    if (l_U0 == 1)
    {
        if ((IS_PED_DEAD( uParam1 )) == 0)
        {
            if (iParam0->_fU68 != -1569615261)
            {
                uVar7 = GET_WEAPON_FROM_HAND( uParam1, 0, 0 );
                if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
                {
                    uVar8 = GET_WEAPON_TYPE( uVar7 );
                    if (( /* F_CAN_GIVE_AMMO_TO_REGULAR_WEAPON_TYPE */ sub_4614( uVar8 )) == 1)
                    {
                        iVar9 = GET_MAX_AMMO_IN_HAND_CLIP_MP( uParam1, 0 );
                        iVar10 = iParam0->_fU88;
                        if (iVar10 < iVar9)
                        {
                            iVar11 = iVar9 - iVar10;
                            ADD_AMMO_TO_PED( uParam1, uVar8, iVar11, 0 );
                            SET_WEAPON_AMMO_IN_CLIP( uVar7, iVar9 );
                        }
                    }
                }
            }
        }
    }
     /* START_NEW_LEVEL_CONTEXT */ sub_4816( iParam0->_fU52 );
    SET_ADRENALINE_AMT( iParam0->_fU32 );
    if (GET_ADRENALINE_AMT() < 0.20000000)
    {
        SET_ADRENALINE_AMT( 0.20000000 );
    }
    SET_PAYNEKILLER_AMT( iParam0->_fU36 );
    SET_PED_DUCKING(  /* PLAYER_PED_ID */ sub_1456(), 0 );
    GET_TIME_OF_DAY( ref uVar12, ref uVar13 );
    if (iParam0->_fU140 == 1)
    {
        FREEZE_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    else
    {
        RELEASE_TIME_OF_DAY();
        SET_TIME_OF_DAY( iParam0->_fU40, iParam0->_fU44 );
    }
    SET_PED_SWEAT( uParam1, iParam0->_fU136, -1.00000000 );
    RESTORE_PICKUPS();
    SET_GAMEPLAY_CAM_RELATIVE_HEADING( iParam0->_fU20, 1065353216, 0 );
    SET_GAMEPLAY_CAM_RELATIVE_PITCH( iParam0->_fU24, 1065353216, 0 );
    HANDLE_CHECKPOINT_RESTART();
    if (l_U0)
    {
        ADJUST_AMMO_ATTEMPTS();
        ADJUST_PAIN_KILLERS_ATTEMPTS();
    }
    l_U0 = 1;
    DISPLAY_HUD( 1 );
    if (IS_DEATH_PANEL_WIPE_ALLOWED())
    {
        if (IS_BULLET_CAMERA_WIPE_STOPPED())
        {
            RESUME_BULLET_CAMERA_WIPE_ON_FADEIN();
        }
    }
     /* WRITESCRIPTLOG */ sub_745( "GA", "Restoring the player to the checkpoint - End", 0 );
    return;
}

/* CLOSE_CURRENT_LEVEL_CONTEXT */ void sub_1769(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    iVar3 = 0;
    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        iVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_1831( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, iVar3, 513, uParam0 );
    END_CONTEXT( ref uVar4 );
    return;
}

/* GET_MISSION_INDEX_FROM_NAME */ int sub_1831(unknown uParam0)
{
    if (ARE_STRINGS_EQUAL( uParam0, "s_air" ))
    {
        return 21;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_beach" ))
    {
        return 22;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_boat" ))
    {
        return 10;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_booze" ))
    {
        return 0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_busdep" ))
    {
        return 17;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_cemet" ))
    {
        return 15;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_club" ))
    {
        return 5;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_clubride" ))
    {
        return 4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fashion" ))
    {
        return 3;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav0" ))
    {
        return 13;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav1" ))
    {
        return 14;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fav2" ))
    {
        return 16;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_fire" ))
    {
        return 12;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_hotel" ))
    {
        return 19;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_intro" ))
    {
        return 1;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_marina" ))
    {
        return 9;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc" ))
    {
        return 7;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_nyc2" ))
    {
        return 8;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_office" ))
    {
        return 11;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_pana" ))
    {
        return 18;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_police" ))
    {
        return 20;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "s_stad" ))
    {
        return 6;
    }
    else
    {
        PRINTSTRING( uParam0 );
        PRINTSTRING( uParam0 );
        PRINTSTRING( uParam0 );
    };;;;;;;;;;;;;;;;;;;;;;
    return 99;
}

/* LOADCOLLISIONFORPED */ void sub_2933(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        uVar3 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
        SET_LOAD_COLLISION_FOR_PED_FLAG( uParam0, 1 );
        SET_PED_COORDS_NO_OFFSET( uParam0, uVar3 );
        FREEZE_PED_POSITION( uParam0, 1 );
        REQUEST_COLLISION_AT_COORD( uVar3 );
        if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
        {
            FREEZE_PED_POSITION( uParam0, 0 );
        }
    }
    return;
}

/* F_GIVEPEDWEAPONTOHOLSTER */ void sub_3247(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's holster MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HOLSTER( uParam0, uParam1, uParam3, uParam2 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HOLSTER( uParam0, uParam2 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_3651( "[SP]### (F_GivePedWeaponToHolster) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* WRITE_STRING */ void sub_3651(unknown uParam0)
{
    PRINTSTRING( uParam0 );
    PRINTNL();
    return;
}

/* P_RESTORE_WEAPON_ATTACHMENTS */ void sub_3726(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        if (IS_BIT_SET( (uParam1^), I ))
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, IS_BIT_SET( (uParam2^), I ) );
        }
        else
        {
            ENABLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
            TOGGLE_WEAPON_ATTACHMENT( uParam0, I, 0 );
        }
    }
    return;
}

/* F_GIVEPEDWEAPON */ void sub_4042(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, int iParam4)
{
    unknown Result;

    if ((HAS_WEAPON_LOADED( uParam1 )) == 0)
    {
        SCRIPT_ASSERT( "The weapon model you are giving to the ped's hand MUST BE PRELOADED!!!!", 0 );
    }
    Result = nil;
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        Result = GIVE_WEAPON_TO_PED_HAND( uParam0, uParam1, uParam2, uParam3 );
        if (iParam4 == 1)
        {
            Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
            while (NOT (GET_DOES_WEAPON_EXIST( Result )))
            {
                WAIT( 0 );
                if ((IS_PED_DEAD( uParam0 )) == 0)
                {
                    Result = GET_WEAPON_FROM_HAND( uParam0, uParam3, 0 );
                    DISPLAYF( "[SP]### Waiting for a weapon to exist: {} ###", 1, 513, uParam1 );
                }
            }
        }
    }
    else
    {
         /* WRITE_STRING */ sub_3651( "[SP]### (F_GivePedWeapon) Error: Trying to give a dead ped a weapon. ###" );
    }
    return Result;
}

/* F_CAN_GIVE_AMMO_TO_REGULAR_WEAPON_TYPE */ int sub_4614(unknown uParam0)
{
    int iVar3;

    iVar3 = GET_WEAPONTYPE_AMMO( uParam0 );
    if ((iVar3 == -1383321053) || ((iVar3 == -1295933220) || ((iVar3 == 1138793073) || (iVar3 == -1088031219))))
    {
        return 1;
    }
    return 0;
}

/* START_NEW_LEVEL_CONTEXT */ void sub_4816(unknown uParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
    {
        uVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_1831( ref uVar20 );
    }
    STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, uParam0 );
     /* CLEAR_GG_CONTEXTS */ sub_4914( uVar3 );
    START_CONTEXT( ref uVar4 );
    return;
}

/* CLEAR_GG_CONTEXTS */ void sub_4914(int iParam0)
{
    if (iParam0 != 3)
    {
        END_CONTEXT( "S_FAS_GG_PT" );
    }
    if (iParam0 != 5)
    {
        END_CONTEXT( "S_CLB_GG_M3" );
        END_CONTEXT( "S_CLB_MS" );
    }
    if (iParam0 != 6)
    {
        END_CONTEXT( "S_STA_GG_M1" );
        END_CONTEXT( "S_STA_GG_M81" );
    }
    if (iParam0 != 7)
    {
        END_CONTEXT( "S_NY1_GG_19" );
    }
    if (iParam0 != 8)
    {
        END_CONTEXT( "S_NY2_GG_40" );
        END_CONTEXT( "S_NY2_GG_M5" );
    }
    if (iParam0 != 9)
    {
        END_CONTEXT( "S_MAR_GG_LM" );
        END_CONTEXT( "S_MAR_GG_9M" );
    }
    if (iParam0 != 11)
    {
        END_CONTEXT( "S_OFF_GG_MD" );
    }
    if (iParam0 != 14)
    {
        END_CONTEXT( "S_FV1_GG_SP" );
        END_CONTEXT( "S_FV1_GG_SA" );
    }
    if (iParam0 != 15)
    {
        END_CONTEXT( "S_NYC_GG_6M" );
        END_CONTEXT( "S_NYC_GG_A9" );
    }
    if (iParam0 != 16)
    {
        END_CONTEXT( "S_FV2_GG_D5" );
        END_CONTEXT( "S_FV2_GG_97" );
    }
    if (iParam0 != 17)
    {
        END_CONTEXT( "S_BUS_GG_M4" );
        END_CONTEXT( "S_BUS_GG_FN" );
    }
    if (iParam0 != 18)
    {
        END_CONTEXT( "S_PAN_GG_AK" );
        END_CONTEXT( "S_PAN_GG_SS" );
    }
    if (iParam0 != 19)
    {
        END_CONTEXT( "S_HOT_GG_G3" );
        END_CONTEXT( "S_HOT_GG_LA" );
    }
    if (iParam0 != 20)
    {
        END_CONTEXT( "S_POL_GG_G6" );
        END_CONTEXT( "S_POL_GG_RP" );
        END_CONTEXT( "S_POL_GG_MP" );
    }
    if (iParam0 != 21)
    {
        END_CONTEXT( "S_AIR_GG_RG" );
        END_CONTEXT( "S_AIR_GG_PD" );
    }
    return;
}

/* GET_STARTING_WEAPON */ int sub_6129(unknown uParam0)
{
    uParam0 = uParam0;
    return -862236369;
}

/* TELEPORTPED */ void sub_6292(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_COORDS( uParam0, uParam1, 1 );
        SET_PED_HEADING( uParam0, uParam4 );
    }
    return;
}

/* P_SAVE_PLAYER_DATA_CHECKPOINT */ void sub_6597(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, int iParam9)
{
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;

     /* WRITESCRIPTLOG */ sub_745( "GA", "Saving the player data for checkpoint - Start", 0 );
    if ((IS_PED_DEAD( uParam2 )) == 0)
    {
         /* WRITESCRIPTLOG */ sub_745( "SP", "Saving to scripted data...", 0 );
        RESET_CHECKPOINT_ATTEMPTS();
        if (SCRIPT_VAR_EXISTS( "SV_SAVE_CNT" ))
        {
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", (SCRIPT_VAR_GET_INT( "SV_SAVE_CNT" )) + 1 );
        }
        else
        {
            SCRIPT_VAR_ADD_INT( "SV_SAVE_CNT" );
            SCRIPT_VAR_SET_INT( "SV_SAVE_CNT", 1 );
        }
         /* START_NEW_LEVEL_CONTEXT */ sub_4816( iParam1 );
         /* CLOSE_OLD_LEVEL_CONTEXT */ sub_6888( iParam1 );
        iParam0->_fU52 = iParam1;
        iParam0->_fU4 = {uParam3};
        iParam0->_fU16 = uParam6;
        iParam0->_fU20 = uParam7;
        iParam0->_fU24 = uParam8;
        iParam0->_fU28 = GET_PED_HEALTH( uParam2 );
        iParam0->_fU56 = -1569615261;
        iParam0->_fU60 = -1569615261;
        iParam0->_fU64 = -1569615261;
        iParam0->_fU68 = -1569615261;
        iParam0->_fU72 = -1569615261;
        iParam0->_fU76 = 0;
        iParam0->_fU80 = 0;
        iParam0->_fU84 = 0;
        iParam0->_fU88 = 0;
        iParam0->_fU92 = 0;
        iVar12 = GET_WEAPON_FROM_HAND( uParam2, 0, 0 );
        iVar13 = GET_WEAPON_FROM_HAND( uParam2, 1, 0 );
        iVar14 = GET_WEAPON_FROM_HOLSTER( uParam2, 0 );
        iVar15 = GET_WEAPON_FROM_HOLSTER( uParam2, 1 );
        iVar16 = GET_WEAPON_FROM_HOLSTER( uParam2, 2 );
        if (GET_DOES_WEAPON_EXIST( iVar12 ))
        {
            iParam0->_fU68 = GET_WEAPON_TYPE( iVar12 );
            iParam0->_fU88 = (GET_WEAPON_AMMO( iVar12 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar12 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_7365( iVar12, iParam0 + 120, iParam0 + 124 );
        }
        if (GET_DOES_WEAPON_EXIST( iVar13 ))
        {
            iParam0->_fU72 = GET_WEAPON_TYPE( iVar13 );
            iParam0->_fU92 = (GET_WEAPON_AMMO( iVar13 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar13 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_7365( iVar13, iParam0 + 128, iParam0 + 132 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_7625( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar13 ) ))
                {
                    iParam0->_fU92 = GET_WEAPON_AMMO_IN_CLIP( iVar12 );
                }
            }
        }
        if ((iVar14 != iVar13) AND ((iVar14 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar14 ))))
        {
            iParam0->_fU56 = GET_WEAPON_TYPE( iVar14 );
            iParam0->_fU76 = (GET_WEAPON_AMMO( iVar14 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar14 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_7365( iVar14, iParam0 + 96, iParam0 + 100 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_7625( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_7625( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar14 ) ))
                {
                    iParam0->_fU76 = GET_WEAPON_AMMO_IN_CLIP( iVar14 );
                }
            }
        }
        if ((iVar15 != iVar13) AND ((iVar15 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar15 ))))
        {
            iParam0->_fU60 = GET_WEAPON_TYPE( iVar15 );
            iParam0->_fU80 = (GET_WEAPON_AMMO( iVar15 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar15 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_7365( iVar15, iParam0 + 104, iParam0 + 108 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_7625( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_7625( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_7625( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar15 ) ))
                {
                    iParam0->_fU80 = GET_WEAPON_AMMO_IN_CLIP( iVar15 );
                }
            }
        }
        if ((iVar16 != iVar13) AND ((iVar16 != iVar12) AND (GET_DOES_WEAPON_EXIST( iVar16 ))))
        {
            iParam0->_fU64 = GET_WEAPON_TYPE( iVar16 );
            iParam0->_fU84 = (GET_WEAPON_AMMO( iVar16 )) + (GET_WEAPON_AMMO_IN_CLIP( iVar16 ));
             /* P_SAVE_WEAPON_ATTACHMENTS */ sub_7365( iVar16, iParam0 + 112, iParam0 + 116 );
            if (GET_DOES_WEAPON_EXIST( iVar12 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_7625( GET_WEAPON_TYPE( iVar12 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar13 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_7625( GET_WEAPON_TYPE( iVar13 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar14 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_7625( GET_WEAPON_TYPE( iVar14 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
            if (GET_DOES_WEAPON_EXIST( iVar15 ))
            {
                if ( /* F_WEAPONS_SAME_AMMO */ sub_7625( GET_WEAPON_TYPE( iVar15 ), GET_WEAPON_TYPE( iVar16 ) ))
                {
                    iParam0->_fU84 = GET_WEAPON_AMMO_IN_CLIP( iVar16 );
                }
            }
        }
        SAVE_PICKUPS();
        iParam0->_fU32 = GET_ADRENALINE_AMT();
        iParam0->_fU36 = GET_PAYNEKILLER_AMT();
        GET_TIME_OF_DAY( iParam0 + 40, iParam0 + 44 );
        iParam0->_fU140 = IS_TIME_OF_DAY_FROZEN();
        iParam0->_fU136 = GET_PED_SWEAT( uParam2 );
        if (iParam9 == 1)
        {
            if (IS_MAGDEMO() == 0)
            {
                ENABLE_CHECKPOINT_ICON();
            }
        }
        if (iParam1 >= 0)
        {
             /* P_PRINT_CHECKPOINT_DATA */ sub_9205( iParam0 );
            iParam0->_fU0 = 1;
            if (IS_ARCADE_MODE_ACTIVE() == 0)
            {
                CHECKPOINT_STORAGE_SAVE( iParam0, l_U1, iParam0->_fU52 );
                REQUEST_SAVE();
            }
        }
        if (IS_ARCADE_MODE_ACTIVE())
        {
            UPDATE_ARCADE_CHECK_POINT( iParam0->_fU52 );
        }
    }
    else
    {
        SCRIPT_ASSERT( "Error: Player is dead while saving a checkpoint!!!", 0 );
    }
     /* WRITESCRIPTLOG */ sub_745( "GA", "Saving the player data for checkpoint - End", 0 );
    return;
}

/* CLOSE_OLD_LEVEL_CONTEXT */ void sub_6888(int iParam0)
{
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;
    unknown uVar20;
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;
    unknown uVar24;
    unknown uVar25;
    unknown uVar26;
    unknown uVar27;
    unknown uVar28;
    unknown uVar29;
    unknown uVar30;
    unknown uVar31;
    unknown uVar32;
    unknown uVar33;
    unknown uVar34;
    unknown uVar35;

    if (iParam0 >= 0)
    {
        if (GET_NAME_OF_CURRENT_LEVEL( 64, ref uVar20 ))
        {
            uVar3 =  /* GET_MISSION_INDEX_FROM_NAME */ sub_1831( ref uVar20 );
        }
        STRING_FORMAT( 64, ref uVar4, "M_{}_L_{}", 2, 513, uVar3, 513, iParam0 - 1 );
         /* WRITESCRIPTLOG */ sub_745( "TEH", "Ending context", 0 );
         /* WRITESCRIPTLOG */ sub_745( "TEH", "Ending context", 0 );
        END_CONTEXT( ref uVar4 );
    }
    return;
}

/* P_SAVE_WEAPON_ATTACHMENTS */ void sub_7365(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I < 26; I++ )
    {
        CLEAR_BIT( uParam1, I );
        CLEAR_BIT( uParam2, I );
        if (IS_WEAPON_ATTACHMENT_ENABLED( uParam0, I ))
        {
            SET_BIT( uParam1, I );
            if (IS_WEAPON_ATTACHMENT_TOGGLED( uParam0, I ))
            {
                SET_BIT( uParam2, I );
            }
        }
    }
    return;
}

/* F_WEAPONS_SAME_AMMO */ void sub_7625(int iParam0, int iParam1)
{
    int Result;

    Result = 0;
    if ((iParam0 == -612753081) || ((iParam0 == 68019059) || ((iParam0 == 456708483) || ((iParam0 == -862236369) || (iParam0 == 406496141)))))
    {
        if ((iParam1 == -612753081) || ((iParam1 == 68019059) || ((iParam1 == 456708483) || ((iParam1 == -862236369) || (iParam1 == 406496141)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 724901397) || ((iParam0 == 57534114) || ((iParam0 == 1308526797) || ((iParam0 == -1074756423) || (iParam0 == -1013714740)))))
    {
        if ((iParam1 == 724901397) || ((iParam1 == 57534114) || ((iParam1 == 1308526797) || ((iParam1 == -1074756423) || (iParam1 == -1013714740)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 514118749) || ((iParam0 == -184942895) || ((iParam0 == -168327769) || ((iParam0 == 1845102363) || (iParam0 == 434544317)))))
    {
        if ((iParam1 == 514118749) || ((iParam1 == -184942895) || ((iParam1 == -168327769) || ((iParam1 == 1845102363) || (iParam1 == 434544317)))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -110877124) || (iParam0 == 319712764))
    {
        if ((iParam1 == -110877124) || (iParam1 == 319712764))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == -1464892298) || ((iParam0 == 1194438308) || ((iParam0 == -1404433099) || ((iParam0 == 1478009203) || ((iParam0 == -691403429) || (iParam0 == 1964270085))))))
    {
        if ((iParam1 == -1464892298) || ((iParam1 == 1194438308) || ((iParam1 == -1404433099) || ((iParam1 == 1478009203) || ((iParam1 == -691403429) || (iParam1 == 1964270085))))))
        {
            Result = 1;
        }
    }
    else if ((iParam0 == 10648147) || (iParam0 == 1224272620))
    {
        if ((iParam1 == 10648147) || (iParam1 == 1224272620))
        {
            Result = 1;
        }
    };;;;;;
    return Result;
}

/* P_PRINT_CHECKPOINT_DATA */ void sub_9205(int iParam0)
{
     /* WRITE_STRING */ sub_3651( "CHECKPOINT DATA" );
    PRINTSTRING( "---Position: " );
     /* WRITE_VECTOR */ sub_9293( iParam0->_fU4 );
    PRINTSTRING( "---Heading: " );
     /* WRITE_FLOAT */ sub_9370( iParam0->_fU16 );
    PRINTSTRING( "---fRelativeGameCamHeading: " );
     /* WRITE_FLOAT */ sub_9370( iParam0->_fU20 );
    PRINTSTRING( "---fRelativeGameCamPitch: " );
     /* WRITE_FLOAT */ sub_9370( iParam0->_fU24 );
    PRINTSTRING( "---nHealth: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU28 );
    PRINTSTRING( "---wtRightHolster: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU56 );
    PRINTSTRING( "---wtLeftHolster: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU60 );
    PRINTSTRING( "---wtRifleHolster: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU64 );
    PRINTSTRING( "---wtRightHand: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU68 );
    PRINTSTRING( "---wtLeftHand: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU72 );
    PRINTSTRING( "---nWeaponRightHolsterAmmo: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU76 );
    PRINTSTRING( "---nWeaponLeftHolsterAmmo: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU80 );
    PRINTSTRING( "---nWeaponRifleHolsterAmmo: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU84 );
    PRINTSTRING( "---nWeaponRightHandAmmo: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU88 );
    PRINTSTRING( "---nWeaponLeftHandAmmo: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU92 );
    PRINTSTRING( "---fAdrenaline: " );
     /* WRITE_FLOAT */ sub_9370( iParam0->_fU32 );
    PRINTSTRING( "---nPayneKillers: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU36 );
    PRINTSTRING( "---nHour: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU40 );
    PRINTSTRING( "---nMinute: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU44 );
    PRINTSTRING( "---fSweatAmount: " );
     /* WRITE_FLOAT */ sub_9370( iParam0->_fU136 );
    PRINTSTRING( "---bTimeFrozen: " );
     /* WRITE_BOOL */ sub_10240( iParam0->_fU140 );
    PRINTSTRING( "---checkpointIndex: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU52 );
     /* WRITE_STRING */ sub_3651( "---nRightHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU96 );
     /* WRITE_STRING */ sub_3651( "---nRightHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU100 );
     /* WRITE_STRING */ sub_3651( "---nLeftHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU104 );
     /* WRITE_STRING */ sub_3651( "---nLeftHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU108 );
     /* WRITE_STRING */ sub_3651( "---nRifleHolsterAttachmentEnabled: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU112 );
     /* WRITE_STRING */ sub_3651( "---nRifleHolsterAttachmentToggled: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU116 );
     /* WRITE_STRING */ sub_3651( "---nRightHandAttachmentEnabled: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU120 );
     /* WRITE_STRING */ sub_3651( "---nRightHandAttachmentToggled: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU124 );
     /* WRITE_STRING */ sub_3651( "---nLeftHandAttachmentEnabled: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU128 );
     /* WRITE_STRING */ sub_3651( "---nLeftHandAttachmentToggled: " );
     /* WRITE_INT */ sub_9539( iParam0->_fU132 );
    PRINTSTRING( "[CHECKPOINT DATA SIZE]: " );
     /* WRITE_INT */ sub_9539( l_U1 );
    PRINTSTRING( "[CHECKPOINT DATA REF SIZE]: " );
     /* WRITE_INT */ sub_9539( 144 );
    return;
}

/* WRITE_VECTOR */ void sub_9293(unknown uParam0, unknown uParam1, unknown uParam2)
{
    PRINTVECTOR( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_FLOAT */ void sub_9370(unknown uParam0)
{
    PRINTFLOAT( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_INT */ void sub_9539(unknown uParam0)
{
    PRINTINT( uParam0 );
    PRINTNL();
    return;
}

/* WRITE_BOOL */ void sub_10240(boolean bParam0)
{
    if (bParam0)
    {
        PRINTSTRING( "TRUE" );
    }
    else
    {
        PRINTSTRING( "FALSE" );
    }
    PRINTNL();
    return;
}

/* LOAD_ASSETS_BASEMENT */ void sub_11343(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_745( "SP", "LOAD_ASSETS_BASEMENT", 0 );
     /* LOADMODEL */ sub_11417( g_U2249, uParam0 );
     /* LOADISEQ */ sub_11669( -1679907246, uParam0 );
     /* LOADISEQ */ sub_11669( 1432420195, uParam0 );
     /* LOADISEQ */ sub_11669( -1051877844, uParam0 );
     /* LOADISEQ */ sub_11669( 2013058283, uParam0 );
     /* LOADWEAPON */ sub_1081( -862236369, uParam0 );
     /* LOADWEAPON */ sub_1081( 406496141, uParam0 );
     /* LOADANIMDICT */ sub_12034( "PAS_INT", 0, uParam0 );
     /* LOADANIMDICT */ sub_12034( "FACE_PASNYB", 0, uParam0 );
     /* LOADACTIONTREE */ sub_12266( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act", uParam0 );
    return;
}

/* LOADMODEL */ void sub_11417(unknown uParam0, boolean bParam1)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
         /* WRITE_STRING */ sub_3651( "[SP]### ERROR! (LoadModel) Trying to load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    if (bParam1)
    {
        while ((HAS_MODEL_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADISEQ */ void sub_11669(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to load does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 0)
    {
        ISEQ_REQUEST( uParam0 );
        ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
        if (iParam1 == 1)
        {
            while ((ISEQ_QUERY_STATE( uParam0, 1 )) == 1)
            {
                DISPLAYF( "[SP]### Waiting for interactive sequence to be loaded: {0} {1} ###", 2, 1281, ref uVar4, 513, uParam0 );
                WAIT( 0 );
            }
        }
    }
    return;
}

/* LOADANIMDICT */ void sub_12034(unknown uParam0, unknown uParam1, int iParam2)
{
    REQUEST_ANIM_DICT( uParam0, uParam1 );
    "[doubled result, dropped if not asigned]";
    if (iParam2 == 1)
    {
        while ((HAS_ANIM_DICT_LOADED( uParam0, uParam1 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an animation dictionary to be loaded: {} ###", 1, 1537, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADACTIONTREE */ void sub_12266(unknown uParam0, int iParam1)
{
    ACTION_TREE_LOAD( uParam0 );
    if (iParam1 == 1)
    {
        while ((IS_ACTION_TREE_LOADED( uParam0 )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for an Action Tree to be loaded: {} ###", 1, 1537, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* LOADSEAMLESSCUTSCENE */ void sub_12444(unknown uParam0, int iParam1)
{
    if (HAS_CUTSCENE_LOADED())
    {
        if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
        {
            SCRIPT_ASSERT( "Another cutscene is already loaded.  You can only load one cutscene into memory.  Your current cutscene will not load into memory.", 0 );
        }
    }
    if (NOT (CUTSCENE_IS_LOADED( uParam0 )))
    {
        PRE_STREAM_SEAMLESS_CUTSCENE( uParam0 );
        if (iParam1 == 1)
        {
            while ((CUTSCENE_IS_LOADED( uParam0 )) == 0)
            {
                DISPLAYF( "[SP]### Waiting for seamless cutscene to load: {} ###", 1, 1537, uParam0 );
                WAIT( 0 );
            }
        }
    }
    return;
}

/* INIT_SCRIPT_VARIABLES */ void sub_12784()
{
     /* WRITESCRIPTLOG */ sub_745( "SP", "INIT_SCRIPT_VARIABLES", 0 );
    l_U2000 = 0;
    l_U1886 = 0;
    l_U1887 = 0;
     /* RESETTIMER */ sub_12875( ref l_U1810 );
    l_U2001 = 0;
    l_U295 = 1;
    l_U763 = 0;
    l_U766 = 0;
    l_U764 = 0;
    l_U762 = 0;
    l_U765 = 0;
    l_U767 = 0;
    l_U1213 = 0;
    l_U1214 = 0;
    l_U1726 = 0;
    l_U1728 = 0;
    l_U1727 = 0;
    l_U1966 = 0;
    l_U1729 = 0;
    l_U1730 = 0;
    l_U1731 = 0;
    l_U1732 = 0;
    l_U1733 = 0;
    l_U1734 = 1;
    l_U1735 = 0;
    g_U2200 = 0;
    l_U1740 = 0;
    l_U1741 = 0;
    l_U1736 = 0;
    l_U1737 = 0;
    l_U1738 = 0;
    l_U2042 = 0;
    l_U2043 = 0;
    l_U760 = 3;
     /* RESETTIMER */ sub_12875( ref l_U2033 );
     /* RESETTIMER */ sub_12875( ref l_U1774 );
     /* RESETTIMER */ sub_12875( ref l_U1801 );
     /* RESETTIMER */ sub_12875( ref l_U1837 );
     /* DISABLETIMER */ sub_13219( ref l_U1765 );
    l_U1742 = 0;
    l_U1743 = 0;
    l_U1744 = 0;
    l_U1754 = 0;
     /* CREATETIMER */ sub_13297( ref l_U1745, 1000, 1, 0 );
    l_U1755 = 0;
    l_U992 = 0;
    return;
}

/* RESETTIMER */ void sub_12875(int iParam0)
{
    if (iParam0->_fU28)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    return;
}

/* DISABLETIMER */ void sub_13219(int iParam0)
{
    iParam0->_fU20 = 0;
    iParam0->_fU16 = 0;
    return;
}

/* CREATETIMER */ void sub_13297(int iParam0, unknown uParam1, boolean bParam2, int iParam3)
{
    if (bParam2)
    {
        iParam0->_fU0 = TIMERA();
    }
    else
    {
        iParam0->_fU0 = TIMERB();
    }
    if (iParam3 == 1)
    {
        iParam0->_fU0 = TIMERSYSTEM();
    }
    iParam0->_fU4 = iParam0->_fU0;
    iParam0->_fU12 = uParam1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = bParam2;
    iParam0->_fU32 = iParam3;
    iParam0->_fU8 = 0;
    return;
}

/* INIT_SCRIPT_STRUCTS */ void sub_13463()
{
     /* WRITESCRIPTLOG */ sub_745( "SBA", "INIT_SCRIPT_STRUCTS", "***" );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U1185, g_U725[0]._fU0, g_U725[0]._fU12, -1756913695, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U876, -4.59000000, -312.60000000, -0.30000000, 65446, 553761934, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U891, -4.74000000, -314.49800000, -0.30000000, 65446, 2039064213, 4, 1, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U1171, -1.80600000, -303.75300000, -0.26800000, -150.00000000, 417317379, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U1157, -0.39216000, -302.96990000, -0.01645000, 135, 1215716597, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U1143, 0, 0, 0, 0, 447804312, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U1129, -2.82148000, -301.06340000, -1.11659000, 135, 447804312, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U906, -0.68100000, -311.43600000, -0.28000000, 0.00000000, 725084468, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U926[0], 0.13300000, -315.58300000, 0.21900000, 0.00000000, 786146427, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U926[1], 0.17600000, -321.73000000, 0.21900000, 0.00000000, 1497998925, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U926[2], 1.81600000, -321.50000000, 0.21900000, 0.00000000, 1339582665, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U976[0], -2.34479600, -332.36990000, 3.47283200, 0.00000000, -1645365161, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U1043, 2.82000000, -308.05000000, -4.04000000, -180.00000000, -119177685, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U999[0], 1.46000000, -311.08000000, -4.20000000, 65430, -797706412, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U999[1], 5.18000000, -312.18000000, -4.20000000, 99, 972829434, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U999[2], -2.82252000, -306.19610000, -4.20013500, 0.00000000, -863385930, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U1057[0], -2.02000000, -314.44000000, -4.16000000, 65446, 100979920, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U1057[1], -2.35000000, -316.30000000, -4.16000000, 65446, -1636418606, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U1093[0], -2.71604300, -322.47160000, -4.17503000, 85.00000000, -486921312, 7, 3, 2, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U1093[1], -2.91374400, -323.54110000, -4.17987200, 60, -2038190238, 7, 3, 2, 0, 0 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1301, "MAX_IN_LEFT_COVER", 2.28000000, -314.11000000, -0.68000000, 2.00000000, 2.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1469, "TRIG_BAR_FRONTDOOR", -0.16000000, -299.44000000, -0.25000000, 3.50000000, 2.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1511, "TRIG_VIGNETTE_03", 0.59000000, -334.74000000, -3.00000000, 5.50000000, 3.50000000, 5.25000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1532, "TRIG_INTERRUPT_VIG_03", 3.99000000, -325.29000000, -5.47000000, 8.47000000, 5.00000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1553, "TRIG_SAVE_PASSOS", 3.99000000, -328.45000000, -5.47000000, 5.00000000, 5.00000000, 5.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1490, "TRIG_BASEMENT", -0.75000000, -331.30000000, 0.18000000, 3.50000000, 3.50000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1595, "TRIG_KITCHEN_PASSTHRU", -1.93000000, -315.50000000, -4.20000000, 2.50000000, 3.60000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1574, "TRIG_BALCONY_TO_FLOOR", 1.11000000, -325.51000000, 0.18000000, 12.00000000, 5.00000000, 2.47000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1217, "PASSOS_BASEMENT_WARNING", -3.97000000, -322.56000000, -4.20000000, 6.58000000, 11.55000000, 3.55000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1238, "PASSOS_MID_00B_DEATH", -4.26000000, -326.23000000, -4.20000000, 5.78000000, 4.19000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1259, "PASSOS_MID_00B_STAIRS_DEATH1", -0.75000000, -332.95000000, 0.18000000, 3.50000000, 7.00000000, 3.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1280, "PASSOS_MID_00B_STAIRS_DEATH2", 1.65000000, -335.28000000, -3.00000000, 8.00000000, 2.50000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1364, "PASSOS_TO_POOL_HALLWAY", -0.73000000, -326.93000000, 0.18000000, 8.00000000, 6.00000000, 2.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1322, "PASSOS_TO_BASEMENT1", 1.65000000, -335.28000000, -3.00000000, 8.00000000, 2.50000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1343, "PASSOS_TO_BASEMENT2", 4.16000000, -332.41000000, -5.18000000, 4.00000000, 9.00000000, 6.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1385, "IN_KITCHEN_HALF", -3.92000000, -315.96000000, -4.20000000, 6.00000000, 25.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1406, "IN_BAR_HALF", 3.96000000, -315.96000000, -4.20000000, 8.50000000, 25.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1427, "MAX_BLOCK_PASSOS_TO_FREEZER", -0.54000000, -305.14000000, -4.30000000, 2.00000000, 3.00000000, 3.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1448, "MAX_BLOCK_PASSOS_TO_KITCHEN", -3.84000000, -310.03000000, -4.30000000, 5.00000000, 3.00000000, 3.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1616, "TRIG_EXIT_MIDSCENE", -8.48000000, -326.31000000, -4.20000000, 3.00000000, 4.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1637, "TRIG_MAX_FORCE_WALK", -3.98000000, -326.28000000, -4.20000000, 6.50000000, 4.25000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1658, "MAX_ROTATE_SEE_PASSOS1", 1.08000000, -331.17000000, 3.47000000, 12.00000000, 9.00000000, 3.02000000, 0.00000000, 0.00000000, -180.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1679, "MAX_ROTATE_SEE_PASSOS2", 4.01000000, -327.69000000, 0.81000000, 6.00000000, 2.00000000, 5.00000000, 0.00000000, 0.00000000, 180.00000000, 1 );
     /* P_CREATETRIGGERBOX */ sub_14575( ref l_U1700, "TASK_KITCHEN_WAVE1", 3.96000000, -316.21000000, -4.20000000, 8.50000000, 12.00000000, 4.00000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_16603( ref l_U1724, "TETHER_BALCONY_FLOOR", 1.08000000, -321.79000000, 0.05000000, 11.00000000, 14.00000000, 3.02000000, 0.00000000, 0.00000000, -180.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_16603( ref l_U1725, "TETHER_POOL_AREA", 0.15000000, -323.23000000, 0.05000000, 14.00000000, 11.00000000, 3.00000000, 0.00000000, 0.00000000, 180.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_16603( ref l_U1721, "TETHER_POOLHALL_BALCONY", 0.98000000, -328.20000000, 1.95000000, 12.00000000, 4.00000000, 3.06000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_16603( ref l_U1722, "TETH_BAR_KITCHEN", -3.97000000, -314.90000000, -4.30000000, 6.42000000, 9.50000000, 3.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
     /* P_CREATETETHERBOX */ sub_16603( ref l_U1723, "TETH_BAR_BASEMENT", 3.97000000, -312.64000000, -4.30000000, 8.54000000, 17.00000000, 3.50000000, 0.00000000, 0.00000000, 0.00000000, 1 );
    return;
}

/* P_CREATEPEDSTRUCTWITHNAME */ void sub_13569(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    iParam0->_fU0 = {uParam1};
    iParam0->_fU20 = uParam5;
    iParam0->_fU12 = uParam4;
    iParam0->_fU24 = uParam6;
    iParam0->_fU28 = uParam7;
    iParam0->_fU36 = uParam8;
    iParam0->_fU32 = uParam9;
    iParam0->_fU44 = 0;
    iParam0->_fU16 = GET_SCENE_PED_MODEL( uParam5 );
    iParam0->_fU48 = uParam10;
    return;
}

/* P_CREATETRIGGERBOX */ void sub_14575(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    StrCopy( ref iParam0->_fU0, uParam1, 64 );
    iParam0->_fU64 = 0;
    iParam0->_fU68 = 0;
    iParam0->_fU72 = {uParam2};
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 1, iParam0 + 0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* P_CREATETETHERBOX */ void sub_16603(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11)
{
    iParam0->_fU0 = uParam1;
    GAMEPLAY_HELPER_BOX_ANGLED_CREATE( 2, iParam0->_fU0, uParam2, uParam5, uParam6, uParam7, uParam8, uParam11 );
    return;
}

/* P_CLOSEDOOR */ void sub_17001(int iParam0, int iParam1)
{
    if (( /* F_DOESDOOREXIST */ sub_17027( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_17111( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, 0.00000000 );
    }
    return;
}

/* F_DOESDOOREXIST */ int sub_17027(int iParam0)
{
    int iVar3;

    iVar3 = DOES_OBJECT_OF_TYPE_EXIST_AT_COORDS( iParam0->_fU4, 1.00000000, iParam0->_fU0 );
    if (iVar3 == 1)
    {
        return 1;
    }
    return 0;
}

/* P_PRINTDOORNOTEXIST */ void sub_17111(unknown uParam0)
{
    (uParam0^) = {(uParam0^)};
    return;
}

/* P_SETDOORLOCKED */ void sub_17258(int iParam0, int iParam1)
{
    int iVar4;
    float fVar5;

    if (( /* F_DOESDOOREXIST */ sub_17027( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_17111( iParam0 );
    }
    if (iParam1 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, 0.00000000 );
    }
    else
    {
        iVar4 = 0;
        fVar5 = 0.00000000;
        GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref iVar4, ref fVar5 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar5 );
    }
    return;
}

/* SETUP_SCRIPTED_SPEECH */ void sub_17414(unknown uParam0)
{
    StrCopy( ref g_U157._fU0, uParam0, 16 );
     /* CLEARPEDCONVERSATIONDATA */ sub_17458();
    return;
}

/* CLEARPEDCONVERSATIONDATA */ void sub_17458()
{
    int I;

    for ( I = 0; I <= 8; I++ )
    {
        g_U157._fU16[I]._fU0 = nil;
        g_U157._fU16[I]._fU4 = 0;
        g_U157._fU92[I] = 0;
    }
    return;
}

/* SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR */ void sub_17584(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_745( "BSW", "SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR start...", 0 );
    PRINTSTRING( "Setting weather for checkpoint: " );
    PRINTINT( uParam0 );
    PRINTNL();
    switch (uParam0)
    {
        case 0:
        case 2:
        case 3:
        case 26:
        SET_TIME_OF_DAY( 12, 0 );
        FREEZE_TIME_OF_DAY( 12, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
        break;
        case 4:
        case 5:
        case 21:
        SET_TIME_OF_DAY( 12, 0 );
        FREEZE_TIME_OF_DAY( 12, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "snow_light" );
        break;
        default:
        SET_TIME_OF_DAY( 12, 0 );
        FREEZE_TIME_OF_DAY( 12, 0 );
        SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
        break;
    }
    return;
}

/* CREATE_BASEMENT_GUYS */ void sub_18010()
{
    int I;

     /* WRITESCRIPTLOG */ sub_745( "SBA", "CREATE_BASEMENT_GUYS", "***" );
     /* CLEANPEDARRAY */ sub_18087( ref l_U1039 );
     /* P_SETUP_AI_GROUP */ sub_18251( ref l_U993, 1.00000000, 0 );
    for ( I = 0; I <= (l_U999 - 1); I++ )
    {
         /* CLEANPED */ sub_18137( l_U1039[I] );
        l_U1039[I] =  /* CREATEPED */ sub_18676( ref l_U999[I] );
        if ( /* IS_PED_VALID */ sub_19402( l_U1039[I] ))
        {
            SET_PED_AI_TEMPLATE( l_U1039[I], "AIT_NORMAL" );
            SET_PED_ALLOWED_TO_SURRENDER( l_U1039[I], 0 );
             /* P_QUICK_ADD_PED_TO_GROUP */ sub_19529( l_U1039[I], ref l_U993 );
             /* F_GIVEPEDWEAPON */ sub_4042( l_U1039[I], -862236369, 25000, 0, 0 );
             /* SET_COVER_ENTRY_ANIMS_FOR_PED */ sub_19943( ref l_U1039[I] );
        }
        WAIT( 1 );
    }
     /* PED_SET_ALERTNESS */ sub_20580( ref l_U1039[0], 2 );
     /* PED_SET_ALERTNESS */ sub_20580( ref l_U1039[1], 2 );
     /* PED_ARRAY_SET_ROOM_BY_NAME */ sub_20666( ref l_U1039, g_U2489 );
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_20864( ref l_U1039, "piBasementFirstGroup" );
     /* PED_SET_ROOM_BY_NAME */ sub_20751( ref l_U1039[2], g_U2497 );
     /* PED_ARRAY_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_21017( ref l_U1039, 1 );
     /* CLEANPED */ sub_18137( l_U1056 );
     /* PED_INITIALIZE */ sub_21250( ref l_U1043, ref l_U1056, -862236369, "AIT_NORMAL", 0, 25000, 2, 0, 25000 );
    if ( /* IS_PED_VALID */ sub_19402( l_U1056 ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1056, 1 );
        SET_ROOM_FOR_PED_BY_NAME( l_U1056, ref g_U2489 );
        SET_PED_NAME_DEBUG( l_U1056, "piBasementCaller" );
         /* SET_COVER_ENTRY_ANIMS_FOR_PED */ sub_19943( ref l_U1056 );
    }
    return;
}

/* CLEANPEDARRAY */ void sub_18087(unknown uParam0)
{
    int I;

    I = 0;
    for ( I = 0; I < (uParam0^); I++ )
    {
         /* CLEANPED */ sub_18137( (uParam0^)[I] );
    }
    return;
}

/* CLEANPED */ void sub_18137(unknown uParam0)
{
    if (DOES_PED_EXIST( uParam0 ))
    {
        if ((NOT (IS_PED_DEAD( uParam0 ))) || (IS_PED_DEAD( uParam0 )))
        {
            REMOVE_ALL_PED_WEAPONS( uParam0 );
            DELETE_PED( ref uParam0 );
        }
    }
    return;
}

/* P_SETUP_AI_GROUP */ void sub_18251(int iParam0, unknown uParam1, boolean bParam2)
{
    iParam0->_fU4 = uParam1;
    iParam0->_fU0 = CREATE_GROUP( 3, 1 );
    if (bParam2)
    {
        PRINTSTRING( "[MSWW]### P_SETUP_AI_GROUP TOLD TO WAIT FOR GROUP TO EXIST ###" );
        PRINTNL();
        while (NOT (DOES_GROUP_EXIST( iParam0->_fU0 )))
        {
            WAIT( 0 );
            PRINTSTRING( "[MSWW]### GROUP ###" );
            PRINTNL();
        }
        PRINTSTRING( "[MSWW]### P_SETUP_AI_GROUP created group with ID: " );
        PRINTINT( iParam0->_fU0 );
        PRINTNL();
    }
    SET_GROUP_RATIO_FIRING_AT_VISIBLE( iParam0->_fU0, iParam0->_fU4 );
    SET_GROUP_RATIO_FIRING_AT_INVISIBLE( iParam0->_fU0, iParam0->_fU4 );
    if (iParam0->_fU8)
    {
        SET_GROUP_FORMATION( iParam0->_fU0, iParam0->_fU12 );
        SET_GROUP_FORMATION_SPACING( iParam0->_fU0, iParam0->_fU16 );
        SET_GROUP_FORMATION_MAX_MOVE_SPEED( iParam0->_fU0, iParam0->_fU20 );
    }
    return;
}

/* CREATEPED */ void sub_18676(int iParam0)
{
    int iVar3;

    iVar3 = 0;
    if (iParam0->_fU16 == 0)
    {
        if (iParam0->_fU20 != 0)
        {
            iVar3 = GET_SCENE_PED_MODEL( iParam0->_fU20 );
        }
    }
    else
    {
        iVar3 = iParam0->_fU16;
    }
    if ((HAS_MODEL_LOADED( iVar3 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The model you are trying to create a ped with MUST BE PRELOADED!!!!", 0 );
         /* LOADMODEL */ sub_11417( iParam0->_fU16, 1 );
    }
    iParam0->_fU40 = CREATE_PED( iParam0->_fU24, iParam0->_fU16, iParam0->_fU0, iParam0->_fU12, 1, iParam0->_fU48 );
    if (((IS_PED_DEAD( iParam0->_fU40 )) == 0) AND ((DOES_PED_EXIST( iParam0->_fU40 )) == 1))
    {
        if (iParam0->_fU20 != 0)
        {
            SET_PERSISTENT_PED_VARIATION_ENUM( iParam0->_fU40, iParam0->_fU20 );
        }
        SET_PED_RELATIONSHIP_GROUP( iParam0->_fU40, iParam0->_fU28 );
        SET_PED_RELATIONSHIP( iParam0->_fU40, iParam0->_fU36, iParam0->_fU32 );
        SET_LOAD_COLLISION_FOR_PED_FLAG( iParam0->_fU40, 1 );
        SET_PED_COORDS_NO_OFFSET( iParam0->_fU40, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( iParam0->_fU40 ) );
        SET_PED_HEADING( iParam0->_fU40, iParam0->_fU12 );
        iParam0->_fU44 = 1;
    }
    else
    {
        SCRIPT_ASSERT( "Error: The ped you created doesn't exist or is dead!", 0 );
    }
     /* SETPEDDEFAULTSTATS */ sub_19167( iParam0->_fU40 );
     /* SETPEDDEFAULTTEMPLATE */ sub_19268( iParam0->_fU40 );
    return iParam0->_fU40;
}

/* SETPEDDEFAULTSTATS */ void sub_19167(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_HEALTH( uParam0, 200, 0 );
        SET_PED_ACCURACY( uParam0, -729479261 );
    }
    return;
}

/* SETPEDDEFAULTTEMPLATE */ void sub_19268(unknown uParam0)
{
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        SET_PED_AI_TEMPLATE( uParam0, "AIT_DEFAULT_GENERIC" );
    }
    return;
}

/* IS_PED_VALID */ int sub_19402(unknown uParam0)
{
    if ((NOT (IS_PED_DEAD( uParam0 ))) AND (DOES_PED_EXIST( uParam0 )))
    {
        return 1;
    }
    return 0;
}

/* P_QUICK_ADD_PED_TO_GROUP */ void sub_19529(unknown uParam0, int iParam1)
{
    int iVar4;
    unknown uVar5;

    if ((DOES_GROUP_EXIST( iParam1->_fU0 )) == 0)
    {
         /* WRITE_STRING */ sub_3651( "[SP]### Warning!!! Group does not exist. Creating new group specified attributes. ###" );
        if (iParam1->_fU4 > 0)
        {
             /* P_SETUP_AI_GROUP */ sub_18251( iParam1, iParam1->_fU4, 0 );
        }
        else
        {
             /* P_SETUP_AI_GROUP */ sub_18251( iParam1, 1056964608, 0 );
        }
    }
    else
    {
        PRINTSTRING( "[MSWW]### P_QUICK_ADD_PED_TO_GROUP adding ped to group with ID: " );
        PRINTINT( iParam1->_fU0 );
        PRINTNL();
    }
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        GET_GROUP_SIZE( iParam1->_fU0, ref iVar4, ref uVar5 );
        if (iVar4 == 0)
        {
            SET_PED_AS_GROUP_LEADER( uParam0, iParam1->_fU0 );
        }
        else
        {
            SET_PED_AS_GROUP_MEMBER( uParam0, iParam1->_fU0 );
        }
        SET_PED_NEVER_LEAVES_GROUP( uParam0, 1 );
    }
    return;
}

/* SET_COVER_ENTRY_ANIMS_FOR_PED */ void sub_19943(unknown uParam0)
{
    if ( /* IS_PED_VALID */ sub_19402( (uParam0^) ))
    {
        ADD_PED_USE_COVER_ENTRY( (uParam0^), "PLGE_RIFLE_COVERCORNERLOW_RIGHT_START_DEFAULT_01" );
        ADD_PED_USE_COVER_ENTRY( (uParam0^), "PLGE_PSTL_COVERCORNERLOW_RIGHT_START_DEFAULT_01" );
        ADD_PED_USE_COVER_ENTRY( (uParam0^), "PLGE_RIFLE_COVERCORNERLOW_LEFT_START_DEFAULT_01" );
        ADD_PED_USE_COVER_ENTRY( (uParam0^), "PLGE_PSTL_COVERCORNERLOW_LEFT_START_DEFAULT_01" );
        ADD_PED_USE_COVER_ENTRY( (uParam0^), "PLGE_RIFLE_COVERCORNERHIGH_RIGHT_START_DEFAULT_01" );
        ADD_PED_USE_COVER_ENTRY( (uParam0^), "PLGE_PSTL_COVERCORNERHIGH_RIGHT_START_DEFAULT_01" );
        ADD_PED_USE_COVER_ENTRY( (uParam0^), "PLGE_RIFLE_COVERCORNERHIGH_LEFT_START_DEFAULT_01" );
        ADD_PED_USE_COVER_ENTRY( (uParam0^), "PLGE_PSTL_COVERCORNERHIGH_LEFT_START_DEFAULT_01" );
        ADD_PED_USE_COVER_ENTRY( (uParam0^), "Edge rifle popback" );
        ADD_PED_USE_COVER_ENTRY( (uParam0^), "Edge pistol popback" );
    }
    return;
}

/* PED_SET_ALERTNESS */ void sub_20580(unknown uParam0, unknown uParam1)
{
    if ( /* IS_PED_VALID */ sub_19402( (uParam0^) ))
    {
        SET_PED_ALERTNESS( (uParam0^), uParam1 );
    }
    return;
}

/* PED_ARRAY_SET_ROOM_BY_NAME */ void sub_20666(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ( /* IS_PED_VALID */ sub_19402( (uParam0^)[I] ))
        {
             /* PED_SET_ROOM_BY_NAME */ sub_20751( ref (uParam0^)[I], uParam1 );
        }
    }
    return;
}

/* PED_SET_ROOM_BY_NAME */ void sub_20751(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    if ( /* IS_PED_VALID */ sub_19402( (uParam0^) ))
    {
        SET_ROOM_FOR_PED_BY_NAME( (uParam0^), ref uParam1 );
    }
    return;
}

/* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ void sub_20864(unknown uParam0, unknown uParam1)
{
    int I;
    char[32] cVar5;

    for ( I = 0; I < (uParam0^); I++ )
    {
        if (DOES_PED_EXIST( (uParam0^)[I] ))
        {
            StrCopy( ref cVar5, uParam1, 32 );
            ConcatString(ref cVar5, " ", 32);
            ConcatString(ref cVar5, I, 32);
            SET_PED_NAME_DEBUG( (uParam0^)[I], ref cVar5 );
        }
    }
    return;
}

/* PED_ARRAY_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ void sub_21017(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_21100( ref (uParam0^)[I], uParam1 );
    }
    return;
}

/* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ void sub_21100(unknown uParam0, unknown uParam1)
{
    if ( /* IS_PED_VALID */ sub_19402( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), uParam1 );
    }
    return;
}

/* PED_INITIALIZE */ void sub_21250(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, int iParam7, unknown uParam8)
{
    unknown uVar11;

     /* CLEANPED */ sub_18137( (uParam1^) );
    (uParam1^) =  /* CREATEPED */ sub_18676( uParam0 );
    if ( /* IS_PED_VALID */ sub_19402( (uParam1^) ))
    {
        uVar11 =  /* F_GIVEPEDWEAPON */ sub_4042( (uParam1^), uParam2, uParam5, 0, 1 );
        if (iParam7 != 0)
        {
             /* F_GIVEPEDWEAPONTOHOLSTER */ sub_3247( (uParam1^), iParam7, 0, uParam8, 0 );
        }
        SET_PED_AI_TEMPLATE( (uParam1^), uParam3 );
        SET_PED_ALERTNESS( (uParam1^), uParam6 );
        switch (uParam4)
        {
            case 0: break;
            case 1:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 13, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 13, 1 );
            break;
            case 2:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 14, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 14, 1 );
            break;
            case 3:
            ENABLE_WEAPON_ATTACHMENT( uVar11, 12, 1 );
            TOGGLE_WEAPON_ATTACHMENT( uVar11, 12, 1 );
            break;
        }
    }
    return;
}

/* CREATE_BASEMENT_PAINKILLERS */ void sub_21607()
{
     /* WRITESCRIPTLOG */ sub_745( "SBA", "CREATE_BASEMENT_PAINKILLERS", "***" );
    l_U1207[0] =  /* CREATEPLACEMENT */ sub_21733( -4072149, 0.73000000, -312.74000000, -3.11000000, 0, 0, 0.00000000, 0, 0, 0, 1119092736 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1207[0], ref g_U2489 );
    l_U1207[1] =  /* CREATEPLACEMENT */ sub_21733( -4072149, 1.17000000, -312.83000000, -3.11000000, 0.00000000, 0.00000000, 0.00000000, 0, 0, 0, 1119092736 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1207[1], ref g_U2489 );
    return;
}

/* CREATEPLACEMENT */ void sub_21733(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, int iParam8, unknown uParam9, unknown uParam10)
{
    unknown Result;

    Result = CREATE_PLACEMENT_ROTATE( uParam0, uParam1, uParam4, uParam7, 0, uParam9, uParam10 );
    if (iParam8 == 1)
    {
        while ((DOES_PLACEMENT_EXIST( Result )) == 0)
        {
            DISPLAYF( "[SP]### Waiting for a placement to exist: {} ###", 1, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return Result;
}

/* LOCK_ALLEY_DOORS */ void sub_22015()
{
     /* WRITESCRIPTLOG */ sub_745( "SBA", "LOCK_ALLEY_DOORS", "***" );
     /* P_CLOSEDOOR */ sub_17001( ref g_U2055, 1 );
     /* P_SETDOORLOCKED */ sub_17258( ref g_U2055, 1 );
     /* P_CLOSEDOOR */ sub_17001( ref g_U2062, 1 );
     /* P_SETDOORLOCKED */ sub_17258( ref g_U2062, 1 );
    return;
}

/* CREATE_BAR_PASSOS */ void sub_22168()
{
     /* WRITESCRIPTLOG */ sub_745( "SBA", "CREATE_BAR_PASSOS", "***" );
     /* CLEANPED */ sub_18137( g_U750 );
    g_U750 =  /* CREATEPED */ sub_18676( ref l_U1185 );
    if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
    {
         /* F_GIVEPEDWEAPON */ sub_4042( g_U750, 406496141, 25000, 0, 0 );
         /* P_SETUP_PASSOS_GENERAL_ATTRIBUTES */ sub_22299( ref g_U750 );
        SET_ROOM_FOR_PED_BY_NAME( g_U750, ref g_U2473 );
        if ( /* IS_MAX_VALID */ sub_22677())
        {
            SET_PED_DEFAULT_AIM_AT_PED( g_U750,  /* PLAYER_PED_ID */ sub_1456() );
        }
         /* TELEPORTPED */ sub_6292( g_U750, g_U725[0]._fU0, g_U725[0]._fU12 );
    }
    return;
}

/* P_SETUP_PASSOS_GENERAL_ATTRIBUTES */ void sub_22299(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_745( "SBA", "P_SETUP_PASSOS_GENERAL_ATTRIBUTES", "***" );
    if ( /* IS_PED_VALID */ sub_19402( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), 1 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^), 1 );
        SET_PED_VALIDATE_BULLET_CAM_HIT( (uParam0^), 0 );
        SET_AI_SHOULD_ALWAYS_MISS_PED( (uParam0^), 1 );
        SET_CAN_AI_KICK_THROUGH_CORPSES( (uParam0^), 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_AI_TEMPLATE( (uParam0^), "AIT_NORMAL" );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( (uParam0^), 1 );
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^), 1 );
        SET_PED_GORE( (uParam0^), 0 );
        SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( (uParam0^), 0 );
        SET_PED_PROOFS( (uParam0^), 0, 1, 1, 1, 1 );
        SET_PED_ALLOWED_TO_SURRENDER( (uParam0^), 0 );
        SET_PED_CAN_AVOID_DEATH_ZONES( (uParam0^), 0 );
        SET_PED_STAND_GROUND_ON_PLAYER_IMPACT( (uParam0^), 1 );
        SET_PED_CAN_PUSH_PLAYER( (uParam0^), 1 );
        SET_PED_RESIST_TO_OBJECT_COLLISION( (uParam0^), 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_CAN_BE_TARGETTED( (uParam0^), 0 );
        SET_PED_CONSUMING_AMMO( (uParam0^), 0 );
        SET_PED_PATH_CAN_USE_CLIMBOVERS( (uParam0^), 1 );
        SET_PED_PATH_CAN_DROP_FROM_HEIGHT( (uParam0^), 1 );
    }
    return;
}

/* IS_MAX_VALID */ int sub_22677()
{
    if ( /* IS_PED_VALID */ sub_19402(  /* PLAYER_PED_ID */ sub_1456() ))
    {
        return 1;
    }
    return 0;
}

/* PED_CLEAR_ALL_ACTION_INTENTIONS */ void sub_22845(unknown uParam0)
{
    if ( /* IS_PED_VALID */ sub_19402( uParam0 ))
    {
        PED_FINISH_ACTION_INTENTION( uParam0, 47 );
        PED_FINISH_ACTION_INTENTION( uParam0, 48 );
        PED_FINISH_ACTION_INTENTION( uParam0, 49 );
        PED_FINISH_ACTION_INTENTION( uParam0, 50 );
        PED_FINISH_ACTION_INTENTION( uParam0, 51 );
        PED_FINISH_ACTION_INTENTION( uParam0, 52 );
        PED_FINISH_ACTION_INTENTION( uParam0, 53 );
        PED_FINISH_ACTION_INTENTION( uParam0, 54 );
        PED_FINISH_ACTION_INTENTION( uParam0, 55 );
        PED_FINISH_ACTION_INTENTION( uParam0, 56 );
        PED_FINISH_ACTION_INTENTION( uParam0, 57 );
        PED_FINISH_ACTION_INTENTION( uParam0, 58 );
    }
    return;
}

/* P_HANDLE_MUSIC */ void sub_23222()
{
    if (l_U611 != l_U609)
    {
         /* WRITESCRIPTLOG */ sub_745( "TEH", "playing music:changed CUR FLAG", 0 );
         /* WRITE_INT */ sub_9539( l_U609 );
         /* WRITE_INT */ sub_9539( l_U610 );
        l_U611 = l_U609;
    }
    else if (l_U612 != l_U610)
    {
         /* WRITESCRIPTLOG */ sub_745( "TEH", "playing music:changed NEW FLAG", 0 );
         /* WRITE_INT */ sub_9539( l_U609 );
         /* WRITE_INT */ sub_9539( l_U610 );
        l_U612 = l_U610;
    }
    switch (l_U609)
    {
        case 1:
         /* WRITESCRIPTLOG */ sub_745( "TEH", "playing music: Suspended ", 0 );
        AUDIO_MUSIC_SUSPEND( 500 );
        l_U613 = 0;
        l_U609 = 3;
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_745( "TEH", "playing music: Hoboken Bar Restart checkpoint ", 0 );
        AUDIO_MUSIC_SUSPEND( 500 );
        l_U613 = 0;
        l_U609 = 3;
        break;
        case 3:
        if (l_U610 == 3)
        {
             /* WRITESCRIPTLOG */ sub_745( "TEH", "playing music: MC_APPROACHING_UPSTAIRS_REAR ", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_6", "", 0, 7000, 5000, -1082130432, 0 );
            l_U609 = 5;
        }
        break;
        case 4:
        AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_6", "", 0, 7000, 5000, -1082130432, 0 );
        l_U609 = 5;
        break;
        case 5:
        if (l_U610 == 5)
        {
             /* WRITESCRIPTLOG */ sub_745( "TEH", "playing music: MC_BASEMENT_FIGHT_STARTS ", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_5_6", "", 0, 1000, 5000, -1082130432, 0 );
            l_U609 = 6;
            l_U610 = 6;
        }
        break;
        case 6:
        if (l_U610 == 6)
        {
            if (l_U613 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_ONESHOT_12", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                     /* WRITESCRIPTLOG */ sub_745( "TEH", "playing music: Sussesfully preloaded oneshot_12 ", 0 );
                    l_U613 = 1;
                }
            }
            else
            {
                l_U609 = 7;
            }
        }
        break;
        case 7:
        if (l_U610 == 7)
        {
            if (l_U613 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                     /* WRITESCRIPTLOG */ sub_745( "TEH", "playing music: Sussesfully played oneshot_12 ", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                }
            }
            l_U613 = 0;
             /* CREATETIMER */ sub_13297( ref l_U600, 3000, 1, 0 );
             /* STARTTIMER */ sub_24336( ref l_U600 );
            l_U609 = 8;
        }
        break;
        case 8:
        if ( /* ISTIMERDONE */ sub_24480( ref l_U600 ))
        {
            l_U609 = 9;
            l_U610 = 9;
        }
        break;
        case 9:
        if (l_U610 == 9)
        {
            if (l_U613 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_ONESHOT_17", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_ONESHOT_17" ))
                {
                     /* WRITESCRIPTLOG */ sub_745( "TEH", "playing music: Sussesfully preloaded oneshot_17 ", 0 );
                    l_U613 = 1;
                }
            }
            else
            {
                l_U609 = 10;
            }
        }
        break;
        case 10:
        if (l_U610 == 10)
        {
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_1_3", "", 0, 4000, 1000, -1082130432, 0 );
            if (l_U613 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( 0 ))
                {
                     /* WRITESCRIPTLOG */ sub_745( "TEH", "playing music: Sussesfully played oneshot_17", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                }
            }
            l_U613 = 0;
             /* CREATETIMER */ sub_13297( ref l_U600, 3000, 1, 0 );
             /* STARTTIMER */ sub_24336( ref l_U600 );
            l_U609 = 11;
        }
        break;
        case 11:
        if ( /* ISTIMERDONE */ sub_24480( ref l_U600 ))
        {
            l_U609 = 12;
            l_U610 = 12;
        }
        break;
        case 12:
        if (l_U610 == 12)
        {
            if (l_U613 == 0)
            {
                AUDIO_MUSIC_PRELOAD_ONESHOT( "NYBAR_ONESHOT_15", 0 );
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_ONESHOT_15" ))
                {
                     /* WRITESCRIPTLOG */ sub_745( "TEH", "playing music: Sussesfully preloaded oneshot_15", 0 );
                    l_U613 = 1;
                }
            }
            else
            {
                l_U609 = 13;
            }
        }
        break;
        case 13:
        if (l_U610 == 13)
        {
            if (l_U613 == 1)
            {
                if (AUDIO_MUSIC_IS_ONESHOT_PREPARED( "NYBAR_ONESHOT_15" ))
                {
                     /* WRITESCRIPTLOG */ sub_745( "TEH", "playing music: Sussesfully played oneshot_15", 0 );
                    AUDIO_MUSIC_PLAY_ONESHOT();
                }
            }
            l_U613 = 0;
            l_U609 = 14;
            l_U610 = 14;
        }
        break;
        case 14:
        if (l_U610 == 14)
        {
             /* WRITESCRIPTLOG */ sub_745( "TEH", "playing music: MC_FIGHT_OVER ", 0 );
            AUDIO_MUSIC_FORCE_TRACK( "NYBAR_SONG_2ND", "NYBAR_02_2_3", "", 0, 5000, 5000, -1082130432, 0 );
            l_U609 = 16;
        }
        break;
    }
    return;
}

/* STARTTIMER */ void sub_24336(int iParam0)
{
    if (NOT iParam0->_fU20)
    {
        iParam0->_fU20 = 1;
        iParam0->_fU16 = 0;
        if (iParam0->_fU28)
        {
            iParam0->_fU0 = TIMERA();
        }
        else
        {
            iParam0->_fU0 = TIMERB();
        }
        if (iParam0->_fU32 == 1)
        {
            iParam0->_fU0 = TIMERSYSTEM();
        }
        iParam0->_fU4 = iParam0->_fU0;
    }
    return;
}

/* ISTIMERDONE */ int sub_24480(int iParam0)
{
    if (iParam0->_fU16)
    {
        return 0;
    }
    else if (NOT iParam0->_fU20)
    {
        return 0;
    }
    if (iParam0->_fU28)
    {
        iParam0->_fU4 = TIMERA();
    }
    else
    {
        iParam0->_fU4 = TIMERB();
    }
    if (iParam0->_fU32 == 1)
    {
        iParam0->_fU4 = TIMERSYSTEM();
    }
    if ((iParam0->_fU4 - iParam0->_fU0) >= iParam0->_fU12)
    {
        iParam0->_fU16 = 1;
        iParam0->_fU20 = 0;
        return 1;
        break;
    }
    return 0;
}

/* HANDLE_CHECKPOINTS */ void sub_25517()
{
    if ((g_U724 == 3) || ((g_U724 == 2) || ((g_U724 == 1) || (g_U724 == 0))))
    {
        if ( /* RESTARTING_CHECKPOINT */ sub_25584())
        {
             /* WRITESCRIPTLOG */ sub_745( "SBA", "HANDLE_CHECKPOINTS - Restart, setting eFailure = STATE_FAIL_WAITING", 0 );
            l_U655 = 4;
        }
        else if (l_U761 == 9)
        {
            if (l_U655 == 0)
            {
                if (g_U2200)
                {
                    g_U2200 = 0;
                    l_U655 = 4;
                }
            }
        }
        if (l_U761 >= 11)
        {
            if (l_U655 == 0)
            {
                if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )) == 1)
                {
                    l_U655 = 4;
                     /* P_SETUP_PLAYER_DEATH_CAM */ sub_26229( 1 );
                }
                else if ((NOT IS_LAST_MAN_STANDING_ACTIVE()) AND (IS_PED_DEAD( g_U750 )))
                {
                    SET_PED_GORE( g_U750, 1 );
                    l_U655 = 1;
                }
            }
        }
         /* P_HANDLE_FAILURE */ sub_26368();
    }
    return;
}

/* RESTARTING_CHECKPOINT */ int sub_25584()
{
    if (HAS_SELECTED_RETRY_CHECKPOINT())
    {
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (HAS_CUTSCENE_FINISHED() == 0)
        {
            return 0;
        }
        l_U0 = 0;
        g_U648 = 1;
        DO_SCREEN_FADE_OUT( 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 1 );
        TERMINATE_GAME_BULLET_CAMERA();
        if (IS_ANIMATED_CAMERA_PLAYING())
        {
            CAMERA_ANIMATED_STOP( 0, 0 );
        }
        STOP_ALL_SCRIPTED_CONVERSATIONS( 0 );
        DEACTIVATE_BULLET_TIME( 1, 0 );
        END_POSTFX_BLENDER( 0, 0 );
        END_POSTFX_BLENDER( 2, 0 );
        END_POSTFX_BLENDER( 3, 0 );
        END_POSTFX_BLENDER( 4, 0 );
        END_POSTFX_BLENDER( 5, 0 );
        END_POSTFX_BLENDER( 7, 0 );
        END_POSTFX_BLENDER( 9, 0 );
        END_POSTFX_BLENDER( 10, 0 );
        END_POSTFX_BLENDER( 11, 0 );
        END_POSTFX_BLENDER( 12, 0 );
        END_POSTFX_BLENDER( 13, 0 );
        END_POSTFX_BLENDER( 14, 0 );
        END_POSTFX_BLENDER( 15, 0 );
        END_POSTFX_BLENDER( 16, 0 );
        STOP_ALL_IMAGEFX( 0 );
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )))
        {
            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_1456(), 0 );
            SET_PLAYER_FORCED_AIM(  /* PLAYER_ID */ sub_1494(), 0, 0 );
            SET_PLAYER_CAN_USE_SHOOTDODGE(  /* PLAYER_ID */ sub_1494(), 1 );
            if ((IS_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_1456() )) == 0)
            {
                SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_1456(), 1 );
            }
        }
        CLEAR_PRINTS();
        CLEAR_HELP();
        SET_INTERACTIONTEXT_VISIBLE( 0 );
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
        DESTROY_ALL_CAMS();
        AUDIO_MUSIC_SUSPEND( 500 );
        return 1;
    }
    return 0;
}

/* P_SETUP_PLAYER_DEATH_CAM */ void sub_26229(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_745( "NS", "P_SETUP_PLAYER_DEATH_CAM()", 0 );
    uParam0 = uParam0;
    return;
}

/* P_HANDLE_FAILURE */ void sub_26368()
{
    switch (l_U655)
    {
        case 0: break;
        case 1:
        if (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1494() ))
        {
            SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_1456(), 1 );
        }
        if (l_U760 == 3)
        {
            l_U655 = 4;
             /* P_SETUP_PASSOS_DEATH */ sub_26535( 0 );
             /* WRITESCRIPTLOG */ sub_745( "CCB", "eFailure - STATE_FAIL_WAITING", 0 );
        }
        else if ( /* F_HANDLE_DEATH_CAM_PASSOS */ sub_27452())
        {
            l_U655 = 4;
             /* WRITESCRIPTLOG */ sub_745( "CCB", "eFailure - STATE_FAIL_WAITING", 0 );
        }
        break;
        case 2:
        if ( /* PLAY_MIDSCENE_00B_HIGH_COVER_PASSOS_DEATH */ sub_31188())
        {
            l_U655 = 4;
        }
        break;
        case 3:
        if ( /* PLAY_MIDSCENE_00B_BAR_COVER_PASSOS_DEATH */ sub_33982())
        {
            l_U655 = 4;
        }
        break;
        case 4:
        if ( /* IS_RESTART_ACTIVE */ sub_35194())
        {
            if ((g_U751[4]._fU40 != 4) AND (g_U751[4]._fU40 != 0))
            {
                 /* WRITESCRIPTLOG */ sub_745( "GA", "Shutting down script for Back Alley.", 0 );
                g_U2201 = 1;
                g_U1929._fU64 = 0;
                 /* P_RESET_CHECKPOINT_THREAD */ sub_35349( ref g_U751[4] );
                SET_EXITFLAG_FOR_SCRIPT( g_U751[4]._fU32 );
            }
            l_U655 = 5;
        }
        else if (( /* F_CHECK_QUIT_RETRY */ sub_35442( 0 )) == 1)
        {
            if ((g_U751[4]._fU40 != 4) AND (g_U751[4]._fU40 != 0))
            {
                 /* WRITESCRIPTLOG */ sub_745( "GA", "Shutting down script for Back Alley.", 0 );
                g_U2201 = 1;
                g_U1929._fU64 = 0;
                 /* P_RESET_CHECKPOINT_THREAD */ sub_35349( ref g_U751[4] );
                SET_EXITFLAG_FOR_SCRIPT( g_U751[4]._fU32 );
            }
            l_U655 = 5;
        }
        break;
        case 5:
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )))
        {
             /* WRITESCRIPTLOG */ sub_745( "CCB", "Deactivating bullettime...", 0 );
            DEACTIVATE_BULLET_TIME( 0, 0 );
            END_POSTFX_BLENDER( 3, 0 );
            l_U655 = 6;
             /* WRITESCRIPTLOG */ sub_745( "CCB", "eFailure - STATE_FAIL_CLEANUP", 0 );
        }
        break;
        case 6:
        if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1494() )))
        {
            if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )))
            {
                SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1494(), 0, 0 );
            }
        }
        DO_SCREEN_FADE_OUT( 0 );
         /* P_IMAGEFX_STOP_BULLETCAM */ sub_36694( "NY_TONY_SCRIPTED_FAIL_FX" );
         /* P_IMAGEFX_STOP_BULLETCAM */ sub_36694( "NY_PASSOS1_SCRIPTED_FAIL_FX" );
         /* P_IMAGEFX_STOP_BULLETCAM */ sub_36694( "NY_PASSOS2_SCRIPTED_FAIL_FX" );
        DESTROY_ALL_CAMS();
        RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
         /* WRITESCRIPTLOG */ sub_745( "CCB", "Destroying Passos...", 0 );
         /* CLEANPED */ sub_18137( g_U750 );
         /* CLEANUP_BAR */ sub_36959( 1 );
        l_U655 = 7;
         /* WRITESCRIPTLOG */ sub_745( "CCB", "eFailure - STATE_FAIL_RESTORE", 0 );
        break;
        case 7:
         /* WRITESCRIPTLOG */ sub_745( "SP", "eFailure = STATE_FAIL_RESTORE", 0 );
         /* P_SETUP_PLAYER_RELATIONSHIPS */ sub_38594();
        SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
        if ((g_U724 == 2) || ((g_U724 == 1) || (g_U724 == 0)))
        {
            l_U609 = 2;
            l_U610 = 2;
            if (IS_ANIMATED_CAMERA_PLAYING())
            {
                CAMERA_ANIMATED_STOP( 0, 0 );
            }
            if (g_U724 == 1)
            {
                 /* WRITESCRIPTLOG */ sub_745( "RJM", "RESTART.  Restoring player to MCE_KILLING_TONY state", " " );
                 /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_1550( ref l_U804,  /* PLAYER_PED_ID */ sub_1456() );
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_745( "RJM", "RESTART.  Restoring player to MCE_HOBOKEN_BAR state", " " );
                 /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_1550( ref l_U768,  /* PLAYER_PED_ID */ sub_1456() );
            }
            l_U761 = 0;
        }
        else if (g_U724 == 3)
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "RESTART.  Restoring player to MCE_BAR_BASEMENT state", " " );
            if (IS_ANIMATED_CAMERA_PLAYING())
            {
                CAMERA_ANIMATED_STOP( 0, 0 );
            }
            l_U609 = 4;
             /* P_RESTORE_PLAYER_DATA_CHECKPOINT */ sub_1550( ref l_U840,  /* PLAYER_PED_ID */ sub_1456() );
             /* INIT_SCRIPT_VARIABLES */ sub_12784();
             /* INIT_SCRIPT_STRUCTS */ sub_13463();
             /* CREATE_BASEMENT_PAINKILLERS */ sub_21607();
             /* LOAD_ASSETS_BASEMENT */ sub_11343( 1 );
             /* LOADSEAMLESSCUTSCENE */ sub_12444( "MID_00_NYBAR", 0 );
             /* CREATE_BASEMENT_GUYS */ sub_18010();
             /* LOCK_ALLEY_DOORS */ sub_22015();
             /* CREATE_BAR_PASSOS */ sub_22168();
             /* TELEPORTPED */ sub_6292( g_U750, l_U1996, 0.00000000 );
            CLEAR_PED_TASKS_IMMEDIATELY( g_U750 );
            SET_ROOM_FOR_PED_BY_NAME( g_U750, ref g_U2489 );
             /* PED_CLEAR_ALL_ACTION_INTENTIONS */ sub_22845( g_U750 );
            ISEQ_REGISTER_ENTITY( 1432420195, "passos", g_U750, 0 );
            ISEQ_START( 1432420195 );
            SET_ROOM_FOR_PED_BY_NAME(  /* PLAYER_PED_ID */ sub_1456(), ref g_U2481 );
            SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U2253[3]._fU16, 1065353216, 0 );
            SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U2253[3]._fU20, 1065353216, 0 );
            ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
            if (NOT ( /* F_IMAGEFX_FADE_IN */ sub_39380()))
            {
                DO_SCREEN_FADE_IN( 500 );
            }
            l_U1966 = 1;
             /* DISABLETIMER */ sub_13219( ref l_U1774 );
             /* P_CLOSEDOOR */ sub_17001( ref g_U2083, 1 );
             /* P_SETDOORLOCKED */ sub_17258( ref g_U2083, 1 );
            l_U763 = 7;
            l_U761 = 19;
        }
        if (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1494() ))
        {
            SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_1456(), 0 );
        }
        if ( /* IS_MAX_VALID */ sub_22677())
        {
            SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_1456(), 1 );
        }
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1494(), 1, 0 );
        l_U655 = 8;
         /* WRITESCRIPTLOG */ sub_745( "CCB", "eFailure - STATE_FAIL_RESTART", 0 );
        break;
        case 8:
        if (GET_NUMBER_OF_STREAMING_REQUESTS() == 0)
        {
             /* WRITESCRIPTLOG */ sub_745( "CCB", "eFailure - STATE_FAIL_IDLE", 0 );
            l_U655 = 0;
             /* WRITESCRIPTLOG */ sub_745( "CCB", "eCheckpoint - STATE_CHECKPOINT_INIT", 0 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_745( "CCB", "Waiting for stream requests...", 0 );
        }
        break;
    }
    return;
}

/* P_SETUP_PASSOS_DEATH */ void sub_26535(unknown uParam0)
{
    string sVar3;
    string sVar4;
    string sVar5;
    string sVar6;
    string sVar7;

     /* WRITESCRIPTLOG */ sub_745( "NS", "P_SETUP_PASSOS_DEATH()", 0 );
    sVar3 = "";
    sVar4 = "";
    sVar5 = "";
    sVar6 = "";
    sVar7 = "";
    switch (l_U279)
    {
        case 0:
        sVar4 = "S_NYB_FAIL_09A";
        sVar5 = "S_NYB_FAIL_09B";
        sVar6 = "S_NYB_FAIL_09C";
        sVar7 = "S_NYB_FAIL_09D";
        sVar3 = "MISS_FAIL_04";
        break;
        case 1:
        sVar4 = "S_NYB_FAIL_10A";
        sVar5 = "S_NYB_FAIL_10B";
        sVar3 = "MISS_FAIL_08";
        break;
        case 2:
        sVar4 = "S_NYB_FAIL_11A";
        sVar5 = "S_NYB_FAIL_11B";
        sVar6 = "S_NYB_FAIL_11C";
        sVar7 = "S_NYB_FAIL_11D";
        sVar3 = "MISS_FAIL_04";
        break;
        case 3:
        sVar4 = "S_NYB_FAIL_12A";
        sVar5 = "S_NYB_FAIL_12B";
        sVar6 = "S_NYB_FAIL_12C";
        sVar7 = "S_NYB_FAIL_12D";
        sVar3 = "MISS_FAIL_04";
        break;
        case 4:
        sVar4 = "S_NYB_FAIL_13A";
        sVar5 = "S_NYB_FAIL_13B";
        sVar6 = "S_NYB_FAIL_13C";
        sVar7 = "S_NYB_FAIL_13D";
        sVar3 = "MISS_FAIL_05";
        break;
    }
    ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
     /* P_RUN_AND_PLAY_DEATH_CAM */ sub_27154( sVar3, sVar4, sVar5, sVar6, sVar7, uParam0 );
    l_U279++;
    if (l_U279 == 5)
    {
        l_U279 = 0;
    }
    return;
}

/* P_RUN_AND_PLAY_DEATH_CAM */ void sub_27154(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
     /* WRITESCRIPTLOG */ sub_745( "NS", "P_SETUP_AND_PLAY_DEATH_CAM()", 0 );
    uParam5 = uParam5;
    if (NOT (IS_STRING_NULL( uParam1 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 0, "" );
    }
    if (NOT (IS_STRING_NULL( uParam2 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 1, "" );
    }
    if (NOT (IS_STRING_NULL( uParam3 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 2, "" );
    }
    if (NOT (IS_STRING_NULL( uParam4 )))
    {
        SET_PRESET_TEXT( uParam0, 0, 3, "" );
    }
    return;
}

/* F_HANDLE_DEATH_CAM_PASSOS */ int sub_27452()
{
    switch (l_U755)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_745( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_INIT", 0 );
         /* WRITESCRIPTLOG */ sub_745( "CCB", "Disabling ALLOW_BULLET_CAMERA_TO_GAMEPLAY...", 0 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 0 );
         /* NIS_PRE_SETUP */ sub_27679( 1, 0, 0, 1 );
        if (l_U760 == 0)
        {
             /* CAM_CREATE_STATIC_CAM */ sub_27910( ref l_U756[0], -60.27000000, 31.99000000, 9.39000000, -7.41000000, 0.00000000, 118.68000000, 45.00000000 );
             /* CAM_CREATE_STATIC_CAM */ sub_27910( ref l_U756[1], -63.00000000, 30.25000000, 9.02000000, -13.69000000, 0.00000000, 106.25000000, 45.00000000 );
        }
        else if (l_U760 == 1)
        {
             /* CAM_CREATE_STATIC_CAM */ sub_27910( ref l_U756[0], -97.81000000, 29.53000000, 9.84000000, -12.13000000, 0.00000000, 100.48000000, 45.00000000 );
             /* CAM_CREATE_STATIC_CAM */ sub_27910( ref l_U756[1], -100.57000000, 29.03000000, 9.25000000, -15.64000000, 0.00000000, 104.27000000, 45.00000000 );
        }
        else if (l_U760 == 2)
        {
             /* CAM_CREATE_STATIC_CAM */ sub_27910( ref l_U756[0], -97.81000000, 29.53000000, 9.84000000, -12.13000000, 0.00000000, 100.48000000, 45.00000000 );
             /* CAM_CREATE_STATIC_CAM */ sub_27910( ref l_U756[1], -100.57000000, 29.03000000, 9.25000000, -15.64000000, 0.00000000, 104.27000000, 45.00000000 );
        };;;
         /* P_CAM_SHAKE_CREATE_STRUCT */ sub_28317( ref l_U656[0], 1, 2.00000000, 10, -1, -1, 1, 0 );
         /* P_CAM_SHAKE_CREATE_STRUCT */ sub_28317( ref l_U656[1], 4, 3.00000000, 300, -1, -1, 1, 0 );
        l_U755 = 2;
         /* WRITESCRIPTLOG */ sub_745( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_WAITING", 0 );
        case 2:
        if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
        {
            l_U755 = 3;
             /* WRITESCRIPTLOG */ sub_745( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_START", 0 );
        }
        break;
        case 3:
        ACTIVATE_BULLET_TIME( 0, 3, 1 );
        START_POSTFX_BLENDER( 3 );
         /* CAM_PLAY_INTERP_WITH_STATIC_CAMS */ sub_29068( ref l_U756[0], ref l_U756[1], 4275, 1, 1 );
        if (NOT IS_SCREEN_FADED_IN())
        {
             /* WRITESCRIPTLOG */ sub_745( "SP", "FADING IN!!!", 0 );
            DO_SCREEN_FADE_IN( 500 );
        }
        l_U759 = GET_REAL_GAME_TIMER() + 4275;
        l_U755 = 4;
         /* WRITESCRIPTLOG */ sub_745( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_PLAYING", 0 );
        break;
        case 4:
        if (GET_REAL_GAME_TIMER() >= l_U759)
        {
             /* P_SETUP_PLAYER_KILL_PASSOS_DEATH */ sub_29321( 1 );
            SET_CAM_ACTIVE( l_U756[1], 1 );
            l_U755 = 5;
        }
        else
        {
             /* P_CAM_SHAKE_HANDLE_ARRAY */ sub_29923( ref l_U656 );
        }
        break;
        case 5:
        if ((IS_BULLET_CAMERA_SCENE_ACTIVE( l_U265 )) == 0)
        {
            if (IS_SCREEN_FADED_IN())
            {
                 /* WRITESCRIPTLOG */ sub_745( "CCB", "FADING OUT!!!", 0 );
                DO_SCREEN_FADE_OUT( 500 );
                 /* WRITESCRIPTLOG */ sub_745( "CCB", "Deactivating bullettime...", 0 );
                DEACTIVATE_BULLET_TIME( 0, 0 );
                END_POSTFX_BLENDER( 3, 0 );
            }
        }
        if (IS_SCREEN_FADED_OUT())
        {
             /* WRITESCRIPTLOG */ sub_745( "CCB", "Enabling ALLOW_BULLET_CAMERA_TO_GAMEPLAY...", 0 );
            ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
             /* P_CAM_SHAKE_FORCE_DEACTIVATE_ARRAY */ sub_30762( ref l_U656, 1 );
            l_U755 = 6;
             /* WRITESCRIPTLOG */ sub_745( "CCB", "ePassosDeathCamState - STATE_DEATHCAM_FINISHED", 0 );
        }
        break;
        case 6:
        return 1;
        break;
    }
    return 0;
}

/* NIS_PRE_SETUP */ void sub_27679(int iParam0, int iParam1, unknown uParam2, boolean bParam3)
{
    END_POSTFX_BLENDER( 12, 0 );
    if (bParam3)
    {
        STOP_ALL_IMAGEFX( 0 );
    }
    SET_WIDESCREEN_BORDERS( 1, 500 );
    DISPLAY_HUD( 0 );
    if (iParam0 == 1)
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )))
        {
            SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1494(), 0, uParam2 );
            SET_PED_DUCKING(  /* PLAYER_PED_ID */ sub_1456(), 0 );
            if (iParam1 == 1)
            {
                CLEAR_PED_TASKS_IMMEDIATELY(  /* PLAYER_PED_ID */ sub_1456() );
            }
            SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_1456(), 1 );
        }
    }
    DEACTIVATE_BULLET_TIME( 1, 0 );
    return;
}

/* CAM_CREATE_STATIC_CAM */ void sub_27910(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    (uParam0^) = CREATE_CAM_WITH_PARAMS( "DEFAULT_SCRIPTED_CAMERA", uParam1, uParam4, uParam7, 1 );
    SET_CAM_PARAMS( (uParam0^), uParam1, uParam4, uParam7, 0, 1, 1 );
    return;
}

/* P_CAM_SHAKE_CREATE_STRUCT */ void sub_28317(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    if (iParam0->_fU168 == 0)
    {
         /* P_CAM_SHAKE_SET_SHAKE_TYPE */ sub_28373( iParam0, uParam1 );
        iParam0->_fU192 = uParam1;
        iParam0->_fU36 = uParam2;
        iParam0->_fU148 = uParam3;
        iParam0->_fU152 = uParam4;
        iParam0->_fU156 = uParam5;
        iParam0->_fU160 = uParam7;
        iParam0->_fU176 = uParam6;
    }
     /* RESETTIMER */ sub_12875( iParam0 + 40 );
     /* RESETTIMER */ sub_12875( iParam0 + 76 );
     /* RESETTIMER */ sub_12875( iParam0 + 112 );
    iParam0->_fU172 = iParam0->_fU176;
    iParam0->_fU164 = 0;
    iParam0->_fU168 = 1;
    iParam0->_fU184 = 0;
    iParam0->_fU188 = 0;
    return;
}

/* P_CAM_SHAKE_SET_SHAKE_TYPE */ void sub_28373(int iParam0, unknown uParam1)
{
    switch (uParam1)
    {
        case 1:
        StrCopy( ref iParam0->_fU4, "SMALL_EXPLOSION_SHAKE", 32 );
        break;
        case 2:
        StrCopy( ref iParam0->_fU4, "MEDIUM_EXPLOSION_SHAKE", 32 );
        break;
        case 3:
        StrCopy( ref iParam0->_fU4, "LARGE_EXPLOSION_SHAKE", 32 );
        break;
        case 4:
        StrCopy( ref iParam0->_fU4, "HAND_SHAKE", 32 );
        break;
        case 5:
        StrCopy( ref iParam0->_fU4, "JOLT_SHAKE", 32 );
        break;
        case 6:
        StrCopy( ref iParam0->_fU4, "VIBRATE_SHAKE", 32 );
        break;
        case 7:
        StrCopy( ref iParam0->_fU4, "WOBBLY_SHAKE", 32 );
        break;
    }
    iParam0->_fU0 = iParam0->_fU192;
    return;
}

/* CAM_PLAY_INTERP_WITH_STATIC_CAMS */ void sub_29068(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    SET_CAM_ACTIVE_WITH_INTERP( (uParam1^), (uParam0^), uParam2, uParam3, uParam4 );
    RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    return;
}

/* P_SETUP_PLAYER_KILL_PASSOS_DEATH */ void sub_29321(unknown uParam0)
{
    string sVar3;
    string sVar4;
    string sVar5;
    string sVar6;
    string sVar7;

     /* WRITESCRIPTLOG */ sub_745( "NS", "P_SETUP_PLAYER_KILL_PASSOS_DEATH()", 0 );
    sVar3 = "";
    sVar4 = "";
    sVar5 = "";
    sVar6 = "";
    sVar7 = "";
    switch (l_U278)
    {
        case 0:
        sVar4 = "S_NYB_FAIL_14A";
        sVar5 = "S_NYB_FAIL_14B";
        sVar6 = "S_NYB_FAIL_14C";
        sVar3 = "MISS_FAIL_07";
        break;
        case 1:
        sVar4 = "S_NYB_FAIL_15A";
        sVar5 = "S_NYB_FAIL_15B";
        sVar6 = "S_NYB_FAIL_15C";
        sVar7 = "S_NYB_FAIL_15D";
        sVar3 = "MISS_FAIL_04";
        break;
        case 2:
        sVar4 = "S_NYB_FAIL_16A";
        sVar5 = "S_NYB_FAIL_16B";
        sVar6 = "S_NYB_FAIL_16C";
        sVar7 = "S_NYB_FAIL_16D";
        sVar3 = "MISS_FAIL_04";
        break;
        case 3:
        sVar4 = "S_NYB_FAIL_17A";
        sVar5 = "S_NYB_FAIL_17B";
        sVar6 = "S_NYB_FAIL_17C";
        sVar3 = "MISS_FAIL_06";
        break;
    }
     /* P_RUN_AND_PLAY_DEATH_CAM */ sub_27154( sVar3, sVar4, sVar5, sVar6, sVar7, uParam0 );
    l_U278++;
    if (l_U278 == 4)
    {
        l_U278 = 0;
    }
    return;
}

/* P_CAM_SHAKE_HANDLE_ARRAY */ void sub_29923(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
         /* P_CAM_SHAKE_HANDLE */ sub_29982( ref (uParam0^)[I] );
    }
    return;
}

/* P_CAM_SHAKE_HANDLE */ void sub_29982(int iParam0)
{
    if (iParam0->_fU172 == 1)
    {
        if (iParam0->_fU164 == 0)
        {
             /* CREATETIMER */ sub_13297( iParam0 + 40, iParam0->_fU148, 1, 0 );
             /* STARTTIMER */ sub_24336( iParam0 + 40 );
            if (iParam0->_fU152 > 0)
            {
                 /* CREATETIMER */ sub_13297( iParam0 + 76, iParam0->_fU152, 1, 0 );
                 /* STARTTIMER */ sub_24336( iParam0 + 76 );
            }
            iParam0->_fU164 = 1;
        }
        if ( /* ISTIMERDONE */ sub_24480( iParam0 + 40 ))
        {
             /* WRITESCRIPTLOG */ sub_745( "ML", "P_HANDLE_CAM_SHAKE is shaking the camera", "---" );
             /* P_SHAKE_CAM */ sub_30211( iParam0 + 4, iParam0->_fU36 );
            if (iParam0->_fU156 > 0)
            {
                 /* CREATETIMER */ sub_13297( iParam0 + 112, iParam0->_fU156, 1, 0 );
                 /* STARTTIMER */ sub_24336( iParam0 + 112 );
            }
        }
        if ( /* ISTIMERDONE */ sub_24480( iParam0 + 112 ))
        {
             /* P_SHAKE_CAM */ sub_30211( iParam0 + 4, iParam0->_fU36 );
             /* CREATETIMER */ sub_13297( iParam0 + 112, iParam0->_fU156, 1, 0 );
             /* STARTTIMER */ sub_24336( iParam0 + 112 );
        }
        if ( /* ISTIMERDONE */ sub_24480( iParam0 + 76 ))
        {
             /* WRITESCRIPTLOG */ sub_745( "ML", "P_HANDLE_CAM_SHAKE is done shaking the camera", "---" );
            STOP_CAM_SHAKING( GET_RENDERING_CAM(), iParam0->_fU160 );
            STOP_GAMEPLAY_CAM_SHAKING( iParam0 + 4, iParam0->_fU160 );
             /* RESETTIMER */ sub_12875( iParam0 + 112 );
            iParam0->_fU172 = 0;
        }
    }
    return;
}

/* P_SHAKE_CAM */ void sub_30211(unknown uParam0, unknown uParam1)
{
    SHAKE_CAM( GET_RENDERING_CAM(), uParam0, uParam1 );
    SHAKE_GAMEPLAY_CAM( uParam0, uParam1 );
    return;
}

/* P_CAM_SHAKE_FORCE_DEACTIVATE_ARRAY */ void sub_30762(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
         /* P_CAM_SHAKE_FORCE_DEACTIVATE */ sub_30833( ref (uParam0^)[I], uParam1 );
    }
    return;
}

/* P_CAM_SHAKE_FORCE_DEACTIVATE */ void sub_30833(int iParam0, int iParam1)
{
    if (iParam0->_fU172 == 1)
    {
        if (iParam1 == 1)
        {
            STOP_CAM_SHAKING( GET_RENDERING_CAM(), iParam1 );
            STOP_GAMEPLAY_CAM_SHAKING( iParam0 + 4, iParam1 );
        }
        else
        {
            STOP_CAM_SHAKING( GET_RENDERING_CAM(), iParam0->_fU160 );
            STOP_GAMEPLAY_CAM_SHAKING( iParam0 + 4, iParam0->_fU160 );
        }
         /* RESETTIMER */ sub_12875( iParam0 + 40 );
         /* RESETTIMER */ sub_12875( iParam0 + 76 );
         /* RESETTIMER */ sub_12875( iParam0 + 112 );
        iParam0->_fU172 = 0;
    }
    return;
}

/* PLAY_MIDSCENE_00B_HIGH_COVER_PASSOS_DEATH */ int sub_31188()
{
    switch (l_U2042)
    {
        case 0:
         /* NIS_PRE_SETUP */ sub_27679( 1, 0, 0, 0 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U2084, 5.82000000, -319.68000000, -4.19000000, 123, 100979920, 7, 3, 2, 0, 0 );
        if ( /* IS_MAX_VALID */ sub_22677())
        {
             /* TELEPORTPED */ sub_6292(  /* PLAYER_PED_ID */ sub_1456(), 2.73043100, -324.93940000, -4.20137500, 0 );
            SET_ROOM_FOR_PED_BY_NAME(  /* PLAYER_PED_ID */ sub_1456(), ref g_U2489 );
            SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_1456(), 0 );
        }
        if (ISEQ_QUERY_ENTITY_STATE( 1432420195, "passos", 3 ))
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "Vig 04 was playing, kill it.  KILL IT NAOW!!!", 0 );
            ISEQ_UNREGISTER_ENTITY( 1432420195, "passos" );
             /* TERMINATEISEQ */ sub_31524( 1432420195, 1 );
        }
        if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
        {
            CLEAR_PED_TASKS_IMMEDIATELY( g_U750 );
             /* SETUP_PASSOS_FOR_FAILURE_SCENE */ sub_31856( ref g_U750 );
             /* TELEPORTPED */ sub_6292( g_U750, 1.00489500, -322.95160000, -4.20047500, 164.47320000 );
            ISEQ_REGISTER_ENTITY( 2013058283, "passos", g_U750, 0 );
            ISEQ_START( 2013058283 );
        }
         /* CLEANPED */ sub_18137( l_U2097 );
        l_U2097 =  /* CREATEPED */ sub_18676( ref l_U2084 );
        if ( /* IS_PED_VALID */ sub_19402( l_U2097 ))
        {
             /* SETUP_KILLER_FOR_FAILURE_CUTSCENES */ sub_32296( ref l_U2097 );
             /* F_GIVEPEDWEAPON */ sub_4042( l_U2097, -862236369, 25000, 0, 0 );
            SET_ROOM_FOR_PED_BY_NAME( l_U2097, ref g_U2489 );
            REGISTER_TARGET( l_U2097, g_U750 );
             /* TELEPORTPED */ sub_6292( l_U2097, 5.82000000, -319.68000000, -4.19000000, 123 );
            SET_PED_DEFAULT_AIM_AT_PED( l_U2097, g_U750 );
            TASK_AIM_GUN_AT_PED( l_U2097, g_U750, -1, 0 );
        }
         /* NIS_CREATE_STATIC_CAM */ sub_32560( ref l_U2044, 2.50000000, -321.05000000, -4.10000000, 17.20000000, 0.00000000, 143.07000000, 45, 7000 );
         /* WRITESCRIPTLOG */ sub_745( "RJM", "PLAY_MIDSCENE_00B_HIGH_COVER_PASSOS_DEATH - Going to State 1", 0 );
        l_U2042 = 1;
        break;
        case 1:
         /* P_IMAGEFX_START_BULLETCAM */ sub_32908( "NY_PASSOS1_SCRIPTED_FAIL_FX", 0 );
         /* NIS_PLAY_STATIC_CAMERA */ sub_33300( ref l_U2044 );
        SHAKE_CAM( l_U2044._fU0,  /* F_CAM_SHAKE_WOBBLY */ sub_33416(), 0.25000000 );
         /* CREATETIMER */ sub_13297( ref l_U2075, 500, 1, 0 );
         /* STARTTIMER */ sub_24336( ref l_U2075 );
         /* WRITESCRIPTLOG */ sub_745( "RJM", "PLAY_MIDSCENE_00B_HIGH_COVER_PASSOS_DEATH - Going to State 2", 0 );
        l_U2042 = 2;
        break;
        case 2:
        if ( /* ISTIMERDONE */ sub_24480( ref l_U2075 ))
        {
            if (( /* IS_PED_VALID */ sub_19402( g_U750 )) AND ( /* IS_PED_VALID */ sub_19402( l_U2097 )))
            {
                SET_PED_SHOOTS_AT_COORD( l_U2097, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_BONE_COORDS( g_U750, 65488, 0, 0, 0 ) );
                SHAKE_CAM( l_U2044._fU0, "SMALL_EXPLOSION_SHAKE", 1 );
                 /* P_KILL_PED */ sub_33711( g_U750 );
                 /* CREATETIMER */ sub_13297( ref l_U2075, 500, 1, 0 );
                 /* STARTTIMER */ sub_24336( ref l_U2075 );
                l_U2042 = 3;
            }
        }
        break;
        case 3:
        if ( /* ISTIMERDONE */ sub_24480( ref l_U2075 ))
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "PLAY_MIDSCENE_00B_HIGH_COVER_PASSOS_DEATH - Going to State 4", 0 );
            l_U2042 = 4;
        }
        break;
        case 4:
        STREAM_HELPERS_REQUEST_AT_LOC( 1.04000000, -322.51000000, -4.03000000, 0 );
        return 1;
        break;
    }
    return 0;
}

/* TERMINATEISEQ */ void sub_31524(unknown uParam0, int iParam1)
{
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;

    if ((ISEQ_DOES_EXIST( uParam0 )) == 0)
    {
        SCRIPT_ASSERT( "Error: The interactive sequence you are trying to terminate does not exist!!!!", 0 );
    }
    if ((ISEQ_IS_LOADED( uParam0 )) == 1)
    {
        ISEQ_TERMINATE( uParam0 );
    }
    ISEQ_GET_NAME( 32, ref uVar4, uParam0 );
    if (iParam1 == 1)
    {
        while ((ISEQ_IS_LOADED( uParam0 )) == 1)
        {
            DISPLAYF( "[SP]### Waiting for interactive sequence to terminate: {0} {1} ###", 2, 1281, ref uVar4, 513, uParam0 );
            WAIT( 0 );
        }
    }
    return;
}

/* SETUP_PASSOS_FOR_FAILURE_SCENE */ void sub_31856(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_745( "RJM", "P_SETUP_PASSOS_FOR_FAILURE_SCENE", "***" );
    if ( /* IS_PED_VALID */ sub_19402( (uParam0^) ))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), 1 );
        SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^), 0 );
        SET_PED_VALIDATE_BULLET_CAM_HIT( (uParam0^), 1 );
        SET_AI_SHOULD_ALWAYS_MISS_PED( (uParam0^), 0 );
        SET_CAN_AI_KICK_THROUGH_CORPSES( (uParam0^), 1 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_AI_TEMPLATE( (uParam0^), "AIT_NORMAL" );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( (uParam0^), 0 );
        SET_PED_AS_ONE_SHOT_KILL( (uParam0^), 1 );
        SET_PED_GORE( (uParam0^), 1 );
        SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( (uParam0^), 0 );
        SET_PED_PROOFS( (uParam0^), 0, 1, 1, 1, 1 );
        SET_PED_ALLOWED_TO_SURRENDER( (uParam0^), 0 );
        SET_PED_CAN_AVOID_DEATH_ZONES( (uParam0^), 0 );
        SET_PED_STAND_GROUND_ON_PLAYER_IMPACT( (uParam0^), 1 );
        SET_PED_CAN_PUSH_PLAYER( (uParam0^), 1 );
        SET_PED_RESIST_TO_OBJECT_COLLISION( (uParam0^), 0 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        SET_PED_CAN_BE_TARGETTED( (uParam0^), 1 );
    }
    return;
}

/* SETUP_KILLER_FOR_FAILURE_CUTSCENES */ void sub_32296(unknown uParam0)
{
    if ( /* IS_PED_VALID */ sub_19402( (uParam0^) ))
    {
        CLEAR_PED_TASKS_IMMEDIATELY( (uParam0^) );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^), 1 );
        SET_PED_COMBAT_MOVEMENT( (uParam0^), 0 );
    }
    return;
}

/* NIS_CREATE_STATIC_CAM */ void sub_32560(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    iParam0->_fU4 = {uParam4};
    iParam0->_fU16 = {uParam1};
    iParam0->_fU28 = uParam7;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    iParam0->_fU84 = uParam8;
    iParam0->_fU88 = 0;
    iParam0->_fU92 = 0;
    iParam0->_fU40 = 0;
    iParam0->_fU44 = 0;
    iParam0->_fU100 = 1;
    iParam0->_fU104 = 1;
    iParam0->_fU96 = 0;
     /* CREATETIMER */ sub_13297( iParam0 + 48, uParam8, 1, 0 );
    iParam0->_fU0 = CREATE_CAM_WITH_PARAMS( ref g_U649, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 1 );
    SET_CAM_PARAMS( iParam0->_fU0, iParam0->_fU16, iParam0->_fU4, iParam0->_fU28, 0, 1, 1 );
    return;
}

/* P_IMAGEFX_START_BULLETCAM */ void sub_32908(unknown uParam0, boolean bParam1)
{
    PRINTSTRING( "[CO] P_IMAGEFX_START_BULLETCAM: Starting BulletCam: " );
    PRINTSTRING( uParam0 );
    PRINTNL();
     /* CLEANCAMERA */ sub_33028( ref l_U282 );
    l_U282 = CREATE_CAM( "DEFAULT_BULLET_CAMERA", 1 );
    SETUP_BULLET_CAMERA_SCENE( l_U282, uParam0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, "", "" );
    if (bParam1)
    {
        RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
    }
    return;
}

/* CLEANCAMERA */ void sub_33028(unknown uParam0)
{
    if ((DOES_CAM_EXIST( (uParam0^) )) == 1)
    {
        if ((IS_CAM_ACTIVE( (uParam0^) )) == 1)
        {
            SET_CAM_ACTIVE( (uParam0^), 0 );
        }
        DESTROY_CAM( (uParam0^) );
    }
    (uParam0^) = nil;
    return;
}

/* NIS_PLAY_STATIC_CAMERA */ void sub_33300(int iParam0)
{
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    SET_CAM_ACTIVE( iParam0->_fU0, 1 );
    RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
     /* STARTTIMER */ sub_24336( iParam0 + 48 );
    iParam0->_fU32 = 1;
    iParam0->_fU40 = 1;
    return;
}

/* F_CAM_SHAKE_WOBBLY */ string sub_33416()
{
    return "WOBBLY_SHAKE";
}

/* P_KILL_PED */ void sub_33711(unknown uParam0)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        STOP_PED_SPEAKING( uParam0, 1 );
        SET_PED_HEALTH( uParam0, 0, 0 );
        SET_PED_CORPSE( uParam0, 0 );
    }
    return;
}

/* PLAY_MIDSCENE_00B_BAR_COVER_PASSOS_DEATH */ int sub_33982()
{
    switch (l_U2043)
    {
        case 0:
         /* NIS_PRE_SETUP */ sub_27679( 1, 0, 0, 1 );
         /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U2084, 3.23000000, -310.14000000, -4.18000000, 65363, 100979920, 7, 3, 2, 0, 0 );
        if ( /* IS_MAX_VALID */ sub_22677())
        {
             /* TELEPORTPED */ sub_6292(  /* PLAYER_PED_ID */ sub_1456(), 5.01358100, -313.91170000, -4.20108300, 0 );
            SET_ROOM_FOR_PED_BY_NAME(  /* PLAYER_PED_ID */ sub_1456(), ref g_U2489 );
            SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_1456(), 0 );
        }
        if (ISEQ_QUERY_ENTITY_STATE( 1432420195, "passos", 3 ))
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "Vig 04 was playing, kill it.  KILL IT NAOW!!!", 0 );
            ISEQ_UNREGISTER_ENTITY( 1432420195, "passos" );
             /* TERMINATEISEQ */ sub_31524( 1432420195, 1 );
        }
        if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
        {
            CLEAR_PED_TASKS_IMMEDIATELY( g_U750 );
             /* SETUP_PASSOS_FOR_FAILURE_SCENE */ sub_31856( ref g_U750 );
             /* TELEPORTPED */ sub_6292( g_U750, 2.56451700, -316.91450000, -5.04729500, 6.78912100 );
            ISEQ_REGISTER_ENTITY( -1051877844, "passos", g_U750, 0 );
            ISEQ_START( -1051877844 );
        }
         /* CLEANPED */ sub_18137( l_U2097 );
        l_U2097 =  /* CREATEPED */ sub_18676( ref l_U2084 );
        if ( /* IS_PED_VALID */ sub_19402( l_U2097 ))
        {
             /* SETUP_KILLER_FOR_FAILURE_CUTSCENES */ sub_32296( ref l_U2097 );
             /* F_GIVEPEDWEAPON */ sub_4042( l_U2097, -862236369, 25000, 0, 0 );
            REGISTER_TARGET( l_U2097, g_U750 );
            SET_ROOM_FOR_PED_BY_NAME( l_U2097, ref g_U2489 );
             /* TELEPORTPED */ sub_6292( l_U2097, 3.23000000, -310.14000000, -4.18000000, 65363 );
            SET_PED_DEFAULT_AIM_AT_PED( l_U2097, g_U750 );
            TASK_AIM_GUN_AT_PED( l_U2097, g_U750, -1, 0 );
        }
        if ((IS_SCREEN_FADING_OUT()) || (IS_SCREEN_FADED_OUT()))
        {
            DO_SCREEN_FADE_IN( 0 );
        }
         /* NIS_CREATE_STATIC_CAM */ sub_32560( ref l_U2044, 3.96902800, -318.86770000, -3.09328200, -1.55756900, 0.00000300, 17.46076000, 45, 7000 );
         /* WRITESCRIPTLOG */ sub_745( "RJM", "PLAY_MIDSCENE_00B_BAR_COVER_PASSOS_DEATH - Going to State 1", 0 );
        l_U2043 = 1;
        break;
        case 1:
         /* NIS_PLAY_STATIC_CAMERA */ sub_33300( ref l_U2044 );
        SHAKE_CAM( l_U2044._fU0,  /* F_CAM_SHAKE_WOBBLY */ sub_33416(), 0.25000000 );
         /* CREATETIMER */ sub_13297( ref l_U2075, 500, 1, 0 );
         /* STARTTIMER */ sub_24336( ref l_U2075 );
         /* WRITESCRIPTLOG */ sub_745( "RJM", "PLAY_MIDSCENE_00B_BAR_COVER_PASSOS_DEATH - Going to State 2", 0 );
        l_U2043 = 2;
        break;
        case 2:
        if ( /* ISTIMERDONE */ sub_24480( ref l_U2075 ))
        {
            if (( /* IS_PED_VALID */ sub_19402( g_U750 )) AND ( /* IS_PED_VALID */ sub_19402( l_U2097 )))
            {
                SET_PED_SHOOTS_AT_COORD( l_U2097, "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_BONE_COORDS( g_U750, 65488, 0, 0, 0 ) );
                SHAKE_CAM( l_U2044._fU0, "SMALL_EXPLOSION_SHAKE", 1 );
                 /* P_KILL_PED */ sub_33711( g_U750 );
                 /* CREATETIMER */ sub_13297( ref l_U2075, 1150, 1, 0 );
                 /* STARTTIMER */ sub_24336( ref l_U2075 );
                l_U2043 = 3;
            }
        }
        break;
        case 3:
        if ( /* ISTIMERDONE */ sub_24480( ref l_U2075 ))
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "PLAY_MIDSCENE_00B_BAR_COVER_PASSOS_DEATH - Going to State 4", 0 );
            l_U2043 = 4;
        }
        break;
        case 4:
        return 1;
        break;
    }
    return 0;
}

/* IS_RESTART_ACTIVE */ void sub_35194()
{
    return g_U648;
}

/* P_RESET_CHECKPOINT_THREAD */ void sub_35349(int iParam0)
{
    iParam0->_fU36 = 0;
    iParam0->_fU40 = 0;
    return;
}

/* F_CHECK_QUIT_RETRY */ int sub_35442(int iParam0)
{
    iParam0 = 1;
    switch (l_U267)
    {
        case 0:
        if (NOT ( /* HASTIMERBEENACTIVATED */ sub_35524( ref l_U269 )))
        {
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )))
            {
                l_U268 = 2000;
                ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 1 );
            }
             /* CREATETIMER */ sub_13297( ref l_U269, l_U268, 1, 1 );
             /* STARTTIMER */ sub_24336( ref l_U269 );
        }
        if ( /* ISTIMERDONE */ sub_24480( ref l_U269 ))
        {
             /* WRITESCRIPTLOG */ sub_745( "NS", " show fail/retry text", 0 );
            if ((IS_DEATH_PANEL_WIPE_ALLOWED()) AND (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )))
            {
                if ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0)
                {
                    if (IS_SCREEN_FADED_OUT())
                    {
                        DO_SCREEN_FADE_IN( 0 );
                    }
                }
                ENABLE_DEATHHELPERTEXT( 1, 1, 0 );
            }
            else if (IS_SCREEN_FADED_OUT())
            {
                DO_SCREEN_FADE_IN( 0 );
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            else
            {
                ENABLE_DEATHHELPERTEXT( 1, iParam0, 0 );
            }
            if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1494() )))
            {
                SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1494(), 0, 0 );
            }
            DISPLAY_HUD( 0 );
            l_U267 = 1;
        }
        break;
        case 1:
        if ((((NOT IS_QUIT_CONFIRMING()) == 1) AND (IS_BUTTON_JUST_PRESSED( 0, 501 ))) || ((N_1855335259()) || (IS_CONTROL_JUST_PRESSED( 2, 82 ))))
        {
            if (IS_QUIT_CONFIRMING() == 1)
            {
                l_U267 = 2;
            }
            else
            {
                l_U267 = 3;
            }
        }
        break;
        case 2:
         /* WRITESCRIPTLOG */ sub_745( "NS", "Player will QUIT", 0 );
         /* P_POSTQUITRETRYCLEANUP */ sub_36007();
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
        START_PANEL_WIPE( 0, 6 );
        SET_EXITFLAG_FOR_SCRIPT( GET_ID_OF_THIS_THREAD() );
        RETURN_TO_TITLESCREEN( 0 );
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_745( "NS", "Player will RETRY", 0 );
        if (IS_IN_NYMINUTE_MODE())
        {
            SWITCH_TO_LEVEL( GET_INDEX_OF_CURRENT_LEVEL() );
        }
        if (iParam0 == 1)
        {
            DO_SCREEN_FADE_OUT( 0 );
        }
         /* P_POSTQUITRETRYCLEANUP */ sub_36007();
        return 1;
        break;
    }
    return 0;
}

/* HASTIMERBEENACTIVATED */ int sub_35524(int iParam0)
{
    if (iParam0->_fU20 == 1)
    {
        return 1;
    }
    if (iParam0->_fU16 == 1)
    {
        return 1;
    }
    return 0;
}

/* P_POSTQUITRETRYCLEANUP */ void sub_36007()
{
     /* WRITESCRIPTLOG */ sub_745( "NS", "P_PostFailRetryCleanup", 0 );
     /* RESETTIMER */ sub_12875( ref l_U269 );
    ENABLE_DEATHHELPERTEXT( 0, 0, 2000 );
    SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 0 );
    if (NOT (IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1494() )))
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1494(), 1, 0 );
    }
    DISPLAY_HUD( 1 );
    l_U266 = 0;
    l_U266 = l_U266;
    l_U267 = 0;
    return;
}

/* P_IMAGEFX_STOP_BULLETCAM */ void sub_36694(unknown uParam0)
{
     /* WRITESCRIPTLOG */ sub_745( "CO", "P_IMAGEFX_STOP_BULLETCAM:  Cameras Deleted", 0 );
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
     /* CLEANCAMERA */ sub_33028( ref l_U282 );
    l_U281 = 1;
    return;
}

/* CLEANUP_BAR */ void sub_36959(boolean bParam0)
{
     /* WRITESCRIPTLOG */ sub_745( "SP", "CLEANUP_BAR", 0 );
     /* TERMINATE_ALL_BAR_ISEQS */ sub_37008();
     /* CLEANUP_UPSTAIRS */ sub_37708();
     /* CLEANUP_BASEMENT */ sub_38107();
     /* CLEANPLACEMENTARRAY */ sub_38217( ref l_U1201 );
     /* CLEANPLACEMENT */ sub_37939( l_U1215 );
     /* CLEANPLACEMENT */ sub_37939( l_U1216 );
    if (bParam0)
    {
         /* UNLOADANIMDICT */ sub_38354( "FACE_PASNYB" );
         /* UNLOADACTIONTREE */ sub_38441( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act" );
    }
    return;
}

/* TERMINATE_ALL_BAR_ISEQS */ void sub_37008()
{
     /* UNREGISTER_BLENDOUTA_PEDS */ sub_37044();
     /* TERMINATEISEQ */ sub_31524( 1066718456, 0 );
    ISEQ_UNREGISTER_ENTITY( -596711032, "bargirl" );
    ISEQ_UNREGISTER_ENTITY( -596711032, "bartender" );
     /* TERMINATEISEQ */ sub_31524( -596711032, 0 );
    ISEQ_UNREGISTER_ENTITY( -2007826629, "passos" );
     /* TERMINATEISEQ */ sub_31524( -2007826629, 0 );
    ISEQ_UNREGISTER_ENTITY( -1679907246, "caller" );
     /* TERMINATEISEQ */ sub_31524( -1679907246, 0 );
    ISEQ_UNREGISTER_ENTITY( 1432420195, "passos" );
     /* TERMINATEISEQ */ sub_31524( 1432420195, 0 );
    ISEQ_UNREGISTER_ENTITY( 2013058283, "passos" );
     /* TERMINATEISEQ */ sub_31524( 2013058283, 0 );
    ISEQ_UNREGISTER_ENTITY( -1051877844, "passos" );
     /* TERMINATEISEQ */ sub_31524( -1051877844, 0 );
     /* CLEAR_LOADED_CUTSCENE */ sub_37538( l_U1999 );
     /* CLEAR_LOADED_CUTSCENE */ sub_37538( "vig_02_nybar_concat" );
     /* CLEAR_LOADED_CUTSCENE */ sub_37538( "MID_00_NYBAR" );
    return;
}

/* UNREGISTER_BLENDOUTA_PEDS */ void sub_37044()
{
     /* WRITESCRIPTLOG */ sub_745( "RJM", "UNREGISTER_BLENDOUTA_PEDS", 0 );
    ISEQ_UNREGISTER_ENTITY( 1066718456, "max" );
    ISEQ_UNREGISTER_ENTITY( 1066718456, "passos" );
    ISEQ_UNREGISTER_ENTITY( 1066718456, "tony" );
    ISEQ_UNREGISTER_ENTITY( 1066718456, "thug1" );
    ISEQ_UNREGISTER_ENTITY( 1066718456, "thug2" );
    ISEQ_UNREGISTER_ENTITY( 1066718456, "thug3" );
    ISEQ_UNREGISTER_ENTITY( 1066718456, "bargirl" );
    ISEQ_UNREGISTER_ENTITY( 1066718456, "bartender" );
     /* TERMINATEISEQ */ sub_31524( 1066718456, 0 );
    return;
}

/* CLEAR_LOADED_CUTSCENE */ void sub_37538(unknown uParam0)
{
    if ((CUTSCENE_NAMED_IS_LOADING( uParam0 )) || (CUTSCENE_IS_LOADED( uParam0 )))
    {
         /* WRITESCRIPTLOG */ sub_745( "SBA", "Clearing cutscene:", 0 );
         /* WRITE_STRING */ sub_3651( uParam0 );
        CLEAR_NAMED_CUTSCENE( uParam0 );
    }
    return;
}

/* CLEANUP_UPSTAIRS */ void sub_37708()
{
     /* WRITESCRIPTLOG */ sub_745( "SP", "CLEANUP_UPSTAIRS", 0 );
    ISEQ_UNREGISTER_ENTITY( -596711032, "bargirl" );
    ISEQ_UNREGISTER_ENTITY( -596711032, "bartender" );
     /* TERMINATEISEQ */ sub_31524( -596711032, 1 );
    ISEQ_UNREGISTER_ENTITY( 525357828, "max" );
    ISEQ_UNREGISTER_ENTITY( 525357828, "gmed" );
    ISEQ_UNREGISTER_ENTITY( 525357828, "gmed1" );
    ISEQ_UNREGISTER_ENTITY( 525357828, "gmed2" );
    ISEQ_UNREGISTER_ENTITY( 525357828, "gmed3" );
     /* TERMINATEISEQ */ sub_31524( 525357828, 1 );
     /* CLEANPLACEMENT */ sub_37939( g_U665._fU0 );
     /* CLEANPLACEMENT */ sub_37939( g_U683._fU0 );
     /* CLEANPED */ sub_18137( l_U1156 );
     /* CLEANPED */ sub_18137( l_U1184 );
     /* CLEANPED */ sub_18137( l_U1142 );
     /* CLEANPED */ sub_18137( l_U1170 );
     /* CLEANPED */ sub_18137( l_U889 );
     /* CLEANPED */ sub_18137( l_U919 );
     /* CLEANPED */ sub_18137( l_U904 );
     /* CLEANPEDARRAY */ sub_18087( ref l_U990 );
     /* CLEANPEDARRAY */ sub_18087( ref l_U966 );
    return;
}

/* CLEANPLACEMENT */ void sub_37939(unknown uParam0)
{
    if ((DOES_PLACEMENT_EXIST( uParam0 )) == 1)
    {
        REMOVE_PLACEMENT( uParam0 );
    }
    return;
}

/* CLEANUP_BASEMENT */ void sub_38107()
{
     /* WRITESCRIPTLOG */ sub_745( "SP", "CLEANUP_BASEMENT", 0 );
     /* CLEANPED */ sub_18137( l_U2097 );
     /* CLEANPED */ sub_18137( l_U1056 );
     /* CLEANPEDARRAY */ sub_18087( ref l_U1039 );
     /* CLEANPEDARRAY */ sub_18087( ref l_U1084 );
     /* CLEANPEDARRAY */ sub_18087( ref l_U1120 );
     /* CLEANPLACEMENTARRAY */ sub_38217( ref l_U1207 );
    return;
}

/* CLEANPLACEMENTARRAY */ void sub_38217(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* CLEANPLACEMENT */ sub_37939( (uParam0^)[I] );
    }
    return;
}

/* UNLOADANIMDICT */ void sub_38354(unknown uParam0)
{
    REMOVE_ANIM_DICT( uParam0, 0 );
    return;
}

/* UNLOADACTIONTREE */ void sub_38441(unknown uParam0)
{
    ACTION_TREE_UNLOAD( uParam0 );
    return;
}

/* P_SETUP_PLAYER_RELATIONSHIPS */ void sub_38594()
{
     /* WRITESCRIPTLOG */ sub_745( "SP", "P_SETUP_PLAYER_RELATIONSHIPS", "###" );
    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )) == 0)
    {
        SET_PED_RELATIONSHIP(  /* PLAYER_PED_ID */ sub_1456(), 0, 1 );
        SET_PED_RELATIONSHIP(  /* PLAYER_PED_ID */ sub_1456(), 0, 2 );
        SET_PED_RELATIONSHIP(  /* PLAYER_PED_ID */ sub_1456(), 0, 6 );
        SET_PED_RELATIONSHIP(  /* PLAYER_PED_ID */ sub_1456(), 0, 7 );
    }
    return;
}

/* F_IMAGEFX_FADE_IN */ int sub_39380()
{
    if (l_U281)
    {
         /* WRITESCRIPTLOG */ sub_745( "CO", "F_IMAGEFX_FADE_IN: IMAGEFX START", 0 );
        START_PANEL_WIPE( 0, 6 );
        PLAY_IMAGEFX( "BULLETCAM_IMPACT", 3, 1 );
        PLAY_IMAGEFX( "BLACK_FADE_UP_FAST_01", 3, 1 );
        DO_SCREEN_FADE_IN( 0 );
        l_U281 = 0;
        return 1;
        break;
    }
     /* WRITESCRIPTLOG */ sub_745( "CO", "F_IMAGEFX_FADE_IN: NORMAL START", 0 );
    return 0;
}

/* HANDLE_EVENTS */ void sub_39994()
{
    int iVar2;
    int I;
    int iVar4;
    unknown uVar5;

    iVar4 = -1;
    switch (l_U761)
    {
        case 0:
         /* WRITESCRIPTLOG */ sub_745( "SP", "barState = NYBAR_INIT_SCRIPT_DATA", 0 );
         /* INIT_SCRIPT_VARIABLES */ sub_12784();
         /* INIT_SCRIPT_STRUCTS */ sub_13463();
         /* P_INITIALIZE_SP_CHALLENGES */ sub_40244();
         /* P_CLOSEDOOR */ sub_17001( ref g_U2048, 1 );
         /* P_SETDOORLOCKED */ sub_17258( ref g_U2048, 1 );
         /* SETUP_SCRIPTED_SPEECH */ sub_17414( "SNYCAUD" );
         /* SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR */ sub_17584( 2 );
        l_U761 = 1;
         /* WRITESCRIPTLOG */ sub_745( "SP", "barState = NYBAR_INIT_REQUEST_ASSETS", 0 );
        case 1:
         /* WRITESCRIPTLOG */ sub_745( "SP", "barState = NYBAR_INIT_REQUEST_ASSETS", 0 );
         /* P_REQUEST_UPSTAIRS_ASSETS */ sub_40438();
        l_U761 = 2;
         /* WRITESCRIPTLOG */ sub_745( "SP", "barState = NYBAR_INIT_LOADING_ASSETS", 0 );
        case 2:
        if (( /* F_ARE_UPSTAIRS_ASSETS_LOADED */ sub_40860()) == 1)
        {
            l_U761 = 4;
             /* WRITESCRIPTLOG */ sub_745( "SP", "barState = NYBAR_CREATE_ENEMIES", 0 );
            break;
        }
        return;
        case 4:
         /* WRITESCRIPTLOG */ sub_745( "SP", "barState = NYBAR_CREATE_ENEMIES", 0 );
         /* CREATE_POOL_HALL_GOONS */ sub_41314();
        l_U761 = 3;
         /* WRITESCRIPTLOG */ sub_745( "SP", "barState = NYBAR_CREATE_ALLIES", 0 );
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_745( "SP", "barState = NYBAR_CREATE_ALLIES", 0 );
         /* CREATE_BARTENDER_AND_GIRL */ sub_43477();
         /* CREATE_BAR_PASSOS */ sub_22168();
        l_U761 = 5;
         /* WRITESCRIPTLOG */ sub_745( "SP", "barState = NYBAR_CREATE_OBJECTS", 0 );
        break;
        case 5:
         /* WRITESCRIPTLOG */ sub_745( "SP", "barState = NYBAR_CREATE_OBJECTS", 0 );
         /* CREATE_BAR_PLACEMENTS */ sub_44065();
        l_U761 = 6;
         /* WRITESCRIPTLOG */ sub_745( "SP", "barState = NYBAR_SETUP_START_POINT", 0 );
        break;
        case 6:
         /* WRITESCRIPTLOG */ sub_745( "SP", "barState = NYBAR_SETUP_START_POINT", 0 );
        if (g_U724 == 0)
        {
            l_U2000 = 1;
            l_U761 = 7;
             /* WRITESCRIPTLOG */ sub_745( "SP", "mceCurrentCheckpoint = NYBAR_HANDLE_04_01_CUTSCENE", 0 );
        }
        else if (g_U724 == 1)
        {
             /* CLEANPED */ sub_18137( l_U1184 );
            l_U1184 =  /* CREATEPED */ sub_18676( ref l_U1171 );
            if ( /* IS_PED_VALID */ sub_19402( l_U1184 ))
            {
                SET_PED_AS_ONE_SHOT_KILL( l_U1184, 1 );
                SET_PED_CAN_TRIGGER_BULLET_CAM( l_U1184, 1 );
                 /* PED_SET_ROOM_BY_NAME */ sub_20751( ref l_U1184, g_U2473 );
            }
             /* CLEANPED */ sub_18137( l_U1156 );
            l_U1156 =  /* CREATEPED */ sub_18676( ref l_U1143 );
            if ( /* IS_PED_VALID */ sub_19402( l_U1156 ))
            {
                 /* PED_SET_ROOM_BY_NAME */ sub_20751( ref l_U1156, g_U2473 );
            }
            LOAD_SCENE( -0.89000000, -301.17000000, -0.26000000 );
            l_U2001 = 1;
            l_U295 = 1;
            l_U761 = 8;
             /* WRITESCRIPTLOG */ sub_745( "SP", "mceCurrentCheckpoint = MCE_KILLING_TONY, going to NYBAR_BAR_WAIT_FOR_STREAMING", 0 );
        }
        else if (g_U724 == 2)
        {
             /* P_ACTIVATE_POOL_HALL_GOONS */ sub_45770();
             /* CREATE_DEAD_TONY_AND_MARTY */ sub_46280();
             /* UPDATE_VIGNETTE_01B */ sub_47424( 0 );
            l_U2001 = 1;
            l_U761 = 10;
             /* WRITESCRIPTLOG */ sub_745( "SP", "mceCurrentCheckpoint = MCE_HOBOKEN_BAR, going to NYBAR_HANDLE_04_01_FINAL_BLENDOUT", 0 );
        };;;
        break;
        case 8:
         /* WRITESCRIPTLOG */ sub_745( "RJM", "NYBAR_BAR_WAIT_FOR_STREAMING - Waiting for streaming", 0 );
        if (GET_NUMBER_OF_STREAMING_REQUESTS() == 0)
        {
            l_U761 = 9;
             /* WRITESCRIPTLOG */ sub_745( "SP", "Going to NYBAR_HANDLE_04_01A_BLENDOUT", 0 );
        }
        break;
        case 7:
        if (( /* F_HANDLE_04_01_CUTSCENE */ sub_51881()) == 1)
        {
             /* WRITESCRIPTLOG */ sub_745( "bsw", "barState dead marty created", 0 );
            l_U2001 = 1;
             /* PED_SET_VISIBILITY */ sub_45986( l_U966[1], 0 );
             /* PED_SET_VISIBILITY */ sub_45986( l_U966[2], 0 );
             /* PED_SET_VISIBILITY */ sub_45986( l_U990[0], 0 );
            if (g_U724 != 1)
            {
                g_U724 = 1;
                if (NOT ( /* HAS_SAVEFILE_LOADED */ sub_1309( ref l_U804 )))
                {
                     /* F_GIVEPEDWEAPON */ sub_4042(  /* PLAYER_PED_ID */ sub_1456(),  /* GET_STARTING_WEAPON */ sub_6129( 0 ), 100, 0, 1 );
                }
                 /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_6597( ref l_U804, 1,  /* PLAYER_PED_ID */ sub_1456(), g_U2253[1]._fU0, g_U2253[1]._fU12, g_U2253[1]._fU16, g_U2253[1]._fU20, 1 );
            }
            l_U761 = 9;
             /* WRITESCRIPTLOG */ sub_745( "SP", "barState = NYBAR_HANDLE_04_01A_BLENDOUT", 0 );
            break;
        }
        return;
        case 9:
        if (( /* HANDLE_04_01_A_BLENDOUT */ sub_54577( 1, ref g_U750, ref l_U1184, ref l_U904, ref l_U889, ref l_U1156, ref l_U966[0], ref l_U919, ref l_U966[1], ref l_U966[2] )) == 1)
        {
             /* P_ACTIVATE_POOL_HALL_GOONS */ sub_45770();
             /* CREATE_DEAD_TONY_AND_MARTY */ sub_46280();
            l_U761 = 10;
             /* WRITESCRIPTLOG */ sub_745( "SP", "barState = NYBAR_HANDLE_04_01_FINAL_BLENDOUT", 0 );
            break;
        }
        return;
        case 10:
        if (l_U761 == 10)
        {
             /* UPDATE_PASSOS_BAR_AND_BASEMENT */ sub_61649();
        }
        if (( /* F_HANDLE_04_01_BLENDOUT */ sub_72543()) == 1)
        {
             /* CLEANPLACEMENT */ sub_37939( l_U1215 );
            l_U1215 =  /* CREATEPLACEMENT */ sub_21733( -343443786, -0.69000000, -301.60000000, -0.26000000, 1.60000000, 0.00000000, 1.67500000, 0, 0, 0, 1119092736 );
            ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1215, ref g_U2473 );
             /* CLEANPLACEMENT */ sub_37939( l_U1216 );
            l_U1216 =  /* CREATEPLACEMENT */ sub_21733( -343443786, -2.49000000, -301.50000000, -0.26000000, 1.60000000, 0.00000000, 0.47300000, 0, 0, 0, 1119092736 );
            ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1215, ref g_U2473 );
            SET_PED_VISIBLE( l_U1142, 1 );
            SET_PED_VISIBLE( l_U1170, 1 );
            l_U761 = 11;
             /* WRITESCRIPTLOG */ sub_745( "SP", "barState = NYBAR_POST_CUTSCENE_04_01", 0 );
            break;
        }
        return;
        case 11:
         /* WRITESCRIPTLOG */ sub_745( "SP", "barState = NYBAR_POST_CUTSCENE_04_01", 0 );
         /* UPDATE_PASSOS_BAR_AND_BASEMENT */ sub_61649();
        if ((NOT IS_SCREEN_FADING_IN()) || (NOT IS_SCREEN_FADED_IN()))
        {
            SET_ADRENALINE_AMT( 0.00000000 );
            DO_SCREEN_FADE_IN( 0 );
        }
        if (g_U724 != 2)
        {
            g_U724 = 2;
             /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_6597( ref l_U768, 2,  /* PLAYER_PED_ID */ sub_1456(), g_U2253[2]._fU0, g_U2253[2]._fU12, g_U2253[2]._fU16, g_U2253[2]._fU20, 1 );
        }
         /* LOADSEAMLESSCUTSCENE */ sub_12444( "vig_02_nybar_concat", 0 );
         /* LOAD_ASSETS_BASEMENT */ sub_11343( 0 );
         /* UPDATE_VIGNETTE_01B */ sub_47424( 1 );
        SET_SCRIPT_CONTROL_RESET_ON_PLAYER_DEATH( 1 );
         /* MAL_SETPEDARRAYVISIBLE */ sub_75073( ref l_U990, 0 );
        l_U761 = 12;
         /* WRITESCRIPTLOG */ sub_745( "SP", "barState = NYBAR_BAR_AREA", 0 );
        break;
        case 12:
         /* UPDATE_PASSOS_BAR_AND_BASEMENT */ sub_61649();
         /* UPDATE_VIGNETTE_01B */ sub_47424( 1 );
        if (NOT l_U1740)
        {
            if ( /* IS_MAX_VALID */ sub_22677())
            {
                if (NOT (IS_PED_IN_COVER(  /* PLAYER_PED_ID */ sub_1456() )))
                {
                     /* WRITESCRIPTLOG */ sub_745( "RJM", "Setting SET_PLAYER_CAN_BE_PINNED_IN_COVER(TRUE)", 0 );
                    SET_PLAYER_CAN_BE_PINNED_IN_COVER( 1 );
                    l_U1740 = 1;
                }
            }
        }
        if (NOT l_U992)
        {
            if (( /* MAL_COMPAREPLAYERPOSAXIS */ sub_75486( "Y", "Less", -310.00000000 )) || (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_65763( ref l_U966 )) < 1))
            {
                 /* MAL_WRITESCRIPTLOG */ sub_67503( "UNBLOCKING BALCONY" );
                 /* MAL_SETPEDARRAYLOCKEDANDREGISTEREDTARGET */ sub_75751( ref l_U990,  /* PLAYER_PED_ID */ sub_1456() );
                 /* P_ACTIVATEPEDARRAY */ sub_76016( ref l_U990 );
                 /* MAL_BLOCKPEDARRAY */ sub_76205( ref l_U990, 0 );
                l_U992 = 1;
            }
        }
        if (NOT l_U1728)
        {
            if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_65763( ref l_U990 )) > 0)
            {
                if (( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_76355( ref l_U1574, 0 )) || (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_65763( ref l_U966 )) == 0))
                {
                    for ( I = 0; I <= 0; I++ )
                    {
                        if (( /* IS_PED_VALID */ sub_19402(  /* PLAYER_PED_ID */ sub_1456() )) AND ( /* IS_PED_VALID */ sub_19402( l_U990[I] )))
                        {
                            SET_PED_COMBAT_ATTRIBUTES( l_U990[0], 1, 1 );
                            RESET_PED_TETHERING( l_U990[I] );
                            CLEAR_PED_TASKS_IMMEDIATELY( l_U990[I] );
                            REGISTER_TARGET( l_U990[I],  /* PLAYER_PED_ID */ sub_1456() );
                            TASK_COMBAT_PED( l_U990[I],  /* PLAYER_PED_ID */ sub_1456() );
                        }
                    }
                    l_U1728 = 1;
                     /* PED_ARRAY_SET_TETHERBOX */ sub_42610( ref l_U990, l_U1724, 1 );
                }
            }
        }
        else
        {
            l_U1728 = 1;
        }
        iVar2 = ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_65763( ref l_U990 )) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_65763( ref l_U966 ));
        if (iVar2 == 1)
        {
            l_U1199 =  /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_76701( ref l_U990 );
            if (NOT ( /* IS_PED_VALID */ sub_19402( l_U1199 )))
            {
                l_U1199 =  /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_76701( ref l_U966 );
            }
            if ( /* IS_PED_VALID */ sub_19402( l_U1199 ))
            {
                RESET_PED_TETHERING( l_U1199 );
                 /* P_TETHERPED */ sub_42731( ref l_U1721, l_U1199, 1 );
                 /* P_TETHERPED */ sub_42731( ref l_U1725, l_U1199, 1 );
            }
            ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 0 );
        }
        else if (iVar2 == 0)
        {
            if (NOT IS_LAST_MAN_STANDING_ACTIVE())
            {
                if (NOT (IS_BULLET_CAMERA_RUNNING( 0 )))
                {
                     /* WRITESCRIPTLOG */ sub_745( "SBA", "HANDLE_EVENTS: NYBAR_BAR_AREA complete, moving on to NYBAR_BAR_PASSOS_RUN_TO_DOOR_MIDSCENE", 0 );
                     /* LOADSEAMLESSCUTSCENE */ sub_12444( "vig_02_nybar_concat", 1 );
                    l_U1727 = 0;
                    l_U761 = 15;
                }
            }
        }
        break;
        case 15:
        if ( /* PLAY_CUTSCENE_VIG_02 */ sub_77160())
        {
            l_U1727 = 0;
             /* LOADSEAMLESSCUTSCENE */ sub_12444( "MID_00_NYBAR", 0 );
             /* LOAD_ASSETS_BASEMENT */ sub_11343( 1 );
             /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1810, 15000 );
             /* TAKE_PAINKILLER_ARRAY_SNAPSHOT */ sub_78706( ref l_U1201, ref l_U1204 );
             /* WRITESCRIPTLOG */ sub_745( "RJM", "HANDLE_EVENTS: Going to NYBAR_BAR_AREA_ALL_DEAD_PRE_PASSOS_MOVE", "***" );
            l_U761 = 18;
        }
        break;
        case 18:
        if (NOT l_U1741)
        {
            CLEAR_PED_DEFAULT_AIM(  /* PLAYER_PED_ID */ sub_1456() );
            l_U1741 = 1;
        }
        if (NOT l_U1740)
        {
            if ( /* IS_MAX_VALID */ sub_22677())
            {
                if (NOT (IS_PED_IN_COVER(  /* PLAYER_PED_ID */ sub_1456() )))
                {
                     /* WRITESCRIPTLOG */ sub_745( "RJM", "Setting SET_PLAYER_CAN_BE_PINNED_IN_COVER(TRUE)", 0 );
                    SET_PLAYER_CAN_BE_PINNED_IN_COVER( 1 );
                    l_U1740 = 1;
                }
            }
        }
         /* UPDATE_PASSOS_BAR_AND_BASEMENT */ sub_61649();
         /* UPDATE_VIGNETTE_01B */ sub_47424( 0 );
        if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_76355( ref l_U1469, 0 ))
        {
             /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1801, 600 );
        }
        if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U1801 ))
            {
                 /* P_DIAL_MAX_DOOR_BLOCK */ sub_79223();
            }
        }
         /* P_HANDLE_DIAL_MAX_HANG_OUT_BAR */ sub_79403();
        if (NOT l_U1213)
        {
            if ( /* UPDATE_PILL_VO */ sub_80588( "SNYC_FSPL", ref l_U1201, ref l_U1204 ))
            {
                l_U1213 = 1;
            }
        }
        if ( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( l_U1490 ))
        {
            l_U610 = 3;
             /* CREATE_BASEMENT_GUYS */ sub_18010();
             /* CREATE_BASEMENT_PAINKILLERS */ sub_21607();
             /* LOCK_ALLEY_DOORS */ sub_22015();
            ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
             /* WRITESCRIPTLOG */ sub_745( "SBA", "HANDLE_EVENTS: NYBAR_BAR_AREA complete, moving on to NYBAR_BASEMENT", 0 );
            l_U761 = 19;
        }
        break;
        case 19:
        if (IS_SCREEN_FADED_IN())
        {
            if (l_U1966)
            {
                 /* UPDATE_VIGNETTE_03 */ sub_80949();
            }
            else if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_76355( ref l_U1511, 0 ))
            {
                l_U1966 = 1;
            }
            if ( /* HASTIMERBEENACTIVATED */ sub_35524( ref l_U1765 ))
            {
                if ( /* ISTIMERDONE */ sub_24480( ref l_U1765 ))
                {
                     /* WRITESCRIPTLOG */ sub_745( "RJM", "Sending the second wave of dudes", 0 );
                     /* MOVE_FIRST_GROUP_SECOND_WAVE */ sub_83617();
                     /* DISABLETIMER */ sub_13219( ref l_U1765 );
                }
            }
            if (l_U1734)
            {
                 /* UPDATE_KITCHEN_CHARGERS_CREATION */ sub_83879();
            }
             /* UPDATE_PASSOS_BAR_AND_BASEMENT */ sub_61649();
            if ( /* HASTIMERBEENACTIVATED */ sub_35524( ref l_U1774 ))
            {
                if ( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( l_U1553 ))
                {
                    if (NOT l_U1738)
                    {
                        SET_PED_SUGGESTED_COVER_POINT( l_U1056, "ny_bar", "Corner_Position10" );
                         /* PED_TASK_COMBAT_PLAYER */ sub_85112( l_U1056, 1 );
                        l_U1738 = 1;
                    }
                     /* WRITESCRIPTLOG */ sub_745( "RJM", "Not gonna let you die, Passos!!!!", 0 );
                     /* DISABLETIMER */ sub_13219( ref l_U1774 );
                }
            }
            else if (( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( l_U1280 )) || ( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( l_U1259 )))
            {
                 /* WRITESCRIPTLOG */ sub_745( "RJM", "I'm totally gonna let you die, Passos!!!!", 0 );
                 /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1774, 15000 );
            }
            if (( /* ISTIMERDONE */ sub_24480( ref l_U1774 )) || ( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( l_U1238 )))
            {
                 /* P_DEACTIVATEPEDARRAY */ sub_43079( ref l_U1039 );
                 /* P_DEACTIVATEPEDARRAY */ sub_43079( ref l_U1084 );
                 /* P_DEACTIVATEPEDARRAY */ sub_43079( ref l_U1120 );
                 /* P_DEACTIVATEPED */ sub_43133( l_U1056 );
                if (l_U1727)
                {
                     /* WRITESCRIPTLOG */ sub_745( "RJM", "HANDLE_EVENTS: Moving to fail state STATE_FAIL_MIDSCENE_00B_BAR_COVER", 0 );
                    l_U655 = 3;
                }
                else
                {
                     /* WRITESCRIPTLOG */ sub_745( "RJM", "HANDLE_EVENTS: Moving to fail state STATE_FAIL_MIDSCENE_00B_HIGH_COVER", 0 );
                    l_U655 = 2;
                }
            }
            if ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_76355( ref l_U1700, 0 ))
            {
                 /* TASK_KITCHEN_WAVE1 */ sub_85903();
            }
            if (NOT l_U1737)
            {
                if ( /* F_DIAL_PASSOS_MAX_BASEMENT_SHOOT */ sub_86120())
                {
                    l_U1737 = 1;
                }
            }
            if (NOT l_U1726)
            {
                if ((( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_65763( ref l_U1084 )) == 0) || (( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_76355( ref l_U1595, 0 )) || ( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_76355( ref l_U1385, 0 ))))
                {
                     /* WRITESCRIPTLOG */ sub_745( "RJM", "TASK_KITCHEN_WAVE2 - Player hit trigger, only send out 2 guys", 0 );
                     /* TASK_KITCHEN_WAVE2 */ sub_87123();
                    l_U1726 = 1;
                }
            }
            if (l_U1726)
            {
                 /* UPDATE_KITCHEN_TETHERING */ sub_87590();
                iVar4 = (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_65763( ref l_U1039 )) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_65763( ref l_U1084 ))) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_65763( ref l_U1120 ));
                if (NOT (IS_PED_DEAD( l_U1056 )))
                {
                    iVar4++;
                }
                if (iVar4 == 1)
                {
                    l_U1199 =  /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_76701( ref l_U1039 );
                    if (NOT ( /* IS_PED_VALID */ sub_19402( l_U1199 )))
                    {
                        l_U1199 =  /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_76701( ref l_U1084 );
                    }
                    if (NOT ( /* IS_PED_VALID */ sub_19402( l_U1199 )))
                    {
                        l_U1199 =  /* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ sub_76701( ref l_U1120 );
                    }
                    if ( /* IS_PED_VALID */ sub_19402( l_U1056 ))
                    {
                        l_U1199 = l_U1056;
                        SET_PED_CAN_TRIGGER_BULLET_CAM( l_U1199, 1 );
                    }
                    if (l_U609 == 9)
                    {
                        l_U610 = 9;
                    }
                }
                else if (iVar4 == 0)
                {
                    if (NOT IS_BULLET_CAMERA_ACTIVE())
                    {
                         /* UNLOCK_ALLEY_DOORS */ sub_88193();
                         /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1819, 2000 );
                         /* RESETTIMER */ sub_12875( ref l_U1810 );
                         /* TAKE_PAINKILLER_ARRAY_SNAPSHOT */ sub_78706( ref l_U1207, ref l_U1210 );
                        l_U610 = 10;
                        l_U761 = 20;
                    }
                }
                else if (iVar4 <= 5)
                {
                    if (l_U609 == 7)
                    {
                        l_U610 = 7;
                    }
                };;;
            }
        }
        break;
        case 20:
         /* UPDATE_PASSOS_BAR_AND_BASEMENT */ sub_61649();
        if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U1819 ))
            {
                 /* P_DIAL_MAX_PASSOS_LAST_ENEMY */ sub_88403();
                 /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1810, 20000 );
            }
        }
         /* P_HANDLE_DIAL_MAX_HANG_OUT_BASEMENT */ sub_88627();
        if (NOT l_U1214)
        {
            if ( /* UPDATE_PILL_VO */ sub_80588( "SNYC_FSPL", ref l_U1207, ref l_U1210 ))
            {
                l_U1214 = 1;
            }
        }
        if ( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( l_U1637 ))
        {
            uVar5 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1456(), 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
            {
                if (( /* IS_WEAPON_TWO_HANDED */ sub_89753( uVar5 )) == 1)
                {
                     /* P_EQUIP_PLAYER_WITH_SINGLE_HANDED_WEAPON */ sub_90063( 0 );
                }
            }
        }
        if ( /* UPDATE_FORCEWALK_AND_TRIGGER_PAIR */ sub_90716( l_U1637, l_U1616, 1 ))
        {
             /* SET_WEATHER_AND_TIME_OF_DAY_FOR_NYBAR */ sub_17584( 4 );
             /* KILL_HANDLE_PASSOS_WAITING_SPEECH */ sub_91058( 0 );
             /* CLEANUP_BASEMENT */ sub_38107();
             /* UNLOAD_ASSETS_BAR */ sub_91241();
             /* WRITESCRIPTLOG */ sub_745( "SBA", "HANDLE_EVENTS: Timer done, moving on to NYBAR_MID00", 0 );
            l_U761 = 21;
        }
        break;
        case 21:
        if ( /* PLAY_MYC_MID_00 */ sub_91504( 1, 0 ))
        {
            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_1456(), 0 );
            if (NOT g_U2198)
            {
                g_U2198 = 1;
            }
             /* PED_CLEAR_ALL_ACTION_INTENTIONS */ sub_22845( g_U750 );
             /* WRITESCRIPTLOG */ sub_745( "SBA", "HANDLE_EVENTS: PLAY_MYC_MID_00 complete, going to NYBAR_DONE", 0 );
            l_U761 = 22;
        }
        break;
        case 22: break;
    }
    return;
}

/* P_INITIALIZE_SP_CHALLENGES */ void sub_40244()
{
    return;
}

/* P_REQUEST_UPSTAIRS_ASSETS */ void sub_40438()
{
     /* WRITESCRIPTLOG */ sub_745( "SP", "P_REQUEST_UPSTAIRS_ASSETS", 0 );
    if (g_U724 == 0)
    {
        if (((CUTSCENE_NAMED_IS_LOADING( l_U1999 )) == 0) AND ((CUTSCENE_IS_LOADED( l_U1999 )) == 0))
        {
            PRE_STREAM_SEAMLESS_CUTSCENE( l_U1999 );
        }
    }
     /* LOADMODEL */ sub_11417( g_U720, 0 );
     /* LOADMODEL */ sub_11417( g_U721, 0 );
     /* LOADMODEL */ sub_11417( g_U2248, 0 );
     /* LOADMODEL */ sub_11417( l_U890, 0 );
     /* LOADMODEL */ sub_11417( l_U905, 0 );
     /* LOADMODEL */ sub_11417( -695927253, 0 );
     /* LOADMODEL */ sub_11417( 2080318414, 0 );
     /* LOADWEAPON */ sub_1081( 406496141, 0 );
     /* LOADWEAPON */ sub_1081( -862236369, 0 );
     /* LOADWEAPON */ sub_1081( 434544317, 0 );
     /* LOADISEQ */ sub_11669( -2007826629, 0 );
     /* LOADISEQ */ sub_11669( -596711032, 0 );
     /* LOADISEQ */ sub_11669( 525357828, 0 );
     /* LOADISEQ */ sub_11669( 1066718456, 0 );
     /* LOADANIMDICT */ sub_12034( "FACE_PASNYB", 0, 0 );
     /* LOADACTIONTREE */ sub_12266( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act", 0 );
    return;
}

/* F_ARE_UPSTAIRS_ASSETS_LOADED */ int sub_40860()
{
    if ((IS_ACTION_TREE_LOADED( "LEVEL/S_NYBAR/S_NYBAR_PASSOS_FACIAL.act" )) AND (((HAS_ANIM_DICT_LOADED( "FACE_PASNYB", 0 )) == 1) AND (((ISEQ_IS_LOADED( 1066718456 )) == 1) AND (((ISEQ_IS_LOADED( 525357828 )) == 1) AND (((ISEQ_IS_LOADED( -596711032 )) == 1) AND (((ISEQ_IS_LOADED( -2007826629 )) == 1) AND (((HAS_WEAPON_LOADED( 434544317 )) == 1) AND (((HAS_WEAPON_LOADED( -862236369 )) == 1) AND (((HAS_WEAPON_LOADED( 406496141 )) == 1) AND (((HAS_MODEL_LOADED( 2080318414 )) == 1) AND (((HAS_MODEL_LOADED( g_U721 )) == 1) AND (((HAS_MODEL_LOADED( g_U720 )) == 1) AND (((HAS_MODEL_LOADED( -695927253 )) == 1) AND (((HAS_MODEL_LOADED( l_U905 )) == 1) AND (((HAS_MODEL_LOADED( l_U890 )) == 1) AND ((HAS_MODEL_LOADED( g_U2248 )) == 1))))))))))))))))
    {
        return 1;
    }
    return 0;
}

/* CREATE_POOL_HALL_GOONS */ void sub_41314()
{
    int I;

     /* WRITESCRIPTLOG */ sub_745( "SP", "CREATE_POOL_HALL_GOONS", 0 );
     /* PED_INITIALIZE */ sub_21250( ref l_U906, ref l_U919, -862236369, "AIT_NORMAL", 0, 25000, 2, 0, 25000 );
    if ( /* IS_PED_VALID */ sub_19402( l_U919 ))
    {
        SET_ROOM_FOR_PED_BY_NAME( l_U919, ref g_U2473 );
        SET_PED_COMBAT_MOVEMENT( l_U919, 0 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U919, 1 );
        SET_PED_VISIBLE( l_U919, 0 );
        SET_PED_AS_ONE_SHOT_KILL( l_U919, 1 );
        SET_PED_ALLOWED_TO_KNEEL_AND_FIRE( l_U919, 0 );
    }
     /* CLEANPEDARRAY */ sub_18087( ref l_U966 );
     /* PED_ARRAY_INITIALIZE */ sub_41598( ref l_U926, ref l_U966, ref l_U920, -862236369, 0.50000000, "AIT_NYBAR_POOL_HALL", 0, 0, 25000, 2, 0, 25000, "groundfloor" );
     /* PED_ARRAY_SET_ROOM_BY_NAME */ sub_20666( ref l_U966, g_U2473 );
     /* PED_ARRAY_SET_TETHERBOX */ sub_42610( ref l_U966, l_U1725, 1 );
    for ( I = 0; I < l_U966; I++ )
    {
        if (((IS_PED_DEAD( l_U966[I] )) == 0) AND ((DOES_PED_EXIST( l_U966[I] )) == 1))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U966[I], 1 );
            SET_PED_FLAG_FIRE_UNTIL_EMPTY_IN_COVER( l_U966[I], 1 );
            SET_PED_VISIBLE( l_U966[I], 0 );
        }
    }
     /* CLEANPEDARRAY */ sub_18087( ref l_U990 );
     /* PED_ARRAY_INITIALIZE */ sub_41598( ref l_U976, ref l_U990, ref l_U970, 434544317, 0.50000000, "AIT_NYBAR_POOL_HALL", 0, 0, 25000, 2, -862236369, 25000, "balcony" );
     /* PED_ARRAY_SET_ROOM_BY_NAME */ sub_20666( ref l_U990, g_U2473 );
     /* PED_ARRAY_SET_TETHERBOX */ sub_42610( ref l_U990, l_U1721, 1 );
     /* P_DEACTIVATEPEDARRAY */ sub_43079( ref l_U990 );
    for ( I = 0; I < l_U990; I++ )
    {
        if (((IS_PED_DEAD( l_U990[I] )) == 0) AND ((DOES_PED_EXIST( l_U990[I] )) == 1))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U990[I], 1 );
            SET_PED_VISIBLE( l_U990[I], 0 );
        }
    }
    return;
}

/* PED_ARRAY_INITIALIZE */ void sub_41598(unknown uParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5, boolean bParam6, unknown uParam7, unknown uParam8, unknown uParam9, int iParam10, unknown uParam11, unknown uParam12)
{
    int I;
    unknown uVar16;

    if ((uParam0^) != (uParam1^))
    {
        SCRIPT_ASSERT( "PED_ARRAY_INITIALIZE - Array sizes don't match!!", 0 );
        return;
    }
     /* P_SETUP_AI_GROUP */ sub_18251( uParam2, uParam4, 0 );
    if (IS_STRING_NULL( uParam12 ))
    {
        uParam12 = l_U6;
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* CLEANPED */ sub_18137( (uParam1^)[I] );
        (uParam1^)[I] =  /* CREATEPED */ sub_18676( ref (uParam0^)[I] );
        if ( /* IS_PED_VALID */ sub_19402( (uParam1^)[I] ))
        {
            SET_PED_AI_TEMPLATE( (uParam1^)[I], uParam5 );
            SET_PED_ALERTNESS( (uParam1^)[I], uParam9 );
            SET_PED_ALLOWED_TO_SURRENDER( (uParam1^)[I], 0 );
             /* P_QUICK_ADD_PED_TO_GROUP */ sub_19529( (uParam1^)[I], uParam2 );
            if (iParam3 != -1569615261)
            {
                uVar16 =  /* F_GIVEPEDWEAPON */ sub_4042( (uParam1^)[I], iParam3, uParam8, 0, 0 );
            }
            if (iParam10 != 0)
            {
                 /* F_GIVEPEDWEAPONTOHOLSTER */ sub_3247( (uParam1^)[I], iParam10, 0, uParam11, 0 );
            }
            if (bParam6)
            {
                 /* PED_SET_ENGAGEMENT_RANGES */ sub_41956( (uParam1^)[I], iParam3 );
            }
            switch (uParam7)
            {
                case 0: break;
                case 1:
                ENABLE_WEAPON_ATTACHMENT( uVar16, 13, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar16, 13, 1 );
                break;
                case 2:
                ENABLE_WEAPON_ATTACHMENT( uVar16, 14, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar16, 14, 1 );
                break;
                case 3:
                ENABLE_WEAPON_ATTACHMENT( uVar16, 12, 1 );
                TOGGLE_WEAPON_ATTACHMENT( uVar16, 12, 1 );
                break;
            }
        }
    }
     /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_20864( uParam1, uParam12 );
    return;
}

/* PED_SET_ENGAGEMENT_RANGES */ void sub_41956(unknown uParam0, unknown uParam1)
{
    switch (uParam1)
    {
        case -1569615261:
        case 406496141:
        case -862236369:
        case 456708483:
        case -1464892298:
        case 68019059:
        case -612753081:
        case -820634585:
        SET_PED_COMBAT_RANGE_MAX( uParam0, 10.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 1.00000000 );
        break;
        case 434544317:
        case 1845102363:
        case -168327769:
        case -184942895:
        case 514118749:
        case 1964270085:
        case -691403429:
        case 1478009203:
        case -1404433099:
        case 1194438308:
        SET_PED_COMBAT_RANGE( uParam0, 1 );
        SET_PED_COMBAT_RANGE_MAX( uParam0, 20.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 1.00000000 );
        break;
        case -1013714740:
        case -1074756423:
        case 1308526797:
        case 840671040:
        case 57534114:
        case 724901397:
        case 1992962408:
        SET_PED_COMBAT_RANGE( uParam0, 2 );
        SET_PED_COMBAT_RANGE_MAX( uParam0, 30.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 1.00000000 );
        break;
        case 1224272620:
        case 10648147:
        case 377623895:
        case 319712764:
        case -110877124:
        case -1659006841:
        SET_PED_COMBAT_RANGE( uParam0, 3 );
        SET_PED_COMBAT_RANGE_MAX( uParam0, 50.00000000 );
        SET_PED_COMBAT_RANGE_MIN( uParam0, 5.00000000 );
        break;
    }
    return;
}

/* PED_ARRAY_SET_TETHERBOX */ void sub_42610(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* PED_SET_TETHERBOX */ sub_42672( ref (uParam0^)[I], uParam1, uParam2 );
    }
    return;
}

/* PED_SET_TETHERBOX */ void sub_42672(unknown uParam0, unknown uParam1, unknown uParam2)
{
    if ( /* IS_PED_VALID */ sub_19402( (uParam0^) ))
    {
        RESET_PED_TETHERING( (uParam0^) );
         /* P_TETHERPED */ sub_42731( ref uParam1, (uParam0^), uParam2 );
    }
    return;
}

/* P_TETHERPED */ void sub_42731(int iParam0, unknown uParam1, unknown uParam2)
{
    if (((IS_PED_DEAD( uParam1 )) == 0) AND ((DOES_PED_EXIST( uParam1 )) == 1))
    {
        SET_PED_TETHERING_ADD_BOX( uParam1, iParam0->_fU0 );
        SET_PED_TETHERING_OPTION( uParam1, uParam2 );
    }
    return;
}

/* P_DEACTIVATEPEDARRAY */ void sub_43079(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
         /* P_DEACTIVATEPED */ sub_43133( (uParam0^)[I] );
    }
    return;
}

/* P_DEACTIVATEPED */ void sub_43133(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 1 );
        SET_PED_VISIBLE( uParam0, 0 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 0 );
        FREEZE_PED_POSITION( uParam0, 1 );
        SET_PED_COLLISION( uParam0, 0 );
        SET_PED_PROOFS( uParam0, 1, 1, 1, 1, 1 );
    }
    return;
}

/* CREATE_BARTENDER_AND_GIRL */ void sub_43477()
{
     /* WRITESCRIPTLOG */ sub_745( "SP", "CREATE_BARTENDER_AND_GIRL", 0 );
     /* CLEANPED */ sub_18137( l_U889 );
    l_U889 =  /* CREATEPED */ sub_18676( ref l_U876 );
    if ( /* IS_PED_VALID */ sub_19402( l_U889 ))
    {
        SET_ROOM_FOR_PED_BY_NAME( l_U889, ref g_U2473 );
        SET_PED_NAME_DEBUG( l_U889, "GUY_FROM_NYBAR" );
        SET_PED_AS_ONE_SHOT_KILL( l_U889, 1 );
        SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( l_U889, 0 );
        SET_PED_STAND_GROUND_ON_PLAYER_IMPACT( l_U889, 1 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U889, 1 );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( l_U889, 1 );
        if ((IS_GERMAN_VERSION() == 1) || (IS_JAPANESE_GAME()))
        {
            SET_PED_CAN_BE_DAMAGED_BY_RELATIONSHIP_GROUP( l_U889, 0, 0 );
            SET_PED_GORE_FROM_PLAYER( l_U889, 0 );
        }
    }
     /* CLEANPED */ sub_18137( l_U904 );
    l_U904 =  /* CREATEPED */ sub_18676( ref l_U891 );
    if ( /* IS_PED_VALID */ sub_19402( l_U904 ))
    {
        SET_ROOM_FOR_PED_BY_NAME( l_U904, ref g_U2473 );
        SET_PED_NAME_DEBUG( l_U904, "GIRL_FROM_NYBAR" );
        SET_PED_AS_ONE_SHOT_KILL( l_U904, 1 );
        SET_PED_CAN_RAGDOLL_FROM_PLAYER_IMPACT( l_U904, 0 );
        SET_PED_STAND_GROUND_ON_PLAYER_IMPACT( l_U904, 1 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U904, 1 );
        SET_PED_ONLY_DAMAGED_BY_PLAYER( l_U904, 1 );
        if ((IS_GERMAN_VERSION() == 1) || (IS_JAPANESE_GAME()))
        {
            SET_PED_CAN_BE_DAMAGED_BY_RELATIONSHIP_GROUP( l_U904, 0, 0 );
            SET_PED_GORE_FROM_PLAYER( l_U904, 0 );
        }
    }
    return;
}

/* CREATE_BAR_PLACEMENTS */ void sub_44065()
{
     /* WRITESCRIPTLOG */ sub_745( "SBA", "CREATE_BAR_PLACEMENTS", "***" );
     /* P_CREATE_S_NY1_GG_19_01 */ sub_44140();
     /* P_CREATE_S_NY1_GG_19_02 */ sub_44961();
    l_U1201[0] =  /* CREATEPLACEMENT */ sub_21733( -4072149, -5.44000000, -308.47000000, 0.78000000, 0, 0, 0, 0, 0, 0, 1119092736 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1201[0], ref g_U2473 );
    l_U1201[1] =  /* CREATEPLACEMENT */ sub_21733( -4072149, -5.34000000, -308.72000000, 0.78000000, 0, 0, 1.00000000, 0, 0, 0, 1119092736 );
    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( l_U1201[1], ref g_U2473 );
    return;
}

/* P_CREATE_S_NY1_GG_19_01 */ void sub_44140()
{
     /* WRITESCRIPTLOG */ sub_745( "CO", "P_CREATE_S_NY1_GG_19_01", 0 );
     /* P_CREATECOLLECTIBLESTRUCT */ sub_44282( ref g_U665, g_U720, -1850511382, -97605682, 2.15000000, -299.70000000, -0.24000000, 1.50000000, 0.00000000, g_U719, "GtaMloRoom_Grnd" );
     /* P_CREATECOLLECTIBLE */ sub_44439( ref g_U665 );
    return;
}

/* P_CREATECOLLECTIBLESTRUCT */ void sub_44282(int iParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10)
{
    if (NOT IS_ARCADE_MODE_ACTIVE())
    {
        iParam0->_fU4 = uParam1;
        iParam0->_fU8 = uParam2;
        iParam0->_fU12 = uParam3;
        iParam0->_fU16 = {uParam4};
        iParam0->_fU28 = {uParam7};
        StrCopy( ref iParam0->_fU40, uParam10, 32 );
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_745( "CO", "NO GOLDEN GUNS FOR ARCADE", 0 );
    }
    return;
}

/* P_CREATECOLLECTIBLE */ void sub_44439(int iParam0)
{
     /* WRITESCRIPTLOG */ sub_745( "CO", "P_CreateCollectible", 0 );
    if (NOT IS_ARCADE_MODE_ACTIVE())
    {
        if (( /* F_HAS_COLLECTIBLE_BEEN_COLLECTED */ sub_44522( iParam0->_fU12 )) == 1)
        {
             /* WRITESCRIPTLOG */ sub_745( "CO", "HAS BEEN COLLECTED.", 0 );
        }
        else
        {
             /* WRITESCRIPTLOG */ sub_745( "CO", "has never been collected.", 0 );
        }
        if (( /* F_HAS_COLLECTIBLE_BEEN_COLLECTED */ sub_44522( iParam0->_fU12 )) == 0)
        {
             /* CLEANPLACEMENT */ sub_37939( iParam0->_fU0 );
            iParam0->_fU0 =  /* CREATEPLACEMENT */ sub_21733( iParam0->_fU8, iParam0->_fU16, iParam0->_fU28, 1, 0, 0, 1119092736 );
            if (NOT (IS_STRING_NULL( iParam0 + 40 )))
            {
                if ((DOES_PLACEMENT_EXIST( iParam0->_fU0 )) == 1)
                {
                     /* WRITESCRIPTLOG */ sub_745( "CO", "Added collectible to interior", 0 );
                    ADD_PLACEMENT_TO_INTERIOR_ROOM_BY_NAME( iParam0->_fU0, iParam0 + 40 );
                }
            }
        }
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_745( "CO", "NO GOLDEN GUNS FOR ARCADE", 0 );
    }
    return;
}

/* F_HAS_COLLECTIBLE_BEEN_COLLECTED */ int sub_44522(unknown uParam0)
{
    unknown uVar3;
    float fVar4;

    if (IS_COLLECTABLE_ENABLED() == 0)
    {
        return 1;
    }
    uVar3 = uParam0;
    fVar4 = STAT_HASH_GET_FLOAT( uVar3 );
    if (ARE_SP_STATS_LOADED() == 1)
    {
        if ((STAT_HASH_EXISTS( uVar3 )) == 1)
        {
            if (fVar4 > 0.00000000)
            {
                return 1;
            }
        }
    }
    return 0;
}

/* P_CREATE_S_NY1_GG_19_02 */ void sub_44961()
{
     /* WRITESCRIPTLOG */ sub_745( "CO", "P_CREATE_S_NY1_GG_19_02", 0 );
     /* P_CREATECOLLECTIBLESTRUCT */ sub_44282( ref g_U683, g_U721, 1523319324, -395770813, -2.67000000, -334.09000000, 3.54000000, 0.00000000, 0.00000000, g_U719, "GtaMloRoom_Grnd" );
     /* P_CREATECOLLECTIBLE */ sub_44439( ref g_U683 );
    return;
}

/* P_ACTIVATE_POOL_HALL_GOONS */ void sub_45770()
{
     /* WRITESCRIPTLOG */ sub_745( "SP", "P_ACTIVATE_POOL_HALL_GOONS", 0 );
    if (((IS_PED_DEAD( l_U919 )) == 0) AND ((DOES_PED_EXIST( l_U919 )) == 1))
    {
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U919, 0 );
        SET_PED_VISIBLE( l_U919, 1 );
    }
     /* PED_ARRAY_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_21017( ref l_U966, 0 );
     /* PED_ARRAY_SET_VISIBILITY */ sub_45924( ref l_U966, 1 );
     /* PED_TASK_COMBAT_MOVE_TO_COVER */ sub_46116( l_U966[0], "GenCover", "47E254B1_B582EF9A_Corner2", 0, 0 );
    return;
}

/* PED_ARRAY_SET_VISIBILITY */ void sub_45924(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* PED_SET_VISIBILITY */ sub_45986( (uParam0^)[I], uParam1 );
    }
    return;
}

/* PED_SET_VISIBILITY */ void sub_45986(unknown uParam0, unknown uParam1)
{
    if ( /* IS_PED_VALID */ sub_19402( uParam0 ))
    {
        SET_PED_VISIBLE( uParam0, uParam1 );
    }
    return;
}

/* PED_TASK_COMBAT_MOVE_TO_COVER */ void sub_46116(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    if ( /* IS_PED_VALID */ sub_19402( uParam0 ))
    {
        CLEAR_PED_TASKS_IMMEDIATELY( uParam0 );
         /* PED_SET_LOCK_TO_COVER */ sub_46182( ref uParam0, uParam4 );
        TASK_COMBAT_MOVE_TO_COVER( uParam0, uParam1, uParam2, uParam3 );
    }
    return;
}

/* PED_SET_LOCK_TO_COVER */ void sub_46182(unknown uParam0, unknown uParam1)
{
    if ( /* IS_PED_VALID */ sub_19402( (uParam0^) ))
    {
        SET_PED_FLAG_LOCK_TO_COVER( (uParam0^), uParam1 );
    }
    return;
}

/* CREATE_DEAD_TONY_AND_MARTY */ void sub_46280()
{
     /* CLEANPED */ sub_18137( l_U1142 );
    l_U1142 =  /* CREATEPED */ sub_18676( ref l_U1129 );
    if ( /* IS_PED_VALID */ sub_19402( l_U1142 ))
    {
        SET_ROOM_FOR_PED_BY_NAME( l_U1142, ref g_U2473 );
        SET_PED_VISIBLE( l_U1142, 0 );
         /* P_CREATE_DEAD_BODY */ sub_46393( l_U1142, 3 );
    }
     /* CLEANPED */ sub_18137( l_U1170 );
    l_U1170 =  /* CREATEPED */ sub_18676( ref l_U1157 );
    if ( /* IS_PED_VALID */ sub_19402( l_U1170 ))
    {
        SET_ROOM_FOR_PED_BY_NAME( l_U1170, ref g_U2473 );
        SET_PED_VISIBLE( l_U1170, 0 );
         /* P_CREATE_DEAD_BODY */ sub_46393( l_U1170, 4 );
    }
    return;
}

/* P_CREATE_DEAD_BODY */ void sub_46393(unknown uParam0, unknown uParam1)
{
    char[32] cVar4;
    char[32] cVar12;

    StrCopy( ref cVar4, "DAM_DEAD", 32 );
    switch (uParam1)
    {
        case 0:
        StrCopy( ref cVar12, "MED_DEAD_POSE_FRONT_01", 32 );
        break;
        case 1:
        StrCopy( ref cVar12, "MED_DEAD_POSE_FRONT_02", 32 );
        break;
        case 2:
        StrCopy( ref cVar12, "MED_DEAD_POSE_FRONT_03", 32 );
        break;
        case 3:
        StrCopy( ref cVar12, "MED_DEAD_POSE_BACK_01", 32 );
        break;
        case 4:
        StrCopy( ref cVar12, "MED_DEAD_POSE_BACK_02", 32 );
        break;
        case 5:
        StrCopy( ref cVar12, "MED_DEAD_POSE_BACK_03", 32 );
        break;
        case 6:
        StrCopy( ref cVar12, "MED_DEAD_POSE_BACK_04", 32 );
        break;
        case 7:
        StrCopy( ref cVar12, "MED_DEAD_POSE_RIGHT_01", 32 );
        break;
        case 8:
        StrCopy( ref cVar12, "MED_DEAD_POSE_RIGHT_02", 32 );
        break;
        case 9:
        StrCopy( ref cVar12, "MED_DEAD_POSE_RIGHT_03", 32 );
        break;
        case 10:
        StrCopy( ref cVar12, "MED_DEAD_POSE_RIGHT_04", 32 );
        break;
        case 11:
        StrCopy( ref cVar12, "MED_DEAD_POSE_LEFT_01", 32 );
        break;
        case 12:
        StrCopy( ref cVar12, "MED_DEAD_POSE_LEFT_02", 32 );
        break;
        case 13:
        StrCopy( ref cVar12, "MED_DEAD_POSE_LEFT_03", 32 );
        break;
        case 14:
        StrCopy( ref cVar12, "MED_DEAD_POSE_LEFT_04", 32 );
        break;
        case 15:
        StrCopy( ref cVar12, "MED_DEAD_POSE_SIT_01", 32 );
        break;
        case 16:
        StrCopy( ref cVar12, "MED_DEAD_POSE_SIT_02", 32 );
        break;
        default:
        StrCopy( ref cVar12, "MED_DEAD_POSE_FRONT_01", 32 );
        break;
    }
    REQUEST_ANIM_DICT( ref cVar4, 0 );
    "[doubled result, dropped if not asigned]";
    while (NOT (HAS_ANIM_DICT_LOADED( ref cVar4, 0 )))
    {
        WAIT( 0 );
         /* WRITE_STRING */ sub_3651( "Waiting for anim dict to load..." );
    }
    if (((IS_PED_DEAD( uParam0 )) == 0) AND ((DOES_PED_EXIST( uParam0 )) == 1))
    {
        ENABLE_PED_PAIN( uParam0, 0 );
        OVERRIDE_MOVER_PHYSICS_ON_RAGDOLL_SLEEP( uParam0, 1 );
        SET_PED_CORPSE_FROM_ANIM( uParam0, ref cVar4, ref cVar12, 1.00000000, 1 );
    }
    return;
}

/* UPDATE_VIGNETTE_01B */ void sub_47424(boolean bParam0)
{
    switch (l_U764)
    {
        case 0:
        if ((ISEQ_QUERY_STATE( -596711032, 3 )) == 0)
        {
            ISEQ_REGISTER_ENTITY( -596711032, "bartender", l_U889, 0 );
            ISEQ_REGISTER_ENTITY( -596711032, "bargirl", l_U904, 0 );
            ISEQ_START( -596711032 );
        }
         /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_01B: going to VIG_01B_START_CONVERSATION_TIMER", " " );
        l_U764 = 1;
        break;
        case 1:
         /* CREATETIMER */ sub_13297( ref l_U1957, 2500, 1, 0 );
         /* STARTTIMER */ sub_24336( ref l_U1957 );
         /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_01B: going to VIG_01B_WAIT_FOR_FIRST_CONVERSATION", " " );
        l_U764 = 2;
        break;
        case 2:
         /* CHECK_FOR_MAX_SHOOTING_NEAR_CIVILIANS */ sub_47832();
        if ( /* ARE_CIVILIANS_DEAD */ sub_49731())
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_01B: going to VIG_01B_EITHER_CIVILIAN_DIED", " " );
            l_U764 = 5;
        }
        if ( /* ISTIMERDONE */ sub_24480( ref l_U1957 ))
        {
             /* DISABLETIMER */ sub_13219( ref l_U1957 );
             /* CREATETIMER */ sub_13297( ref l_U1957, 30000, 1, 0 );
             /* STARTTIMER */ sub_24336( ref l_U1957 );
            if (bParam0)
            {
                 /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( ref l_U1947 );
                 /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 0, l_U904, "BAR_GIRL_F_AVG", ref l_U1947, 2, 0 );
                 /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1, l_U889, "BAR_TEND_FAT", ref l_U1947, 2, 0 );
                 /* PLAY_SINGLE_SPEECH */ sub_48670( "SNYC_VIG01B", ref l_U1947, 8, 1 );
            }
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_01B: going to VIG_01B_WAIT_FOR_SECOND_CONVERSATION", " " );
            l_U764 = 3;
        }
        break;
        case 3:
         /* CHECK_FOR_MAX_SHOOTING_NEAR_CIVILIANS */ sub_47832();
        if ( /* ARE_CIVILIANS_DEAD */ sub_49731())
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_01B: going to VIG_01B_EITHER_CIVILIAN_DIED", " " );
            l_U764 = 5;
        }
        if ( /* ISTIMERDONE */ sub_24480( ref l_U1957 ))
        {
            if (bParam0)
            {
                 /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( ref l_U1947 );
                 /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 0, l_U904, "BAR_GIRL_F_AVG", ref l_U1947, 2, 0 );
                 /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1, l_U889, "BAR_TEND_FAT", ref l_U1947, 2, 0 );
                 /* PLAY_SINGLE_SPEECH */ sub_48670( "SNYC_VIG01C", ref l_U1947, 8, 1 );
            }
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_01B: going to VIG_01B_WAIT_FOR_POSSIBLE_MURDER", " " );
            l_U764 = 4;
        }
        break;
        case 4:
         /* CHECK_FOR_MAX_SHOOTING_NEAR_CIVILIANS */ sub_47832();
        if ( /* ARE_CIVILIANS_DEAD */ sub_49731())
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_01B: going to VIG_01B_EITHER_CIVILIAN_DIED", " " );
            l_U764 = 5;
        }
        break;
        case 5:
        SET_ADRENALINE_AMT( 0.00000000 );
         /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_01B: going to VIG_01B_ONE_LEFT_ALIVE", " " );
        l_U764 = 6;
        break;
        case 6:
        if (NOT ( /* IS_PED_VALID */ sub_19402( l_U1200 )))
        {
            SET_ADRENALINE_AMT( 0.00000000 );
             /* P_DIAL_PASSOS_CIV_KILLED */ sub_51301();
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_01B: Remaining ped died.  Going to VIG_01B_DONE", " " );
            l_U764 = 7;
        }
         /* CHECK_FOR_MAX_SHOOTING_NEAR_CIVILIANS */ sub_47832();
        break;
        case 7: break;
    }
    return;
}

/* CHECK_FOR_MAX_SHOOTING_NEAR_CIVILIANS */ void sub_47832()
{
    int iVar2;
    int iVar3;

    iVar2 = 0;
    iVar3 = 0;
    if ( /* HAS_MAX_SHOT_NEAR_PED */ sub_47898( l_U889, 2.00000000 ))
    {
        PED_SET_ACTION_INTENTION( l_U889, 58, 1000, 0, 0, 0 );
        iVar2 = 1;
    }
    if ( /* HAS_MAX_SHOT_NEAR_PED */ sub_47898( l_U904, 2.00000000 ))
    {
        PED_SET_ACTION_INTENTION( l_U904, 58, 1000, 0, 0, 0 );
        iVar3 = 1;
    }
    if ((iVar3) || (iVar2))
    {
        if ((NOT (IS_SCRIPTED_SPEECH_PLAYING( l_U889 ))) AND (NOT (IS_SCRIPTED_SPEECH_PLAYING( l_U904 ))))
        {
             /* PLAY_RANDOM_FLINCH_VO */ sub_48115();
        }
    }
    return;
}

/* HAS_MAX_SHOT_NEAR_PED */ int sub_47898(unknown uParam0, unknown uParam1)
{
    int iVar4;

    if ( /* IS_PED_VALID */ sub_19402( uParam0 ))
    {
        if (HAS_BULLET_IMPACTED_IN_AREA( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 ), uParam1, ref iVar4 ))
        {
            if (iVar4 == ( /* PLAYER_PED_ID */ sub_1456()))
            {
                return 1;
            }
        }
    }
    return 0;
}

/* PLAY_RANDOM_FLINCH_VO */ void sub_48115()
{
    int iVar2;

     /* WRITESCRIPTLOG */ sub_745( "RJM", "PLAY_RANDOM_FLINCH_VO", 0 );
    iVar2 = GET_RANDOM_INT_IN_RANGE( 0, 2 );
    DISPLAYF( "iRand = {}", 1, 513, iVar2 );
    if (iVar2 == 0)
    {
        if ( /* IS_PED_VALID */ sub_19402( l_U889 ))
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "Playing reaction V.O. for the Bartender", 0 );
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( ref l_U2108 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1, l_U889, "BAR_TEND_FAT", ref l_U2108, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_48670( "SNYC_VIG01E", ref l_U2108, 8, 1 );
        }
    }
    else if (iVar2 == 1)
    {
        if ( /* IS_PED_VALID */ sub_19402( l_U904 ))
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "Playing reaction V.O. for the Girl", 0 );
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( ref l_U2098 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1, l_U904, "Bar_Girl_F_Avg", ref l_U2098, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_48670( "SNYC_VIG01D", ref l_U2098, 8, 1 );
        }
    }
    return;
}

/* RESET_SCRIPT_SPEECH_STRUCT */ void sub_48304(int iParam0)
{
    iParam0->_fU4 = -1;
    iParam0->_fU16 = 0;
    iParam0->_fU20 = 0;
    iParam0->_fU24 = 0;
    iParam0->_fU28 = 0;
    iParam0->_fU32 = 0;
    iParam0->_fU36 = 0;
    return;
}

/* ADD_PED_FOR_SCRIPT_SPEECH */ void sub_48424(int iParam0, unknown uParam1, unknown uParam2, int iParam3, unknown uParam4, unknown uParam5)
{
    if (iParam3->_fU32)
    {
        ;
    }
    else if (iParam3->_fU36 == 0)
    {
        iParam3->_fU36 = 1;
        iParam3->_fU4 = CREATE_NEW_SCRIPTED_CONVERSATION( uParam4 );
        if (iParam3->_fU4 == -1)
        {
            iParam3->_fU32 = 1;
        }
    }
    if ((iParam0 < 9) AND ((iParam0 >= 0) AND ((iParam3->_fU4 < 4) AND (iParam3->_fU4 >= 0))))
    {
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU0 = uParam1;
        g_U16[iParam3->_fU4]._fU16[iParam0]._fU4 = GET_HASH_KEY( uParam2 );
        if (NOT (IS_PED_INJURED( uParam1 )))
        {
            SET_PED_CAN_PLAY_AMBIENT_ANIMS( uParam1, uParam5 );
        }
    }
    return;
}

/* PLAY_SINGLE_SPEECH */ void sub_48670(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3)
{
    return  /* PLAY_SINGLE_SPEECH_FROM_BLOCK */ sub_48715( uParam0, ref g_U157._fU0, uParam1, uParam2, uParam3 );
}

/* PLAY_SINGLE_SPEECH_FROM_BLOCK */ void sub_48715(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    char[16] cVar7;
    char[12] cVar11;
    unknown uVar14;
    unknown uVar15;
    unknown uVar16;
    unknown uVar17;
    unknown uVar18;
    unknown uVar19;

    StrCopy( ref cVar7, uParam1, 16 );
    array(ref cVar11, 2);
    StrCopy( ref cVar11[0], uParam0, 16 );
    StrCopy( ref cVar11[1], "END", 16 );
    return  /* PLAYSPEECHMAIN */ sub_48802( ref cVar11, uParam2, uParam3, 0, 0, 0, 0, ref cVar7, uParam4 );
}

/* PLAYSPEECHMAIN */ int sub_48802(unknown uParam0, int iParam1, unknown uParam2, boolean bParam3, boolean bParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8)
{
    int I;
    unknown uVar12;
    unknown uVar13;

    if (iParam1->_fU4 == -1)
    {
        return 0;
    }
    iParam1->_fU0 = uParam2;
    if (NOT ( /* CANTHISSPEECHBEPLAYED */ sub_48854( iParam1 )))
    {
        return 0;
    }
    uVar12 = iParam1->_fU4;
    uVar13 = GET_HASH_KEY( ref (uParam0^)[0] );
    iParam1->_fU16 = uVar13;
    SET_CONVERSATION_CHECK_HASH( uVar12, uVar13 );
    g_U157._fU132 = 0;
    iParam1->_fU24 = 0;
    iParam1->_fU28 = uParam5;
    if (bParam3)
    {
        if (iParam1->_fU20)
        {
            iParam1->_fU20 = 0;
        }
    }
    else
    {
        iParam1->_fU20 = 0;
        if (bParam4)
        {
            iParam1->_fU12 = uParam6;
            iParam1->_fU20 = 0;
        }
        else
        {
            iParam1->_fU12 = 0;
            iParam1->_fU20 = 0;
        }
    }
    iParam1->_fU24 = bParam4;
    for ( I = 0; I <= 24; I++ )
    {
        StrCopy( ref g_U233[uVar12][I], "END", 16 );
    }
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        g_U233[uVar12][I] = {(uParam0^)[I]};
    }
    g_U192[uVar12] = {(iParam1^)};
     /* COPYHIDDENSPEECHSTUCT */ sub_49372( ref g_U16[uVar12], ref g_U157 );
    StrCopy( ref g_U16[uVar12]._fU0, uParam7, 16 );
    g_U16[uVar12]._fU136 = uParam8;
    g_U11[iParam1->_fU4] = 1;
    return 1;
}

/* CANTHISSPEECHBEPLAYED */ int sub_48854(int iParam0)
{
    switch (g_U11[iParam0->_fU4])
    {
        case 1:
        case 2:
        return 0;
        break;
    }
    if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
    {
        if (g_U1[iParam0->_fU4] > iParam0->_fU0)
        {
            return 0;
        }
        STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, 0, 0 );
    }
    g_U1[iParam0->_fU4] = iParam0->_fU0;
    g_U6[iParam0->_fU4]++;
    if (g_U6[iParam0->_fU4] > 100000)
    {
        g_U6[iParam0->_fU4] = 1;
    }
    iParam0->_fU8 = g_U6[iParam0->_fU4];
    return 1;
}

/* COPYHIDDENSPEECHSTUCT */ void sub_49372(int iParam0, int iParam1)
{
    int I;

    iParam0->_fU0 = {iParam1->_fU0};
    for ( I = 0; I <= 8; I++ )
    {
        iParam0->_fU92[I] = iParam1->_fU92[I];
    }
    iParam0->_fU132 = iParam1->_fU132;
    iParam0->_fU136 = iParam1->_fU136;
    return;
}

/* ARE_CIVILIANS_DEAD */ int sub_49731()
{
    if (NOT ( /* IS_PED_VALID */ sub_19402( l_U889 )))
    {
         /* WRITESCRIPTLOG */ sub_745( "RJM", "ARE_CIVILIANS_DEAD - Bartender died", 0 );
         /* KILL_SPEECH */ sub_49833( ref l_U2108, 0 );
         /* KILL_SPEECH */ sub_49833( ref l_U2098, 0 );
         /* KILL_SPEECH */ sub_49833( ref l_U1947, 0 );
         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( ref l_U2098 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1, l_U904, "Bar_Girl_F_Avg", ref l_U2098, 2, 0 );
         /* PLAY_SINGLE_SPEECH */ sub_48670( "SNYC_VIG01F", ref l_U2098, 8, 1 );
        l_U1200 = l_U904;
        PED_SET_ACTION_INTENTION( l_U904, 47, 3000, 0, 0, 0 );
        return 1;
    }
    if (NOT ( /* IS_PED_VALID */ sub_19402( l_U904 )))
    {
         /* WRITESCRIPTLOG */ sub_745( "RJM", "ARE_CIVILIANS_DEAD - Bar Girl died", 0 );
         /* KILL_SPEECH */ sub_49833( ref l_U2108, 0 );
         /* KILL_SPEECH */ sub_49833( ref l_U2098, 0 );
         /* KILL_SPEECH */ sub_49833( ref l_U1947, 0 );
         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( ref l_U2108 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1, l_U889, "Bar_Tend_fat", ref l_U2108, 2, 0 );
         /* PLAY_SINGLE_SPEECH */ sub_48670( "SNYC_VIG01G", ref l_U2108, 8, 1 );
        l_U1200 = l_U889;
        PED_SET_ACTION_INTENTION( l_U889, 47, 3000, 0, 0, 0 );
        return 1;
    }
    return 0;
}

/* KILL_SPEECH */ void sub_49833(int iParam0, unknown uParam1)
{
    if (NOT ( /* IS_SCRIPT_SPEECH_STRUCT_VALID */ sub_49861( (iParam0^) )))
    {
        ;
    }
    else
    {
        PRINTSTRING( "\n KILL SPEECH CALLED***************************************" );
        if (IS_SCRIPTED_CONVERSATION_ONGOING( iParam0->_fU4 ))
        {
            if (iParam0->_fU8 == g_U6[iParam0->_fU4])
            {
                STOP_SCRIPTED_CONVERSATION( iParam0->_fU4, uParam1, 0 );
            }
        }
    }
    return;
}

/* IS_SCRIPT_SPEECH_STRUCT_VALID */ boolean sub_49861(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    int iVar12;

    if (uParam0._fU4 < 0)
    {
        return 0;
    }
    iVar12 = GET_CHECK_HASH_FROM_CONVERSATION_ID( uParam0._fU4 );
    return (uParam0._fU16 == iVar12) AND (iVar12 != 0);
}

/* P_DIAL_PASSOS_CIV_KILLED */ void sub_51301()
{
     /* WRITESCRIPTLOG */ sub_745( "SBA", "P_DIAL_PASSOS_CIV_KILLED", "***" );
    if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )))
        {
             /* KILL_SPEECH */ sub_49833( ref l_U1947, 0 );
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( ref l_U1846 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1, g_U750, "PASSOS", ref l_U1846, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 0,  /* PLAYER_PED_ID */ sub_1456(), "MAX", ref l_U1846, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_48670( "SNYC_HBPB", ref l_U1846, 8, 1 );
        }
    }
    return;
}

/* F_HANDLE_04_01_CUTSCENE */ int sub_51881()
{
    int iVar2;
    int iVar3;

    switch (l_U2000)
    {
        case 0: break;
        case 1:
         /* WRITESCRIPTLOG */ sub_745( "SP", "eCutscene0401State = CUTSCENE_SETUP", 0 );
        if (((CUTSCENE_NAMED_IS_LOADING( l_U1999 )) == 0) AND ((CUTSCENE_IS_LOADED( l_U1999 )) == 0))
        {
            PRE_STREAM_SEAMLESS_CUTSCENE( l_U1999 );
        }
        l_U2118 = GET_TRANSITION_MOVIE_FRAMES_REMAINING();
        l_U2000 = 2;
         /* WRITESCRIPTLOG */ sub_745( "SP", "eCutscene0401State = CUTSCENE_LOADING", 0 );
        case 2:
         /* WRITESCRIPTLOG */ sub_745( "SP", "eCutscene0401State = CUTSCENE_LOADING", 0 );
        if ((CUTSCENE_IS_LOADED( l_U1999 )) == 1)
        {
            SET_TRANSITION_MOVIE_SKIPPABLE( 1 );
            l_U2000 = 3;
             /* WRITESCRIPTLOG */ sub_745( "SP", "eCutscene0401State = CUTSCENE_WAIT_FOR_HANDOFF", 0 );
            break;
        }
        return 0;
        case 3:
        iVar3 = GET_TRANSITION_MOVIE_FRAMES_REMAINING();
        iVar2 = l_U2118 - iVar3;
        l_U2118 = iVar3;
        if ((iVar3 <= 110) || (IS_TRANSITION_MOVIE_PLAYING() == 0))
        {
            SET_TRANSITION_MOVIE_SKIPPABLE( 0 );
            if (iVar2 > 4)
            {
                DO_SCREEN_FADE_OUT( 0 );
            }
            l_U2000 = 4;
             /* WRITESCRIPTLOG */ sub_745( "SP", "barState = NYBAR_HANDLE_04_01_CUTSCENE", 0 );
            break;
        }
        return 0;
        case 4:
         /* WRITESCRIPTLOG */ sub_745( "SP", "eCutscene0401State = CUTSCENE_START", 0 );
        if ( /* IS_MAX_VALID */ sub_22677())
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "Registering player with 04_01_pt01", 0 );
            CUTSCENE_REGISTER_PED_TELEPORT(  /* PLAYER_PED_ID */ sub_1456(), -2.34300000, -305.34100000, -0.28300000, 65506 );
            ISEQ_REGISTER_ENTITY( 1066718456, "max",  /* PLAYER_PED_ID */ sub_1456(), 0 );
            HIDE_PED_WEAPON_FOR_SCRIPTED_CUTSCENE(  /* PLAYER_PED_ID */ sub_1456(), 1 );
        }
         /* CLEANPED */ sub_18137( l_U1184 );
        l_U1184 =  /* CREATEPED */ sub_18676( ref l_U1171 );
        if ( /* IS_PED_VALID */ sub_19402( l_U1184 ))
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "Registering Tony with 04_01_pt01", 0 );
            SET_PED_NAME_DEBUG( l_U1184, "Cutscene Tony" );
            SET_PED_INVINCIBLE( l_U1184, 1 );
             /* F_GIVEPEDWEAPON */ sub_4042( l_U1184, -862236369, 25000, 0, 0 );
            SET_ROOM_FOR_PED_BY_NAME( l_U1184, ref g_U2473 );
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U1184, "FB_Tony_D", 0 );
            REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( l_U1184, 0, 0 ), "W_PI_CLT1911_AA_H", 0 );
            CUTSCENE_REGISTER_PED_TELEPORT( l_U1184, -1.00000000, -303.35300000, -0.26800000, -150.00000000 );
            ISEQ_REGISTER_ENTITY( 1066718456, "tony", l_U1184, 0 );
        }
        if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
        {
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( g_U750, "FB_Pass_NY", 0 );
            REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( g_U750, 0, 0 ), "W_PI_38_BA_H", 0 );
            CUTSCENE_REGISTER_PED_TELEPORT( g_U750, -3.48000000, -304.07700000, -0.26800000, 65446 );
            ISEQ_REGISTER_ENTITY( 1066718456, "passos", g_U750, 0 );
        }
        if (((IS_PED_DEAD( l_U904 )) == 0) AND ((DOES_PED_EXIST( l_U904 )) == 1))
        {
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U904, "Bar_Girl_F_Avg", 0 );
            CUTSCENE_REGISTER_PED_TELEPORT( l_U904, -1.27900000, -304.48500000, -0.26700000, -90.00000000 );
            ISEQ_REGISTER_ENTITY( 1066718456, "bargirl", l_U904, 0 );
        }
        if (((IS_PED_DEAD( l_U889 )) == 0) AND ((DOES_PED_EXIST( l_U889 )) == 1))
        {
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U889, "Bar_Tend_Fat", 0 );
            CUTSCENE_REGISTER_PED_TELEPORT( l_U889, -4.67800000, -306.42800000, -0.27200000, -90.00000000 );
            ISEQ_REGISTER_ENTITY( 1066718456, "bartender", l_U889, 0 );
        }
        if ( /* IS_PED_VALID */ sub_19402( l_U966[0] ))
        {
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U966[0], "G_NY_T_Sold_A^1", 0 );
            CUTSCENE_REGISTER_PED_TELEPORT( l_U966[0], -0.57400000, -306.12400000, -0.28200000, 0.00000000 );
            ISEQ_REGISTER_ENTITY( 1066718456, "thug2", l_U966[0], 0 );
        }
        if ( /* IS_PED_VALID */ sub_19402( l_U919 ))
        {
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U919, "G_NY_T_Sold_A^2", 0 );
            CUTSCENE_REGISTER_PED_TELEPORT( l_U919, -1.29400000, -307.27800000, -0.29300000, 0.00000000 );
            ISEQ_REGISTER_ENTITY( 1066718456, "thug3", l_U919, 0 );
        }
         /* CLEANPED */ sub_18137( l_U1156 );
        l_U1156 =  /* CREATEPED */ sub_18676( ref l_U1143 );
        if ( /* IS_PED_VALID */ sub_19402( l_U1156 ))
        {
            CUTSCENE_REGISTER_PED_TELEPORT( l_U1156, -2.74100000, -302.63500000, -0.29000000, 65386 );
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U1156, "G_NY_T_Thug_A", 0 );
            ISEQ_REGISTER_ENTITY( 1066718456, "thug1", l_U1156, 0 );
        }
        if ( /* IS_PED_VALID */ sub_19402( l_U966[1] ))
        {
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U966[1], "G_NY_T_Sold_A^4", 0 );
            CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( l_U966[1], ref g_U2219 );
            CUTSCENE_REGISTER_PED_TELEPORT( l_U966[1], g_U2424, g_U2427 );
        }
        if ( /* IS_PED_VALID */ sub_19402( l_U966[2] ))
        {
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( l_U966[2], "G_NY_T_Sold_A^5", 0 );
            CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( l_U966[2], ref g_U2219 );
            CUTSCENE_REGISTER_PED_TELEPORT( l_U966[2], l_U926[2]._fU0, l_U926[2]._fU12 );
        }
        CUTSCENE_REGISTER_ISEQ( 1066718456 );
        REGISTER_HIDE_ENTITY_AT_POSITION( g_U2034._fU0, g_U2034._fU4 );
        REGISTER_HIDE_ENTITY_AT_POSITION( g_U2041._fU0, g_U2041._fU4 );
        CUTSCENE_ENABLE_SKIP( 0 );
        START_SEAMLESS_CUTSCENE();
        l_U2000 = 5;
         /* WRITESCRIPTLOG */ sub_745( "SP", "eCutscene0401State = CUTSCENE_FIRST_FRAME", 0 );
        break;
        case 5:
         /* WRITESCRIPTLOG */ sub_745( "SP", "eCutscene0401State = CUTSCENE_FIRST_FRAME", 0 );
        DO_SCREEN_FADE_IN( 0 );
        l_U2000 = 6;
         /* WRITESCRIPTLOG */ sub_745( "SP", "eCutscene0401State = CUTSCENE_PLAYING", 0 );
        case 6:
        if (HAS_CUTSCENE_FINISHED() == 1)
        {
            CUTSCENE_ENABLE_SKIP( 1 );
            l_U2000 = 0;
             /* WRITESCRIPTLOG */ sub_745( "bsw", "eCutscene0401State = 04_01 finished, going to CUTSCENE_IDLE", 0 );
            return 1;
        }
        break;
    }
    return 0;
}

/* HANDLE_04_01_A_BLENDOUT */ int sub_54577(boolean bParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    vector vVar12;

    switch (l_U295)
    {
        case 1:
         /* WRITESCRIPTLOG */ sub_745( "RJM", "HANDLE_04_01_A_BLENDOUT - in BLEND_A_INIT", 0 );
         /* NIS_PRE_SETUP */ sub_27679( 1, 0, 0, 0 );
        if (NOT bParam0)
        {
            SET_TIME_OF_DAY( 12, 0 );
            FREEZE_TIME_OF_DAY( 12, 0 );
            SET_WEATHER_TYPE_NOW_PERSIST( "CLOUDY" );
             /* BLOCKLOAD_04_01A_ASSETS */ sub_54820();
             /* CREATE_BLENDOUT_ONLY_PEDS */ sub_55322();
            if ( /* IS_MAX_VALID */ sub_22677())
            {
                REMOVE_ALL_PED_WEAPONS(  /* PLAYER_PED_ID */ sub_1456() );
                 /* F_GIVEPEDWEAPON */ sub_4042(  /* PLAYER_PED_ID */ sub_1456(), -862236369, 25000, 0, 0 );
            }
        }
        if ( /* IS_MAX_VALID */ sub_22677())
        {
            SET_ADRENALINE_AMT( 0.50000000 );
        }
        if ( /* IS_PED_VALID */ sub_19402( (uParam2^) ))
        {
            SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam2^), 1 );
        }
         /* NIS_CREATE_STATIC_CAM */ sub_32560( ref l_U394, -3.01835200, -305.72660000, 1.21078300, -4.68366300, -0.03838200, -37.11246000, 45, 0 );
         /* NIS_CREATE_STATIC_CAM */ sub_32560( ref l_U425, -2.12926000, -306.44150000, 1.28760200, -5.46349200, 0.00000600, -20.50979000, 45, 10000 );
         /* NIS_CREATE_STATIC_CAM */ sub_32560( ref l_U456, -2.27030800, -306.81850000, 1.32609500, -5.46342900, 0.00001500, -20.51019000, 28, 10000 );
        l_U532 = 0;
         /* F_GIVEPEDWEAPON */ sub_4042( (uParam5^), -862236369, 25000, 0, 0 );
        if ((ISEQ_QUERY_STATE( 1066718456, 3 )) == 0)
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "We're playing from Checkpoint 1 - Cutscene hasn't registered the ISEQ", 0 );
             /* REGISTER_BLENDOUTA_PEDS */ sub_56221( uParam1, uParam2, uParam3, uParam4, uParam5, uParam6, uParam7 );
            ISEQ_START( 1066718456 );
        }
        SET_CAM_SIDE_LEFT( 1 );
        DISPLAY_HUD( 0 );
        ENABLE_MPM( 1 );
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U2253[1]._fU16, 1065353216, 0 );
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U2253[1]._fU20, 1065353216, 0 );
         /* NIS_PLAY_INTERP_WITH_STATIC_CAMS */ sub_57505( ref l_U394, ref l_U425, 1375, 1, 1 );
         /* CREATETIMER */ sub_13297( ref l_U487, 500, 1, 0 );
         /* STARTTIMER */ sub_24336( ref l_U487 );
         /* CREATETIMER */ sub_13297( ref l_U496, 1375, 1, 0 );
         /* STARTTIMER */ sub_24336( ref l_U496 );
         /* WRITESCRIPTLOG */ sub_745( "RJM", "HANDLE_04_01_A_BLENDOUT - Going to BLEND_A_START", 0 );
        l_U295 = 2;
        break;
        case 2:
        if (IS_SCREEN_FADED_OUT())
        {
            if (NOT ( /* F_IMAGEFX_FADE_IN */ sub_39380()))
            {
                DO_SCREEN_FADE_IN( 500 );
            }
        }
        if (NOT (IS_PED_DEAD( (uParam2^) )))
        {
            CAMERA_POINT_AT_PED( (uParam2^), 0 );
        }
         /* WRITESCRIPTLOG */ sub_745( "RJM", "HANDLE_04_01_A_BLENDOUT - Going to BLEND_A_WAIT_TO_ENABLE_BULLET_TIME", 0 );
        l_U295 = 3;
        break;
        case 3:
        if ( /* ISTIMERDONE */ sub_24480( ref l_U487 ))
        {
            ACTIVATE_BULLET_TIME( 0, 1, 1 );
             /* CREATETIMER */ sub_13297( ref l_U487, 300, 1, 0 );
             /* STARTTIMER */ sub_24336( ref l_U487 );
             /* LOADSEAMLESSCUTSCENE */ sub_12444( "04_01_nybar_win", 0 );
             /* LOADISEQ */ sub_11669( 525357828, 0 );
             /* WRITESCRIPTLOG */ sub_745( "RJM", "HANDLE_04_01_A_BLENDOUT - Going to BLEND_A_WAIT_TO_ENABLE_CURSOR", 0 );
            l_U295 = 4;
        }
        break;
        case 4:
        if ( /* ISTIMERDONE */ sub_24480( ref l_U487 ))
        {
            ENABLE_CROSSHAIR( 1 );
            SET_CROSSHAIR_PULSE();
             /* CREATETIMER */ sub_13297( ref l_U487, 900, 1, 0 );
             /* STARTTIMER */ sub_24336( ref l_U487 );
             /* CREATETIMER */ sub_13297( ref l_U505, 890, 1, 0 );
             /* STARTTIMER */ sub_24336( ref l_U505 );
             /* WRITESCRIPTLOG */ sub_745( "RJM", "HANDLE_04_01_A_BLENDOUT - Going to BLEND_A_WAIT_FOR_TONY_DEAD", 0 );
            l_U295 = 5;
        }
        break;
        case 5:
        if ( /* ISTIMERDONE */ sub_24480( ref l_U496 ))
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "Displaying reticule, and returning player control", 0 );
             /* NIS_PLAY_INTERP_WITH_STATIC_CAMS */ sub_57505( ref l_U425, ref l_U456, 7500, 1, 1 );
            ACTIVATE_BULLET_TIME( 0, 0.20000000, 1 );
        }
        if (NOT l_U532)
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U505 ))
            {
                 /* WRITESCRIPTLOG */ sub_745( "RJM", "HANDLE_04_01_A_BLENDOUT - Max took too long, reticle's disabled, and he can't fire", 0 );
                l_U532 = 1;
                ENABLE_CROSSHAIR( 0 );
            }
        }
        if ((NOT l_U532) AND (IS_CONTROL_JUST_PRESSED( 2, 4 )))
        {
            SET_ARCADEMODE_EVENT( 3, (uParam2^) );
            ISEQ_UNREGISTER_ENTITY( 1066718456, "tony" );
            SET_PED_SHOOTS_AT_COORD(  /* PLAYER_PED_ID */ sub_1456(), 1.76000000, -298.68000000, 0.36000000 );
             /* CREATETIMER */ sub_13297( ref l_U487, 60, 1, 1 );
             /* STARTTIMER */ sub_24336( ref l_U487 );
             /* WRITESCRIPTLOG */ sub_745( "RJM", "HANDLE_04_01_A_BLENDOUT - Going to BLEND_A_WAIT_TO_START_SUCCESS_SCENE", 0 );
            l_U295 = 6;
        }
        if ( /* ISTIMERDONE */ sub_24480( ref l_U487 ))
        {
             /* CREATETIMER */ sub_13297( ref l_U487, 8000, 1, 0 );
             /* STARTTIMER */ sub_24336( ref l_U487 );
             /* NIS_PRE_SETUP */ sub_27679( 1, 0, 0, 1 );
            DEACTIVATE_BULLET_TIME( 0, 0 );
            if ( /* IS_PED_VALID */ sub_19402( (uParam3^) ))
            {
                vVar12 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( (uParam3^) )};
                vVar12 = {vVar12 + (vector( 0.50000000, 0, -1.00000000))};
                 /* TELEPORTPED */ sub_6292( (uParam3^), vVar12, GET_PED_HEADING( (uParam3^) ) );
                if ( /* IS_PED_VALID */ sub_19402( (uParam7^) ))
                {
                    SET_PED_DEFAULT_AIM_AT_PED( (uParam7^), (uParam3^) );
                }
            }
            CAMERA_PLAY_ANIMATED( "LEVEL_S_NYBAR_CP_00", "B_OUT_04_01A_NY_BAR_FWD_CAM", 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
             /* P_IMAGEFX_START_BULLETCAM */ sub_32908( "NY_TONY_SCRIPTED_FAIL_FX", 0 );
             /* CREATETIMER */ sub_13297( ref l_U514, 2000, 1, 0 );
             /* STARTTIMER */ sub_24336( ref l_U514 );
             /* CREATETIMER */ sub_13297( ref l_U523, l_U533, 1, 0 );
             /* STARTTIMER */ sub_24336( ref l_U523 );
             /* WRITESCRIPTLOG */ sub_745( "RJM", "HANDLE_04_01_A_BLENDOUT - Going to BLEND_A_FAIL_WAIT_FOR_CAMERA", 0 );
            l_U295 = 9;
        }
        break;
        case 6:
        if ( /* ISTIMERDONE */ sub_24480( ref l_U487 ))
        {
            ENABLE_CROSSHAIR( 0 );
             /* TERMINATEISEQ */ sub_31524( 1066718456, 0 );
             /* LOADSEAMLESSCUTSCENE */ sub_12444( "04_01_nybar_win", 1 );
             /* LOADISEQ */ sub_11669( 525357828, 1 );
             /* WRITESCRIPTLOG */ sub_745( "RJM", "HANDLE_04_01_A_BLENDOUT - Going to BLEND_A_SUCCESS_REGISTER_PEDS", 0 );
            l_U295 = 7;
            break;
        }
        return 0;
        case 7:
        if ( /* IS_MAX_VALID */ sub_22677())
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "Registering player with 04_01_pt01", 0 );
            HIDE_PED_WEAPON_FOR_SCRIPTED_CUTSCENE(  /* PLAYER_PED_ID */ sub_1456(), 1 );
            CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1456(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
            CUTSCENE_REGISTER_PED_TELEPORT(  /* PLAYER_PED_ID */ sub_1456(), g_U2416, g_U2419 );
            CUTSCENE_REGISTER_SET_PLAYER_IN_COVER( "GenCover", "47E254B1_146226EB_Corner2", 1, 0 );
            CUTSCENE_SET_COVER_CAMERA_DIRECTION( g_U2253[2]._fU16, g_U2253[2]._fU20 );
            REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1456(), 0, 0 ), "W_PI_Clt1911_Aa_H^5", 0 );
            ISEQ_REGISTER_ENTITY( 525357828, "max",  /* PLAYER_PED_ID */ sub_1456(), 0 );
        }
        if ( /* IS_PED_VALID */ sub_19402( (uParam2^) ))
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "Registering Tony with 04_01_pt01", 0 );
            REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( (uParam2^), 0, 0 ), "W_PI_Clt1911_Aa_H", 0 );
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam2^), "FB_Tony_D", 0 );
            SET_PED_GORE( (uParam2^), 1 );
        }
        if (((IS_PED_DEAD( (uParam1^) )) == 0) AND ((DOES_PED_EXIST( (uParam1^) )) == 1))
        {
            REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( (uParam1^), 0, 0 ), "W_PI_38_Ba_H", 0 );
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam1^), "FB_Pass_NY", 0 );
        }
        if (((IS_PED_DEAD( (uParam3^) )) == 0) AND ((DOES_PED_EXIST( (uParam3^) )) == 1))
        {
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam3^), "Bar_Girl_F_Avg", 0 );
            CUTSCENE_REGISTER_PED_TELEPORT( (uParam3^), -4.74000000, -314.49800000, -0.30000000, 65446 );
            ISEQ_REGISTER_ENTITY( -596711032, "bargirl", (uParam3^), 0 );
        }
        if (((IS_PED_DEAD( (uParam4^) )) == 0) AND ((DOES_PED_EXIST( (uParam4^) )) == 1))
        {
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam4^), "Bar_Tend_Fat", 0 );
            CUTSCENE_REGISTER_PED_TELEPORT( (uParam4^), -4.59000000, -312.60000000, -0.30000000, 65446 );
            ISEQ_REGISTER_ENTITY( -596711032, "bartender", (uParam4^), 0 );
        }
        if ( /* IS_PED_VALID */ sub_19402( (uParam5^) ))
        {
            REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( (uParam5^), 0, 0 ), "W_PI_Clt1911_Aa_H^3", 0 );
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam5^), "G_NY_T_Thug_C", 0 );
        }
        if ( /* IS_PED_VALID */ sub_19402( (uParam8^) ))
        {
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam8^), "G_NY_T_Sold_A", 0 );
            CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( (uParam8^), ref g_U2219 );
            CUTSCENE_REGISTER_PED_TELEPORT( (uParam8^), g_U2424, g_U2427 );
            ISEQ_REGISTER_ENTITY( 525357828, "gmed1", (uParam8^), 0 );
        }
        if ( /* IS_PED_VALID */ sub_19402( (uParam9^) ))
        {
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam9^), "G_NY_T_Sold_A^4", 0 );
            CUTSCENE_REGISTER_SET_PED_IN_COVER( (uParam9^), "GenCover", "47E254B1_8E4C212D_Popover1", 0, 1 );
            ISEQ_REGISTER_ENTITY( 525357828, "gmed2", (uParam9^), 0 );
        }
        if ( /* IS_PED_VALID */ sub_19402( (uParam6^) ))
        {
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam6^), "G_NY_T_Thug_B", 0 );
            CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( (uParam6^), ref g_U2219 );
            REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( (uParam6^), 0, 0 ), "W_PI_Clt1911_Aa_H^1", 0 );
            CUTSCENE_REGISTER_PED_TELEPORT( (uParam6^), g_U2420, g_U2423 );
            ISEQ_REGISTER_ENTITY( 525357828, "gmed", (uParam6^), 0 );
        }
        if ( /* IS_PED_VALID */ sub_19402( (uParam7^) ))
        {
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( (uParam7^), "G_NY_T_Thug_A", 0 );
            REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( (uParam7^), 0, 0 ), "W_PI_Clt1911_Aa_H^2", 0 );
            CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE( (uParam7^), ref g_U2219 );
            CUTSCENE_REGISTER_PED_TELEPORT( (uParam7^), g_U2432, g_U2435 );
            ISEQ_REGISTER_ENTITY( 525357828, "gmed3", (uParam7^), 0 );
        }
        CUTSCENE_REGISTER_ISEQ( 525357828 );
        CUTSCENE_REGISTER_ISEQ( -596711032 );
        DEACTIVATE_BULLET_TIME( 0, 0 );
        START_SEAMLESS_CUTSCENE();
        ENABLE_MPM( 0 );
         /* WRITESCRIPTLOG */ sub_745( "RJM", "HANDLE_04_01_A_BLENDOUT - Going to BLEND_A_SUCCESS_WAIT_FOR_END", 0 );
        l_U295 = 8;
        break;
        case 8:
        if (HAS_CUTSCENE_FINISHED())
        {
             /* UNREGISTER_BLENDOUTA_PEDS */ sub_37044();
            CAMERA_PLAY_ANIMATED( l_U284, l_U283, 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
            return 1;
        }
        break;
        case 9:
        if (( /* IS_MAX_VALID */ sub_22677()) AND ( /* IS_PED_VALID */ sub_19402( (uParam2^) )))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U523 ))
            {
                 /* WRITESCRIPTLOG */ sub_745( "RJM", "Playing headsoup on Max during failure", 0 );
                PED_SET_ACTION_INTENTION(  /* PLAYER_PED_ID */ sub_1456(), 47, 1000, 0, 0, 0 );
                START_PARTICLE_FX_NON_LOOPED_ON_PED_BONE( "CS_Blood_ImpactSplash_S",  /* PLAYER_PED_ID */ sub_1456(), 0.25000000, 0, 0, 0, 180, 0, 65488, 1 );
                START_PARTICLE_FX_NON_LOOPED_ON_PED_BONE( "CS_Blood_Exit_S",  /* PLAYER_PED_ID */ sub_1456(), 0.25000000, 0, 0, 0, 180, 0, 65488, 1 );
            }
        }
        if (( /* IS_PED_VALID */ sub_19402( (uParam1^) )) AND ( /* IS_PED_VALID */ sub_19402( (uParam5^) )))
        {
            if (PED_ANIM_EVENT( (uParam5^), -1531652494 ))
            {
                 /* WRITESCRIPTLOG */ sub_745( "RJM", "Playing headsoup on Passos during failure", 0 );
                START_PARTICLE_FX_NON_LOOPED_ON_PED_BONE( "CS_Blood_ImpactSplash_S", (uParam1^), 0.25000000, 0, 0, 0, 180, 0, 65488, 1 );
                START_PARTICLE_FX_NON_LOOPED_ON_PED_BONE( "CS_Blood_Exit_S", (uParam1^), 0.25000000, 0, 0, 0, 180, 0, 65488, 1 );
            }
        }
        if ( /* ISTIMERDONE */ sub_24480( ref l_U514 ))
        {
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( ref l_U285 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1, (uParam2^), "TONY", ref l_U285, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 2, (uParam3^), "Bar_Girl_F_Avg", ref l_U285, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_48670( "SNYC_0401FAIL", ref l_U285, 8, 1 );
        }
        if ( /* ISTIMERDONE */ sub_24480( ref l_U487 ))
        {
            g_U2200 = 1;
             /* WRITESCRIPTLOG */ sub_745( "RJM", "HANDLE_04_01_A_BLENDOUT - Going to BLEND_A_FAIL_WAIT_FOR_FADE", 0 );
            l_U295 = 10;
        }
        break;
        case 10:
         /* UNREGISTER_BLENDOUTA_PEDS */ sub_37044();
         /* WRITESCRIPTLOG */ sub_745( "RJM", "HANDLE_04_01_A_BLENDOUT - Going to BLEND_A_IDLE", 0 );
        l_U295 = 0;
        break;
        case 0: break;
    }
    return 0;
}

/* BLOCKLOAD_04_01A_ASSETS */ void sub_54820()
{
     /* BLOCKLOADMODEL */ sub_54861( g_U2248 );
     /* BLOCKLOADMODEL */ sub_54861( 1853260236 );
     /* BLOCKLOADMODEL */ sub_54861( 1864850433 );
     /* BLOCKLOADMODEL */ sub_54861( -695927253 );
     /* BLOCKLOADMODEL */ sub_54861( 2080318414 );
     /* LOADISEQ */ sub_11669( 1066718456, 1 );
    return;
}

/* BLOCKLOADMODEL */ void sub_54861(unknown uParam0)
{
    DISPLAYF( "[MSWW]### Trying to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 0)
    {
         /* WRITE_STRING */ sub_3651( "[SP]### ERROR! (BlockLoadModel) Trying to block load a model that isn't in the img! ###" );
    }
    REQUEST_MODEL( uParam0 );
    "[doubled result, dropped if not asigned]";
    LOAD_ALL_OBJECTS_NOW();
    while ((HAS_MODEL_LOADED( uParam0 )) == 0)
    {
        LOAD_ALL_OBJECTS_NOW();
        DISPLAYF( "[SP]### Waiting to load model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
        WAIT( 0 );
    }
    DISPLAYF( "[MSWW]### Has loaded model: {!f1} : {1} ###", 2, 1, -874832622, 513, uParam0 );
    return;
}

/* CREATE_BLENDOUT_ONLY_PEDS */ void sub_55322()
{
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U297, g_U725[0]._fU0, g_U725[0]._fU12, -1756913695, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U311, -1.80600000, -303.75300000, -0.26800000, -150.00000000, 417317379, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U325, -1.27900000, -304.48500000, -0.26700000, -90.00000000, 2039064213, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U339, -4.67800000, -306.42800000, -0.27200000, -90.00000000, 553761934, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U353, -2.74100000, -302.63500000, -0.29000000, 65386, 725084468, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U367, -0.57400000, -306.12400000, -0.28200000, 0.00000000, 1497998925, 26, 6, 0, 0, 0 );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U381, -1.29400000, -307.27800000, -0.29300000, 0.00000000, 1339582665, 26, 6, 0, 0, 0 );
     /* PREP_BLENDOUT_ONLY_PEDS */ sub_55664( ref l_U296, l_U297 );
     /* PREP_BLENDOUT_ONLY_PEDS */ sub_55664( ref l_U310, l_U311 );
     /* PREP_BLENDOUT_ONLY_PEDS */ sub_55664( ref l_U324, l_U325 );
     /* PREP_BLENDOUT_ONLY_PEDS */ sub_55664( ref l_U338, l_U339 );
     /* PREP_BLENDOUT_ONLY_PEDS */ sub_55664( ref l_U352, l_U353 );
     /* PREP_BLENDOUT_ONLY_PEDS */ sub_55664( ref l_U366, l_U367 );
     /* PREP_BLENDOUT_ONLY_PEDS */ sub_55664( ref l_U380, l_U381 );
    return;
}

/* PREP_BLENDOUT_ONLY_PEDS */ void sub_55664(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13)
{
    (uParam0^) =  /* CREATEPED */ sub_18676( ref uParam1 );
    if ( /* IS_PED_VALID */ sub_19402( (uParam0^) ))
    {
        SET_ROOM_FOR_PED_BY_NAME( (uParam0^), ref g_U2473 );
    }
    return;
}

/* REGISTER_BLENDOUTA_PEDS */ void sub_56221(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6)
{
    if ( /* IS_MAX_VALID */ sub_22677())
    {
         /* WRITESCRIPTLOG */ sub_745( "RJM", "REGISTER_BLENDOUTA_PEDS - Registering Max", 0 );
         /* TELEPORTPED */ sub_6292(  /* PLAYER_PED_ID */ sub_1456(), -2.34300000, -305.34100000, -0.28300000, 65506 );
        ISEQ_REGISTER_ENTITY( 1066718456, "max",  /* PLAYER_PED_ID */ sub_1456(), 0 );
    }
    if ( /* IS_PED_VALID */ sub_19402( (uParam0^) ))
    {
         /* WRITESCRIPTLOG */ sub_745( "RJM", "REGISTER_BLENDOUTA_PEDS - Registering Passos", 0 );
         /* TELEPORTPED */ sub_6292( (uParam0^), -3.48000000, -304.07700000, -0.26800000, 65446 );
        ISEQ_REGISTER_ENTITY( 1066718456, "passos", (uParam0^), 0 );
    }
    if ( /* IS_PED_VALID */ sub_19402( (uParam1^) ))
    {
         /* WRITESCRIPTLOG */ sub_745( "RJM", "REGISTER_BLENDOUTA_PEDS - Registering Tony", 0 );
         /* TELEPORTPED */ sub_6292( (uParam1^), -1.00000000, -303.35300000, -0.26800000, -150.00000000 );
        SET_PED_INVINCIBLE( (uParam1^), 1 );
         /* F_GIVEPEDWEAPON */ sub_4042( (uParam1^), -862236369, 25000, 0, 0 );
        SET_ROOM_FOR_PED_BY_NAME( (uParam1^), ref g_U2473 );
        ISEQ_REGISTER_ENTITY( 1066718456, "tony", (uParam1^), 0 );
    }
    if ( /* IS_PED_VALID */ sub_19402( (uParam4^) ))
    {
         /* WRITESCRIPTLOG */ sub_745( "RJM", "REGISTER_BLENDOUTA_PEDS - Registering Thug1", 0 );
         /* TELEPORTPED */ sub_6292( (uParam4^), -2.74100000, -302.63500000, -0.29000000, 65386 );
        SET_ROOM_FOR_PED_BY_NAME( (uParam4^), ref g_U2473 );
        SET_PED_VISIBLE( (uParam4^), 1 );
        ISEQ_REGISTER_ENTITY( 1066718456, "thug1", (uParam4^), 0 );
    }
    if ( /* IS_PED_VALID */ sub_19402( (uParam5^) ))
    {
         /* WRITESCRIPTLOG */ sub_745( "RJM", "REGISTER_BLENDOUTA_PEDS - Registering Thug2", 0 );
         /* TELEPORTPED */ sub_6292( (uParam5^), -0.57400000, -306.12400000, -0.28200000, 0.00000000 );
        SET_ROOM_FOR_PED_BY_NAME( (uParam5^), ref g_U2473 );
        SET_PED_VISIBLE( (uParam5^), 1 );
        ISEQ_REGISTER_ENTITY( 1066718456, "thug2", (uParam5^), 0 );
    }
    if ( /* IS_PED_VALID */ sub_19402( (uParam6^) ))
    {
         /* WRITESCRIPTLOG */ sub_745( "RJM", "REGISTER_BLENDOUTA_PEDS - Registering Thug3", 0 );
         /* TELEPORTPED */ sub_6292( (uParam6^), -1.29400000, -307.27800000, -0.29300000, 0.00000000 );
        SET_PED_VISIBLE( (uParam6^), 1 );
        SET_ROOM_FOR_PED_BY_NAME( (uParam6^), ref g_U2473 );
        ISEQ_REGISTER_ENTITY( 1066718456, "thug3", (uParam6^), 0 );
    }
    if ( /* IS_PED_VALID */ sub_19402( (uParam2^) ))
    {
         /* WRITESCRIPTLOG */ sub_745( "RJM", "REGISTER_BLENDOUTA_PEDS - Registering Bar Girl", 0 );
         /* TELEPORTPED */ sub_6292( (uParam2^), -1.27900000, -304.48500000, -0.26700000, -90.00000000 );
        ISEQ_REGISTER_ENTITY( 1066718456, "bargirl", (uParam2^), 0 );
    }
    if ( /* IS_PED_VALID */ sub_19402( (uParam3^) ))
    {
         /* WRITESCRIPTLOG */ sub_745( "RJM", "REGISTER_BLENDOUTA_PEDS - Registering Bartender", 0 );
         /* TELEPORTPED */ sub_6292( (uParam3^), -4.67800000, -306.42800000, -0.27200000, -90.00000000 );
        ISEQ_REGISTER_ENTITY( 1066718456, "bartender", (uParam3^), 0 );
    }
    return;
}

/* NIS_PLAY_INTERP_WITH_STATIC_CAMS */ void sub_57505(int iParam0, int iParam1, unknown uParam2, unknown uParam3, unknown uParam4)
{
    RENDER_SCRIPT_CAMS( 0, 0, 3000, 0 );
    SET_CAM_ACTIVE_WITH_INTERP( iParam1->_fU0, iParam0->_fU0, uParam2, uParam3, uParam4 );
    RENDER_SCRIPT_CAMS( 1, 0, 3000, 0 );
     /* STARTTIMER */ sub_24336( iParam1 + 48 );
    iParam1->_fU32 = 1;
    iParam1->_fU40 = 1;
    return;
}

/* UPDATE_PASSOS_BAR_AND_BASEMENT */ void sub_61649()
{
    int iVar2;

    switch (l_U763)
    {
        case 0:
        if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
        {
             /* TELEPORTPED */ sub_6292( g_U750, g_U725[0]._fU0, g_U725[0]._fU12 );
            PED_ACTION_TREE_PLAY_NODE( g_U750, ref g_U2203 );
            ISEQ_REGISTER_ENTITY( -2007826629, "passos", g_U750, 0 );
            ISEQ_START( -2007826629 );
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_PASSOS_BAR_AND_BASEMENT - Going to PBS_WAIT_FOR_PASSOS_KILL_FIRST_ENEMY", 0 );
            l_U763 = 1;
        }
        break;
        case 1:
        if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
        {
            if (PED_ANIM_EVENT( g_U750, -1531652494 ))
            {
                if (( /* IS_PASSOS_VALID */ sub_62062()) AND ( /* IS_PED_VALID */ sub_19402( l_U919 )))
                {
                    SHOOT_SINGLE_BULLET_BETWEEN_COORDS( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_BONE_COORDS( g_U750, 55060, 0.50000000, 0, -0.50000000 ), "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_BONE_COORDS( l_U919, 65488, 0, 0, 0 ), 100, 1, -862236369, 0 );
                }
                 /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1783, 250 );
                 /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_PASSOS_BAR_AND_BASEMENT - Going to State PBS_SPEAK_MOVE_UP_LINE", 0 );
                l_U763 = 2;
            }
        }
        break;
        case 2:
        if (IS_PED_DEAD( l_U919 ))
        {
             /* RESETTIMER */ sub_12875( ref l_U1783 );
             /* P_DIAL_PASSOS_VIG_01_MOVE_UP */ sub_62402();
             /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1938, 25000 );
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_PASSOS_BAR_AND_BASEMENT - Going to PBS_WAIT_FOR_POOL_HALL_CLEAR", 0 );
            l_U763 = 3;
        }
        else if ( /* ISTIMERDONE */ sub_24480( ref l_U1783 ))
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_PASSOS_BAR_AND_BASEMENT: Marty not killed - force death", 0 );
            if (( /* IS_PASSOS_VALID */ sub_62062()) AND ( /* IS_PED_VALID */ sub_19402( l_U919 )))
            {
                SHOOT_SINGLE_BULLET_BETWEEN_COORDS( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_BONE_COORDS( g_U750, 55060, 0.50000000, 0, -0.50000000 ), "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_BONE_COORDS( l_U919, 65488, 0, 0, 0 ), 100, 1, -862236369, 0 );
            }
        }
        break;
        case 3:
        if (l_U1729)
        {
             /* DISABLETIMER */ sub_13219( ref l_U1938 );
             /* KILL_SPEECH */ sub_49833( ref l_U1928, 0 );
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_PASSOS_BAR_AND_BASEMENT - Going to PBS_WAIT_FOR_PLAYER_NEAR_PASSOS_IN_POOLHALL", 0 );
            l_U763 = 6;
        }
        else if ((NOT (IS_SCRIPTED_SPEECH_PLAYING( l_U889 ))) AND (NOT (IS_SCRIPTED_SPEECH_PLAYING( l_U904 ))))
        {
             /* UPDATE_VIGNETTE_01_VO */ sub_63042();
        }
        if ( /* HAS_MAX_SHOT_NEAR_PASSOS */ sub_64214())
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "Max shot near passos in the bar", 0 );
            PED_SET_ACTION_INTENTION( g_U750, 58, 1000, 0, 0, 0 );
        }
        break;
        case 6:
        if (( /* IS_MAX_VALID */ sub_22677()) AND ( /* IS_PASSOS_VALID */ sub_62062()))
        {
            if ( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( l_U1343 ))
            {
                 /* P_SETDOORMINMAXLIMIT */ sub_64586( ref g_U2048, -85.00000000, 85.00000000 );
                 /* P_CLOSEDOOR */ sub_17001( ref g_U2048, 1 );
                 /* P_SETDOORLOCKED */ sub_17258( ref g_U2048, 1 );
                 /* CLEANUP_UPSTAIRS */ sub_37708();
                 /* UNLOAD_ASSETS_UPSTAIRS */ sub_64830();
                CLEAR_PED_TASKS_IMMEDIATELY( g_U750 );
                SET_ROOM_FOR_PED_BY_NAME( g_U750, ref g_U2489 );
                 /* PED_CLEAR_ALL_ACTION_INTENTIONS */ sub_22845( g_U750 );
                ISEQ_REGISTER_ENTITY( 1432420195, "passos", g_U750, 0 );
                ISEQ_START( 1432420195 );
                 /* TELEPORTPED */ sub_6292( g_U750, l_U1996, 0.00000000 );
                 /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_PASSOS_BAR_AND_BASEMENT: Going to PBS_WAIT_FOR_BASEMENT_FIGHT_TO_START", "***" );
                l_U763 = 7;
            }
        }
        break;
        case 7:
        if (l_U1735)
        {
            PED_SET_ACTION_INTENTION( g_U750, 53, 5000, 0, 0, 0 );
             /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1828, GET_RANDOM_INT_IN_RANGE( 1000, 2000 ) );
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_PASSOS_BAR_AND_BASEMENT: Basement fight started, going to PBS_WAIT_FOR_BAR_COVER_CLEAR", "***" );
            l_U763 = 8;
        }
        break;
        case 8:
        if (g_U724 != 3)
        {
            if (( /* F_GETDOOROPENRATIO */ sub_65549( ref g_U2048 )) <= 0.00000000)
            {
                 /* P_SETDOORLOCKED */ sub_17258( ref g_U2048, 1 );
                g_U724 = 3;
                 /* P_SAVE_PLAYER_DATA_CHECKPOINT */ sub_6597( ref l_U840, 3,  /* PLAYER_PED_ID */ sub_1456(), g_U2253[3]._fU0, g_U2253[3]._fU12, g_U2253[3]._fU16, g_U2253[3]._fU20, 1 );
            }
        }
        if ( /* HAS_MAX_SHOT_NEAR_PASSOS */ sub_64214())
        {
            PED_SET_ACTION_INTENTION( g_U750, 58, 1000, 0, 0, 0 );
        }
        if ((NOT ( /* IS_PED_VALID */ sub_19402( l_U1056 ))) AND (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_65763( ref l_U1039 )) == 0))
        {
            if ( /* IS_PASSOS_VALID */ sub_62062())
            {
                PED_SET_ACTION_INTENTION( g_U750, 47, -1, 0, 0, 0 );
                 /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_PASSOS_BAR_AND_BASEMENT: Player killed all the enemies in the first half - going to PBS_WAIT_FOR_MAX_TO_ENTER_FREEZER", "***" );
                l_U763 = 9;
            }
        }
        else
        {
             /* P_HANDLE_PASSOS_INCIDENTAL_SHOOT_VO */ sub_66082();
        }
        break;
        case 9:
        if ( /* HAS_MAX_SHOT_NEAR_PASSOS */ sub_64214())
        {
            PED_SET_ACTION_INTENTION( g_U750, 58, 1000, 0, 0, 0 );
        }
        l_U1727 = 1;
         /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1756, 12000 );
        SET_PED_DEFAULT_AIM_AT_COORD( g_U750, -7.27000000, -316.53000000, -2.66000000 );
        PED_SET_ACTION_INTENTION( g_U750, 55, 5000, 0, 0, 0 );
         /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_PASSOS_BAR_AND_BASEMENT: Player is in the kitchen - going to PBS_WAIT_FOR_ALL_ENEMIES_DEAD", "***" );
        l_U763 = 10;
         /* MAL_FINISHACTINT */ sub_66760( ref g_U750, 53 );
         /* MAL_FINISHACTINT */ sub_66760( ref g_U750, 47 );
        break;
        case 10:
        if (NOT l_U1742)
        {
            if ( /* MAL_CHECKANGLEANDDISTANCEBETWEENPEDANDPLAYER */ sub_66866( ref g_U750, 3, 30, -1, 0, 0 ))
            {
                 /* MAL_WRITESCRIPTLOG */ sub_67503( "INTERRUPTING PASSOS" );
                 /* MAL_SETACTINWITHFOCUSPOS */ sub_67697( ref g_U750,  /* MAL_GETPEDCOORDS */ sub_67621(  /* PLAYER_PED_ID */ sub_1456() ), 33, 5000 );
                SET_PED_DEFAULT_AIM_AT_COORD( g_U750, -2.71822300, -316.02410000, -2.72504500 );
                l_U1742 = 1;
            }
        }
        else if (( /* MAL_CHECKANGLEANDDISTANCEBETWEENPEDANDPLAYER */ sub_66866( ref g_U750, -1, 180, 2.50000000, 91, 0 )) || ( /* MAL_CHECKANGLEANDDISTANCEBETWEENPEDANDPLAYER */ sub_66866( ref g_U750, -1, 90, 4, 0, 0 )))
        {
            if (( /* MAL_ISACTINTCOMPLETED */ sub_67875( ref g_U750, 34, 1 )) || ( /* MAL_ISACTINTCOMPLETED */ sub_67875( ref g_U750, 33, 1 )))
            {
                 /* MAL_WRITESCRIPTLOG */ sub_67503( "MAKING PASSOS RESUME" );
                 /* MAL_FINISHACTINT */ sub_66760( ref g_U750, 33 );
                 /* MAL_FINISHACTINT */ sub_66760( ref g_U750, 34 );
                 /* MAL_SETACTINT */ sub_68102( g_U750, 36, 1000 );
                CLEAR_PED_PRIMARY_LOOKAT( g_U750 );
                CLEAR_PED_DEFAULT_AIM( g_U750 );
                l_U1742 = 0;
            }
        }
        if (NOT l_U1755)
        {
            if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_65763( ref l_U1084 )) < 1)
            {
                l_U1755 = 1;
                 /* MAL_SETACTINT */ sub_68102( g_U750, 46, -1 );
            }
        }
        if (l_U1726)
        {
            if (((PED_GET_ACTION_INTENTION_STATUS( g_U750, 54 )) == 1) || ((PED_GET_ACTION_INTENTION_STATUS( g_U750, 55 )) == 1))
            {
                if ( /* HAS_MAX_SHOT_NEAR_PASSOS */ sub_64214())
                {
                    PED_SET_ACTION_INTENTION( g_U750, 58, 1000, 0, 0, 0 );
                }
                iVar2 = ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_65763( ref l_U1084 )) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_65763( ref l_U1120 ));
                if ((NOT (IS_BULLET_CAMERA_RUNNING( 0 ))) AND (iVar2 == 0))
                {
                     /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_PASSOS_BAR_AND_BASEMENT: Passos running to freezer door, going to PBS_WAIT_FOR_PLAYER_IN_FREEZER_TRIGGER", "***" );
                    PED_SET_ACTION_INTENTION( g_U750, 48, 1000, 0, 0, 0 );
                     /* LOADSEAMLESSCUTSCENE */ sub_12444( "MID_00_NYBAR", 1 );
                    l_U763 = 11;
                }
                else if (iVar2 == 2)
                {
                    if (NOT l_U1730)
                    {
                        if ( /* ISTIMERDONE */ sub_24480( ref l_U1756 ))
                        {
                            l_U1733 = 1;
                        }
                        if (l_U1733)
                        {
                            if (PED_ANIM_EVENT( g_U750, -1531652494 ))
                            {
                                l_U1198 =  /* GET_CLOSEST_PED_ARRAY_MEMBER_TO_PED */ sub_68639( ref l_U1084, g_U750 );
                                if ( /* IS_PED_VALID */ sub_19402( l_U1198 ))
                                {
                                     /* DISABLETIMER */ sub_13219( ref l_U1756 );
                                     /* PED_KILL_HEADSOUP */ sub_69069( l_U1198 );
                                    SCRIPT_VAR_SET_INT( "SP_SV_PASSOS_KILLS", (SCRIPT_VAR_GET_INT( "SP_SV_PASSOS_KILLS" )) + 1 );
                                     /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_PASSOS_BAR_AND_BASEMENT: Passos killing kitchen guy", "***" );
                                    l_U1730 = 1;
                                }
                                else
                                {
                                     /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_PASSOS_BAR_AND_BASEMENT: GET_CLOSEST_PED_ARRAY_MEMBER_TO_PED returned null ped, wtf?", "***" );
                                }
                            }
                        }
                    }
                }
            }
        }
        break;
        case 11:
        if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
        {
            if ((PED_GET_ACTION_INTENTION_STATUS( g_U750, 48 )) == 1)
            {
                if (NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( l_U1427 )))
                {
                    PED_SET_ACTION_INTENTION( g_U750, 49, 1000, 0, 0, 0 );
                     /* MAL_FINISHACTINT */ sub_66760( ref g_U750, 55 );
                     /* MAL_FINISHACTINT */ sub_66760( ref g_U750, 48 );
                     /* MAL_FINISHACTINT */ sub_66760( ref g_U750, 46 );
                     /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_PASSOS_BAR_AND_BASEMENT: Moving to PBS_WAIT_FOR_PLAYER_IN_KITCHEN_TRIGGER", 0 );
                    l_U763 = 12;
                    l_U1743 = 0;
                    l_U1742 = 0;
                    l_U1744 = 0;
                }
            }
            else
            {
                 /* P_HANDLE_PASSOS_INTERRUPTIONS */ sub_69706( g_U750, ref l_U1742, ref l_U1744, ref l_U1743, ref l_U1754, ref l_U1745 );
            }
        }
        break;
        case 12:
        if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
        {
            if ((PED_GET_ACTION_INTENTION_STATUS( g_U750, 49 )) == 1)
            {
                if (NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( l_U1448 )))
                {
                     /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_PASSOS_BAR_AND_BASEMENT: Moving to PBS_WAIT_FOR_PASSOS_BASEMENT_MOVEMENT_DONE", 0 );
                    PED_SET_ACTION_INTENTION( g_U750, 50, 1000, 0, 0, 0 );
                    l_U763 = 13;
                    l_U1743 = 0;
                    l_U1742 = 0;
                    l_U1744 = 0;
                }
            }
            else
            {
                 /* P_HANDLE_PASSOS_INTERRUPTIONS */ sub_69706( g_U750, ref l_U1742, ref l_U1744, ref l_U1743, ref l_U1754, ref l_U1745 );
            }
        }
        break;
        case 13:
        if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
        {
            if ((PED_GET_ACTION_INTENTION_STATUS( g_U750, 50 )) == 1)
            {
                if ( /* IS_MAX_VALID */ sub_22677())
                {
                    TASK_LOOK_AT_PED( g_U750,  /* PLAYER_PED_ID */ sub_1456(), -1, 0 );
                }
                 /* P_PLAY_DIAL_PASSOS */ sub_66315( "SNYC_PSLG", ref l_U1918 );
                 /* INIT_HANDLE_PASSOS_WAITING_SPEECH */ sub_71477();
                 /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_PASSOS_BAR_AND_BASEMENT: Moving to PBS_DONE", 0 );
                l_U763 = 14;
            }
            else
            {
                 /* P_HANDLE_PASSOS_INTERRUPTIONS */ sub_69706( g_U750, ref l_U1742, ref l_U1744, ref l_U1743, ref l_U1754, ref l_U1745 );
            }
        }
        break;
        case 14:
         /* HANDLE_PASSOS_WAITING_SPEECH */ sub_71740( 15000, 2500 );
        break;
    }
    return;
}

/* IS_PASSOS_VALID */ int sub_62062()
{
    if ((NOT (IS_PED_DEAD( g_U750 ))) AND (DOES_PED_EXIST( g_U750 )))
    {
        return 1;
    }
    return 0;
}

/* P_CREATE_AND_START_TIMER */ void sub_62217(unknown uParam0, unknown uParam1)
{
     /* CREATETIMER */ sub_13297( uParam0, uParam1, 1, 0 );
     /* STARTTIMER */ sub_24336( uParam0 );
    return;
}

/* P_DIAL_PASSOS_VIG_01_MOVE_UP */ void sub_62402()
{
     /* WRITESCRIPTLOG */ sub_745( "RJM", "P_DIAL_PASSOS_VIG_01_MOVE_UP", "***" );
    if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
    {
         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( ref l_U1928 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1, g_U750, "PASSOS", ref l_U1928, 2, 0 );
         /* PLAY_SINGLE_SPEECH */ sub_48670( "SNYC_VIG012", ref l_U1928, 8, 1 );
    }
    return;
}

/* UPDATE_VIGNETTE_01_VO */ void sub_63042()
{
    switch (l_U762)
    {
        case 0:
         /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1938, 800 );
         /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_01_VO - going to State VIG_01_MAX_VO", 0 );
        l_U762 = 1;
        break;
        case 1:
        if ( /* ISTIMERDONE */ sub_24480( ref l_U1938 ))
        {
             /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1938, 8000 );
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_01_VO - going to State VIG_01_VO_LINE1", 0 );
            l_U762 = 2;
        }
        break;
        case 2:
        if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U1938 ))
            {
                 /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1938, 15000 );
                 /* P_DIAL_PASSOS_VIG_01_LINE1 */ sub_63373();
                 /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_01_VO - going to State VIG_01_VO_LINE2", 0 );
                l_U762 = 3;
            }
        }
        break;
        case 3:
        if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U1938 ))
            {
                 /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1938, 15000 );
                 /* P_DIAL_PASSOS_VIG_01_LINE2 */ sub_63664();
                 /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_01_VO - going to State VIG_01_VO_LINE3", 0 );
                l_U762 = 4;
            }
        }
        break;
        case 4:
        if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U1938 ))
            {
                 /* DISABLETIMER */ sub_13219( ref l_U1938 );
                 /* P_DIAL_PASSOS_VIG_01_LINE3 */ sub_63952();
                 /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_01_VO - going to State VIG_01_VO_DONE", 0 );
                l_U762 = 5;
            }
        }
        break;
        case 5: break;
    }
    return;
}

/* P_DIAL_PASSOS_VIG_01_LINE1 */ void sub_63373()
{
     /* WRITESCRIPTLOG */ sub_745( "RJM", "P_DIAL_PASSOS_VIG_01_LINE1", "***" );
    if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
    {
         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( ref l_U1928 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1, g_U750, "PASSOS", ref l_U1928, 2, 0 );
         /* PLAY_SINGLE_SPEECH */ sub_48670( "SNYC_VIG013A", ref l_U1928, 8, 1 );
    }
    return;
}

/* P_DIAL_PASSOS_VIG_01_LINE2 */ void sub_63664()
{
     /* WRITESCRIPTLOG */ sub_745( "RJM", "P_DIAL_PASSOS_VIG_01_LINE2", "***" );
    if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
    {
         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( ref l_U1928 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1, g_U750, "PASSOS", ref l_U1928, 2, 0 );
         /* PLAY_SINGLE_SPEECH */ sub_48670( "SNYC_VIG013B", ref l_U1928, 8, 1 );
    }
    return;
}

/* P_DIAL_PASSOS_VIG_01_LINE3 */ void sub_63952()
{
     /* WRITESCRIPTLOG */ sub_745( "RJM", "P_DIAL_PASSOS_VIG_01_LINE3", "***" );
    if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
    {
         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( ref l_U1928 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1, g_U750, "PASSOS", ref l_U1928, 2, 0 );
         /* PLAY_SINGLE_SPEECH */ sub_48670( "SNYC_VIG013C", ref l_U1928, 8, 1 );
    }
    return;
}

/* HAS_MAX_SHOT_NEAR_PASSOS */ int sub_64214()
{
    int iVar2;

    if (((IS_PED_DEAD( g_U750 )) == 0) AND ((DOES_PED_EXIST( g_U750 )) == 1))
    {
        if (HAS_BULLET_IMPACTED_IN_AREA( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( g_U750 ), 4.00000000, ref iVar2 ))
        {
            if (iVar2 == ( /* PLAYER_PED_ID */ sub_1456()))
            {
                return 1;
            }
        }
    }
    return 0;
}

/* F_ISPLAYERINTRIGGERBOX */ void sub_64443(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20)
{
    return  /* F_ISPEDINTRIGGERBOX */ sub_64486(  /* PLAYER_PED_ID */ sub_1456(), uParam0 );
}

/* F_ISPEDINTRIGGERBOX */ int sub_64486(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21)
{
    if ((IS_PED_DEAD( uParam0 )) == 0)
    {
        return IS_PED_IN_GAMEPLAY_HELPER_BOX( uParam0, ref uParam1._fU0 );
    }
    return 0;
}

/* P_SETDOORMINMAXLIMIT */ void sub_64586(int iParam0, float fParam1, float fParam2)
{
    if (( /* F_DOESDOOREXIST */ sub_17027( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_17111( iParam0 );
    }
    if (fParam1 > fParam2)
    {
        PRINTSTRING( "[SP]### Error: Door fMinLimit greater than fMaxLimit (default min:-81.0 max:81.0) ###" );
        PRINTNL();
    }
    else
    {
        DOOR_FIND_CLOSEST_SET_LIMIT_MIN( iParam0->_fU0, iParam0->_fU4, fParam1 );
        DOOR_FIND_CLOSEST_SET_LIMIT_MAX( iParam0->_fU0, iParam0->_fU4, fParam2 );
    }
    return;
}

/* UNLOAD_ASSETS_UPSTAIRS */ void sub_64830()
{
     /* WRITESCRIPTLOG */ sub_745( "SP", "UNLOAD_ASSETS_UPSTAIRS", 0 );
     /* TERMINATEISEQ */ sub_31524( -596711032, 1 );
     /* TERMINATEISEQ */ sub_31524( -2007826629, 1 );
     /* UNLOADMODEL */ sub_64928( g_U720 );
     /* UNLOADMODEL */ sub_64928( g_U721 );
     /* UNLOADMODEL */ sub_64928( -695927253 );
     /* UNLOADMODEL */ sub_64928( 2080318414 );
     /* UNLOADMODEL */ sub_64928( l_U890 );
     /* UNLOADMODEL */ sub_64928( l_U905 );
     /* UNLOADMODEL */ sub_64928( g_U2248 );
    return;
}

/* UNLOADMODEL */ void sub_64928(unknown uParam0)
{
    if ((IS_MODEL_IN_CDIMAGE( uParam0 )) == 1)
    {
        SET_MODEL_AS_NO_LONGER_NEEDED( uParam0 );
    }
    else
    {
         /* WRITE_STRING */ sub_3651( "[SP]### ERROR! (UnloadModel) Trying to unload a model that isn't in the img! ###" );
    }
    return;
}

/* F_GETDOOROPENRATIO */ void sub_65549(int iParam0)
{
    int iVar3;
    float Result;

    if (( /* F_DOESDOOREXIST */ sub_17027( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_17111( iParam0 );
    }
    iVar3 = 0;
    Result = 0.00000000;
    GET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, ref iVar3, ref Result );
    return Result;
}

/* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ void sub_65763(unknown uParam0)
{
    int Result;
    int I;
    int iVar5;

    Result = 0;
    iVar5 = (uParam0^) - 1;
    for ( I = 0; I <= iVar5; I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            Result++;
        }
    }
    return Result;
}

/* P_HANDLE_PASSOS_INCIDENTAL_SHOOT_VO */ void sub_66082()
{
    if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()))
    {
        if ( /* ISTIMERDONE */ sub_24480( ref l_U1828 ))
        {
             /* WRITESCRIPTLOG */ sub_745( "SBA", "P_HANDLE_PASSOS_INCIDENTAL_SHOOT_VO", "***" );
             /* P_PLAY_DIAL_PASSOS */ sub_66315( "SNYC_PDBS", ref l_U1888 );
             /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1828, GET_RANDOM_INT_IN_RANGE( 15000, 20000 ) );
        }
    }
    return;
}

/* IS_ANY_SPEECH_CURRENTLY_PLAYING */ void sub_66130()
{
    int Result;
    int I;

    Result = 0;
    for ( I = 0; I <= 3; I++ )
    {
        Result = (IS_SCRIPTED_CONVERSATION_ONGOING( I )) || (Result);
    }
    return Result;
}

/* P_PLAY_DIAL_PASSOS */ void sub_66315(unknown uParam0, unknown uParam1)
{
     /* WRITESCRIPTLOG */ sub_745( "SBA", "P_PLAY_DIAL_PASSOS", "***" );
    if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )))
        {
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( uParam1 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1, g_U750, "PASSOS", uParam1, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 0,  /* PLAYER_PED_ID */ sub_1456(), "MAX", uParam1, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_48670( uParam0, uParam1, 8, 1 );
        }
    }
    return;
}

/* MAL_FINISHACTINT */ void sub_66760(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        PED_FINISH_ACTION_INTENTION( (uParam0^), uParam1 );
    }
    return;
}

/* MAL_CHECKANGLEANDDISTANCEBETWEENPEDANDPLAYER */ int sub_66866(unknown uParam0, float fParam1, unknown uParam2, float fParam3, float fParam4, boolean bParam5)
{
    float fVar8;

    if ((NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() ))) AND (NOT (IS_PED_DEAD( (uParam0^) ))))
    {
        fVar8 =  /* GET_DISTANCE_BETWEEN_PEDS */ sub_66962( (uParam0^),  /* PLAYER_PED_ID */ sub_1456(), 0 );
        if ((fVar8 > fParam1) AND (fParam1 > -1))
        {
            return 0;
        }
        else if ((fVar8 < fParam3) AND (fParam3 > -1))
        {
            return 0;
        }
        else if (NOT (IS_PED_FACING_PED( (uParam0^),  /* PLAYER_PED_ID */ sub_1456(), uParam2 )))
        {
            return 0;
        }
        else if ((IS_PED_FACING_PED( (uParam0^),  /* PLAYER_PED_ID */ sub_1456(), fParam4 )) AND (fParam4 > 0))
        {
            return 0;
        }
        else if (bParam5)
        {
            PRINTSTRING( "MAL_CheckAngleAndDistanceBetweenPedAndPlayer: Actual Distance: " );
            PRINTFLOAT( fVar8 );
            PRINTSTRING( " MAX DISTANCE: " );
            PRINTFLOAT( fParam1 );
            PRINTSTRING( " MIN DISTANCE: " );
            PRINTFLOAT( fParam3 );
            PRINTSTRING( " MAX ANGLE: " );
            PRINTFLOAT( uParam2 );
            PRINTSTRING( " MIN ANGLE: " );
             /* WRITE_FLOAT */ sub_9370( fParam4 );
        }
        return 1;;;;;
    }
    return 0;
}

/* GET_DISTANCE_BETWEEN_PEDS */ void sub_66962(unknown uParam0, unknown uParam1, boolean bParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;

    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        uVar5 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam0 )};
    }
    if (NOT (IS_PED_DEAD( uParam1 )))
    {
        uVar8 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 )};
    }
    if (bParam2)
    {
        return VDIST( uVar5, uVar8 );
        break;
    }
    return VDIST( uVar5._fU0, uVar5._fU4, 0, uVar8._fU0, uVar8._fU4, 0 );
}

/* MAL_WRITESCRIPTLOG */ void sub_67503(unknown uParam0)
{
    unknown uVar3;

    uVar3 = GET_REAL_GAME_TIMER();
    DISPLAYF( "[{0}][{1}]{3} {2} {3}", 4, 513, uVar3, 1537, "MSWW", 1537, uParam0, 1537, "###" );
    return;
}

/* MAL_GETPEDCOORDS */ vector sub_67621(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        return "[dynamic result, ret vals = 3]";
        break;
        GET_PED_COORDS( uParam0 );
        "[doubled result, dropped if not asigned]";
        "[doubled result, dropped if not asigned]";
        break;
    }
    return vector( 0, 0, 0);
}

/* MAL_SETACTINWITHFOCUSPOS */ void sub_67697(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
    if (NOT (IS_PED_DEAD( (uParam0^) )))
    {
        PED_SET_ACTION_INTENTION( (uParam0^), uParam4, uParam5, uParam1 );
    }
    return;
}

/* MAL_ISACTINTCOMPLETED */ int sub_67875(unknown uParam0, unknown uParam1, boolean bParam2)
{
    if (( /* MAL_GETACTINTSTATUS */ sub_67914( (uParam0^), uParam1 )) == 1)
    {
        if (bParam2)
        {
             /* MAL_FINISHACTINT */ sub_66760( uParam0, uParam1 );
        }
        return 1;
    }
    return 0;
}

/* MAL_GETACTINTSTATUS */ int sub_67914(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        return PED_GET_ACTION_INTENTION_STATUS( uParam0, uParam1 );
    }
    return 0;
}

/* MAL_SETACTINT */ void sub_68102(unknown uParam0, unknown uParam1, unknown uParam2)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        PED_SET_ACTION_INTENTION( uParam0, uParam1, uParam2, l_U534 );
    }
    return;
}

/* GET_CLOSEST_PED_ARRAY_MEMBER_TO_PED */ void sub_68639(unknown uParam0, unknown uParam1)
{
    int I;
    float fVar5;
    float fVar6;
    unknown Result;

    fVar6 = 1000.00000000;
    Result = nil;
     /* WRITESCRIPTLOG */ sub_745( "RJM", "GET_CLOSEST_PED_ARRAY_MEMBER_TO_PED - start", 0 );
    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (( /* IS_PED_VALID */ sub_19402( uParam1 )) AND ( /* IS_PED_VALID */ sub_19402( (uParam0^)[I] )))
        {
            fVar5 = VDIST( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( (uParam0^)[I] ), "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS( uParam1 ) );
            if (fVar5 < fVar6)
            {
                fVar6 = fVar5;
                DISPLAYF( "GET_CLOSEST_PED_ARRAY_MEMBER_TO_PED:  Found a closer ped, array index {}, distance {}", 2, 513, I, 769, fVar5 );
                Result = (uParam0^)[I];
            }
        }
    }
     /* WRITESCRIPTLOG */ sub_745( "RJM", "GET_CLOSEST_PED_ARRAY_MEMBER_TO_PED - end", 0 );
    return Result;
}

/* PED_KILL_HEADSOUP */ void sub_69069(unknown uParam0)
{
    if ( /* IS_PED_VALID */ sub_19402( uParam0 ))
    {
        START_PARTICLE_FX_NON_LOOPED_ON_PED_BONE( "Blood_headsoup_S_01", uParam0, 0.25000000, 0, 0, 0, 0, 0, 57704, 2 );
         /* P_KILL_PED */ sub_33711( uParam0 );
    }
    return;
}

/* P_HANDLE_PASSOS_INTERRUPTIONS */ void sub_69706(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5)
{
     /* MAL_HANDLEPASSOSINTERRUPTIONSWITHDIALOGUE */ sub_69832( uParam0, uParam1, uParam2, uParam3, uParam4, uParam5, 69760, 1077936128, 1069547520, 1065353216 );
    return;
}

/* MAL_DUMMYPASSOSINTERRUPTDIALOGUECALL */ void sub_69760(unknown uParam0)
{
    return;
}

/* MAL_HANDLEPASSOSINTERRUPTIONSWITHDIALOGUE */ void sub_69832(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, int iParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    unknown uVar12;

    if (( /* MAL_GETACTINTSTATUS */ sub_67914( uParam0, 29 )) == 3)
    {
        uVar12 = nil;
        if ((( /* MAL_HASPLAYERFIRED */ sub_69946( 1 )) AND (IS_PED_IN_CROSSHAIR_CYLINDER( uParam0, 2, 10000, 0, -1082130432 ))) || (HAS_BULLET_IMPACTED_IN_AREA(  /* MAL_GETPEDCOORDS */ sub_67621( uParam0 ), 3, ref uVar12 )))
        {
             /* MAL_WRITESCRIPTLOG */ sub_67503( "PLAYER SHOT AT PASSOS" );
             /* MAL_SETACTINWITHFOCUSPOS */ sub_67697( ref uParam0,  /* MAL_GETPEDCOORDS */ sub_67621(  /* PLAYER_PED_ID */ sub_1456() ), 34, 1000 );
            SET_PED_PRIMARY_LOOKAT( uParam0,  /* PLAYER_PED_ID */ sub_1456() );
            (uParam1^) = 1;
            break;
            uParam6;
            0;
            break;
        }
        if (NOT (uParam2^))
        {
            if ((( /* MAL_GETACTINTSTATUS */ sub_67914( uParam0, 32 )) != 3) AND ((( /* MAL_GETACTINTSTATUS */ sub_67914( uParam0, 33 )) != 3) AND (IS_PED_TOUCHING_PED(  /* PLAYER_PED_ID */ sub_1456(), uParam0 ))))
            {
                 /* MAL_WRITESCRIPTLOG */ sub_67503( "BAD TOUCH!!" );
                (uParam2^) = 1;
                (uParam1^) = 1;
                 /* MAL_SETACTINWITHFOCUSPOS */ sub_67697( ref uParam0,  /* MAL_GETPEDCOORDS */ sub_67621(  /* PLAYER_PED_ID */ sub_1456() ), 35, 1000 );
                SET_PED_PRIMARY_LOOKAT( uParam0,  /* PLAYER_PED_ID */ sub_1456() );
                break;
                uParam6;
                1;
                break;
            }
        }
        else if (NOT (IS_PED_TOUCHING_PED(  /* PLAYER_PED_ID */ sub_1456(), uParam0 )))
        {
            (uParam2^) = 0;
        }
        if (NOT (uParam3^))
        {
            if ( /* MAL_CHECKANGLEANDDISTANCEBETWEENPEDANDPLAYER */ sub_66866( ref uParam0, 300, 100, -1, 0, 0 ))
            {
                if ((IS_CONTROL_PRESSED( 0, 6 )) AND (IS_PED_IN_CROSSHAIR_CYLINDER( uParam0, 1, 10000, 0, -1082130432 )))
                {
                    (uParam1^) = 1;
                    (uParam3^) = 1;
                     /* MAL_SETACTINWITHFOCUSPOS */ sub_67697( ref uParam0,  /* MAL_GETPEDCOORDS */ sub_67621(  /* PLAYER_PED_ID */ sub_1456() ), 32, 1000 );
                    SET_PED_PRIMARY_LOOKAT( uParam0,  /* PLAYER_PED_ID */ sub_1456() );
                     /* MAL_WRITESCRIPTLOG */ sub_67503( "PLAYER AIMING AT PASSOS" );
                    break;
                    uParam6;
                    2;
                    break;
                }
            }
        }
        else if ((NOT (IS_CONTROL_PRESSED( 0, 6 ))) || (NOT (IS_PED_IN_CROSSHAIR_CYLINDER( uParam0, 1.50000000, 10000, 0, -1082130432 ))))
        {
            if (( /* MAL_GETACTINTSTATUS */ sub_67914( uParam0, 32 )) != 3)
            {
                (uParam3^) = 0;
                 /* MAL_WRITESCRIPTLOG */ sub_67503( "PLAYER NO LONGER AIMING AT PASSOS" );
            }
        }
        if (NOT (uParam1^))
        {
            if (( /* MAL_CHECKANGLEANDDISTANCEBETWEENPEDANDPLAYER */ sub_66866( ref uParam0, uParam9, 180, -1, 46, 0 )) || (( /* MAL_CHECKANGLEANDDISTANCEBETWEENPEDANDPLAYER */ sub_66866( ref uParam0, uParam8, 45, -1, 31, 0 )) || ( /* MAL_CHECKANGLEANDDISTANCEBETWEENPEDANDPLAYER */ sub_66866( ref uParam0, uParam7, 30, -1, 0, 0 ))))
            {
                 /* MAL_WRITESCRIPTLOG */ sub_67503( "INTERRUPTING PASSOS" );
                 /* MAL_SETACTINWITHFOCUSPOS */ sub_67697( ref uParam0,  /* MAL_GETPEDCOORDS */ sub_67621(  /* PLAYER_PED_ID */ sub_1456() ), 33, 1000 );
                SET_PED_PRIMARY_LOOKAT( uParam0,  /* PLAYER_PED_ID */ sub_1456() );
                (uParam1^) = 1;
            }
        }
        else if (( /* MAL_CHECKANGLEANDDISTANCEBETWEENPEDANDPLAYER */ sub_66866( ref uParam0, -1, 180, uParam8 + 1, 91, 0 )) || ( /* MAL_CHECKANGLEANDDISTANCEBETWEENPEDANDPLAYER */ sub_66866( ref uParam0, -1, 90, uParam7 + 1, 0, 0 )))
        {
            if ((NOT (uParam2^)) AND (NOT (uParam3^)))
            {
                if (( /* MAL_ISACTINTCOMPLETED */ sub_67875( ref uParam0, 35, 1 )) || (( /* MAL_ISACTINTCOMPLETED */ sub_67875( ref uParam0, 32, 1 )) || (( /* MAL_ISACTINTCOMPLETED */ sub_67875( ref uParam0, 34, 1 )) || ( /* MAL_ISACTINTCOMPLETED */ sub_67875( ref uParam0, 33, 1 )))))
                {
                     /* MAL_FINISHACTINT */ sub_66760( ref uParam0, 33 );
                     /* MAL_FINISHACTINT */ sub_66760( ref uParam0, 34 );
                     /* MAL_FINISHACTINT */ sub_66760( ref uParam0, 32 );
                     /* MAL_FINISHACTINT */ sub_66760( ref uParam0, 35 );
                     /* MAL_FINISHACTINT */ sub_66760( ref uParam0, 31 );
                     /* MAL_SETACTINT */ sub_68102( uParam0, 36, 1000 );
                    CLEAR_PED_PRIMARY_LOOKAT( uParam0 );
                    (uParam1^) = 0;
                    (uParam3^) = 0;
                    (uParam2^) = 0;
                    (uParam4^) = 0;
                     /* CREATETIMER */ sub_13297( iParam5,  /* F_GETRANDOMINTINRANGE */ sub_70905( 10000, 15000 ), 1, 0 );
                    return;
                }
            }
        }
        if (( /* MAL_GETACTINTSTATUS */ sub_67914( uParam0, 30 )) == 3)
        {
            if ( /* ISTIMERDONE */ sub_24480( iParam5 ))
            {
                 /* MAL_SETACTINWITHFOCUSPOS */ sub_67697( ref uParam0,  /* MAL_GETPEDCOORDS */ sub_67621(  /* PLAYER_PED_ID */ sub_1456() ), 31, 1000 );
                (uParam4^)++;
                break;
                uParam6;
                3;
                break;
            }
            else if ((uParam4^) < 3)
            {
                if ((iParam5->_fU16) || (NOT ( /* HASTIMERBEENACTIVATED */ sub_35524( iParam5 ))))
                {
                     /* CREATETIMER */ sub_13297( iParam5,  /* F_GETRANDOMINTINRANGE */ sub_70905( 10000, 15000 ), 1, 0 );
                     /* STARTTIMER */ sub_24336( iParam5 );
                }
            }
        }
    }
     /* MAL_ISACTINTCOMPLETED */ sub_67875( ref uParam0, 31, 1 );
     /* MAL_ISACTINTCOMPLETED */ sub_67875( ref uParam0, 36, 1 );
    return;
}

/* MAL_HASPLAYERFIRED */ int sub_69946(unknown uParam0)
{
    int iVar3;

    iVar3 = nil;
    if (HAS_SHOT_BEEN_FIRED_IN_AREA(  /* MAL_GETPEDCOORDS */ sub_67621(  /* PLAYER_PED_ID */ sub_1456() ), 2.00000000, uParam0, ref iVar3 ))
    {
        if (iVar3 == ( /* PLAYER_PED_ID */ sub_1456()))
        {
             /* MAL_WRITESCRIPTLOG */ sub_67503( "MAL_HasPlayerFired RETURNING TRUE" );
            return 1;
        }
    }
    return 0;
}

/* F_GETRANDOMINTINRANGE */ void sub_70905(unknown uParam0, int iParam1)
{
    int Result;

    Result = GET_RANDOM_INT_IN_RANGE( uParam0, iParam1 + 1 );
    if (Result > iParam1)
    {
        Result = iParam1;
    }
    return Result;
}

/* INIT_HANDLE_PASSOS_WAITING_SPEECH */ void sub_71477()
{
     /* WRITESCRIPTLOG */ sub_745( "SBA", "INIT_HANDLE_PASSOS_WAITING_SPEECH: Setting ePWS_State = ePWS_SetupState", 0 );
    l_U121 = 1;
    return;
}

/* HANDLE_PASSOS_WAITING_SPEECH */ void sub_71740(int iParam0, unknown uParam1)
{
    switch (l_U121)
    {
        case 0: break;
        case 1:
         /* CREATETIMER */ sub_13297( ref l_U153, iParam0 + (GET_RANDOM_INT_IN_RANGE( -uParam1, uParam1 )), 1, 0 );
         /* STARTTIMER */ sub_24336( ref l_U153 );
        l_U162 = 0;
         /* WRITESCRIPTLOG */ sub_745( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: Going to ePWS_ChooseSpeechState", 0 );
        l_U121 = 2;
        break;
        case 2:
        if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U153 ))
            {
                l_U122 = l_U162;
                 /* WRITESCRIPTLOG */ sub_745( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: Going to ePWS_PlaySpeechState", 0 );
                 /* WRITESCRIPTLOG */ sub_745( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: iPassosSpeechLevel = ", 0 );
                 /* WRITE_INT */ sub_9539( l_U162 );
                l_U121 = 3;
            }
        }
        break;
        case 3:
        switch (l_U122)
        {
            case 0:
             /* P_PLAY_DIAL_PASSOS */ sub_66315( "SNYC_PSDS", ref l_U133 );
            break;
            case 1:
             /* P_PLAY_DIAL_PASSOS */ sub_66315( "SNYC_CMMF", ref l_U123 );
            break;
            case 2:
             /* P_PLAY_DIAL_PASSOS */ sub_66315( "SNYC_TMFL", ref l_U143 );
            break;
        }
         /* WRITESCRIPTLOG */ sub_745( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: Going to ePWS_ResetState", 0 );
        l_U121 = 4;
        break;
        case 4:
         /* CREATETIMER */ sub_13297( ref l_U153, iParam0 + (GET_RANDOM_INT_IN_RANGE( -uParam1, uParam1 )), 1, 0 );
         /* STARTTIMER */ sub_24336( ref l_U153 );
        l_U162++;
        if (l_U162 > 2)
        {
            l_U162 = 0;
        }
         /* WRITESCRIPTLOG */ sub_745( "SBA", "P_HANDLE_PASSOS_WAITING_SPEECH: Returning to ePWS_ChooseSpeechState", 0 );
        l_U121 = 2;
        break;
    }
    return;
}

/* F_HANDLE_04_01_BLENDOUT */ int sub_72543()
{
    int iVar2;

    switch (l_U2001)
    {
        case 0: break;
        case 1:
         /* NIS_PRE_SETUP */ sub_27679( 1, 0, 0, 0 );
         /* WRITESCRIPTLOG */ sub_745( "SP", "eBlend0401State = BLEND_SETUP", 0 );
         /* SET_BAR_BLANK_FIRE_PERCENTAGE */ sub_72699( 100 );
        CAMERA_PLAY_ANIMATED( l_U284, l_U283, 0, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0, 0 );
         /* CLEANPED */ sub_18137( l_U1184 );
         /* CLEANPED */ sub_18137( l_U1156 );
        if ( /* IS_PED_VALID */ sub_19402(  /* PLAYER_PED_ID */ sub_1456() ))
        {
            HIDE_PED_WEAPON_FOR_SCRIPTED_CUTSCENE(  /* PLAYER_PED_ID */ sub_1456(), 0 );
            SET_PLAYER_CAN_BE_PINNED_IN_COVER( 0 );
        }
        l_U2001 = 2;
         /* WRITESCRIPTLOG */ sub_745( "SP", "eBlend0401State = BLEND_SETUP", 0 );
        case 2:
         /* WRITESCRIPTLOG */ sub_745( "SP", "eBlend0401State = BLEND_START", 0 );
        if ((ISEQ_QUERY_STATE( 525357828, 3 )) == 0)
        {
             /* WRITESCRIPTLOG */ sub_745( "SP", "eBlend0401State = starting ISEQ and snapping to cover", 0 );
            if (((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )) == 0) AND ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1494() )) == 0))
            {
                SET_PED_HEADING(  /* PLAYER_PED_ID */ sub_1456(), g_U2253[2]._fU12 );
                SNAP_PLAYER_TO_COVERPOINT(  /* PLAYER_ID */ sub_1494(), "GenCover", "47E254B1_146226EB_Corner2", 0 );
            }
             /* TELEPORTPED */ sub_6292( l_U966[0], g_U2420, g_U2423 );
             /* TELEPORTPED */ sub_6292( l_U966[1], g_U2424, g_U2427 );
            TASK_COMBAT_SNAP_TO_COVER( l_U966[2], "GenCover", "47E254B1_8E4C212D_Popover1", 0 );
             /* TELEPORTPED */ sub_6292( l_U919, g_U2432, g_U2435 );
            ISEQ_REGISTER_ENTITY( 525357828, "max",  /* PLAYER_PED_ID */ sub_1456(), 0 );
            ISEQ_REGISTER_ENTITY( 525357828, "gmed", l_U966[0], 0 );
            ISEQ_REGISTER_ENTITY( 525357828, "gmed1", l_U966[1], 0 );
            ISEQ_REGISTER_ENTITY( 525357828, "gmed2", l_U966[2], 0 );
            ISEQ_REGISTER_ENTITY( 525357828, "gmed3", l_U919, 0 );
            ISEQ_START( 525357828 );
        }
        l_U2001 = 3;
         /* WRITESCRIPTLOG */ sub_745( "SP", "eBlend0401State = BLEND_FIRST_FRAME", 0 );
        break;
        case 3:
         /* WRITESCRIPTLOG */ sub_745( "SP", "eBlend0401State = BLEND_FIRST_FRAME", 0 );
        if ((IS_DEATH_PANEL_WIPE_ALLOWED()) || (IS_SCREEN_FADED_OUT()))
        {
            DO_SCREEN_FADE_IN( 500 );
        }
        if (IS_MAGDEMO())
        {
            FORCE_PAUSEMENU_OPEN( 1 );
        }
        l_U2001 = 4;
         /* WRITESCRIPTLOG */ sub_745( "SP", "eBlend0401State = BLEND_PLAYING", 0 );
        case 4:
        if ((CAMERA_ANIMATED_LENGTH( l_U284, l_U283 )) <= (CAMERA_ANIMATED_CURRENT_TIME() + 600))
        {
            iVar2 = 800;
             /* NIS_CREATE_STATIC_CAM */ sub_32560( ref l_U2002, 0.54192400, -305.81030000, 1.25675900, -0.87592500, 0.00000200, -175.83880000, 1110704128, 1000 );
             /* NIS_PLAY_STATIC_CAMERA */ sub_33300( ref l_U2002 );
            SET_GAMEPLAY_CAM_RELATIVE_HEADING( g_U2253[2]._fU16, 1065353216, 0 );
            SET_GAMEPLAY_CAM_RELATIVE_PITCH( g_U2253[2]._fU20, 1065353216, 0 );
            CAMERA_ANIMATED_STOP( iVar2, 1 );
             /* CREATETIMER */ sub_13297( ref l_U2033, iVar2, 1, 0 );
             /* STARTTIMER */ sub_24336( ref l_U2033 );
             /* WRITESCRIPTLOG */ sub_745( "SP", "eBlend0401State = BLEND_ENDING", 0 );
            l_U2001 = 5;
        }
        break;
        case 5:
        if (( /* ISTIMERDONE */ sub_24480( ref l_U2033 )) == 1)
        {
             /* WRITESCRIPTLOG */ sub_745( "SP", "eBlend0401State = BLEND_IDLE", 0 );
            l_U2001 = 0;
             /* NIS_RETURN_TO_GAMEPLAY_CAM */ sub_74130( 500, 1, 0, g_U2253[2]._fU16, g_U2253[2]._fU20, 0 );
             /* SET_BAR_BLANK_FIRE_PERCENTAGE */ sub_72699( 0 );
             /* NIS_POST_SETUP */ sub_74264( 1, 1 );
            return 1;
        }
        break;
    }
    return 0;
}

/* SET_BAR_BLANK_FIRE_PERCENTAGE */ void sub_72699(unknown uParam0)
{
    int I;

    for ( I = 0; I <= (l_U966 - 1); I++ )
    {
        if ( /* IS_PED_VALID */ sub_19402( l_U966[I] ))
        {
            SET_WEAPON_CHANCE_TO_FIRE_BLANKS( GET_WEAPON_FROM_HAND( l_U966[I], 0, 0 ), uParam0 );
        }
    }
    for ( I = 0; I <= (l_U990 - 1); I++ )
    {
        if ( /* IS_PED_VALID */ sub_19402( l_U990[I] ))
        {
            SET_WEAPON_CHANCE_TO_FIRE_BLANKS( GET_WEAPON_FROM_HAND( l_U990[I], 0, 0 ), uParam0 );
        }
    }
    if ( /* IS_PED_VALID */ sub_19402( l_U919 ))
    {
        SET_WEAPON_CHANCE_TO_FIRE_BLANKS( GET_WEAPON_FROM_HAND( l_U919, 0, 0 ), uParam0 );
    }
    return;
}

/* NIS_RETURN_TO_GAMEPLAY_CAM */ void sub_74130(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, float fParam4, unknown uParam5)
{
    SET_CAM_SIDE_LEFT( uParam2 );
    if (fParam4 != -1E8)
    {
        SET_GAMEPLAY_CAM_RELATIVE_HEADING( uParam3, 1065353216, 0 );
    }
    if (fParam4 != -1E8)
    {
        SET_GAMEPLAY_CAM_RELATIVE_PITCH( fParam4, 1065353216, 0 );
    }
    RENDER_SCRIPT_CAMS( 0, uParam1, uParam0, uParam5 );
    return;
}

/* NIS_POST_SETUP */ void sub_74264(boolean bParam0, boolean bParam1)
{
    SET_WIDESCREEN_BORDERS( 0, 500 );
    DISPLAY_HUD( 1 );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )))
    {
        SET_PLAYER_CONTROL(  /* PLAYER_ID */ sub_1494(), 1, 0 );
        SET_PED_INVINCIBLE(  /* PLAYER_PED_ID */ sub_1456(), 0 );
        if (bParam0)
        {
             /* P_MAX_RELOAD_WEAPONS */ sub_74362();
        }
    }
    PULSE_CROSSHAIR( 1 );
    if (bParam1)
    {
        DESTROY_ALL_CAMS();
    }
    return;
}

/* P_MAX_RELOAD_WEAPONS */ void sub_74362()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )) == 0)
    {
        uVar2 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1456(), 0, 0 );
        uVar3 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1456(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar2 )) == 1)
        {
            uVar4 = GET_MAX_AMMO_IN_HAND_CLIP_MP(  /* PLAYER_PED_ID */ sub_1456(), 0 );
            SET_WEAPON_AMMO_IN_CLIP( uVar2, uVar4 );
        }
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            uVar5 = GET_MAX_AMMO_IN_HAND_CLIP_MP(  /* PLAYER_PED_ID */ sub_1456(), 1 );
            SET_WEAPON_AMMO_IN_CLIP( uVar3, uVar5 );
        }
    }
    return;
}

/* MAL_SETPEDARRAYVISIBLE */ void sub_75073(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* MAL_SETPEDVISIBLE */ sub_75133( (uParam0^)[I], uParam1 );
    }
    return;
}

/* MAL_SETPEDVISIBLE */ void sub_75133(unknown uParam0, unknown uParam1)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_VISIBLE( uParam0, uParam1 );
    }
    else
    {
         /* MAL_WRITESCRIPTLOG */ sub_67503( "MAL_SetPedVisible DOES NOT HAVE VALID PED!" );
    }
    return;
}

/* MAL_COMPAREPLAYERPOSAXIS */ int sub_75486(unknown uParam0, unknown uParam1, float fParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    float fVar8;

    uVar5 = { /* MAL_GETPEDCOORDS */ sub_67621(  /* PLAYER_PED_ID */ sub_1456() )};
    if (ARE_STRINGS_EQUAL( uParam0, "X" ))
    {
        fVar8 = uVar5._fU0;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "Y" ))
    {
        fVar8 = uVar5._fU4;
    }
    else if (ARE_STRINGS_EQUAL( uParam0, "Z" ))
    {
        fVar8 = uVar5._fU8;
    };;;
    if (ARE_STRINGS_EQUAL( uParam1, "Greater" ))
    {
        if (fVar8 > fParam2)
        {
            return 1;
        }
    }
    else if (ARE_STRINGS_EQUAL( uParam1, "Less" ))
    {
        if (fVar8 < fParam2)
        {
            return 1;
        }
    }
    return 0;
}

/* MAL_SETPEDARRAYLOCKEDANDREGISTEREDTARGET */ void sub_75751(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
         /* MAL_REGISTERTARGET */ sub_75828( ref (uParam0^)[I], uParam1 );
         /* MAL_SETLOCKEDTARGET */ sub_75914( ref (uParam0^)[I], uParam1 );
    }
    return;
}

/* MAL_REGISTERTARGET */ void sub_75828(unknown uParam0, unknown uParam1)
{
    if ((NOT (IS_PED_DEAD( uParam1 ))) AND (NOT (IS_PED_DEAD( (uParam0^) ))))
    {
        REGISTER_TARGET( (uParam0^), uParam1 );
    }
    return;
}

/* MAL_SETLOCKEDTARGET */ void sub_75914(unknown uParam0, unknown uParam1)
{
    if ((NOT (IS_PED_DEAD( uParam1 ))) AND (NOT (IS_PED_DEAD( (uParam0^) ))))
    {
        SET_LOCKED_TARGET( (uParam0^), uParam1 );
    }
    return;
}

/* P_ACTIVATEPEDARRAY */ void sub_76016(unknown uParam0)
{
    int I;

    for ( I = 0; I < (uParam0^); I++ )
    {
         /* P_ACTIVATEPED */ sub_76068( (uParam0^)[I] );
    }
    return;
}

/* P_ACTIVATEPED */ void sub_76068(unknown uParam0)
{
    if (NOT (IS_PED_DEAD( uParam0 )))
    {
        SET_PED_FREEZE_PROCESSING( uParam0, 0 );
        SET_PED_VISIBLE( uParam0, 1 );
        SET_PED_VISIBLE_DURING_SEQUENCE( uParam0, 1 );
        FREEZE_PED_POSITION( uParam0, 0 );
        SET_PED_COLLISION( uParam0, 1 );
        SET_PED_PROOFS( uParam0, 0, 0, 0, 0, 0 );
    }
    return;
}

/* MAL_BLOCKPEDARRAY */ void sub_76205(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
        {
            TASK_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( (uParam0^)[I], uParam1 );
        }
    }
    return;
}

/* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ void sub_76355(int iParam0, unknown uParam1)
{
    if (iParam0->_fU64 == 1)
    {
        return 0;
    }
    else
    {
        iParam0->_fU64 =  /* F_ISPEDINTRIGGERBOX */ sub_64486(  /* PLAYER_PED_ID */ sub_1456(), (iParam0^) );
        if ((iParam0->_fU64) AND (uParam1))
        {
            GAMEPLAY_HELPER_BOX_SET_ENABLED( iParam0 + 0, 0 );
        }
    }
    return iParam0->_fU64;
}

/* F_ASSIGN_BULLET_CAM_TO_LAST_LIVING_PED */ void sub_76701(unknown uParam0)
{
    int I;

    if (( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_65763( uParam0 )) == 1)
    {
        for ( I = 0; I <= ((uParam0^) - 1); I++ )
        {
            if (NOT (IS_PED_DEAD( (uParam0^)[I] )))
            {
                if (NOT (GET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I] )))
                {
                    SET_PED_CAN_TRIGGER_BULLET_CAM( (uParam0^)[I], 1 );
                    return (uParam0^)[I];
                }
            }
        }
    }
    return nil;
}

/* PLAY_CUTSCENE_VIG_02 */ int sub_77160()
{
    unknown uVar2;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;

    switch (l_U766)
    {
        case 0:
         /* NIS_PRE_SETUP */ sub_27679( 1, 0, 0, 1 );
        if ( /* IS_MAX_VALID */ sub_22677())
        {
            if ( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( l_U1364 ))
            {
                 /* WRITESCRIPTLOG */ sub_745( "RJM", "Blergh 2", 0 );
                CUTSCENE_REGISTER_PED_TELEPORT(  /* PLAYER_PED_ID */ sub_1456(), 1.35313800, -323.28720000, 0.22331200, 148.26310000 );
                l_U1731 = 1;
            }
            else if ((NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( l_U1679 ))) AND (NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( l_U1658 ))))
            {
                 /* WRITESCRIPTLOG */ sub_745( "RJM", "Blergh 3", 0 );
                uVar5 = {"[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS(  /* PLAYER_PED_ID */ sub_1456() )};
                GET_GROUND_Z_FOR_3D_COORD( uVar5, ref uVar5._fU8 );
                uVar2 = {(vector( -0.99000000, -328.90000000, 1.08000000)) - (vector( "[doubled result, dropped if not asigned]", "[doubled result, dropped if not asigned]", GET_PED_COORDS(  /* PLAYER_PED_ID */ sub_1456() )))};
                uVar8 = GET_HEADING_FROM_VECTOR_2D( uVar2._fU0, uVar2._fU4 );
                CUTSCENE_REGISTER_PED_TELEPORT(  /* PLAYER_PED_ID */ sub_1456(), uVar5, uVar8 );
                CAMERA_POINT_AT_COORD( -0.99000000, -328.90000000, 1.08000000, 0 );
                l_U1732 = 1;
            }
            SET_PED_DEFAULT_AIM_AHEAD(  /* PLAYER_PED_ID */ sub_1456() );
        }
         /* KILL_SPEECH */ sub_49833( ref l_U1928, 0 );
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1456(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
        ISEQ_UNREGISTER_ENTITY( -2007826629, "passos" );
         /* TERMINATEISEQ */ sub_31524( -2007826629, 1 );
        ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 0, 0 );
        REGISTER_HIDE_ENTITY_AT_POSITION( 1106737826, -0.33956000, -328.97670000, 1.32756000 );
         /* P_SETDOORLOCKED */ sub_17258( ref g_U2048, 0 );
         /* P_SETDOORMINMAXLIMIT */ sub_64586( ref g_U2048, 17.00000000, 17.00000000 );
         /* P_OPENDOOR */ sub_77716( ref g_U2048, 0, 1, 1065353216 );
         /* P_SETDOORAUTOCLOSE */ sub_77880( ref g_U2048, 0 );
         /* P_SETDOORMINMAXLIMIT */ sub_64586( ref g_U2048, 65451, 85 );
        if ( /* IS_PASSOS_VALID */ sub_62062())
        {
            REGISTER_PED_PRE_SEAMLESS_CUTSCENE( g_U750, "FB_Pass_NY", 0 );
            REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( g_U750, 0, 0 ), "W_PI_Glk18_Aa_H", 0 );
        }
        l_U1729 = 1;
         /* UPDATE_PASSOS_BAR_AND_BASEMENT */ sub_61649();
        START_SEAMLESS_CUTSCENE();
        if ((NOT IS_BULLET_CAMERA_TO_GAMEPLAY_ALLOWED()) AND ((IS_BULLET_CAMERA_RUNNING( 0 )) == 0))
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "Panel wipe active", 0 );
            ALLOW_BULLET_CAMERA_TO_GAMEPLAY( 1, 0 );
        }
         /* WRITESCRIPTLOG */ sub_745( "RJM", "PLAY_CUTSCENE_VIG_02 - Going to VIG_02_FRAME_1", 0 );
        l_U766 = 1;
        break;
        case 1:
        if ( /* IS_MAX_VALID */ sub_22677())
        {
            SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_1456(), 0 );
        }
         /* WRITESCRIPTLOG */ sub_745( "RJM", "PLAY_CUTSCENE_VIG_02 - Going to VIG_02_PLAYING", 0 );
        l_U766 = 2;
        break;
        case 2:
        if (HAS_CUTSCENE_FINISHED())
        {
             /* P_SETDOORAUTOCLOSE */ sub_77880( ref g_U2048, 1 );
             /* P_CLOSEDOOR */ sub_17001( ref g_U2048, 0 );
            CLEAR_PED_TASKS_IMMEDIATELY( g_U750 );
            PED_ACTION_TREE_PLAY_NODE( g_U750, ref g_U2203 );
             /* TELEPORTPED */ sub_6292( g_U750, l_U1996, 0.00000000 );
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( g_U750, 1 );
            SET_ROOM_FOR_PED_BY_NAME( g_U750, ref g_U2489 );
             /* P_SETDOORMINMAXLIMIT */ sub_64586( ref g_U2048, 17, 85 );
             /* P_OPENDOOR */ sub_77716( ref g_U2048, 1, 1, 0.90000000 );
             /* P_CLOSEDOOR */ sub_17001( ref g_U2048, 0 );
            if ( /* IS_MAX_VALID */ sub_22677())
            {
                SET_PED_VISIBLE(  /* PLAYER_PED_ID */ sub_1456(), 1 );
            }
            if (l_U1732)
            {
                CAMERA_CLEAR_POINT_AT_TARGET();
            }
            if (l_U1731)
            {
                SET_GAMEPLAY_CAM_RELATIVE_HEADING( 11.46376000, 1065353216, 0 );
                SET_GAMEPLAY_CAM_RELATIVE_PITCH( -16.15178000, 1065353216, 0 );
            }
             /* NIS_POST_SETUP */ sub_74264( 1, 1 );
             /* WRITESCRIPTLOG */ sub_745( "RJM", "PLAY_CUTSCENE_VIG_02 - Going to VIG_02_DONE", 0 );
            l_U766 = 4;
        }
        break;
        case 4:
        if (HAS_CUTSCENE_UNLOADED())
        {
            return 1;
        }
        break;
    }
    return 0;
}

/* P_OPENDOOR */ void sub_77716(int iParam0, int iParam1, int iParam2, unknown uParam3)
{
    float fVar6;

    if (( /* F_DOESDOOREXIST */ sub_17027( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_17111( iParam0 );
    }
    fVar6 = 0.00000000;
    if (iParam1 == 1)
    {
        fVar6 = uParam3;
    }
    else
    {
        fVar6 = -uParam3;
    }
    if (iParam2 == 1)
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 1, fVar6 );
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    else
    {
        SET_STATE_OF_CLOSEST_DOOR_OF_TYPE( iParam0->_fU0, iParam0->_fU4, 0, fVar6 );
    }
    return;
}

/* P_SETDOORAUTOCLOSE */ void sub_77880(int iParam0, unknown uParam1)
{
    if (( /* F_DOESDOOREXIST */ sub_17027( iParam0 )) == 0)
    {
         /* P_PRINTDOORNOTEXIST */ sub_17111( iParam0 );
    }
    DOOR_FIND_CLOSEST_SET_AUTO_CLOSE( iParam0->_fU0, iParam0->_fU4, uParam1 );
    return;
}

/* TAKE_PAINKILLER_ARRAY_SNAPSHOT */ void sub_78706(unknown uParam0, unknown uParam1)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if (DOES_PLACEMENT_EXIST( (uParam0^)[I] ))
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "DO_ANY_PAINKILLERS_STILL_EXIST - Found a pill in there, we can still play some V.O.", 0 );
            (uParam1^)[I] = 1;
        }
        else
        {
            (uParam1^)[I] = 0;
        }
    }
    return;
}

/* P_DIAL_MAX_DOOR_BLOCK */ void sub_79223()
{
     /* WRITESCRIPTLOG */ sub_745( "SBA", "P_DIAL_MAX_DOOR_BLOCK", "***" );
    if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )))
    {
         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( ref l_U1856 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 0,  /* PLAYER_PED_ID */ sub_1456(), "MAX", ref l_U1856, 2, 0 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1,  /* PLAYER_PED_ID */ sub_1456(), "MAX", ref l_U1856, 2, 0 );
         /* PLAY_SINGLE_SPEECH */ sub_48670( "SNYC_GOTB", ref l_U1856, 8, 1 );
    }
    return;
}

/* P_HANDLE_DIAL_MAX_HANG_OUT_BAR */ void sub_79403()
{
    switch (l_U1886)
    {
        case 0:
        if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U1810 ))
            {
                 /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_79555( "SNYC_MVO1", ref l_U1876 );
                 /* CREATETIMER */ sub_13297( ref l_U1810, 20000, 1, 0 );
                 /* STARTTIMER */ sub_24336( ref l_U1810 );
                l_U1886++;
                DISPLAYF( "P_HANDLE_DIAL_MAX_HANG_OUT_BAR: going to {}", 1, 513, l_U1886 );
            }
        }
        break;
        case 1:
        if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U1810 ))
            {
                 /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_79555( "SNYC_MVO2", ref l_U1876 );
                 /* CREATETIMER */ sub_13297( ref l_U1810, 20000, 1, 0 );
                 /* STARTTIMER */ sub_24336( ref l_U1810 );
                l_U1886++;
                DISPLAYF( "P_HANDLE_DIAL_MAX_HANG_OUT_BAR: going to {}", 1, 513, l_U1886 );
            }
        }
        break;
        case 2:
        if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U1810 ))
            {
                 /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_79555( "SNYC_MVO3", ref l_U1876 );
                 /* CREATETIMER */ sub_13297( ref l_U1810, 20000, 1, 0 );
                 /* STARTTIMER */ sub_24336( ref l_U1810 );
                l_U1886++;
                DISPLAYF( "P_HANDLE_DIAL_MAX_HANG_OUT_BAR: going to {}", 1, 513, l_U1886 );
            }
        }
        break;
        case 3:
        if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U1810 ))
            {
                 /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_79555( "SNYC_MVO4", ref l_U1876 );
                 /* CREATETIMER */ sub_13297( ref l_U1810, 20000, 1, 0 );
                 /* STARTTIMER */ sub_24336( ref l_U1810 );
                l_U1886++;
                DISPLAYF( "P_HANDLE_DIAL_MAX_HANG_OUT_BAR: going to {}", 1, 513, l_U1886 );
            }
        }
        break;
        case 4:
        if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U1810 ))
            {
                 /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_79555( "SNYC_MSWHG2", ref l_U1876 );
                 /* CREATETIMER */ sub_13297( ref l_U1810, 20000, 1, 0 );
                 /* STARTTIMER */ sub_24336( ref l_U1810 );
                l_U1886++;
                DISPLAYF( "P_HANDLE_DIAL_MAX_HANG_OUT_BAR: going to {}", 1, 513, l_U1886 );
            }
        }
        break;
        case 5:
        if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U1810 ))
            {
                 /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_79555( "SNYC_MSWHG3", ref l_U1876 );
                l_U1886++;
                DISPLAYF( "P_HANDLE_DIAL_MAX_HANG_OUT_BAR: going to {}", 1, 513, l_U1886 );
            }
        }
        break;
        case 6: break;
    }
    return;
}

/* P_SPEECH_PLAY_MAX_MONOLOGUE */ void sub_79555(unknown uParam0, unknown uParam1)
{
     /* WRITESCRIPTLOG */ sub_745( "SBA", "P_SPEECH_PLAY_MAX_MONOLOGUE", "***" );
    if ( /* IS_MAX_VALID */ sub_22677())
    {
         /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( uParam1 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 0,  /* PLAYER_PED_ID */ sub_1456(), "MAX", uParam1, 2, 0 );
         /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1,  /* PLAYER_PED_ID */ sub_1456(), "MAX", uParam1, 2, 0 );
         /* PLAY_SINGLE_SPEECH */ sub_48670( uParam0, uParam1, 8, 1 );
    }
    return;
}

/* UPDATE_PILL_VO */ int sub_80588(unknown uParam0, unknown uParam1, unknown uParam2)
{
    int I;

    if ((IS_PLAYER_DEAD(  /* PLAYER_ID */ sub_1494() )) == 0)
    {
        if (( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()) == 0)
        {
            for ( I = 0; I <= ((uParam1^) - 1); I++ )
            {
                if ((uParam2^)[I])
                {
                    if ((HAS_PLACEMENT_BEEN_COLLECTED( (uParam1^)[I] )) || (NOT (DOES_PLACEMENT_EXIST( (uParam1^)[I] ))))
                    {
                        (uParam2^)[I] = 0;
                        if (TIME_SINCE_LAST_MONOLOGUE() > 5000)
                        {
                             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( ref l_U111 );
                             /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_79555( uParam0, ref l_U111 );
                            return 1;
                        }
                    }
                }
            }
        }
    }
    return 0;
}

/* UPDATE_VIGNETTE_03 */ void sub_80949()
{
    switch (l_U765)
    {
        case 0:
        if ( /* IS_PED_VALID */ sub_19402( l_U1056 ))
        {
            SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1056, 0 );
            ISEQ_REGISTER_ENTITY( -1679907246, "caller", l_U1056, 0 );
            ISEQ_START( -1679907246 );
             /* P_DIAL_THUG_CALLER */ sub_81100();
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_03: going to VIG_03_WAIT_FOR_PLAYER_INTERRUPT", " " );
            l_U765 = 1;
        }
         /* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_21100( ref l_U1039[0], 0 );
         /* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_21100( ref l_U1039[1], 0 );
         /* PED_SET_TETHERBOX */ sub_42672( ref l_U1039[0], l_U1723, 1 );
         /* PED_SET_TETHERBOX */ sub_42672( ref l_U1039[1], l_U1723, 1 );
        break;
        case 1:
        if ( /* IS_MAX_VALID */ sub_22677())
        {
            if (( /* F_ISPLAYERINTRIGGERBOXFIRSTTIME */ sub_76355( ref l_U1532, 0 )) || (( /* F_IS_PED_AWARE_OF_PED */ sub_81453( ref l_U1039[1],  /* PLAYER_PED_ID */ sub_1456(), 1, 1, 1, 1, 1 )) || (( /* F_IS_PED_AWARE_OF_PED */ sub_81453( ref l_U1039[0],  /* PLAYER_PED_ID */ sub_1456(), 1, 1, 1, 1, 1 )) || ( /* F_IS_PED_AWARE_OF_PED */ sub_81453( ref l_U1056,  /* PLAYER_PED_ID */ sub_1456(), 1, 1, 1, 1, 1 )))))
            {
                 /* START_BASEMENT_FIGHT */ sub_81907();
                 /* P_DIAL_THUG_CALLER_INTERRUPT */ sub_82006();
                 /* CREATETIMER */ sub_13297( ref l_U1967, 1500, 1, 0 );
                 /* STARTTIMER */ sub_24336( ref l_U1967 );
                 /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_03: Basement Caller saw Max, going to VIG_03_WAIT_TO_START_CALLER_INTERRUPT_MOCAP", " " );
                l_U765 = 2;
            }
            else if (NOT ( /* IS_PED_VALID */ sub_19402( l_U1056 )))
            {
                 /* START_BASEMENT_FIGHT */ sub_81907();
                 /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_03: Basement Caller was killed, going to VIG_03_DONE", " " );
                l_U765 = 5;
            }
            else if (ISEQ_QUERY_ENTITY_STATE( -1679907246, "caller", 6 ))
            {
                 /* TASK_CALLER_ATTACK */ sub_82629();
                 /* START_BASEMENT_FIGHT */ sub_81907();
                 /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1774, 15000 );
                 /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_03: Animation finished, going to VIG_03_DONE", " " );
                l_U765 = 5;
            };;;
        }
        break;
        case 2:
        if ( /* ISTIMERDONE */ sub_24480( ref l_U1967 ))
        {
             /* DISABLETIMER */ sub_13219( ref l_U1967 );
            SET_PED_DEFAULT_AIM_AT_PED( l_U1056,  /* PLAYER_PED_ID */ sub_1456() );
            PED_SET_ACTION_INTENTION( l_U1056, 47, 1000, 0, 0, 0 );
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_03: Timer elapsed, going to VIG_03_WAIT_FOR_INTERRUPT_MOCAP_TO_END", " " );
            l_U765 = 4;
        }
        else if (NOT ( /* IS_PED_VALID */ sub_19402( l_U1056 )))
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_03: Caller was killed, going to VIG_03_DONE", " " );
            l_U765 = 5;
        }
        break;
        case 4:
        if (NOT ( /* IS_PED_VALID */ sub_19402( l_U1056 )))
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_03: Caller killed mid-interrupt, going to VIG_03_DONE", " " );
            l_U765 = 5;
        }
        if (ISEQ_QUERY_STATE( -1679907246, 6 ))
        {
             /* TASK_CALLER_ATTACK */ sub_82629();
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_VIGNETTE_03: Interrupt finished, caller attacking, going to VIG_03_DONE", " " );
            l_U765 = 5;
        }
        break;
        case 5:
        if ( /* IS_PASSOS_VALID */ sub_62062())
        {
            CLEAR_PED_DEFAULT_AIM( g_U750 );
            SET_PED_DEFAULT_AIM_AT_COORD( g_U750, 4.48000000, -303.91000000, -2.82000000 );
        }
        ISEQ_UNREGISTER_ENTITY( -1679907246, "caller" );
         /* TERMINATEISEQ */ sub_31524( -1679907246, 1 );
        l_U610 = 5;
        l_U1966 = 0;
        break;
    }
    return;
}

/* P_DIAL_THUG_CALLER */ void sub_81100()
{
     /* WRITESCRIPTLOG */ sub_745( "RJM", "P_DIAL_THUG_CALLER", "***" );
    if ( /* IS_PED_VALID */ sub_19402( l_U1056 ))
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )))
        {
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( ref l_U1976 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1, l_U1056, "M4_NY_07_AVG", ref l_U1976, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_48670( "SNYC_VIG03A", ref l_U1976, 8, 1 );
        }
    }
    return;
}

/* F_IS_PED_AWARE_OF_PED */ int sub_81453(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, int iParam6)
{
    if ((NOT (IS_PED_DEAD( uParam1 ))) AND (NOT (IS_PED_DEAD( (uParam0^) ))))
    {
        if ((uParam3) AND (GET_PED_AWARENESS_STATE( (uParam0^), uParam1, 1 )))
        {
            if (iParam6 == 1)
            {
                 /* WRITESCRIPTLOG */ sub_745( "MF", "ped has SEEN target ped", 0 );
            }
            return 1;
        }
        else if ((uParam4) AND (GET_PED_AWARENESS_STATE( (uParam0^), uParam1, 8 )))
        {
            if (iParam6 == 1)
            {
                 /* WRITESCRIPTLOG */ sub_745( "MF", "ped has BEEN SHOT AT by target ped", 0 );
            }
            return 1;
        }
        else if ((uParam2) AND (GET_PED_AWARENESS_STATE( (uParam0^), uParam1, 2 )))
        {
            if (iParam6 == 1)
            {
                 /* WRITESCRIPTLOG */ sub_745( "MF", "ped has HEARD target ped", 0 );
            }
            return 1;
        }
        else if ((uParam5) AND (GET_PED_AWARENESS_STATE( (uParam0^), uParam1, 4 )))
        {
            if (iParam6 == 1)
            {
                 /* WRITESCRIPTLOG */ sub_745( "MF", "ped has BEEN TOLD ABOUT target ped", 0 );
            }
            return 1;
        };;;;
    }
    return 0;
}

/* START_BASEMENT_FIGHT */ void sub_81907()
{
     /* WRITESCRIPTLOG */ sub_745( "RJM", "START_BASEMENT_FIGHT", "***" );
     /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1765, 4000 );
    l_U1735 = 1;
    return;
}

/* P_DIAL_THUG_CALLER_INTERRUPT */ void sub_82006()
{
     /* WRITESCRIPTLOG */ sub_745( "RJM", "P_DIAL_THUG_CALLER_INTERRUPT", "***" );
    if ( /* IS_PED_VALID */ sub_19402( l_U1056 ))
    {
        if ( /* IS_SPEECH_CURRENTLY_PLAYING */ sub_82116( l_U1976 ))
        {
             /* KILL_SPEECH */ sub_49833( ref l_U1976, 0 );
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( ref l_U1986 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1, l_U1056, "M4_NY_07_AVG", ref l_U1986, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_48670( "SNYC_VIG03", ref l_U1986, 8, 1 );
        }
    }
    return;
}

/* IS_SPEECH_CURRENTLY_PLAYING */ int sub_82116(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9)
{
    if (NOT ( /* IS_SCRIPT_SPEECH_STRUCT_VALID */ sub_49861( uParam0 )))
    {
        return 0;
    }
    if ((g_U11[uParam0._fU4] == 2) || ((g_U11[uParam0._fU4] == 1) || (IS_SCRIPTED_CONVERSATION_ONGOING( uParam0._fU4 ))))
    {
        if (uParam0._fU8 == g_U6[uParam0._fU4])
        {
            return 1;
        }
    }
    return 0;
}

/* TASK_CALLER_ATTACK */ void sub_82629()
{
    if ( /* IS_PED_VALID */ sub_19402( l_U1056 ))
    {
         /* PED_SET_REGISTER_TARGET */ sub_82684( ref l_U1056, g_U750 );
         /* PED_SET_TETHERBOX */ sub_42672( ref l_U1056, l_U1723, 1 );
    }
    return;
}

/* PED_SET_REGISTER_TARGET */ void sub_82684(unknown uParam0, unknown uParam1)
{
    if (( /* IS_PED_VALID */ sub_19402( uParam1 )) AND ( /* IS_PED_VALID */ sub_19402( (uParam0^) )))
    {
        REGISTER_TARGET( (uParam0^), uParam1 );
    }
    return;
}

/* MOVE_FIRST_GROUP_SECOND_WAVE */ void sub_83617()
{
     /* WRITESCRIPTLOG */ sub_745( "SBA", "MOVE_FIRST_GROUP_SECOND_WAVE", "***" );
    if ( /* IS_PED_VALID */ sub_19402( l_U1039[2] ))
    {
         /* PED_SET_TETHERBOX */ sub_42672( ref l_U1039[2], l_U1723, 1 );
        SET_BLOCKING_OF_NON_TEMPORARY_EVENTS( l_U1039[2], 0 );
        SET_PED_SUGGESTED_COVER_POINT( l_U1039[2], "ny_bar", "Corner_Position147" );
         /* PED_TASK_COMBAT_MOVE_TO_COVER */ sub_46116( l_U1039[2], "ny_bar", "Corner_Position147",  /* PLAYER_PED_ID */ sub_1456(), 0 );
    }
    return;
}

/* UPDATE_KITCHEN_CHARGERS_CREATION */ void sub_83879()
{
    int iVar2;

    iVar2 = 500;
    switch (l_U767)
    {
        case 0:
         /* P_SETUP_AI_GROUP */ sub_18251( ref l_U1087, 1.00000000, 0 );
         /* SETUP_KITCHEN_GUY */ sub_84019( l_U1057[0], ref l_U1084[0], l_U1087, 0 );
        TASK_COMBAT_SNAP_TO_COVER( l_U1084[0], "GenCover", "47E254B1_6BF903F7_Popover2", 0 );
        SET_PED_FLAG_ALWAYS_HIDE_WHEN_IN_COVER( l_U1084[0], 1 );
        SET_PED_FLAG_LOCK_TO_COVER( l_U1084[0], 1 );
         /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1792, iVar2 );
         /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_KITCHEN_CHARGERS_CREATION - going to KITCHEN_CREATE_GUY2", 0 );
        l_U767 = 1;
        break;
        case 1:
        if ( /* ISTIMERDONE */ sub_24480( ref l_U1792 ))
        {
             /* SETUP_KITCHEN_GUY */ sub_84019( l_U1057[1], ref l_U1084[1], l_U1087, 0 );
            TASK_COMBAT_SNAP_TO_COVER( l_U1084[1], "GenCover", "47E254B1_6BF903F7_Popover5", 0 );
            SET_PED_FLAG_ALWAYS_HIDE_WHEN_IN_COVER( l_U1084[1], 1 );
            SET_PED_FLAG_LOCK_TO_COVER( l_U1084[1], 1 );
             /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1792, iVar2 );
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_KITCHEN_CHARGERS_CREATION - going to KITCHEN_CREATE_GUY3", 0 );
            l_U767 = 2;
        }
        break;
        case 2:
        if ( /* ISTIMERDONE */ sub_24480( ref l_U1792 ))
        {
             /* SETUP_KITCHEN_GUY */ sub_84019( l_U1093[0], ref l_U1120[0], l_U1123, 1 );
             /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1792, iVar2 );
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_KITCHEN_CHARGERS_CREATION - going to KITCHEN_CREATE_GUY4", 0 );
            l_U767 = 3;
        }
        break;
        case 3:
        if ( /* ISTIMERDONE */ sub_24480( ref l_U1792 ))
        {
             /* SETUP_KITCHEN_GUY */ sub_84019( l_U1093[1], ref l_U1120[1], l_U1087, 1 );
             /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1792, iVar2 );
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_KITCHEN_CHARGERS_CREATION - going to KITCHEN_CREATE_DONE", 0 );
            l_U767 = 4;
        }
        break;
        case 4:
         /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_KITCHEN_CHARGERS_CREATION - shutting down", 0 );
         /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_20864( ref l_U1084, "KITCHEN" );
         /* GIVE_DEBUG_NAMES_TO_PEDS_IN_ARRAY */ sub_20864( ref l_U1120, "KITCHEN_WAVE2" );
        l_U1734 = 0;
        break;
    }
    return;
}

/* SETUP_KITCHEN_GUY */ void sub_84019(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, boolean bParam20)
{
     /* CLEANPED */ sub_18137( (uParam13^) );
    (uParam13^) =  /* CREATEPED */ sub_18676( ref uParam0 );
     /* PED_INITIALIZE */ sub_21250( ref uParam0, uParam13, -862236369, "AIT_NORMAL", 0, 25000, 2, 0, 25000 );
    if ( /* IS_PED_VALID */ sub_19402( (uParam13^) ))
    {
         /* P_QUICK_ADD_PED_TO_GROUP */ sub_19529( (uParam13^), ref uParam14 );
        if (bParam20)
        {
             /* PED_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_21100( uParam13, 1 );
             /* P_DEACTIVATEPED */ sub_43133( (uParam13^) );
        }
         /* PED_SET_ROOM_BY_NAME */ sub_20751( uParam13, g_U2497 );
         /* PED_SET_TETHERBOX */ sub_42672( uParam13, l_U1722, 1 );
    }
    return;
}

/* PED_TASK_COMBAT_PLAYER */ void sub_85112(unknown uParam0, boolean bParam1)
{
    if ((NOT (IS_PED_RAGDOLL( uParam0, 0 ))) AND ((NOT (IS_PED_INJURED( uParam0 ))) AND (( /* IS_MAX_VALID */ sub_22677()) AND ( /* IS_PED_VALID */ sub_19402( uParam0 )))))
    {
        if (bParam1)
        {
            CLEAR_PED_TASKS_IMMEDIATELY( uParam0 );
        }
        CLEAR_LOCKED_TARGET( uParam0 );
         /* PED_SET_REGISTER_TARGET_PLAYER */ sub_85214( ref uParam0 );
         /* PED_SET_LOCKED_ON_PLAYER */ sub_85297( ref uParam0 );
        TASK_COMBAT_PED( uParam0,  /* PLAYER_PED_ID */ sub_1456() );
    }
    return;
}

/* PED_SET_REGISTER_TARGET_PLAYER */ void sub_85214(unknown uParam0)
{
    if (( /* IS_MAX_VALID */ sub_22677()) AND ( /* IS_PED_VALID */ sub_19402( (uParam0^) )))
    {
         /* PED_SET_REGISTER_TARGET */ sub_82684( uParam0,  /* PLAYER_PED_ID */ sub_1456() );
    }
    return;
}

/* PED_SET_LOCKED_ON_PLAYER */ void sub_85297(unknown uParam0)
{
    if (( /* IS_MAX_VALID */ sub_22677()) AND ( /* IS_PED_VALID */ sub_19402( (uParam0^) )))
    {
         /* PED_SET_LOCKED_ON_PED */ sub_85360( uParam0,  /* PLAYER_PED_ID */ sub_1456() );
    }
    return;
}

/* PED_SET_LOCKED_ON_PED */ void sub_85360(unknown uParam0, unknown uParam1)
{
    if (( /* IS_PED_VALID */ sub_19402( uParam1 )) AND ( /* IS_PED_VALID */ sub_19402( (uParam0^) )))
    {
        SET_LOCKED_TARGET( (uParam0^), uParam1 );
    }
    return;
}

/* TASK_KITCHEN_WAVE1 */ void sub_85903()
{
     /* WRITESCRIPTLOG */ sub_745( "RJM", "Tasking the first kitchen wave to break out of cover", 0 );
    if ( /* IS_PED_VALID */ sub_19402( l_U1084[0] ))
    {
        SET_PED_FLAG_ALWAYS_HIDE_WHEN_IN_COVER( l_U1084[0], 0 );
        SET_PED_FLAG_LOCK_TO_COVER( l_U1084[0], 0 );
    }
    if ( /* IS_PED_VALID */ sub_19402( l_U1084[1] ))
    {
        SET_PED_FLAG_ALWAYS_HIDE_WHEN_IN_COVER( l_U1084[1], 0 );
        SET_PED_FLAG_LOCK_TO_COVER( l_U1084[1], 0 );
    }
    return;
}

/* F_DIAL_PASSOS_MAX_BASEMENT_SHOOT */ int sub_86120()
{
    if (NOT l_U1837._fU20)
    {
        if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()))
        {
            if ( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( l_U1406 ))
            {
                if (l_U763 == 10)
                {
                    if ((( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_65763( ref l_U1084 )) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_65763( ref l_U1120 ))) > 0)
                    {
                         /* WRITESCRIPTLOG */ sub_745( "SBA", "F_DIAL_PASSOS_MAX_BASEMENT_SHOOT: Starting Timer", "***" );
                         /* P_CREATE_AND_START_TIMER */ sub_62217( ref l_U1837, 400 );
                    }
                }
            }
        }
    }
    if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()))
    {
        if ( /* ISTIMERDONE */ sub_24480( ref l_U1837 ))
        {
            if ((( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_65763( ref l_U1084 )) + ( /* F_GET_NUM_LIVING_PEDS_IN_ARRAY */ sub_65763( ref l_U1120 ))) > 1)
            {
                if ( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( l_U1406 ))
                {
                     /* WRITESCRIPTLOG */ sub_745( "SBA", "F_DIAL_PASSOS_MAX_BASEMENT_SHOOT: Playing dialog", "***" );
                     /* P_DIAL_PASSOS_MAX_BASEMENT_SHOOT_VO */ sub_86458();
                    return 1;
                }
                else
                {
                     /* WRITESCRIPTLOG */ sub_745( "SBA", "F_DIAL_PASSOS_MAX_BASEMENT_SHOOT: Max not in bar area, skipping dialog", "***" );
                    return 1;
                }
            }
            else
            {
                 /* WRITESCRIPTLOG */ sub_745( "SBA", "F_DIAL_PASSOS_MAX_BASEMENT_SHOOT: Not enough thugs left, skipping dialog", "***" );
                return 1;
            }
        }
    }
    return 0;
}

/* P_DIAL_PASSOS_MAX_BASEMENT_SHOOT_VO */ void sub_86458()
{
    string sVar2;

     /* WRITESCRIPTLOG */ sub_745( "SBA", "P_DIAL_PASSOS_MAX_BASEMENT_SHOOT_VO", "***" );
    if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )))
        {
            if ((GET_RANDOM_FLOAT_IN_RANGE( 0, 1065353216 )) < 0.33400000)
            {
                sVar2 = "SNYC_LAT4";
            }
            else if ((GET_RANDOM_FLOAT_IN_RANGE( 0, 1065353216 )) < 0.50000000)
            {
                sVar2 = "SNYC_LAT5";
            }
            else
            {
                sVar2 = "SNYC_LAT1";
            }
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( ref l_U1898 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1,  /* PLAYER_PED_ID */ sub_1456(), "MAX", ref l_U1898, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 2, g_U750, "PASSOS", ref l_U1898, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_48670( sVar2, ref l_U1898, 8, 1 );
        }
    }
    return;
}

/* TASK_KITCHEN_WAVE2 */ void sub_87123()
{
    int I;

     /* P_SETDOORLOCKED */ sub_17258( ref g_U2083, 0 );
     /* P_ACTIVATEPEDARRAY */ sub_76016( ref l_U1120 );
     /* PED_ARRAY_SET_BLOCKING_OF_NON_TEMPORARY_EVENTS */ sub_21017( ref l_U1120, 0 );
    for ( I = 0; I <= (l_U1120 - 1); I++ )
    {
        if (( /* IS_MAX_VALID */ sub_22677()) AND ( /* IS_PED_VALID */ sub_19402( l_U1120[I] )))
        {
            SET_PED_CAN_AVOID_DEATH_ZONES( l_U1120[I], 0 );
            REGISTER_TARGET( l_U1120[I],  /* PLAYER_PED_ID */ sub_1456() );
            SET_LOCKED_TARGET( l_U1120[I],  /* PLAYER_PED_ID */ sub_1456() );
            if (I == 0)
            {
                TASK_ATTACK_MOVE( l_U1120[I], -2.93000000, -317.14000000, -4.16000000, 0.50000000, 20, -1, 4 );
            }
            else if (I == 1)
            {
                TASK_ATTACK_MOVE( l_U1120[I], -5.14000000, -316.26000000, -4.16000000, 0.50000000, 20, -1, 4 );
            }
        }
    }
     /* PED_TASK_ATTACK_MOVE */ sub_87443( l_U1084[0], -3.79000000, -313.70000000, -4.16000000, 1, 2, -1082130432, 3 );
     /* PED_TASK_ATTACK_MOVE */ sub_87443( l_U1084[1], -5.05000000, -316.72000000, -4.16000000, 1, 2, -1082130432, 3 );
    return;
}

/* PED_TASK_ATTACK_MOVE */ void sub_87443(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7)
{
    if ( /* IS_PED_VALID */ sub_19402( uParam0 ))
    {
        CLEAR_PED_TASKS_IMMEDIATELY( uParam0 );
        TASK_ATTACK_MOVE( uParam0, uParam1, uParam4, uParam5, uParam6, uParam7 );
    }
    return;
}

/* UPDATE_KITCHEN_TETHERING */ void sub_87590()
{
    if ( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( l_U1385 ))
    {
        if (NOT l_U1736)
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_KITCHEN_TETHERING - In kitchen half, untether", 0 );
             /* PED_ARRAY_RESET_TETHER */ sub_87725( ref l_U1084 );
             /* PED_ARRAY_RESET_TETHER */ sub_87725( ref l_U1120 );
            l_U1736 = 1;
        }
    }
    if ( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( l_U1406 ))
    {
        if (l_U1736)
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_KITCHEN_TETHERING - In bar half, tether", 0 );
             /* PED_ARRAY_SET_TETHERBOX */ sub_42610( ref l_U1084, l_U1722, 1 );
             /* PED_ARRAY_SET_TETHERBOX */ sub_42610( ref l_U1120, l_U1722, 1 );
            l_U1736 = 0;
        }
    }
    return;
}

/* PED_ARRAY_RESET_TETHER */ void sub_87725(unknown uParam0)
{
    int I;

    for ( I = 0; I <= ((uParam0^) - 1); I++ )
    {
        if ( /* IS_PED_VALID */ sub_19402( (uParam0^)[I] ))
        {
            RESET_PED_TETHERING( (uParam0^)[I] );
        }
    }
    return;
}

/* UNLOCK_ALLEY_DOORS */ void sub_88193()
{
     /* WRITESCRIPTLOG */ sub_745( "SBA", "UNLOCK_ALLEY_DOORS", "***" );
     /* P_SETDOORLOCKED */ sub_17258( ref g_U2055, 0 );
     /* P_SETDOORLOCKED */ sub_17258( ref g_U2062, 0 );
    return;
}

/* P_DIAL_MAX_PASSOS_LAST_ENEMY */ void sub_88403()
{
     /* WRITESCRIPTLOG */ sub_745( "SBA", "P_DIAL_MAX_PASSOS_LAST_ENEMY", "***" );
    if ( /* IS_PED_VALID */ sub_19402( g_U750 ))
    {
        if (NOT (IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )))
        {
             /* RESET_SCRIPT_SPEECH_STRUCT */ sub_48304( ref l_U1908 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 1,  /* PLAYER_PED_ID */ sub_1456(), "MAX", ref l_U1908, 2, 0 );
             /* ADD_PED_FOR_SCRIPT_SPEECH */ sub_48424( 2, g_U750, "PASSOS", ref l_U1908, 2, 0 );
             /* PLAY_SINGLE_SPEECH */ sub_48670( "SNYC_LGBM", ref l_U1908, 8, 1 );
        }
    }
    return;
}

/* P_HANDLE_DIAL_MAX_HANG_OUT_BASEMENT */ void sub_88627()
{
    switch (l_U1887)
    {
        case 0:
        if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U1810 ))
            {
                 /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_79555( "SNYC_LSG1", ref l_U1876 );
                 /* CREATETIMER */ sub_13297( ref l_U1810, 20000, 1, 0 );
                 /* STARTTIMER */ sub_24336( ref l_U1810 );
                l_U1887++;
                DISPLAYF( "P_HANDLE_DIAL_MAX_HANG_OUT_BASEMENT: going to {}", 1, 513, l_U1887 );
            }
        }
        break;
        case 1:
        if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U1810 ))
            {
                 /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_79555( "SNYC_LSG2", ref l_U1876 );
                 /* CREATETIMER */ sub_13297( ref l_U1810, 20000, 1, 0 );
                 /* STARTTIMER */ sub_24336( ref l_U1810 );
                l_U1887++;
                DISPLAYF( "P_HANDLE_DIAL_MAX_HANG_OUT_BASEMENT: going to {}", 1, 513, l_U1887 );
            }
        }
        break;
        case 2:
        if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U1810 ))
            {
                 /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_79555( "SNYC_HFCR", ref l_U1876 );
                 /* CREATETIMER */ sub_13297( ref l_U1810, 20000, 1, 0 );
                 /* STARTTIMER */ sub_24336( ref l_U1810 );
                l_U1887++;
                DISPLAYF( "P_HANDLE_DIAL_MAX_HANG_OUT_BASEMENT: going to {}", 1, 513, l_U1887 );
            }
        }
        break;
        case 3:
        if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U1810 ))
            {
                 /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_79555( "SNYC_MSWHG4", ref l_U1876 );
                 /* CREATETIMER */ sub_13297( ref l_U1810, 20000, 1, 0 );
                 /* STARTTIMER */ sub_24336( ref l_U1810 );
                l_U1887++;
                DISPLAYF( "P_HANDLE_DIAL_MAX_HANG_OUT_BASEMENT: going to {}", 1, 513, l_U1887 );
            }
        }
        break;
        case 4:
        if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U1810 ))
            {
                 /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_79555( "SNYC_MLATDA", ref l_U1876 );
                 /* CREATETIMER */ sub_13297( ref l_U1810, 20000, 1, 0 );
                 /* STARTTIMER */ sub_24336( ref l_U1810 );
                l_U1887++;
                DISPLAYF( "P_HANDLE_DIAL_MAX_HANG_OUT_BASEMENT: going to {}", 1, 513, l_U1887 );
            }
        }
        break;
        case 5:
        if (NOT ( /* IS_ANY_SPEECH_CURRENTLY_PLAYING */ sub_66130()))
        {
            if ( /* ISTIMERDONE */ sub_24480( ref l_U1810 ))
            {
                 /* P_SPEECH_PLAY_MAX_MONOLOGUE */ sub_79555( "SNYC_MSHR2", ref l_U1876 );
                l_U1887++;
                DISPLAYF( "P_HANDLE_DIAL_MAX_HANG_OUT_BASEMENT: going to {}", 1, 513, l_U1887 );
            }
        }
        break;
        case 6: break;
    }
    return;
}

/* IS_WEAPON_TWO_HANDED */ int sub_89753(unknown uParam0)
{
    int iVar3;

    if ((GET_DOES_WEAPON_EXIST( uParam0 )) == 1)
    {
        iVar3 = GET_WEAPON_TYPE( uParam0 );
        if ((iVar3 == -2075384407) || ((iVar3 == 10648147) || ((iVar3 == 1224272620) || ((iVar3 == 1478009203) || ((iVar3 == 1964270085) || ((iVar3 == -110877124) || ((iVar3 == 427207702) || ((iVar3 == 319712764) || ((iVar3 == 514118749) || ((iVar3 == -184942895) || ((iVar3 == -168327769) || ((iVar3 == 434544317) || ((iVar3 == -1659006841) || ((iVar3 == 930042831) || ((iVar3 == 1001413062) || ((iVar3 == 377623895) || ((iVar3 == -1312131151) || ((iVar3 == -1787162676) || ((iVar3 == 724901397) || ((iVar3 == 57534114) || ((iVar3 == 840671040) || ((iVar3 == 1308526797) || ((iVar3 == -1074756423) || ((iVar3 == 1992962408) || (iVar3 == -1013714740)))))))))))))))))))))))))
        {
            return 1;
        }
    }
    return 0;
}

/* P_EQUIP_PLAYER_WITH_SINGLE_HANDED_WEAPON */ void sub_90063(unknown uParam0)
{
    int iVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )) == 0)
    {
        iVar3 = 0;
        uVar4 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1456(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar4 )) == 0)
        {
            iVar3 = 1;
        }
        if ((( /* IS_WEAPON_SINGLE_HANDED */ sub_90186( uVar4 )) == 0) AND ((GET_DOES_WEAPON_EXIST( uVar4 )) == 1))
        {
            iVar3 = 1;
        }
        if (iVar3 == 1)
        {
            uVar5 =  /* F_GET_SINGLE_HANDED_WEAPON_FROM_PLAYER */ sub_90421();
            if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
            {
                SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_1456(), uVar5, 0, uParam0 );
            }
        }
    }
    return;
}

/* IS_WEAPON_SINGLE_HANDED */ int sub_90186(unknown uParam0)
{
    int iVar3;

    if ((GET_DOES_WEAPON_EXIST( uParam0 )) == 1)
    {
        iVar3 = GET_WEAPON_TYPE( uParam0 );
        if ((iVar3 == 1194438308) || ((iVar3 == -76667461) || ((iVar3 == -1404433099) || ((iVar3 == 1131969637) || ((iVar3 == -691403429) || ((iVar3 == 1845102363) || ((iVar3 == 150541352) || ((iVar3 == -820634585) || ((iVar3 == -612753081) || ((iVar3 == 811797242) || ((iVar3 == 68019059) || ((iVar3 == -1464892298) || ((iVar3 == 456708483) || ((iVar3 == -862236369) || (iVar3 == 406496141)))))))))))))))
        {
            return 1;
        }
    }
    return 0;
}

/* F_GET_SINGLE_HANDED_WEAPON_FROM_PLAYER */ int sub_90421()
{
    unknown Result;
    unknown uVar3;
    unknown uVar4;
    unknown uVar5;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )) == 0)
    {
        Result = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1456(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( Result )) == 1)
        {
            if (( /* IS_WEAPON_SINGLE_HANDED */ sub_90186( Result )) == 1)
            {
                return Result;
            }
        }
        uVar3 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1456(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar3 )) == 1)
        {
            return uVar3;
        }
        uVar4 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_1456(), 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar4 )) == 1)
        {
            return uVar4;
        }
        uVar5 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_1456(), 1 );
        if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
        {
            return uVar5;
        }
    }
    return 0;
}

/* UPDATE_FORCEWALK_AND_TRIGGER_PAIR */ int sub_90716(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18, unknown uParam19, unknown uParam20, unknown uParam21, unknown uParam22, unknown uParam23, unknown uParam24, unknown uParam25, unknown uParam26, unknown uParam27, unknown uParam28, unknown uParam29, unknown uParam30, unknown uParam31, unknown uParam32, unknown uParam33, unknown uParam34, unknown uParam35, unknown uParam36, unknown uParam37, unknown uParam38, unknown uParam39, unknown uParam40, unknown uParam41, boolean bParam42)
{
    if ( /* IS_MAX_VALID */ sub_22677())
    {
        if ((NOT (GET_IS_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_1456() ))) AND ( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( uParam0 )))
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_FORCEWALK_AND_TRIGGER_PAIR - Force walk enabled", 0 );
            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_1456(), 1 );
        }
        else if ((GET_IS_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_1456() )) AND (NOT ( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( uParam0 ))))
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "UPDATE_FORCEWALK_AND_TRIGGER_PAIR - Force walk disabled", 0 );
            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_1456(), 0 );
        }
    }
    if ( /* F_ISPLAYERINTRIGGERBOX */ sub_64443( uParam21 ))
    {
        if (bParam42)
        {
            SET_PED_FORCED_TO_WALK(  /* PLAYER_PED_ID */ sub_1456(), 0 );
        }
        return 1;
    }
    return 0;
}

/* KILL_HANDLE_PASSOS_WAITING_SPEECH */ void sub_91058(unknown uParam0)
{
     /* KILL_SPEECH */ sub_49833( ref l_U123, uParam0 );
     /* KILL_SPEECH */ sub_49833( ref l_U133, uParam0 );
     /* KILL_SPEECH */ sub_49833( ref l_U143, uParam0 );
     /* WRITESCRIPTLOG */ sub_745( "SBA", "KILL_HANDLE_PASSOS_WAITING_SPEECH: Setting ePWS_State = ePWS_IdleState", 0 );
    l_U121 = 0;
    return;
}

/* UNLOAD_ASSETS_BAR */ void sub_91241()
{
     /* WRITESCRIPTLOG */ sub_745( "SBA", "UNLOAD_ASSETS_BAR", "***" );
     /* UNLOAD_ASSETS_UPSTAIRS */ sub_64830();
     /* UNLOAD_ASSETS_BASEMENT */ sub_91313();
    return;
}

/* UNLOAD_ASSETS_BASEMENT */ void sub_91313()
{
     /* WRITESCRIPTLOG */ sub_745( "SP", "UNLOAD_ASSETS_BASEMENT", 0 );
     /* UNLOADMODEL */ sub_64928( g_U2249 );
     /* UNLOADANIMDICT */ sub_38354( "PAS_INT" );
    return;
}

/* PLAY_MYC_MID_00 */ void sub_91504(boolean bParam0, boolean bParam1)
{
    int Result;
    unknown uVar5;
    unknown uVar6;

    Result = 0;
    switch (l_U640)
    {
        case 4:
         /* WRITESCRIPTLOG */ sub_745( "SBA", "PLAY_MYC_MID_00 start", "*****" );
         /* LOADSEAMLESSCUTSCENE */ sub_12444( ref l_U614, 1 );
         /* LOADISEQ */ sub_11669( 984969677, 1 );
         /* NIS_PRE_SETUP */ sub_27679( 1, 0, 0, 1 );
        if (NOT bParam0)
        {
             /* BLOCKLOAD_NYC_MID_00_ASSETS */ sub_91644();
             /* P_SETUP_NYC_MID_00 */ sub_91740();
        }
        if (bParam0)
        {
            CUTSCENE_REGISTER_ISEQ( 984969677 );
        }
         /* REGISTER_PEDS_NYC_MID_00 */ sub_91892( bParam0 );
         /* WRITESCRIPTLOG */ sub_745( "RJM", "PLAY_MYC_MID_00 - hiding doors", 0 );
        uVar5 = DOOR_FIND_CLOSEST( g_U2055._fU0, g_U2055._fU4 );
        if (DOES_OBJECT_EXIST( uVar5 ))
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "Registering Left Door", 0 );
            REGISTER_OBJECT_PRE_SEAMLESS_CUTSCENE( uVar5, "P_DR_EXT", 0 );
        }
        uVar6 = DOOR_FIND_CLOSEST( g_U2062._fU0, g_U2062._fU4 );
        if (DOES_OBJECT_EXIST( uVar6 ))
        {
             /* WRITESCRIPTLOG */ sub_745( "RJM", "Registering Right Door", 0 );
            REGISTER_OBJECT_PRE_SEAMLESS_CUTSCENE( uVar6, "P_DR_EXT01", 0 );
        }
        if (bParam1)
        {
            START_CUTSCENE_CAPTURE( ref l_U614 );
        }
        CUTSCENE_ENABLE_SKIP( 0 );
        START_SEAMLESS_CUTSCENE();
        l_U610 = 13;
        l_U640 = 6;
        break;
        case 6:
        if (HAS_CUTSCENE_FINISHED())
        {
            if (bParam1)
            {
                STOP_CUTSCENE_CAPTURE();
            }
             /* P_SET_TWO_HANDED_WEAPON_VISIBLE */ sub_93141( l_U622, 1 );
             /* P_PLAYER_UNHOLSTER_WEAPONS */ sub_93750( l_U622, 1 );
            if (bParam0)
            {
                CAMERA_PLAY_ANIMATED( "LEVEL_S_NYBAR_CP_02", "BLEND_OUT_MID_00_NYBAR_RIFLE_CAM", 0, -13.01500000, -318.12700000, 0.04400000, 0.00000000, 0, 0 );
            }
             /* CLEANPED */ sub_18137( l_U641 );
            if (NOT bParam0)
            {
                 /* UNLOADMODEL */ sub_64928( 2024698471 );
            }
             /* NIS_POST_SETUP */ sub_74264( 1, 1 );
             /* WRITESCRIPTLOG */ sub_745( "SBA", "PLAY_MYC_MID_00 end", "*****" );
            Result = 1;
            l_U640 = 0;
        }
        else if (GET_CUTSCENE_TIME_MS() >= 12000)
        {
            CUTSCENE_ENABLE_SKIP( 1 );
        }
        break;
    }
    return Result;
}

/* BLOCKLOAD_NYC_MID_00_ASSETS */ void sub_91644()
{
     /* WRITESCRIPTLOG */ sub_745( "SBA", "P_SETUP_NYC_MID_00", "***" );
     /* BLOCKLOADMODEL */ sub_54861( 2024698471 );
    return;
}

/* P_SETUP_NYC_MID_00 */ void sub_91740()
{
     /* WRITESCRIPTLOG */ sub_745( "SBA", "P_SETUP_NYC_MID_00", "***" );
     /* P_CREATEPEDSTRUCTWITHNAME */ sub_13569( ref l_U642, 0, 0, 0, 0.00000000, -1756913695, 26, 6, 0, 0, 0 );
     /* CLEANPED */ sub_18137( l_U641 );
    l_U641 =  /* CREATEPED */ sub_18676( ref l_U642 );
    return;
}

/* REGISTER_PEDS_NYC_MID_00 */ void sub_91892(boolean bParam0)
{
    unknown uVar3;

     /* WRITESCRIPTLOG */ sub_745( "SBA", "REGISTER_PEDS_NYC_MID_00", "***" );
    if (bParam0)
    {
         /* WRITESCRIPTLOG */ sub_745( "SBA", "FROM FLOW: Registering passos with NYC_MID_00", "***" );
        uVar3 = g_U750;
    }
    else
    {
         /* WRITESCRIPTLOG */ sub_745( "SBA", "FROM CUTSCENE SCRIPT: Registering passos with NYC_MID_00", "***" );
        uVar3 = l_U641;
    }
    if ( /* IS_PED_VALID */ sub_19402( uVar3 ))
    {
        REGISTER_PED_PRE_SEAMLESS_CUTSCENE( uVar3, "FB_Pass_NY", 0 );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND( uVar3, 0, 0 ), "W_PI_Clt1911_Aa_H^1", 0 );
        ISEQ_REGISTER_ENTITY( 984969677, "passos", uVar3, 0 );
        CUTSCENE_REGISTER_PED_TELEPORT( uVar3, g_U2436, g_U2439 );
    }
    if ( /* IS_MAX_VALID */ sub_22677())
    {
        if (bParam0)
        {
             /* P_PLAYER_HOLSTER_WEAPONS */ sub_92284( ref l_U622, 1, 1 );
             /* P_SET_TWO_HANDED_WEAPON_VISIBLE */ sub_93141( l_U622, 0 );
             /* P_EQUIP_PLAYER_WITH_SINGLE_HANDED_WEAPON */ sub_90063( 1 );
        }
        CUTSCENE_REGISTER_ACTION_TREE_PLAY_NODE(  /* PLAYER_PED_ID */ sub_1456(), "/Global/Player/PlayerRoot/PLAYER_INITIALIZE_IDLE" );
        REGISTER_WEAPON_PRE_SEAMLESS_CUTSCENE( GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1456(), 0, 0 ), "W_PI_Clt1911_Aa_H", 0 );
        ISEQ_REGISTER_ENTITY( 984969677, "max",  /* PLAYER_PED_ID */ sub_1456(), 0 );
    }
    return;
}

/* P_PLAYER_HOLSTER_WEAPONS */ void sub_92284(int iParam0, int iParam1, unknown uParam2)
{
    unknown uVar5;
    unknown uVar6;
    unknown uVar7;
    unknown uVar8;
    unknown uVar9;
    unknown uVar10;
    unknown uVar11;
    unknown uVar12;
    unknown uVar13;

     /* RESET_WEAPON_CONFIG */ sub_92323( iParam0 );
    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )) == 0)
    {
        uVar5 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1456(), 0, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar5 )) == 1)
        {
            if (( /* IS_WEAPON_SINGLE_HANDED */ sub_90186( uVar5 )) == 1)
            {
                ref iParam0->_fU0->_fU0 = uVar5;
                ref iParam0->_fU0->_fU4 = GET_WEAPON_TYPE( uVar5 );
            }
            else if (( /* IS_WEAPON_TWO_HANDED */ sub_89753( uVar5 )) == 1)
            {
                ref iParam0->_fU24->_fU0 = uVar5;
                ref iParam0->_fU24->_fU4 = GET_WEAPON_TYPE( uVar5 );
            }
        }
        uVar6 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1456(), 1, 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar6 )) == 1)
        {
            ref iParam0->_fU12->_fU0 = uVar6;
            ref iParam0->_fU12->_fU4 = GET_WEAPON_TYPE( uVar6 );
        }
        uVar7 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_1456(), 0 );
        if ((GET_DOES_WEAPON_EXIST( uVar7 )) == 1)
        {
            ref iParam0->_fU36->_fU0 = uVar7;
            ref iParam0->_fU36->_fU4 = GET_WEAPON_TYPE( uVar7 );
        }
        uVar8 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_1456(), 1 );
        if ((GET_DOES_WEAPON_EXIST( uVar8 )) == 1)
        {
            ref iParam0->_fU48->_fU0 = uVar8;
            ref iParam0->_fU48->_fU4 = GET_WEAPON_TYPE( uVar8 );
        }
        uVar9 = GET_WEAPON_FROM_HOLSTER(  /* PLAYER_PED_ID */ sub_1456(), 2 );
        if ((GET_DOES_WEAPON_EXIST( uVar9 )) == 1)
        {
            ref iParam0->_fU60->_fU0 = uVar9;
            ref iParam0->_fU60->_fU4 = GET_WEAPON_TYPE( uVar9 );
        }
    }
    if (iParam1 == 0)
    {
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )) == 0)
        {
            uVar10 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1456(), 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar10 )) == 1)
            {
                SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_1456(), 0, 0, uParam2 );
            }
            uVar11 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1456(), 1, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar11 )) == 1)
            {
                SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_1456(), 0, 1, uParam2 );
            }
        }
    }
    else if (iParam1 == 1)
    {
        if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )) == 0)
        {
            uVar12 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1456(), 0, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar12 )) == 1)
            {
                if (( /* IS_WEAPON_TWO_HANDED */ sub_89753( uVar12 )) == 1)
                {
                    SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_1456(), 0, 0, uParam2 );
                }
            }
            uVar13 = GET_WEAPON_FROM_HAND(  /* PLAYER_PED_ID */ sub_1456(), 1, 0 );
            if ((GET_DOES_WEAPON_EXIST( uVar13 )) == 1)
            {
                SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_1456(), 0, 1, uParam2 );
            }
        }
    }
    return;
}

/* RESET_WEAPON_CONFIG */ void sub_92323(int iParam0)
{
    ref iParam0->_fU0->_fU0 = 0;
    ref iParam0->_fU0->_fU4 = 0;
    ref iParam0->_fU12->_fU0 = 0;
    ref iParam0->_fU12->_fU4 = 0;
    ref iParam0->_fU24->_fU0 = 0;
    ref iParam0->_fU24->_fU4 = 0;
    ref iParam0->_fU36->_fU0 = 0;
    ref iParam0->_fU36->_fU4 = 0;
    ref iParam0->_fU48->_fU0 = 0;
    ref iParam0->_fU48->_fU4 = 0;
    ref iParam0->_fU60->_fU0 = 0;
    ref iParam0->_fU60->_fU4 = 0;
    return;
}

/* P_SET_TWO_HANDED_WEAPON_VISIBLE */ void sub_93141(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18)
{
    unknown uVar21;
    unknown uVar22;

    uVar21 = uParam0._fU24._fU0;
    if ((GET_DOES_WEAPON_EXIST( uVar21 )) == 1)
    {
        SET_WEAPON_VISIBLE( uVar21, uParam18 );
    }
    uVar22 = uParam0._fU60._fU0;
    if ((GET_DOES_WEAPON_EXIST( uVar22 )) == 1)
    {
        SET_WEAPON_VISIBLE( uVar22, uParam18 );
    }
    return;
}

/* P_PLAYER_UNHOLSTER_WEAPONS */ void sub_93750(unknown uParam0, unknown uParam1, unknown uParam2, unknown uParam3, unknown uParam4, unknown uParam5, unknown uParam6, unknown uParam7, unknown uParam8, unknown uParam9, unknown uParam10, unknown uParam11, unknown uParam12, unknown uParam13, unknown uParam14, unknown uParam15, unknown uParam16, unknown uParam17, unknown uParam18)
{
    unknown uVar21;
    unknown uVar22;
    unknown uVar23;

    if ((IS_PED_DEAD(  /* PLAYER_PED_ID */ sub_1456() )) == 0)
    {
        uVar21 = uParam0._fU0._fU0;
        if ((GET_DOES_WEAPON_EXIST( uVar21 )) == 1)
        {
            SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_1456(), uVar21, 0, uParam18 );
        }
        uVar22 = uParam0._fU12._fU0;
        if ((GET_DOES_WEAPON_EXIST( uVar22 )) == 1)
        {
            SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_1456(), uVar22, 1, uParam18 );
        }
        uVar23 = uParam0._fU24._fU0;
        if ((GET_DOES_WEAPON_EXIST( uVar23 )) == 1)
        {
            SELECT_WEAPON_TO_HAND(  /* PLAYER_PED_ID */ sub_1456(), uVar23, 0, uParam18 );
        }
    }
    return;
}

/* P_UNLOAD_WEAPONS */ void sub_94405(unknown uParam0)
{
    switch (uParam0)
    {
        case 0:
        case 2:
        case 4:
        case 5: break;
    }
    return;
}

